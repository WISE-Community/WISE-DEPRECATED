<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MySystem Diagram</title>
    <link rel="icon" href="res/favicon.ico" type="image/png" />
    <link rel="SHORTCUT ICON" href="res/favicon.ico" type="image/png" />

    <!-- this version uses some concatentated assetts, generated by the rake task-->
    <style> /* TEMP OVERRIDES */
      div.WireIt-ImageContainer div.body {
          border: 1px solid #CCC;
      }

      div.title {
          font-size: 14px;
          float: none;
          text-align: center;
          color: #333;
      }

      #yui-gen4 {
          width: 165px;
      }

      #yui-gen5 {
          width: 160px;
      }

      .WiringEditor-icon-module img {
          width: 70%;
      }

      .WiringEditor-icon-module {
          height: 56px;
      }
    </style>
  </head>
  <body class="yui-skin-sam">
    <script> 
      var mySystem; // global variable so it can be accessed by other functions
      //var myDataService; 

      /*
      document.observe("dom:loaded", function() { 
          mySystem = new MySystem("modules.json"); 
          var myDataService = new VleDS(vle); 
          mySystem.setDataService(myDataService); 
          mySystem.load(); 
      }); 
      */

      function loadContentAfterScriptsLoad(node){
          mysystem.config.dataService = new VleDS(vle);
          mysystem.config.jsonURL = node.getContent().getContentString();
          mySystem = mysystem.loadMySystem();

          /*
          if(mySystem == null) {
              //mysystem.dataService = new VleDS(vle);
              //mySystem = mysystem_load();
              //mySystem.loadModulesFromJSON(node.getContent().getContentString()); 

              mySystem = new mysystem.MySystem();
              mySystem.loadModulesFromJSON(node.getContent().getContentString()); 
              var myDataService = new VleDS(vle); 
              mySystem.setDataService(myDataService); 
              mySystem.load(); 
          };
          */
          //svgdraw.render();
          /* printing test
          $('#logo').click(function () {
            var printer = new MySystemPrint(vle.getLatestStateForCurrentNode(), 'center');
          });
          */
      };


      function loadContent(node){
          scriptloader.loadScripts('mysystem', node.contentPanel.window.document, node.id, eventManager);
      };

      onExit = function () { 
          debug("saving mysystem data before we leave"); 
          mySystem.save(); 
          debug("saved!"); 
      }; 
    </script>

    <div id="goal_panel">
      <span id="goal_panel_text"></span>
      <img id="goal_panel_icon"/>
    </div>

        <div id="property_editor">
          <div id="prop_bar">
            <div id="property_editor_closer"></div>
            <h4><span id="prop_name"></span></h4>
          </div>
          <div id="icon_spot"></div>

          <form id="prop_form" name="prop_form">
          </form>
          <div id="palette"></div>
        </div>

    <div id="editing_window">
      <div id="top">
        <div id="logo" class="logo">MySystem</div>
        <div id="toolbar"></div>
        <div class="topright">
        </div>
      </div>

      <div id="left">
      </div>

      <div id="center">
      </div>

    </div> <!-- editing window end -->

    <!--  
    <div id="helpPanel">
    <div class="hd">MySystem Diagram: Instructions Panel</div>
    <div class="bd" style="text-align: left;"><br />
    <p style="font-weight: bold;">What am I supposed to do?</p>
    <ul style="margin: 0 0 15px 20px; padding: 0 0 0 20px">
        <li>Use MySystem to build a visual diagram of convection currents
        in the Earth.</li>
        <li>Include all the "players" in convection.</li>
        <li><b>Describe the processes of convection by labeling the
        arrows and adding text.</b></li>
        <li>Show how energy enters and moves through the diagram.</li>
    </ul>
    <p style="font-weight: bold;">How do I free up space to draw my
    diagram?</p>
    <ul style="margin: 0 0 15px 20px; padding: 0 0 0 20px">
        <li>Click the <i>Full Screen</i> button at very top of the screen
        to hide/show the navigation bar.</li>
        <li>Click the <b><</b> symbol next to "Objects and Labels" to
        hide/show the left panel.</li>
        <li>Click the <b>></b> symbol next to "Properties" to hide/show
        the right panel.</li>
    </ul>
    <p style="font-weight: bold;">How do I place and connect objects?</p>
    <ul style="margin: 0 0 15px 20px; padding: 0 0 0 20px">
        <li>Drag and drop an object from the left panel into the central
        diagraming work area.</li>
        <li>Drag your cursor from one circle to another. This creates a <i>Connection
        Arrow</i> between two objects.</li>
        <li><b>Make sure you're showing the correct <i>direction</i>
        of energy flow with the arrows.</b></li>
    </ul>
    <p style="font-weight: bold;">How do I label my Connection Arrows?</p>
    <ul style="margin: 0 0 15px 20px; padding: 0 0 0 20px">
        <li>Click the text label in the middle of the Connection Arrow.</li>
        <li>Look in the <b>Properties</b> panel and click on the <i>Name</i>
        field. Edit this field to change the text label for your Connection
        Arrow.</li>
    </ul>
    <p style="font-weight: bold;">How do I delete a Connection Arrow?</p>
    <ul style="margin: 0 0 15px 20px; padding: 0 0 0 20px">
        <li>Click on the Connection Arrow you want to delete.</li>
        <li>Move your cursor close to one of the blue connection circles.
        A Scissors icon will appear.</li>
        <li>Click on the scissors icon to the delete the Connection Arrow.</li>
    </ul>
    </div>
    </div>
    -->
  </body>
</html>
