!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=463)}([function(t,e,n){(function(t){t.exports=function(){"use strict";var e,i;function r(){return e.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function d(t,e){for(var n in e)h(e,n)&&(t[n]=e[n]);return h(e,"toString")&&(t.toString=e.toString),h(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,i){return Ie(t,e,n,i,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function m(t){if(null==t._isValid){var e=p(t),n=i.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function g(t){var e=f(NaN);return null!=t?d(p(e),t):p(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var v=r.momentProperties=[];function y(t,e){var n,i,r;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),v.length>0)for(n=0;n<v.length;n++)a(r=e[i=v[n]])||(t[i]=r);return t}var b=!1;function _(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,r.updateOffset(this),b=!1)}function w(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function S(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function x(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=S(e)),n}function C(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&x(t[i])!==x(e[i]))&&s++;return s+o}function k(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var n=!0;return d(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],s=0;s<arguments.length;s++){if(i="","object"==typeof arguments[s]){for(var a in i+="\n["+s+"] ",arguments[0])i+=a+": "+arguments[0][a]+", ";i=i.slice(0,-2)}else i=arguments[s];o.push(i)}k(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)},e)}var M,E={};function A(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),E[t]||(k(e),E[t]=!0)}function I(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function $(t,e){var n,i=d({},t);for(n in e)h(e,n)&&(s(t[n])&&s(e[n])?(i[n]={},d(i[n],t[n]),d(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)h(t,n)&&!h(e,n)&&s(t[n])&&(i[n]=d({},i[n]));return i}function D(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)h(t,e)&&n.push(e);return n};var L={};function P(t,e){var n=t.toLowerCase();L[n]=L[n+"s"]=L[e]=t}function O(t){return"string"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function N(t){var e,n,i={};for(n in t)h(t,n)&&(e=O(n))&&(i[e]=t[n]);return i}var j={};function R(t,e){j[t]=e}function B(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Y=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},W={};function z(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(W[t]=r),e&&(W[e[0]]=function(){return B(r.apply(this,arguments),e[1],e[2])}),n&&(W[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function U(t,e){return t.isValid()?(e=V(e,t.localeData()),H[e]=H[e]||function(t){var e,n,i,r=t.match(F);for(e=0,n=r.length;e<n;e++)W[r[e]]?r[e]=W[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=I(r[i])?r[i].call(e,t):r[i];return o}}(e),H[e](t)):t.localeData().invalidDate()}function V(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(Y.lastIndex=0;n>=0&&Y.test(t);)t=t.replace(Y,i),Y.lastIndex=0,n-=1;return t}var G=/\d/,q=/\d\d/,X=/\d{3}/,K=/\d{4}/,J=/[+-]?\d{6}/,Z=/\d\d?/,Q=/\d\d\d\d?/,tt=/\d\d\d\d\d\d?/,et=/\d{1,3}/,nt=/\d{1,4}/,it=/[+-]?\d{1,6}/,rt=/\d+/,ot=/[+-]?\d+/,st=/Z|[+-]\d\d:?\d\d/gi,at=/Z|[+-]\d\d(?::?\d\d)?/gi,lt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ct={};function ut(t,e,n){ct[t]=I(e)?e:function(t,i){return t&&n?n:e}}function ht(t,e){return h(ct,t)?ct[t](e._strict,e._locale):new RegExp(dt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})))}function dt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ft={};function pt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),l(e)&&(i=function(t,n){n[e]=x(t)}),n=0;n<t.length;n++)ft[t[n]]=i}function mt(t,e){pt(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function gt(t,e,n){null!=e&&h(ft,t)&&ft[t](e,n._a,n,t)}var vt=0,yt=1,bt=2,_t=3,wt=4,St=5,xt=6,Ct=7,kt=8;function Tt(t){return Mt(t)?366:365}function Mt(t){return t%4==0&&t%100!=0||t%400==0}z("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),P("year","y"),R("year",1),ut("Y",ot),ut("YY",Z,q),ut("YYYY",nt,K),ut("YYYYY",it,J),ut("YYYYYY",it,J),pt(["YYYYY","YYYYYY"],vt),pt("YYYY",function(t,e){e[vt]=2===t.length?r.parseTwoDigitYear(t):x(t)}),pt("YY",function(t,e){e[vt]=r.parseTwoDigitYear(t)}),pt("Y",function(t,e){e[vt]=parseInt(t,10)}),r.parseTwoDigitYear=function(t){return x(t)+(x(t)>68?1900:2e3)};var Et,At=It("FullYear",!0);function It(t,e){return function(n){return null!=n?(Dt(this,t,n),r.updateOffset(this,e),this):$t(this,t)}}function $t(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Dt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&Mt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Lt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,i=(e%(n=12)+n)%n;return t+=(e-i)/12,1===i?Mt(t)?29:28:31-i%7%2}Et=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),P("month","M"),R("month",8),ut("M",Z),ut("MM",Z,q),ut("MMM",function(t,e){return e.monthsShortRegex(t)}),ut("MMMM",function(t,e){return e.monthsRegex(t)}),pt(["M","MM"],function(t,e){e[yt]=x(t)-1}),pt(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[yt]=r:p(n).invalidMonth=t});var Pt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ot="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function jt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=x(e);else if(!l(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Rt(t){return null!=t?(jt(this,t),r.updateOffset(this,!0),this):$t(this,"Month")}var Bt=lt,Ft=lt;function Yt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=f([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=dt(i[e]),r[e]=dt(r[e]);for(e=0;e<24;e++)o[e]=dt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ht(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Wt(t,e,n){var i=7+e-n;return-(7+Ht(t,0,i).getUTCDay()-e)%7+i-1}function zt(t,e,n,i,r){var o,s,a=1+7*(e-1)+(7+n-i)%7+Wt(t,i,r);return a<=0?s=Tt(o=t-1)+a:a>Tt(t)?(o=t+1,s=a-Tt(t)):(o=t,s=a),{year:o,dayOfYear:s}}function Ut(t,e,n){var i,r,o=Wt(t.year(),e,n),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?i=s+Vt(r=t.year()-1,e,n):s>Vt(t.year(),e,n)?(i=s-Vt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=s),{week:i,year:r}}function Vt(t,e,n){var i=Wt(t,e,n),r=Wt(t+1,e,n);return(Tt(t)-i+r)/7}function Gt(t,e){return t.slice(e,7).concat(t.slice(0,e))}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),R("week",5),R("isoWeek",5),ut("w",Z),ut("ww",Z,q),ut("W",Z),ut("WW",Z,q),mt(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=x(t)}),z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),ut("d",Z),ut("e",Z),ut("E",Z),ut("dd",function(t,e){return e.weekdaysMinRegex(t)}),ut("ddd",function(t,e){return e.weekdaysShortRegex(t)}),ut("dddd",function(t,e){return e.weekdaysRegex(t)}),mt(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:p(n).invalidWeekday=t}),mt(["d","e","E"],function(t,e,n,i){e[i]=x(t)});var qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Jt=lt,Zt=lt,Qt=lt;function te(){function t(t,e){return e.length-t.length}var e,n,i,r,o,s=[],a=[],l=[],c=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),s.push(i),a.push(r),l.push(o),c.push(i),c.push(r),c.push(o);for(s.sort(t),a.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)a[e]=dt(a[e]),l[e]=dt(l[e]),c[e]=dt(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ee(){return this.hours()%12||12}function ne(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function ie(t,e){return e._meridiemParse}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,ee),z("k",["kk",2],0,function(){return this.hours()||24}),z("hmm",0,0,function(){return""+ee.apply(this)+B(this.minutes(),2)}),z("hmmss",0,0,function(){return""+ee.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),ne("a",!0),ne("A",!1),P("hour","h"),R("hour",13),ut("a",ie),ut("A",ie),ut("H",Z),ut("h",Z),ut("k",Z),ut("HH",Z,q),ut("hh",Z,q),ut("kk",Z,q),ut("hmm",Q),ut("hmmss",tt),ut("Hmm",Q),ut("Hmmss",tt),pt(["H","HH"],_t),pt(["k","kk"],function(t,e,n){var i=x(t);e[_t]=24===i?0:i}),pt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),pt(["h","hh"],function(t,e,n){e[_t]=x(t),p(n).bigHour=!0}),pt("hmm",function(t,e,n){var i=t.length-2;e[_t]=x(t.substr(0,i)),e[wt]=x(t.substr(i)),p(n).bigHour=!0}),pt("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[_t]=x(t.substr(0,i)),e[wt]=x(t.substr(i,2)),e[St]=x(t.substr(r)),p(n).bigHour=!0}),pt("Hmm",function(t,e,n){var i=t.length-2;e[_t]=x(t.substr(0,i)),e[wt]=x(t.substr(i))}),pt("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[_t]=x(t.substr(0,i)),e[wt]=x(t.substr(i,2)),e[St]=x(t.substr(r))});var re,oe=It("Hours",!0),se={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ot,monthsShort:Nt,week:{dow:0,doy:6},weekdays:qt,weekdaysMin:Kt,weekdaysShort:Xt,meridiemParse:/[ap]\.?m?\.?/i},ae={},le={};function ce(t){return t?t.toLowerCase().replace("_","-"):t}function ue(e){var i=null;if(!ae[e]&&void 0!==t&&t&&t.exports)try{i=re._abbr,n(289)("./"+e),he(i)}catch(t){}return ae[e]}function he(t,e){var n;return t&&((n=a(e)?fe(t):de(t,e))?re=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),re._abbr}function de(t,e){if(null!==e){var n,i=se;if(e.abbr=t,null!=ae[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ae[t]._config;else if(null!=e.parentLocale)if(null!=ae[e.parentLocale])i=ae[e.parentLocale]._config;else{if(null==(n=ue(e.parentLocale)))return le[e.parentLocale]||(le[e.parentLocale]=[]),le[e.parentLocale].push({name:t,config:e}),null;i=n._config}return ae[t]=new D($(i,e)),le[t]&&le[t].forEach(function(t){de(t.name,t.config)}),he(t),ae[t]}return delete ae[t],null}function fe(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return re;if(!o(t)){if(e=ue(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=ce(t[o]).split("-")).length,n=(n=ce(t[o+1]))?n.split("-"):null;e>0;){if(i=ue(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&C(r,n,!0)>=e-1)break;e--}o++}return re}(t)}function pe(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[yt]<0||n[yt]>11?yt:n[bt]<1||n[bt]>Lt(n[vt],n[yt])?bt:n[_t]<0||n[_t]>24||24===n[_t]&&(0!==n[wt]||0!==n[St]||0!==n[xt])?_t:n[wt]<0||n[wt]>59?wt:n[St]<0||n[St]>59?St:n[xt]<0||n[xt]>999?xt:-1,p(t)._overflowDayOfYear&&(e<vt||e>bt)&&(e=bt),p(t)._overflowWeeks&&-1===e&&(e=Ct),p(t)._overflowWeekday&&-1===e&&(e=kt),p(t).overflow=e),t}function me(t,e,n){return null!=t?t:null!=e?e:n}function ge(t){var e,n,i,o,s,a=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[bt]&&null==t._a[yt]&&function(t){var e,n,i,r,o,s,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,s=4,n=me(e.GG,t._a[vt],Ut($e(),1,4).year),i=me(e.W,1),((r=me(e.E,1))<1||r>7)&&(l=!0);else{o=t._locale._week.dow,s=t._locale._week.doy;var c=Ut($e(),o,s);n=me(e.gg,t._a[vt],c.year),i=me(e.w,c.week),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o}i<1||i>Vt(n,o,s)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(a=zt(n,i,r,o,s),t._a[vt]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=me(t._a[vt],i[vt]),(t._dayOfYear>Tt(s)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=Ht(s,0,t._dayOfYear),t._a[yt]=n.getUTCMonth(),t._a[bt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[_t]&&0===t._a[wt]&&0===t._a[St]&&0===t._a[xt]&&(t._nextDay=!0,t._a[_t]=0),t._d=(t._useUTC?Ht:function(t,e,n,i,r,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,r,o,s),a}).apply(null,a),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[_t]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}var ve=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/Z|[+-]\d\d(?::?\d\d)?/,_e=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],we=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Se=/^\/?Date\((\-?\d+)/i;function xe(t){var e,n,i,r,o,s,a=t._i,l=ve.exec(a)||ye.exec(a);if(l){for(p(t).iso=!0,e=0,n=_e.length;e<n;e++)if(_e[e][1].exec(l[1])){r=_e[e][0],i=!1!==_e[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=we.length;e<n;e++)if(we[e][1].exec(l[3])){o=(l[2]||" ")+we[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!be.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=r+(o||"")+(s||""),Ee(t)}else t._isValid=!1}var Ce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ke(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Te={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Me(t){var e,n,i,r,o,s,a,l=Ce.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){var c=(e=l[4],n=l[3],i=l[2],r=l[5],o=l[6],s=l[7],a=[ke(e),Nt.indexOf(n),parseInt(i,10),parseInt(r,10),parseInt(o,10)],s&&a.push(parseInt(s,10)),a);if(!function(t,e,n){return!t||Xt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],c,t))return;t._a=c,t._tzm=function(t,e,n){if(t)return Te[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(l[8],l[9],l[10]),t._d=Ht.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function Ee(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,n,i,o,s,a=""+t._i,l=a.length,c=0;for(i=V(t._f,t._locale).match(F)||[],e=0;e<i.length;e++)o=i[e],(n=(a.match(ht(o,t))||[])[0])&&((s=a.substr(0,a.indexOf(n))).length>0&&p(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),W[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),gt(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=l-c,a.length>0&&p(t).unusedInput.push(a),t._a[_t]<=12&&!0===p(t).bigHour&&t._a[_t]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[_t]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[_t],t._meridiem),ge(t),pe(t)}else Me(t);else xe(t)}function Ae(t){var e=t._i,n=t._f;return t._locale=t._locale||fe(t._l),null===e||void 0===n&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),w(e)?new _(pe(e)):(c(e)?t._d=e:o(n)?function(t){var e,n,i,r,o;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Ee(e),m(e)&&(o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,(null==i||o<i)&&(i=o,n=e));d(t,n||e)}(t):n?Ee(t):function(t){var e=t._i;a(e)?t._d=new Date(r.now()):c(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=Se.exec(t._i);null===e?(xe(t),!1===t._isValid&&(delete t._isValid,Me(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):o(e)?(t._a=u(e.slice(0),function(t){return parseInt(t,10)}),ge(t)):s(e)?function(t){if(!t._d){var e=N(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ge(t)}}(t):l(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),m(t)||(t._d=null),t))}function Ie(t,e,n,i,r){var a,l={};return!0!==n&&!1!==n||(i=n,n=void 0),(s(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||o(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=n,l._i=t,l._f=e,l._strict=i,(a=new _(pe(Ae(l))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function $e(t,e,n,i){return Ie(t,e,n,i,!1)}r.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var De=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=$e.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()}),Le=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=$e.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()});function Pe(t,e){var n,i;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return $e();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Oe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ne(t){var e=N(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===Et.call(Oe,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Oe.length;++i)if(t[Oe[i]]){if(n)return!1;parseFloat(t[Oe[i]])!==x(t[Oe[i]])&&(n=!0)}return!0}(e),this._milliseconds=+u+1e3*c+6e4*l+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=fe(),this._bubble()}function je(t){return t instanceof Ne}function Re(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Be(t,e){z(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+B(~~(t/60),2)+e+B(~~t%60,2)})}Be("Z",":"),Be("ZZ",""),ut("Z",at),ut("ZZ",at),pt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ye(at,t)});var Fe=/([\+\-]|\d\d)/gi;function Ye(t,e){var n=(e||"").match(t);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Fe)||["-",0,0],r=60*i[1]+x(i[2]);return 0===r?0:"+"===i[0]?r:-r}function He(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(w(t)||c(t)?t.valueOf():$e(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):$e(t).local()}function We(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function ze(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ue=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ve=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ge(t,e){var n,i,r,o,s,a,c=t,u=null;return je(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:l(t)?(c={},e?c[e]=t:c.milliseconds=t):(u=Ue.exec(t))?(n="-"===u[1]?-1:1,c={y:0,d:x(u[bt])*n,h:x(u[_t])*n,m:x(u[wt])*n,s:x(u[St])*n,ms:x(Re(1e3*u[xt]))*n}):(u=Ve.exec(t))?(n="-"===u[1]?-1:1,c={y:qe(u[2],n),M:qe(u[3],n),w:qe(u[4],n),d:qe(u[5],n),h:qe(u[6],n),m:qe(u[7],n),s:qe(u[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(o=$e(c.from),s=$e(c.to),r=o.isValid()&&s.isValid()?(s=He(s,o),o.isBefore(s)?a=Xe(o,s):((a=Xe(s,o)).milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0},(c={}).ms=r.milliseconds,c.M=r.months),i=new Ne(c),je(t)&&h(t,"_locale")&&(i._locale=t._locale),i}function qe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xe(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ke(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Je(this,Ge(n="string"==typeof n?+n:n,i),t),this}}function Je(t,e,n,i){var o=e._milliseconds,s=Re(e._days),a=Re(e._months);t.isValid()&&(i=null==i||i,a&&jt(t,$t(t,"Month")+a*n),s&&Dt(t,"Date",$t(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,s||a))}Ge.fn=Ne.prototype,Ge.invalid=function(){return Ge(NaN)};var Ze=Ke(1,"add"),Qe=Ke(-1,"subtract");function tn(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function en(t){var e;return void 0===t?this._locale._abbr:(null!=(e=fe(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function rn(){return this._locale}var on=1e3,sn=60*on,an=60*sn,ln=3506328*an;function cn(t,e){return(t%e+e)%e}function un(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-ln:new Date(t,e,n).valueOf()}function hn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-ln:Date.UTC(t,e,n)}function dn(t,e){z(0,[t,t.length],0,e)}function fn(t,e,n,i,r){var o;return null==t?Ut(this,i,r).year:(e>(o=Vt(t,i,r))&&(e=o),function(t,e,n,i,r){var o=zt(t,e,n,i,r),s=Ht(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e,n,i,r))}z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),dn("gggg","weekYear"),dn("ggggg","weekYear"),dn("GGGG","isoWeekYear"),dn("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),ut("G",ot),ut("g",ot),ut("GG",Z,q),ut("gg",Z,q),ut("GGGG",nt,K),ut("gggg",nt,K),ut("GGGGG",it,J),ut("ggggg",it,J),mt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=x(t)}),mt(["gg","GG"],function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),P("quarter","Q"),R("quarter",7),ut("Q",G),pt("Q",function(t,e){e[yt]=3*(x(t)-1)}),z("D",["DD",2],"Do","date"),P("date","D"),R("date",9),ut("D",Z),ut("DD",Z,q),ut("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),pt(["D","DD"],bt),pt("Do",function(t,e){e[bt]=x(t.match(Z)[0])});var pn=It("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),R("dayOfYear",4),ut("DDD",et),ut("DDDD",X),pt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=x(t)}),z("m",["mm",2],0,"minute"),P("minute","m"),R("minute",14),ut("m",Z),ut("mm",Z,q),pt(["m","mm"],wt);var mn=It("Minutes",!1);z("s",["ss",2],0,"second"),P("second","s"),R("second",15),ut("s",Z),ut("ss",Z,q),pt(["s","ss"],St);var gn,vn=It("Seconds",!1);for(z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),R("millisecond",16),ut("S",et,G),ut("SS",et,q),ut("SSS",et,X),gn="SSSS";gn.length<=9;gn+="S")ut(gn,rt);function yn(t,e){e[xt]=x(1e3*("0."+t))}for(gn="S";gn.length<=9;gn+="S")pt(gn,yn);var bn=It("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var _n=_.prototype;function wn(t){return t}_n.add=Ze,_n.calendar=function(t,e){var n=t||$e(),i=He(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=e&&(I(e[o])?e[o].call(this,n):e[o]);return this.format(s||this.localeData().calendar(o,this,$e(n)))},_n.clone=function(){return new _(this)},_n.diff=function(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=He(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=O(e)){case"year":o=tn(this,i)/12;break;case"month":o=tn(this,i);break;case"quarter":o=tn(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:S(o)},_n.endOf=function(t){var e;if(void 0===(t=O(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?hn:un;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=an-cn(e+(this._isUTC?0:this.utcOffset()*sn),an)-1;break;case"minute":e=this._d.valueOf(),e+=sn-cn(e,sn)-1;break;case"second":e=this._d.valueOf(),e+=on-cn(e,on)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},_n.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=U(this,t);return this.localeData().postformat(e)},_n.from=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||$e(t).isValid())?Ge({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_n.fromNow=function(t){return this.from($e(),t)},_n.to=function(t,e){return this.isValid()&&(w(t)&&t.isValid()||$e(t).isValid())?Ge({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},_n.toNow=function(t){return this.to($e(),t)},_n.get=function(t){return I(this[t=O(t)])?this[t]():this},_n.invalidAt=function(){return p(this).overflow},_n.isAfter=function(t,e){var n=w(t)?t:$e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=O(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},_n.isBefore=function(t,e){var n=w(t)?t:$e(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=O(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},_n.isBetween=function(t,e,n,i){var r=w(t)?t:$e(t),o=w(e)?e:$e(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))},_n.isSame=function(t,e){var n,i=w(t)?t:$e(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=O(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},_n.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},_n.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},_n.isValid=function(){return m(this)},_n.lang=nn,_n.locale=en,_n.localeData=rn,_n.max=Le,_n.min=De,_n.parsingFlags=function(){return d({},p(this))},_n.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:j[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=N(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(I(this[t=O(t)]))return this[t](e);return this},_n.startOf=function(t){var e;if(void 0===(t=O(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?hn:un;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=cn(e+(this._isUTC?0:this.utcOffset()*sn),an);break;case"minute":e=this._d.valueOf(),e-=cn(e,sn);break;case"second":e=this._d.valueOf(),e-=cn(e,on)}return this._d.setTime(e),r.updateOffset(this,!0),this},_n.subtract=Qe,_n.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},_n.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},_n.toDate=function(){return new Date(this.valueOf())},_n.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?U(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},_n.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=e+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},_n.toJSON=function(){return this.isValid()?this.toISOString():null},_n.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},_n.unix=function(){return Math.floor(this.valueOf()/1e3)},_n.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},_n.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},_n.year=At,_n.isLeapYear=function(){return Mt(this.year())},_n.weekYear=function(t){return fn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},_n.isoWeekYear=function(t){return fn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},_n.quarter=_n.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},_n.month=Rt,_n.daysInMonth=function(){return Lt(this.year(),this.month())},_n.week=_n.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},_n.isoWeek=_n.isoWeeks=function(t){var e=Ut(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},_n.weeksInYear=function(){var t=this.localeData()._week;return Vt(this.year(),t.dow,t.doy)},_n.isoWeeksInYear=function(){return Vt(this.year(),1,4)},_n.date=pn,_n.day=_n.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},_n.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},_n.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},_n.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},_n.hour=_n.hours=oe,_n.minute=_n.minutes=mn,_n.second=_n.seconds=vn,_n.millisecond=_n.milliseconds=bn,_n.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ye(at,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=We(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?Je(this,Ge(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:We(this)},_n.utc=function(t){return this.utcOffset(0,t)},_n.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(We(this),"m")),this},_n.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ye(st,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},_n.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?$e(t).utcOffset():0,(this.utcOffset()-t)%60==0)},_n.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},_n.isLocal=function(){return!!this.isValid()&&!this._isUTC},_n.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},_n.isUtc=ze,_n.isUTC=ze,_n.zoneAbbr=function(){return this._isUTC?"UTC":""},_n.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},_n.dates=T("dates accessor is deprecated. Use date instead.",pn),_n.months=T("months accessor is deprecated. Use month instead",Rt),_n.years=T("years accessor is deprecated. Use year instead",At),_n.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),_n.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(y(t,this),(t=Ae(t))._a){var e=t._isUTC?f(t._a):$e(t._a);this._isDSTShifted=this.isValid()&&C(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var Sn=D.prototype;function xn(t,e,n,i){var r=fe(),o=f().set(i,e);return r[n](o,t)}function Cn(t,e,n){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return xn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=xn(t,i,n,"month");return r}function kn(t,e,n,i){"boolean"==typeof t?(l(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,l(e)&&(n=e,e=void 0),e=e||"");var r,o=fe(),s=t?o._week.dow:0;if(null!=n)return xn(e,(n+s)%7,i,"day");var a=[];for(r=0;r<7;r++)a[r]=xn(e,(r+s)%7,i,"day");return a}Sn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return I(i)?i.call(e,n):i},Sn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},Sn.invalidDate=function(){return this._invalidDate},Sn.ordinal=function(t){return this._ordinal.replace("%d",t)},Sn.preparse=wn,Sn.postformat=wn,Sn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return I(r)?r(t,e,n,i):r.replace(/%d/i,t)},Sn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return I(n)?n(e):n.replace(/%s/i,e)},Sn.set=function(t){var e,n;for(n in t)I(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Sn.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Pt).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone},Sn.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Pt.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Sn.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return function(t,e,n){var i,r,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=Et.call(this._shortMonthsParse,s))?r:null:-1!==(r=Et.call(this._longMonthsParse,s))?r:null:"MMM"===e?-1!==(r=Et.call(this._shortMonthsParse,s))?r:-1!==(r=Et.call(this._longMonthsParse,s))?r:null:-1!==(r=Et.call(this._longMonthsParse,s))?r:-1!==(r=Et.call(this._shortMonthsParse,s))?r:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},Sn.monthsRegex=function(t){return this._monthsParseExact?(h(this,"_monthsRegex")||Yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=Ft),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},Sn.monthsShortRegex=function(t){return this._monthsParseExact?(h(this,"_monthsRegex")||Yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=Bt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},Sn.week=function(t){return Ut(t,this._week.dow,this._week.doy).week},Sn.firstDayOfYear=function(){return this._week.doy},Sn.firstDayOfWeek=function(){return this._week.dow},Sn.weekdays=function(t,e){var n=o(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Gt(n,this._week.dow):t?n[t.day()]:n},Sn.weekdaysMin=function(t){return!0===t?Gt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},Sn.weekdaysShort=function(t){return!0===t?Gt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},Sn.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return function(t,e,n){var i,r,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=Et.call(this._weekdaysParse,s))?r:null:"ddd"===e?-1!==(r=Et.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Et.call(this._minWeekdaysParse,s))?r:null:"dddd"===e?-1!==(r=Et.call(this._weekdaysParse,s))?r:-1!==(r=Et.call(this._shortWeekdaysParse,s))?r:-1!==(r=Et.call(this._minWeekdaysParse,s))?r:null:"ddd"===e?-1!==(r=Et.call(this._shortWeekdaysParse,s))?r:-1!==(r=Et.call(this._weekdaysParse,s))?r:-1!==(r=Et.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Et.call(this._minWeekdaysParse,s))?r:-1!==(r=Et.call(this._weekdaysParse,s))?r:-1!==(r=Et.call(this._shortWeekdaysParse,s))?r:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},Sn.weekdaysRegex=function(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=Jt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},Sn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Zt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Sn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Sn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Sn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},he("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===x(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=T("moment.lang is deprecated. Use moment.locale instead.",he),r.langData=T("moment.langData is deprecated. Use moment.localeData instead.",fe);var Tn=Math.abs;function Mn(t,e,n,i){var r=Ge(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function En(t){return t<0?Math.floor(t):Math.ceil(t)}function An(t){return 4800*t/146097}function In(t){return 146097*t/4800}function $n(t){return function(){return this.as(t)}}var Dn=$n("ms"),Ln=$n("s"),Pn=$n("m"),On=$n("h"),Nn=$n("d"),jn=$n("w"),Rn=$n("M"),Bn=$n("Q"),Fn=$n("y");function Yn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Hn=Yn("milliseconds"),Wn=Yn("seconds"),zn=Yn("minutes"),Un=Yn("hours"),Vn=Yn("days"),Gn=Yn("months"),qn=Yn("years"),Xn=Math.round,Kn={ss:44,s:45,m:45,h:22,d:26,M:11},Jn=Math.abs;function Zn(t){return(t>0)-(t<0)||+t}function Qn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Jn(this._milliseconds)/1e3,i=Jn(this._days),r=Jn(this._months);t=S(n/60),e=S(t/60),n%=60,t%=60;var o=S(r/12),s=r%=12,a=i,l=e,c=t,u=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var d=h<0?"-":"",f=Zn(this._months)!==Zn(h)?"-":"",p=Zn(this._days)!==Zn(h)?"-":"",m=Zn(this._milliseconds)!==Zn(h)?"-":"";return d+"P"+(o?f+o+"Y":"")+(s?f+s+"M":"")+(a?p+a+"D":"")+(l||c||u?"T":"")+(l?m+l+"H":"")+(c?m+c+"M":"")+(u?m+u+"S":"")}var ti=Ne.prototype;return ti.isValid=function(){return this._isValid},ti.abs=function(){var t=this._data;return this._milliseconds=Tn(this._milliseconds),this._days=Tn(this._days),this._months=Tn(this._months),t.milliseconds=Tn(t.milliseconds),t.seconds=Tn(t.seconds),t.minutes=Tn(t.minutes),t.hours=Tn(t.hours),t.months=Tn(t.months),t.years=Tn(t.years),this},ti.add=function(t,e){return Mn(this,t,e,1)},ti.subtract=function(t,e){return Mn(this,t,e,-1)},ti.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=O(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+An(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(In(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},ti.asMilliseconds=Dn,ti.asSeconds=Ln,ti.asMinutes=Pn,ti.asHours=On,ti.asDays=Nn,ti.asWeeks=jn,ti.asMonths=Rn,ti.asQuarters=Bn,ti.asYears=Fn,ti.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},ti._bubble=function(){var t,e,n,i,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*En(In(a)+s),s=0,a=0),l.milliseconds=o%1e3,t=S(o/1e3),l.seconds=t%60,e=S(t/60),l.minutes=e%60,n=S(e/60),l.hours=n%24,s+=S(n/24),r=S(An(s)),a+=r,s-=En(In(r)),i=S(a/12),a%=12,l.days=s,l.months=a,l.years=i,this},ti.clone=function(){return Ge(this)},ti.get=function(t){return t=O(t),this.isValid()?this[t+"s"]():NaN},ti.milliseconds=Hn,ti.seconds=Wn,ti.minutes=zn,ti.hours=Un,ti.days=Vn,ti.weeks=function(){return S(this.days()/7)},ti.months=Gn,ti.years=qn,ti.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var i=Ge(t).abs(),r=Xn(i.as("s")),o=Xn(i.as("m")),s=Xn(i.as("h")),a=Xn(i.as("d")),l=Xn(i.as("M")),c=Xn(i.as("y")),u=r<=Kn.ss&&["s",r]||r<Kn.s&&["ss",r]||o<=1&&["m"]||o<Kn.m&&["mm",o]||s<=1&&["h"]||s<Kn.h&&["hh",s]||a<=1&&["d"]||a<Kn.d&&["dd",a]||l<=1&&["M"]||l<Kn.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,u)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},ti.toISOString=Qn,ti.toString=Qn,ti.toJSON=Qn,ti.locale=en,ti.localeData=rn,ti.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qn),ti.lang=nn,z("X",0,0,"unix"),z("x",0,0,"valueOf"),ut("x",ot),ut("X",/[+-]?\d+(\.\d{1,3})?/),pt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),pt("x",function(t,e,n){n._d=new Date(x(t))}),r.version="2.24.0",e=$e,r.fn=_n,r.min=function(){return Pe("isBefore",[].slice.call(arguments,0))},r.max=function(){return Pe("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=f,r.unix=function(t){return $e(1e3*t)},r.months=function(t,e){return Cn(t,e,"months")},r.isDate=c,r.locale=he,r.invalid=g,r.duration=Ge,r.isMoment=w,r.weekdays=function(t,e,n){return kn(t,e,n,"weekdays")},r.parseZone=function(){return $e.apply(null,arguments).parseZone()},r.localeData=fe,r.isDuration=je,r.monthsShort=function(t,e){return Cn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return kn(t,e,n,"weekdaysMin")},r.defineLocale=de,r.updateLocale=function(t,e){if(null!=e){var n,i,r=se;null!=(i=ue(t))&&(r=i._config),e=$(r,e),(n=new D(e)).parentLocale=ae[t],ae[t]=n,he(t)}else null!=ae[t]&&(null!=ae[t].parentLocale?ae[t]=ae[t].parentLocale:null!=ae[t]&&delete ae[t]);return ae[t]},r.locales=function(){return M(ae)},r.weekdaysShort=function(t,e,n){return kn(t,e,n,"weekdaysShort")},r.normalizeUnits=O,r.relativeTimeRounding=function(t){return void 0===t?Xn:"function"==typeof t&&(Xn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Kn[t]&&(void 0===e?Kn[t]:(Kn[t]=e,"s"===t&&(Kn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=_n,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(38)(t))},function(t,e,n){var i;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,r){"use strict";var o=[],s=n.document,a=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,h=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,m=p.toString,g=m.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},b=function(t){return null!=t&&t===t.window},_={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,r,o=(n=n||s).createElement("script");if(o.text=t,e)for(i in _)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function S(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[f.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(t){var e=!!t&&"length"in t&&t.length,n=S(t);return!y(t)&&!b(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.4.1",constructor:x,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},x.extend=x.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(c&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[e],o=r&&!Array.isArray(n)?[]:r||x.isPlainObject(n)?n:{},r=!1,s[e]=x.extend(c,o,i)):void 0!==i&&(s[e]=i));return s},x.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t))&&(!(e=a(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&m.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){w(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(k(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(C,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?x.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,s=[];if(k(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&s.push(r);return c.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=o[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var T=
/*!
   * Sizzle CSS Selector Engine v2.3.4
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://js.foundation/
   *
   * Date: 2019-04-08
   */
function(t){var e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,_="sizzle"+1*new Date,w=t.document,S=0,x=0,C=lt(),k=lt(),T=lt(),M=lt(),E=function(t,e){return t===e&&(h=!0),0},A={}.hasOwnProperty,I=[],$=I.pop,D=I.push,L=I.push,P=I.slice,O=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+j+"*("+R+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+j+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",Y=new RegExp(j+"+","g"),H=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),z=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),U=new RegExp(j+"|>"),V=new RegExp(F),G=new RegExp("^"+R+"$"),q={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){d()},st=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{L.apply(I=P.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(t){L={apply:I.length?function(t,e){D.apply(t,P.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,r){var o,a,c,u,h,p,v,y=e&&e.ownerDocument,S=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==S&&9!==S&&11!==S)return i;if(!r&&((e?e.ownerDocument||e:w)!==f&&d(e),e=e||f,m)){if(11!==S&&(h=Q.exec(t)))if(o=h[1]){if(9===S){if(!(c=e.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&b(e,c)&&c.id===o)return i.push(c),i}else{if(h[2])return L.apply(i,e.getElementsByTagName(t)),i;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return L.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!M[t+" "]&&(!g||!g.test(t))&&(1!==S||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===S&&U.test(t)){for((u=e.getAttribute("id"))?u=u.replace(it,rt):e.setAttribute("id",u=_),a=(p=s(t)).length;a--;)p[a]="#"+u+" "+bt(p[a]);v=p.join(","),y=tt.test(t)&&vt(e.parentNode)||e}try{return L.apply(i,y.querySelectorAll(v)),i}catch(e){M(t,!0)}finally{u===_&&e.removeAttribute("id")}}}return l(t.replace(H,"$1"),e,i,r)}function lt(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ct(t){return t[_]=!0,t}function ut(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ct(function(e){return e=+e,ct(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},d=at.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:w;return s!==f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,m=!o(f),w!==f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(f.getElementsByClassName),n.getById=ut(function(t){return p.appendChild(t).id=_,!f.getElementsByName||!f.getElementsByName(_).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=Z.test(f.querySelectorAll))&&(ut(function(t){p.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+j+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+j+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+_+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+j+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(p.compareDocumentPosition),b=e||Z.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},E=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===f||t.ownerDocument===w&&b(w,t)?-1:e===f||e.ownerDocument===w&&b(w,e)?1:u?O(u,t)-O(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t===f?-1:e===f?1:r?-1:o?1:u?O(u,t)-O(u,e):0;if(r===o)return dt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?dt(s[i],a[i]):s[i]===w?-1:a[i]===w?1:0},f):f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&d(t),n.matchesSelector&&m&&!M[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){M(e,!0)}return at(e,f,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!==f&&d(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==f&&d(t);var r=i.attrHandle[e.toLowerCase()],o=r&&A.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(it,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],r=0,o=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(E),h){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return u=null,t},r=at.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=at.selectors={cacheLength:50,createPseudo:ct,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(Y," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f,p,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(b=(f=(c=(u=(h=(d=g)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===S&&c[1])&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[S,f,b];break}}else if(y&&(b=f=(c=(u=(h=(d=e)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===S&&c[1]),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((u=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[S,b]),d!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[_]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)t[i=O(t,o[s])]=!(n[i]=o[s])}):function(t){return r(t,0,n)}):r}},pseudos:{not:ct(function(t){var e=[],n=[],i=a(t.replace(H,"$1"));return i[_]?ct(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:ct(function(t){return function(e){return at(t,e).length>0}}),contains:ct(function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}}),lang:ct(function(t){return G.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t}),gt:gt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function yt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,r=e.next,o=r||i,s=n&&"parentNode"===o,a=x++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r);return!1}:function(e,n,l){var c,u,h,d=[S,a];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(u=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[o])&&c[0]===S&&c[1]===a)return d[2]=c[2];if(u[o]=d,d[2]=t(e,n,l))return!0}return!1}}function wt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function St(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),c&&e.push(a)));return s}function xt(t,e,n,i,r,o){return i&&!i[_]&&(i=xt(i)),r&&!r[_]&&(r=xt(r,o)),ct(function(o,s,a,l){var c,u,h,d=[],f=[],p=s.length,m=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=!t||!o&&e?m:St(m,d,t,a,l),v=n?r||(o?t:p||i)?[]:s:g;if(n&&n(g,v,a,l),i)for(c=St(v,f),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(v[f[u]]=!(g[f[u]]=h));if(o){if(r||t){if(r){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(g[u]=h);r(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=r?O(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else v=St(v===s?v.splice(p,v.length):v),r?r(null,s,v,l):L.apply(s,v)})}function Ct(t){for(var e,n,r,o=t.length,s=i.relative[t[0].type],a=s||i.relative[" "],l=s?1:0,u=_t(function(t){return t===e},a,!0),h=_t(function(t){return O(e,t)>-1},a,!0),d=[function(t,n,i){var r=!s&&(i||n!==c)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,r}];l<o;l++)if(n=i.relative[t[l].type])d=[_t(wt(d),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[_]){for(r=++l;r<o&&!i.relative[t[r].type];r++);return xt(l>1&&wt(d),l>1&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),n,l<r&&Ct(t.slice(l,r)),r<o&&Ct(t=t.slice(r)),r<o&&bt(t))}d.push(n)}return wt(d)}return yt.prototype=i.filters=i.pseudos,i.setFilters=new yt,s=at.tokenize=function(t,e){var n,r,o,s,a,l,c,u=k[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=i.preFilter;a;){for(s in n&&!(r=W.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(H," ")}),a=a.slice(n.length)),i.filter)!(r=q[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):k(t,l).slice(0)},a=at.compile=function(t,e){var n,r=[],o=[],a=T[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=Ct(e[n]))[_]?r.push(a):o.push(a);(a=T(t,function(t,e){var n=e.length>0,r=t.length>0,o=function(o,s,a,l,u){var h,p,g,v=0,y="0",b=o&&[],_=[],w=c,x=o||r&&i.find.TAG("*",u),C=S+=null==w?1:Math.random()||.1,k=x.length;for(u&&(c=s===f||s||u);y!==k&&null!=(h=x[y]);y++){if(r&&h){for(p=0,s||h.ownerDocument===f||(d(h),a=!m);g=t[p++];)if(g(h,s||f,a)){l.push(h);break}u&&(S=C)}n&&((h=!g&&h)&&v--,o&&b.push(h))}if(v+=y,n&&y!==v){for(p=0;g=e[p++];)g(b,_,s,a);if(o){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=$.call(l));_=St(_)}L.apply(l,_),u&&!o&&_.length>0&&v+e.length>1&&at.uniqueSort(l)}return u&&(S=C,c=w),b};return n?ct(o):o}(o,r))).selector=t}return a},l=at.select=function(t,e,n,r){var o,l,c,u,h,d="function"==typeof t&&t,f=!r&&s(t=d.selector||t);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&m&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=q.needsContext.test(t)?0:l.length;o--&&(c=l[o],!i.relative[u=c.type]);)if((h=i.find[u])&&(r=h(c.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(o,1),!(t=r.length&&bt(l)))return L.apply(n,r),n;break}}return(d||a(t,f))(r,e,!m,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=_.split("").sort(E).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||ht(N,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),at}(n);x.find=T,x.expr=T.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=T.uniqueSort,x.text=T.getText,x.isXMLDoc=T.isXML,x.contains=T.contains,x.escapeSelector=T.escape;var M=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(n))break;i.push(t)}return i},E=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},A=x.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var $=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,n){return y(e)?x.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return h.call(e,t)>-1!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<i;e++)if(x.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)x.find(t,r[e],n);return i>1?x.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&A.test(t)?x(t):t||[],!1).length}});var L,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||L,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:P.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:s,!0)),$.test(i[1])&&x.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=s.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,L=x(s);var O=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function j(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&x(t);if(!A.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?h.call(x(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return M(t,"parentNode")},parentsUntil:function(t,e,n){return M(t,"parentNode",n)},next:function(t){return j(t,"nextSibling")},prev:function(t){return j(t,"previousSibling")},nextAll:function(t){return M(t,"nextSibling")},prevAll:function(t){return M(t,"previousSibling")},nextUntil:function(t,e,n){return M(t,"nextSibling",n)},prevUntil:function(t,e,n){return M(t,"previousSibling",n)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(I(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,i){var r=x.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=x.filter(i,r)),this.length>1&&(N[t]||x.uniqueSort(r),O.test(t)&&r.reverse()),this.pushStack(r)}});var R=/[^\x20\t\r\n\f]+/g;function B(t){return t}function F(t){throw t}function Y(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(R)||[],function(t,n){e[n]=!0}),e}(t):x.extend({},t);var e,n,i,r,o=[],s=[],a=-1,l=function(){for(r=r||t.once,i=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){x.each(n,function(n,i){y(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==S(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;(n=x.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(t){return t?x.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},x.extend({Deferred:function(t){var e=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(n){x.each(e,function(e,i){var r=y(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){var o=0;function s(t,e,i,r){return function(){var a=this,l=arguments,c=function(){var n,c;if(!(t<o)){if((n=i.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?r?c.call(n,s(o,e,B,r),s(o,e,F,r)):(o++,c.call(n,s(o,e,B,r),s(o,e,F,r),s(o,e,B,e.notifyWith))):(i!==B&&(a=void 0,l=[n]),(r||e.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(n){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(n,u.stackTrace),t+1>=o&&(i!==F&&(a=void 0,l=[n]),e.rejectWith(a,l))}};t?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),n.setTimeout(u))}}return x.Deferred(function(n){e[0][3].add(s(0,n,y(r)?r:B,n.notifyWith)),e[1][3].add(s(0,n,y(t)?t:B)),e[2][3].add(s(0,n,y(i)?i:F))}).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},o={};return x.each(e,function(t,n){var s=n[2],a=n[5];r[n[1]]=s.add,a&&s.add(function(){i=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=l.call(arguments),o=x.Deferred(),s=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?l.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(Y(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||y(r[n]&&r[n].then)))return o.then();for(;n--;)Y(r[n],s(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&H.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},x.readyException=function(t){n.setTimeout(function(){throw t})};var W=x.Deferred();function z(){s.removeEventListener("DOMContentLoaded",z),n.removeEventListener("load",z),x.ready()}x.fn.ready=function(t){return W.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||W.resolveWith(s,[x]))}}),x.ready.then=W.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?n.setTimeout(x.ready):(s.addEventListener("DOMContentLoaded",z),n.addEventListener("load",z));var U=function(t,e,n,i,r,o,s){var a=0,l=t.length,c=null==n;if("object"===S(n))for(a in r=!0,n)U(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,y(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(x(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):o},V=/^-ms-/,G=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function X(t){return t.replace(V,"ms-").replace(G,q)}var K=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=x.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[X(e)]=n;else for(i in e)r[X(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in i?[e]:e.match(R)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var Z=new J,Q=new J,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return Q.hasData(t)||Z.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return Z.access(t,e,n)},_removeData:function(t,e){Z.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=Q.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=X(i.slice(5)),nt(o,i,r[i]));Z.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Q.set(this,t)}):U(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){Q.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),x.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Z.get(t,e),n&&(!i||Array.isArray(n)?i=Z.access(t,e,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),i=n.length,r=n.shift(),o=x._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){x.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Z.get(t,n)||Z.access(t,n,{empty:x.Callbacks("once memory").add(function(){Z.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=x.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Z.get(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],st=s.documentElement,at=function(t){return x.contains(t.ownerDocument,t)},lt={composed:!0};st.getRootNode&&(at=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===x.css(t,"display")},ut=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=s[o];return r};function ht(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return x.css(t,e,"")},l=a(),c=n&&n[3]||(x.cssNumber[e]?"":"px"),u=t.nodeType&&(x.cssNumber[e]||"px"!==c&&+l)&&rt.exec(x.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)x.style(t,e,u+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),u/=o;u*=2,x.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var dt={};function ft(t){var e,n=t.ownerDocument,i=t.nodeName,r=dt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=x.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),dt[i]=r,r)}function pt(t,e){for(var n,i,r=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=Z.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ct(i)&&(r[o]=ft(i))):"none"!==n&&(r[o]="none",Z.set(i,"display",n)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}x.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ct(this)?x(this).show():x(this).hide()})}});var mt=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i,yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?x.merge([t],n):n}function _t(t,e){for(var n=0,i=t.length;n<i;n++)Z.set(t[n],"globalEval",!e||Z.get(e[n],"globalEval"))}yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var wt,St,xt=/<|&#?\w+;/;function Ct(t,e,n,i,r){for(var o,s,a,l,c,u,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===S(o))x.merge(d,o.nodeType?[o]:o);else if(xt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(gt.exec(o)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,s.innerHTML=l[1]+x.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;x.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&x.inArray(o,i)>-1)r&&r.push(o);else if(c=at(o),s=bt(h.appendChild(o),"script"),c&&_t(s),n)for(u=0;o=s[u++];)vt.test(o.type||"")&&n.push(o);return h}wt=s.createDocumentFragment().appendChild(s.createElement("div")),(St=s.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),wt.appendChild(St),v.checkClone=wt.cloneNode(!0).cloneNode(!0).lastChild.checked,wt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!wt.cloneNode(!0).lastChild.defaultValue;var kt=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Mt=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function At(){return!1}function It(t,e){return t===function(){try{return s.activeElement}catch(t){}}()==("focus"===e)}function $t(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)$t(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=At;else if(!r)return t;return 1===o&&(s=r,(r=function(t){return x().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),t.each(function(){x.event.add(this,e,r,i,n)})}function Dt(t,e,n){n?(Z.set(t,e,!1),x.event.add(t,e,{namespace:!1,handler:function(t){var i,r,o=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(x.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=l.call(arguments),Z.set(this,e,o),i=n(this,e),this[e](),o!==(r=Z.get(this,e))||i?Z.set(this,e,!1):r={},o!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else o.length&&(Z.set(this,e,{value:x.event.trigger(x.extend(o[0],x.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&x.event.add(t,e,Et)}x.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,f,p,m,g=Z.get(t);if(g)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&x.find.matchesSelector(st,r),n.guid||(n.guid=x.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(R)||[""]).length;c--;)f=m=(a=Mt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=x.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=x.event.special[f]||{},u=x.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),x.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,f,p,m,g=Z.hasData(t)&&Z.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(R)||[""]).length;c--;)if(f=m=(a=Mt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=x.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||x.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)x.event.remove(t,f+e[c],n,i,!0);x.isEmptyObject(l)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s,a=x.event.fix(t),l=new Array(arguments.length),c=(Z.get(this,"events")||{})[a.type]||[],u=x.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=x.event.handlers.call(this,a,c),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(i=((x.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,o,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?x(r,this).index(c)>-1:x.find(r,this,null,[c]).length),s[r]&&o.push(i);o.length&&a.push({elem:c,handlers:o})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&I(e,"input")&&Dt(e,"click",Et),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&I(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&I(e,"input")&&Z.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:At,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:At,isPropagationStopped:At,isImmediatePropagationStopped:At,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&kt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(t,e){x.event.special[t]={setup:function(){return Dt(this,t,It),!1},trigger:function(){return Dt(this,t),!0},delegateType:e}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||x.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,i){return $t(this,t,e,n,i)},one:function(t,e,n,i){return $t(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=At),this.each(function(){x.event.remove(this,t,n,e)})}});var Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pt=/<script|<style|<link/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function jt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Rt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Bt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,i,r,o,s,a,l,c;if(1===e.nodeType){if(Z.hasData(t)&&(o=Z.access(t),s=Z.set(e,o),c=o.events))for(r in delete s.handle,s.events={},c)for(n=0,i=c[r].length;n<i;n++)x.event.add(e,r,c[r][n]);Q.hasData(t)&&(a=Q.access(t),l=x.extend({},a),Q.set(e,l))}}function Yt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ht(t,e,n,i){e=c.apply([],e);var r,o,s,a,l,u,h=0,d=t.length,f=d-1,p=e[0],m=y(p);if(m||d>1&&"string"==typeof p&&!v.checkClone&&Ot.test(p))return t.each(function(r){var o=t.eq(r);m&&(e[0]=p.call(this,r,o.html())),Ht(o,e,n,i)});if(d&&(o=(r=Ct(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=(s=x.map(bt(r,"script"),Rt)).length;h<d;h++)l=r,h!==f&&(l=x.clone(l,!0,!0),a&&x.merge(s,bt(l,"script"))),n.call(t[h],l,h);if(a)for(u=s[s.length-1].ownerDocument,x.map(s,Bt),h=0;h<a;h++)l=s[h],vt.test(l.type||"")&&!Z.access(l,"globalEval")&&x.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&!l.noModule&&x._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):w(l.textContent.replace(Nt,""),l,u))}return t}function Wt(t,e,n){for(var i,r=e?x.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||x.cleanData(bt(i)),i.parentNode&&(n&&at(i)&&_t(bt(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t.replace(Lt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),l=at(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(s=bt(a),i=0,r=(o=bt(t)).length;i<r;i++)Yt(o[i],s[i]);if(e)if(n)for(o=o||bt(t),s=s||bt(a),i=0,r=o.length;i<r;i++)Ft(o[i],s[i]);else Ft(t,a);return(s=bt(a,"script")).length>0&&_t(s,!l&&bt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=x.event.special,o=0;void 0!==(n=t[o]);o++)if(K(n)){if(e=n[Z.expando]){if(e.events)for(i in e.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);n[Z.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return U(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ht(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||jt(this,t).appendChild(t)})},prepend:function(){return Ht(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=jt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ht(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ht(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return U(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!yt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ht(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(bt(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,i=[],r=x(t),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),x(r[s])[e](n),u.apply(i,n.get());return this.pushStack(i)}});var zt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Ut=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Vt=new RegExp(ot.join("|"),"i");function Gt(t,e,n){var i,r,o,s,a=t.style;return(n=n||Ut(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||at(t)||(s=x.style(t,e)),!v.pixelBoxStyles()&&zt.test(s)&&Vt.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(c).appendChild(u);var t=n.getComputedStyle(u);i="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",a=36===e(t.right),r=36===e(t.width),u.style.position="absolute",o=12===e(u.offsetWidth/3),st.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,a,l,c=s.createElement("div"),u=s.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(v,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o}}))}();var Xt=["Webkit","Moz","ms"],Kt=s.createElement("div").style,Jt={};function Zt(t){var e=x.cssProps[t]||Jt[t];return e||(t in Kt?t:Jt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in Kt)return t}(t)||t)}var Qt=/^(none|table(?!-c[ea]).+)/,te=/^--/,ee={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"};function ie(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function re(t,e,n,i,r,o){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=x.css(t,n+ot[s],!0,r)),i?("content"===n&&(l-=x.css(t,"padding"+ot[s],!0,r)),"margin"!==n&&(l-=x.css(t,"border"+ot[s]+"Width",!0,r))):(l+=x.css(t,"padding"+ot[s],!0,r),"padding"!==n?l+=x.css(t,"border"+ot[s]+"Width",!0,r):a+=x.css(t,"border"+ot[s]+"Width",!0,r));return!i&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l}function oe(t,e,n){var i=Ut(t),r=(!v.boxSizingReliable()||n)&&"border-box"===x.css(t,"boxSizing",!1,i),o=r,s=Gt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(zt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&r||"auto"===s||!parseFloat(s)&&"inline"===x.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===x.css(t,"boxSizing",!1,i),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+re(t,e,n||(r?"border":"content"),o,i,s)+"px"}function se(t,e,n,i,r){return new se.prototype.init(t,e,n,i,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=X(e),l=te.test(e),c=t.style;if(l||(e=Zt(a)),s=x.cssHooks[e]||x.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:c[e];"string"===(o=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=ht(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(x.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,o,s,a=X(e);return te.test(e)||(e=Zt(a)),(s=x.cssHooks[e]||x.cssHooks[a])&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=Gt(t,e,i)),"normal"===r&&e in ne&&(r=ne[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,i){if(n)return!Qt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,i):ut(t,ee,function(){return oe(t,e,i)})},set:function(t,n,i){var r,o=Ut(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||i)&&"border-box"===x.css(t,"boxSizing",!1,o),l=i?re(t,e,i,a,o):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-re(t,e,"border",!1,o)-.5)),l&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),ie(0,n,l)}}}),x.cssHooks.marginLeft=qt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ot[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=ie)}),x.fn.extend({css:function(t,e){return U(this,function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=Ut(t),r=e.length;s<r;s++)o[e[s]]=x.css(t,e[s],!1,i);return o}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=se,se.prototype={constructor:se,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var t=se.propHooks[this.prop];return t&&t.get?t.get(this):se.propHooks._default.get(this)},run:function(t){var e,n=se.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):se.propHooks._default.set(this),this}},se.prototype.init.prototype=se.prototype,se.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[Zt(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}},se.propHooks.scrollTop=se.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=se.prototype.init,x.fx.step={};var ae,le,ce=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function he(){le&&(!1===s.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(he):n.setTimeout(he,x.fx.interval),x.fx.tick())}function de(){return n.setTimeout(function(){ae=void 0}),ae=Date.now()}function fe(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ot[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function pe(t,e,n){for(var i,r=(me.tweeners[e]||[]).concat(me.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function me(t,e,n){var i,r,o=0,s=me.prefilters.length,a=x.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ae||de(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(i);return a.notifyWith(t,[c,i,n]),i<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:ae||de(),duration:n.duration,tweens:[],createTween:function(e,n){var i=x.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=X(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=x.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);o<s;o++)if(i=me.prefilters[o].call(c,t,u,c.opts))return y(i.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return x.map(u,pe,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(me,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ht(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(R);for(var n,i=0,r=t.length;i<r;i++)n=t[i],me.tweeners[n]=me.tweeners[n]||[],me.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,s,a,l,c,u,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&ct(t),g=Z.get(t,"fxshow");for(i in n.queue||(null==(s=x._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,x.queue(t,"fx").length||s.empty.fire()})})),e)if(r=e[i],ce.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||x.style(t,i)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Z.get(t,"display")),"none"===(u=x.css(t,"display"))&&(c?u=c:(pt([t],!0),c=t.style.display||c,u=x.css(t,"display"),pt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(t,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Z.access(t,"fxshow",{display:c}),o&&(g.hidden=!m),m&&pt([t],!0),d.done(function(){for(i in m||pt([t]),Z.remove(t,"fxshow"),f)x.style(t,i,f[i])})),l=pe(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?me.prefilters.unshift(t):me.prefilters.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=x.isEmptyObject(t),o=x.speed(e,n,i),s=function(){var e=me(this,x.extend({},t),o);(r||Z.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=x.timers,s=Z.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ue.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Z.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=x.timers,s=i?i.length:0;for(n.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(fe(e,!0),t,i,r)}}),x.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(ae=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),ae=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){le||(le=!0,he())},x.fx.stop=function(){le=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,e){return t=x.fx&&x.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}})},function(){var t=s.createElement("input"),e=s.createElement("select").appendChild(s.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=s.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var ge,ve=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return U(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?x.prop(t,e,n):(1===o&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?ge:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&I(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(R);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ge={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ve[e]||x.find.attr;ve[e]=function(t,e,i){var r,o,s=e.toLowerCase();return i||(o=ve[s],ve[s]=r,r=null!=n(t,e,i)?s:null,ve[s]=o),r}});var ye=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;function _e(t){return(t.match(R)||[]).join(" ")}function we(t){return t.getAttribute&&t.getAttribute("class")||""}function Se(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}x.fn.extend({prop:function(t,e){return U(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(t)||(e=x.propFix[e]||e,r=x.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,l=0;if(y(t))return this.each(function(e){x(this).addClass(t.call(this,e,we(this)))});if((e=Se(t)).length)for(;n=this[l++];)if(r=we(n),i=1===n.nodeType&&" "+_e(r)+" "){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=_e(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,l=0;if(y(t))return this.each(function(e){x(this).removeClass(t.call(this,e,we(this)))});if(!arguments.length)return this.attr("class","");if((e=Se(t)).length)for(;n=this[l++];)if(r=we(n),i=1===n.nodeType&&" "+_e(r)+" "){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(a=_e(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,we(this),e),e)}):this.each(function(){var e,r,o,s;if(i)for(r=0,o=x(this),s=Se(t);e=s[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=we(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+_e(we(n))+" ").indexOf(e)>-1)return!0;return!1}});var xe=/\r/g;x.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(xe,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:_e(x.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:r.length;for(i=o<0?l:s?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!I(n.parentNode,"optgroup"))){if(e=x(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=x.makeArray(e),s=r.length;s--;)((i=r[s]).selected=x.inArray(x.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},v.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in n;var Ce=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(t,e,i,r){var o,a,l,c,u,h,d,f,m=[i||s],g=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(a=f=l=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!Ce.test(g+x.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[x.expando]?t:new x.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:x.makeArray(e,[t]),d=x.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(i,e))){if(!r&&!d.noBubble&&!b(i)){for(c=d.delegateType||g,Ce.test(c+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),l=a;l===(i.ownerDocument||s)&&m.push(l.defaultView||l.parentWindow||n)}for(o=0;(a=m[o++])&&!t.isPropagationStopped();)f=a,t.type=o>1?c:d.bindType||g,(h=(Z.get(a,"events")||{})[t.type]&&Z.get(a,"handle"))&&h.apply(a,e),(h=u&&a[u])&&h.apply&&K(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),e)||!K(i)||u&&y(i[g])&&!b(i)&&((l=i[u])&&(i[u]=null),x.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,ke),i[g](),t.isPropagationStopped()&&f.removeEventListener(g,ke),x.event.triggered=void 0,l&&(i[u]=l)),t.result}},simulate:function(t,e,n){var i=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),v.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Z.access(i,e);r||i.addEventListener(t,n,!0),Z.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Z.access(i,e)-1;r?Z.access(i,e,r):(i.removeEventListener(t,n,!0),Z.remove(i,e))}}});var Te=n.location,Me=Date.now(),Ee=/\?/;x.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+t),e};var Ae=/\[\]$/,Ie=/\r?\n/g,$e=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Le(t,e,n,i){var r;if(Array.isArray(e))x.each(e,function(e,r){n||Ae.test(t)?i(t,r):Le(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==S(e))i(t,e);else for(r in e)Le(t+"["+r+"]",e[r],n,i)}x.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){r(this.name,this.value)});else for(n in t)Le(n,t[n],e,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&De.test(this.nodeName)&&!$e.test(t)&&(this.checked||!mt.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(Ie,"\r\n")}}):{name:e.name,value:n.replace(Ie,"\r\n")}}).get()}});var Pe=/%20/g,Oe=/#.*$/,Ne=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,Be=/^\/\//,Fe={},Ye={},He="*/".concat("*"),We=s.createElement("a");function ze(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(R)||[];if(y(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ue(t,e,n,i){var r={},o=t===Ye;function s(a){var l;return r[a]=!0,x.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}return s(e.dataTypes[0])||!r["*"]&&s("*")}function Ve(t,e){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&x.extend(!0,t,i),t}We.href=Te.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,x.ajaxSettings),e):Ve(x.ajaxSettings,t)},ajaxPrefilter:ze(Fe),ajaxTransport:ze(Ye),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,l,c,u,h,d,f,p=x.ajaxSetup({},e),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?x(m):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),b=p.statusCode||{},_={},w={},S="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=je.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)C.always(t[C.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||S;return i&&i.abort(e),k(0,e),this}};if(v.promise(C),p.url=((t||p.url||Te.href)+"").replace(Be,Te.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(R)||[""],null==p.crossDomain){c=s.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=We.protocol+"//"+We.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Ue(Fe,p,e,C),u)return C;for(d in(h=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Re.test(p.type),r=p.url.replace(Oe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Pe,"+")):(f=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Ee.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Ne,"$1"),f=(Ee.test(r)?"&":"?")+"_="+Me+++f),p.url=r+f),p.ifModified&&(x.lastModified[r]&&C.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&C.setRequestHeader("If-None-Match",x.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+He+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,C,p)||u))return C.abort();if(S="abort",y.add(p.complete),C.done(p.success),C.fail(p.error),i=Ue(Ye,p,e,C)){if(C.readyState=1,h&&g.trigger("ajaxSend",[C,p]),u)return C;p.async&&p.timeout>0&&(l=n.setTimeout(function(){C.abort("timeout")},p.timeout));try{u=!1,i.send(_,k)}catch(t){if(u)throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,e,s,a){var c,d,f,_,w,S=e;u||(u=!0,l&&n.clearTimeout(l),i=void 0,o=a||"",C.readyState=t>0?4:0,c=t>=200&&t<300||304===t,s&&(_=function(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,C,s)),_=function(t,e,n,i){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,_,C,c),c?(p.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(x.lastModified[r]=w),(w=C.getResponseHeader("etag"))&&(x.etag[r]=w)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=_.state,d=_.data,c=!(f=_.error))):(f=S,!t&&S||(S="error",t<0&&(t=0))),C.status=t,C.statusText=(e||S)+"",c?v.resolveWith(m,[d,S,C]):v.rejectWith(m,[C,S,f]),C.statusCode(b),b=void 0,h&&g.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?d:f]),y.fireWith(m,[C,S]),h&&(g.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:n,success:i},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t,e){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e)}})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},qe=x.ajaxSettings.xhr();v.cors=!!qe&&"withCredentials"in qe,v.ajax=qe=!!qe,x.ajaxTransport(function(t){var e,i;if(v.cors||qe&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),i=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){e&&i()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=x("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),s.head.appendChild(e[0])},abort:function(){n&&n()}}});var Xe,Ke=[],Je=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||x.expando+"_"+Me++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(t,e,i){var r,o,s,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+r):!1!==t.jsonp&&(t.url+=(Ee.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||x.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always(function(){void 0===o?x(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(r)),s&&y(o)&&o(s[0]),s=o=void 0}),"script"}),v.createHTMLDocument=((Xe=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,e.head.appendChild(i)):e=s),o=!n&&[],(r=$.exec(t))?[e.createElement(r[1])]:(r=Ct([t],e,o),o&&o.length&&x(o).remove(),x.merge([],r.childNodes)));var i,r,o},x.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return a>-1&&(i=_e(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var i,r,o,s,a,l,c=x.css(t,"position"),u=x(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=x.css(t,"top"),l=x.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(s=(i=u.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),y(e)&&(e=e.call(t,n,x.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(i,"marginTop",!0),left:e.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||st})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(i){return U(this,function(t,i,r){var o;if(b(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r},t,i,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=qt(v.pixelPosition,function(t,n){if(n)return n=Gt(t,e),zt.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){x.fn[i]=function(r,o){var s=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return U(this,function(e,n,r){var o;return b(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?x.css(e,n,a):x.style(e,n,r,a)},e,s?r:void 0,s)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=l.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(l.call(arguments)))}).guid=t.guid=t.guid||x.guid++,r},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=I,x.isFunction=y,x.isWindow=b,x.camelCase=X,x.type=S,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(i=function(){return x}.apply(e,[]))||(t.exports=i);var Ze=n.jQuery,Qe=n.$;return x.noConflict=function(t){return n.$===x&&(n.$=Qe),t&&n.jQuery===x&&(n.jQuery=Ze),x},r||(n.jQuery=n.$=x),x})},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var i=n(4),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=s),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(301),r=n(302),o=n(188);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(i)return Y(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var u=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function _(t,e,n,i){return W(Y(e,t.length-n),t,n,i)}function w(t,e,n,i){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function S(t,e,n,i){return w(t,e,n,i)}function x(t,e,n,i){return W(H(e),t,n,i)}function C(t,e,n,i){return W(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function k(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=M));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(i,r),u=t.slice(e,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function E(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=F(t[o]);return r}function $(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,i,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,o){return o||N(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function R(t,e,n,i,o){return o||N(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:Y(new l(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(7))},function(t,e,n){"use strict";class i{constructor(t,e,n){this.$filter=t,this.StudentDataService=e,this.UtilService=n,this.$translate=this.$filter("translate")}getComponentTypeLabel(){return""}createComponent(){return{id:this.UtilService.generateKey(),type:"",prompt:"",showSaveButton:!1,showSubmitButton:!1}}isCompleted(t,e,n,i,r){return!0}displayAnnotation(t,e){return!0}componentHasWork(t){return!0}componentStateHasStudentWork(t,e){return!1}getStudentDataString(t){return""}componentUsesSaveButton(){return!0}componentUsesSubmitButton(){return!0}}i.$inject=[],e.a=i},function(t,e,n){"use strict";(function(t){class n{constructor(t,e,n,i,r,o,s,a,l,c,u,h){this.$filter=t,this.$mdDialog=e,this.$rootScope=n,this.$scope=i,this.AnnotationService=r,this.ConfigService=o,this.NodeService=s,this.NotebookService=a,this.ProjectService=l,this.StudentAssetService=c,this.StudentDataService=u,this.UtilService=h,this.$translate=this.$filter("translate"),this.nodeId=this.$scope.nodeId,this.componentContent=this.$scope.componentContent,this.componentId=this.componentContent.id,this.componentType=this.componentContent.type,this.idToOrder=this.ProjectService.idToOrder,this.mode=this.$scope.mode,this.authoringComponentContent=this.$scope.authoringComponentContent,this.isShowPreviousWork=!1,this.showAdvancedAuthoring=!1,this.showJSONAuthoring=!1,this.isDisabled=!1,this.isDirty=!1,this.parentStudentWorkIds=null,this.attachments=[],this.isSubmitDirty=!1,this.isSubmit=!1,this.saveMessage={text:"",time:""},this.isStudentAttachmentEnabled=this.componentContent.isStudentAttachmentEnabled,this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isSubmitButtonDisabled=!1,this.submitCounter=0,this.isSnipButtonVisible=!0,this.workgroupId=this.$scope.workgroupId,this.teacherWorkgroupId=this.$scope.teacherWorkgroupId,this.showAddToNotebookButton=null==this.componentContent.showAddToNotebookButton||this.componentContent.showAddToNotebookButton,this.isStudentMode()?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.ConfigService.isRunActive()||(this.isDisabled=!0)):this.isGradingMode()?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):this.isGradingRevisionMode()?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):this.isOnlyShowWorkMode()&&(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0),(this.isStudentMode()||this.isGradingMode()||this.isGradingRevisionMode())&&(this.latestAnnotations=this.AnnotationService.getLatestComponentAnnotations(this.nodeId,this.componentId,this.workgroupId)),this.isGradingMode()||this.isGradingRevisionMode()||this.isOnlyShowWorkMode()?this.showAddToNotebookButton=!1:this.isAuthoringMode()&&(null==this.authoringComponentContent.showAddToNotebookButton&&(this.authoringComponentContent.showAddToNotebookButton=!0),this.authoringConstructor()),this.registerListeners(),this.registerComponentWithParentNode()}isStudentMode(){return"student"===this.mode}isAuthoringMode(){return"authoring"===this.mode}isGradingMode(){return"grading"===this.mode}isGradingRevisionMode(){return"gradingRevision"===this.mode}isOnlyShowWorkMode(){return"onlyShowWork"===this.mode}registerListeners(){this.$scope.$on("annotationSavedToServer",(t,e)=>{const n=e.annotation;this.isEventTargetThisComponent(n)&&(this.latestAnnotations=this.AnnotationService.getLatestComponentAnnotations(this.nodeId,this.componentId,this.workgroupId))}),this.$scope.$on("nodeSubmitClicked",(t,e)=>{this.nodeId===e.nodeId&&this.handleNodeSubmit()}),this.$scope.$on("exitNode",(t,e)=>{this.cleanupBeforeExiting(t,e)}),this.registerStudentWorkSavedToServerListener()}initializeScopeGetComponentState(t,e){t.getComponentState=n=>{const i=this.$q.defer(),r=t[e];if(this.hasDirtyWorkToSendToParent(r,n)){const t=this.getDirtyWorkToSendToParentAction(r,n);r.createComponentState(t).then(t=>{i.resolve(t)})}else i.resolve();return i.promise}}hasDirtyWorkToSendToParent(t,e){return e&&t.isSubmitDirty||t.isDirty}getDirtyWorkToSendToParentAction(t,e){return e&&t.isSubmitDirty?"submit":t.isDirty?"save":"change"}authoringConstructor(){this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.summernoteRubricId="summernoteRubric_"+this.nodeId+"_"+this.componentId,this.summernoteRubricHTML=this.componentContent.rubric;const t=this.$translate("INSERT_ASSET"),e=this.UtilService.createInsertAssetButton(this,null,this.nodeId,this.componentId,"rubric",t);this.summernoteRubricOptions={toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","video"]],["view",["fullscreen","codeview","help"]],["customButton",["insertAssetButton"]]],height:300,disableDragAndDrop:!0,buttons:{insertAssetButton:e}},this.registerAuthoringListeners(),this.updateAdvancedAuthoringView()}registerAuthoringListeners(){this.$scope.$watch(()=>this.authoringComponentContent,(t,e)=>{this.handleAuthoringComponentContentChanged(t,e)},!0),this.$scope.$on("componentAdvancedButtonClicked",(t,e)=>{this.componentId===e.componentId&&(this.showAdvancedAuthoring=!this.showAdvancedAuthoring,this.UtilService.hideJSONValidMessage())}),this.$scope.$on("assetSelected",(t,e)=>{this.assetSelected(t,e)})}handleAuthoringComponentContentChanged(t,e){this.componentContent=this.ProjectService.injectAssetPaths(t),this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.latestAnnotations=null,this.isDirty=!1,this.isSubmitDirty=!1,this.submitCounter=0}getFullAssetPath(t){return this.ConfigService.getProjectAssetsDirectoryPath()+"/"+t}getSummernoteId(t){let e="";return"prompt"==t.target?e="summernotePrompt_"+this.nodeId+"_"+this.componentId:"rubric"==t.target&&(e="summernoteRubric_"+this.nodeId+"_"+this.componentId),e}restoreSummernoteCursorPosition(e){t("#"+e).summernote("editor.restoreRange"),t("#"+e).summernote("editor.focus")}insertImageIntoSummernote(e,n,i){t("#"+e).summernote("insertImage",n,i)}insertVideoIntoSummernote(e,n){var i=document.createElement("video");i.controls="true",i.innerHTML='<source ng-src="'+n+'" type="video/mp4">',t("#"+e).summernote("insertNode",i)}assetSelected(t,e){if(this.isEventTargetThisComponent(e)&&"rubric"===e.target){const t=e.assetItem.fileName,n=this.getSummernoteId(e);this.restoreSummernoteCursorPosition(n);const i=this.getFullAssetPath(t);this.UtilService.isImage(t)?this.insertImageIntoSummernote(n,i,t):this.UtilService.isVideo(t)&&this.insertVideoIntoSummernote(n,i)}this.$mdDialog.hide()}registerComponentWithParentNode(){null!=this.$scope.$parent.nodeController&&this.$scope.$parent.nodeController.registerComponentController(this.$scope,this.componentContent)}cleanupBeforeExiting(){}broadcastDoneRenderingComponent(){this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}registerStudentWorkSavedToServerListener(){this.$scope.$on("studentWorkSavedToServer",(t,e)=>{this.handleStudentWorkSavedToServer(t,e)})}handleStudentWorkSavedToServer(t,e){const n=e.studentWork;if(this.isForThisComponent(n)){this.setIsDirty(!1),this.emitComponentDirty(this.getIsDirty());const t=this.ConfigService.convertToClientTimestamp(n.serverSaveTime);n.isSubmit?(this.setSubmittedMessage(t),this.lockIfNecessary(),this.setIsSubmitDirty(!1),this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:this.isSubmitDirty})):n.isAutoSave?this.setAutoSavedMessage(t):this.setSavedMessage(t)}this.handleStudentWorkSavedToServerAdditionalProcessing(t,e)}handleStudentWorkSavedToServerAdditionalProcessing(t,e){}handleNodeSubmit(){this.isSubmit=!0}getPrompt(){return this.componentContent.prompt}saveButtonClicked(){this.isSubmit=!1,this.$scope.$emit("componentSaveTriggered",{nodeId:this.nodeId,componentId:this.componentId})}submitButtonClicked(){this.submit("componentSubmitButton")}submit(t){if(this.getIsSubmitDirty()){let e=!0;if(this.hasMaxSubmitCount()){const t=this.getNumberOfSubmitsLeft();this.hasSubmitMessage()?e=this.confirmSubmit(t):t<=0&&(e=!1)}e?this.performSubmit(t):this.setIsSubmit(!1)}}disableSubmitButton(){this.isSubmitButtonDisabled=!0}performSubmit(t){this.setIsSubmit(!0),this.incrementSubmitCounter(),this.canSubmit()||this.disableSubmitButton(),this.isAuthoringMode()?(this.setIsDirty(!1),this.setIsSubmitDirty(!1),this.createComponentState("submit")):null!=t&&"componentSubmitButton"!==t||this.emitComponentSubmitTriggered()}hasSubmitMessage(){return!1}incrementSubmitCounter(){this.submitCounter++}emitComponentSubmitTriggered(){this.$scope.$emit("componentSubmitTriggered",{nodeId:this.nodeId,componentId:this.componentId})}disableComponentIfNecessary(){if(this.isLockAfterSubmit()){const t=this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId);this.NodeService.isWorkSubmitted(t)&&(this.isDisabled=!0)}}lockIfNecessary(){this.isLockAfterSubmit()&&(this.isDisabled=!0)}isLockAfterSubmit(){return this.componentContent.lockAfterSubmit}studentDataChanged(t=!1){this.setIsDirtyAndBroadcast(),this.setIsSubmitDirtyAndBroadcast(),this.clearSaveText();this.createComponentStateAndBroadcast("change")}setIsDirtyAndBroadcast(){this.setIsDirty(!0),this.emitComponentDirty(!0)}setIsSubmitDirtyAndBroadcast(){this.setIsSubmitDirty(!0),this.emitComponentSubmitDirty(!0)}createComponentStateAndBroadcast(t){this.createComponentState(t).then(t=>{this.emitComponentStudentDataChanged(t),t.isCompleted&&this.emitComponentCompleted(t)})}emitComponentStudentDataChanged(t){this.$scope.$emit("componentStudentDataChanged",{nodeId:this.nodeId,componentId:this.componentId,componentState:t})}emitComponentCompleted(t){this.$scope.$emit("componentCompleted",{nodeId:this.nodeId,componentId:this.componentId,componentState:t})}processLatestStudentWork(){const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId);if(t){const e=t.serverSaveTime,n=this.ConfigService.convertToClientTimestamp(e);t.isSubmit?(this.setIsSubmitDirty(!1),this.emitComponentSubmitDirty(!1),this.setSubmittedMessage(n)):(this.setIsSubmitDirty(!0),this.emitComponentSubmitDirty(!0),this.setSavedMessage(n))}}setIsSubmitDirty(t){this.isSubmitDirty=t}getIsSubmitDirty(){return this.isSubmitDirty}emitComponentDirty(t){this.$scope.$emit("componentDirty",{componentId:this.componentId,isDirty:t})}emitComponentSubmitDirty(t){this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:t})}setSavedMessage(t){this.setSaveText(this.$translate("SAVED"),t)}setAutoSavedMessage(t){this.setSaveText(this.$translate("AUTO_SAVED"),t)}setSubmittedMessage(t){this.setSaveText(this.$translate("SUBMITTED"),t)}setSaveText(t,e){this.saveMessage.text=t,this.saveMessage.time=e}clearSaveText(){this.setSaveText("",null)}getStepNodeIds(){return this.ProjectService.getNodeIds()}getNodePositionAndTitleByNodeId(t){return this.ProjectService.getNodePositionAndTitleByNodeId(t)}getComponentsByNodeId(t){return this.ProjectService.getComponentsByNodeId(t)}isApplicationNode(t){return this.ProjectService.isApplicationNode(t)}createComponentState(t){}createComponentStateAdditionalProcessing(t,e,n){t.resolve(e)}handleConnectedComponents(){const t=this.componentContent.connectedComponents;if(null!=t){const e=[];for(let n of t){const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(n.nodeId,n.componentId);null!=t&&e.push(this.UtilService.makeCopyOfJSONObject(t)),"showWork"===n.type&&(this.isDisabled=!0)}e.length>0&&(this.setStudentWork(this.createMergedComponentState(e)),this.handleConnectedComponentsPostProcess(),this.studentDataChanged())}}createMergedComponentState(t){return t[0]}handleConnectedComponentsPostProcess(){}getConnectedComponentsAndTheirComponentStates(){const t=[];for(const e of this.componentContent.connectedComponents){const n=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(e.nodeId,e.componentId),i={connectedComponent:e,componentState:this.UtilService.makeCopyOfJSONObject(n)};t.push(i)}return t}showCopyPublicNotebookItemButton(){return this.ProjectService.isSpaceExists("public")}copyPublicNotebookItemButtonClicked(t){this.$rootScope.$broadcast("openNotebook",{nodeId:this.nodeId,componentId:this.componentId,insertMode:!0,requester:this.nodeId+"-"+this.componentId,visibleSpace:"public"})}importWorkByStudentWorkId(t){this.StudentDataService.getStudentWorkById(t).then(e=>{null!=e&&(this.setStudentWork(e),this.setParentStudentWorkIdToCurrentStudentWork(t),this.$rootScope.$broadcast("closeNotebook"))})}setParentStudentWorkIdToCurrentStudentWork(t){this.parentStudentWorkIds=[t]}isNotebookEnabled(){return this.NotebookService.isNotebookEnabled()}isStudentNoteClippingEnabled(){return this.NotebookService.isStudentNoteClippingEnabled()}isAddToNotebookEnabled(){return this.isNotebookEnabled()&&this.isStudentNoteClippingEnabled()}setShowSubmitButtonValue(t){null==t||0==t?(this.authoringComponentContent.showSaveButton=!1,this.authoringComponentContent.showSubmitButton=!1):(this.authoringComponentContent.showSaveButton=!0,this.authoringComponentContent.showSubmitButton=!0),this.$scope.$emit("componentShowSubmitButtonValueChanged",{nodeId:this.nodeId,componentId:this.componentId,showSubmitButton:t})}showSubmitButtonValueChanged(){this.setShowSubmitButtonValue(this.authoringComponentContent.showSubmitButton),this.authoringViewComponentChanged()}authoringAddConnectedComponent(){const t=this.createConnectedComponent();this.addConnectedComponent(t),this.authoringAutomaticallySetConnectedComponentComponentIdIfPossible(t),this.authoringViewComponentChanged()}addConnectedComponent(t){null==this.authoringComponentContent.connectedComponents&&(this.authoringComponentContent.connectedComponents=[]),this.authoringComponentContent.connectedComponents.push(t)}createConnectedComponent(){return{nodeId:this.nodeId,componentId:null,type:null}}authoringAutomaticallySetConnectedComponentComponentIdIfPossible(t){if(null!=t){let e=this.getComponentsByNodeId(t.nodeId);if(null!=e){let n=0,i=null;for(let t of e)null!=t&&this.isConnectedComponentTypeAllowed(t.type)&&t.id!=this.componentId&&(n+=1,i=t);1==n&&(t.componentId=i.id,t.type="importWork")}}this.authoringAutomaticallySetConnectedComponentTypeIfPossible(t)}authoringAutomaticallySetConnectedComponentTypeIfPossible(t){null!=t.componentId&&(t.type="importWork"),this.authoringAutomaticallySetConnectedComponentFieldsIfPossible(t)}authoringAutomaticallySetConnectedComponentFieldsIfPossible(t){}authoringDeleteConnectedComponent(t){confirm(this.$translate("areYouSureYouWantToDeleteThisConnectedComponent"))&&(null!=this.authoringComponentContent.connectedComponents&&this.authoringComponentContent.connectedComponents.splice(t,1),this.authoringViewComponentChanged())}authoringGetConnectedComponentType(t){var e=null;if(null!=t){var n=t.nodeId,i=t.componentId,r=this.ProjectService.getComponentByNodeIdAndComponentId(n,i);null!=r&&(e=r.type)}return e}authoringConnectedComponentNodeIdChanged(t){null!=t&&(t.componentId=null,t.type=null,this.authoringAutomaticallySetConnectedComponentComponentIdIfPossible(t),this.authoringViewComponentChanged())}authoringConnectedComponentComponentIdChanged(t){this.authoringAutomaticallySetConnectedComponentTypeIfPossible(t),this.authoringViewComponentChanged()}authoringConnectedComponentTypeChanged(t){null!=t&&("importWork"===t.type||t.type,this.authoringViewComponentChanged())}isConnectedComponentTypeAllowed(t){if(null!=t){let e=this.allowedConnectedComponentTypes;for(let n=0;n<e.length;n++){let i=e[n];if(null!=i&&t==i.type)return!0}}return!1}addTag(){null==this.authoringComponentContent.tags&&(this.authoringComponentContent.tags=[]),this.authoringComponentContent.tags.push(""),this.authoringViewComponentChanged()}moveTagUp(t){if(t>0){let e=this.authoringComponentContent.tags[t];this.authoringComponentContent.tags.splice(t,1),this.authoringComponentContent.tags.splice(t-1,0,e),this.authoringViewComponentChanged()}}moveTagDown(t){if(t<this.authoringComponentContent.tags.length-1){let e=this.authoringComponentContent.tags[t];this.authoringComponentContent.tags.splice(t,1),this.authoringComponentContent.tags.splice(t+1,0,e),this.authoringViewComponentChanged()}}deleteTag(t){confirm(this.$translate("areYouSureYouWantToDeleteThisTag"))&&(this.authoringComponentContent.tags.splice(t,1),this.authoringViewComponentChanged())}summernoteRubricHTMLChanged(){let t=this.summernoteRubricHTML;t=this.ConfigService.removeAbsoluteAssetPaths(t),t=this.UtilService.insertWISELinks(t),this.authoringComponentContent.rubric=t,this.authoringViewComponentChanged()}authoringViewComponentChanged(){this.updateAdvancedAuthoringView(),this.$scope.$parent.nodeAuthoringController.authoringViewNodeChanged()}updateAdvancedAuthoringView(){this.authoringComponentContentJSONString=angular.toJson(this.authoringComponentContent,4)}advancedAuthoringViewComponentChanged(){try{var t=angular.fromJson(this.authoringComponentContentJSONString);this.ProjectService.replaceComponent(this.nodeId,this.componentId,t),this.componentContent=t,this.$scope.$parent.nodeAuthoringController.authoringViewNodeChanged()}catch(t){this.$scope.$parent.nodeAuthoringController.showSaveErrorAdvancedAuthoring()}}showJSONButtonClicked(){if(this.showJSONAuthoring)if(this.isJSONValid())this.saveJSONAuthoringViewChanges(),this.toggleJSONAuthoringView(),this.UtilService.hideJSONValidMessage();else{confirm(this.$translate("jsonInvalidErrorMessage"))&&(this.toggleJSONAuthoringView(),this.UtilService.hideJSONValidMessage(),this.isJSONStringChanged=!1,this.rollbackToRecentValidJSON(),this.saveJSONAuthoringViewChanges())}else this.toggleJSONAuthoringView(),this.rememberRecentValidJSON()}toggleJSONAuthoringView(){this.showJSONAuthoring=!this.showJSONAuthoring}authoringJSONChanged(){this.isJSONStringChanged=!0,this.isJSONValid()?(this.UtilService.showJSONValidMessage(),this.rememberRecentValidJSON()):this.UtilService.showJSONInvalidMessage()}isJSONValid(){try{return angular.fromJson(this.authoringComponentContentJSONString),!0}catch(t){return!1}}rememberRecentValidJSON(){this.authoringValidComponentContentJSONString=this.authoringComponentContentJSONString}rollbackToRecentValidJSON(){this.authoringComponentContentJSONString=this.authoringValidComponentContentJSONString}saveJSONAuthoringViewChanges(){try{const t=angular.fromJson(this.authoringComponentContentJSONString);this.ProjectService.replaceComponent(this.nodeId,this.componentId,t),this.componentContent=t,this.$scope.$parent.nodeAuthoringController.authoringViewNodeChanged(),this.$rootScope.$broadcast("scrollToComponent",{componentId:this.componentId}),this.isJSONStringChanged=!1}catch(t){this.$scope.$parent.nodeAuthoringController.showSaveErrorAdvancedAuthoring()}}isEventTargetThisComponent(t){return this.isForThisComponent(t)}isForThisComponent(t){return this.nodeId==t.nodeId&&this.componentId==t.componentId}canSubmit(){return!this.hasMaxSubmitCount()||this.hasSubmitsLeft()}hasMaxSubmitCount(){return null!=this.getMaxSubmitCount()}getMaxSubmitCount(){return this.componentContent.maxSubmitCount}getNumberOfSubmitsLeft(){return this.getMaxSubmitCount()-this.submitCounter}hasSubmitsLeft(){return this.getNumberOfSubmitsLeft()>0}setIsSubmit(t){this.isSubmit=t}getIsSubmit(){return this.isSubmit}setIsDirty(t){this.isDirty=t}getIsDirty(){return this.isDirty}removeAttachment(t){-1!==this.attachments.indexOf(t)&&(this.attachments.splice(this.attachments.indexOf(t),1),this.studentDataChanged())}attachStudentAsset(t){this.StudentAssetService.copyAssetForReference(t).then(t=>{const e={studentAssetId:t.id,iconURL:t.iconURL};this.attachments.push(e),this.studentDataChanged()})}hasMaxScore(){return null!=this.componentContent.maxScore&&""!==this.componentContent.maxScore}getMaxScore(){return this.componentContent.maxScore}createAutoScoreAnnotation(t){return this.createAutoAnnotation("autoScore",t)}createAutoCommentAnnotation(t){return this.createAutoAnnotation("autoComment",t)}createAutoAnnotation(t,e){const n=this.ConfigService.getRunId(),i=this.ConfigService.getPeriodId(),r=this.nodeId,o=this.componentId,s=this.ConfigService.getWorkgroupId();return"autoScore"===t?this.AnnotationService.createAutoScoreAnnotation(n,i,r,o,s,e):"autoComment"===t?this.AnnotationService.createAutoCommentAnnotation(n,i,r,o,s,e):void 0}updateLatestScoreAnnotation(t){this.latestAnnotations.score=t}updateLatestCommentAnnotation(t){this.latestAnnotations.comment=t}}n.$inject=[],e.a=n}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s=n(348).Buffer}catch(t){}function a(t,e,n){for(var i=0,r=Math.min(t.length,n),o=e;o<r;o++){var s=t.charCodeAt(o)-48;i<<=4,i|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return i}function l(t,e,n,i){for(var r=0,o=Math.min(t.length,n),s=e;s<o;s++){var a=t.charCodeAt(s)-48;r*=i,r+=a>=49?a-49+10:a>=17?a-17+10:a}return r}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,s,a=0;if("be"===n)for(r=t.length-1,o=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(r=0,o=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,r,o=0;for(n=t.length-6,i=0;n>=e;n-=6)r=a(t,n,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);n+6!==e&&(r=a(t,e,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=e)i++;i--,r=r/e|0;for(var o=t.length-n,s=o%i,a=Math.min(o,o-s)+n,c=0,u=n;u<a;u+=i)c=l(t,u,u+i,e),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=l(t,u,t.length,e),u=0;u<s;u++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var i=t.length+e.length|0;n.length=i,i=i-1|0;var r=0|t.words[0],o=0|e.words[0],s=r*o,a=67108863&s,l=s/67108864|0;n.words[0]=a;for(var c=1;c<i;c++){for(var u=l>>>26,h=67108863&l,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;u+=(s=(r=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}n.words[c]=0|h,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var r=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<r|o)).toString(16);n=0!==(o=a>>>24-r&16777215)||s!==this.length-1?c[6-l.length]+l+n:l+n,(r+=2)>=26&&(r-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var d=u[t],f=h[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);n=(p=p.idivn(f)).isZero()?m+n:c[d-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,c=new t(o),u=this.clone();if(l){for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-r;a++)c[a]=0;for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=e.words[i]^n.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var n=t/26|0,r=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},o.prototype.iadd=function(t){var e,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var r=0,o=0;o<i.length;o++)e=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&e,r=e>>>26;for(;0!==r&&o<n.length;o++)e=(0|n.words[o])+r,this.words[o]=67108863&e,r=e>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(e=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,n){var i,r,o,s=t.words,a=e.words,l=n.words,c=0,u=0|s[0],h=8191&u,d=u>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,S=0|s[4],x=8191&S,C=S>>>13,k=0|s[5],T=8191&k,M=k>>>13,E=0|s[6],A=8191&E,I=E>>>13,$=0|s[7],D=8191&$,L=$>>>13,P=0|s[8],O=8191&P,N=P>>>13,j=0|s[9],R=8191&j,B=j>>>13,F=0|a[0],Y=8191&F,H=F>>>13,W=0|a[1],z=8191&W,U=W>>>13,V=0|a[2],G=8191&V,q=V>>>13,X=0|a[3],K=8191&X,J=X>>>13,Z=0|a[4],Q=8191&Z,tt=Z>>>13,et=0|a[5],nt=8191&et,it=et>>>13,rt=0|a[6],ot=8191&rt,st=rt>>>13,at=0|a[7],lt=8191&at,ct=at>>>13,ut=0|a[8],ht=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(i=Math.imul(h,Y))|0)+((8191&(r=(r=Math.imul(h,H))+Math.imul(d,Y)|0))<<13)|0;c=((o=Math.imul(d,H))+(r>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(p,Y),r=(r=Math.imul(p,H))+Math.imul(m,Y)|0,o=Math.imul(m,H);var vt=(c+(i=i+Math.imul(h,z)|0)|0)+((8191&(r=(r=r+Math.imul(h,U)|0)+Math.imul(d,z)|0))<<13)|0;c=((o=o+Math.imul(d,U)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(v,Y),r=(r=Math.imul(v,H))+Math.imul(y,Y)|0,o=Math.imul(y,H),i=i+Math.imul(p,z)|0,r=(r=r+Math.imul(p,U)|0)+Math.imul(m,z)|0,o=o+Math.imul(m,U)|0;var yt=(c+(i=i+Math.imul(h,G)|0)|0)+((8191&(r=(r=r+Math.imul(h,q)|0)+Math.imul(d,G)|0))<<13)|0;c=((o=o+Math.imul(d,q)|0)+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(_,Y),r=(r=Math.imul(_,H))+Math.imul(w,Y)|0,o=Math.imul(w,H),i=i+Math.imul(v,z)|0,r=(r=r+Math.imul(v,U)|0)+Math.imul(y,z)|0,o=o+Math.imul(y,U)|0,i=i+Math.imul(p,G)|0,r=(r=r+Math.imul(p,q)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,q)|0;var bt=(c+(i=i+Math.imul(h,K)|0)|0)+((8191&(r=(r=r+Math.imul(h,J)|0)+Math.imul(d,K)|0))<<13)|0;c=((o=o+Math.imul(d,J)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(x,Y),r=(r=Math.imul(x,H))+Math.imul(C,Y)|0,o=Math.imul(C,H),i=i+Math.imul(_,z)|0,r=(r=r+Math.imul(_,U)|0)+Math.imul(w,z)|0,o=o+Math.imul(w,U)|0,i=i+Math.imul(v,G)|0,r=(r=r+Math.imul(v,q)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,q)|0,i=i+Math.imul(p,K)|0,r=(r=r+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var _t=(c+(i=i+Math.imul(h,Q)|0)|0)+((8191&(r=(r=r+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(T,Y),r=(r=Math.imul(T,H))+Math.imul(M,Y)|0,o=Math.imul(M,H),i=i+Math.imul(x,z)|0,r=(r=r+Math.imul(x,U)|0)+Math.imul(C,z)|0,o=o+Math.imul(C,U)|0,i=i+Math.imul(_,G)|0,r=(r=r+Math.imul(_,q)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,q)|0,i=i+Math.imul(v,K)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(y,K)|0,o=o+Math.imul(y,J)|0,i=i+Math.imul(p,Q)|0,r=(r=r+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(c+(i=i+Math.imul(h,nt)|0)|0)+((8191&(r=(r=r+Math.imul(h,it)|0)+Math.imul(d,nt)|0))<<13)|0;c=((o=o+Math.imul(d,it)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(A,Y),r=(r=Math.imul(A,H))+Math.imul(I,Y)|0,o=Math.imul(I,H),i=i+Math.imul(T,z)|0,r=(r=r+Math.imul(T,U)|0)+Math.imul(M,z)|0,o=o+Math.imul(M,U)|0,i=i+Math.imul(x,G)|0,r=(r=r+Math.imul(x,q)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,q)|0,i=i+Math.imul(_,K)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(w,K)|0,o=o+Math.imul(w,J)|0,i=i+Math.imul(v,Q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,i=i+Math.imul(p,nt)|0,r=(r=r+Math.imul(p,it)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,it)|0;var St=(c+(i=i+Math.imul(h,ot)|0)|0)+((8191&(r=(r=r+Math.imul(h,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(D,Y),r=(r=Math.imul(D,H))+Math.imul(L,Y)|0,o=Math.imul(L,H),i=i+Math.imul(A,z)|0,r=(r=r+Math.imul(A,U)|0)+Math.imul(I,z)|0,o=o+Math.imul(I,U)|0,i=i+Math.imul(T,G)|0,r=(r=r+Math.imul(T,q)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,q)|0,i=i+Math.imul(x,K)|0,r=(r=r+Math.imul(x,J)|0)+Math.imul(C,K)|0,o=o+Math.imul(C,J)|0,i=i+Math.imul(_,Q)|0,r=(r=r+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(v,nt)|0,r=(r=r+Math.imul(v,it)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,it)|0,i=i+Math.imul(p,ot)|0,r=(r=r+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var xt=(c+(i=i+Math.imul(h,lt)|0)|0)+((8191&(r=(r=r+Math.imul(h,ct)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(O,Y),r=(r=Math.imul(O,H))+Math.imul(N,Y)|0,o=Math.imul(N,H),i=i+Math.imul(D,z)|0,r=(r=r+Math.imul(D,U)|0)+Math.imul(L,z)|0,o=o+Math.imul(L,U)|0,i=i+Math.imul(A,G)|0,r=(r=r+Math.imul(A,q)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,q)|0,i=i+Math.imul(T,K)|0,r=(r=r+Math.imul(T,J)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,J)|0,i=i+Math.imul(x,Q)|0,r=(r=r+Math.imul(x,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,i=i+Math.imul(_,nt)|0,r=(r=r+Math.imul(_,it)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(v,ot)|0,r=(r=r+Math.imul(v,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,i=i+Math.imul(p,lt)|0,r=(r=r+Math.imul(p,ct)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ct)|0;var Ct=(c+(i=i+Math.imul(h,ht)|0)|0)+((8191&(r=(r=r+Math.imul(h,dt)|0)+Math.imul(d,ht)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(R,Y),r=(r=Math.imul(R,H))+Math.imul(B,Y)|0,o=Math.imul(B,H),i=i+Math.imul(O,z)|0,r=(r=r+Math.imul(O,U)|0)+Math.imul(N,z)|0,o=o+Math.imul(N,U)|0,i=i+Math.imul(D,G)|0,r=(r=r+Math.imul(D,q)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,q)|0,i=i+Math.imul(A,K)|0,r=(r=r+Math.imul(A,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,i=i+Math.imul(T,Q)|0,r=(r=r+Math.imul(T,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,i=i+Math.imul(x,nt)|0,r=(r=r+Math.imul(x,it)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,it)|0,i=i+Math.imul(_,ot)|0,r=(r=r+Math.imul(_,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,i=i+Math.imul(v,lt)|0,r=(r=r+Math.imul(v,ct)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ct)|0,i=i+Math.imul(p,ht)|0,r=(r=r+Math.imul(p,dt)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,dt)|0;var kt=(c+(i=i+Math.imul(h,pt)|0)|0)+((8191&(r=(r=r+Math.imul(h,mt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,mt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(R,z),r=(r=Math.imul(R,U))+Math.imul(B,z)|0,o=Math.imul(B,U),i=i+Math.imul(O,G)|0,r=(r=r+Math.imul(O,q)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,q)|0,i=i+Math.imul(D,K)|0,r=(r=r+Math.imul(D,J)|0)+Math.imul(L,K)|0,o=o+Math.imul(L,J)|0,i=i+Math.imul(A,Q)|0,r=(r=r+Math.imul(A,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,i=i+Math.imul(T,nt)|0,r=(r=r+Math.imul(T,it)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,it)|0,i=i+Math.imul(x,ot)|0,r=(r=r+Math.imul(x,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,i=i+Math.imul(_,lt)|0,r=(r=r+Math.imul(_,ct)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ct)|0,i=i+Math.imul(v,ht)|0,r=(r=r+Math.imul(v,dt)|0)+Math.imul(y,ht)|0,o=o+Math.imul(y,dt)|0;var Tt=(c+(i=i+Math.imul(p,pt)|0)|0)+((8191&(r=(r=r+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,mt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(R,G),r=(r=Math.imul(R,q))+Math.imul(B,G)|0,o=Math.imul(B,q),i=i+Math.imul(O,K)|0,r=(r=r+Math.imul(O,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,i=i+Math.imul(D,Q)|0,r=(r=r+Math.imul(D,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(A,nt)|0,r=(r=r+Math.imul(A,it)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,it)|0,i=i+Math.imul(T,ot)|0,r=(r=r+Math.imul(T,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,i=i+Math.imul(x,lt)|0,r=(r=r+Math.imul(x,ct)|0)+Math.imul(C,lt)|0,o=o+Math.imul(C,ct)|0,i=i+Math.imul(_,ht)|0,r=(r=r+Math.imul(_,dt)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,dt)|0;var Mt=(c+(i=i+Math.imul(v,pt)|0)|0)+((8191&(r=(r=r+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,mt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(R,K),r=(r=Math.imul(R,J))+Math.imul(B,K)|0,o=Math.imul(B,J),i=i+Math.imul(O,Q)|0,r=(r=r+Math.imul(O,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,i=i+Math.imul(D,nt)|0,r=(r=r+Math.imul(D,it)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(A,ot)|0,r=(r=r+Math.imul(A,st)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,st)|0,i=i+Math.imul(T,lt)|0,r=(r=r+Math.imul(T,ct)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,ct)|0,i=i+Math.imul(x,ht)|0,r=(r=r+Math.imul(x,dt)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,dt)|0;var Et=(c+(i=i+Math.imul(_,pt)|0)|0)+((8191&(r=(r=r+Math.imul(_,mt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,mt)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(R,Q),r=(r=Math.imul(R,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),i=i+Math.imul(O,nt)|0,r=(r=r+Math.imul(O,it)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,it)|0,i=i+Math.imul(D,ot)|0,r=(r=r+Math.imul(D,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,i=i+Math.imul(A,lt)|0,r=(r=r+Math.imul(A,ct)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,ct)|0,i=i+Math.imul(T,ht)|0,r=(r=r+Math.imul(T,dt)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,dt)|0;var At=(c+(i=i+Math.imul(x,pt)|0)|0)+((8191&(r=(r=r+Math.imul(x,mt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((o=o+Math.imul(C,mt)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(R,nt),r=(r=Math.imul(R,it))+Math.imul(B,nt)|0,o=Math.imul(B,it),i=i+Math.imul(O,ot)|0,r=(r=r+Math.imul(O,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,i=i+Math.imul(D,lt)|0,r=(r=r+Math.imul(D,ct)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,ct)|0,i=i+Math.imul(A,ht)|0,r=(r=r+Math.imul(A,dt)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,dt)|0;var It=(c+(i=i+Math.imul(T,pt)|0)|0)+((8191&(r=(r=r+Math.imul(T,mt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,mt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(R,ot),r=(r=Math.imul(R,st))+Math.imul(B,ot)|0,o=Math.imul(B,st),i=i+Math.imul(O,lt)|0,r=(r=r+Math.imul(O,ct)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,ct)|0,i=i+Math.imul(D,ht)|0,r=(r=r+Math.imul(D,dt)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,dt)|0;var $t=(c+(i=i+Math.imul(A,pt)|0)|0)+((8191&(r=(r=r+Math.imul(A,mt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,mt)|0)+(r>>>13)|0)+($t>>>26)|0,$t&=67108863,i=Math.imul(R,lt),r=(r=Math.imul(R,ct))+Math.imul(B,lt)|0,o=Math.imul(B,ct),i=i+Math.imul(O,ht)|0,r=(r=r+Math.imul(O,dt)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,dt)|0;var Dt=(c+(i=i+Math.imul(D,pt)|0)|0)+((8191&(r=(r=r+Math.imul(D,mt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,mt)|0)+(r>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,i=Math.imul(R,ht),r=(r=Math.imul(R,dt))+Math.imul(B,ht)|0,o=Math.imul(B,dt);var Lt=(c+(i=i+Math.imul(O,pt)|0)|0)+((8191&(r=(r=r+Math.imul(O,mt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,mt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Pt=(c+(i=Math.imul(R,pt))|0)+((8191&(r=(r=Math.imul(R,mt))+Math.imul(B,pt)|0))<<13)|0;return c=((o=Math.imul(B,mt))+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,l[0]=gt,l[1]=vt,l[2]=yt,l[3]=bt,l[4]=_t,l[5]=wt,l[6]=St,l[7]=xt,l[8]=Ct,l[9]=kt,l[10]=Tt,l[11]=Mt,l[12]=Et,l[13]=At,l[14]=It,l[15]=$t,l[16]=Dt,l[17]=Lt,l[18]=Pt,0!==c&&(l[19]=c,n.length++),n};function p(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(f=d),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var s=r;r=0;for(var a=67108863&i,l=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var u=o-c,h=(0|t.words[u])*(0|e.words[c]),d=67108863&h;a=67108863&(d=d+a|0),r+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[o]=a,i=s,s=r}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var i=0,r=0;r<e;r++)i|=(1&t)<<e-r-1,t>>=1;return i},m.prototype.permute=function(t,e,n,i,r,o){for(var s=0;s<o;s++)i[s]=e[t[s]],r[s]=n[t[s]]},m.prototype.transform=function(t,e,n,i,r,o){this.permute(o,t,e,n,i,r);for(var s=1;s<r;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<r;u+=a)for(var h=l,d=c,f=0;f<s;f++){var p=n[u+f],m=i[u+f],g=n[u+f+s],v=i[u+f+s],y=h*g-d*v;v=h*v+d*g,g=y,n[u+f]=p+g,i[u+f]=m+v,n[u+f+s]=p-g,i[u+f+s]=m-v,f!==a&&(y=l*h-c*d,d=l*d+c*h,h=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=t[i];t[i]=t[n-i-1],t[n-i-1]=r,r=e[i],e[i]=-e[n-i-1],e[n-i-1]=-r}},m.prototype.normalize13b=function(t,e){for(var n=0,i=0;i<e/2;i++){var r=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+n;t[i]=67108863&r,n=r<67108864?0:r/67108864|0}return t},m.prototype.convert13b=function(t,e,n,r){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<r;++s)n[s]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var i=2*this.guessLen13b(t.length,e.length),r=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),h=new Array(i),d=n.words;d.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(e.words,e.length,c,i),this.transform(s,o,a,l,i,r),this.transform(c,o,u,h,i,r);for(var f=0;f<i;f++){var p=a[f]*u[f]-l[f]*h[f];l[f]=a[f]*h[f]+l[f]*u[f],a[f]=p}return this.conjugate(a,l,i),this.transform(a,l,d,o,i,r),this.conjugate(d,o,i),this.normalize13b(d,i),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,n=0;n<this.length;n++){var r=(0|this.words[n])*t,o=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var i=n/26|0,r=n%26;e[n]=(t.words[i]&1<<r)>>>r}return e}(t);if(0===e.length)return new o(1);for(var n=this,i=0;i<e.length&&0===e[i];i++,n=n.sqr());if(++i<e.length)for(var r=n.sqr();i<e.length;i++,r=r.sqr())0!==e[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,n=t%26,r=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<n;this.words[e]=l|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=n;if(r-=s,r=Math.max(0,r),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=r);c--){var h=0|this.words[c];this.words[c]=u<<26-o|h>>>o,u=h&a}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return i(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,r=1<<e;return!(this.length<=n)&&!!(this.words[n]&r)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var r,o,s=t.length+n;this._expand(s);var a=0;for(r=0;r<t.length;r++){o=(0|this.words[r+n])+a;var l=(0|t.words[r])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)a=(o=(0|this.words[r+n])+a)>>26,this.words[r+n]=67108863&o;if(0===a)return this.strip();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(o=-(0|this.words[r])+a)>>26,this.words[r]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),i=this.clone(),r=t,s=0|r.words[r.length-1];0!==(n=26-this._countBits(s))&&(r=r.ushln(n),i.iushln(n),s=0|r.words[r.length-1]);var a,l=i.length-r.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var u=i.clone()._ishlnsubmul(r,1,l);0===u.negative&&(i=u,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var d=67108864*(0|i.words[r.length+h])+(0|i.words[r.length+h-1]);for(d=Math.min(d/s|0,67108863),i._ishlnsubmul(r,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(r,1,h),i.isZero()||(i.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),i.strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:a||null,mod:i}},o.prototype.divmod=function(t,e,n){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(r=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:r,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),r=t.andln(1),o=n.cmp(i);return o<0||1===r&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,n=0,r=this.length-1;r>=0;r--)n=(e*n+(0|this.words[r]))%t;return n},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*e;this.words[n]=r/t|0,e=r%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new o(1),s=new o(0),a=new o(0),l=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(h)),r.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(u),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),r.isub(a),s.isub(l)):(n.isub(e),a.isub(r),l.isub(s))}return{a:a,b:l,gcd:n.iushln(c)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,s=new o(1),a=new o(0),l=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0==(e.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(r=0===e.cmpn(1)?s:a).cmpn(0)<0&&r.iadd(t),r},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var i=0;e.isEven()&&n.isEven();i++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=e.cmp(n);if(r<0){var o=e;e=n,n=o}else if(0===r||0===n.cmpn(1))break;e.isub(n)}return n.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,n=(t-e)/26,r=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|t.words[n];if(i!==r){i<r?e=-1:i>r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},r(y,v),y.prototype.split=function(t,e){for(var n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var r=t.words[9];for(e.words[e.length++]=4194303&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|r>>>22,r=o}r>>>=22,t.words[i-10]=r,0===r&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var i=0|t.words[n];e+=977*i,t.words[n]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(b,v),r(_,v),r(w,v),w.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+e,r=67108863&i;i>>>=26,t.words[n]=r,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);i(!r.isZero());var a=new o(1).toRed(this),l=a.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var h=this.pow(u,r),d=this.pow(t,r.addn(1).iushrn(1)),f=this.pow(t,r),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<p);var v=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(v),h=v.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var r=n[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),i=e.length-1;i>=0;i--){for(var c=e.words[i],u=l-1;u>=0;u--){var h=c>>u&1;r!==n[0]&&(r=this.sqr(r)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===i&&0===u)&&(r=this.mul(r,n[s]),a=0,s=0)):a=0}l=26}return r},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},r(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(38)(t))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(e){var n;t.exports=function t(e,i,r){function o(a,l){if(!i[a]){if(!e[a]){if(!l&&"function"==typeof n&&n)return n(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n||t)},u,u.exports,t,e,i,r)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,n,i){(function(t){!function(e){var r="object"==typeof i&&i&&!i.nodeType&&i,o="object"==typeof n&&n&&!n.nodeType&&n,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(e=s);var a,l,c=2147483647,u=36,h=1,d=26,f=38,p=700,m=72,g=128,v="-",y=/^xn--/,b=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=u-h,x=Math.floor,C=String.fromCharCode;function k(t){throw new RangeError(w[t])}function T(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function M(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+T((t=t.replace(_,".")).split("."),e).join(".")}function E(t){for(var e,n,i=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function A(t){return T(t,function(t){var e="";return t>65535&&(e+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=C(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function $(t,e,n){var i=0;for(t=n?x(t/p):t>>1,t+=x(t/e);t>S*d>>1;i+=u)t=x(t/S);return x(i+(S+1)*t/(t+f))}function D(t){var e,n,i,r,o,s,a,l,f,p,y,b=[],_=t.length,w=0,S=g,C=m;for((n=t.lastIndexOf(v))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&k("not-basic"),b.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<_;){for(o=w,s=1,a=u;r>=_&&k("invalid-input"),((l=(y=t.charCodeAt(r++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||l>x((c-w)/s))&&k("overflow"),w+=l*s,!(l<(f=a<=C?h:a>=C+d?d:a-C));a+=u)s>x(c/(p=u-f))&&k("overflow"),s*=p;C=$(w-o,e=b.length+1,0==o),x(w/e)>c-S&&k("overflow"),S+=x(w/e),w%=e,b.splice(w++,0,S)}return A(b)}function L(t){var e,n,i,r,o,s,a,l,f,p,y,b,_,w,S,T=[];for(b=(t=E(t)).length,e=g,n=0,o=m,s=0;s<b;++s)(y=t[s])<128&&T.push(C(y));for(i=r=T.length,r&&T.push(v);i<b;){for(a=c,s=0;s<b;++s)(y=t[s])>=e&&y<a&&(a=y);for(a-e>x((c-n)/(_=i+1))&&k("overflow"),n+=(a-e)*_,e=a,s=0;s<b;++s)if((y=t[s])<e&&++n>c&&k("overflow"),y==e){for(l=n,f=u;!(l<(p=f<=o?h:f>=o+d?d:f-o));f+=u)S=l-p,w=u-p,T.push(C(I(p+S%w,0))),l=x(S/w);T.push(C(I(l,0))),o=$(n,_,i==r),n=0,++i}++n,++e}return T.join("")}if(a={version:"1.3.2",ucs2:{decode:E,encode:A},decode:D,encode:L,toASCII:function(t){return M(t,function(t){return b.test(t)?"xn--"+L(t):t})},toUnicode:function(t){return M(t,function(t){return y.test(t)?D(t.slice(4).toLowerCase()):t})}},r&&o)if(n.exports==r)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(r[l]=a[l]);else e.punycode=a}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var i=t("./log");function r(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),o=t.firstChild;o;)!0!==e&&1===o.nodeType&&"SCRIPT"===o.nodeName||n.appendChild(r(o,e)),o=o.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){i("Unable to copy canvas content from",t,e)}}(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}e.exports=function(t,e,n,i,o,s,a){var l=r(t.documentElement,o.javascriptEnabled),c=e.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=n,c.height=i,c.scrolling="no",e.body.appendChild(c),new Promise(function(e){var n=c.contentWindow.document;c.contentWindow.onload=c.onload=function(){var t=setInterval(function(){n.body.childNodes.length>0&&(function t(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var n=e.firstChild;n;)t(n),n=n.nextSibling}}(n.documentElement),clearInterval(t),"view"===o.type&&(c.contentWindow.scrollTo(s,a),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.contentWindow.scrollY===a&&c.contentWindow.scrollX===s||(n.documentElement.style.top=-a+"px",n.documentElement.style.left=-s+"px",n.documentElement.style.position="absolute")),e(c))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),function(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}(t,s,a),n.replaceChild(n.adoptNode(l),n.documentElement),n.close()})}},{"./log":13}],3:[function(t,e,n){function i(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}i.prototype.darken=function(t){var e=1-t;return new i([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},i.prototype.isTransparent=function(){return 0===this.a},i.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},i.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var r=/^#([a-f0-9]{3})$/i;i.prototype.hex3=function(t){var e;return null!==(e=t.match(r))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var o=/^#([a-f0-9]{6})$/i;i.prototype.hex6=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var s=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;i.prototype.rgb=function(t){var e;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var a=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;i.prototype.rgba=function(t){var e;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},i.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},i.prototype.namedColor=function(t){t=t.toLowerCase();var e=l[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},i.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=i},{}],4:[function(t,e,n){var i=t("./support"),r=t("./renderers/canvas"),o=t("./imageloader"),s=t("./nodeparser"),a=t("./nodecontainer"),l=t("./log"),c=t("./utils"),u=t("./clone"),h=t("./proxy").loadUrlDocument,d=c.getBounds,f="data-html2canvas-node",p=0;function m(t,e){var n,i,o=p++;if((e=e||{}).logging&&(l.options.logging=!0,l.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:r,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var s=null!=e.width?e.width:window.innerWidth,a=null!=e.height?e.height:window.innerHeight;return h((n=t,i=document.createElement("a"),i.href=n,i.href=i.href,i),e.proxy,document,s,a,e).then(function(t){return v(t.contentWindow.document.documentElement,t,e,s,a)})}var c=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return c.setAttribute(f+o,o),function(t,e,n,i,r){return u(t,t,n,i,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(o){l("Document cloned");var s=f+r,a="["+s+"='"+r+"']";t.querySelector(a).removeAttribute(s);var c=o.contentWindow,u=c.document.querySelector(a);return("function"==typeof e.onclone?Promise.resolve(e.onclone(c.document)):Promise.resolve(!0)).then(function(){return v(u,o,e,n,i)})})}(c.ownerDocument,e,c.ownerDocument.defaultView.innerWidth,c.ownerDocument.defaultView.innerHeight,o).then(function(t){return"function"==typeof e.onrendered&&(l("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}m.CanvasRenderer=r,m.NodeContainer=a,m.log=l,m.utils=c;var g="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:m;function v(t,e,n,r,a){var c,u=e.contentWindow,h=new i(u.document),f=new o(n,h),p=d(t),m="view"===n.type?r:(c=u.document,Math.max(Math.max(c.body.scrollWidth,c.documentElement.scrollWidth),Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),Math.max(c.body.clientWidth,c.documentElement.clientWidth))),g="view"===n.type?a:function(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}(u.document),v=new n.renderer(m,g,f,n,document);return new s(t,v,h,f,n).ready.then(function(){var i;return l("Finished rendering"),i="view"===n.type?y(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0}):t===u.document.body||t===u.document.documentElement||null!=n.canvas?v.canvas:y(v.canvas,{width:null!=n.width?n.width:p.width,height:null!=n.height?n.height:p.height,top:p.top,left:p.left,x:0,y:0}),function(t,e){e.removeContainer&&(t.parentNode.removeChild(t),l("Cleaned up container"))}(e,n),i})}function y(t,e){var n=document.createElement("canvas"),i=Math.min(t.width-1,Math.max(0,e.left)),r=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var a=r-i,c=s-o;return l("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",a,"height:",c),l("Resulting crop with width",e.width,"and height",e.height,"with x",i,"and y",o),n.getContext("2d").drawImage(t,i,o,a,c,e.x,e.y,a,c),n}e.exports=g},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){var i=t("./log"),r=t("./utils").smallImage;e.exports=function t(e){if(this.src=e,i("DummyImageContainer for",e),!this.promise||!this.image){i("Initiating DummyImageContainer"),t.prototype.image=new Image;var n=this.image;t.prototype.promise=new Promise(function(t,e){n.onload=t,n.onerror=e,n.src=r(),!0===n.complete&&t(n)})}}},{"./log":13,"./utils":26}],6:[function(t,e,n){var i=t("./utils").smallImage;e.exports=function(t,e){var n,r,o=document.createElement("div"),s=document.createElement("img"),a=document.createElement("span");o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=e,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),s.src=i(),s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,a.appendChild(document.createTextNode("Hidden Text")),o.appendChild(a),o.appendChild(s),n=s.offsetTop-a.offsetTop+1,o.removeChild(a),o.appendChild(document.createTextNode("Hidden Text")),o.style.lineHeight="normal",s.style.verticalAlign="super",r=s.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=n,this.lineWidth=1,this.middle=r}},{"./utils":26}],7:[function(t,e,n){var i=t("./font");function r(){this.data={}}r.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new i(t,e)),this.data[t+"-"+e]},e.exports=r},{"./font":6}],8:[function(t,e,n){var i=t("./utils").getBounds,r=t("./proxy").loadUrlDocument;function o(e,n,r){this.image=null,this.src=e;var o=this,s=i(e);this.promise=(n?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(r.proxy,s,r)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(t){return o.image=t})}o.prototype.proxyLoad=function(t,e,n){var i=this.src;return r(i.src,t,i.ownerDocument,e.width,e.height,n)},e.exports=o},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function i(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}i.TYPES={LINEAR:1,RADIAL:2},i.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=i},{}],10:[function(t,e,n){e.exports=function(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(i,r){n.image.onload=i,n.image.onerror=r,e&&(n.image.crossOrigin="anonymous"),n.image.src=t,!0===n.image.complete&&i(n.image)})}},{}],11:[function(t,e,n){var i=t("./log"),r=t("./imagecontainer"),o=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),a=t("./framecontainer"),l=t("./svgcontainer"),c=t("./svgnodecontainer"),u=t("./lineargradientcontainer"),h=t("./webkitgradientcontainer"),d=t("./utils").bind;function f(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}f.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},f.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},f.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,n)),i("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},f.prototype.hasImageBackground=function(t){return"none"!==t.method},f.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new r(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new r(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new r(e,!0):this.options.proxy?new s(e,this.options.proxy):new o(e):new l(e)}return"linear-gradient"===t.method?new u(t):"gradient"===t.method?new h(t):"svg"===t.method?new c(t.args[0],this.support.svg):"IFRAME"===t.method?new a(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new o(t)},f.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},f.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},f.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},f.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},f.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new o(t.src).promise.then(function(e){t.image=e})})},f.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},f.prototype.fetch=function(t){return this.images=t.reduce(d(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){i("Succesfully loaded image #"+(e+1),t)},function(n){i("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),i("Finished searching images"),this},f.prototype.timeout=function(t,e){var n,r=Promise.race([t.promise,new Promise(function(r,o){n=setTimeout(function(){i("Timed out loading image",t),o(t)},e)})]).then(function(t){return clearTimeout(n),t});return r.catch(function(){clearTimeout(n)}),r},e.exports=f},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){var i=t("./gradientcontainer"),r=t("./color");function o(t){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var e=o.REGEXP_DIRECTION.test(t.args[0])||!i.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,i=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=i,this.y1=n;break;case"center":break;default:var r=.01*parseFloat(t,10);if(isNaN(r))break;0===e?(this.y0=r,this.y1=1-this.y0):(this.x0=r,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(i.REGEXP_COLORSTOP),n=+e[2],o=0===n?"%":e[3];return{color:new r(e[1]),stop:"%"===o?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(n,i){return null!==n.stop&&(t.stop=(n.stop-this.colorStops[e-1].stop)/(i+1)+this.colorStops[e-1].stop,!0)},this)},this)}o.prototype=Object.create(i.prototype),o.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=o},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var i=function(){i.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-i.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};i.options={logging:!1},e.exports=i},{}],14:[function(t,e,n){var i=t("./color"),r=t("./utils"),o=r.getBounds,s=r.parseBackgrounds,a=r.offsetBounds;function l(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function c(t){return-1!==t.toString().indexOf("%")}function u(t){return t.replace("px","")}function h(t){return parseFloat(t)}l.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},l.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},l.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},l.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},l.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},l.prototype.prefixedCss=function(t){var e=this.css(t);return void 0===e&&["webkit","moz","ms","o"].some(function(n){return void 0!==(e=this.css(n+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===e?null:e},l.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},l.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},l.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new i(this.css(t)))},l.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},l.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},l.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},l.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=s(this.css("backgroundImage")))},l.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return 1===(n=(n=n[e||0]||n[0]||"auto").trim().split(" ")).length&&(n=[n[0],c(n[0])?"auto":n[0]]),n},l.prototype.parseBackgroundSize=function(t,e,n){var i,r,o=this.cssList("backgroundSize",n);if(c(o[0]))i=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,a=e.width/e.height;return s<a^"contain"===o[0]?{width:t.height*a,height:t.height}:{width:t.width,height:t.width/a}}i=parseInt(o[0],10)}return r="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?i/e.width*e.height:c(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(i=r/e.height*e.width),{width:i,height:r}},l.prototype.parseBackgroundPosition=function(t,e,n,i){var r,o,s=this.cssList("backgroundPosition",n);return r=c(s[0])?(t.width-(i||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?r/e.width*e.height:c(s[1])?(t.height-(i||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(r=o/e.height*e.width),{left:r,top:o}},l.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},l.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var o=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:new i(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return e},l.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(u).map(h);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},l.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?function(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},l.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?a(this.node):o(this.node))},l.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},l.prototype.getValue=function(){var t,e,n=this.node.value||"";return"SELECT"===this.node.tagName?(t=this.node,n=(e=t.options[t.selectedIndex||0])&&e.text||""):"password"===this.node.type&&(n=Array(n.length+1).join("")),0===n.length?this.node.placeholder||"":n},l.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,l.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,l.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,l.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=l},{"./color":3,"./utils":26}],15:[function(t,e,n){var i=t("./log"),r=t("punycode"),o=t("./nodecontainer"),s=t("./textcontainer"),a=t("./pseudoelementcontainer"),l=t("./fontmetrics"),c=t("./color"),u=t("./stackingcontext"),h=t("./utils"),d=h.bind,f=h.getBounds,p=h.parseBackgrounds,m=h.offsetBounds;function g(t,e,n,r,s){i("Starting NodeParser"),this.renderer=e,this.options=s,this.range=null,this.support=n,this.renderQueue=[],this.stack=new u(!0,1,t.ownerDocument,null);var a=new o(t,null);if(s.background&&e.rectangle(0,0,e.width,e.height,new c(s.background)),t===t.ownerDocument.documentElement){var h=new o(a.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,h.color("backgroundColor"))}a.visibile=a.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=H([a].concat(this.getChildren(a)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new l,i("Fetched nodes, total:",this.nodes.length),i("Calculate overflow clips"),this.calculateOverflowClips(),i("Start fetching images"),this.images=r.fetch(this.nodes.filter(N)),this.ready=this.images.ready.then(d(function(){return i("Images loaded, starting parsing"),i("Creating stacking contexts"),this.createStackingContexts(),i("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),i("Render queue created with "+this.renderQueue.length+" items"),new Promise(d(function(t){s.async?"function"==typeof s.async?s.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function v(t){return t.parent&&t.parent.clip.length}function y(){}g.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(N(t)){j(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=v(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,j(t)&&t.cleanDOM()}else R(t)&&(t.clip=v(t)?t.parent.clip:[]);j(t)||(t.bounds=null)},this)},g.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(d(function(){this.asyncRenderer(t,e)},this),0)},g.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},g.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},g.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},g.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),i=this.getPseudoElement(t,":after");n&&e.push(n),i&&e.push(i)}return H(e)},g.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var i=function(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}(n.content),r="url"===i.substr(0,3),o=document.createElement(r?"img":"html2canvaspseudoelement"),l=new a(o,t,e),c=n.length-1;c>=0;c--){var u=n.item(c).replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});o.style[u]=n[u]}if(o.className=a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,r)return o.src=p(i)[0].args[0],[l];var h=document.createTextNode(i);return o.appendChild(h),[l,new s(h,l)]},g.prototype.getChildren=function(t){return H([].filter.call(t.node.childNodes,D).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new s(e,t):new o(e,t)].filter(Y);return e.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},g.prototype.newStackingContext=function(t,e){var n=new u(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},g.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){N(t)&&(this.isRootElement(t)||function(t){return t.getOpacity()<1}(t)||function(t){var e=t.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto")}(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):N(t)&&(L(t)&&E(t)||function(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}(t)||P(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},g.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},g.prototype.isRootElement=function(t){return null===t.parent},g.prototype.sortStackingContexts=function(t){var e;t.contexts.sort((e=t.contexts.slice(0),function(t,n){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(n.cssInt("zIndex")+e.indexOf(n)/e.length)})),t.contexts.forEach(this.sortStackingContexts,this)},g.prototype.parseTextBounds=function(t){return function(e,n,i){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var r=i.slice(0,n).join("").length;return this.getRangeBounds(t.node,r,e.length)}if(t.node&&"string"==typeof t.node.data){var o=t.node.splitText(e.length),s=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=o,s}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},g.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),i=t.parentNode,r=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),i.replaceChild(n,t);var o=e?m(n):f(n);return i.replaceChild(r,n),o},g.prototype.getRangeBounds=function(t,e,n){var i=this.range||(this.range=t.ownerDocument.createRange());return i.setStart(t,e),i.setEnd(t,e+n),i.getBoundingClientRect()},g.prototype.parse=function(t){var e=t.contexts.filter(T),n=t.children.filter(N),i=n.filter(O(P)),r=i.filter(O(L)).filter(O(A)),o=n.filter(O(L)).filter(P),s=i.filter(O(L)).filter(A),a=t.contexts.concat(i.filter(L)).filter(E),l=t.children.filter(R).filter($),c=t.contexts.filter(M);e.concat(r).concat(o).concat(s).concat(a).concat(l).concat(c).forEach(function(t){this.renderQueue.push(t),I(t)&&(this.parse(t),this.renderQueue.push(new y))},this)},g.prototype.paint=function(t){try{t instanceof y?this.renderer.ctx.restore():R(t)?(j(t.parent)&&t.parent.appendToDOM(),this.paintText(t),j(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(i(t),this.options.strict)throw t}},g.prototype.paintNode=function(t){I(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},g.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(F))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):i("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var r=this.images.get(t.node.src);r?this.renderer.renderImage(t,e,t.borders,r):i("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},g.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),i={width:n-1,height:n-1,top:e.top,left:e.left},r=[3,3],o=[r,r,r,r],s=[1,1,1,1].map(function(t){return{color:new c("#A5A5A5"),width:t}}),a=S(i,o,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(i.left+1,i.top+1,i.width-2,i.height-2,new c("#DEDEDE")),this.renderer.renderBorders(_(s,i,a,o)),t.node.checked&&(this.renderer.font(new c("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("",i.left+n/6,i.top+n-1))},this)},g.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new c("#DEDEDE"),1,new c("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new c("#424242"))},this)},g.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var n=t.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{r.style[e]=t.css(e)}catch(t){i("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var o=t.parseBounds();r.style.position="fixed",r.style.left=o.left+"px",r.style.top=o.top+"px",r.textContent=e,n.body.appendChild(r),this.paintText(new s(r.firstChild,t)),n.body.removeChild(r)}},g.prototype.paintText=function(t){t.applyTextTransform();var e,n=r.ucs2.decode(t.node.data),i=this.options.letterRendering&&!function(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}(t)||(e=t.node.data,/[^\u0000-\u00ff]/.test(e))?n.map(function(t){return r.ucs2.encode([t])}):function(t){for(var e,n,i=[],o=0,s=!1;t.length;)n=t[o],-1!==[32,13,10,9,45].indexOf(n)===s?((e=t.splice(0,o)).length&&i.push(r.ucs2.encode(e)),s=!s,o=0):o++,o>=t.length&&(e=t.splice(0,o)).length&&i.push(r.ucs2.encode(e));return i}(n),o=t.parent.fontWeight(),s=t.parent.css("fontSize"),a=t.parent.css("fontFamily"),l=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),o,s,a),l.length?this.renderer.fontShadow(l[0].color,l[0].offsetX,l[0].offsetY,l[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){i.map(this.parseTextBounds(t),this).forEach(function(e,n){e&&(this.renderer.text(i[n],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(a,s)))},this)},this)},g.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var b={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};function _(t,e,n,i){return t.map(function(r,o){if(r.width>0){var s=e.left,a=e.top,l=e.width,c=e.height-t[2].width;switch(o){case 0:c=t[0].width,r.args=C({c1:[s,a],c2:[s+l,a],c3:[s+l-t[1].width,a+c],c4:[s+t[3].width,a+c]},i[0],i[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:s=e.left+e.width-t[1].width,l=t[1].width,r.args=C({c1:[s+l,a],c2:[s+l,a+c+t[2].width],c3:[s,a+c],c4:[s,a+t[0].width]},i[1],i[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:a=a+e.height-t[2].width,c=t[2].width,r.args=C({c1:[s+l,a+c],c2:[s,a+c],c3:[s+t[3].width,a],c4:[s+l-t[3].width,a]},i[2],i[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:l=t[3].width,r.args=C({c1:[s,a+c+t[2].width],c2:[s,a],c3:[s+l,a+t[0].width],c4:[s+l,a+c]},i[3],i[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return r})}function w(t,e,n,i){var r=(Math.sqrt(2)-1)/3*4,o=n*r,s=i*r,a=t+n,l=e+i;return{topLeft:x({x:t,y:l},{x:t,y:l-s},{x:a-o,y:e},{x:a,y:e}),topRight:x({x:t,y:e},{x:t+o,y:e},{x:a,y:l-s},{x:a,y:l}),bottomRight:x({x:a,y:e},{x:a,y:e+s},{x:t+o,y:l},{x:t,y:l}),bottomLeft:x({x:a,y:l},{x:a-o,y:l},{x:t,y:e+s},{x:t,y:e})}}function S(t,e,n){var i=t.left,r=t.top,o=t.width,s=t.height,a=e[0][0]<o/2?e[0][0]:o/2,l=e[0][1]<s/2?e[0][1]:s/2,c=e[1][0]<o/2?e[1][0]:o/2,u=e[1][1]<s/2?e[1][1]:s/2,h=e[2][0]<o/2?e[2][0]:o/2,d=e[2][1]<s/2?e[2][1]:s/2,f=e[3][0]<o/2?e[3][0]:o/2,p=e[3][1]<s/2?e[3][1]:s/2,m=o-c,g=s-d,v=o-h,y=s-p;return{topLeftOuter:w(i,r,a,l).topLeft.subdivide(.5),topLeftInner:w(i+n[3].width,r+n[0].width,Math.max(0,a-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:w(i+m,r,c,u).topRight.subdivide(.5),topRightInner:w(i+Math.min(m,o+n[3].width),r+n[0].width,m>o+n[3].width?0:c-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:w(i+v,r+g,h,d).bottomRight.subdivide(.5),bottomRightInner:w(i+Math.min(v,o-n[3].width),r+Math.min(g,s+n[0].width),Math.max(0,h-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:w(i,r+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:w(i+n[3].width,r+y,Math.max(0,f-n[3].width),p-n[2].width).bottomLeft.subdivide(.5)}}function x(t,e,n,i){var r=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(o){var s=r(t,e,o),a=r(e,n,o),l=r(n,i,o),c=r(s,a,o),u=r(a,l,o),h=r(c,u,o);return[x(t,s,c,h),x(h,u,l,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function C(t,e,n,i,r,o,s){var a=[];return e[0]>0||e[1]>0?(a.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(a.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(a.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function k(t,e,n,i,r,o,s){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",o,s]),(n[0]>0||n[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function T(t){return t.cssInt("zIndex")<0}function M(t){return t.cssInt("zIndex")>0}function E(t){return 0===t.cssInt("zIndex")}function A(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function I(t){return t instanceof u}function $(t){return t.node.data.trim().length>0}function D(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function L(t){return"static"!==t.css("position")}function P(t){return"none"!==t.css("float")}function O(t){var e=this;return function(){return!t.apply(e,arguments)}}function N(t){return t.node.nodeType===Node.ELEMENT_NODE}function j(t){return!0===t.isPseudoElement}function R(t){return t.node.nodeType===Node.TEXT_NODE}function B(t){return parseInt(t,10)}function F(t){return t.width}function Y(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function H(t){return[].concat.apply([],t)}g.prototype.parseBorders=function(t){var e=t.parseBounds(),n=function(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius").split(" ");return n.length<=1&&(n[1]=n[0]),n.map(B)})}(t),i=["Top","Right","Bottom","Left"].map(function(e,n){var i=t.css("border"+e+"Style"),r=t.color("border"+e+"Color");"inset"===i&&r.isBlack()&&(r=new c([255,255,255,r.a]));var o=b[i]?b[i][n]:null;return{width:t.cssInt("border"+e+"Width"),color:o?r[o[0]](o[1]):r,args:null}}),r=S(e,n,i);return{clip:this.parseBackgroundClip(t,r,i,n,e),borders:_(i,e,r,n)}},g.prototype.parseBackgroundClip=function(t,e,n,i,r){var o=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":k(o,i[0],i[1],e.topLeftInner,e.topRightInner,r.left+n[3].width,r.top+n[0].width),k(o,i[1],i[2],e.topRightInner,e.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),k(o,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),k(o,i[3],i[0],e.bottomLeftInner,e.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:k(o,i[0],i[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),k(o,i[1],i[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),k(o,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),k(o,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return o},e.exports=g},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){var i=t("./xhr"),r=t("./utils"),o=t("./log"),s=t("./clone"),a=r.decode64;function l(t,e,n){var r="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var o=h(r),s=d(e,t,o);return r?i(s):u(n,s,o).then(function(t){return a(t.content)})}var c=0;function u(t,e,n){return new Promise(function(i,r){var o=t.createElement("script"),s=function(){delete window.html2canvas.proxy[n],t.body.removeChild(o)};window.html2canvas.proxy[n]=function(t){s(),i(t)},o.src=e,o.onerror=function(t){s(),r(t)},t.body.appendChild(o)})}function h(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++c+"_"+Math.round(1e5*Math.random())}function d(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}function f(t){return function(e){var n,i=new DOMParser;try{n=i.parseFromString(e,"text/html")}catch(t){o("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){o("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var r=n.querySelector("base");if(!r||!r.href.host){var s=n.createElement("base");s.href=t,n.head.insertBefore(s,n.head.firstChild)}return n}}n.Proxy=l,n.ProxyURL=function(t,e,n){var i="crossOrigin"in new Image,r=h(i),o=d(e,t,r);return i?Promise.resolve(o):u(n,o,r).then(function(t){return"data:"+t.type+";base64,"+t.content})},n.loadUrlDocument=function(t,e,n,i,r,o){return new l(t,e,window.document).then(f(t)).then(function(t){return s(t,n,i,r,o,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){var i=t("./proxy").ProxyURL;e.exports=function(t,e){var n=document.createElement("a");n.href=t,t=n.href,this.src=t,this.image=new Image;var r=this;this.promise=new Promise(function(n,o){r.image.crossOrigin="Anonymous",r.image.onload=n,r.image.onerror=o,new i(t,e,document).then(function(t){r.image.src=t}).catch(o)})}},{"./proxy":16}],18:[function(t,e,n){var i=t("./nodecontainer");function r(t,e,n){i.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}r.prototype.cloneTo=function(t){r.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},r.prototype=Object.create(i.prototype),r.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=r},{"./nodecontainer":14}],19:[function(t,e,n){var i=t("./log");function r(t,e,n,i,r){this.width=t,this.height=e,this.images=n,this.options=i,this.document=r}r.prototype.renderImage=function(t,e,n,i){var r=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),l=n.borders,c=e.width-(l[1].width+l[3].width+r+s),u=e.height-(l[0].width+l[2].width+o+a);this.drawImage(i,0,0,i.image.width||c,i.image.height||u,e.left+r+l[3].width,e.top+o+l[0].width,c,u)},r.prototype.renderBackground=function(t,e,n){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},r.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},r.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},r.prototype.renderBackgroundImage=function(t,e,n){t.parseBackgroundImages().reverse().forEach(function(r,o,s){switch(r.method){case"url":var a=this.images.get(r.args[0]);a?this.renderBackgroundRepeating(t,e,a,s.length-(o+1),n):i("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(r.value);l?this.renderBackgroundGradient(l,e,n):i("Error loading background-image",r.args[0]);break;case"none":break;default:i("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(t,e,n,i,r){var o=t.parseBackgroundSize(e,n.image,i),s=t.parseBackgroundPosition(e,n.image,i,o);switch(t.parseBackgroundRepeat(i)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+r[3],e.top+s.top+r[0],99999,o.height,r);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+r[3],e.top+r[0],o.width,99999,r);break;case"no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+r[3],e.top+s.top+r[0],o.width,o.height,r);break;default:this.renderBackgroundRepeat(n,s,o,{top:e.top,left:e.left},r[3],r[0])}},e.exports=r},{"./log":13}],20:[function(t,e,n){var i=t("../renderer"),r=t("../lineargradientcontainer"),o=t("../log");function s(t,e){i.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},o("Initialized CanvasRenderer with size",t,"x",e)}function a(t){return t.length>0}s.prototype=Object.create(i.prototype),s.prototype.setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},s.prototype.rectangle=function(t,e,n,i,r){this.setFillStyle(r).fillRect(t,e,n,i)},s.prototype.circle=function(t,e,n,i){this.setFillStyle(i),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},s.prototype.circleStroke=function(t,e,n,i,r,o){this.circle(t,e,n,i),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},s.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},s.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},s.prototype.drawImage=function(t,e,n,i,r,o,s,a,l){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,i,r,o,s,a,l)},s.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(a).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},s.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},s.prototype.font=function(t,e,n,i,r,o){this.setFillStyle(t).font=[e,n,i,r,o].join(" ").split(",")[0]},s.prototype.fontShadow=function(t,e,n,i){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",i)},s.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},s.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},s.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},s.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},s.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},s.prototype.backgroundRepeatShape=function(t,e,n,i,r,o,s,a,l){var c=[["line",Math.round(r),Math.round(o)],["line",Math.round(r+s),Math.round(o)],["line",Math.round(r+s),Math.round(a+o)],["line",Math.round(r),Math.round(a+o)]];this.clip([c],function(){this.renderBackgroundRepeat(t,e,n,i,l[3],l[0])},this)},s.prototype.renderBackgroundRepeat=function(t,e,n,i,r,o){var s=Math.round(i.left+e.left+r),a=Math.round(i.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},s.prototype.renderBackgroundGradient=function(t,e){if(t instanceof r){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n)}},s.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;var i=document.createElement("canvas");return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),i},e.exports=s},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){var i=t("./nodecontainer");function r(t,e,n,r){i.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}r.prototype=Object.create(i.prototype),r.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=r},{"./nodecontainer":14}],22:[function(t,e,n){function i(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}i.prototype.testRangeBounds=function(t){var e,n,i=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&((n=t.createElement("boundtest")).style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(i=!0),t.body.removeChild(n)),i},i.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},i.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=i},{}],23:[function(t,e,n){var i=t("./xhr"),r=t("./utils").decode64;function o(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):i(t)}).then(function(t){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},o.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},o.prototype.createCanvas=function(t){var e=this;return function(n,i){var r=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=r.lowerCanvasEl,r.setWidth(i.width).setHeight(i.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,i)).renderAll(),t(r.lowerCanvasEl)}},o.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):r(t)},e.exports=o},{"./utils":26,"./xhr":28}],24:[function(t,e,n){var i=t("./svgcontainer");function r(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,i){n.image=new Image,n.image.onload=e,n.image.onerror=i,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===n.image.complete&&e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}r.prototype=Object.create(i.prototype),e.exports=r},{"./svgcontainer":23}],25:[function(t,e,n){var i=t("./nodecontainer");function r(t,e){i.call(this,t,e)}function o(t,e,n){if(t.length>0)return e+n.toUpperCase()}r.prototype=Object.create(i.prototype),r.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=r},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){var e,n,i,r,o,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,u="";for(e=0;e<c;e+=4)o=l.indexOf(t[e])<<2|(n=l.indexOf(t[e+1]))>>4,s=(15&n)<<4|(i=l.indexOf(t[e+2]))>>2,a=(3&i)<<6|(r=l.indexOf(t[e+3])),u+=64===i?String.fromCharCode(o):64===r||-1===r?String.fromCharCode(o,s):String.fromCharCode(o,s,a);return u},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,i,r,o,s,a,l=[],c=0,u=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&a.push(n),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(i=e.substr(0,r),e=e.substr(r)),l.push({prefix:i,method:e.toLowerCase(),value:o,args:a,image:null})),a=[],e=i=n=o=""};return a=[],e=i=n=o="",t.split("").forEach(function(t){if(!(0===c&&" \r\n\t".indexOf(t)>-1)){switch(t){case'"':s?s===t&&(s=null):s=t;break;case"(":if(s)break;if(0===c)return c=1,void(o+=t);u++;break;case")":if(s)break;if(1===c){if(0===u)return c=0,o+=t,void h();u--}break;case",":if(s)break;if(0===c)return void h();if(1===c&&0===u&&!e.match(/^url$/i))return a.push(n),n="",void(o+=t)}o+=t,0===c?e+=t:n+=t}}),h(),l}},{}],27:[function(t,e,n){var i=t("./gradientcontainer");function r(t){i.apply(this,arguments),this.type="linear"===t.args[0]?i.TYPES.LINEAR:i.TYPES.RADIAL}r.prototype=Object.create(i.prototype),e.exports=r},{"./gradientcontainer":9}],28:[function(t,e,n){e.exports=function(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.onload=function(){200===i.status?e(i.responseText):n(new Error(i.statusText))},i.onerror=function(){n(new Error("Network Error"))},i.send()})}},{}]},{},[4])(4)}).call(this,n(7))},function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";var i=e,r=n(8),o=n(11),s=n(212);i.assert=o,i.toArray=s.toArray,i.zero2=s.zero2,i.toHex=s.toHex,i.encode=s.encode,i.getNAF=function(t,e){for(var n=[],i=1<<e+1,r=t.clone();r.cmpn(1)>=0;){var o;if(r.isOdd()){var s=r.andln(i-1);o=s>(i>>1)-1?(i>>1)-s:s,r.isubn(o)}else o=0;n.push(o);for(var a=0!==r.cmpn(0)&&0===r.andln(i-1)?e+1:1,l=1;l<a;l++)n.push(0);r.iushrn(a)}return n},i.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var i=0,r=0;t.cmpn(-i)>0||e.cmpn(-r)>0;){var o,s,a,l=t.andln(3)+i&3,c=e.andln(3)+r&3;if(3===l&&(l=-1),3===c&&(c=-1),0==(1&l))o=0;else o=3!==(a=t.andln(7)+i&7)&&5!==a||2!==c?l:-l;if(n[0].push(o),0==(1&c))s=0;else s=3!==(a=e.andln(7)+r&7)&&5!==a||2!==l?c:-c;n[1].push(s),2*i===o+1&&(i=1-i),2*r===s+1&&(r=1-r),t.iushrn(1),e.iushrn(1)}return n},i.cachedProperty=function(t,e,n){var i="_"+e;t.prototype[e]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}},i.parseBytes=function(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function(t){return new r(t,"hex","le")}},function(t,e,n){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},r=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),l=i[n];n<o;l=i[++n])m(l)||!_(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(n,i){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&e._extend(i,n),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),u(i,t,i.depth)}function l(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function u(t,n,i){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return v(r)||(r=u(t,r,i)),r}var o=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(x(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return h(n)}var c,_="",C=!1,k=["{","}"];(f(n)&&(C=!0,k=["[","]"]),x(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),S(n)&&(_=" "+h(n)),0!==s.length||C&&0!=n.length?i<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=C?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)E(e,String(s))?o.push(d(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(t,e,n,i,r,!0))}),o}(t,n,i,a,s):s.map(function(e){return d(t,n,i,a,e,C)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,k)):k[0]+_+k[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,i,r,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),E(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(n)?u(t,l.value,null):u(t,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),y(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function v(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===C(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===C(t)}function S(t){return _(t)&&("[object Error]"===C(t)||t instanceof Error)}function x(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(y(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var i=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=_,e.isDate=w,e.isError=S,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(308);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",M(),e.format.apply(e,arguments))},e.inherits=n(2),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(A&&t[A]){var e;if("function"!=typeof(e=t[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,i=new Promise(function(t,i){e=t,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(t,i){t?n(t):e(i)});try{t.apply(this,r)}catch(t){n(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),A&&Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=A,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};e.apply(this,n).then(function(e){t.nextTick(s,null,e)},function(e){t.nextTick(I,e,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,i(e)),n}}).call(this,n(9))},function(t,e,n){"use strict";var i=n(11),r=n(2);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function l(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=r,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(var i=0,r=0;r<t.length;r++){var s=t.charCodeAt(r);s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=63&s|128):o(t,r)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++r)),n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=63&s|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=63&s|128)}else for(r=0;r<t.length;r++)n[r]=0|t[r];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=a(t[n].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var n="",i=0;i<t.length;i++){var r=t[i];"little"===e&&(r=s(r)),n+=l(r.toString(16))}return n},e.zero2=a,e.zero8=l,e.join32=function(t,e,n,r){var o=n-e;i(o%4==0);for(var s=new Array(o/4),a=0,l=e;a<s.length;a++,l+=4){var c;c="big"===r?t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3]:t[l+3]<<24|t[l+2]<<16|t[l+1]<<8|t[l],s[a]=c>>>0}return s},e.split32=function(t,e){for(var n=new Array(4*t.length),i=0,r=0;i<t.length;i++,r+=4){var o=t[i];"big"===e?(n[r]=o>>>24,n[r+1]=o>>>16&255,n[r+2]=o>>>8&255,n[r+3]=255&o):(n[r+3]=o>>>24,n[r+2]=o>>>16&255,n[r+1]=o>>>8&255,n[r]=255&o)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,i){return t+e+n+i>>>0},e.sum32_5=function(t,e,n,i,r){return t+e+n+i+r>>>0},e.sum64=function(t,e,n,i){var r=t[e],o=i+t[e+1]>>>0,s=(o<i?1:0)+n+r;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,n,i){return(e+i>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,i){return e+i>>>0},e.sum64_4_hi=function(t,e,n,i,r,o,s,a){var l=0,c=e;return l+=(c=c+i>>>0)<e?1:0,l+=(c=c+o>>>0)<o?1:0,t+n+r+s+(l+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,n,i,r,o,s,a){return e+i+o+a>>>0},e.sum64_5_hi=function(t,e,n,i,r,o,s,a,l,c){var u=0,h=e;return u+=(h=h+i>>>0)<e?1:0,u+=(h=h+o>>>0)<o?1:0,u+=(h=h+a>>>0)<a?1:0,t+n+r+s+l+(u+=(h=h+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,n,i,r,o,s,a,l,c){return e+i+o+a+c>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},function(t,e,n){var i=n(3).Buffer,r=n(24).Transform,o=n(41).StringDecoder;function s(t){r.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(2)(s,r),s.prototype.update=function(t,e,n){"string"==typeof t&&(t=i.from(t,e));var r=this._update(t);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(t,e,n){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){i=t}finally{n(i)}},s.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},s.prototype._finalOrDigest=function(t){var e=this.__final()||i.alloc(0);return t&&(e=this._toString(e,t,!0)),e},s.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var i=this._decoder.write(t);return n&&(i+=this._decoder.end()),i},t.exports=s},function(t,e,n){n(267),t.exports=angular},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}.bind(i);return r.listener=n,i.wrapFn=r,r}function d(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)o(u[n],this,e)}return!0},a.prototype.addListener=function(t,e){return u(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return u(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){"use strict";var i=n(31),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(22);o.inherits=n(2);var s=n(191),a=n(40);o.inherits(h,s);for(var l=r(a.prototype),c=0;c<l.length;c++){var u=l[c];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},function(t,e,n){"use strict";(function(e,i){var r=65536,o=4294967295;var s=n(3).Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>o)throw new RangeError("requested too many random bytes");var n=s.allocUnsafe(t);if(t>0)if(t>r)for(var l=0;l<t;l+=r)a.getRandomValues(n.slice(l,l+r));else a.getRandomValues(n);if("function"==typeof e)return i.nextTick(function(){e(null,n)});return n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(7),n(9))},function(t,e,n){var i=n(3).Buffer;function r(t,e){this._block=i.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}r.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=i.from(t,e));for(var n=this._block,r=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var l=s%r,c=Math.min(o-a,r-l),u=0;u<c;u++)n[l+u]=t[a+u];a+=c,(s+=c)%r==0&&this._update(n)}return this._len+=o,this},r.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0,r=(n-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r},function(t,e,n){(e=t.exports=n(191)).Stream=e,e.Readable=e,e.Writable=n(40),e.Duplex=n(18),e.Transform=n(194),e.PassThrough=n(314)},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(4).Buffer)},function(t,e,n){"use strict";var i=n(2),r=n(43),o=n(44),s=n(45),a=n(15);function l(t){a.call(this,"digest"),this._hash=t}i(l,a),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new r:"rmd160"===t||"ripemd160"===t?new o:new l(s(t))}},function(t,e,n){t.exports=r;var i=n(17).EventEmitter;function r(){i.call(this)}n(2)(r,i),r.Readable=n(21),r.Writable=n(319),r.Duplex=n(320),r.Transform=n(321),r.PassThrough=n(322),r.Stream=r,r.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",c),t.on("error",c),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},function(t,e,n){(function(e){t.exports=function(t,n){for(var i=Math.min(t.length,n.length),r=new e(i),o=0;o<i;++o)r[o]=t[o]^n[o];return r}}).call(this,n(4).Buffer)},function(t,e,n){"use strict";var i=n(14),r=n(11);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=i.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=i.join32(t,0,t.length-n,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),r(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,i=new Array(n+this.padLength);i[0]=128;for(var r=1;r<n;r++)i[r]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[r++]=0;i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=t>>>24&255,i[r++]=t>>>16&255,i[r++]=t>>>8&255,i[r++]=255&t}else for(i[r++]=255&t,i[r++]=t>>>8&255,i[r++]=t>>>16&255,i[r++]=t>>>24&255,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,o=8;o<this.padLength;o++)i[r++]=0;return i}},function(t,e,n){var i=e;i.bignum=n(8),i.define=n(373).define,i.base=n(28),i.constants=n(218),i.decoders=n(378),i.encoders=n(380)},function(t,e,n){var i=e;i.Reporter=n(375).Reporter,i.DecoderBuffer=n(217).DecoderBuffer,i.EncoderBuffer=n(217).EncoderBuffer,i.Node=n(376)},function(t,e,n){(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,_,w,S,x,C=C||{version:"3.4.0"};if(e.fabric=C,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?C.document=document:C.document=document.implementation.createHTMLDocument(""),C.window=window;else{var k=new(n(426).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;C.document=k.document,C.jsdomImplForWrapper=n(427).implForWrapper,C.nodeCanvas=n(428).Canvas,C.window=k,DOMParser=C.window.DOMParser}function T(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1);var o=n.height-i.height;r.drawImage(n,0,o,i.width,i.height,0,0,i.width,i.height)}function M(t,e){var n=e.targetCanvas.getContext("2d"),i=e.destinationWidth,r=e.destinationHeight,o=i*r*4,s=new Uint8Array(this.imageBuffer,0,o),a=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,s);var l=new ImageData(a,i,r);n.putImageData(l,0,0)}C.isTouchSupported="ontouchstart"in C.window||"ontouchstart"in C.document||C.window&&C.window.navigator&&C.window.navigator.maxTouchPoints>0,C.isLikelyNode=void 0!==t&&"undefined"==typeof window,C.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],C.DPI=96,C.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",C.fontPaths={},C.iMatrix=[1,0,0,1,0,0],C.perfLimitSizeTotal=2097152,C.maxCacheSideLimit=4096,C.minCacheSideLimit=256,C.charWidthsCache={},C.textureSize=2048,C.disableStyleCopyPaste=!1,C.enableGLFiltering=!0,C.devicePixelRatio=C.window.devicePixelRatio||C.window.webkitDevicePixelRatio||C.window.mozDevicePixelRatio||1,C.browserShadowBlurConstant=1,C.arcToSegmentsCache={},C.boundsOfCurveCache={},C.cachesBoundsOfCurve=!0,C.forceGLPutImageData=!1,C.initFilterBackend=function(){return C.enableGLFiltering&&C.isWebglSupported&&C.isWebglSupported(C.textureSize)?(console.log("max texture size: "+C.maxTextureSize),new C.WebglFilterBackend({tileSize:C.textureSize})):C.Canvas2dFilterBackend?new C.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=C),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:C.util.array.fill(n,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}function i(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter(function(t){return!1!==t}),this}C.Observable={observe:e,stopObserving:n,fire:i,on:e,off:n,trigger:i}}(),C.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return void 0===t?this._objects.concat():this._objects.filter(function(e){return e.type===t})},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t){return this._objects.indexOf(t)>-1},complexity:function(){return this._objects.reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},C.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof C.Gradient||this.set(e,new C.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof C.Pattern?n&&n():this.set(e,new C.Pattern(t,n))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=C.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},i=e,r=Math.sqrt,o=Math.atan2,s=Math.pow,a=Math.PI/180,l=Math.PI/2,C.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/l){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/l){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,n){t.subtractEquals(e);var i=C.util.rotateVector(t,n);return new C.Point(i.x,i.y).addEquals(e)},rotateVector:function(t,e){var n=C.util.sin(e),i=C.util.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},transformPoint:function(t,e,n){return n?new C.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new C.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=C.util.transformPoint(t[n],e);var i=[t[0].x,t[1].x,t[2].x,t[3].x],r=C.util.array.min(i),o=C.util.array.max(i)-r,s=[t[0].y,t[1].y,t[2].y,t[3].y],a=C.util.array.min(s);return{left:r,top:a,width:o,height:C.util.array.max(s)-a}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=C.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=C.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*C.DPI/25.4;case"cm":return i*C.DPI/2.54;case"in":return i*C.DPI;case"pt":return i*C.DPI/72;case"pc":return i*C.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=C.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),C.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(t){if(!t)return C;var e,n=t.split("."),r=n.length,o=i||C.window;for(e=0;e<r;++e)o=o[n[e]];return o},loadImage:function(t,e,n,i){if(t){var r=C.util.createImage(),o=function(){e&&e.call(n,r),r=r.onload=r.onerror=null};r.onload=o,r.onerror=function(){C.log("Error loading "+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&i&&(r.crossOrigin=i),"data:image/svg"===t.substring(0,14)&&(r.onload=null,C.util.loadImageInDom(r,o)),r.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=C.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),C.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){var r=[],o=0,s=(t=t||[]).length;function a(){++o===s&&e&&e(r.filter(function(t){return t}))}s?t.forEach(function(t,e){t&&t.type?C.util.getKlass(t.type,n).fromObject(t,function(n,o){o||(r[e]=n),i&&i(t,n,o),a()}):a()}):e&&e(r)},enlivenPatterns:function(t,e){function n(){++r===o&&e&&e(i)}var i=[],r=0,o=(t=t||[]).length;o?t.forEach(function(t,e){t&&t.source?new C.Pattern(t,function(t){i[e]=t,n()}):(i[e]=t,n())}):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new C.Group(t,e),void 0!==n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,e,n,i,s,a){var l=i-e,c=s-n,u=r(l*l+c*c),h=o(c,l),d=a.length,f=0,p=!0;for(t.save(),t.translate(e,n),t.moveTo(0,0),t.rotate(h),e=0;u>e;)(e+=a[f++%d])>u&&(e=u),t[p?"lineTo":"moveTo"](e,0),p=!p;t.restore()},createCanvasElement:function(){return C.document.createElement("canvas")},copyCanvasElement:function(t){var e=C.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return C.document.createElement("img")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=o(t[1],t[0]),n=s(t[0],2)+s(t[1],2),i=r(n),l=(t[0]*t[3]-t[2]*t[1])/i,c=o(t[0]*t[2]+t[1]*t[3],n);return{angle:e/a,scaleX:i,scaleY:l,skewX:c/a,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return C.iMatrix.concat();var e=C.util.degreesToRadians(t.angle),n=C.util.cos(e),i=C.util.sin(e);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,n=void 0===t.scaleY?1:t.scaleY,i=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],r=C.util.multiplyTransformMatrices,o=C.util.degreesToRadians;return t.skewX&&(i=r(i,[1,0,Math.tan(o(t.skewX)),1],!0)),t.skewY&&(i=r(i,[1,Math.tan(o(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=C.util.multiplyTransformMatrices;return t.angle&&(e=n(e,C.util.calcRotateMatrix(t))),(t.scaleX||t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,C.util.calcDimensionsMatrix(t))),e},customTransformMatrix:function(t,e,n){return C.util.composeMatrix({scaleX:t,scaleY:e,skewX:n})},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,o=!0,s=t.getImageData(e,n,2*i||1,2*i||1),a=s.data.length;for(r=3;r<a&&!1!=(o=s.data[r]<=0);r+=4);return s=null,o},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i=t.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(e=n,n="meet"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?C.charWidthsCache[t]&&delete C.charWidthsCache[t]:C.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(t){return C.util.toFixed(t,C.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"}},function(){var t=Array.prototype.join;function e(e,r,o,s,a,l,c){var u=t.call(arguments);if(C.arcToSegmentsCache[u])return C.arcToSegmentsCache[u];var h=Math.PI,d=c*h/180,f=C.util.sin(d),p=C.util.cos(d),m=0,g=0,v=-p*e*.5-f*r*.5,y=-p*r*.5+f*e*.5,b=(o=Math.abs(o))*o,_=(s=Math.abs(s))*s,w=y*y,S=v*v,x=b*_-b*w-_*S,k=0;if(x<0){var T=Math.sqrt(1-x/(b*_));o*=T,s*=T}else k=(a===l?-1:1)*Math.sqrt(x/(b*w+_*S));var M=k*o*y/s,E=-k*s*v/o,A=p*M-f*E+.5*e,I=f*M+p*E+.5*r,$=i(1,0,(v-M)/o,(y-E)/s),D=i((v-M)/o,(y-E)/s,(-v-M)/o,(-y-E)/s);0===l&&D>0?D-=2*h:1===l&&D<0&&(D+=2*h);for(var L=Math.ceil(Math.abs(D/h*2)),P=[],O=D/L,N=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2),j=$+O,R=0;R<L;R++)P[R]=n($,j,p,f,o,s,A,I,N,m,g),m=P[R][4],g=P[R][5],$=j,j+=O;return C.arcToSegmentsCache[u]=P,P}function n(t,e,n,i,r,o,s,a,l,c,u){var h=C.util.cos(t),d=C.util.sin(t),f=C.util.cos(e),p=C.util.sin(e),m=n*r*f-i*o*p+s,g=i*r*f+n*o*p+a;return[c+l*(-n*r*d-i*o*h),u+l*(-i*r*d+n*o*h),m+l*(n*r*p+i*o*f),g+l*(i*r*p-n*o*f),m,g]}function i(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return o>=r?o-r:2*Math.PI-(r-o)}function r(e,n,i,r,o,s,a,l){var c;if(C.cachesBoundsOfCurve&&(c=t.call(arguments),C.boundsOfCurveCache[c]))return C.boundsOfCurveCache[c];var u,h,d,f,p,m,g,v,y=Math.sqrt,b=Math.min,_=Math.max,w=Math.abs,S=[],x=[[],[]];h=6*e-12*i+6*o,u=-3*e+9*i-9*o+3*a,d=3*i-3*e;for(var k=0;k<2;++k)if(k>0&&(h=6*n-12*r+6*s,u=-3*n+9*r-9*s+3*l,d=3*r-3*n),w(u)<1e-12){if(w(h)<1e-12)continue;0<(f=-d/h)&&f<1&&S.push(f)}else(g=h*h-4*d*u)<0||(0<(p=(-h+(v=y(g)))/(2*u))&&p<1&&S.push(p),0<(m=(-h-v)/(2*u))&&m<1&&S.push(m));for(var T,M,E,A=S.length,I=A;A--;)T=(E=1-(f=S[A]))*E*E*e+3*E*E*f*i+3*E*f*f*o+f*f*f*a,x[0][A]=T,M=E*E*E*n+3*E*E*f*r+3*E*f*f*s+f*f*f*l,x[1][A]=M;x[0][I]=e,x[1][I]=n,x[0][I+1]=a,x[1][I+1]=l;var $=[{x:b.apply(null,x[0]),y:b.apply(null,x[1])},{x:_.apply(null,x[0]),y:_.apply(null,x[1])}];return C.cachesBoundsOfCurve&&(C.boundsOfCurveCache[c]=$),$}C.util.drawArc=function(t,n,i,r){for(var o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],u=[[],[],[],[]],h=e(r[5]-n,r[6]-i,o,s,l,c,a),d=0,f=h.length;d<f;d++)u[d][0]=h[d][0]+n,u[d][1]=h[d][1]+i,u[d][2]=h[d][2]+n,u[d][3]=h[d][3]+i,u[d][4]=h[d][4]+n,u[d][5]=h[d][5]+i,t.bezierCurveTo.apply(t,u[d])},C.util.getBoundsOfArc=function(t,n,i,o,s,a,l,c,u){for(var h,d=0,f=0,p=[],m=e(c-t,u-n,i,o,a,l,s),g=0,v=m.length;g<v;g++)h=r(d,f,m[g][0],m[g][1],m[g][2],m[g][3],m[g][4],m[g][5]),p.push({x:h[0].x+t,y:h[0].y+n}),p.push({x:h[1].x+t,y:h[1].y+n}),d=m[g][4],f=m[g][5];return p},C.util.getBoundsOfCurve=r}(),function(){var t=Array.prototype.slice;function e(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}C.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(e,n){for(var i=t.call(arguments,2),r=[],o=0,s=e.length;o<s;o++)r[o]=i.length?e[o][n].apply(e[o],i):e[o][n].call(e[o]);return r},min:function(t,n){return e(t,n,function(t,e){return t<e})},max:function(t,n){return e(t,n,function(t,e){return t>=e})}}}(),function(){function t(e,n,i){if(i)if(!C.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var r=0,o=n.length;r<o;r++)e[r]=t({},n[r],i)}else if(n&&"object"==typeof n)for(var s in n)"canvas"===s?e[s]=t({},n[s]):n.hasOwnProperty(s)&&(e[s]=t({},n[s],i));else e=n;else for(var s in n)e[s]=n[s];return e}C.util.object={extend:t,clone:function(e,n){return t({},e,n)}},C.util.object.extend(C.util,C.Observable)}(),function(){function t(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}C.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var n,i=0,r=[];for(i=0;i<e.length;i++)!1!==(n=t(e,i))&&r.push(n);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),i=function(t,e,i){for(var r in e)r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function r(){}function o(e){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}C.util.createClass=function(){var n=null,s=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(n=s.shift()),a.superclass=n,a.subclasses=[],n&&(r.prototype=n.prototype,a.prototype=new r,n.subclasses.push(a));for(var l=0,c=s.length;l<c;l++)i(a,s[l],n);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=o,a}}(),c=!!C.document.createElement("div").attachEvent,C.util.addListener=function(t,e,n,i){t&&t.addEventListener(e,n,!c&&i)},C.util.removeListener=function(t,e,n,i){t&&t.removeEventListener(e,n,!c&&i)},C.util.getPointer=function(t){var e=t.target,n=C.util.getScrollLeftTop(e),i=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:i.clientX+n.left,y:i.clientY+n.top}},u=C.document.createElement("div"),h="string"==typeof u.style.opacity,d="string"==typeof u.style.filter,f=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,p=function(t){return t},h?p=function(t,e){return t.style.opacity=e,t}:d&&(p=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),f.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(f,e)):n.filter+=" alpha(opacity="+100*e+")",t}),C.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?p(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)"opacity"===i?p(t,e[i]):n["float"===i||"cssFloat"===i?void 0===n.styleFloat?"cssFloat":"styleFloat":i]=e[i];return t},function(){var t=Array.prototype.slice;var e,n,i,r,o=function(e){return t.call(e,0)};try{e=o(C.document.childNodes)instanceof Array}catch(t){}function s(t,e){var n=C.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function a(t){for(var e=0,n=0,i=C.document.documentElement,r=C.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===C.document?(e=r.scrollLeft||i.scrollLeft||0,n=r.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:n}}e||(o=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),n=C.document.defaultView&&C.document.defaultView.getComputedStyle?function(t,e){var n=C.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},i=C.document.documentElement.style,r="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",C.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=C.util.falseFunction),r?t.style[r]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},C.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),r?t.style[r]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},C.util.getScript=function(t,e){var n=C.document.getElementsByTagName("head")[0],i=C.document.createElement("script"),r=!0;i.onload=i.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||C.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,n.appendChild(i)},C.util.getById=function(t){return"string"==typeof t?C.document.getElementById(t):t},C.util.toArray=o,C.util.makeElement=s,C.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},C.util.wrapElement=function(t,e,n){return"string"==typeof e&&(e=s(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},C.util.getScrollLeftTop=a,C.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,o={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return s;for(var c in l)s[l[c]]+=parseInt(n(t,c),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=a(t),{left:o.left+i.left-(e.clientLeft||0)+s.left,top:o.top+i.top-(e.clientTop||0)+s.top}},C.util.getElementStyle=n,C.util.getNodeCanvas=function(t){var e=C.jsdomImplForWrapper(t);return e._canvas||e._image},C.util.cleanUpJsdomNode=function(t){if(C.isLikelyNode){var e=C.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}C.util.request=function(e,n){n||(n={});var i=n.method?n.method.toUpperCase():"GET",r=n.onComplete||function(){},o=new C.window.XMLHttpRequest,s=n.body||n.parameters;return o.onreadystatechange=function(){4===o.readyState&&(r(o),o.onreadystatechange=t)},"GET"===i&&(s=null,"string"==typeof n.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,n.parameters))),o.open(i,e,!0),"POST"!==i&&"PUT"!==i||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o}}(),C.log=function(){},C.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(C[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return!1}function e(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}var n=C.window.requestAnimationFrame||C.window.webkitRequestAnimationFrame||C.window.mozRequestAnimationFrame||C.window.oRequestAnimationFrame||C.window.msRequestAnimationFrame||function(t){return C.window.setTimeout(t,1e3/60)},i=C.window.cancelAnimationFrame||C.window.clearTimeout;function r(){return n.apply(C.window,arguments)}C.util.animate=function(n){r(function(i){n||(n={});var o,s=i||+new Date,a=n.duration||500,l=s+a,c=n.onChange||t,u=n.abort||t,h=n.onComplete||t,d=n.easing||e,f="startValue"in n?n.startValue:0,p="endValue"in n?n.endValue:100,m=n.byValue||p-f;n.onStart&&n.onStart(),function t(e){var n=(o=e||+new Date)>l?a:o-s,i=n/a,g=d(n,f,m,a),v=Math.abs((g-f)/m);if(!u())return o>l?(c(p,1,1),void h(p,1,1)):(c(g,v,i),void r(t));h(p,1,1)}(s)})},C.util.requestAnimFrame=r,C.util.cancelAnimFrame=function(){return i.apply(C.window,arguments)}}(),C.util.animateColor=function(t,e,n,i){var r=new C.Color(t).getSource(),o=new C.Color(e).getSource();i=i||{},C.util.animate(C.util.object.extend(i,{duration:n||500,startValue:r,endValue:o,byValue:o,easing:function(t,e,n,r){var o,s,a,l,c=i.colorEasing?i.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2));return o=e,s=n,a=c,l="rgba("+parseInt(o[0]+a*(s[0]-o[0]),10)+","+parseInt(o[1]+a*(s[1]-o[1]),10)+","+parseInt(o[2]+a*(s[2]-o[2]),10),l+=","+(o&&s?parseFloat(o[3]+a*(s[3]-o[3])):1),l+=")"}}))},function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}C.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,o){var s=0;return 0===n?i:1===(n/=o)?i+r:(s||(s=.3*o),-e(t(r,r,s,1.70158),n,o)+i)},easeOutElastic:function(e,n,i,r){var o=0;if(0===e)return n;if(1===(e/=r))return n+i;o||(o=.3*r);var s=t(i,i,o,1.70158);return s.a*Math.pow(2,-10*e)*Math.sin((e*r-s.s)*(2*Math.PI)/s.p)+s.c+n},easeInOutElastic:function(n,i,r,o){var s=0;if(0===n)return i;if(2===(n/=o/2))return i+r;s||(s=o*(.3*1.5));var a=t(r,r,s,1.70158);return n<1?-.5*e(a,n,o)+i:a.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-a.s)*(2*Math.PI)/a.p)*.5+a.c+i},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,o){return t<o/2?.5*n(2*t,0,r,o)+e:.5*i(2*t-o,0,r,o)+.5*r+e}}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.parseUnit,s=e.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},l={stroke:"strokeOpacity",fill:"fillOpacity"};function c(t){return t in a?a[t]:t}function u(t,n,i,r){var a,l="[object Array]"===Object.prototype.toString.call(n);if("fill"!==t&&"stroke"!==t||"none"!==n)if("vector-effect"===t)n="non-scaling-stroke"===n;else if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=i&&i.transformMatrix?s(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),i&&void 0!==i.opacity&&(n*=i.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)a=o(n,r)/r*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";c>-1&&u>-1&&u<c?n="stroke":-1===c&&u>-1&&(n="stroke")}else{if("href"===t||"xlink:href"===t)return n;a=l?n.map(o):o(n,r)}else n="";return!l&&isNaN(a)?n:a}function h(t){return new RegExp("^("+t.join("|")+")\\b","i")}function d(t,e){var n,i,r,o,s=[];for(r=0,o=e.length;r<o;r++)n=e[r],i=t.getElementsByTagName(n),s=s.concat(Array.prototype.slice.call(i));return s}function f(t,e){var n,i=!0;return(n=p(t,e.pop()))&&e.length&&(i=function(t,e){var n,i=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),t=t.parentNode,i=p(t,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function p(t,e){var n,i,r=t.nodeName,o=t.getAttribute("class"),s=t.getAttribute("id");if(n=new RegExp("^"+r,"i"),e=e.replace(n,""),s&&e.length&&(n=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),o&&e.length)for(i=(o=o.split(" ")).length;i--;)n=new RegExp("\\."+o[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function m(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o,s=t.getElementsByTagName("*");for(r=0,o=s.length;r<o;r++)if(e===(i=s[r]).getAttribute("id"))return i}e.svgValidTagNamesRegEx=h(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=h(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=h(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=h(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}var n=e.iMatrix,i=e.reNum,r="(?:\\s+,?\\s*|,\\s*)",o="(?:"+("(?:(matrix)\\s*\\(\\s*("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+")"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\))")+")",s=new RegExp("^\\s*(?:"+("(?:"+o+"(?:"+r+"*"+o+")*)")+"?)\\s*$"),a=new RegExp(o,"g");return function(i){var r=n.concat(),l=[];if(!i||i&&!s.test(i))return r;i.replace(a,function(i){var s=new RegExp(o).exec(i).filter(function(t){return!!t}),a=s[1],c=s.slice(2).map(parseFloat);switch(a){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),o=0,s=0;3===n.length&&(o=n[1],s=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=o-(i*o-r*s),t[5]=s-(r*o+i*s)}(r,c);break;case"scale":!function(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}(r,c);break;case"skewX":t(r,c,2);break;case"skewY":t(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=n.concat()});for(var c=l[0];l.length>1;)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var g=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function v(t){var n,i,r,s,a,l,c=t.getAttribute("viewBox"),u=1,h=1,d=t.getAttribute("width"),f=t.getAttribute("height"),p=t.getAttribute("x")||0,m=t.getAttribute("y")||0,v=t.getAttribute("preserveAspectRatio")||"",y=!c||!e.svgViewBoxElementsRegEx.test(t.nodeName)||!(c=c.match(g)),b=!d||!f||"100%"===d||"100%"===f,_=y&&b,w={},S="",x=0,C=0;if(w.width=0,w.height=0,w.toBeParsed=_,_)return w;if(y)return w.width=o(d),w.height=o(f),w;if(n=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),s=parseFloat(c[4]),w.minX=n,w.minY=i,w.viewBoxWidth=r,w.viewBoxHeight=s,b?(w.width=r,w.height=s):(w.width=o(d),w.height=o(f),u=w.width/r,h=w.height/s),"none"!==(v=e.util.parsePreserveAspectRatioAttribute(v)).alignX&&("meet"===v.meetOrSlice&&(h=u=u>h?h:u),"slice"===v.meetOrSlice&&(h=u=u>h?u:h),x=w.width-r*u,C=w.height-s*u,"Mid"===v.alignX&&(x/=2),"Mid"===v.alignY&&(C/=2),"Min"===v.alignX&&(x=0),"Min"===v.alignY&&(C=0)),1===u&&1===h&&0===n&&0===i&&0===p&&0===m)return w;if((p||m)&&(S=" translate("+o(p)+" "+o(m)+") "),a=S+" matrix("+u+" 0 0 "+h+" "+(n*u+x)+" "+(i*h+C)+") ",w.viewboxTransform=e.parseTransformAttribute(a),"svg"===t.nodeName){for(l=t.ownerDocument.createElement("g");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else a=(l=t).getAttribute("transform")+a;return l.setAttribute("transform",a),w}function y(t,e){var n=m(t,e.getAttribute("xlink:href").substr(1));if(n&&n.getAttribute("xlink:href")&&y(t,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(t){n&&!e.hasAttribute(t)&&n.hasAttribute(t)&&e.setAttribute(t,n.getAttribute(t))}),!e.children.length)for(var i=n.cloneNode(!0);i.firstChild;)e.appendChild(i.firstChild);e.removeAttribute("xlink:href")}e.parseSVGDocument=function(t,n,r,o){if(t){!function(t){for(var e=d(t,["use","svg:use"]),n=0;e.length&&n<e.length;){var i,r,o,s,a=e[n],l=(a.getAttribute("xlink:href")||a.getAttribute("href")).substr(1),c=a.getAttribute("x")||0,u=a.getAttribute("y")||0,h=m(t,l).cloneNode(!0),f=(h.getAttribute("transform")||"")+" translate("+c+", "+u+")",p=e.length;if(v(h),/^svg$/i.test(h.nodeName)){var g=h.ownerDocument.createElement("g");for(r=0,s=(o=h.attributes).length;r<s;r++)i=o.item(r),g.setAttribute(i.nodeName,i.nodeValue);for(;h.firstChild;)g.appendChild(h.firstChild);h=g}for(r=0,s=(o=a.attributes).length;r<s;r++)"x"!==(i=o.item(r)).nodeName&&"y"!==i.nodeName&&"xlink:href"!==i.nodeName&&"href"!==i.nodeName&&("transform"===i.nodeName?f=i.nodeValue+" "+f:h.setAttribute(i.nodeName,i.nodeValue));h.setAttribute("transform",f),h.setAttribute("instantiated_by_use","1"),h.removeAttribute("id"),a.parentNode.replaceChild(h,a),e.length===p&&n++}}(t);var s,a,l=e.Object.__uid++,c=v(t),u=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===u.length&&e.isLikelyNode){var h=[];for(s=0,a=(u=t.selectNodes('//*[name(.)!="svg"]')).length;s<a;s++)h[s]=u[s];u=h}var f=u.filter(function(t){return v(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)});if(!f||f&&!f.length)n&&n([],{});else{var p={};u.filter(function(t){return"clipPath"===t.nodeName.replace("svg:","")}).forEach(function(t){var n=t.getAttribute("id");p[n]=e.util.toArray(t.getElementsByTagName("*")).filter(function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))})}),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=p,e.parseElements(f,function(t,i){n&&(n(t,c,i,u),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])},i(c),r,o)}}};var b=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(b);if(n){var i=n[1],r=n[3],s=n[4],a=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=o(s)),l&&(e.fontFamily=l),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,n=d(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,r={};for(i=n.length;i--;)(e=n[i]).getAttribute("xlink:href")&&y(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,i,s){if(t){var a,h,d,p={};void 0===s&&(s=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(p=e.parseAttributes(t.parentNode,i,s));var m=i.reduce(function(e,n){return(a=t.getAttribute(n))&&(e[n]=a),e},{});m=n(m,n(function(t,n){var i={};for(var r in e.cssRules[n])if(f(t,r.split(" ")))for(var o in e.cssRules[n][r])i[o]=e.cssRules[n][r][o];return i}(t,s),e.parseStyleAttribute(t))),h=d=p.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,m["font-size"]&&(m["font-size"]=h=o(m["font-size"],d));var g,v,y={};for(var b in m)v=u(g=c(b),m[b],p,h),y[g]=v;y&&y.font&&e.parseFontDeclaration(y.font,y);var _=n(p,y);return e.svgValidParentsRegEx.test(t.nodeName)?_:function(t){for(var n in l)if(void 0!==t[l[n]]&&""!==t[n]){if(void 0===t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[l[n]],2)).toRgba()}}return t}(_)}},parseElements:function(t,n,i,r,o){new e.ElementsParser(t,n,i,r,o).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"==typeof n?function(t,e){var n,i;t.replace(/;\s*$/,"").split(";").forEach(function(t){var r=t.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i})}(n,e):function(t,e){var n,i;for(var r in t)void 0!==t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r=t.getElementsByTagName("style"),o={};for(n=0,i=r.length;n<i;n++){var s=r[n].textContent||r[n].text;""!==(s=s.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&s.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),s={},a=r[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(n=0,i=a.length;n<i;n++){var l=a[n].split(/\s*:\s*/),c=l[0],u=l[1];s[c]=u}(t=r[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]?e.util.object.extend(o[t],s):o[t]=e.util.object.clone(s))})})}return o},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:function(t){var o=t.responseXML;o&&!o.documentElement&&e.window.ActiveXObject&&t.responseText&&((o=new ActiveXObject("Microsoft.XMLDOM")).async="false",o.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));if(!o||!o.documentElement)return n&&n(null),!1;e.parseSVGDocument(o.documentElement,function(t,e,i,r){n&&n(t,e,i,r)},i,r)}})},loadSVGFromString:function(t,n,i,r){var o;if(t=t.trim(),void 0!==e.window.DOMParser){var s=new e.window.DOMParser;s&&s.parseFromString&&(o=s.parseFromString(t,"text/xml"))}else e.window.ActiveXObject&&((o=new ActiveXObject("Microsoft.XMLDOM")).async="false",o.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));e.parseSVGDocument(o.documentElement,function(t,e,i,r){n(t,e,i,r)},i,r)}})}(e),C.ElementsParser=function(t,e,n,i,r){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g},(m=C.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},m.createObjects=function(){var t=this;this.elements.forEach(function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)})},m.findTag=function(t){return C[C.util.string.capitalize(t.tagName.replace("svg:",""))]},m.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(t){C.log(t)}else this.checkIfDone()},m.createCallback=function(t,e){var n=this;return function(i){var r;n.resolveGradient(i,e,"fill"),n.resolveGradient(i,e,"stroke"),i instanceof C.Image&&i._originalElement&&(r=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(r),n.resolveClipPath(i),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},m.extractPropertyDefinition=function(t,e,n){var i=t[e];if(/^url\(/.test(i)){var r=this.regexUrl.exec(i)[1];return this.regexUrl.lastIndex=0,C[n][this.svgUid][r]}},m.resolveGradient=function(t,e,n){var i=this.extractPropertyDefinition(t,n,"gradientDefs");if(i){var r=e.getAttribute(n+"-opacity"),o=C.Gradient.fromElement(i,t,r,this.options);t.set(n,o)}},m.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},m.resolveClipPath=function(t){var e,n,i,r,o=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(o){i=[],n=C.util.invertTransform(t.calcTransformMatrix());for(var s=0;s<o.length;s++)e=o[s],this.findTag(e).fromElement(e,this.createClipPathCallback(t,i),this.options);o=1===i.length?i[0]:new C.Group(i),r=C.util.multiplyTransformMatrices(n,o.calcTransformMatrix());var a=C.util.qrDecompose(r);o.flipX=!1,o.flipY=!1,o.set("scaleX",a.scaleX),o.set("scaleY",a.scaleY),o.angle=a.angle,o.skewX=a.skewX,o.skewY=0,o.setPositionByOrigin({x:a.translateX,y:a.translateY},"center","center"),t.clipPath=o}},m.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))},function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(i.x-t.x)-(o.x-r.x)*(i.y-t.y);if(0!==c){var u=a/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(s=new n("Intersection")).appendPoint(new e.Point(t.x+u*(i.x-t.x),t.y+u*(i.y-t.y))):s=new n}else s=new n(0===a||0===l?"Coincident":"Parallel");return s},e.Intersection.intersectLinePolygon=function(t,e,i){var r,o,s,a,l=new n,c=i.length;for(a=0;a<c;a++)r=i[a],o=i[(a+1)%c],s=n.intersectLineLine(t,e,r,o),l.appendPoints(s.points);return l.points.length>0&&(l.status="Intersection"),l},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,o=t.length;for(i=0;i<o;i++){var s=t[i],a=t[(i+1)%o],l=n.intersectLinePolygon(s,a,e);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var o=i.min(r),s=i.max(r),a=new e.Point(s.x,o.y),l=new e.Point(o.x,s.y),c=n.intersectLinePolygon(o,a,t),u=n.intersectLinePolygon(a,s,t),h=n.intersectLinePolygon(s,l,t),d=n.intersectLinePolygon(l,o,t),f=new n;return f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(h.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){t/=255,n/=255,i/=255;var r,o,s,a=e.util.array.max([t,n,i]),l=e.util.array.min([t,n,i]);if(s=(a+l)/2,a===l)r=o=0;else{var c=a-l;switch(o=s>.5?c/(2-a-l):c/(a+l),a){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?"0"+t:t,e=1===(e=i[1].toString(16)).length?"0"+e:e,n=1===(n=i[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),o=this.getSource(),s=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*o[e]+.5*s[e]));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,o,s,a=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)r=o=s=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;r=i(h,u,a+1/3),o=i(h,u,a),s=i(h,u,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,o=i?e.charAt(0)+e.charAt(0):e.substring(0,2),s=i?e.charAt(1)+e.charAt(1):e.substring(2,4),a=i?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(s,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(){function t(t,e){var n,i,r,o,s=t.getAttribute("style"),a=t.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a>1?1:a,s){var l=s.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),o=l.length;o--;){var c=l[o].split(/\s*:\s*/),u=c[0].trim(),h=c[1].trim();"stop-color"===u?n=h:"stop-opacity"===u&&(r=h)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),i=(n=new C.Color(n)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i*e,{offset:a,color:n.toRgb(),opacity:r}}var e=C.util.object.clone;function n(t,e,n,i){var r,o;Object.keys(e).forEach(function(t){"Infinity"===(r=e[t])?o=1:"-Infinity"===r?o=0:(o=parseFloat(e[t],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===i&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(o*=n.viewBoxHeight||n.height)))),e[t]=o})}C.Gradient=C.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach(function(e){n[e]=t[e]}),this.id?this.id+="_"+C.Object.__uid++:this.id=C.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new C.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return C.util.populateWithProperties(this,e,t),e},toSVG:function(t,n){var i,r,o,s,a=e(this.coords,!0),l=(n=n||{},e(this.colorStops,!0)),c=a.r1>a.r2,u=this.gradientTransform?this.gradientTransform.concat():C.iMatrix.concat(),h=-this.offsetX,d=-this.offsetY,f=!!n.additionalTransform,p="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort(function(t,e){return t.offset-e.offset}),"objectBoundingBox"===p?(h/=t.width,d/=t.height):(h+=t.width/2,d+=t.height/2),"path"===t.type&&(h-=t.pathOffset.x,d-=t.pathOffset.y),u[4]-=h,u[5]-=d,s='id="SVGID_'+this.id+'" gradientUnits="'+p+'"',s+=' gradientTransform="'+(f?n.additionalTransform+" ":"")+C.util.matrixToSVG(u)+'" ',"linear"===this.type?o=["<linearGradient ",s,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",s,' cx="',c?a.x1:a.x2,'" cy="',c?a.y1:a.y2,'" r="',c?a.r1:a.r2,'" fx="',c?a.x2:a.x1,'" fy="',c?a.y2:a.y1,'">\n']),"radial"===this.type){if(c)for((l=l.concat()).reverse(),i=0,r=l.length;i<r;i++)l[i].offset=1-l[i].offset;var m=Math.min(a.r1,a.r2);if(m>0){var g=m/Math.max(a.r1,a.r2);for(i=0,r=l.length;i<r;i++)l[i].offset+=g*(1-l[i].offset)}}for(i=0,r=l.length;i<r;i++){var v=l[i];o.push("<stop ",'offset="',100*v.offset+"%",'" style="stop-color:',v.color,void 0!==v.opacity?";stop-opacity: "+v.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(t){var e,n,i,r=C.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),n=0,i=this.colorStops.length;n<i;n++){var o=this.colorStops[n].color,s=this.colorStops[n].opacity,a=this.colorStops[n].offset;void 0!==s&&(o=new C.Color(o).setAlpha(s).toRgba()),e.addColorStop(a,o)}return e}}}),C.util.object.extend(C.Gradient,{fromElement:function(e,i,r,o){var s=parseFloat(r)/(/%$/.test(r)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var a,l,c,u,h=e.getElementsByTagName("stop"),d="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",f=e.getAttribute("gradientTransform")||"",p=[],m=0,g=0;for("linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(a="linear",l=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e)):(a="radial",l=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),c=h.length;c--;)p.push(t(h[c],s));return u=C.parseTransformAttribute(f),n(i,l,o,d),"pixels"===d&&(m=-i.left,g=-i.top),new C.Gradient({id:e.getAttribute("id"),type:a,coords:l,colorStops:p,gradientUnits:d,gradientTransform:u,offsetX:m,offsetY:g})},forObject:function(t,e){return e||(e={}),n(t,e.coords,e.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100}),new C.Gradient(e)}})}(),function(){"use strict";var t=C.util.toFixed;C.Pattern=C.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=C.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else if(void 0!==C.util.getFunctionBody(t.source))this.source=new Function(C.util.getFunctionBody(t.source)),e&&e(this);else{var n=this;this.source=C.util.createImage(),C.util.loadImage(t.source,function(t){n.source=t,e&&e(n)},null,this.crossOrigin)}},toObject:function(e){var n,i,r=C.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?n=String(this.source):"string"==typeof this.source.src?n=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},C.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,o&&(i+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"==typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,r=40,o=e.Object.NUM_FRACTION_DIGITS,s=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(s.x)+this.blur)/t.width,o)+20,r=100*n((Math.abs(s.y)+this.blur)/t.height,o)+20),t.flipX&&(s.x*=-1),t.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(s.x,o)+'" dy="'+n(s.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==n[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(C.StaticCanvas)C.warn("fabric.StaticCanvas is already defined.");else{var t=C.util.object.extend,e=C.util.getElementOffset,n=C.util.removeFromArray,i=C.util.toFixed,r=C.util.transformPoint,o=C.util.invertTransform,s=C.util.getNodeCanvas,a=C.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");C.StaticCanvas=C.util.createClass(C.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:C.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==C.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?C.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*C.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*C.devicePixelRatio),this.contextContainer.scale(C.devicePixelRatio,C.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,n,i){return"string"==typeof e?C.util.loadImage(e,function(e){if(e){var r=new C.Image(e,i);this[t]=r,r.canvas=this}n&&n(e)},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=a();if(!t)throw l;if(t.style||(t.style={}),void 0===t.getContext)throw l;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=C.util.getById(t)||this._createCanvasElement(),C.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)(e=this._objects[n]).group||e.setCoords(!1,!0);return r&&"activeSelection"===r.type&&r.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=r(t,o(this.viewportTransform)),i[0]=e,i[3]=e;var s=r(t,i);return i[4]+=n.x-s.x,i[5]+=n.y-s.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new C.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new C.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=C.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=o(this.viewportTransform);return t.tl=r({x:0,y:0},i),t.br=r({x:e,y:n},i),t.tr=new C.Point(t.br.x,t.tl.y),t.bl=new C.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render",{ctx:t}),this.clipTo&&C.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],i=this[e+"Image"],r=this.viewportTransform,o=this[e+"Vpt"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,o&&t.transform(r[0],r[1],r[2],r[3],r[4]+(n.offsetX||0),r[5]+(n.offsetY||0));var s=n.gradientTransform||n.patternTransform;s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.fill(),t.restore()}i&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new C.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new C.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new C.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new C.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new C.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return r({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i=this.clipPath,r={version:C.version,objects:this._toObjects(e,n)};return i&&(r.clipPath=this._toObject(this.clipPath,e,n)),t(r,this.__serializeBgOverlay(e,n)),C.util.populateWithProperties(this,r,n),r},_toObjects:function(t,e){return this._objects.filter(function(t){return!t.excludeFromExport}).map(function(n){return this._toObject(n,t,e)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,r=e.width||this.width,o=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',a=C.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+i(-n[4]/n[0],a)+" "+i(-n[5]/n[3],a)+" "+i(this.width/n[0],a)+" "+i(this.height/n[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",C.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+C.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map(function(e){var n=t[e+"Color"];if(n&&n.toLive){var i=t[e+"Vpt"],r=t.viewportTransform,o={width:t.width/(i?r[0]:1),height:t.height/(i?r[3]:1)};return n.toSVG(o,{additionalTransform:i?C.util.matrixToSVG(r):""})}}).join("")},createSVGFontFacesMarkup:function(){var t,e,n,i,r,o,s,a,l="",c={},u=C.fontPaths,h=this._objects;for(s=0,a=h.length;s<a;s++)if(e=(t=h[s]).fontFamily,-1!==t.type.indexOf("text")&&!c[e]&&u[e]&&(c[e]=!0,t.styles))for(r in n=t.styles)for(o in i=n[r])!c[e=i[o].fontFamily]&&u[e]&&(c[e]=!0);for(var d in c)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",u[d],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(t,e){var n,i,r,o=this._objects;for(i=0,r=o.length;i<r;i++)(n=o[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],i=this.viewportTransform,r=this.width,o=this.height;if(n)if(n.toLive){var s=n.repeat,a=C.util.invertTransform(i),l=this[e+"Vpt"]?C.util.matrixToSVG(a):"";t.push('<rect transform="'+l+" translate(",r/2,",",o/2,')"',' x="',n.offsetX-r/2,'" y="',n.offsetY-o/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:r,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:o,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(e=(r=o._objects).length;e--;)i=r[e],n(this._objects,i),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=0;e<r.length;e++)i=r[e],n(this._objects,i),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,o,s,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(a=l._objects,i=0;i<a.length;i++)r=a[i],(o=this._objects.indexOf(r))>0+c&&(s=o-1,n(this._objects,r),this._objects.splice(s,0,r)),c++;else 0!==(o=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,o,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n)for(i=e,r=e-1;r>=0;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,o,s,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(i=(a=l._objects).length;i--;)r=a[i],(o=this._objects.indexOf(r))<this._objects.length-1-c&&(s=o+1,n(this._objects,r),this._objects.splice(s,0,r)),c++;else(o=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,o,e),n(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,o;if(n)for(i=e,r=e+1,o=this._objects.length;r<o;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,C.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(C.StaticCanvas.prototype,C.Observable),t(C.StaticCanvas.prototype,C.Collection),t(C.StaticCanvas.prototype,C.DataURLExporter),t(C.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=a();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"setLineDash":return void 0!==n.setLineDash;default:return null}}}),C.StaticCanvas.prototype.toJSON=C.StaticCanvas.prototype.toObject,C.isLikelyNode&&(C.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},C.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),C.BaseBrush=C.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(t){return this.shadow=new C.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,C.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},needsFullRender:function(){return new C.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),C.PencilBrush=C.util.createClass(C.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new C.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new C.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,n=this.canvas.contextTop,i=this._points[0],r=this._points[1];if(this._saveAndTransform(n),n.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y){var o=this.width/1e3;i=new C.Point(i.x,i.y),r=new C.Point(r.x,r.y),i.x-=o,r.x+=o}for(n.moveTo(i.x,i.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(n,i,r),i=this._points[t],r=this._points[t+1];n.lineTo(i.x,i.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(t){var e,n=[],i=this.width/1e3,r=new C.Point(t[0].x,t[0].y),o=new C.Point(t[1].x,t[1].y),s=t.length,a=1,l=0,c=s>2;for(c&&(a=t[2].x<o.x?-1:t[2].x===o.x?0:1,l=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push("M ",r.x-a*i," ",r.y-l*i," "),e=1;e<s;e++){if(!r.eq(o)){var u=r.midPointFrom(o);n.push("Q ",r.x," ",r.y," ",u.x," ",u.y," ")}r=t[e],e+1<t.length&&(o=t[e+1])}return c&&(a=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,l=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),n.push("L ",r.x+a*i," ",r.y+l*i),n},createPath:function(t){var e=new C.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i=this.canvas.getZoom(),r=Math.pow(e/i,2),o=t.length-1,s=t[0],a=[s];for(n=1;n<o;n++)Math.pow(s.x-t[n].x,2)+Math.pow(s.y-t[n].y,2)>=r&&(s=t[n],a.push(s));return 1===a.length&&a.push(new C.Point(a[0].x,a[0].y)),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(e),this.canvas.renderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}else this.canvas.requestRenderAll()}}),C.CircleBrush=C.util.createClass(C.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t)},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var r=this.points[t],o=new C.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&o.setShadow(this.shadow),i.push(o)}var s=new C.Group(i);s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new C.Point(t.x,t.y),n=C.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new C.Color(this.color).setAlpha(C.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),C.SprayBrush=C.util.createClass(C.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var r=this.sprayChunks[n],o=0,s=r.length;o<s;o++){var a=new C.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new C.Group(e);this.shadow&&l.setShadow(this.shadow),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)r[e=t[n].left+""+t[n].top]||(r[e]=t[n]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];void 0!==r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,r,o=this.width/2;for(r=0;r<this.density;r++){e=C.util.getRandomInt(t.x-o,t.x+o),n=C.util.getRandomInt(t.y-o,t.y+o),i=this.dotWidthVariance?C.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new C.Point(e,n);s.width=i,this.randomOpacity&&(s.opacity=C.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),C.PatternBrush=C.util.createClass(C.PencilBrush,{getPatternSrc:function(){var t=C.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new C.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=C.util.getPointer,e=C.util.degreesToRadians,n=C.util.radiansToDegrees,i=Math.atan2,r=Math.abs,o=C.StaticCanvas.supports("setLineDash");for(var s in C.Canvas=C.util.createClass(C.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=C.PencilBrush&&new C.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,o=this._objects.length;r<o;r++)t=this._objects[r],-1===i.indexOf(t)?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,n){var i,r=n||this.getPointer(t,!0);return i=e.group&&e.group===this._activeObject&&"activeSelection"===e.group.type?this._normalizePointer(e.group,r):{x:r.x,y:r.y},e.containsPoint(i)||e._findTargetCorner(r)},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=C.util.invertTransform(n),r=this.restorePointerVpt(e);return C.util.transformPoint(r,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),r=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+i.y*t.zoomY,0);return C.util.isTransparent(t._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var s=this.contextCache,a=t.selectionBackgroundColor,l=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),t.render(s),s.restore(),t===this._activeObject&&t._renderControls(s,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),t.selectionBackgroundColor=a,C.util.isTransparent(s,e,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t){if(t){var e,n=this._currentTransform;return"scale"===n.action||"scaleX"===n.action||"scaleY"===n.action?e=this.centeredScaling||t.centeredScaling:"rotate"===n.action&&(e=this.centeredRotation||t.centeredRotation),e?!n.altKey:n.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n){if(!e||!t)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return n[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return n[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,n,i){if(n){var r=this.getPointer(t),o=n._findTargetCorner(this.getPointer(t,!0)),s=this._getActionFromCorner(i,o,t,n),a=this._getOriginFromCorner(n,o);this._currentTransform={target:n,action:s,corner:o,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:r.x-n.left,offsetY:r.y-n.top,originX:a.x,originY:a.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey],original:C.util.saveObjectTransform(n)},this._currentTransform.original.originX=a.x,this._currentTransform.original.originY=a.y,this._resetCurrentTransform(),this._beforeTransform(t)}},_translateObject:function(t,e){var n=this._currentTransform,i=n.target,r=t-n.offsetX,o=e-n.offsetY,s=!i.get("lockMovementX")&&i.left!==r,a=!i.get("lockMovementY")&&i.top!==o;return s&&i.set("left",r),a&&i.set("top",o),s||a},_changeSkewTransformOrigin:function(t,e,n){var i="originX",r={0:"center"},o=e.target.skewX,s="left",a="right",l="mt"===e.corner||"ml"===e.corner?1:-1,c=1;t=t>0?1:-1,"y"===n&&(o=e.target.skewY,s="top",a="bottom",i="originY"),r[-1]=s,r[1]=a,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===o?(e.skewSign=-l*t*c,e[i]=r[-t]):(o=o>0?1:-1,e.skewSign=o,e[i]=r[o*l*c])},_skewObject:function(t,e,n){var i,r=this._currentTransform,o=r.target,s=o.get("lockSkewingX"),a=o.get("lockSkewingY");if(s&&"x"===n||a&&"y"===n)return!1;var l,c,u=o.getCenterPoint(),h=o.toLocalPoint(new C.Point(t,e),"center","center")[n],d=o.toLocalPoint(new C.Point(r.lastX,r.lastY),"center","center")[n],f=o._getTransformedDimensions();return this._changeSkewTransformOrigin(h-d,r,n),l=o.toLocalPoint(new C.Point(t,e),r.originX,r.originY)[n],c=o.translateToOriginPoint(u,r.originX,r.originY),i=this._setObjectSkew(l,r,n,f),r.lastX=t,r.lastY=e,o.setPositionByOrigin(c,r.originX,r.originY),i},_setObjectSkew:function(t,e,n,i){var r,o,s,a,l,c,u,h,d,f,p=e.target,m=e.skewSign;return"x"===n?(l="y",c="Y",u="X",d=0,f=p.skewY):(l="x",c="X",u="Y",d=p.skewX,f=0),a=p._getTransformedDimensions(d,f),(h=2*Math.abs(t)-a[n])<=2?r=0:(r=m*Math.atan(h/p["scale"+u]/(a[l]/p["scale"+c])),r=C.util.radiansToDegrees(r)),o=p["skew"+u]!==r,p.set("skew"+u,r),0!==p["skew"+c]&&(s=p._getTransformedDimensions(),r=i[l]/s[l]*p["scale"+c],p.set("scale"+c,r)),o},_scaleObject:function(t,e,n){var i=this._currentTransform,r=i.target,o=r.lockScalingX,s=r.lockScalingY,a=r.lockScalingFlip;if(o&&s)return!1;var l,c=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY),u=r.toLocalPoint(new C.Point(t,e),i.originX,i.originY),h=r._getTransformedDimensions();return this._setLocalMouse(u,i),l=this._setObjectScale(u,i,o,s,n,a,h),r.setPositionByOrigin(c,i.originX,i.originY),l},_setObjectScale:function(t,e,n,i,r,o,s){var a=e.target,l=!1,c=!1,u=!1,h=t.x*a.scaleX/s.x,d=t.y*a.scaleY/s.y,f=a.scaleX!==h,p=a.scaleY!==d;if(e.newScaleX=h,e.newScaleY=d,"x"===r&&a instanceof C.Textbox){var m=a.width*(t.x/s.x);return m>=a.getMinWidth()&&(u=m!==a.width,a.set("width",m),u)}return o&&h<=0&&h<a.scaleX&&(l=!0,t.x=0),o&&d<=0&&d<a.scaleY&&(c=!0,t.y=0),"equally"!==r||n||i?r?"x"!==r||a.get("lockUniScaling")?"y"!==r||a.get("lockUniScaling")||c||i||a.set("scaleY",d)&&(u=p):l||n||a.set("scaleX",h)&&(u=f):(l||n||a.set("scaleX",h)&&(u=u||f),c||i||a.set("scaleY",d)&&(u=u||p)):u=this._scaleObjectEqually(t,a,e,s),l||c||this._flipObject(e,r),u},_scaleObjectEqually:function(t,e,n,i){var r,o,s,a=t.y+t.x,l=i.y*n.original.scaleY/e.scaleY+i.x*n.original.scaleX/e.scaleX,c=t.x<0?-1:1,u=t.y<0?-1:1;return o=c*Math.abs(n.original.scaleX*a/l),s=u*Math.abs(n.original.scaleY*a/l),r=o!==e.scaleX||s!==e.scaleY,e.set("scaleX",o),e.set("scaleY",s),r},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var n=e.target,i=this.getZoom(),o=n.padding/i;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>o?t.x<0?t.x+=o:t.x-=o:t.x=0,r(t.y)>o?t.y<0?t.y+=o:t.y-=o:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform,o=r.target,s=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var a=i(r.ey-s.y,r.ex-s.x),l=i(e-s.y,t-s.x),c=n(l-a+r.theta),u=!0;if(o.snapAngle>0){var h=o.snapAngle,d=o.snapThreshold||h,f=Math.ceil(c/h)*h,p=Math.floor(c/h)*h;Math.abs(c-p)<d?c=p:Math.abs(c-f)<d&&(c=f)}return c<0&&(c=360+c),c%=360,o.angle===c?u=!1:(o.angle=c,o.setPositionByOrigin(s,r.originX,r.originY)),u},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=e.left,i=e.top,s=r(n),a=r(i);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(n>0?0:-n),e.ey-(i>0?0:-i),s,a)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var l=e.ex+.5-(n>0?0:s),c=e.ey+.5-(i>0?0:a);t.beginPath(),C.util.drawDashedLine(t,l,c,l+s,c,this.selectionDashArray),C.util.drawDashedLine(t,l,c+a-1,l+s,c+a-1,this.selectionDashArray),C.util.drawDashedLine(t,l,c,l,c+a,this.selectionDashArray),C.util.drawDashedLine(t,l+s-1,c,l+s-1,c+a,this.selectionDashArray),t.closePath(),t.stroke()}else C.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(n>0?0:s),e.ey+.5-(i>0?0:a),s,a)},findTarget:function(t,e){if(!this.skipTargetFind){var n,i,r=this.getPointer(t,!0),o=this._activeObject,s=this.getActiveObjects();if(this.targets=[],s.length>1&&!e&&o===this._searchPossibleTargets([o],r))return o;if(1===s.length&&o._findTargetCorner(r))return o;if(1===s.length&&o===this._searchPossibleTargets([o],r)){if(!this.preserveObjectStacking)return o;n=o,i=this.targets,this.targets=[]}var a=this._searchPossibleTargets(this._objects,r);return t[this.altSelectionKey]&&a&&n&&a!==n&&(a=n,this.targets=i),a}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,n.x,n.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,r=t.length;r--;){var o=t[r],s=o.group&&"activeSelection"!==o.group.type?this._normalizePointer(o.group,e):e;if(this._checkTarget(s,o,e)){(n=t[r]).subTargetCheck&&n instanceof C.Group&&(i=this._searchPossibleTargets(n._objects,e))&&this.targets.push(i);break}}return n},restorePointerVpt:function(t){return C.util.transformPoint(t,C.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),o=this.upperCanvasEl,s=o.getBoundingClientRect(),a=s.width||0,l=s.height||0;return a&&l||("top"in s&&"bottom"in s&&(l=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r)),i=0===a||0===l?{width:1,height:1}:{width:o.width/a,height:o.height/l},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),C.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=C.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),C.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),C.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;C.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,C.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],o=[],s={e:e};t.forEach(function(t){-1===i.indexOf(t)&&(n=!0,t.fire("deselected",s),o.push(t))}),i.forEach(function(e){-1===t.indexOf(e)&&(n=!0,e.fire("selected",s),r.push(e))}),t.length>0&&i.length>0?(s.selected=r,s.deselected=o,s.updated=r[0]||o[0],s.target=this._activeObject,n&&this.fire("selection:updated",s)):i.length>0?(1===i.length&&(s.target=r[0],this.fire("object:selected",s)),s.selected=r,s.target=this._activeObject,this.fire("selection:created",s)):t.length>0&&(s.deselected=o,this.fire("selection:cleared",s))},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){C.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,C.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(n){e[n]=t[n]}),this._activeObject.realizeTransform(t),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),C.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),C.StaticCanvas)"prototype"!==s&&(C.Canvas[s]=C.StaticCanvas[s])}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=C.util.addListener,n=C.util.removeListener,i={passive:!1};function r(t,e){return t.button&&t.button===e-1}C.util.object.extend(C.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var n=this.upperCanvasEl,r=this._getEventPrefix();t(C.window,"resize",this._onResize),t(n,r+"down",this._onMouseDown),t(n,r+"move",this._onMouseMove,i),t(n,r+"out",this._onMouseOut),t(n,r+"enter",this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,i),"undefined"!=typeof eventjs&&e in eventjs&&(eventjs[e](n,"gesture",this._onGesture),eventjs[e](n,"drag",this._onDrag),eventjs[e](n,"orientation",this._onOrientationChange),eventjs[e](n,"shake",this._onShake),eventjs[e](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(C.document,t+"up",this._onMouseUp),n(C.document,"touchend",this._onTouchEnd,i),n(C.document,t+"move",this._onMouseMove,i),n(C.document,"touchmove",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(C.document,"touchend",this._onTouchEnd,i),e(C.document,"touchmove",this._onMouseMove,i),n(r,o+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();n(r,o+"move",this._onMouseMove,i),e(C.document,o+"up",this._onMouseUp),e(C.document,o+"move",this._onMouseMove,i)},_onTouchEnd:function(t){if(!(t.touches.length>0)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();n(C.document,"touchend",this._onTouchEnd,i),n(C.document,"touchmove",this._onMouseMove,i);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){e(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(t)&&(n(C.document,o+"up",this._onMouseUp),n(C.document,o+"move",this._onMouseMove,i),e(r,o+"move",this._onMouseMove,i))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,n=this._currentTransform,i=this._groupSelector,o=!1,s=!i||0===i.left&&0===i.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),!r(t,3))return r(t,2)?(this.fireMiddleClick&&this._handleEvent(t,"up",2,s),void this._resetTransformEventData()):void(this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(n&&(this._finalizeCurrentTransform(t),o=n.actionPerformed),s||(this._maybeGroupObjects(t),o||(o=this._shouldRender(e))),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,s),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),o?this.requestRenderAll():s||this.renderTop()));this.fireRightClick&&this._handleEvent(t,"up",3,s)},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var o=0;o<i.length;o++)i[o].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,o=this.targets||[],s={e:t,target:r,subTargets:o,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+e,s),r&&r.fire("mouse"+e,s);for(var a=0;a<o.length;a++)o[a].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e,n=this._currentTransform,i=n.target,r={e:t,target:i,transform:n};i._scaling&&(i._scaling=!1),i.setCoords(),(n.actionPerformed||this.stateful&&i.hasStateChanged())&&(n.actionPerformed&&(e=this._addEventOptions(r,n),this._fire(e,r)),this._fire("modified",r))},_addEventOptions:function(t,e){var n,i;switch(e.action){case"scaleX":n="scaled",i="x";break;case"scaleY":n="scaled",i="y";break;case"skewX":n="skewed",i="x";break;case"skewY":n="skewed",i="y";break;case"scale":n="scaled",i="equally";break;case"rotate":n="rotated";break;case"drag":n="moved"}return t.by=i,n},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll(),this.clipTo&&C.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this.clipTo&&this.contextTop.restore();var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(r(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(r(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var i=this._shouldRender(e),o=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):o&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),e){var s=e===this._activeObject;e.selectable&&this.setActiveObject(e,t),e!==this._activeObject||!e.__corner&&o||this._setupCurrentTransform(t,e,s)}this._handleEvent(t,"down"),(i||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e}),e.corner&&this.onBeforeScaleRotate(e.target)},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(n=this._pointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){this.fireSyntheticInOutEvents(t,e,{targetName:"_hoveredTarget",canvasEvtOut:"mouse:out",evtOut:"mouseout",canvasEvtIn:"mouse:over",evtIn:"mouseover"})},_fireEnterLeaveEvents:function(t,e){this.fireSyntheticInOutEvents(t,e,{targetName:"_draggedoverTarget",evtOut:"dragleave",evtIn:"dragenter"})},fireSyntheticInOutEvents:function(t,e,n){var i,r,o,s=this[n.targetName],a=s!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;a&&(i={e:e,target:t,previousTarget:s},r={e:e,target:s,nextTarget:t},this[n.targetName]=t),o=t&&a,s&&a&&(c&&this.fire(c,r),s.fire(n.evtOut,r)),o&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.action,s=!1,a={target:e.target,e:t,transform:e,pointer:n};"rotate"===o?(s=this._rotateObject(i,r))&&this._fire("rotating",a):"scale"===o?(s=this._onScale(t,e,i,r))&&this._fire("scaling",a):"scaleX"===o?(s=this._scaleObject(i,r,"x"))&&this._fire("scaling",a):"scaleY"===o?(s=this._scaleObject(i,r,"y"))&&this._fire("scaling",a):"skewX"===o?(s=this._skewObject(i,r,"x"))&&this._fire("skewing",a):"skewY"===o?(s=this._skewObject(i,r,"y"))&&this._fire("skewing",a):(s=this._translateObject(i,r))&&(this._fire("moving",a),this.setCursor(a.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:function(t,e){this.fire("object:"+t,e),e.target.fire(t,e)},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var n=this._shouldCenterTransform(e.target);(n&&("center"!==e.originX||"center"!==e.originY)||!n&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,n,i){return this._isUniscalePossible(t,e.target)?(e.currentAction="scale",this._scaleObject(n,i)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(n,i,"equally"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get("lockUniScaling")},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):this.setCursor(n)},getCornerCursor:function(e,n,i){return this.actionIsDisabled(e,n,i)?this.notAllowedCursor:e in t?this._getRotatedCornerCursor(e,n,i):"mtr"===e&&n.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,n){return"mt"===t||"mb"===t?n[this.altActionKey]?e.lockSkewingX:e.lockScalingY:"ml"===t||"mr"===t?n[this.altActionKey]?e.lockSkewingY:e.lockScalingX:"mtr"===t?e.lockRotation:this._isUniscalePossible(n,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(e,n,i){var r=Math.round(n.angle%360/45);return r<0&&(r+=8),r+=t[e],i[this.altActionKey]&&t[e]%2==0&&(r+=2),r%=8,this.cursorMap[r]}})}(),g=Math.min,v=Math.max,C.util.object.extend(C.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0))&&e.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new C.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new C.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(t){for(var e,n=[],i=this._groupSelector.ex,r=this._groupSelector.ey,o=i+this._groupSelector.left,s=r+this._groupSelector.top,a=new C.Point(g(i,o),g(r,s)),l=new C.Point(v(i,o),v(r,s)),c=!this.selectionFullyContained,u=i===o&&r===s,h=this._objects.length;h--&&!((e=this._objects[h])&&e.selectable&&e.visible&&(c&&e.intersectsWithRect(a,l)||e.isContainedWithinRect(a,l)||c&&e.containsPoint(a)||c&&e.containsPoint(l))&&(n.push(e),u)););return n.length>1&&(n=n.filter(function(e){return!e.onSelect({e:t})})),n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}}),C.util.object.extend(C.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(i,t);return C.util.toDataURL(r,e,n)},toCanvasElement:function(t,e){t=t||1;var n=((e=e||{}).width||this.width)*t,i=(e.height||this.height)*t,r=this.getZoom(),o=this.width,s=this.height,a=r*t,l=this.viewportTransform,c=(l[4]-(e.left||0))*t,u=(l[5]-(e.top||0))*t,h=this.interactive,d=[a,0,0,a,c,u],f=this.enableRetinaScaling,p=C.util.createCanvasElement(),m=this.contextTop;return p.width=n,p.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(p.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=s,this.calcViewportBoundaries(),this.interactive=h,this.enableRetinaScaling=f,this.contextTop=m,p}}),C.util.object.extend(C.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i="string"==typeof t?JSON.parse(t):C.util.object.clone(t),r=this,o=i.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,function(t){r.clear(),r._setBgOverlay(i,function(){o?r._enlivenObjects([o],function(n){r.clipPath=n[0],r.__setupCanvas.call(r,i,t,s,e)}):r.__setupCanvas.call(r,i,t,s,e)})},n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach(function(t,e){r.insertAt(t,e)}),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,i){var r=this;if(!e)return n[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?C.util.enlivenObjects([e],function(e){r[t]=e[0],n[t]=!0,i&&i()}):this["set"+C.util.string.capitalize(t,!0)](e,function(){n[t]=!0,i&&i()})},_enlivenObjects:function(t,e,n){t&&0!==t.length?C.util.enlivenObjects(t,function(t){e&&e(t)},null,n):e&&e([])},_toDataURL:function(t,e){this.clone(function(n){e(n.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,n){this.clone(function(i){n(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(n,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=C.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new C.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.string.capitalize,s=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash"),l=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,o=e.maxCacheSideLimit,s=e.minCacheSideLimit;if(i<=o&&r<=o&&i*r<=n)return i<s&&(t.width=s),r<s&&(t.height=s),t;var a=i/r,l=e.util.limitDimsByArea(a,n),c=e.util.capValue,u=c(s,l.x,o),h=c(s,l.y,o);return i>u&&(t.zoomX/=i/u,t.width=u,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,i=t._currentTransform.action;if(this===n&&i.slice&&"scale"===i.slice(0,5))return!1}var r,o,s=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),l=e.minCacheSideLimit,c=a.width,u=a.height,h=a.zoomX,d=a.zoomY,f=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==d,m=f||p,g=0,v=0,y=!1;if(f){var b=this._cacheCanvas.width,_=this._cacheCanvas.height,w=c>b||u>_;y=w||(c<.9*b||u<.9*_)&&b>l&&_>l,w&&!a.capped&&(c>l||u>l)&&(g=.1*c,v=.1*u)}return!!m&&(y?(s.width=Math.ceil(c+g),s.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),r=a.x/2,o=a.y/2,this.cacheTranslationX=Math.round(s.width/2-r)+r,this.cacheTranslationY=Math.round(s.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,d),this.zoomX=h,this.zoomY=d,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e;e=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype;return n.stateProperties.forEach(function(e){"left"!==e&&"top"!==e&&(t[e]===n[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])}),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var n=this.group.getObjectScaling();t*=n.scaleX,e*=n.scaleY}return{scaleX:t,scaleY:e}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i="scaleX"===t||"scaleY"===t,r=this[t]!==n,o=!1;return i&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var n=this.clipPath;if(t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):(this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this)),this._render(t),this._drawClipPath(t),this.fill=n,this.stroke=i},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e,n){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):n&&n(t),this.strokeUniform&&t.setLineDash(t.getLineDash().map(function(e){return e*t.lineWidth})))},_renderControls:function(t,n){var i,r,o,a=this.getViewportTransform(),l=this.calcTransformMatrix();r=void 0!==(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,o=void 0!==n.hasControls?n.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(a,l),i=e.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),n.forActiveSelection?(t.rotate(s(i.angle)),r&&this.drawBordersInGroup(t,i,n)):(t.rotate(s(this.angle)),r&&this.drawBorders(t,n)),o&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,s=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=e.devicePixelRatio,s*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(o+s)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*o*n.scaleX,t.shadowOffsetY=i.offsetY*s*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&"percentage"===this.stroke.gradientUnits?this._applyPatternForTransformedGradient(t,this.stroke):this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),a=r.x/this.scaleX/s,l=r.y/this.scaleY/s;o.width=a,o.height=l,(i=o.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(a,0),i.lineTo(a,l),i.lineTo(0,l),i.closePath(),i.translate(a/2,l/2),i.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.shadow,o=Math.abs,s=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var a,l,c=e.util.createCanvasElement(),u=this.getBoundingRect(!0,!0),h=this.shadow,d={x:0,y:0};h&&(l=h.blur,a=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),d.x=2*Math.round(o(h.offsetX)+l)*o(a.scaleX),d.y=2*Math.round(o(h.offsetY)+l)*o(a.scaleY)),c.width=u.width+d.x,c.height=u.height+d.y,c.width+=c.width%2?2-c.width%2:0,c.height+=c.height%2?2-c.height%2:0;var f=new e.StaticCanvas(c,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(f.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(f.width/2,f.height/2),"center","center");var p=this.canvas;f.add(this);var m=f.toCanvasElement(s||1,t);return this.shadow=r,this.canvas=p,this.set(i).setCoords(),f._objects=[],f.dispose(),f=null,m},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,n){n||(n={});var i={colorStops:[]};return i.type=n.type||(n.r1||n.r2?"radial":"linear"),i.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},i.gradientUnits=n.gradientUnits||"pixels",(n.r1||n.r2)&&(i.coords.r1=n.r1,i.coords.r2=n.r2),i.gradientTransform=n.gradientTransform,e.Gradient.prototype.addColorStop.call(i,n.colorStops),this.set(t,e.Gradient.forObject(this,i))},setPatternFill:function(t,n){return this.set("fill",new e.Pattern(t,n))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,s(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,n,r,o){var s=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],function(t){void 0!==t[0]&&(n.fill=t[0]),void 0!==t[1]&&(n.stroke=t[1]),e.util.enlivenObjects([n.clipPath],function(t){n.clipPath=t[0];var e=o?new s(n[o],n):new s(n);r&&r(e)})})},e.Object.__uid=0)}(e),y=C.util.degreesToRadians,b={left:-.5,center:0,right:.5},_={top:-.5,center:0,bottom:.5},C.util.object.extend(C.Object.prototype,{translateToGivenOrigin:function(t,e,n,i,r){var o,s,a,l=t.x,c=t.y;return"string"==typeof e?e=b[e]:e-=.5,"string"==typeof i?i=b[i]:i-=.5,"string"==typeof n?n=_[n]:n-=.5,"string"==typeof r?r=_[r]:r-=.5,s=r-n,((o=i-e)||s)&&(a=this._getTransformedDimensions(),l=t.x+o*a.x,c=t.y+s*a.y),new C.Point(l,c)},translateToCenterPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,e,n,"center","center");return this.angle?C.util.rotatePoint(i,t,y(this.angle)):i},translateToOriginPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,"center","center",e,n);return this.angle?C.util.rotatePoint(i,t,y(this.angle)):i},getCenterPoint:function(){var t=new C.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(t,e,n){var i,r,o=this.getCenterPoint();return i=void 0!==e&&void 0!==n?this.translateToGivenOrigin(o,"center","center",e,n):new C.Point(this.left,this.top),r=new C.Point(t.x,t.y),this.angle&&(r=C.util.rotatePoint(r,o,-y(this.angle))),r.subtractEquals(i)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e,n,i=y(this.angle),r=this.getScaledWidth(),o=C.util.cos(i)*r,s=C.util.sin(i)*r;e="string"==typeof this.originX?b[this.originX]:this.originX-.5,n="string"==typeof t?b[t]:t-.5,this.left+=o*(n-e),this.top+=s*(n-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var t=C.util.degreesToRadians,e=C.util.multiplyTransformMatrices,n=C.util.transformPoint;C.util.object.extend(C.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(t,e){this.oCoords||this.setCoords();var n=t?this.aCoords:this.oCoords;return function(t){return[new C.Point(t.tl.x,t.tl.y),new C.Point(t.tr.x,t.tr.y),new C.Point(t.br.x,t.br.y),new C.Point(t.bl.x,t.bl.y)]}(e?this.calcCoords(t):n)},intersectsWithRect:function(t,e,n,i){var r=this.getCoords(n,i);return"Intersection"===C.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,n){return"Intersection"===C.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=0,o=t._getImageLines(n?t.calcCoords(e):e?t.aCoords:t.oCoords);r<4;r++)if(!t.containsPoint(i[r],o))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){e=e||this._getImageLines(i?this.calcCoords(n):n?this.aCoords:this.oCoords);var r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,n=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,r=this.getCoords(!0,t),o=0;o<4;o++)if((e=r[o]).x<=i.x&&e.x>=n.x&&e.y<=i.y&&e.y>=n.y)return!0;return!!this.intersectsWithRect(n,i,!0,t)||this._containsCenterOfCanvas(n,i,t)},_containsCenterOfCanvas:function(t,e,n){var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o=0;for(var s in e)if(!((r=e[s]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(r.o.x===r.d.x&&r.o.x>=t.x?i=r.o.x:(0,n=(r.d.y-r.o.y)/(r.d.x-r.o.x),i=-(t.y-0*t.x-(r.o.y-n*r.o.x))/(0-n)),i>=t.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,e){var n=this.getCoords(t,e);return C.util.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcCoords:function(i){var r=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),s=e(o,r),a=this.getViewportTransform(),l=i?s:e(a,s),c=this._getTransformedDimensions(),u=c.x/2,h=c.y/2,d=n({x:-u,y:-h},l),f=n({x:u,y:-h},l),p=n({x:-u,y:h},l),m=n({x:u,y:h},l);if(!i){var g=this.padding,v=t(this.angle),y=C.util.cos(v),b=C.util.sin(v),_=y*g,w=b*g,S=_+w,x=_-w;g&&(d.x-=x,d.y-=S,f.x+=S,f.y-=x,p.x-=S,p.y+=x,m.x+=x,m.y+=S);var k=new C.Point((d.x+p.x)/2,(d.y+p.y)/2),T=new C.Point((f.x+d.x)/2,(f.y+d.y)/2),M=new C.Point((m.x+f.x)/2,(m.y+f.y)/2),E=new C.Point((m.x+p.x)/2,(m.y+p.y)/2),A=new C.Point(T.x+b*this.rotatingPointOffset,T.y-y*this.rotatingPointOffset)}var I={tl:d,tr:f,br:m,bl:p};return i||(I.ml=k,I.mt=T,I.mr=M,I.mb=E,I.mtr=A),I},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){return C.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="";return!t&&this.group&&(e=this.group.transformMatrixKey(t)+"_"),e+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.originX+"_"+this.originY+"_"+this.width+"_"+this.height+"_"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){if(t)return this.calcOwnMatrix();var n=this.transformMatrixKey(),i=this.matrixCache||(this.matrixCache={});if(i.key===n)return i.value;var r=this.calcOwnMatrix();return this.group&&(r=e(this.group.calcTransformMatrix(),r)),i.key=n,i.value=r,r},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var n=this._calcTranslateMatrix();return this.translateX=n[4],this.translateY=n[5],e.key=t,e.value=C.util.composeMatrix(this),e.value},_calcDimensionsTransformMatrix:function(t,e,n){return C.util.calcDimensionsMatrix({skewX:t,skewY:e,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var n,i,r=this._getNonTransformedDimensions(),o=0===t&&0===e;if(this.strokeUniform?(n=this.width,i=this.height):(n=r.x,i=r.y),o)return this._finalizeDimensions(n*this.scaleX,i*this.scaleY);var s=[{x:-(n/=2),y:-(i/=2)},{x:n,y:-i},{x:-n,y:i},{x:n,y:i}],a=C.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY}),l=C.util.makeBoundingBoxFromPoints(s,a);return this._finalizeDimensions(l.width,l.height)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return C.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),C.util.object.extend(C.Object.prototype,{sendToBack:function(){return this.group?C.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?C.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?C.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?C.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?C.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new C.Color(e),i=t+": "+n.toRgb()+"; ",r=n.getAlpha();return 1!==r&&(i+=t+"-opacity: "+r.toString()+"; "),i}return t+": none; "}var e=C.util.toFixed;C.util.object.extend(C.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",n,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(e,n){var i=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+"; ":"",r=e.strokeWidth?"stroke-width: "+e.strokeWidth+"; ":"",o=(i=i,e.fontSize?"font-size: "+e.fontSize+"px; ":""),s=e.fontStyle?"font-style: "+e.fontStyle+"; ":"",a=e.fontWeight?"font-weight: "+e.fontWeight+"; ":"",l=e.fill?t("fill",e.fill):"",c=e.stroke?t("stroke",e.stroke):"",u=this.getSvgTextDecoration(e);return u&&(u="text-decoration: "+u+"; "),[c,r,i,o,s,a,u,l,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return"overline"in t||"underline"in t||"linethrough"in t?(t.overline?"overline ":"")+(t.underline?"underline ":"")+(t.linethrough?"line-through ":""):""},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+C.util.matrixToSVG(n)+(e||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+C.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(t){if(this.backgroundColor){var n=C.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var n=(e=e||{}).reviver,i=e.additionalTransform||"",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=r,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var n,i,r=(e=e||{}).noStyle,o=e.reviver,s=r?"":'style="'+this.getSvgStyles()+'" ',a=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,p=[],m=t.indexOf("COMMON_PARTS"),g=e.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+C.Object.__uid++,i='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(o)+"</clipPath>\n"),u&&p.push("<g ",a,this.getSvgCommons()," >\n"),p.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons()," >\n"),n=[s,c,r?"":this.addPaintOrder()," ",g?'transform="'+g+'" ':""].join(""),t[m]=n,d&&d.toLive&&p.push(d.toSVG(this)),h&&h.toLive&&p.push(h.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(i),p.push(t.join("")),p.push("</g>\n"),u&&p.push("</g>\n"),o?o(p.join("")):p.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=C.util.object.extend;function e(e,n,i){var r={};i.forEach(function(t){r[t]=e[t]}),t(e[n],r,!0)}C.util.object.extend(C.Object.prototype,{hasStateChanged:function(t){var e="_"+(t=t||"stateProperties");return Object.keys(this[e]).length<this[t].length||!function t(e,n,i){if(e===n)return!0;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!t(e[r],n[r]))return!1;return!0}if(e&&"object"==typeof e){var s,a=Object.keys(e);if(!n||"object"!=typeof n||!i&&a.length!==Object.keys(n).length)return!1;for(r=0,o=a.length;r<o;r++)if("canvas"!==(s=a[r])&&!t(e[s],n[s]))return!1;return!0}}(this[e],this,!0)},saveState:function(t){var n=t&&t.propertySet||"stateProperties",i="_"+n;return this[i]?(e(this,i,this[n]),t&&t.stateProperties&&e(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||"stateProperties";return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var t=C.util.degreesToRadians;C.util.object.extend(C.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var e,n,i=t.x,r=t.y;for(var o in this.__corner=0,this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:i,y:r},n))&&e%2==1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,n,i=this.oCoords,r=t(45-this.angle),o=.707106*this.cornerSize,s=o*C.util.cos(r),a=o*C.util.sin(r);for(var l in i)e=i[l].x,n=i[l].y,i[l].corner={tl:{x:e-a,y:n-s},tr:{x:e+s,y:n-a},bl:{x:e-s,y:n+a},br:{x:e+a,y:n+s}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,r=n.x+i,o=n.y+i,s=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,a=void 0!==e.hasControls?e.hasControls:this.hasControls,l=void 0!==e.rotatingPointOffset?e.rotatingPointOffset:this.rotatingPointOffset;if(t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-r/2,-o/2,r,o),s&&this.isControlVisible("mtr")&&a){var c=-o/2;t.beginPath(),t.moveTo(0,c),t.lineTo(0,c-l),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i=this._getNonTransformedDimensions(),r=C.util.composeMatrix({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX}),o=C.util.transformPoint(i,r),s=1/this.borderScaleFactor,a=o.x+s,l=o.y+s;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray,null),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-a/2,-l/2,a,l),t.restore(),this},drawControls:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=n.x,r=n.y,o=e.cornerSize||this.cornerSize,s=-(i+o)/2,a=-(r+o)/2,l=void 0!==e.transparentCorners?e.transparentCorners:this.transparentCorners,c=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,u=l?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",t,u,s,a,e),this._drawControl("tr",t,u,s+i,a,e),this._drawControl("bl",t,u,s,a+r,e),this._drawControl("br",t,u,s+i,a+r,e),this.get("lockUniScaling")||(this._drawControl("mt",t,u,s+i/2,a,e),this._drawControl("mb",t,u,s+i/2,a+r,e),this._drawControl("mr",t,u,s+i,a+r/2,e),this._drawControl("ml",t,u,s,a+r/2,e)),c&&this._drawControl("mtr",t,u,s+i/2,a-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,n,i,r,o){if(o=o||{},this.isControlVisible(t)){var s=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(o.cornerStyle||this.cornerStyle){case"circle":e.beginPath(),e.arc(i+s/2,r+s/2,s/2,0,2*Math.PI,!1),e[n](),a&&e.stroke();break;default:this.transparentCorners||e.clearRect(i,r,s,s),e[n+"Rect"](i,r,s,s),a&&e.strokeRect(i,r,s,s)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),C.util.object.extend(C.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return C.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),o.requestRenderAll(),r()},onComplete:function(){o.remove(t),i()}}),this}}),C.util.object.extend(C.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,n=[];for(t in arguments[0])n.push(t);for(var i=0,r=n.length;i<r;i++)t=n[i],e=i!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var r,o=this;e=e.toString(),n=n?C.util.object.clone(n):{},~t.indexOf(".")&&(r=t.split("."));var s=r?this.get(r[0])[r[1]]:this.get(t);"from"in n||(n.from=s),e=~e.indexOf("=")?s+parseFloat(e.replace("=","")):parseFloat(e),C.util.animate({startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(e,s,a){r?o[r[0]][r[1]]=e:o.set(t,e),i||n.onChange&&n.onChange(e,s,a)},onComplete:function(t,e,r){i||(o.setCoords(),n.onComplete&&n.onComplete(t,e,r))}})}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1},o=e.StaticCanvas.supports("setLineDash");function s(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(n)){case s:return Math.min(this.get(i),this.get(r));case a:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var n=this.calcLinePoints();t.beginPath(),e.util.drawDashedLine(t,n.x1,n.y1,n.x2,n.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5;return{x1:n,x2:t*this.width*-.5,y1:i,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,i,r){r=r||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),s=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];i(new e.Line(s,n(o,r)))},e.Line.fromObject=function(t,n){var r=i(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,function(t){delete t.points,n&&n(t)},"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.PI;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,i=(this.endAngle-this.startAngle)%(2*n);if(0===i)t=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=e.util.cos(this.startAngle)*this.radius,o=e.util.sin(this.startAngle)*this.radius,s=e.util.cos(this.endAngle)*this.radius,a=e.util.sin(this.endAngle)*this.radius,l=i>n?"1":"0";t=['<path d="M '+r+" "+o," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+s+" "+a,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var i,r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=r)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){return e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=this.width/2,i=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-n,i,0,-i,this.strokeDashArray),e.util.drawDashedLine(t,0,-i,n,i,this.strokeDashArray),e.util.drawDashedLine(t,n,i,-n,i,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){return e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,o=-this.width/2,s=-this.height/2,a=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(o+e,s),t.lineTo(o+i-e,s),a&&t.bezierCurveTo(o+i-l*e,s,o+i,s+l*n,o+i,s+n),t.lineTo(o+i,s+r-n),a&&t.bezierCurveTo(o+i,s+r-l*n,o+i-l*e,s+r,o+i-e,s+r),t.lineTo(o+e,s+r),a&&t.bezierCurveTo(o+l*e,s+r,o,s+r-l*n,o,s+r-n),t.lineTo(o,s+n),a&&t.bezierCurveTo(o,s+l*n,o+l*e,s,o+e,s),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=-this.width/2,i=-this.height/2,r=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,n,i,n+r,i,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i,n+r,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i+o,n,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n,i+o,n,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var s=new e.Rect(n(r?e.util.object.clone(r):{},o));s.visible=s.visible&&s.width>0&&s.height>0,i(s)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t);this.width=n.width,this.height=n.height,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?n.left:e.x),void 0===t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=i(t,"x")||0,n=i(t,"y")||0;return{left:e,top:n,width:(r(t,"x")||0)-e,height:(r(t,"y")||0)-n}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,s=0,a=this.points.length;s<a;s++)t.push(o(this.points[s].x-n,r),",",o(this.points[s].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var o=0;o<n;o++)e=this.points[o],t.lineTo(e.x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n,i;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)n=this.points[r],i=this.points[r+1]||n,e.util.drawDashedLine(t,n.x,n.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,o){if(!i)return r(null);o||(o={});var s=e.parsePointsAttribute(i.getAttribute("points")),a=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new e[t](s,n(a,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){return e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,s=e.util.drawArc,a=e.util.toFixed,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,n){n=n||{},this.callSuper("initialize",n),t||(t=[]);var i="[object Array]"===o.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),e.Polyline.prototype._setPositionDimensions.call(this,n))},_renderPathCommands:function(t){var e,n,i,r=null,o=0,a=0,l=0,c=0,u=0,h=0,d=-this.pathOffset.x,f=-this.pathOffset.y;t.beginPath();for(var p=0,m=this.path.length;p<m;++p){switch((e=this.path[p])[0]){case"l":l+=e[1],c+=e[2],t.lineTo(l+d,c+f);break;case"L":l=e[1],c=e[2],t.lineTo(l+d,c+f);break;case"h":l+=e[1],t.lineTo(l+d,c+f);break;case"H":l=e[1],t.lineTo(l+d,c+f);break;case"v":c+=e[1],t.lineTo(l+d,c+f);break;case"V":c=e[1],t.lineTo(l+d,c+f);break;case"m":o=l+=e[1],a=c+=e[2],t.moveTo(l+d,c+f);break;case"M":o=l=e[1],a=c=e[2],t.moveTo(l+d,c+f);break;case"c":n=l+e[5],i=c+e[6],u=l+e[3],h=c+e[4],t.bezierCurveTo(l+e[1]+d,c+e[2]+f,u+d,h+f,n+d,i+f),l=n,c=i;break;case"C":l=e[5],c=e[6],u=e[3],h=e[4],t.bezierCurveTo(e[1]+d,e[2]+f,u+d,h+f,l+d,c+f);break;case"s":n=l+e[3],i=c+e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,l+e[1]+d,c+e[2]+f,n+d,i+f),u=l+e[1],h=c+e[2],l=n,c=i;break;case"S":n=e[3],i=e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"q":n=l+e[3],i=c+e[4],u=l+e[1],h=c+e[2],t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"Q":n=e[3],i=e[4],t.quadraticCurveTo(e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"t":n=l+e[1],i=c+e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"T":n=e[1],i=e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"a":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+l+d,e[7]+c+f]),l+=e[6],c+=e[7];break;case"A":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+f]),l=e[6],c=e[7];break;case"z":case"Z":l=o,c=a,t.closePath()}r=e}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',this.path.map(function(t){return t.join(" ")}).join(" "),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,t)+", "+a(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,n,i,r,o=[],s=[],a=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u=0,h=this.path.length;u<h;u++){for(i=(t=this.path[u]).slice(1).trim(),s.length=0;n=a.exec(i);)s.push(n[0]);r=[t.charAt(0)];for(var d=0,f=s.length;d<f;d++)e=parseFloat(s[d]),isNaN(e)||r.push(e);var p=r[0],m=l[p.toLowerCase()],g=c[p]||p;if(r.length-1>m)for(var v=1,y=r.length;v<y;v+=m)o.push([p].concat(r.slice(v,v+m))),p=g;else o.push(r)}return o},_calcDimensions:function(){for(var t,r,o,s,a=[],l=[],c=null,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=this.path.length;g<v;++g){switch((t=this.path[g])[0]){case"l":d+=t[1],f+=t[2],s=[];break;case"L":d=t[1],f=t[2],s=[];break;case"h":d+=t[1],s=[];break;case"H":d=t[1],s=[];break;case"v":f+=t[1],s=[];break;case"V":f=t[1],s=[];break;case"m":u=d+=t[1],h=f+=t[2],s=[];break;case"M":u=d=t[1],h=f=t[2],s=[];break;case"c":r=d+t[5],o=f+t[6],p=d+t[3],m=f+t[4],s=e.util.getBoundsOfCurve(d,f,d+t[1],f+t[2],p,m,r,o),d=r,f=o;break;case"C":p=t[3],m=t[4],s=e.util.getBoundsOfCurve(d,f,t[1],t[2],p,m,t[5],t[6]),d=t[5],f=t[6];break;case"s":r=d+t[3],o=f+t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,d+t[1],f+t[2],r,o),p=d+t[1],m=f+t[2],d=r,f=o;break;case"S":r=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,t[1],t[2],r,o),d=r,f=o,p=t[1],m=t[2];break;case"q":r=d+t[3],o=f+t[4],p=d+t[1],m=f+t[2],s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"Q":p=t[1],m=t[2],s=e.util.getBoundsOfCurve(d,f,p,m,p,m,t[3],t[4]),d=t[3],f=t[4];break;case"t":r=d+t[1],o=f+t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"T":r=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"a":s=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+f),d+=t[6],f+=t[7];break;case"A":s=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d=t[6],f=t[7];break;case"z":case"Z":d=u,f=h}c=t,s.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(d),l.push(f)}var y=n(a)||0,b=n(l)||0;return{left:y,top:b,width:(i(a)||0)-y,height:(i(l)||0)-b}}}),e.Path.fromObject=function(t,n){if("string"==typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,function(e){var i=e[0];i.setOptions(t),n&&n(i)})}else e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,n(new e.Path(o.d,r(o,i)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0,!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,i=t.top;t.set({left:n-e.x,top:i-e.y}),t.group=this,t.setCoords(!0,!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,n);if("canvas"===t)for(;i--;)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r}),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map(function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i})}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=n,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(this.shadow)return e.Object.prototype.willDrawShadow.call(this);for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var n=t.calcTransformMatrix(),i=e.util.qrDecompose(n),r=new e.Point(i.translateX,i.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(r,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),delete t.group,this},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,n.add(t)}),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e,n,i,r=[],o=[],s=["tr","br","bl","tl"],a=0,l=this._objects.length,c=s.length;a<l;++a)for((e=this._objects[a]).setCoords(!0),i=0;i<c;i++)n=s[i],r.push(e.oCoords[n].x),o.push(e.oCoords[n].y);this._getBounds(r,o,t)},_getBounds:function(t,r,o){var s=new e.Point(n(t),n(r)),a=new e.Point(i(t),i(r)),l=s.y||0,c=s.x||0,u=a.x-s.x||0,h=a.y-s.y||0;this.width=u,this.height=h,o||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){e.util.enlivenObjects(t.objects,function(i){e.util.enlivenObjects([t.clipPath],function(r){var o=e.util.object.clone(t,!0);o.clipPath=r[0],delete o.objects,n&&n(new e.Group(i,o,!0))})})})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach(function(t){t.canvas.remove(t),t.group=i}),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(n=n||{}).hasControls&&(n.hasControls=!1),void 0===n.hasRotatingPoint&&(n.hasRotatingPoint=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))})})}(e),function(t){"use strict";var e=C.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?C.warn("fabric.Image is already defined."):(C.Image=C.util.createClass(C.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:C.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+C.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=C.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){C.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),C.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),C.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),C.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),C.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var n=[];this.filters.forEach(function(t){t&&n.push(t.toObject())});var i=e(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(t)),{src:this.getSrc(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=-this.width/2,r=-this.height/2,o="";if(this.hasCrop()){var s=C.Object.__uid++;e.push('<clipPath id="imageCrop_'+s+'">\n','\t<rect x="'+i+'" y="'+r+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),o=' clip-path="url(#imageCrop_'+s+')" '}if(n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',r-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',o,"></image>\n"),this.stroke||this.strokeDashArray){var a=this.fill;this.fill=null,t=["\t<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=a}return e="fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return C.util.loadImage(t,function(t){this.setElement(t,n),this._setWidthHeight(),e&&e(this)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,r=n.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=r);C.filterBackend||(C.filterBackend=C.initFilterBackend());var s=C.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=o.width,c=o.height;s.width=l,s.height=c,this._element=s,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=r,C.filterBackend.applyFilters([t],o,l,c,this._element,a),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var r=C.util.createCanvasElement();r.width=n,r.height=i,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return C.filterBackend||(C.filterBackend=C.initFilterBackend()),C.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element,n=this.width,i=this.height,r=Math.min(e.naturalWidth||e.width,n*this._filterScalingX),o=Math.min(e.naturalHeight||e.height,i*this._filterScalingY),s=-n/2,a=-i/2,l=Math.max(0,this.cropX*this._filterScalingX),c=Math.max(0,this.cropY*this._filterScalingY);e&&t.drawImage(e,l,c,r,o,s,a,n,i)},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(C.util.getById(t),e),C.util.addClass(this.getElement(),C.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?C.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=C.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,r=1,o=1,s=0,a=0,l=0,c=0,u=this.width,h=this.height,d={width:u,height:h};return!e||"none"===e.alignX&&"none"===e.alignY?(r=u/n,o=h/i):("meet"===e.meetOrSlice&&(t=(u-n*(r=o=C.util.findScaleToFit(this._element,d)))/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(h-i*o)/2,"Min"===e.alignY&&(a=-t),"Max"===e.alignY&&(a=t)),"slice"===e.meetOrSlice&&(t=n-u/(r=o=C.util.findScaleToCover(this._element,d)),"Mid"===e.alignX&&(l=t/2),"Max"===e.alignX&&(l=t),t=i-h/o,"Mid"===e.alignY&&(c=t/2),"Max"===e.alignY&&(c=t),n=u/r,i=h/o)),{width:n,height:i,scaleX:r,scaleY:o,offsetLeft:s,offsetTop:a,cropX:l,cropY:c}}}),C.Image.CSS_CANVAS="canvas-img",C.Image.prototype.getSvgSrc=C.Image.prototype.getSrc,C.Image.fromObject=function(t,e){var n=C.util.object.clone(t);C.util.loadImage(n.src,function(t,i){i?e&&e(null,i):C.Image.prototype._initFilters.call(n,n.filters,function(i){n.filters=i||[],C.Image.prototype._initFilters.call(n,[n.resizeFilter],function(i){n.resizeFilter=i[0],C.util.enlivenObjects([n.clipPath],function(i){n.clipPath=i[0];var r=new C.Image(t,n);e(r)})})})},null,n.crossOrigin)},C.Image.fromURL=function(t,e,n){C.util.loadImage(t,function(t){e&&e(new C.Image(t,n))},null,n&&n.crossOrigin)},C.Image.ATTRIBUTE_NAMES=C.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),C.Image.fromElement=function(t,n,i){var r=C.parseAttributes(t,C.Image.ATTRIBUTE_NAMES);C.Image.fromURL(r["xlink:href"],n,e(i?C.util.object.clone(i):{},r))})}(e),C.util.object.extend(C.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,r=this;return C.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.rotate(t),i()},onComplete:function(){r.setCoords(),n()}}),this}}),C.util.object.extend(C.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}C.isWebglSupported=function(e){if(C.isLikelyNode)return!1;e=e||C.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),r=!1;if(i){C.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=C.maxTextureSize>=e;for(var o=["highp","mediump","lowp"],s=0;s<3;s++)if(t(i,o[s])){C.webGlPrecision=o[s];break}}return this.isSupported=r,r},C.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i=void 0!==window.performance;try{new ImageData(1,1),n=!0}catch(t){n=!1}var r="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof Uint8ClampedArray;if(i&&n&&r&&o){var s=C.util.createCanvasElement(),a=new ArrayBuffer(t*e*4);if(C.forceGLPutImageData)return this.imageBuffer=a,void(this.copyGLTo2D=M);var l,c,u={imageBuffer:a,destinationWidth:t,destinationHeight:e,targetCanvas:s};s.width=t,s.height=e,l=window.performance.now(),T.call(u,this.gl,u),c=window.performance.now()-l,l=window.performance.now(),M.call(u,this.gl,u),c>window.performance.now()-l?(this.imageBuffer=a,this.copyGLTo2D=M):this.copyGLTo2D=T}},createWebGLCanvas:function(t,e){var n=C.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=n.getContext("webgl",i);r||(r=n.getContext("experimental-webgl",i)),r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)},applyFilters:function(t,e,n,i,r,o){var s,a=this.gl;o&&(s=this.getCachedTexture(o,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,n,i,!s&&e),targetTexture:this.createTexture(a,n,i),originalTexture:s||this.createTexture(a,n,i,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),t.forEach(function(t){t&&t.applyTo(l)}),function(t){var e=t.targetCanvas,n=e.width,i=e.height,r=t.destinationWidth,o=t.destinationHeight;n===r&&i===o||(e.width=r,e.height=o)}(l),this.copyGLTo2D(a,l),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(l.sourceTexture),a.deleteTexture(l.targetTexture),a.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:T,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}C.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var o=r.getContext("2d");o.drawImage(e,0,0,n,i);var s={sourceWidth:n,sourceHeight:i,imageData:o.getImageData(0,0,n,i),originalEl:e,originalImageData:o.getImageData(0,0,n,i),canvasEl:r,ctx:o,filterBackend:this};return t.forEach(function(t){t.applyTo(s)}),s.imageData.width===n&&s.imageData.height===i||(r.width=s.imageData.width,r.height=s.imageData.height),o.putImageData(s.imageData,0,0),s}}}(),C.Image=C.Image||{},C.Image.filters=C.Image.filters||{},C.Image.filters.BaseFilter=C.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==C.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+C.webGlPrecision+" float"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(i));var r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var o=t.createProgram();if(t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(o));var s=this.getAttributeLocations(t,o),a=this.getUniformLocations(t,o)||{};return a.uStepW=t.getUniformLocation(o,"uStepW"),a.uStepH=t.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:s,uniformLocations:a}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=C.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),C.Image.filters.BaseFilter.fromObject=function(t,e){var n=new C.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,o,s=t.imageData.data,a=s.length,l=this.matrix,c=this.colorsOnly;for(o=0;o<a;o+=4)e=s[o],n=s[o+1],i=s[o+2],c?(s[o]=e*l[0]+n*l[1]+i*l[2]+255*l[4],s[o+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],s[o+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(r=s[o+3],s[o]=e*l[0]+n*l[1]+i*l[2]+r*l[3]+255*l[4],s[o+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],s[o+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],s[o+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Brightness=i(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(e=0;e<i;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,o,s,a,l,c,u,h,d,f,p=t.imageData,m=p.data,g=this.matrix,v=Math.round(Math.sqrt(g.length)),y=Math.floor(v/2),b=p.width,_=p.height,w=t.ctx.createImageData(b,_),S=w.data,x=this.opaque?1:0;for(h=0;h<_;h++)for(u=0;u<b;u++){for(o=4*(h*b+u),e=0,n=0,i=0,r=0,f=0;f<v;f++)for(d=0;d<v;d++)s=u+d-y,(a=h+f-y)<0||a>_||s<0||s>b||(l=4*(a*b+s),c=g[f*v+d],e+=m[l]*c,n+=m[l+1]*c,i+=m[l+2]*c,x||(r+=m[l+3]*c));S[o]=e,S[o+1]=n,S[o+2]=i,S[o+3]=x?m[o+3]:r}t.imageData=w},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Grayscale=i(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,i=t.imageData.data,r=i.length,o=this.mode;for(e=0;e<r;e+=4)"average"===o?n=(i[e]+i[e+1]+i[e+2])/3:"lightness"===o?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:"luminosity"===o&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Invert=i(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i=t.imageData.data,r=i.length,o=this.noise;for(e=0,r=i.length;e<r;e+=4)n=(.5-Math.random())*o,i[e]+=n,i[e+1]+=n,i[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Pixelate=i(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,i,r,o,s,a,l,c,u,h,d=t.imageData,f=d.data,p=d.height,m=d.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<m;i+=this.blocksize)for(r=f[e=4*n*m+4*i],o=f[e+1],s=f[e+2],a=f[e+3],u=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,m),l=n;l<u;l++)for(c=i;c<h;c++)f[e=4*l*m+4*c]=r,f[e+1]=o,f[e+2]=s,f[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,o,s=t.imageData.data,a=255*this.distance,l=new e.Color(this.color).getSource(),c=[l[0]-a,l[1]-a,l[2]-a],u=[l[0]+a,l[1]+a,l[2]+a];for(n=0;n<s.length;n+=4)i=s[n],r=s[n+1],o=s[n+2],i>c[0]&&r>c[1]&&o>c[2]&&i<u[0]&&r<u[1]&&o<u[2]&&(s[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],s=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,o),t.uniform4fv(n.uHigh,s)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)n[o]=i(n.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var n=(true?e:undefined).fabric,i=n.Image.filters,r=n.util.createClass;i.BlendColor=r(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var e,i,r,o,s,a,l,c=t.imageData.data,u=c.length,h=1-this.alpha;e=(l=new n.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<u;d+=4)switch(o=c[d],s=c[d+1],a=c[d+2],this.mode){case"multiply":c[d]=o*e/255,c[d+1]=s*i/255,c[d+2]=a*r/255;break;case"screen":c[d]=255-(255-o)*(255-e)/255,c[d+1]=255-(255-s)*(255-i)/255,c[d+2]=255-(255-a)*(255-r)/255;break;case"add":c[d]=o+e,c[d+1]=s+i,c[d+2]=a+r;break;case"diff":case"difference":c[d]=Math.abs(o-e),c[d+1]=Math.abs(s-i),c[d+2]=Math.abs(a-r);break;case"subtract":c[d]=o-e,c[d+1]=s-i,c[d+2]=a-r;break;case"darken":c[d]=Math.min(o,e),c[d+1]=Math.min(s,i),c[d+2]=Math.min(a,r);break;case"lighten":c[d]=Math.max(o,e),c[d+1]=Math.max(s,i),c[d+2]=Math.max(a,r);break;case"overlay":c[d]=e<128?2*o*e/255:255-2*(255-o)*(255-e)/255,c[d+1]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c[d+2]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255;break;case"exclusion":c[d]=e+o-2*e*o/255,c[d+1]=i+s-2*i*s/255,c[d+2]=r+a-2*r*a/255;break;case"tint":c[d]=e+o*h,c[d+1]=i+s*h,c[d+2]=r+a*h}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(),function(t){"use strict";var n=(true?e:undefined).fabric,i=n.Image.filters,r=n.util.createClass;i.BlendImage=r(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var e,i,r,o,s,a,l,c,u,h,d,f=t.imageData,p=t.filterBackend.resources,m=f.data,g=m.length,v=f.width,y=f.height,b=this.image;p.blendImage||(p.blendImage=n.util.createCanvasElement()),h=(u=p.blendImage).getContext("2d"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),d=h.getImageData(0,0,v,y).data;for(var _=0;_<g;_+=4)switch(s=m[_],a=m[_+1],l=m[_+2],c=m[_+3],e=d[_],i=d[_+1],r=d[_+2],o=d[_+3],this.mode){case"multiply":m[_]=s*e/255,m[_+1]=a*i/255,m[_+2]=l*r/255,m[_+3]=c*o/255;break;case"mask":m[_+3]=o}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(t,e){n.Image.fromObject(t.image,function(i){var r=n.util.object.clone(t);r.image=i,e(new n.Image.filters.BlendImage(r))})}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.round,a=Math.sin,l=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach(function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"}),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var n=(e*=Math.PI)/t;return a(e)/e*a(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,o=e.width,a=e.height,l=s(o*n),c=s(a*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,o,a,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,o,a,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,o,a,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,o,a,l,c)),t.imageData=r},sliceByTwo:function(t,n,r,o,s){var a,l,c=t.imageData,u=!1,h=!1,d=.5*n,f=.5*r,p=e.filterBackend.resources,m=0,g=0,v=n,y=0;for(p.sliceByTwo||(p.sliceByTwo=document.createElement("canvas")),((a=p.sliceByTwo).width<1.5*n||a.height<r)&&(a.width=1.5*n,a.height=r),(l=a.getContext("2d")).clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),o=i(o),s=i(s);!u||!h;)n=d,r=f,o<i(.5*d)?d=i(.5*d):(d=o,u=!0),s<i(.5*f)?f=i(.5*f):(f=s,h=!0),l.drawImage(a,m,g,n,r,v,y,d,f),m=v,g=y,y+=f;return l.getImageData(m,g,o,s)},lanczosResize:function(t,e,s,a,c){var u=t.imageData.data,h=t.ctx.createImageData(a,c),d=h.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,m=this.rcpScaleY,g=2/this.rcpScaleX,v=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),b=l(m*this.lanczosLobes/2),_={},w={},S={};return function t(l){var x,C,k,T,M,E,A,I,$,D,L;for(w.x=(l+.5)*p,S.x=i(w.x),x=0;x<c;x++){for(w.y=(x+.5)*m,S.y=i(w.y),M=0,E=0,A=0,I=0,$=0,C=S.x-y;C<=S.x+y;C++)if(!(C<0||C>=e)){D=i(1e3*o(C-w.x)),_[D]||(_[D]={});for(var P=S.y-b;P<=S.y+b;P++)P<0||P>=s||(L=i(1e3*o(P-w.y)),_[D][L]||(_[D][L]=f(r(n(D*g,2)+n(L*v,2))/1e3)),(k=_[D][L])>0&&(M+=k,E+=k*u[T=4*(P*e+C)],A+=k*u[T+1],I+=k*u[T+2],$+=k*u[T+3]))}d[T=4*(x*a+l)]=E/M,d[T+1]=A/M,d[T+2]=I/M,d[T+3]=$/M}return++l<a?t(l):h}(0)},bilinearFiltering:function(t,e,n,r,o){var s,a,l,c,u,h,d,f,p,m=0,g=this.rcpScaleX,v=this.rcpScaleY,y=4*(e-1),b=t.imageData.data,_=t.ctx.createImageData(r,o),w=_.data;for(l=0;l<o;l++)for(c=0;c<r;c++)for(u=g*c-(s=i(g*c)),h=v*l-(a=i(v*l)),p=4*(a*e+s),d=0;d<4;d++)f=b[p+d]*(1-u)*(1-h)+b[p+4+d]*u*(1-h)+b[p+y+d]*h*(1-u)+b[p+y+4+d]*u*h,w[m++]=f;return _},hermiteFastResize:function(t,e,n,s,a){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),d=l(u/2),f=t.imageData.data,p=t.ctx.createImageData(s,a),m=p.data,g=0;g<a;g++)for(var v=0;v<s;v++){for(var y=4*(v+g*s),b=0,_=0,w=0,S=0,x=0,C=0,k=0,T=(g+.5)*u,M=i(g*u);M<(g+1)*u;M++)for(var E=o(T-(M+.5))/d,A=(v+.5)*c,I=E*E,$=i(v*c);$<(v+1)*c;$++){var D=o(A-($+.5))/h,L=r(I+D*D);L>1&&L<-1||(b=2*L*L*L-3*L*L+1)>0&&(k+=b*f[(D=4*($+M*e))+3],w+=b,f[D+3]<255&&(b=b*f[D+3]/250),S+=b*f[D],x+=b*f[D+1],C+=b*f[D+2],_+=b)}m[y]=S/_,m[y+1]=x/_,m[y+2]=C/_,m[y+3]=k/w}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Contrast=i(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData.data,i=n.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(e=0;e<i;e+=4)n[e]=o*(n[e]-128)+128,n[e+1]=o*(n[e+1]-128)+128,n[e+2]=o*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Saturation=i(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData.data,r=i.length,o=-this.saturation;for(e=0;e<r;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*o:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*o:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*o:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Blur=i(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,o=t.imageData.width,s=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===o&&n.height===s||(i.width=n.width=o,i.height=n.height=s);var a,l,c,u,h=n.getContext("2d"),d=i.getContext("2d"),f=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),d.clearRect(0,0,o,s),u=-15;u<=15;u++)c=f*(l=u/15)*o+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,c,a),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(u=-15;u<=15;u++)c=f*(l=u/15)*s+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,a,c),h.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var p=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),p},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Gamma=i(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData.data,i=this.gamma,r=n.length,o=1/i[0],s=1/i[1],a=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,o),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Composed=i(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),e.Image.filters.Composed.fromObject=function(t,n){var i=(t.subFilters||[]).map(function(t){return new e.Image.filters[t.type](t)}),r=new e.Image.filters.Composed({subFilters:i});return n&&n(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=Math.sqrt(1/3)*i,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=1/3*o-r,this.matrix[2]=1/3*o+r,this.matrix[5]=1/3*o+r,this.matrix[6]=n+1/3*o,this.matrix[7]=1/3*o-r,this.matrix[10]=1/3*o-r,this.matrix[11]=1/3*o+r,this.matrix[12]=n+1/3*o},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;e.Text?e.warn("fabric.Text is already defined"):(e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:e.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,i,r,o,s,a=0,l=this._textLines.length;a<l;a++)if(("justify"===this.textAlign||a!==l-1&&!this.isEndOfWrapping(a))&&(i=0,r=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){n=s.length,t=(this.width-e)/n;for(var c=0,u=r.length;c<=u;c++)o=this.__charBounds[a][c],this._reSpaceAndTab.test(r[c])?(o.width+=t,o.kernedWidth+=t,o.left+=i,i+=t):o.left+=i}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,o){this._renderChars(t,e,n,i,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,i,r,o,s,a=0,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,d=0,f=0,p=this._textLines.length;f<p;f++)if(e=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){i=this._textLines[f],n=this._getLineLeftOffset(f),d=0,h=0,r=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var m=0,g=i.length;m<g;m++)o=this.__charBounds[f][m],(s=this.getValueOfPropertyAt(f,m,"textBackgroundColor"))!==r?(t.fillStyle=r,r&&t.fillRect(c+n+h,u+a,d,e/this.lineHeight),h=o.left,d=o.width,r=s):d+=o.kernedWidth;s&&(t.fillStyle=s,t.fillRect(c+n+h,u+a,d,e/this.lineHeight)),a+=e}else a+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_applyCharStyles:function(t,e,n,i,r){this._setFillStyles(e,r),this._setStrokeStyles(e,r),e.font=this._getFontDeclaration(r)},_measureChar:function(t,e,n,i){var r,o,s,a,l=this.getFontCache(e),c=n+t,u=this._getFontDeclaration(e)===this._getFontDeclaration(i),h=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(s=l[n]),void 0!==l[t]&&(a=r=l[t]),u&&void 0!==l[c]&&(a=(o=l[c])-s),void 0===r||void 0===s||void 0===o){var d=this.getMeasuringContext();this._setTextStyles(d,e,!0)}return void 0===r&&(a=r=d.measureText(t).width,l[t]=r),void 0===s&&u&&n&&(s=d.measureText(n).width,l[n]=s),u&&void 0===o&&(o=d.measureText(c).width,l[c]=o,a=o-s),{width:r*h,kernedWidth:a*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,n,i,r,o=0,s=this._textLines[t],a=new Array(s.length);for(this.__charBounds[t]=a,e=0;e<s.length;e++)n=s[e],r=this._getGraphemeBox(n,t,e,i),a[e]=r,o+=r.kernedWidth,i=n;return a[e]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:o,numOfSpaces:0}},_getGraphemeBox:function(t,e,n,i,r){var o,s=this.getCompleteStyleDeclaration(e,n),a=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,s,i,a),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=o=this._getWidthOfCharSpacing(),c+=o);var h={width:u,left:0,height:s.fontSize,kernedWidth:c,deltaY:s.deltaY};if(n>0&&!r){var d=this.__charBounds[e][n-1];h.left=d.left+d.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),o=this._applyPatternGradientTransform(t,"fillText"===e?this.fill:this.stroke),s=0,a=this._textLines.length;s<a;s++){var l=this.getHeightOfLine(s),c=l/this.lineHeight,u=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],i+u-o.offsetX,r+n+c-o.offsetY,s),n+=l}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,n,i,r,o){var s,a,l,c,u=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf("justify"),d="",f=0,p=!h&&0===this.charSpacing&&this.isEmptyStyles(o);if(e.save(),r-=u*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,o,0,this.textLines[o],i,r,u),void e.restore();for(var m=0,g=n.length-1;m<=g;m++)c=m===g||this.charSpacing,d+=n[m],l=this.__charBounds[o][m],0===f?(i+=l.kernedWidth-l.width,f+=l.width):f+=l.kernedWidth,h&&!c&&this._reSpaceAndTab.test(n[m])&&(c=!0),c||(s=s||this.getCompleteStyleDeclaration(o,m),a=this.getCompleteStyleDeclaration(o,m+1),c=this._hasStyleChanged(s,a)),c&&(this._renderChar(t,e,o,m,d,i,r,u),d="",s=a,i+=f,f=0);e.restore()},_renderChar:function(t,e,n,i,r,o,s){var a=this._getStyleDeclaration(n,i),l=this.getCompleteStyleDeclaration(n,i),c="fillText"===t&&l.fill,u="strokeText"===t&&l.stroke&&l.strokeWidth;(u||c)&&(a&&e.save(),this._applyCharStyles(t,e,n,i,l),a&&a.textBackgroundColor&&this._removeShadow(e),a&&a.deltaY&&(s+=a.deltaY),c&&e.fillText(r,o,s),u&&e.strokeText(r,o,s),a&&e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),s={fontSize:r*n.size,deltaY:o+r*n.baseline};return this.setSelectionStyles(s,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:"justify-center"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return this.__lineWidths[t]?this.__lineWidths[t]:(e=""===this._textLines[t]?0:this.measureLine(t).width,this.__lineWidths[t]=e,e);var e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&void 0!==i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y=this._getLeftOffset(),b=this._getTopOffset(),_=this._getWidthOfCharSpacing(),w=0,S=this._textLines.length;w<S;w++)if(n=this.getHeightOfLine(w),this[e]||this.styleHas(e,w)){l=this._textLines[w],m=n/this.lineHeight,o=this._getLineLeftOffset(w),h=0,d=0,c=this.getValueOfPropertyAt(w,0,e),v=this.getValueOfPropertyAt(w,0,"fill"),u=b+m*(1-this._fontSizeFraction),i=this.getHeightOfChar(w,0),s=this.getValueOfPropertyAt(w,0,"deltaY");for(var x=0,C=l.length;x<C;x++)f=this.__charBounds[w][x],p=this.getValueOfPropertyAt(w,x,e),g=this.getValueOfPropertyAt(w,x,"fill"),r=this.getHeightOfChar(w,x),a=this.getValueOfPropertyAt(w,x,"deltaY"),(p!==c||g!==v||r!==i||a!==s)&&d>0?(t.fillStyle=v,c&&v&&t.fillRect(y+o+h,u+this.offsets[e]*i+s,d,this.fontSize/15),h=f.left,d=f.width,c=p,v=g,i=r,s=a):d+=f.kernedWidth;t.fillStyle=g,p&&g&&t.fillRect(y+o+h,u+this.offsets[e]*i+s,d-_,this.fontSize/15),b+=n}else b+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,o=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,s=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?i.fontFamily:'"'+i.fontFamily+'"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",s].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=["\n"],o=[],s=0;s<n.length;s++)i[s]=e.util.string.graphemeSplit(n[s]),o=o.concat(i[s],r);return o.pop(),{_unwrappedLines:i,lines:n,graphemeText:o,graphemeLines:i}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(t),i=this.callSuper("toObject",e);return i.styles=n(this.styles,!0),i},set:function(t,e){this.callSuper("set",t,e);var n=!1;if("object"==typeof t)for(var i in t)n=n||-1!==this._dimensionAffectingProps.indexOf(i);else n=-1!==this._dimensionAffectingProps.indexOf(t);return n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),s=o.textAnchor||"left";if((r=e.util.object.extend(r?n(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(r.underline=!0),-1!==a.indexOf("overline")&&(r.overline=!0),-1!==a.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new e.Text(l,r),h=u.getScaledHeight()/u.height,d=((u.height+u.strokeWidth)*u.lineHeight-u.height)*h,f=u.getScaledHeight()+d,p=0;"center"===s&&(p=u.getScaledWidth()/2),"right"===s&&(p=u.getScaledWidth()),u.set({left:u.left-p,top:u.top-(f-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:void 0!==c?c:1}),i(u)},e.Text.fromObject=function(t,n){return e.Object._fromObject("Text",t,n,"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text))}(e),C.util.object.extend(C.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var n=void 0===e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if(void 0!==n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,i=this.styles,r=0,o=!0,s=0;for(var a in i){for(var l in e=0,i[a]){var c;r++,(c=i[a][l]).hasOwnProperty(t)?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete i[a][l]}0===e&&delete i[a]}for(var u=0;u<this._textLines.length;u++)s+=this._textLines[u].length;o&&r===s&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n])delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),C.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(t,e,n){void 0===e&&(e=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)r[n=this._styleProperties[o]]=void 0===i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}C.IText=C.util.createClass(C.Text,C.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,o=0,s=0,a=this.get2DCursorLocation(t);i=a.charIndex,n=a.lineIndex;for(var l=0;l<n;l++)o+=this.getHeightOfLine(l);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(s=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(s-=this._getWidthOfCharSpacing()),r={top:o,left:e+(s>0?s:0)},this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(i,r,"fontSize"),s=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/s,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(i,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,l+t.top+c,a,o)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(n),s=this.get2DCursorLocation(i),a=o.lineIndex,l=s.lineIndex,c=o.charIndex<0?0:o.charIndex,u=s.charIndex<0?0:s.charIndex,h=a;h<=l;h++){var d,f=this._getLineLeftOffset(h)||0,p=this.getHeightOfLine(h),m=0,g=0;if(h===a&&(m=this.__charBounds[a][c].left),h>=a&&h<l)g=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)g=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();g=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}d=p,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(p/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+f+m,t.top+t.topOffset+p,g-m,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+f+m,t.top+t.topOffset,g-m,p)),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),C.IText.fromObject=function(e,n){if(t(e),e.styles)for(var i in e.styles)for(var r in e.styles[i])t(e.styles[i][r]);C.Object._fromObject("IText",e,n,"text")}}(),w=C.util.object.clone,C.util.object.extend(C.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],C.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},searchWordBoundary:function(t,e){for(var n=this._reSpace.test(this._text[t])?t-1:t,i=this._text[n],r=/[ \n\.,;!\?\-]/;!r.test(i)&&n>0&&n<this._text.length;)n+=e,i=this._text[n];return r.test(i)&&"\n"!==i&&(n+=1===e?0:1),n},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),r=C.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:r,selectionEnd:r};var o=n.slice(t,e);return{selectionStart:r,selectionEnd:r+C.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t).join("").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,r=n.charIndex,o=this.getValueOfPropertyAt(i,r,"fontSize")*this.lineHeight,s=e.leftOffset,a=this.calcTransformMatrix(),l={x:e.left+s,y:e.top+e.topOffset+o},c=this.canvas.upperCanvasEl,u=c.width,h=c.height,d=u-o,f=h-o,p=c.clientWidth/u,m=c.clientHeight/h;return l=C.util.transformPoint(l,a),(l=C.util.transformPoint(l,this.canvas.viewportTransform)).x*=p,l.y*=m,l.x<0&&(l.x=0),l.x>d&&(l.x=d),l.y<0&&(l.y=0),l.y>f&&(l.y=f),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),s=r.lineIndex,a=r.charIndex,l=o.lineIndex,c=o.charIndex;if(s!==l){if(this.styles[s])for(n=a;n<this._unwrappedTextLines[s].length;n++)delete this.styles[s][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][a+n-c]=i);for(n=s+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,s-l)}else if(this.styles[s]){i=this.styles[s];var u,h,d=c-a;for(n=a;n<c;n++)delete i[n];for(h in this.styles[s])(u=parseInt(h,10))>=c&&(i[u-d]=i[h],delete i[h])}},shiftLineStyles:function(t,e){var n=w(this.styles);for(var i in this.styles){var r=parseInt(i,10);r>t&&(this.styles[r+e]=n[r],n[r-e]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,n,i){var r,o={},s=!1;for(var a in n||(n=1),this.shiftLineStyles(t,n),this.styles[t]&&(r=this.styles[t][0===e?e:e-1]),this.styles[t]){var l=parseInt(a,10);l>=e&&(s=!0,o[l-e]=this.styles[t][a],delete this.styles[t][a])}for(s?this.styles[t+n]=o:delete this.styles[t+n];n>1;)n--,i&&i[n]?this.styles[t+n]={0:w(i[n])}:r?this.styles[t+n]={0:w(r)}:delete this.styles[t+n];this._forceClearCache=!0},insertCharStyleObject:function(t,e,n,i){this.styles||(this.styles={});var r=this.styles[t],o=r?w(r):{};for(var s in n||(n=1),o){var a=parseInt(s,10);a>=e&&(r[a+n]=o[a],o[a-n]||delete r[a])}if(this._forceClearCache=!0,i)for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=w(i[n]));else if(r)for(var l=r[e?e-1:1];l&&n--;)this.styles[t][e+n]=w(l)},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],o=0,s=0;s<t.length;s++)"\n"===t[s]?r[++o]=0:r[o]++;for(r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],o),s=1;s<o;s++)r[s]>0?this.insertCharStyleObject(i.lineIndex+s,0,r[s],n):n&&(this.styles[i.lineIndex+s][0]=n[0]),n=n&&n.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(i.lineIndex+s,0,r[s],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),C.util.object.extend(C.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("mousedblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||this===this.canvas._activeObject&&(this.selected=!0)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),n=0,i=0,r=0,o=0,s=0,a=0,l=this._textLines.length;a<l&&r<=e.y;a++)r+=this.getHeightOfLine(a)*this.scaleY,s=a,a>0&&(o+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));i=this._getLineLeftOffset(s)*this.scaleX;for(var c=0,u=this._textLines[s].length;c<u&&(n=i,(i+=this.__charBounds[s][c].kernedWidth*this.scaleX)<=e.x);c++)o++;return this._getNewSelectionStartFromOffset(e,n,i,o,u)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=t.x-e,s=n-t.x,a=i+(s>o||s<0?0:1);return this.flipX&&(a=r-a),a>this._text.length&&(a=this._text.length),a}}),C.util.object.extend(C.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=C.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+t.fontSize+";",C.document.body.appendChild(this.hiddenTextarea),C.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),C.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),C.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),C.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(C.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,r=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,s=r.length,a=s-o;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var l=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),c=this.selectionStart>l.selectionStart;this.selectionStart!==this.selectionEnd?(n=this._text.slice(this.selectionStart,this.selectionEnd),a+=this.selectionEnd-this.selectionStart):s<o&&(n=c?this._text.slice(this.selectionEnd+a,this.selectionEnd):this._text.slice(this.selectionStart,this.selectionStart-a)),i=r.slice(l.selectionEnd-a,l.selectionEnd),n&&n.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):c?this.removeStyleFromTo(this.selectionEnd-n.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+n.length)),i.length&&(e&&i.join("")===C.copiedText&&!C.disableStyleCopyPaste?this.insertNewStyleBlock(i,this.selectionStart,C.copiedTextStyle):this.insertNewStyleBlock(i,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(C.copiedText=this.getSelectedText(),C.disableStyleCopyPaste?C.copiedTextStyle=null:C.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||C.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(i+=(n=this.__charBounds[t][e-1]).left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var o=i.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,s);return this._textLines[r].slice(o).length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var o=i.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,s),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],o=this._getLineLeftOffset(t),s=0,a=0,l=r.length;a<l;a++)if((o+=n=this.__charBounds[t][a].width)>e){i=!0;var c=o-n,u=o,h=Math.abs(c-e);s=Math.abs(u-e)<h?a:a-1;break}return i||(s=r.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){void 0===i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var r=C.util.string.graphemeSplit(t);this.insertNewStyleBlock(r,n,e),this._text=[].concat(this._text.slice(0,n),r,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),S=C.util.toFixed,x=/  +/g,C.util.object.extend(C.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],o=t;this._setSVGBg(r);for(var s=0,a=this._textLines.length;s<a;s++)n=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(r,s,e+n,o),this._setSVGTextLineText(i,s,e+n,o),o+=this.getHeightOfLine(s);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(t,e,n,i){var r=t!==t.trim()||t.match(x),o=this.getSvgSpanStyles(e,r),s=o?'style="'+o+'"':"",a=e.deltaY,l="",c=C.Object.NUM_FRACTION_DIGITS;return a&&(l=' dy="'+S(a,c)+'" '),['<tspan x="',S(n,c),'" y="',S(i,c),'" ',l,s,">",C.util.string.escapeXml(t),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,i){var r,o,s,a,l,c=this.getHeightOfLine(e),u=-1!==this.textAlign.indexOf("justify"),h="",d=0,f=this._textLines[e];i+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,m=f.length-1;p<=m;p++)l=p===m||this.charSpacing,h+=f[p],s=this.__charBounds[e][p],0===d?(n+=s.kernedWidth-s.width,d+=s.width):d+=s.kernedWidth,u&&!l&&this._reSpaceAndTab.test(f[p])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(e,p),o=this.getCompleteStyleDeclaration(e,p+1),l=this._hasStyleChangedForSvg(r,o)),l&&(a=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,a,n,i)),h="",r=o,n+=d,d=0)},_pushTextBgRect:function(t,e,n,i,r,o){var s=C.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(e),' x="',S(n,s),'" y="',S(i,s),'" width="',S(r,s),'" height="',S(o,s),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,o,s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,d=s.length;h<d;h++)r=this.__charBounds[e][h],(o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(t,u,n+c,i,l,a),c=r.left,l=r.width,u=o):l+=r.kernedWidth;o&&this._pushTextBgRect(t,o,n+c,i,l,a)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new C.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this.getHeightOfLine(i);return e=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return C.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}}),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[i]&&o>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(n++,i++),r[o]={line:e,offset:n},i+=t.graphemeLines[o].length,n+=t.graphemeLines[o].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){var e,n,i=0,r=!1,o=this._styleMap[t],s=this._styleMap[t+1];for(var a in o&&(t=o.line,i=o.offset),s&&(r=s.line===t,e=s.offset),n=void 0===t?this.styles:{line:this.styles[t]})for(var l in n[a])if(l>=i&&(!r||l<e))for(var c in n[a][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0;n=n||0;for(var o=0,s=t.length;o<s;o++){r+=this._getGraphemeBox(t[o],e,o+n,i,!0).kernedWidth,i=t[o]}return r},_wrapLine:function(t,n,i,r){var o=0,s=this.splitByGrapheme,a=[],l=[],c=s?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",h=0,d=s?"":" ",f=0,p=0,m=0,g=!0,v=s?0:this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=s?c[y]:e.util.string.graphemeSplit(c[y]),f=this._measureWord(u,n,h),h+=u.length,(o+=p+f-v)>=i&&!g?(a.push(l),l=[],o=f,g=!0):o+=v,g||s||l.push(d),l=l.concat(u),p=this._measureWord([d],n,h),h++,g=!1,f>m&&(m=f);return y&&a.push(l),m+r>this.dynamicMinWidth&&(this.dynamicMinWidth=m-v+r),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i[o].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){return e.Object._fromObject("Textbox",t,n,"text")}}(e)}).call(this,n(4).Buffer)},function(t,e,n){"use strict";var i=n(303),r=n(304);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(305);function b(t,e,n){if(t&&r.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,n),i}o.prototype.parse=function(t,e,n){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var b=t=c.join(a);if(b=b.trim(),!n&&1===t.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(x||w&&!v[w])){for(var C,k,T=-1,M=0;M<d.length;M++){-1!==(E=b.indexOf(d[M]))&&(-1===T||E<T)&&(T=E)}-1!==(k=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(C=b.slice(0,k),b=b.slice(k+1),this.auth=decodeURIComponent(C)),T=-1;for(M=0;M<h.length;M++){var E;-1!==(E=b.indexOf(h[M]))&&(-1===T||E<T)&&(T=E)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),$=(M=0,I.length);M<$;M++){var D=I[M];if(D&&!D.match(f)){for(var L="",P=0,O=D.length;P<O;P++)D.charCodeAt(P)>127?L+="x":L+=D[P];if(!L.match(f)){var N=I.slice(0,M),j=I.slice(M+1),R=D.match(p);R&&(N.push(R[1]),j.unshift(R[2])),j.length&&(b="/"+j.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=i.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[S])for(M=0,$=u.length;M<$;M++){var Y=u[M];if(-1!==b.indexOf(Y)){var H=encodeURIComponent(Y);H===Y&&(H=escape(Y)),b=b.split(Y).join(H)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var z=b.indexOf("?");if(-1!==z?(this.search=b.substr(z),this.query=b.substr(z+1),e&&(this.query=y.parse(this.query)),b=b.slice(0,z)):e&&(this.search="",this.query={}),b&&(this.pathname=b),v[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var U=this.search||"";this.path=B+U}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=t[u])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var f=h[d];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||n.host&&t.pathname,S=w,x=n.pathname&&n.pathname.split("/")||[],C=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===x[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=t.search,n.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(C)n.hostname=n.host=x.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=t.search,n.query=t.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=x.slice(-1)[0],T=(n.host||t.host||x.length>1)&&("."===k||".."===k)||""===k,M=0,E=x.length;E>=0;E--)"."===(k=x[E])?x.splice(E,1):".."===k?(x.splice(E,1),M++):M&&(x.splice(E,1),M--);if(!w&&!S)for(;M--;M)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),T&&"/"!==x.join("/").substr(-1)&&x.push("");var A,I=""===x[0]||x[0]&&"/"===x[0].charAt(0);C&&(n.hostname=n.host=I?"":x.length?x.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(w=w||n.host&&x.length)&&!I&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(9))},function(t,e,n){var i=n(3).Buffer;function r(t){i.isBuffer(t)||(t=i.from(t));for(var e=t.length/4|0,n=new Array(e),r=0;r<e;r++)n[r]=t.readUInt32BE(4*r);return n}function o(t){for(;0<t.length;t++)t[0]=0}function s(t,e,n,i,r){for(var o,s,a,l,c=n[0],u=n[1],h=n[2],d=n[3],f=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],v=4,y=1;y<r;y++)o=c[f>>>24]^u[p>>>16&255]^h[m>>>8&255]^d[255&g]^e[v++],s=c[p>>>24]^u[m>>>16&255]^h[g>>>8&255]^d[255&f]^e[v++],a=c[m>>>24]^u[g>>>16&255]^h[f>>>8&255]^d[255&p]^e[v++],l=c[g>>>24]^u[f>>>16&255]^h[p>>>8&255]^d[255&m]^e[v++],f=o,p=s,m=a,g=l;return o=(i[f>>>24]<<24|i[p>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^e[v++],s=(i[p>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&f])^e[v++],a=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[f>>>8&255]<<8|i[255&p])^e[v++],l=(i[g>>>24]<<24|i[f>>>16&255]<<16|i[p>>>8&255]<<8|i[255&m])^e[v++],[o>>>=0,s>>>=0,a>>>=0,l>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=[],i=[],r=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,l=0;l<256;++l){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,n[s]=c,i[c]=s;var u=t[s],h=t[u],d=t[h],f=257*t[c]^16843008*c;r[0][s]=f<<24|f>>>8,r[1][s]=f<<16|f>>>16,r[2][s]=f<<8|f>>>24,r[3][s]=f,f=16843009*d^65537*h^257*u^16843008*s,o[0][c]=f<<24|f>>>8,o[1][c]=f<<16|f>>>16,o[2][c]=f<<8|f>>>24,o[3][c]=f,0===s?s=a=1:(s=u^t[t[t[d^u]]],a^=t[t[a]])}return{SBOX:n,INV_SBOX:i,SUB_MIX:r,INV_SUB_MIX:o}}();function c(t){this._key=r(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,i=4*(n+1),r=[],o=0;o<e;o++)r[o]=t[o];for(o=e;o<i;o++){var s=r[o-1];o%e==0?(s=s<<8|s>>>24,s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e==4&&(s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s]),r[o]=r[o-e]^s}for(var c=[],u=0;u<i;u++){var h=i-u,d=r[h-(u%4?0:4)];c[u]=u<4||h<=4?d:l.INV_SUB_MIX[0][l.SBOX[d>>>24]]^l.INV_SUB_MIX[1][l.SBOX[d>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[d>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&d]]}this._nRounds=n,this._keySchedule=r,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return s(t=r(t),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=i.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n},c.prototype.decryptBlock=function(t){var e=(t=r(t))[1];t[1]=t[3],t[3]=e;var n=s(t,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),o=i.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=c},function(t,e,n){var i=n(3).Buffer,r=n(43);t.exports=function(t,e,n,o){if(i.isBuffer(t)||(t=i.from(t,"binary")),e&&(i.isBuffer(e)||(e=i.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,a=i.alloc(s),l=i.alloc(o||0),c=i.alloc(0);s>0||o>0;){var u=new r;u.update(c),u.update(t),e&&u.update(e),c=u.digest();var h=0;if(s>0){var d=a.length-s;h=Math.min(s,c.length),c.copy(a,d,0,h),s-=h}if(h<c.length&&o>0){var f=l.length-o,p=Math.min(o,c.length-h);c.copy(l,f,h,h+p),o-=p}}return c.fill(0),{key:a,iv:l}}},function(t,e,n){"use strict";var i=n(8),r=n(12),o=r.getNAF,s=r.getJSF,a=r.assert;function l(t,e){this.type=t,this.p=new i(e.p,16),this.red=e.prime?i.red(e.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=e.n&&new i(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(t,e){a(t.precomputed);var n=t._getDoubles(),i=o(e,1),r=(1<<n.step+1)-(n.step%2==0?2:1);r/=3;for(var s=[],l=0;l<i.length;l+=n.step){var c=0;for(e=l+n.step-1;e>=l;e--)c=(c<<1)+i[e];s.push(c)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=r;d>0;d--){for(l=0;l<s.length;l++){(c=s[l])===d?h=h.mixedAdd(n.points[l]):c===-d&&(h=h.mixedAdd(n.points[l].neg()))}u=u.add(h)}return u.toP()},l.prototype._wnafMul=function(t,e){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var r=i.points,s=o(e,n),l=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(e=0;c>=0&&0===s[c];c--)e++;if(c>=0&&e++,l=l.dblp(e),c<0)break;var u=s[c];a(0!==u),l="affine"===t.type?u>0?l.mixedAdd(r[u-1>>1]):l.mixedAdd(r[-u-1>>1].neg()):u>0?l.add(r[u-1>>1]):l.add(r[-u-1>>1].neg())}return"affine"===t.type?l.toP():l},l.prototype._wnafMulAdd=function(t,e,n,i,r){for(var a=this._wnafT1,l=this._wnafT2,c=this._wnafT3,u=0,h=0;h<i;h++){var d=(k=e[h])._getNAFPoints(t);a[h]=d.wnd,l[h]=d.points}for(h=i-1;h>=1;h-=2){var f=h-1,p=h;if(1===a[f]&&1===a[p]){var m=[e[f],null,null,e[p]];0===e[f].y.cmp(e[p].y)?(m[1]=e[f].add(e[p]),m[2]=e[f].toJ().mixedAdd(e[p].neg())):0===e[f].y.cmp(e[p].y.redNeg())?(m[1]=e[f].toJ().mixedAdd(e[p]),m[2]=e[f].add(e[p].neg())):(m[1]=e[f].toJ().mixedAdd(e[p]),m[2]=e[f].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=s(n[f],n[p]);u=Math.max(v[0].length,u),c[f]=new Array(u),c[p]=new Array(u);for(var y=0;y<u;y++){var b=0|v[0][y],_=0|v[1][y];c[f][y]=g[3*(b+1)+(_+1)],c[p][y]=0,l[f]=m}}else c[f]=o(n[f],a[f]),c[p]=o(n[p],a[p]),u=Math.max(c[f].length,u),u=Math.max(c[p].length,u)}var w=this.jpoint(null,null,null),S=this._wnafT4;for(h=u;h>=0;h--){for(var x=0;h>=0;){var C=!0;for(y=0;y<i;y++)S[y]=0|c[y][h],0!==S[y]&&(C=!1);if(!C)break;x++,h--}if(h>=0&&x++,w=w.dblp(x),h<0)break;for(y=0;y<i;y++){var k,T=S[y];0!==T&&(T>0?k=l[y][T-1>>1]:T<0&&(k=l[y][-T-1>>1].neg()),w="affine"===k.type?w.mixedAdd(k):w.add(k))}}for(h=0;h<i;h++)l[h]=null;return r?w:w.toP()},l.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(t,e){t=r.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return r.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;r<e;r+=t){for(var o=0;o<t;o++)i=i.dbl();n.push(i)}return{step:t,points:n}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,i=1===n?null:this.dbl(),r=1;r<n;r++)e[r]=e[r-1].add(i);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},function(t,e,n){var i=n(372),r=n(383),o=n(384),s=n(47),a=n(201),l=n(3).Buffer;function c(t){var e;"object"!=typeof t||l.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=l.from(t));var n,c,u=o(t,e),h=u.tag,d=u.data;switch(h){case"CERTIFICATE":c=i.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=i.PublicKey.decode(d,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=i.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+h);case"ENCRYPTED PRIVATE KEY":d=function(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=r[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,d=a.pbkdf2Sync(e,n,i,h,"sha1"),f=s.createDecipheriv(o,d,c),p=[];return p.push(f.update(u)),p.push(f.final()),l.concat(p)}(d=i.EncryptedPrivateKey.decode(d,"der"),e);case"PRIVATE KEY":switch(n=(c=i.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:i.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=i.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+h);case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=i.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=c,c.signature=i.signature},function(t,e,n){(function(e){var i=n(393),r=[8,9,10,11,12,13,14,15];function o(t,e,n){if(this instanceof o==!1)throw new TypeError("Classes can't be function-called");this._options=t||{},this._isServer=!!e,this._inflate=null,this._deflate=null,this.params=null,this._maxPayload=n||0}o.extensionName="permessage-deflate",o.prototype.offer=function(){var t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t},o.prototype.accept=function(t){var e;return t=this.normalizeParams(t),e=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params=e,e},o.prototype.cleanup=function(){this._inflate&&(this._inflate.writeInProgress?this._inflate.pendingClose=!0:(this._inflate.close&&this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate.writeInProgress?this._deflate.pendingClose=!0:(this._deflate.close&&this._deflate.close(),this._deflate=null))},o.prototype.acceptAsServer=function(t){var e={};if(!t.some(function(t){if(e={},(!1!==this._options.serverNoContextTakeover||!t.server_no_context_takeover)&&(!1!==this._options.serverMaxWindowBits||!t.server_max_window_bits)&&!("number"==typeof this._options.serverMaxWindowBits&&"number"==typeof t.server_max_window_bits&&this._options.serverMaxWindowBits>t.server_max_window_bits)&&("number"!=typeof this._options.clientMaxWindowBits||t.client_max_window_bits))return(this._options.serverNoContextTakeover||t.server_no_context_takeover)&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),!1!==this._options.clientNoContextTakeover&&t.client_no_context_takeover&&(e.client_no_context_takeover=!0),"number"==typeof this._options.serverMaxWindowBits?e.server_max_window_bits=this._options.serverMaxWindowBits:"number"==typeof t.server_max_window_bits&&(e.server_max_window_bits=t.server_max_window_bits),"number"==typeof this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:!1!==this._options.clientMaxWindowBits&&"number"==typeof t.client_max_window_bits&&(e.client_max_window_bits=t.client_max_window_bits),!0},this))throw new Error("Doesn't support the offered configuration");return e},o.prototype.acceptAsClient=function(t){var e=t[0];if(null!=this._options.clientNoContextTakeover&&!1===this._options.clientNoContextTakeover&&e.client_no_context_takeover)throw new Error('Invalid value for "client_no_context_takeover"');if(null!=this._options.clientMaxWindowBits){if(!1===this._options.clientMaxWindowBits&&e.client_max_window_bits)throw new Error('Invalid value for "client_max_window_bits"');if("number"==typeof this._options.clientMaxWindowBits&&(!e.client_max_window_bits||e.client_max_window_bits>this._options.clientMaxWindowBits))throw new Error('Invalid value for "client_max_window_bits"')}return e},o.prototype.normalizeParams=function(t){return t.map(function(t){return Object.keys(t).forEach(function(e){var n=t[e];if(n.length>1)throw new Error("Multiple extension parameters for "+e);switch(n=n[0],e){case"server_no_context_takeover":case"client_no_context_takeover":if(!0!==n)throw new Error("invalid extension parameter value for "+e+" ("+n+")");t[e]=!0;break;case"server_max_window_bits":case"client_max_window_bits":if("string"==typeof n&&(n=parseInt(n,10),!~r.indexOf(n)))throw new Error("invalid extension parameter value for "+e+" ("+n+")");if(!this._isServer&&!0===n)throw new Error("Missing extension parameter value for "+e);t[e]=n;break;default:throw new Error("Not defined extension parameter ("+e+")")}},this),t},this)},o.prototype.decompress=function(t,n,r){var o=this._isServer?"client":"server";if(!this._inflate){var s=this.params[o+"_max_window_bits"];this._inflate=i.createInflateRaw({windowBits:"number"==typeof s?s:15})}this._inflate.writeInProgress=!0;var a=this,l=[],c=0;function u(t){d(),r(t)}function h(t){if(void 0!==a._maxPayload&&null!==a._maxPayload&&a._maxPayload>0&&(c+=t.length)>a._maxPayload){l=[],d();r({type:1009})}else l.push(t)}function d(){a._inflate&&(a._inflate.removeListener("error",u),a._inflate.removeListener("data",h),a._inflate.writeInProgress=!1,(n&&a.params[o+"_no_context_takeover"]||a._inflate.pendingClose)&&(a._inflate.close&&a._inflate.close(),a._inflate=null))}this._inflate.on("error",u).on("data",h),this._inflate.write(t),n&&this._inflate.write(new e([0,0,255,255])),this._inflate.flush(function(){d(),r(null,e.concat(l))})},o.prototype.compress=function(t,n,r){var o=this._isServer?"server":"client";if(!this._deflate){var s=this.params[o+"_max_window_bits"];this._deflate=i.createDeflateRaw({flush:i.Z_SYNC_FLUSH,windowBits:"number"==typeof s?s:15,memLevel:this._options.memLevel||8})}this._deflate.writeInProgress=!0;var a=this,l=[];function c(t){h(),r(t)}function u(t){l.push(t)}function h(){a._deflate&&(a._deflate.removeListener("error",c),a._deflate.removeListener("data",u),a._deflate.writeInProgress=!1,(n&&a.params[o+"_no_context_takeover"]||a._deflate.pendingClose)&&(a._deflate.close&&a._deflate.close(),a._deflate=null))}this._deflate.on("error",c).on("data",u),this._deflate.write(t),this._deflate.flush(function(){h();var t=e.concat(l);n&&(t=t.slice(0,t.length-4)),r(null,t)})},t.exports=o}).call(this,n(4).Buffer)},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(i)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t){var i=n(309),r=n(190),o=n(316),s=n(317),a=n(30),l=e;l.request=function(e,n){e="string"==typeof e?a.parse(e):o(e);var r=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||r,l=e.hostname||e.host,c=e.port,u=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?s+"//"+l:"")+(c?":"+c:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new i(e);return n&&h.on("response",n),h},l.get=function(t,e){var n=l.request(t,e);return n.end(),n},l.ClientRequest=i,l.IncomingMessage=r.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=s,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(7))},function(t,e,n){"use strict";(function(e,i,r){var o=n(31);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:o.nextTick;y.WritableState=v;var c=n(22);c.inherits=n(2);var u={deprecate:n(313)},h=n(192),d=n(3).Buffer,f=r.Uint8Array||function(){};var p,m=n(193);function g(){}function v(t,e){a=a||n(18),t=t||{};var i=e instanceof a;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,c=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(o.nextTick(r,i),o.nextTick(C,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),C(t,e))}(t,n,i,e,r);else{var s=S(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),i?l(_,t,n,s,r):_(t,n,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(a=a||n(18),!(p.call(y,this)||this instanceof a))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function b(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function _(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),C(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,b(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,u,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),C(t,e)})}function C(t,e){var n=S(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(y,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var i,r=this._writableState,s=!1,a=!r.objectMode&&(i=t,d.isBuffer(i)||i instanceof f);return a&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=g),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,i){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(i,s),r=!1),r}(this,r,t,n))&&(r.pendingcb++,s=function(t,e,n,i,r,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,n));return e}(e,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,i,r,o);return l}(this,r,a,t,e,n)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,C(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(9),n(59).setImmediate,n(7))},function(t,e,n){"use strict";var i=n(3).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=s(e[i]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=s(e[i]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=s(e[i]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n(19),e.createHash=e.Hash=n(23),e.createHmac=e.Hmac=n(198);var i=n(328),r=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);e.getHashes=function(){return o};var s=n(201);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync;var a=n(330);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var l=n(347);e.DiffieHellmanGroup=l.DiffieHellmanGroup,e.createDiffieHellmanGroup=l.createDiffieHellmanGroup,e.getDiffieHellman=l.getDiffieHellman,e.createDiffieHellman=l.createDiffieHellman,e.DiffieHellman=l.DiffieHellman;var c=n(352);e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=n(386);var u=n(387);e.publicEncrypt=u.publicEncrypt,e.privateEncrypt=u.privateEncrypt,e.publicDecrypt=u.publicDecrypt,e.privateDecrypt=u.privateDecrypt;var h=n(390);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e,n){"use strict";var i=n(2),r=n(195),o=n(3).Buffer,s=new Array(16);function a(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(t,e){return t<<e|t>>>32-e}function c(t,e,n,i,r,o,s){return l(t+(e&n|~e&i)+r+o|0,s)+e|0}function u(t,e,n,i,r,o,s){return l(t+(e&i|n&~i)+r+o|0,s)+e|0}function h(t,e,n,i,r,o,s){return l(t+(e^n^i)+r+o|0,s)+e|0}function d(t,e,n,i,r,o,s){return l(t+(n^(e|~i))+r+o|0,s)+e|0}i(a,r),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var n=this._a,i=this._b,r=this._c,o=this._d;n=c(n,i,r,o,t[0],3614090360,7),o=c(o,n,i,r,t[1],3905402710,12),r=c(r,o,n,i,t[2],606105819,17),i=c(i,r,o,n,t[3],3250441966,22),n=c(n,i,r,o,t[4],4118548399,7),o=c(o,n,i,r,t[5],1200080426,12),r=c(r,o,n,i,t[6],2821735955,17),i=c(i,r,o,n,t[7],4249261313,22),n=c(n,i,r,o,t[8],1770035416,7),o=c(o,n,i,r,t[9],2336552879,12),r=c(r,o,n,i,t[10],4294925233,17),i=c(i,r,o,n,t[11],2304563134,22),n=c(n,i,r,o,t[12],1804603682,7),o=c(o,n,i,r,t[13],4254626195,12),r=c(r,o,n,i,t[14],2792965006,17),n=u(n,i=c(i,r,o,n,t[15],1236535329,22),r,o,t[1],4129170786,5),o=u(o,n,i,r,t[6],3225465664,9),r=u(r,o,n,i,t[11],643717713,14),i=u(i,r,o,n,t[0],3921069994,20),n=u(n,i,r,o,t[5],3593408605,5),o=u(o,n,i,r,t[10],38016083,9),r=u(r,o,n,i,t[15],3634488961,14),i=u(i,r,o,n,t[4],3889429448,20),n=u(n,i,r,o,t[9],568446438,5),o=u(o,n,i,r,t[14],3275163606,9),r=u(r,o,n,i,t[3],4107603335,14),i=u(i,r,o,n,t[8],1163531501,20),n=u(n,i,r,o,t[13],2850285829,5),o=u(o,n,i,r,t[2],4243563512,9),r=u(r,o,n,i,t[7],1735328473,14),n=h(n,i=u(i,r,o,n,t[12],2368359562,20),r,o,t[5],4294588738,4),o=h(o,n,i,r,t[8],2272392833,11),r=h(r,o,n,i,t[11],1839030562,16),i=h(i,r,o,n,t[14],4259657740,23),n=h(n,i,r,o,t[1],2763975236,4),o=h(o,n,i,r,t[4],1272893353,11),r=h(r,o,n,i,t[7],4139469664,16),i=h(i,r,o,n,t[10],3200236656,23),n=h(n,i,r,o,t[13],681279174,4),o=h(o,n,i,r,t[0],3936430074,11),r=h(r,o,n,i,t[3],3572445317,16),i=h(i,r,o,n,t[6],76029189,23),n=h(n,i,r,o,t[9],3654602809,4),o=h(o,n,i,r,t[12],3873151461,11),r=h(r,o,n,i,t[15],530742520,16),n=d(n,i=h(i,r,o,n,t[2],3299628645,23),r,o,t[0],4096336452,6),o=d(o,n,i,r,t[7],1126891415,10),r=d(r,o,n,i,t[14],2878612391,15),i=d(i,r,o,n,t[5],4237533241,21),n=d(n,i,r,o,t[12],1700485571,6),o=d(o,n,i,r,t[3],2399980690,10),r=d(r,o,n,i,t[10],4293915773,15),i=d(i,r,o,n,t[1],2240044497,21),n=d(n,i,r,o,t[8],1873313359,6),o=d(o,n,i,r,t[15],4264355552,10),r=d(r,o,n,i,t[6],2734768916,15),i=d(i,r,o,n,t[13],1309151649,21),n=d(n,i,r,o,t[4],4149444226,6),o=d(o,n,i,r,t[11],3174756917,10),r=d(r,o,n,i,t[2],718787259,15),i=d(i,r,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+r|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},function(t,e,n){"use strict";var i=n(4).Buffer,r=n(2),o=n(195),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,n,i,r,o,s,a){return p(t+(e^n^i)+o+s|0,a)+r|0}function g(t,e,n,i,r,o,s,a){return p(t+(e&n|~e&i)+o+s|0,a)+r|0}function v(t,e,n,i,r,o,s,a){return p(t+((e|~n)^i)+o+s|0,a)+r|0}function y(t,e,n,i,r,o,s,a){return p(t+(e&i|n&~i)+o+s|0,a)+r|0}function b(t,e,n,i,r,o,s,a){return p(t+(e^(n|~i))+o+s|0,a)+r|0}r(f,o),f.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,i=0|this._b,r=0|this._c,o=0|this._d,f=0|this._e,_=0|this._a,w=0|this._b,S=0|this._c,x=0|this._d,C=0|this._e,k=0;k<80;k+=1){var T,M;k<16?(T=m(n,i,r,o,f,t[a[k]],h[0],c[k]),M=b(_,w,S,x,C,t[l[k]],d[0],u[k])):k<32?(T=g(n,i,r,o,f,t[a[k]],h[1],c[k]),M=y(_,w,S,x,C,t[l[k]],d[1],u[k])):k<48?(T=v(n,i,r,o,f,t[a[k]],h[2],c[k]),M=v(_,w,S,x,C,t[l[k]],d[2],u[k])):k<64?(T=y(n,i,r,o,f,t[a[k]],h[3],c[k]),M=g(_,w,S,x,C,t[l[k]],d[3],u[k])):(T=b(n,i,r,o,f,t[a[k]],h[4],c[k]),M=m(_,w,S,x,C,t[l[k]],d[4],u[k])),n=f,f=o,o=p(r,10),r=i,i=T,_=C,C=x,x=p(S,10),S=w,w=M}var E=this._b+r+x|0;this._b=this._c+o+C|0,this._c=this._d+f+_|0,this._d=this._e+n+w|0,this._e=this._a+i+S|0,this._a=E},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=i.alloc?i.alloc(20):new i(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=f},function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(323),e.sha1=n(324),e.sha224=n(325),e.sha256=n(196),e.sha384=n(326),e.sha512=n(197)},function(t,e,n){"use strict";e.utils=n(332),e.Cipher=n(333),e.DES=n(334),e.CBC=n(335),e.EDE=n(336)},function(t,e,n){var i=n(337),r=n(345),o=n(207);e.createCipher=e.Cipher=i.createCipher,e.createCipheriv=e.Cipheriv=i.createCipheriv,e.createDecipher=e.Decipher=r.createDecipher,e.createDecipheriv=e.Decipheriv=r.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,n){var i={ECB:n(338),CBC:n(339),CFB:n(340),CFB8:n(341),CFB1:n(342),OFB:n(343),CTR:n(205),GCM:n(205)},r=n(207);for(var o in r)r[o].module=i[r[o].mode];t.exports=r},function(t,e,n){var i;function r(t){this.rand=t}if(t.exports=function(t){return i||(i=new r(null)),i.generate(t)},t.exports.Rand=r,r.prototype.generate=function(t){return this._rand(t)},r.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(349);if("function"!=typeof o.randomBytes)throw new Error("Not supported");r.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},function(t,e,n){(function(e){var i=n(8),r=n(19);function o(t,n){var r=function(t){var e=s(t);return{blinder:e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(n),o=n.modulus.byteLength(),a=(i.mont(n.modulus),new i(t).mul(r.blinder).umod(n.modulus)),l=a.toRed(i.mont(n.prime1)),c=a.toRed(i.mont(n.prime2)),u=n.coefficient,h=n.prime1,d=n.prime2,f=l.redPow(n.exponent1),p=c.redPow(n.exponent2);f=f.fromRed(),p=p.fromRed();var m=f.isub(p).imul(u).umod(h);return m.imul(d),p.iadd(m),new e(p.imul(r.unblinder).umod(n.modulus).toArray(!1,o))}function s(t){for(var e=t.modulus.byteLength(),n=new i(r(e));n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2);)n=new i(r(e));return n}t.exports=o,o.getr=s}).call(this,n(4).Buffer)},function(t,e,n){"use strict";var i=e;i.version=n(354).version,i.utils=n(12),i.rand=n(49),i.curve=n(213),i.curves=n(52),i.ec=n(365),i.eddsa=n(369)},function(t,e,n){"use strict";var i,r=e,o=n(53),s=n(213),a=n(12).assert;function l(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var n=new l(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n(364)}catch(t){i=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(t,e,n){var i=e;i.utils=n(14),i.common=n(26),i.sha=n(358),i.ripemd=n(362),i.hmac=n(363),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},function(t,e,n){(function(e,i){t.exports=function(t,n){"use strict";var r;return t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,function(r){var o;r.exports,(o=window).DOMParser=window.DOMParser;var s=o.document;function a(t,e){var n;return(n=s.createElement("canvas")).width=t,n.height=e,n}var l,c=function(t,e,n){if(null!=t||null!=e||null!=n){var i=y(n||{});"string"==typeof t&&(t=s.getElementById(t)),null!=t.svg&&t.svg.stop(),t.childNodes&&1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=i);var r=t.getContext("2d");void 0!==e.documentElement?i.loadXmlDoc(r,e):"<"==e.substr(0,1)?i.loadXml(r,e):i.load(r,e)}else for(var o=s.querySelectorAll("svg"),a=0;a<o.length;a++){var l=o[a],u=s.createElement("canvas");if(void 0!==l.clientWidth&&void 0!==l.clientHeight)u.width=l.clientWidth,u.height=l.clientHeight;else{var h=l.getBoundingClientRect();u.width=h.width,u.height=h.height}l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var d=s.createElement("div");d.appendChild(l),c(u,d.innerHTML)}};"undefined"==typeof Element||(void 0!==Element.prototype.matches?l=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?l=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?l=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?l=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?l=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof e&&"function"!=typeof Zepto||(l=function(t,e){return i(t).is(e)}),void 0===l&&"undefined"!=typeof Sizzle&&(l=Sizzle.matchesSelector)));var u=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,d=/(\.[^\s\+>~\.\[:]+)/g,f=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,p=/(:[\w-]+\([^\)]*\))/gi,m=/(:[^\s\+>~\.\[:]+)/g,g=/([^\s\+>~\.\[:]+)/g;function v(t){var e=[0,0,0],n=function(n,i){var r=t.match(n);null!=r&&(e[i]+=r.length,t=t.replace(n," "))};return t=(t=t.replace(/:not\(([^\)]*)\)/g,"     $1 ")).replace(/{[\s\S]*/gm," "),n(u,1),n(h,0),n(d,1),n(f,2),n(p,1),n(m,1),t=(t=t.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),n(g,2),e.join("")}function y(e){var i={opts:e,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,rootEmSize:12,emSize:12,log:function(){}};1==i.opts.log&&"undefined"!=typeof console&&(i.log=function(t){console.log(t)}),i.init=function(t){var e=0;i.UniqueId=function(){return"canvg"+ ++e},i.Definitions={},i.Styles={},i.StylesSpecificity={},i.Animations=[],i.Images=[],i.ctx=t,i.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},i.init(),i.ImagesLoaded=function(){for(var t=0;t<i.Images.length;t++)if(!i.Images[t].loaded)return!1;return!0},i.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},i.compressSpaces=function(t){return t.replace(/(?!\u3000)\s+/gm," ")},i.ajax=function(t){var e;return(e=o.XMLHttpRequest?new o.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},i.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var n=new Windows.Data.Xml.Dom.XmlDocument,i=new Windows.Data.Xml.Dom.XmlLoadSettings;return i.prohibitDtd=!1,n.loadXml(t,i),n}if(!o.DOMParser)return t=t.replace(/<!DOCTYPE svg[^>]*>/,""),(n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t),n;try{var r=e.xmldom?new o.DOMParser(e.xmldom):new o.DOMParser;return r.parseFromString(t,"image/svg+xml")}catch(n){return(r=e.xmldom?new o.DOMParser(e.xmldom):new o.DOMParser).parseFromString(t,"text/xml")}},i.Property=function(t,e){this.name=t,this.value=e},i.Property.prototype.getValue=function(){return this.value},i.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},i.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},i.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},i.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():parseFloat(t)},i.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var r=new t(this.value);r.ok&&(n="rgba("+r.r+", "+r.g+", "+r.b+", "+e.numValue()+")")}return new i.Property(this.name,n)},i.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),i.Definitions[t]},i.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},i.Property.prototype.getFillStyleDefinition=function(t,e){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(i.ctx,t,e);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),r.hasValue()&&(n.attribute("patternTransform",!0).value=r.value)}return n.createPattern(i.ctx,t,e)}return null},i.Property.prototype.getDPI=function(){return 96},i.Property.prototype.getREM=function(){return i.rootEmSize},i.Property.prototype.getEM=function(){return i.emSize},i.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},i.Property.prototype.isPixels=function(){if(!this.hasValue())return!1;var t=this.value+"";return!!t.match(/px$/)||!!t.match(/^[0-9]+$/)},i.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/rem$/))return this.numValue()*this.getREM(t);if(n.match(/em$/))return this.numValue()*this.getEM(t);if(n.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(t);if(n.match(/%$/))return this.numValue()*i.ViewPort.ComputeSize(t);var r=this.numValue();return e&&r<1?r*i.ViewPort.ComputeSize(t):r},i.Property.prototype.toMilliseconds=function(){return this.hasValue()?(this.value+"").match(/ms$/)?this.numValue():1e3*this.numValue():0},i.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var r={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return i.Property.prototype.toTextBaseline=function(){return this.hasValue()?r[this.value]:null},i.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,n,r,o,s){var a=null!=s?this.Parse(s):this.CreateFont("","","","","",i.ctx.font);return{fontFamily:o=o||a.fontFamily,fontSize:r||a.fontSize,fontStyle:t||a.fontStyle,fontWeight:n||a.fontWeight,fontVariant:e||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var n={},r=i.trim(i.compressSpaces(e||"")).split(" "),o={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",a=0;a<r.length;a++)o.fontStyle||-1==t.Styles.indexOf(r[a])?o.fontVariant||-1==t.Variants.indexOf(r[a])?o.fontWeight||-1==t.Weights.indexOf(r[a])?o.fontSize?"inherit"!=r[a]&&(s+=r[a]):("inherit"!=r[a]&&(n.fontSize=r[a].split("/")[0]),o.fontStyle=o.fontVariant=o.fontWeight=o.fontSize=!0):("inherit"!=r[a]&&(n.fontWeight=r[a]),o.fontStyle=o.fontVariant=o.fontWeight=!0):("inherit"!=r[a]&&(n.fontVariant=r[a]),o.fontStyle=o.fontVariant=!0):("inherit"!=r[a]&&(n.fontStyle=r[a]),o.fontStyle=!0);return""!=s&&(n.fontFamily=s),n}},i.ToNumberArray=function(t){for(var e=(t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[],n=0;n<e.length;n++)e[n]=parseFloat(e[n]);return e},i.Point=function(t,e){this.x=t,this.y=e},i.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},i.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},i.CreatePoint=function(t){var e=i.ToNumberArray(t);return new i.Point(e[0],e[1])},i.CreatePath=function(t){for(var e=i.ToNumberArray(t),n=[],r=0;r<e.length;r+=2)n.push(new i.Point(e[r],e[r+1]));return n},i.BoundingBox=function(t,e,n,i){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,o){var s=t+2/3*(n-t),a=e+2/3*(i-e),l=s+1/3*(r-t),c=a+1/3*(o-e);this.addBezierCurve(t,e,s,l,a,c,r,o)},this.addBezierCurve=function(t,e,n,i,r,o,s,a){var l=[t,e],c=[n,i],u=[r,o],h=[s,a];this.addPoint(l[0],l[1]),this.addPoint(h[0],h[1]);for(var d=0;d<=1;d++){var f=function(t){return Math.pow(1-t,3)*l[d]+3*Math.pow(1-t,2)*t*c[d]+3*(1-t)*Math.pow(t,2)*u[d]+Math.pow(t,3)*h[d]},p=6*l[d]-12*c[d]+6*u[d],m=-3*l[d]+9*c[d]-9*u[d]+3*h[d],g=3*c[d]-3*l[d];if(0!=m){var v=Math.pow(p,2)-4*g*m;if(!(v<0)){var y=(-p+Math.sqrt(v))/(2*m);0<y&&y<1&&(0==d&&this.addX(f(y)),1==d&&this.addY(f(y)));var b=(-p-Math.sqrt(v))/(2*m);0<b&&b<1&&(0==d&&this.addX(f(b)),1==d&&this.addY(f(b)))}}else{if(0==p)continue;var _=-g/p;0<_&&_<1&&(0==d&&this.addX(f(_)),1==d&&this.addY(f(_)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,i)},i.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=i.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=i.ToNumberArray(t);this.angle=new i.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=i.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=i.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],o=this.m[3],s=this.m[5],a=1/(e*(1*o-0*s)-n*(1*r-0*s)+i*(0*r-0*o));t.transform(a*(1*o-0*s),a*(0*s-1*r),a*(0*i-1*n),a*(1*e-0*i),a*(n*s-i*o),a*(i*r-e*s))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new i.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;0<=e;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var n=i.trim(i.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<n.length;r++)if("none"!==n[r]){var o=i.trim(n[r].split("(")[0]),s=n[r].split("(")[1].replace(")",""),a=this.Type[o];if(void 0!==a){var l=new a(s);l.type=o,this.transforms.push(l)}}},i.AspectRatio=function(t,e,n,r,o,s,a,l,c,u){var h=(e=(e=i.compressSpaces(e)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",d=e.split(" ")[1]||"meet",f=n/r,p=o/s,m=Math.min(f,p),g=Math.max(f,p);"meet"==d&&(r*=m,s*=m),"slice"==d&&(r*=g,s*=g),c=new i.Property("refX",c),u=new i.Property("refY",u),c.hasValue()&&u.hasValue()?t.translate(-m*c.toPixels("x"),-m*u.toPixels("y")):(h.match(/^xMid/)&&("meet"==d&&m==p||"slice"==d&&g==p)&&t.translate(n/2-r/2,0),h.match(/YMid$/)&&("meet"==d&&m==f||"slice"==d&&g==f)&&t.translate(0,o/2-s/2),h.match(/^xMax/)&&("meet"==d&&m==p||"slice"==d&&g==p)&&t.translate(n-r,0),h.match(/YMax$/)&&("meet"==d&&m==f||"slice"==d&&g==f)&&t.translate(0,o-s)),"none"==h?t.scale(f,p):"meet"==d?t.scale(m,m):"slice"==d&&t.scale(g,g),t.translate(null==a?0:-a,null==l?0:-l)},i.Element={},i.EmptyProperty=new i.Property("EMPTY",""),i.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var n=this.attributes[t];return null!=n?n:(1==e&&(n=new i.Property(t,""),this.attributes[t]=n),n||i.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return i.EmptyProperty},this.style=function(t,e,n){var r=this.styles[t];if(null!=r)return r;var o=this.attribute(t);if(null!=o&&o.hasValue())return this.styles[t]=o;if(1!=n){var s=this.parent;if(null!=s){var a=s.style(t);if(null!=a&&a.hasValue())return a}}return 1==e&&(r=new i.Property(t,""),this.styles[t]=r),r||i.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var n=t;e&&(n=i.CreateElement(t)),n.parent=this,"title"!=n.type&&this.children.push(n)},this.addStylesFromStyleDefinition=function(){for(var e in i.Styles)if("@"!=e[0]&&l(t,e)){var n=i.Styles[e],r=i.StylesSpecificity[e];if(null!=n)for(var o in n){var s=this.stylesSpecificity[o];void 0===s&&(s="000"),s<=r&&(this.styles[o]=n[o],this.stylesSpecificity[o]=r)}}};var e,n=new RegExp("^[A-Z-]+$");if(null!=t&&1==t.nodeType){for(var r=0;r<t.attributes.length;r++){var o=t.attributes[r],s=(e=o.nodeName,n.test(e)?e.toLowerCase():e);this.attributes[s]=new i.Property(s,o.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue()){var a=this.attribute("style").value.split(";");for(r=0;r<a.length;r++)if(""!=i.trim(a[r])){var c=a[r].split(":"),u=i.trim(c[0]),h=i.trim(c[1]);this.styles[u]=new i.Property(u,h)}}for(this.attribute("id").hasValue()&&null==i.Definitions[this.attribute("id").value]&&(i.Definitions[this.attribute("id").value]=this),r=0;r<t.childNodes.length;r++){var d=t.childNodes[r];if(1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&(3==d.nodeType||4==d.nodeType)){var f=d.value||d.text||d.textContent||"";""!=i.compressSpaces(f)&&this.addChild(new i.Element.tspan(d),!1)}}}},i.Element.RenderedElementBase=function(t){this.base=i.Element.ElementBase,this.base(t),this.calculateOpacity=function(){for(var t=1,e=this;null!=e;){var n=e.style("opacity",!1,!0);n.hasValue()&&(t*=n.numValue()),e=e.parent}return t},this.setContext=function(t,e){if(!e){var n;if(this.style("fill").isUrlDefinition())null!=(n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=n);else if(this.style("fill").hasValue()){var r;"currentColor"==(r=this.style("fill")).value&&(r.value=this.style("color").value),"inherit"!=r.value&&(t.fillStyle="none"==r.value?"rgba(0,0,0,0)":r.value)}if(this.style("fill-opacity").hasValue()&&(r=(r=new i.Property("fill",t.fillStyle)).addOpacity(this.style("fill-opacity")),t.fillStyle=r.value),this.style("stroke").isUrlDefinition())null!=(n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")))&&(t.strokeStyle=n);else if(this.style("stroke").hasValue()){var o;"currentColor"==(o=this.style("stroke")).value&&(o.value=this.style("color").value),"inherit"!=o.value&&(t.strokeStyle="none"==o.value?"rgba(0,0,0,0)":o.value)}if(this.style("stroke-opacity").hasValue()&&(o=(o=new i.Property("stroke",t.strokeStyle)).addOpacity(this.style("stroke-opacity")),t.strokeStyle=o.value),this.style("stroke-width").hasValue()){var s=this.style("stroke-width").toPixels();t.lineWidth=0==s?.001:s}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("paint-order").hasValue()&&(t.paintOrder=this.style("paint-order").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var a=i.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(a):void 0!==t.webkitLineDash?t.webkitLineDash=a:void 0===t.mozDash||1==a.length&&0==a[0]||(t.mozDash=a);var l=this.style("stroke-dashoffset").toPixels();void 0!==t.lineDashOffset?t.lineDashOffset=l:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=l:void 0!==t.mozDashOffset&&(t.mozDashOffset=l)}}if(void 0!==t.font)if(this.style("font").hasValue())t.font=this.style("font").value;else{t.font=i.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString();var c=this.style("font-size",!1,!1);c.isPixels()&&(i.emSize=c.toPixels())}if(this.style("transform",!1,!0).hasValue()&&new i.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}t.globalAlpha=this.calculateOpacity()}},i.Element.RenderedElementBase.prototype=new i.Element.ElementBase,i.Element.PathElementBase=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new i.BoundingBox},this.renderChildren=function(t){this.path(t),i.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()&&(n=this.style("marker-start").getDefinition()).render(t,e[0][0],e[0][1]),this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),r=1;r<e.length-1;r++)n.render(t,e[r][0],e[r][1]);this.style("marker-end").isUrlDefinition()&&(n=this.style("marker-end").getDefinition()).render(t,e[e.length-1][0],e[e.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},i.Element.PathElementBase.prototype=new i.Element.RenderedElementBase,i.SetDefaults=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4},i.Element.svg=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),i.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){if(i.SetDefaults(t),t.canvas.style&&void 0!==t.font&&void 0!==o.getComputedStyle){t.font=o.getComputedStyle(t.canvas).getPropertyValue("font");var e=new i.Property("fontSize",i.Font.Parse(t.font).fontSize);e.hasValue()&&(i.rootEmSize=i.emSize=e.toPixels("y"))}this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=i.ViewPort.width(),r=i.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");var s=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(s=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(s,a),t.lineTo(n,a),t.lineTo(n,r),t.lineTo(s,r),t.closePath(),t.clip())}if(i.ViewPort.SetCurrent(n,r),this.attribute("viewBox").hasValue()){var l=i.ToNumberArray(this.attribute("viewBox").value),c=l[0],u=l[1];n=l[2],r=l[3],i.AspectRatio(t,this.attribute("preserveAspectRatio").value,i.ViewPort.width(),n,i.ViewPort.height(),r,c,u,this.attribute("refX").value,this.attribute("refY").value),i.ViewPort.RemoveCurrent(),i.ViewPort.SetCurrent(l[2],l[3])}}},i.Element.svg.prototype=new i.Element.RenderedElementBase,i.Element.rect=function(t){this.base=i.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(a=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=a),s=Math.min(s,r/2),a=Math.min(a,o/2),null!=t){var l=(Math.sqrt(2)-1)/3*4;t.beginPath(),0<o&&0<r&&(t.moveTo(e+s,n),t.lineTo(e+r-s,n),t.bezierCurveTo(e+r-s+l*s,n,e+r,n+a-l*a,e+r,n+a),t.lineTo(e+r,n+o-a),t.bezierCurveTo(e+r,n+o-a+l*a,e+r-s+l*s,n+o,e+r-s,n+o),t.lineTo(e+s,n+o),t.bezierCurveTo(e+s-l*s,n+o,e,n+o-a+l*a,e,n+o-a),t.lineTo(e,n+a),t.bezierCurveTo(e,n+a-l*a,e+s-l*s,n,e+s,n),t.closePath())}return new i.BoundingBox(e,n,e+r,n+o)}},i.Element.rect.prototype=new i.Element.PathElementBase,i.Element.circle=function(t){this.base=i.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new i.BoundingBox(e-r,n-r,e+r,n+r)}},i.Element.circle.prototype=new i.Element.PathElementBase,i.Element.ellipse=function(t){this.base=i.Element.PathElementBase,this.base(t),this.path=function(t){var e=(Math.sqrt(2)-1)/3*4,n=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),o=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(o+n,s),t.bezierCurveTo(o+n,s+e*r,o+e*n,s+r,o,s+r),t.bezierCurveTo(o-e*n,s+r,o-n,s+e*r,o-n,s),t.bezierCurveTo(o-n,s-e*r,o-e*n,s-r,o,s-r),t.bezierCurveTo(o+e*n,s-r,o+n,s-e*r,o+n,s),t.closePath()),new i.BoundingBox(o-n,s-r,o+n,s+r)}},i.Element.ellipse.prototype=new i.Element.PathElementBase,i.Element.line=function(t){this.base=i.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new i.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new i.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new i.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},i.Element.line.prototype=new i.Element.PathElementBase,i.Element.polyline=function(t){this.base=i.Element.PathElementBase,this.base(t),this.points=i.CreatePath(this.attribute("points").value),this.path=function(t){var e=new i.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)e.addPoint(this.points[n].x,this.points[n].y),null!=t&&t.lineTo(this.points[n].x,this.points[n].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return 0<t.length&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},i.Element.polyline.prototype=new i.Element.PathElementBase,i.Element.polygon=function(t){this.base=i.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},i.Element.polygon.prototype=new i.Element.polyline,i.Element.path=function(t){this.base=i.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var n=0;n<2;n++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");for(e=(e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2"),n=0;n<2;n++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=i.compressSpaces(e),e=i.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new i.Point(0,0),this.control=new i.Point(0,0),this.current=new i.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new i.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new i.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var n=new i.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var r=e.getAsCurrentPoint();for(e.addMarker(r),n.addPoint(r.x,r.y),null!=t&&t.moveTo(r.x,r.y),e.start=e.current;!e.isCommandOrEnd();)r=e.getAsCurrentPoint(),e.addMarker(r,e.start),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y);break;case"L":case"l":for(;!e.isCommandOrEnd();){var o=e.current;r=e.getAsCurrentPoint(),e.addMarker(r,o),n.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var s=new i.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(s,e.current),e.current=s,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();)s=new i.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar()),e.addMarker(s,e.current),e.current=s,n.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y);break;case"C":case"c":for(;!e.isCommandOrEnd();){var a=e.current,l=e.getPoint(),c=e.getAsControlPoint(),u=e.getAsCurrentPoint();e.addMarker(u,c,l),n.addBezierCurve(a.x,a.y,l.x,l.y,c.x,c.y,u.x,u.y),null!=t&&t.bezierCurveTo(l.x,l.y,c.x,c.y,u.x,u.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();)a=e.current,l=e.getReflectedControlPoint(),c=e.getAsControlPoint(),u=e.getAsCurrentPoint(),e.addMarker(u,c,l),n.addBezierCurve(a.x,a.y,l.x,l.y,c.x,c.y,u.x,u.y),null!=t&&t.bezierCurveTo(l.x,l.y,c.x,c.y,u.x,u.y);break;case"Q":case"q":for(;!e.isCommandOrEnd();)a=e.current,c=e.getAsControlPoint(),u=e.getAsCurrentPoint(),e.addMarker(u,c,c),n.addQuadraticCurve(a.x,a.y,c.x,c.y,u.x,u.y),null!=t&&t.quadraticCurveTo(c.x,c.y,u.x,u.y);break;case"T":case"t":for(;!e.isCommandOrEnd();)a=e.current,c=e.getReflectedControlPoint(),e.control=c,u=e.getAsCurrentPoint(),e.addMarker(u,c,c),n.addQuadraticCurve(a.x,a.y,c.x,c.y,u.x,u.y),null!=t&&t.quadraticCurveTo(c.x,c.y,u.x,u.y);break;case"A":case"a":for(;!e.isCommandOrEnd();){a=e.current;var h=e.getScalar(),d=e.getScalar(),f=e.getScalar()*(Math.PI/180),p=e.getScalar(),m=e.getScalar(),g=(u=e.getAsCurrentPoint(),new i.Point(Math.cos(f)*(a.x-u.x)/2+Math.sin(f)*(a.y-u.y)/2,-Math.sin(f)*(a.x-u.x)/2+Math.cos(f)*(a.y-u.y)/2)),v=Math.pow(g.x,2)/Math.pow(h,2)+Math.pow(g.y,2)/Math.pow(d,2);1<v&&(h*=Math.sqrt(v),d*=Math.sqrt(v));var y=(p==m?-1:1)*Math.sqrt((Math.pow(h,2)*Math.pow(d,2)-Math.pow(h,2)*Math.pow(g.y,2)-Math.pow(d,2)*Math.pow(g.x,2))/(Math.pow(h,2)*Math.pow(g.y,2)+Math.pow(d,2)*Math.pow(g.x,2)));isNaN(y)&&(y=0);var b=new i.Point(y*h*g.y/d,y*-d*g.x/h),_=new i.Point((a.x+u.x)/2+Math.cos(f)*b.x-Math.sin(f)*b.y,(a.y+u.y)/2+Math.sin(f)*b.x+Math.cos(f)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},S=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},x=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(S(t,e))},C=x([1,0],[(g.x-b.x)/h,(g.y-b.y)/d]),k=[(g.x-b.x)/h,(g.y-b.y)/d],T=[(-g.x-b.x)/h,(-g.y-b.y)/d],M=x(k,T);S(k,T)<=-1&&(M=Math.PI),1<=S(k,T)&&(M=0);var E=1-m?1:-1,A=C+E*(M/2),I=new i.Point(_.x+h*Math.cos(A),_.y+d*Math.sin(A));if(e.addMarkerAngle(I,A-E*Math.PI/2),e.addMarkerAngle(u,A-E*Math.PI),n.addPoint(u.x,u.y),null!=t&&!isNaN(C)&&!isNaN(M)){S=d<h?h:d;var $=d<h?1:h/d,D=d<h?d/h:1;t.translate(_.x,_.y),t.rotate(f),t.scale($,D),t.arc(0,0,S,C,C+M,1-m),t.scale(1/$,1/D),t.rotate(-f),t.translate(-_.x,-_.y)}}break;case"Z":case"z":null!=t&&n.x1!==n.x2&&n.y1!==n.y2&&t.closePath(),e.current=e.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},i.Element.path.prototype=new i.Element.PathElementBase,i.Element.pattern=function(t){this.base=i.Element.ElementBase,this.base(t),this.createPattern=function(t,e,n){var r=this.attribute("width").toPixels("x",!0),o=this.attribute("height").toPixels("y",!0),s=new i.Element.svg;s.attributes.viewBox=new i.Property("viewBox",this.attribute("viewBox").value),s.attributes.width=new i.Property("width",r+"px"),s.attributes.height=new i.Property("height",o+"px"),s.attributes.transform=new i.Property("transform",this.attribute("patternTransform").value),s.children=this.children;var l=a(r,o),c=l.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&c.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:delete this.styles["fill-opacity"];for(var u=-1;u<=1;u++)for(var h=-1;h<=1;h++)c.save(),s.attributes.x=new i.Property("x",u*l.width),s.attributes.y=new i.Property("y",h*l.height),s.render(c),c.restore();return t.createPattern(l,"repeat")}},i.Element.pattern.prototype=new i.Element.ElementBase,i.Element.marker=function(t){this.base=i.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,n){if(e){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var r=new i.Element.svg;r.attributes.viewBox=new i.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new i.Property("refX",this.attribute("refX").value),r.attributes.refY=new i.Property("refY",this.attribute("refY").value),r.attributes.width=new i.Property("width",this.attribute("markerWidth").value),r.attributes.height=new i.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new i.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new i.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-n),t.translate(-e.x,-e.y)}}},i.Element.marker.prototype=new i.Element.ElementBase,i.Element.defs=function(t){this.base=i.Element.ElementBase,this.base(t),this.render=function(){}},i.Element.defs.prototype=new i.Element.ElementBase,i.Element.GradientBase=function(t){this.base=i.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var n=this.attributesToInherit[e];!this.attribute(n).hasValue()&&t.attribute(n).hasValue()&&(this.attribute(n,!0).value=t.attribute(n).value)}},this.createGradient=function(t,e,n){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));var o=function(t){return n.hasValue()?new i.Property("color",t).addOpacity(n).value:t},s=this.getGradient(t,e);if(null==s)return o(r.stops[r.stops.length-1].color);for(var l=0;l<r.stops.length;l++)s.addColorStop(r.stops[l].offset,o(r.stops[l].color));if(this.attribute("gradientTransform").hasValue()){var c=i.ViewPort.viewPorts[0],u=new i.Element.rect;u.attributes.x=new i.Property("x",-i.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new i.Property("y",-i.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new i.Property("width",i.MAX_VIRTUAL_PIXELS),u.attributes.height=new i.Property("height",i.MAX_VIRTUAL_PIXELS);var h=new i.Element.g;h.attributes.transform=new i.Property("transform",this.attribute("gradientTransform").value),h.children=[u];var d=new i.Element.svg;d.attributes.x=new i.Property("x",0),d.attributes.y=new i.Property("y",0),d.attributes.width=new i.Property("width",c.width),d.attributes.height=new i.Property("height",c.height),d.children=[h];var f=a(c.width,c.height),p=f.getContext("2d");return p.fillStyle=s,d.render(p),p.createPattern(f,"no-repeat")}return s}},i.Element.GradientBase.prototype=new i.Element.ElementBase,i.Element.linearGradient=function(t){this.base=i.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox(t):null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==o&&r==s?null:t.createLinearGradient(i,r,o,s)}},i.Element.linearGradient.prototype=new i.Element.GradientBase,i.Element.radialGradient=function(t){this.base=i.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.attributesToInherit.push("fr"),this.getGradient=function(t,e){var n=e.getBoundingBox(t);this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=i,s=r;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits()?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var a="objectBoundingBox"==this.gradientUnits()?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),l=this.attribute("fr").toPixels();return t.createRadialGradient(o,s,l,i,r,a)}},i.Element.radialGradient.prototype=new i.Element.GradientBase,i.Element.stop=function(t){this.base=i.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),1<this.offset&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},i.Element.stop.prototype=new i.Element.ElementBase,i.Element.AnimateBase=function(t){this.base=i.Element.ElementBase,this.base(t),i.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();this.attribute("type").hasValue()&&(n=this.attribute("type").value+"("+n+")"),this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),n=Math.floor(e),r=Math.ceil(e);t.from=new i.Property("from",parseFloat(this.values.value[n])),t.to=new i.Property("to",parseFloat(this.values.value[r])),t.progress=(e-n)/(r-n)}else t.from=this.from,t.to=this.to;return t}},i.Element.AnimateBase.prototype=new i.Element.ElementBase,i.Element.animate=function(t){this.base=i.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return"%"===this.initialUnits&&(e*=100),e+this.initialUnits}},i.Element.animate.prototype=new i.Element.AnimateBase,i.Element.animateColor=function(e){this.base=i.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),n=new t(e.from.value),i=new t(e.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*e.progress,o=n.g+(i.g-n.g)*e.progress,s=n.b+(i.b-n.b)*e.progress;return"rgb("+parseInt(r,10)+","+parseInt(o,10)+","+parseInt(s,10)+")"}return this.attribute("from").value}},i.Element.animateColor.prototype=new i.Element.AnimateBase,i.Element.animateTransform=function(t){this.base=i.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=i.ToNumberArray(t.from.value),n=i.ToNumberArray(t.to.value),r="",o=0;o<e.length;o++)r+=e[o]+(n[o]-e[o])*t.progress+" ";return r}},i.Element.animateTransform.prototype=new i.Element.animate,i.Element.font=function(t){this.base=i.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var n=this.children[e];"font-face"==n.type?(this.fontFace=n).style("font-family").hasValue()&&(i.Definitions[n.style("font-family").value]=this):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}this.render=function(){}},i.Element.font.prototype=new i.Element.ElementBase,i.Element.fontface=function(t){this.base=i.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},i.Element.fontface.prototype=new i.Element.ElementBase,i.Element.missingglyph=function(t){this.base=i.Element.path,this.base(t),this.horizAdvX=0},i.Element.missingglyph.prototype=new i.Element.path,i.Element.glyph=function(t){this.base=i.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},i.Element.glyph.prototype=new i.Element.path,i.Element.text=function(t){this.captureTextNodes=!0,this.base=i.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.initializeCoordinates=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0)},this.getBoundingBox=function(t){this.initializeCoordinates(t);for(var e=null,n=0;n<this.children.length;n++){var i=this.getChildBoundingBox(t,this,this,n);null==e?e=i:e.addBoundingBox(i)}return e},this.renderChildren=function(t){this.initializeCoordinates(t);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e);i.Mouse.checkBoundingBox(this,this.getBoundingBox(t))},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"==i)return 0;for(var r=0,o=n;o<e.children.length;o++){var s=e.children[o];if(n<o&&s.attribute("x").hasValue())break;r+=s.measureTextRecursive(t)}return-1*("end"==i?r:r/2)},this.adjustChildCoordinates=function(t,e,n,i){var r=n.children[i];if("function"!=typeof r.measureText)return r;if(r.attribute("x").hasValue()){r.x=r.attribute("x").toPixels("x")+e.getAnchorDelta(t,n,i);var o=r.attribute("text-anchor").valueOrDefault("start");if("start"!==o){var s=r.measureTextRecursive(t);r.x+=-1*("end"==o?s:s/2)}r.attribute("dx").hasValue()&&(r.x+=r.attribute("dx").toPixels("x"))}else r.attribute("dx").hasValue()&&(e.x+=r.attribute("dx").toPixels("x")),r.x=e.x;return e.x=r.x+r.measureText(t),r.attribute("y").hasValue()?(r.y=r.attribute("y").toPixels("y"),r.attribute("dy").hasValue()&&(r.y+=r.attribute("dy").toPixels("y"))):(r.attribute("dy").hasValue()&&(e.y+=r.attribute("dy").toPixels("y")),r.y=e.y),e.y=r.y,r},this.getChildBoundingBox=function(t,e,n,i){var r=this.adjustChildCoordinates(t,e,n,i),o=r.getBoundingBox(t);for(i=0;i<r.children.length;i++){var s=e.getChildBoundingBox(t,e,r,i);o.addBoundingBox(s)}return o},this.renderChild=function(t,e,n,i){var r=this.adjustChildCoordinates(t,e,n,i);for(r.render(t),i=0;i<r.children.length;i++)e.renderChild(t,e,r,i)}},i.Element.text.prototype=new i.Element.RenderedElementBase,i.Element.TextElementBase=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var o="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(o="terminal"),0<n&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(o="medial"),0<n&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(o="initial"),void 0!==t.glyphs[i]&&null==(r=t.glyphs[i][o])&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i])}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)"stroke"==t.paintOrder?(""!=t.strokeStyle&&t.strokeText(i.compressSpaces(this.getText()),this.x,this.y),""!=t.fillStyle&&t.fillText(i.compressSpaces(this.getText()),this.x,this.y)):(""!=t.fillStyle&&t.fillText(i.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(i.compressSpaces(this.getText()),this.x,this.y));else{var n=this.parent.style("font-size").numValueOrDefault(i.Font.Parse(i.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(i.Font.Parse(i.ctx.font).fontStyle),o=this.getText();e.isRTL&&(o=o.split("").reverse().join(""));for(var s=i.ToNumberArray(this.parent.attribute("dx").value),a=0;a<o.length;a++){var l=this.getGlyph(e,o,a),c=n/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(c,-c);var u=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/n,"italic"==r&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==r&&t.transform(1,0,-.4,1,0,0),t.lineWidth=u,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,void 0===s[a]||isNaN(s[a])||(this.x+=s[a])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var n=this.parent.style("font-size").numValueOrDefault(i.Font.Parse(i.ctx.font).fontSize),r=0,o=this.getText();e.isRTL&&(o=o.split("").reverse().join(""));for(var s=i.ToNumberArray(this.parent.attribute("dx").value),a=0;a<o.length;a++)r+=(this.getGlyph(e,o,a).horizAdvX||e.horizAdvX)*n/e.fontFace.unitsPerEm,void 0===s[a]||isNaN(s[a])||(r+=s[a]);return r}var l=i.compressSpaces(this.getText());if(!t.measureText)return 10*l.length;t.save(),this.setContext(t,!0);var c=t.measureText(l).width;return t.restore(),c},this.getBoundingBox=function(t){var e=this.parent.style("font-size").numValueOrDefault(i.Font.Parse(i.ctx.font).fontSize);return new i.BoundingBox(this.x,this.y-e,this.x+this.measureText(t),this.y)}},i.Element.TextElementBase.prototype=new i.Element.RenderedElementBase,i.Element.tspan=function(t){this.captureTextNodes=!0,this.base=i.Element.TextElementBase,this.base(t),this.text=i.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return 0<this.children.length?"":this.text}},i.Element.tspan.prototype=new i.Element.TextElementBase,i.Element.tref=function(t){this.base=i.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},i.Element.tref.prototype=new i.Element.TextElementBase,i.Element.a=function(t){this.base=i.Element.TextElementBase,this.base(t),this.hasText=0<t.childNodes.length;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value||t.childNodes[0].data:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new i.Property("fontSize",i.Font.Parse(i.ctx.font).fontSize);i.Mouse.checkBoundingBox(this,new i.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(0<this.children.length){var n=new i.Element.g;n.children=this.children,n.parent=this,n.render(t)}},this.onclick=function(){o.open(this.getHrefAttribute().value)},this.onmousemove=function(){i.ctx.canvas.style.cursor="pointer"}},i.Element.a.prototype=new i.Element.TextElementBase,i.Element.textPath=function(t){this.base=i.Element.TextElementBase,this.base(t);var e=this.getHrefAttribute().getDefinition();this.text=i.compressSpaces(t.value||t.text||t.textContent||""),this.renderChildren=function(t){this.setTextData(t),t.save();var e=this.parent.style("text-decoration").value,n=this.fontSize(),r=this.glyphInfo,o=t.fillStyle;"underline"===e&&t.beginPath();for(var s=0;s<r.length;s++){var a=r[s].p0,l=r[s].p1,c=r[s].text;t.save(),t.translate(a.x,a.y),t.rotate(r[s].rotation),""!=t.fillStyle&&t.fillText(i.compressSpaces(c),0,0),""!=t.strokeStyle&&t.strokeText(i.compressSpaces(c),0,0),t.restore(),"underline"===e&&(0===s&&t.moveTo(a.x,a.y+n/8),t.lineTo(l.x,l.y+n/5))}"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=o,t.stroke(),t.closePath()),t.restore()},this.path=function(t){var e=this.dataArray;null!=t&&t.beginPath();for(var n=0;n<e.length;n++){var i=e[n].command,r=e[n].points;switch(i){case"L":null!=t&&t.lineTo(r[0],r[1]);break;case"M":null!=t&&t.moveTo(r[0],r[1]);break;case"C":null!=t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":null!=t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=l<a?a:l,p=l<a?1:a/l,m=l<a?l/a:1;null!=t&&(t.translate(o,s),t.rotate(h),t.scale(p,m),t.arc(0,0,f,c,c+u,1-d),t.scale(1/p,1/m),t.rotate(-h),t.translate(-o,-s));break;case"z":null!=t&&t.closePath()}}},this.getText=function(){return this.text},this.fontSize=function(){return this.parent.style("font-size").numValueOrDefault(i.Font.Parse(i.ctx.font).fontSize)},this.measureText=function(t,e){var n=this.parent.style("font-family").getDefinition();if(e=e||this.getText(),null!=n){var r=this.fontSize(),o=0;n.isRTL&&(e=e.split("").reverse().join(""));for(var s=i.ToNumberArray(this.parent.attribute("dx").value),a=0;a<e.length;a++)o+=(this.getGlyph(n,e,a).horizAdvX||n.horizAdvX)*r/n.fontFace.unitsPerEm,void 0===s[a]||isNaN(s[a])||(o+=s[a]);return o}var l=i.compressSpaces(e);if(!t.measureText)return 10*l.length;t.save(),this.setContext(t);var c=t.measureText(l).width;return t.restore(),c},this.setTextData=function(t){if(!this.hasOwnProperty("glyphInfo")){var e=this,n=this.getText().split(""),r=this.getText().split(" ").length-1,o=i.ToNumberArray(this.parent.attribute("dx").valueOrDefault("0")),s=0,a=this.parent.style("text-anchor").valueOrDefault("start"),l=this.style("letter-spacing"),c=this.parent.style("letter-spacing");l.hasValue()&&"inherit"!==l.getValue()?l.hasValue()&&"initial"!==l.getValue()&&"unset"!==l.getValue()&&(s=l.toPixels()):s=c.toPixels(),this.letterSpacingCache=[];for(var u=0;u<this.getText().length;u++)this.letterSpacingCache.push(void 0!==o[u]?o[u]:s);var h=this.letterSpacingCache.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(t),this.textHeight=this.fontSize();var d=Math.max(this.textWidth+h,0);this.glyphInfo=[];var f=this.getPathLength(),p=this.style("startOffset").numValueOrDefault(0)*f,m=0;"middle"!==a&&"center"!==a||(m=-d/2),"end"!==a&&"right"!==a||(m=-d),m+=p;var g=function(n,i){var o,s=e.measureText(t,n);" "===n&&"justify"===a&&d<f&&(s+=(f-d)/r),-1<i&&(m+=(o=(o=i)||0,e.letterSpacingCache[o]||0));var l=e.textHeight/20,c={p0:e.getEquidistantPointOnPath(m,l),p1:e.getEquidistantPointOnPath(m+s,l)};return m+=s,c};for(u=0;u<n.length;u++){var v=g(n[u],u);if(void 0!==v.p0&&void 0!==v.p1){var y=e.getLineLength(v.p0.x,v.p0.y,v.p1.x,v.p1.y),b=e.getPointOnLine(0+y/2,v.p0.x,v.p0.y,v.p1.x,v.p1.y),_=Math.atan2(v.p1.y-v.p0.y,v.p1.x-v.p0.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:n[u],rotation:_,p0:v.p0,p1:v.p1})}}}},this.parsePathData=function(t){if(this.pathLength=void 0,!t)return[];var e=[],n=t.PathParser;for(n.reset();!n.isEnd();){var r=[],o=null,s=n.current?n.current.x:0,a=n.current?n.current.y:0;n.nextCommand();var l=n.command.toUpperCase();switch(n.command){case"M":case"m":var c=n.getAsCurrentPoint();for(r.push(c.x,c.y),n.start=n.current;!n.isCommandOrEnd();)c=n.getAsCurrentPoint(),r.push(c.x,c.y),o="L";break;case"L":case"l":for(;!n.isCommandOrEnd();)c=n.getAsCurrentPoint(),r.push(c.x,c.y);o="L";break;case"H":case"h":for(;!n.isCommandOrEnd();){var u=new i.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);r.push(u.x,u.y),n.current=u}o="L";break;case"V":case"v":for(;!n.isCommandOrEnd();)u=new i.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar()),r.push(u.x,u.y),n.current=u;o="L";break;case"C":case"c":for(;!n.isCommandOrEnd();){var h=n.getPoint(),d=n.getAsControlPoint(),f=n.getAsCurrentPoint();r.push(h.x,h.y,d.x,d.y,f.x,f.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();)h=n.getReflectedControlPoint(),d=n.getAsControlPoint(),f=n.getAsCurrentPoint(),r.push(h.x,h.y,d.x,d.y,f.x,f.y);o="C";break;case"Q":case"q":for(;!n.isCommandOrEnd();)d=n.getAsControlPoint(),f=n.getAsCurrentPoint(),r.push(d.x,d.y,f.x,f.y);break;case"T":case"t":for(;!n.isCommandOrEnd();)d=n.getReflectedControlPoint(),n.control=d,f=n.getAsCurrentPoint(),r.push(d.x,d.y,f.x,f.y);o="Q";break;case"A":case"a":for(;!n.isCommandOrEnd();){var p=n.current,m=n.getScalar(),g=n.getScalar(),v=n.getScalar()*(Math.PI/180),y=n.getScalar(),b=n.getScalar(),_=(f=n.getAsCurrentPoint(),new i.Point(Math.cos(v)*(p.x-f.x)/2+Math.sin(v)*(p.y-f.y)/2,-Math.sin(v)*(p.x-f.x)/2+Math.cos(v)*(p.y-f.y)/2)),w=Math.pow(_.x,2)/Math.pow(m,2)+Math.pow(_.y,2)/Math.pow(g,2);1<w&&(m*=Math.sqrt(w),g*=Math.sqrt(w));var S=(y==b?-1:1)*Math.sqrt((Math.pow(m,2)*Math.pow(g,2)-Math.pow(m,2)*Math.pow(_.y,2)-Math.pow(g,2)*Math.pow(_.x,2))/(Math.pow(m,2)*Math.pow(_.y,2)+Math.pow(g,2)*Math.pow(_.x,2)));isNaN(S)&&(S=0);var x=new i.Point(S*m*_.y/g,S*-g*_.x/m),C=new i.Point((p.x+f.x)/2+Math.cos(v)*x.x-Math.sin(v)*x.y,(p.y+f.y)/2+Math.sin(v)*x.x+Math.cos(v)*x.y),k=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},T=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(k(t)*k(e))},M=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(T(t,e))},E=M([1,0],[(_.x-x.x)/m,(_.y-x.y)/g]),A=[(_.x-x.x)/m,(_.y-x.y)/g],I=[(-_.x-x.x)/m,(-_.y-x.y)/g],$=M(A,I);T(A,I)<=-1&&($=Math.PI),1<=T(A,I)&&($=0),0===b&&0<$&&($-=2*Math.PI),1===b&&$<0&&($+=2*Math.PI),r=[C.x,C.y,m,g,E,$,v,b]}break;case"Z":case"z":n.current=n.start}"Z"!==l?e.push({command:o||l,points:r,start:{x:s,y:a},pathLength:this.calcLength(s,a,o||l,r)}):e.push({command:"z",points:[],start:void 0,pathLength:0})}return e},this.getPathLength=function(){if(void 0===this.pathLength||null===this.pathLength||isNaN(this.pathLength))for(var t=this.pathLength=0;t<this.dataArray.length;t++)0<this.dataArray[t].pathLength&&(this.pathLength+=this.dataArray[t].pathLength);return this.pathLength},this.getPointOnPath=function(t){var e=0,n=this.getPathLength(),i=void 0;if(!(t<-5e-5||n<t-5e-5))for(var r=0;r<this.dataArray.length;r++){var o=this.dataArray[r];if(!o||!(o.pathLength<5e-5||e+o.pathLength+5e-5<t)){var s=t-e,a=void 0;switch(o.command){case"L":i=this.getPointOnLine(s,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case"A":var l=o.points[4],c=o.points[5],u=o.points[4]+c;if(a=l+s/o.pathLength*c,c<0&&a<u||0<=c&&u<a)break;i=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],a,o.points[6]);break;case"C":1<(a=s/o.pathLength)&&(a=1),i=this.getPointOnCubicBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case"Q":1<(a=s/o.pathLength)&&(a=1),i=this.getPointOnQuadraticBezier(a,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3])}if(void 0!==i&&i!=={})return i;break}e+=o.pathLength}},this.buildEquidistantCache=function(t,e){var n=this.getPathLength();if(e=e||.25,t=t||n/100,this.equidistantCache=this.equidistantCache||{},!this.equidistantCache.hasOwnProperty("points")||this.equidistantCache.step!=t||this.equidistantCache.precision!=e){this.equidistantCache={step:t,precision:e,points:[]};for(var i=0,r=0;r<=n;r+=e){var o=this.getPointOnPath(r),s=this.getPointOnPath(r+e);void 0!==o&&void 0!==s&&t<=(i+=this.getLineLength(o.x,o.y,s.x,s.y))&&(this.equidistantCache.points.push({x:o.x,y:o.y,distance:r}),i-=t)}}},this.getEquidistantPointOnPath=function(t,e,n){if(this.buildEquidistantCache(e,n),!(t<0||5e-5<t-this.getPathLength())){var i=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[i]||void 0}},this.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},this.getPointOnLine=function(t,e,n,i,r,o,s){void 0===o&&(o=e),void 0===s&&(s=n);var a=(r-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+a*a));i<e&&(l*=-1);var c,u=a*l;if(i===e)c={x:o,y:s+u};else if((s-n)/(o-e+1e-8)===a)c={x:o+l,y:s+u};else{var h,d,f=this.getLineLength(e,n,i,r);if(f<1e-8)return;var p=(o-e)*(i-e)+(s-n)*(r-n);h=e+(p/=f*f)*(i-e),d=n+p*(r-n);var m=this.getLineLength(o,s,h,d),g=Math.sqrt(t*t-m*m);l=Math.sqrt(g*g/(1+a*a)),i<e&&(l*=-1),c={x:h+l,y:d+(u=a*l)}}return c},this.getPointOnCubicBezier=function(t,e,n,i,r,o,s,a,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:a*c(t)+o*u(t)+i*h(t)+e*d(t),y:l*c(t)+s*u(t)+r*h(t)+n*d(t)}},this.getPointOnQuadraticBezier=function(t,e,n,i,r,o,s){function a(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:o*a(t)+i*l(t)+e*c(t),y:s*a(t)+r*l(t)+n*c(t)}},this.getPointOnEllipticalArc=function(t,e,n,i,r,o){var s=Math.cos(o),a=Math.sin(o),l=n*Math.cos(r),c=i*Math.sin(r);return{x:t+(l*s-c*a),y:e+(l*a+c*s)}},this.calcLength=function(t,e,n,i){var r,o,s,a;switch(n){case"L":return this.getLineLength(t,e,i[0],i[1]);case"C":for(r=0,o=this.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),a=.01;a<=1;a+=.01)s=this.getPointOnCubicBezier(a,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"Q":for(r=0,o=this.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),a=.01;a<=1;a+=.01)s=this.getPointOnQuadraticBezier(a,t,e,i[0],i[1],i[2],i[3]),r+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"A":r=0;var l=i[4],c=i[5],u=i[4]+c,h=Math.PI/180;if(Math.abs(l-u)<h&&(h=Math.abs(l-u)),o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),c<0)for(a=l-h;u<a;a-=h)s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(a=l+h;a<u;a+=h)s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),r+this.getLineLength(o.x,o.y,s.x,s.y)}return 0},this.dataArray=this.parsePathData(e)},i.Element.textPath.prototype=new i.Element.TextElementBase,i.Element.image=function(t){this.base=i.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var n=e.match(/\.svg$/);if(i.Images.push(this),this.loaded=!1,n)this.img=i.ajax(e),this.loaded=!0;else{this.img=s.createElement("img"),1==i.opts.useCORS&&(this.img.crossOrigin="Anonymous");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){i.log('ERROR: image "'+e+'" not found'),r.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),o=this.attribute("y").toPixels("y"),s=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");0!=s&&0!=a&&(t.save(),n?t.drawSvg(this.img,e,o,s,a):(t.translate(e,o),i.AspectRatio(t,this.attribute("preserveAspectRatio").value,s,this.img.width,a,this.img.height,0,0),r.loaded&&(void 0===this.img.complete||this.img.complete)&&t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new i.BoundingBox(t,e,t+n,e+r)}}},i.Element.image.prototype=new i.Element.RenderedElementBase,i.Element.g=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(t){for(var e=new i.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox(t));return e}},i.Element.g.prototype=new i.Element.RenderedElementBase,i.Element.symbol=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.render=function(){}},i.Element.symbol.prototype=new i.Element.RenderedElementBase,i.ParseExternalUrl=function(t){var e=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return e[2]||e[3]||e[4]},i.Element.style=function(t){this.base=i.Element.ElementBase,this.base(t);for(var e="",n=0;n<t.childNodes.length;n++)e+=t.childNodes[n].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");var r=(e=i.compressSpaces(e)).split("}");for(n=0;n<r.length;n++)if(""!=i.trim(r[n]))for(var o=r[n].split("{"),s=o[0].split(","),a=o[1].split(";"),l=0;l<s.length;l++){var c=i.trim(s[l]);if(""!=c){for(var u=i.Styles[c]||{},h=0;h<a.length;h++){var d=a[h].indexOf(":"),f=a[h].substr(0,d),p=a[h].substr(d+1,a[h].length-d);null!=f&&null!=p&&(u[i.trim(f)]=new i.Property(i.trim(f),i.trim(p)))}if(i.Styles[c]=u,i.StylesSpecificity[c]=v(c),"@font-face"==c)for(var m=u["font-family"].value.replace(/"/g,""),g=u.src.value.split(","),y=0;y<g.length;y++)if(0<g[y].indexOf('format("svg")')){var b=i.ParseExternalUrl(g[y]);if(b)for(var _=i.parseXml(i.ajax(b)).getElementsByTagName("font"),w=0;w<_.length;w++){var S=i.CreateElement(_[w]);i.Definitions[m]=S}}}}},i.Element.style.prototype=new i.Element.ElementBase,i.Element.use=function(t){this.base=i.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.elementTransform=function(){if(null!=e&&e.style("transform",!1,!0).hasValue())return new i.Transform(e.style("transform",!1,!0).value)},this.getBoundingBox=function(t){if(null!=e)return e.getBoundingBox(t)},this.renderChildren=function(t){if(null!=e){var n=e;"symbol"==e.type&&((n=new i.Element.svg).type="svg",n.attributes.viewBox=new i.Property("viewBox",e.attribute("viewBox").value),n.attributes.preserveAspectRatio=new i.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),n.attributes.overflow=new i.Property("overflow",e.attribute("overflow").value),n.children=e.children),"svg"==n.type&&(this.attribute("width").hasValue()&&(n.attributes.width=new i.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(n.attributes.height=new i.Property("height",this.attribute("height").value)));var r=n.parent;n.parent=null,n.render(t),n.parent=r}}},i.Element.use.prototype=new i.Element.RenderedElementBase,i.Element.mask=function(t){this.base=i.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==o&&0==s){for(var l=new i.BoundingBox,c=0;c<this.children.length;c++)l.addBoundingBox(this.children[c].getBoundingBox(t));n=Math.floor(l.x1),r=Math.floor(l.y1),o=Math.floor(l.width()),s=Math.floor(l.height())}var u=e.style("mask").value;e.style("mask").value="";var h=a(n+o,r+s),d=h.getContext("2d");i.SetDefaults(d),this.renderChildren(d),new i.Element.feColorMatrix({nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(d,0,0,n+o,r+s);var f=a(n+o,r+s),p=f.getContext("2d");i.SetDefaults(p),e.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=d.createPattern(h,"no-repeat"),p.fillRect(0,0,n+o,r+s),t.fillStyle=p.createPattern(f,"no-repeat"),t.fillRect(0,0,n+o,r+s),e.style("mask").value=u},this.render=function(){}},i.Element.mask.prototype=new i.Element.ElementBase,i.Element.clipPath=function(t){this.base=i.Element.ElementBase,this.base(t),this.apply=function(t){var e="undefined"!=typeof CanvasRenderingContext2D,n=t.beginPath,r=t.closePath;e&&(CanvasRenderingContext2D.prototype.beginPath=function(){},CanvasRenderingContext2D.prototype.closePath=function(){}),n.call(t);for(var o=0;o<this.children.length;o++){var s=this.children[o];if(void 0!==s.path){var a=void 0!==s.elementTransform&&s.elementTransform();!a&&s.style("transform",!1,!0).hasValue()&&(a=new i.Transform(s.style("transform",!1,!0).value)),a&&a.apply(t),s.path(t),e&&(CanvasRenderingContext2D.prototype.closePath=r),a&&a.unapply(t)}}r.call(t),t.clip(),e&&(CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=r)},this.render=function(){}},i.Element.clipPath.prototype=new i.Element.ElementBase,i.Element.filter=function(t){this.base=i.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(t),r=Math.floor(n.x1),o=Math.floor(n.y1),s=Math.floor(n.width()),l=Math.floor(n.height()),c=e.style("filter").value;e.style("filter").value="";for(var u=0,h=0,d=0;d<this.children.length;d++){var f=this.children[d].extraFilterDistance||0;u=Math.max(u,f),h=Math.max(h,f)}var p=a(s+2*u,l+2*h),m=p.getContext("2d");for(i.SetDefaults(m),m.translate(-r+u,-o+h),e.render(m),d=0;d<this.children.length;d++)"function"==typeof this.children[d].apply&&this.children[d].apply(m,0,0,s+2*u,l+2*h);t.drawImage(p,0,0,s+2*u,l+2*h,r-u,o-h,s+2*u,l+2*h),e.style("filter",!0).value=c},this.render=function(){}},i.Element.filter.prototype=new i.Element.ElementBase,i.Element.feDropShadow=function(t){this.base=i.Element.ElementBase,this.base(t),this.addStylesFromStyleDefinition(),this.apply=function(){}},i.Element.feDropShadow.prototype=new i.Element.ElementBase,i.Element.feMorphology=function(t){this.base=i.Element.ElementBase,this.base(t),this.apply=function(){}},i.Element.feMorphology.prototype=new i.Element.ElementBase,i.Element.feComposite=function(t){this.base=i.Element.ElementBase,this.base(t),this.apply=function(){}},i.Element.feComposite.prototype=new i.Element.ElementBase,i.Element.feColorMatrix=function(t){this.base=i.Element.ElementBase,this.base(t);var e=i.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var n=e[0];e=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var r=e[0]*Math.PI/180,o=function(t,e,n){return t+Math.cos(r)*e+Math.sin(r)*n};e=[o(.213,.787,-.213),o(.715,-.715,-.715),o(.072,-.072,.928),0,0,o(.213,-.213,.143),o(.715,.285,.14),o(.072,-.072,-.283),0,0,o(.213,-.213,-.787),o(.715,-.715,.715),o(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}function s(t,e,n,i,r,o){return t[n*i*4+4*e+o]}function a(t,e,n,i,r,o,s){t[n*i*4+4*e+o]=s}function l(t,n){var i=e[t];return i*(i<0?n-255:n)}var c=this.attribute("includeOpacity").hasValue();this.apply=function(t,e,n,i,r){var o=t.getImageData(0,0,i,r);for(n=0;n<r;n++)for(e=0;e<i;e++){var u=s(o.data,e,n,i,0,0),h=s(o.data,e,n,i,0,1),d=s(o.data,e,n,i,0,2),f=s(o.data,e,n,i,0,3),p=l(0,u)+l(1,h)+l(2,d)+l(3,f)+l(4,1),m=l(5,u)+l(6,h)+l(7,d)+l(8,f)+l(9,1),g=l(10,u)+l(11,h)+l(12,d)+l(13,f)+l(14,1),v=l(15,u)+l(16,h)+l(17,d)+l(18,f)+l(19,1);c&&(p=m=g=0,v*=f/255),a(o.data,e,n,i,0,0,p),a(o.data,e,n,i,0,1,m),a(o.data,e,n,i,0,2,g),a(o.data,e,n,i,0,3,v)}t.clearRect(0,0,i,r),t.putImageData(o,0,0)}},i.Element.feColorMatrix.prototype=new i.Element.ElementBase,i.Element.feGaussianBlur=function(t){this.base=i.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,e,r,o,a){n&&void 0!==n.canvasRGBA?(t.canvas.id=i.UniqueId(),t.canvas.style.display="none",s.body.appendChild(t.canvas),n.canvasRGBA(t.canvas,e,r,o,a,this.blurRadius),s.body.removeChild(t.canvas)):i.log("ERROR: StackBlur.js must be included for blur to work")}},i.Element.feGaussianBlur.prototype=new i.Element.ElementBase,i.Element.title=function(){},i.Element.title.prototype=new i.Element.ElementBase,i.Element.desc=function(){},i.Element.desc.prototype=new i.Element.ElementBase,i.Element.MISSING=function(t){i.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},i.Element.MISSING.prototype=new i.Element.ElementBase,i.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var n=null;return(n=void 0!==i.Element[e]?new i.Element[e](t):new i.Element.MISSING(t)).type=t.nodeName,n},i.load=function(t,e){i.loadXml(t,i.ajax(e))},i.loadXml=function(t,e){i.loadXmlDoc(t,i.parseXml(e))},i.loadXmlDoc=function(t,e){i.init(t);var n=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return o.scrollX&&(e.x+=o.scrollX),o.scrollY&&(e.y+=o.scrollY),e};1!=i.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=n(new i.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));i.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=n(new i.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));i.Mouse.onmousemove(e.x,e.y)});var r=i.CreateElement(e.documentElement);r.root=!0,r.addStylesFromStyleDefinition();var s=!0,a=function(){i.ViewPort.Clear(),t.canvas.parentNode?i.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight):i.ViewPort.SetCurrent(800,600),1!=i.opts.ignoreDimensions&&(s||null==i.opts.scaleWidth&&null==i.opts.scaleHeight)&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style&&(t.canvas.style.width=t.canvas.width+"px")),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style&&(t.canvas.style.height=t.canvas.height+"px")));var n=t.canvas.clientWidth||t.canvas.width,o=t.canvas.clientHeight||t.canvas.height;if(1==i.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(n=r.style("width").toPixels("x"),o=r.style("height").toPixels("y")),i.ViewPort.SetCurrent(n,o),null!=i.opts.offsetX&&(r.attribute("x",!0).value=i.opts.offsetX),null!=i.opts.offsetY&&(r.attribute("y",!0).value=i.opts.offsetY),null!=i.opts.scaleWidth||null!=i.opts.scaleHeight){var a=null,l=null,c=i.ToNumberArray(r.attribute("viewBox").value);null!=i.opts.scaleWidth&&(r.attribute("width").hasValue()?a=r.attribute("width").toPixels("x")/i.opts.scaleWidth:isNaN(c[2])||(a=c[2]/i.opts.scaleWidth)),null!=i.opts.scaleHeight&&(r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/i.opts.scaleHeight:isNaN(c[3])||(l=c[3]/i.opts.scaleHeight)),null==a&&(a=l),null==l&&(l=a),r.attribute("width",!0).value=i.opts.scaleWidth,r.attribute("height",!0).value=i.opts.scaleHeight,r.style("transform",!0,!0).value+=" scale("+1/a+","+1/l+")"}1!=i.opts.ignoreClear&&t.clearRect(0,0,n,o),r.render(t),s&&(s=!1,"function"==typeof i.opts.renderCallback&&i.opts.renderCallback(e))},l=!0;i.ImagesLoaded()&&(l=!1,a()),i.intervalID=setInterval(function(){var t=!1;if(l&&i.ImagesLoaded()&&(t=!(l=!1)),1!=i.opts.ignoreMouse&&(t=t||i.Mouse.hasEvents()),1!=i.opts.ignoreAnimation)for(var e=0;e<i.Animations.length;e++){var n=i.Animations[e].update(1e3/i.FRAMERATE);t=t||n}"function"==typeof i.opts.forceRedraw&&1==i.opts.forceRedraw()&&(t=!0),t&&(a(),i.Mouse.runEvents())},1e3/i.FRAMERATE)},i.stop=function(){i.intervalID&&clearInterval(i.intervalID)},i.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){if(e)for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){i.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],n=this.eventElements[t];n;)e.run(n),n=n.parent;this.events=[],this.eventElements=[]}},i}"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r,o){var s={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r};for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);c(this.canvas,t,s)}),c._build=y,r.exports=c}(r={exports:{}}),r.exports}(n(423),n(424))}).call(this,n(1),n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function e(t,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$http=n,this.$injector=i,this.$q=r,this.$rootScope=o,this.ConfigService=s,this.UtilService=a,this.project=null,this.transitions=[],this.applicationNodes=[],this.inactiveStepNodes=[],this.inactiveGroupNodes=[],this.groupNodes=[],this.idToNode={},this.idToElement={},this.metadata={},this.activeConstraints=[],this.rootNode=null,this.idToPosition={},this.idToOrder={},this.nodeCount=0,this.componentServices={},this.nodeIdToNumber={},this.nodeIdToIsInBranchPath={},this.nodeIdToBranchPathLetter={},this.achievements=[],this.isNodeAffectedByConstraintResult={},this.flattenedProjectAsNodeIds=null,this.$translate=this.$filter("translate"),this.additionalProcessingFunctionsMap={},this.filters=[{name:"all",label:"All"}]}return r(e,[{key:"setProject",value:function(t){this.project=t,this.parseProject()}},{key:"clearProjectFields",value:function(){this.transitions=[],this.applicationNodes=[],this.inactiveStepNodes=[],this.inactiveGroupNodes=[],this.groupNodes=[],this.idToNode={},this.idToElement={},this.metadata={},this.activeConstraints=[],this.rootNode=null,this.idToPosition={},this.idToOrder={},this.nodeCount=0,this.nodeIdToIsInBranchPath={},this.achievements=[],this.clearBranchesCache()}},{key:"getStyle",value:function(){return this.project.style}},{key:"getFilters",value:function(){return this.filters}},{key:"getProjectTitle",value:function(){var t=this.getProjectMetadata().title;return t||"A WISE Project (No name)"}},{key:"setProjectTitle",value:function(t){this.getProjectMetadata().title=t}},{key:"getProjectMetadata",value:function(){return this.metadata?this.metadata:{}}},{key:"getNodes",value:function(){return this.project.nodes}},{key:"getChildNodeIdsById",value:function(t){var e=this.getNodeById(t);return e.ids?e.ids:[]}},{key:"getGroupNodes",value:function(){return this.groupNodes}},{key:"isNode",value:function(t){var e=this.getNodes(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.id===t)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return!1}},{key:"addNode",value:function(t){var e=this.project.nodes,n=!1;if(null!=t&&null!=e)for(var i=0;i<e.length;i++){e[i].id===t.id&&(e.splice(i,1,t),n=!0)}n||e.push(t)}},{key:"addApplicationNode",value:function(t){var e=this.applicationNodes;null!=t&&null!=e&&e.push(t)}},{key:"addGroupNode",value:function(t){var e=this.groupNodes;null!=t&&null!=e&&e.push(t),this.$rootScope.$broadcast("groupsChanged")}},{key:"addNodeToGroupNode",value:function(t,e){if(null!=t&&null!=e){var n=this.getNodeById(t);if(null!=n){var i=n.ids;null!=i&&-1===i.indexOf(e)&&i.push(e)}}}},{key:"isGroupNode",value:function(t){var e=this.getNodeById(t);return null!=e&&"group"==e.type}},{key:"isApplicationNode",value:function(t){var e=this.getNodeById(t);return null!=e&&"group"!==e.type}},{key:"getGroups",value:function(){return this.groupNodes}},{key:"getInactiveGroupNodes",value:function(){return this.inactiveGroupNodes}},{key:"getInactiveStepNodes",value:function(){return this.inactiveStepNodes}},{key:"loadNodes",value:function(t){if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s){var a=s.id,l=s.type,c=(s.content,s.constraints);this.setIdToNode(a,s),this.setIdToElement(a,s),this.addNode(s),"group"===l?this.addGroupNode(s):this.addApplicationNode(s);var u=s.groupId;if(null!=u&&this.addNodeToGroupNode(u,a),null!=c)if(1==this.ConfigService.isPreview()&&!1===this.ConfigService.getConfigParam("constraints"));else{var h=!0,d=!1,f=void 0;try{for(var p,m=c[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;this.activeConstraints.push(g)}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"loadPlanningNodes",value:function(t){if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s){var a=s.id;this.setIdToNode(a,s),this.setIdToElement(a,s)}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"parseProject",value:function(){var t=this.project;if(null!=t){this.clearProjectFields(),t.metadata&&(this.metadata=t.metadata);var e=t.nodes;this.loadNodes(e);var n=t.planningNodes;this.loadPlanningNodes(n);var i=t.inactiveNodes;this.loadInactiveNodes(i);var r=t.constraints;if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=u.id;u.active=!0,this.setIdToElement(h,u)}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}this.rootNode=this.getRootNode(e[0].id),this.calculateNodeOrderOfProject();for(var d=e.length,f=this.getBranches(),p=[],m=void 0,g=void 0;d--;)(m=e[d].id)===this.rootNode.id?this.setIdToPosition(m,"0"):this.isNodeIdInABranch(f,m)?p.push(m):(g=this.getPositionById(m),this.setIdToPosition(m,g));for(var v=p.length;v--;)m=p[v],g=this.getBranchNodePositionById(m),this.setIdToPosition(m,g);this.calculateNodeNumbers(),null!=this.project.projectAchievements&&(this.achievements=this.project.projectAchievements)}this.$rootScope.$broadcast("projectChanged")}},{key:"calculateNodeOrderOfProject",value:function(){this.calculateNodeOrder(this.rootNode)}},{key:"calculateNodeOrder",value:function(t){if(this.idToOrder[t.id]={order:this.nodeCount},this.nodeCount++,this.isGroupNode(t.id)){var e=!0,n=!1,i=void 0;try{for(var r,o=t.ids[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,a=this.getNodeById(s);this.calculateNodeOrder(a)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"getNodeOrderOfProject",value:function(t){var e=this.getNodeById(t.startGroupId,t),n=[],i=this.getNodeOrderOfProjectHelper(t,e,{nodeCount:0},"",n);return delete i.nodeCount,{idToOrder:i,nodes:n}}},{key:"getNodeOrderOfProjectHelper",value:function(t,e,n,i,r){var o={order:n.nodeCount,node:e,stepNumber:i};if(n[e.id]=o,n.nodeCount++,r.push(o),"group"==e.type)for(var s=e.ids,a=0;a<s.length;a++){var l=s[a],c=this.getNodeById(l,t),u=i;""!=u&&(u+="."),u+=a+1,this.getNodeOrderOfProjectHelper(t,c,n,u,r)}return n}},{key:"getPositionById",value:function(t){for(var e=0;e<this.rootNode.ids.length;e++){var n=this.getNodeById(this.rootNode.ids[e]),i=this.getPathToNode(n,e+1,t);if(null!=i&&null!=i)return i}return null}},{key:"getOrderById",value:function(t){return this.idToOrder[t]?this.idToOrder[t].order:null}},{key:"getIdByOrder",value:function(t){var e=null;for(var n in this.idToOrder)if(this.idToOrder[n].order===t){e=this.isGroupNode(n)&&t>1?this.getIdByOrder(t-1):n;break}return e}},{key:"getBranchNodePositionById",value:function(t){for(var e,n=this.getBranches(),i=n.length;i--;)for(var r=n[i],o=r.branchPaths,s=0;s<o.length;s++){var a=o[s].indexOf(t);if(a>-1){var l=r.branchStartPoint;return this.idToPosition[l]+" "+((e=s)>-1&&e<26?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][e]:e)+(a+1)}}return null}},{key:"getPathToNode",value:function(t,e,n){if(t.id===n)return e+"";if("group"===t.type){var i=0,r=this.getBranches(),o=!0,s=!1,a=void 0;try{for(var l,c=t.ids[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(this.isNodeIdInABranch(r,u))this.getBranchNodePositionById(u);else{++i;var h=this.getPathToNode(this.getNodeById(u),e+"."+i,n);if(h)return h}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}}},{key:"setIdToPosition",value:function(t,e){null!=t&&(this.idToPosition[t]=e)}},{key:"getNodePositionById",value:function(t){return null!=t?this.nodeIdToNumber[t]:null}},{key:"getNodeIdByOrder",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,s=Object.entries(this.idToOrder)[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=i(o.value,2),l=a[0];if(a[1].order===t)return l}}catch(t){n=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw r}}return null}},{key:"getNodeOrderById",value:function(t){return this.idToOrder[t]?this.idToOrder[t].order:null}},{key:"setIdToNode",value:function(t,e){this.idToNode[t]=e}},{key:"setIdToElement",value:function(t,e){this.idToElement[t]=e}},{key:"injectAssetPaths",value:function(t){if(null!=t)if("object"===(void 0===t?"undefined":n(t))){var e=JSON.stringify(t);null!=e&&(e=this.replaceAssetPaths(e),t=JSON.parse(e))}else"string"==typeof t&&(t=this.replaceAssetPaths(t));return t}},{key:"replaceAssetPaths",value:function(t){if(null!=t){var e=this.ConfigService.getConfigParam("projectBaseURL");t=t.replace(new RegExp("('|\"|\\\\'|\\\\\")[^:][^/]?[^/]?[a-zA-Z0-9@%&;\\._\\/\\s\\-']*[.](png|jpe?g|pdf|gif|mov|mp4|mp3|wav|swf|css|txt|json|xlsx?|doc|html.*?|js).*?('|\"|\\\\'|\\\\\")","gi"),function(t){var n="",i="";return t.length>2&&"\\"==t.substr(0,1)?(i=t.substr(2,t.length-4),n=t.substr(0,2)):(i=t.substr(1,t.length-2),n=t.substr(0,1)),null!=i&&i.length>0&&"/"==i.charAt(0)?n+i+n:n+e+"assets/"+i+n})}return t}},{key:"injectClickToSnipImage",value:function(t){if(null!=t)if("object"===(void 0===t?"undefined":n(t))){var e=JSON.stringify(t);null!=e&&(e=this.injectClickToSnipImageIntoContentString(e),t=JSON.parse(e))}else"string"==typeof t&&(t=this.injectClickToSnipImageIntoContentString(t));return t}},{key:"injectClickToSnipImageIntoContentString",value:function(t){if(null!=t){var e=new RegExp("<img.*?src=\\\\?['\"](.*?)\\\\?['\"].*?>","gi");t=t.replace(e,function(t,e){return t.replace("img","img ng-click=\\\"$emit('snipImage', $event)\\\"")})}return t}},{key:"getNodeById",value:function(t,e){if(null==e){if(this.idToNode[t])return this.idToNode[t]}else{var n=!0,i=!1,r=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&a.id==t)return a}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}var l=!0,c=!1,u=void 0;try{for(var h,d=e.inactiveNodes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;if(null!=f&&f.id==t)return f}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}return null}},{key:"getNodeTitleByNodeId",value:function(t){var e=this.getNodeById(t);return null!=e?e.title:null}},{key:"getNodePositionAndTitleByNodeId",value:function(t){var e=this.getNodeById(t);if(null!=e){var n=this.getNodePositionById(t);return null!=n?n+": "+e.title:e.title}return null}},{key:"getNodeIconByNodeId",value:function(e){var n=this.getNodeById(e),i=null;if(null!=n){i={color:"rgba(0,0,0,0.54)",type:"font",fontSet:"material-icons",fontName:"group"===n.type?"explore":"school",imgSrc:"",imgAlt:"node icon"};var r=n.icons;if(r&&r.default){var o=r.default;i=t.extend(!0,i,o)}i.imgSrc||(i.type="font")}return i}},{key:"getParentGroup",value:function(t){if(null!=t){var e=this.getNodeById(t);if(null!=e){var n=this.getGroupNodes(),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(this.isNodeDirectChildOfGroup(e,l))return l}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}var c=this.getInactiveGroupNodes(),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(this.isNodeDirectChildOfGroup(e,m))return m}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}return null}},{key:"getParentGroupId",value:function(t){if(null!=t){var e=this.getParentGroup(t);if(null!=e)return e.id}return null}},{key:"getNodeDepth",value:function(t,e){if(null!=t){var n="number"==typeof e?e:0,i=this.getParentGroup(t);return i&&(n=this.getNodeDepth(i.id,n+1)),n}return null}},{key:"getRootNode",value:function(t){var e=this.getParentGroup(t);return null==e?this.getNodeById(t):this.getRootNode(e.id)}},{key:"isNodeDirectChildOfGroup",value:function(t,e){if(null!=t&&null!=e){var n=t.id,i=e.ids;if(null!=i&&-1!=i.indexOf(n))return!0}return!1}},{key:"isNodeDescendentOfGroup",value:function(t,e){if(null!=t&&null!=e){var n=this.getDescendentsOfGroup(e),i=t.id;if(-1!=n.indexOf(i))return!0}return!1}},{key:"getDescendentsOfGroup",value:function(t){var e=[];if(null!=t){var n=t.ids;if(null!=n){e=n;var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=this.getNodeById(l);if(null!=c){var u=this.getDescendentsOfGroup(c);e=e.concat(u)}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}return e}},{key:"getStartNodeId",value:function(){return this.project.startNodeId}},{key:"setStartNodeId",value:function(t){this.project.startNodeId=t}},{key:"getStartGroupId",value:function(){return this.project.startGroupId}},{key:"isStartNodeId",value:function(t){return this.project.startNodeId===t}},{key:"getConstraintsForNode",value:function(t){var e=[],n=this.activeConstraints,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.isNodeAffectedByConstraint(t,l)&&e.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"getConstraintsOnNode",value:function(t){return this.getNodeById(t).constraints}},{key:"addConstraintToNode",value:function(t,e){null==t.constraints&&(t.constraints=[]),t.constraints.push(e)}},{key:"nodeHasConstraint",value:function(t){return this.getConstraintsOnNode(t).length>0}},{key:"orderConstraints",value:function(t){var e=this.getFlattenedProjectAsNodeIds();return t.sort(this.constraintsComparatorGenerator(e))}},{key:"constraintsComparatorGenerator",value:function(t){return function(e,n){var i=t.indexOf(e.targetId),r=t.indexOf(n.targetId);return i<r?-1:i>r?1:0}}},{key:"isNodeAffectedByConstraint",value:function(t,e){var n=this.getCachedIsNodeAffectedByConstraintResult(t.id,e.id);if(null!=n)return n;var i=!1,r=t.id,o=e.targetId,s=e.action;if("makeAllNodesAfterThisNotVisible"===s)this.isNodeIdAfter(o,t.id)&&(i=!0);else if("makeAllNodesAfterThisNotVisitable"===s)this.isNodeIdAfter(o,t.id)&&(i=!0);else{var a=this.getNodeById(o);if(null!=a){var l=a.type;"node"===l&&r===o?i=!0:"group"!==l||r!==o&&!this.isNodeDescendentOfGroup(t,a)||(i=!0)}}return this.cacheIsNodeAffectedByConstraintResult(t.id,e.id,i),i}},{key:"isNodeIdAfter",value:function(t,e){if(!this.isApplicationNode(t))return this.isNodeAfterGroup(t,e);if(t==e)return!1;var n=this.getAllPaths([],t,!0),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(-1!=s.value.indexOf(e))return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"isNodeAfterGroup",value:function(t,e){var n=this.getTransitionsByFromNodeId(t);try{var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=this.getAllPaths([],l.to,!0),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){if(-1!=f.value.indexOf(e))return!0}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}catch(t){}return!1}},{key:"getTransitionLogicByFromNodeId",value:function(t){var e=this.getNodeById(t);return null==e.transitionLogic&&(e.transitionLogic={transitions:[]}),e.transitionLogic}},{key:"getTransitionsByFromNodeId",value:function(t){return this.getTransitionLogicByFromNodeId(t).transitions}},{key:"getNodesByToNodeId",value:function(t){var e=[];if(null!=t){var n=this.project.nodes,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.nodeHasTransitionToNodeId(l,t)&&e.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}var c=this.getInactiveNodes(),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;this.nodeHasTransitionToNodeId(m,t)&&e.push(m)}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}return e}},{key:"nodeHasTransitionToNodeId",value:function(t,e){var n=this.getTransitionsByFromNodeId(t.id);if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(e===s.value.to)return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return!1}},{key:"getNodesWithTransitionToNodeId",value:function(t){var e=[],n=this.getNodesByToNodeId(t),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;e.push(l.id)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"getGroupNodesByToNodeId",value:function(t){var e=[];if(null!=t){var n=this.getGroups(),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.nodeHasTransitionToNodeId(l,t)&&e.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"retrieveProject",value:function(){var t=this,e=this.ConfigService.getConfigParam("projectURL");return null==e?null:(e+="?noCache="+(new Date).getTime(),this.$http.get(e).then(function(e){var n=e.data;return t.setProject(n),n}))}},{key:"retrieveProjectById",value:function(t){var e=this;if(null!=t){var n=window.configURL+"/"+t;return this.$http.get(n).then(function(t){var n=t.data;if(null!=n){var i=n.projectURL,r=n.previewProjectURL;if(null!=i)return e.$http.get(i).then(function(t){var e=t.data;return e.previewProjectURL=r,e})}})}}},{key:"saveProject",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$rootScope.$broadcast("savingProject"),this.cleanupBeforeSave();var r=this.ConfigService.getProjectId(),o=this.ConfigService.getConfigParam("saveProjectURL");if(null==r||null==o)return null;var s=this.project.metadata.authors?this.project.metadata.authors:[],a=this.ConfigService.getMyUserInfo(),l=!1,c=!0,u=!1,h=void 0;try{for(var d,f=s.entries()[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=i(d.value,2),m=(p[0],p[1]);if(m.id===a.id){m=a,l=!0;break}}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}l||s.push(a),this.project.metadata.authors=s;var g={method:"POST",url:o,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t.param({projectId:r,commitMessage:n,projectJSONString:angular.toJson(this.project,4)})};return this.$http(g).then(function(t){var n=t.data;return e.$rootScope.$broadcast("projectSaved"),n})}},{key:"cleanupBeforeSave",value:function(){var t=this.getActiveNodes(),e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;this.cleanupNode(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}var a=this.getInactiveNodes(),l=!0,c=!1,u=void 0;try{for(var h,d=a[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;this.cleanupNode(f)}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}},{key:"cleanupNode",value:function(t){delete t.checked,delete t.hasWork,delete t.hasAlert,delete t.hasNewAlert,delete t.isVisible,delete t.completionStatus,delete t.score,delete t.hasScore,delete t.maxScore,delete t.hasMaxScore,delete t.scorePct,delete t.order,delete t.show;var e=t.components;if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.cleanupComponent(a)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"cleanupComponent",value:function(t){delete t.checked,delete t.hasWork}},{key:"getThemePath",value:function(){var t=this.ConfigService.getWISEBaseURL(),e=this.project;return e&&e.theme?t+"/wise5/themes/"+e.theme:t+"/wise5/themes/default"}},{key:"getThemeSettings",value:function(){var t={},e=this.project;return e&&e.themeSettings&&(t=e.theme?e.themeSettings[e.theme]:e.themeSettings.default),t||{}}},{key:"getFlattenedProjectAsNodeIds",value:function(t){if(!t&&null!=this.flattenedProjectAsNodeIds)return this.flattenedProjectAsNodeIds;var e=this.getStartNodeId(),n=this.getAllPaths([],e),i=this.consolidatePaths(n);return this.flattenedProjectAsNodeIds=i,i}},{key:"getAllPaths",value:function(t,e,n){var i=[];if(null!=e)if(this.isApplicationNode(e)){var r=[],o=this.getTransitionsByFromNodeId(e);if(null!=o){if(n){var s=this.getParentGroup(e);if(null!=s){var a=s.id;null!=a&&-1==t.indexOf(a)&&t.push(s.id)}}if(t.push(e),0===o.length){var l=!1,c=this.getParentGroupId(e),u=this.getTransitionsByFromNodeId(c);if(null!=u){var h=!0,d=!1,f=void 0;try{for(var p,m=u[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;if(null!=g){var v=g.to;if(-1==t.indexOf(v)){var y=this.getAllPaths(t,v,n),b=!0,_=!1,w=void 0;try{for(var S,x=y[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value;C.unshift(e),i.push(C),l=!0}}catch(t){_=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(_)throw w}}}}}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}l||(r.push(e),i.push(r))}else{var k=!0,T=!1,M=void 0;try{for(var E,A=o[Symbol.iterator]();!(k=(E=A.next()).done);k=!0){var I=E.value;if(null!=I){var $=I.to;if(null!=$&&-1==t.indexOf($)){var D=this.getAllPaths(t,$,n);if(null!=D){var L=!0,P=!1,O=void 0;try{for(var N,j=D[Symbol.iterator]();!(L=(N=j.next()).done);L=!0){var R=N.value;if(n&&R.length>0){var B=R[0],F=this.getParentGroupId(B);this.getParentGroupId(e)!=F&&R.unshift(F)}R.unshift(e),i.push(R)}}catch(t){P=!0,O=t}finally{try{!L&&j.return&&j.return()}finally{if(P)throw O}}}}else r.push(e),i.push(r)}}}catch(t){T=!0,M=t}finally{try{!k&&A.return&&A.return()}finally{if(T)throw M}}}if(t.length>0){var Y=t[t.length-1];this.isGroupNode(Y)&&t.pop()}if(t.pop(),n&&1==t.length){var H=!0,W=!1,z=void 0;try{for(var U,V=i[Symbol.iterator]();!(H=(U=V.next()).done);H=!0){var G=U.value;null!=G&&G.unshift(t[0])}}catch(t){W=!0,z=t}finally{try{!H&&V.return&&V.return()}finally{if(W)throw z}}t.pop()}}}else if(this.isGroupNode(e)){t.push(e);var q=this.getNodeById(e);if(null!=q){var X=q.startId;if(null==X||""==X){var K=this.getTransitionsByFromNodeId(q.id);if(null!=K&&K.length>0){var J=!0,Z=!1,Q=void 0;try{for(var tt,et=K[Symbol.iterator]();!(J=(tt=et.next()).done);J=!0){var nt=tt.value;if(null!=nt){var it=nt.to,rt=this.getAllPaths(t,it,n);if(null!=rt){var ot=!0,st=!1,at=void 0;try{for(var lt,ct=rt[Symbol.iterator]();!(ot=(lt=ct.next()).done);ot=!0){var ut=lt.value;ut.unshift(e),i.push(ut)}}catch(t){st=!0,at=t}finally{try{!ot&&ct.return&&ct.return()}finally{if(st)throw at}}}}}}catch(t){Z=!0,Q=t}finally{try{!J&&et.return&&et.return()}finally{if(Z)throw Q}}}else{var ht=[];ht.unshift(e),i.push(ht)}}else{var dt=this.getAllPaths(t,X,n);if(null!=dt){var ft=!0,pt=!1,mt=void 0;try{for(var gt,vt=dt[Symbol.iterator]();!(ft=(gt=vt.next()).done);ft=!0){var yt=gt.value;yt.unshift(e),i.push(yt)}}catch(t){pt=!0,mt=t}finally{try{!ft&&vt.return&&vt.return()}finally{if(pt)throw mt}}}}}t.pop()}return i}},{key:"consolidatePaths",value:function(t){var e=[];if(null!=t)for(;!this.arePathsEmpty(t);){var n=this.getNonEmptyPathIndex(t),i=this.getFirstNodeIdInPathAtIndex(t,n);if(this.areFirstNodeIdsInPathsTheSame(t))this.removeNodeIdFromPaths(i,t),e.push(i);else{var r=this.getPathsThatContainNodeId(i,t);if(null!=r)if(1===r.length)this.removeNodeIdFromPath(i,t,n),e.push(i);else{var o=this.consumePathsUntilNodeId(t,i);this.removeNodeIdFromPaths(i,t),o.push(i),e=e.concat(o)}}}return e}},{key:"consumePathsUntilNodeId",value:function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(l.includes(e)){var c=l.slice(0,l.indexOf(e)),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;n.includes(m)||n.push(m)}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}},{key:"getFirstNodeIdInPathAtIndex",value:function(t,e){var n=null;if(null!=t&&null!=e){var i=t[e];null!=i&&i.length>0&&(n=i[0])}return n}},{key:"removeNodeIdFromPaths",value:function(t,e){if(null!=t&&null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)for(var a=o.value,l=0;l<a.length;l++){t===a[l]&&(a.splice(l,1),l--)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"removeNodeIdFromPath",value:function(t,e,n){if(null!=t&&null!=e&&null!=n){var i=e[n];if(null!=i)for(var r=0;r<i.length;r++){t===i[r]&&(i.splice(r,1),r--)}}}},{key:"areFirstNodeIdsInPathsTheSame",value:function(t){var e=!0,n=null;if(null!=t){var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value[0];if(null==n)n=l;else if(n!=l){e=!1;break}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"arePathsEmpty",value:function(t){if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s&&0!==s.length)return!1}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}return!0}},{key:"getPathsThatContainNodeId",value:function(t,e){var n=[];if(null!=t&&null!=e){var i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;-1!=l.indexOf(t)&&n.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return n}},{key:"getNonEmptyPathIndex",value:function(t){if(null!=t)for(var e=0;e<t.length;e++){if(0!==t[e].length)return e}return null}},{key:"setBranchesCache",value:function(t){this.branchesCache=t}},{key:"getBranchesCache",value:function(){return this.branchesCache}},{key:"clearBranchesCache",value:function(){this.branchesCache=null}},{key:"getBranches",value:function(){if("author"!=this.ConfigService.getMode()){var t=this.getBranchesCache();if(null!=t)return t}var e=this.getStartNodeId(),n=this.getAllPaths([],e),i=this.findBranches(n);return"author"!=this.ConfigService.getMode()&&this.setBranchesCache(i),i}},{key:"findBranches",value:function(t){for(var e=[],n=null;!this.arePathsEmpty(t);){var i=this.getFirstNodeIdInPathAtIndex(t,0);if(this.areFirstNodeIdsInPathsTheSame(t))this.removeNodeIdFromPaths(i,t),n=i;else{var r=this.createBranchMetaObject(n);r.branchStartPoint=n;var o=this.findNextCommonNodeId(t);r.branchEndPoint=o;var s=this.extractPathsUpToNodeId(t,o);s=this.removeDuplicatePaths(s),r.branchPaths=s,e.push(r),this.trimPathsUpToNodeId(t,o),n=o}}return e}},{key:"createBranchMetaObject",value:function(){var t={branchStartPoint:null,branchPaths:[],branchEndPoint:null};return t}},{key:"findNextCommonNodeId",value:function(t){var e=null;if(null!=t&&t.length>0){var n=t[0],i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(this.allPathsContainNodeId(t,l)){e=l;break}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"allPathsContainNodeId",value:function(t,e){var n=!1;if(null!=t){var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(-1==s.value.indexOf(e)){n=!1;break}n=!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return n}},{key:"trimPathsUpToNodeId",value:function(t,e){if(null!=t){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a){var l=a.indexOf(e);-1==l&&(l=a.length),a.splice(0,l)}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"extractPathsUpToNodeId",value:function(t,e){var n=[];if(null!=t){var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l){var c=l.indexOf(e);-1==c&&(c=l.length);var u=l.slice(0,c);n.push(u)}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return n}},{key:"removeDuplicatePaths",value:function(t){var e=[];if(null!=t){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=!1,c=!0,u=!1,h=void 0;try{for(var d,f=e[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;this.pathsEqual(a,p)&&(l=!0)}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}l||e.push(a)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return e}},{key:"pathsEqual",value:function(t,e){var n=!1;if(null!=t&&null!=e&&t.length===e.length){n=!0;for(var i=0;i<t.length;i++){if(t[i]!==e[i]){n=!1;break}}}return n}},{key:"isNodeIdInABranch",value:function(t,e){if(null!=t&&null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a){var l=a.branchPaths;if(null!=l){var c=!0,u=!1,h=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;if(null!=p)if(-1!=p.indexOf(e))return!0}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}}}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return!1}},{key:"getBranchPathsByNodeId",value:function(t,e){var n=[];if(null!=t&&null!=e){var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l){var c=l.branchPaths;if(null!=c){var u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(null!=m)-1!=m.indexOf(e)&&n.push(m)}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return n}},{key:"getComponentByNodeIdAndComponentId",value:function(t,e){if(null!=t&&null!=e){var n=this.getComponentsByNodeId(t),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l)if(e===l.id)return l}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return null}},{key:"getComponentPositionByNodeIdAndComponentId",value:function(t,e){if(null!=t&&null!=e)for(var n=this.getComponentsByNodeId(t),i=0;i<n.length;i++){var r=n[i];if(null!=r)if(e===r.id)return i}return-1}},{key:"getComponentsByNodeId",value:function(t){if(null!=t){var e=this.getNodeById(t);if(null!=e&&null!=e.components)return e.components}return[]}},{key:"getNodeContentByNodeId",value:function(t){if(null!=t){var e=this.getNodeById(t);if(null!=e)return e}return null}},{key:"insertNodeAfterInGroups",value:function(t,e){var n=this.getGroupNodes();if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&this.insertNodeAfterInGroup(l,t,e)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}var c=this.getInactiveGroupNodes();if(null!=c){var u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;null!=m&&this.insertNodeAfterInGroup(m,t,e)}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}},{key:"insertNodeAfterInGroup",value:function(t,e,n){var i=t.ids;if(null!=i)for(var r=0;r<i.length;r++){if(n===i[r])return i.splice(r+1,0,e),!0}return!1}},{key:"insertNodeAfterInTransitions",value:function(t,e){var n=this.getNodeById(e);if(t.type!=n.type)throw"Error: insertNodeAfterInTransitions() nodes are not the same type";null==n.transitionLogic&&(n.transitionLogic={transitions:[]}),null==t.transitionLogic&&(t.transitionLogic={transitions:[]}),this.isGroupNode(t.id)&&this.updateChildrenTransitionsInAndOutOfGroup(t,e),this.copyTransitions(n,t),0==t.transitionLogic.transitions.length&&this.copyParentTransitions(e,t);var i={to:t.id};n.transitionLogic.transitions=[i],this.updateBranchPathTakenConstraints(t,e)}},{key:"copyParentTransitions",value:function(t,e){var n=this.getParentGroupId(t);if("group0"!=n){var i=this.getTransitionsByFromNodeId(n),r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u={},h=c.to;if(this.isGroupNode(h)){var d=this.getGroupStartId(h);u.to=null==d||""==d?h:d}e.transitionLogic.transitions.push(u)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"copyTransitions",value:function(t,e){var n=angular.toJson(t.transitionLogic.transitions),i=angular.fromJson(n);e.transitionLogic.transitions=i}},{key:"updateBranchPathTakenConstraints",value:function(t,e){this.removeBranchPathTakenNodeConstraintsIfAny(t.id);var n=this.getBranchPathTakenConstraintsByNodeId(e),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c={id:this.getNextAvailableConstraintIdForNodeId(t.id),action:l.action,targetId:t.id,removalCriteria:this.UtilService.makeCopyOfJSONObject(l.removalCriteria)};this.addConstraintToNode(c)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"updateBranchPathTakenConstraint",value:function(t,e,n,i,r){var o=!0,s=!1,a=void 0;try{for(var l,c=t.constraints[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,h=!0,d=!1,f=void 0;try{for(var p,m=u.removalCriteria[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;if("branchPathTaken"===g.name){var v=g.params;v.fromNodeId===e&&v.toNodeId===n&&(v.fromNodeId=i,v.toNodeId=r)}}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}},{key:"insertNodeInsideInGroups",value:function(t,e){var n=this.getNodeById(e);if(null!=n){var i=n.ids;null!=i&&(i.splice(0,0,t),n.startId=t)}}},{key:"insertNodeInsideOnlyUpdateTransitions",value:function(t,e){if(!this.isGroupNode(e))throw"Error: insertNodeInsideOnlyUpdateTransitions() second parameter must be a group";var n=this.getNodeById(t);n.transitionLogic.transitions=[],this.removeBranchPathTakenNodeConstraintsIfAny(t),this.isGroupNode(t)&&this.updateChildrenTransitionsInAndOutOfGroup(n);var i=this.getNodeById(e).startId;this.updateTransitionsToStartId(i,t),this.updateStepTransitionsToGroup(e,t),this.createTransitionFromNodeToInsertToOldStartNode(i,n),0==this.getTransitionsByFromNodeId(t).length&&this.inheritParentTransitions(e,n)}},{key:"inheritParentTransitions",value:function(t,e){var n=this.getTransitionsByFromNodeId(t),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value.to;if(this.isGroupNode(l)){var c=this.getNodeById(l).startId;null==c||""==c?this.addToTransition(e,l):this.addToTransition(e,c)}else this.addToTransition(e,l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"createTransitionFromNodeToInsertToOldStartNode",value:function(t,e){if(null!=this.getNodeById(t)){var n={to:t};this.getTransitionsByFromNodeId(e.id).push(n)}}},{key:"updateStepTransitionsToGroup",value:function(t,e){var n=this.getNodesByToNodeId(t),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.isGroupNode(l.id)||this.updateToTransition(l,t,e)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"updateTransitionsToStartId",value:function(t,e){var n=this.getNodesByToNodeId(t),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.updateToTransition(l,t,e)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"addToTransition",value:function(t,e,n){if(null!=t){null==t.transitionLogic&&(t.transitionLogic={}),null==t.transitionLogic.transitions&&(t.transitionLogic.transitions=[]);var i={};i.to=e,null!=n&&(i.criteria=n),t.transitionLogic.transitions.push(i)}}},{key:"updateToTransition",value:function(t,e,n){if(null!=t){null==t.transitionLogic&&(t.transitionLogic={}),null==t.transitionLogic.transitions&&(t.transitionLogic.transitions=[]);var i=t.transitionLogic.transitions,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c)e===c.to&&(c.to=n)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"getChildNodesWithoutTransitions",value:function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=t.ids[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=this.getNodeById(a);0==l.transitionLogic.transitions.length&&e.push(l)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"getNextAvailableGroupId",value:function(){var t=this.getGroupIds(),e=null,n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value.replace("group","");isNaN(a)||(a=parseInt(a),null==e?e=a:a>e&&(e=a))}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return"group"+(e+1)}},{key:"getGroupIds",value:function(){var t=[],e=this.groupNodes,n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a){var l=a.id;null!=l&&t.push(l)}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}var c=this.getInactiveGroupNodes(),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(null!=m){var g=m.id;null!=g&&t.push(g)}}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}return t}},{key:"getNextAvailableNodeId",value:function(t){var e=this.getNodeIds(),n=null,i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value.replace("node","");isNaN(l)||(l=parseInt(l),null==n?n=l:l>n&&(n=l))}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}var c=this.getInactiveNodeIds(),u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value.replace("node","");isNaN(m)||(m=parseInt(m),null==n?n=m:m>n&&(n=m))}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}if(null!=t){var g=!0,v=!1,y=void 0;try{for(var b,_=t[Symbol.iterator]();!(g=(b=_.next()).done);g=!0){var w=b.value.replace("node","");isNaN(w)||(w=parseInt(w),null==n?n=w:w>n&&(n=w))}}catch(t){v=!0,y=t}finally{try{!g&&_.return&&_.return()}finally{if(v)throw y}}}return"node"+(n+1)}},{key:"getNodeIds",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this.applicationNodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value.id;null!=s&&t.push(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"getInactiveNodeIds",value:function(){var t=[],e=this.project.inactiveNodes;if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a){var l=a.id;null!=l&&t.push(l)}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return t}},{key:"moveNodesInside",value:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=this.getNodeById(r);n.push(o);var s=this.isActive(r),a=this.isActive(e);s&&a?(this.removeNodeIdFromTransitions(r),this.removeNodeIdFromGroups(r),0==i?(this.insertNodeInsideOnlyUpdateTransitions(r,e),this.insertNodeInsideInGroups(r,e)):(this.insertNodeAfterInTransitions(o,e),this.insertNodeAfterInGroups(r,e))):s&&!a?(this.removeNodeIdFromTransitions(r),this.removeNodeIdFromGroups(r),0==i?this.moveFromActiveToInactiveInsertInside(o,e):this.moveToInactive(o,e)):!s&&a?(this.moveToActive(o),0==i?(this.insertNodeInsideOnlyUpdateTransitions(r,e),this.insertNodeInsideInGroups(r,e)):(this.insertNodeAfterInTransitions(o,e),this.insertNodeAfterInGroups(r,e))):s||a||(this.removeNodeIdFromTransitions(r),this.removeNodeIdFromGroups(r),0==i?this.moveFromInactiveToInactiveInsertInside(o,e):this.moveInactiveNodeToInactiveSection(o,e)),e=o.id}return n}},{key:"moveNodesAfter",value:function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=this.getNodeById(l);n.push(c);var u=this.isActive(l),h=this.isActive(e);u&&h?(this.removeNodeIdFromTransitions(l),this.removeNodeIdFromGroups(l),this.insertNodeAfterInGroups(l,e),this.insertNodeAfterInTransitions(c,e)):u&&!h?(this.removeNodeIdFromTransitions(l),this.removeNodeIdFromGroups(l),this.moveToInactive(c,e)):!u&&h?(this.moveToActive(c),this.insertNodeAfterInGroups(l,e),this.insertNodeAfterInTransitions(c,e)):u||h||(this.removeNodeIdFromTransitions(l),this.removeNodeIdFromGroups(l),this.moveInactiveNodeToInactiveSection(c,e)),e=c.id}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}},{key:"copyNode",value:function(t){var e=this.getNodeById(t),n=this.UtilService.makeCopyOfJSONObject(e);n.id=this.getNextAvailableNodeId(),n.transitionLogic={},n.constraints=[];var i=[],r=!0,o=!1,s=void 0;try{for(var a,l=n.components[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=this.getUnusedComponentId(i);i.push(u),c.id=u}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return n}},{key:"deleteNode",value:function(t){var e=this.getParentGroup(t);e.startId===t&&this.setGroupStartIdToNextChildId(e),this.isProjectStartNodeIdOrContainsProjectStartNodeId(t)&&this.updateProjectStartNodeIdToNextLogicalNode(t),this.isGroupNode(t)&&this.removeChildNodes(t),this.removeNodeIdFromTransitions(t),this.removeNodeIdFromGroups(t),this.removeNodeIdFromNodes(t),this.recalculatePositionsInGroup(e.id)}},{key:"updateProjectStartNodeIdToNextLogicalNode",value:function(t){this.isGroupNode(t)?this.updateProjectStartNodeIdToNextLogicalNodeForRemovingGroup(t):this.updateProjectStartNodeIdToNextLogicalNodeForRemovingStep(t)}},{key:"updateProjectStartNodeIdToNextLogicalNodeForRemovingGroup",value:function(t){var e=this.getTransitionsByFromNodeId(t);if(0==e.length)this.setStartNodeId("group0");else{var n=e[0].to;if(this.isGroupNode(n)){var i=this.getGroupStartId(n);null==i?this.setStartNodeId(n):this.setStartNodeId(i)}else this.setStartNodeId(n)}}},{key:"updateProjectStartNodeIdToNextLogicalNodeForRemovingStep",value:function(t){var e=this.getTransitionsByFromNodeId(t),n=this.getParentGroupId(t);if(0==e.length)this.setStartNodeId(n);else{var i=e[0].to;this.isNodeInGroup(i,n)?this.setStartNodeId(i):this.setStartNodeId(this.getParentGroupId(t))}}},{key:"setGroupStartIdToNextChildId",value:function(t){var e=!1,n=this.getTransitionsByFromNodeId(t.startId);if(n.length>0){var i=n[0].to;this.isNodeInGroup(i,t.id)&&(t.startId=i,e=!0)}e||(t.startId="")}},{key:"removeChildNodes",value:function(t){for(var e=this.getNodeById(t),n=0;n<e.ids.length;n++){var i=e.ids[n];this.removeNodeIdFromTransitions(i),this.removeNodeIdFromGroups(i),this.removeNodeIdFromNodes(i),n--}}},{key:"isProjectStartNodeIdOrContainsProjectStartNodeId",value:function(t){return this.getStartNodeId()===t||this.isGroupNode(t)&&this.containsStartNodeId(t)}},{key:"containsStartNodeId",value:function(t){var e=this.getNodeById(t),n=this.getStartNodeId(),i=!0,r=!1,o=void 0;try{for(var s,a=e.ids[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(s.value===n)return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"removeNodeIdFromTransitions",value:function(t){var e=this.getNodeById(t),n=this.getNodesByToNodeId(t),i=e.transitionLogic,r=[];null!=i&&null!=i.transitions&&(r=i.transitions);var o=this.getParentGroupId(t),s=this.getNodeById(o);if(null!=s){var a=s.startId;if(null!=a&&a===t)if(null!=r&&r.length>0){var l=!0,c=!1,u=void 0;try{for(var h,d=r[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;if(null!=f){var p=f.to;null!=p&&this.getParentGroupId(p)==o&&(s.startId=p)}}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}else s.startId=""}for(var m=0;m<n.length;m++){var g=n[m];if(null!=g){var v=this.getParentGroupId(g.id),y=g.transitionLogic;if(null!=y){for(var b=y.transitions,_=0;_<b.length;_++){if(t===b[_].to){var w=angular.toJson(r);if(w=angular.fromJson(w),v!=o)for(var S=0;S<w.length;S++){var x=w[S];if(null!=x){var C=x.to;if(null!=C)o!=this.getParentGroupId(C)&&(w.splice(S,1),S--)}}if(this.isFirstNodeInBranchPath(t)){var k=this.getNodeIdsInBranch(g.id,t);if(null!=k){var T=!0,M=!1,E=void 0;try{for(var A,I=k[Symbol.iterator]();!(T=(A=I.next()).done);T=!0){var $=A.value,D=this.getNodeById($),L=!0,P=!1,O=void 0;try{for(var N,j=w[Symbol.iterator]();!(L=(N=j.next()).done);L=!0){var R=N.value;if(null!=R){var B=g.id,F=t,Y=g.id,H=R.to;this.updateBranchPathTakenConstraint(D,B,F,Y,H)}}}catch(t){P=!0,O=t}finally{try{!L&&j.return&&j.return()}finally{if(P)throw O}}}}catch(t){M=!0,E=t}finally{try{!T&&I.return&&I.return()}finally{if(M)throw E}}}}else if(this.isBranchPoint(t)){var W=this.getBranchesByBranchStartPointNodeId(t),z=!0,U=!1,V=void 0;try{for(var G,q=W[Symbol.iterator]();!(z=(G=q.next()).done);z=!0){var X=G.value;if(null!=X){var K=X.branchPaths;if(null!=K){var J=!0,Z=!1,Q=void 0;try{for(var tt,et=K[Symbol.iterator]();!(J=(tt=et.next()).done);J=!0){var nt=tt.value;if(null!=nt){var it=t,rt=nt[0],ot=g.id,st=nt[0],at=!0,lt=!1,ct=void 0;try{for(var ut,ht=nt[Symbol.iterator]();!(at=(ut=ht.next()).done);at=!0){var dt=ut.value,ft=this.getNodeById(dt);this.updateBranchPathTakenConstraint(ft,it,rt,ot,st)}}catch(t){lt=!0,ct=t}finally{try{!at&&ht.return&&ht.return()}finally{if(lt)throw ct}}}}}catch(t){Z=!0,Q=t}finally{try{!J&&et.return&&et.return()}finally{if(Z)throw Q}}}}}}catch(t){U=!0,V=t}finally{try{!z&&q.return&&q.return()}finally{if(U)throw V}}}if(b.splice(_,1),null!=w){var pt=_,mt=!0,gt=!1,vt=void 0;try{for(var yt,bt=w[Symbol.iterator]();!(mt=(yt=bt.next()).done);mt=!0){var _t=yt.value;b.splice(pt,0,_t),pt++}}catch(t){gt=!0,vt=t}finally{try{!mt&&bt.return&&bt.return()}finally{if(gt)throw vt}}}if(this.isGroupNode(t)){var wt=t,St=g;this.updateChildrenTransitionsIntoGroupWeAreMoving(St,wt)}}}this.isBranchPoint(t)&&(g.transitionLogic=this.UtilService.makeCopyOfJSONObject(i),g.transitionLogic.transitions=b)}}}null!=i&&(i.transitions=[]),this.isGroupNode(t)&&this.removeTransitionsOutOfGroup(t)}},{key:"removeNodeIdFromGroups",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.getGroupNodes()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;this.removeNodeIdFromGroup(s,t)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}var a=!0,l=!1,c=void 0;try{for(var u,h=this.getInactiveGroupNodes()[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;this.removeNodeIdFromGroup(d,t)}}catch(t){l=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"removeNodeIdFromGroup",value:function(t,e){for(var n=t.ids,i=0;i<n.length;i++){var r=n[i];r===e&&(n.splice(i,1),r===t.startId&&this.shiftGroupStartNodeByOne(t))}}},{key:"shiftGroupStartNodeByOne",value:function(t){var e=this.getTransitionsByFromNodeId(t.startId);e.length>0?t.startId=e[0].to:t.startId=""}},{key:"removeNodeIdFromNodes",value:function(t){for(var e=this.project.nodes,n=0;n<e.length;n++){var i=e[n];null!=i&&t===i.id&&e.splice(n,1)}var r=this.project.inactiveNodes;if(null!=r)for(var o=0;o<r.length;o++){var s=r[o];null!=s&&t===s.id&&r.splice(o,1)}this.idToNode[t]=null}},{key:"removeNodeIdFromInactiveNodes",value:function(t){var e=this.project.inactiveNodes;if(null!=e)for(var n=0;n<e.length;n++){var i=e[n];if(null!=i)i.id===t&&e.splice(n,1)}}},{key:"createComponent",value:function(t,e,n){var i=null;if(null!=t&&null!=e){var r=this.getNodeById(t),o=this.$injector.get(e+"Service");null!=r&&null!=o&&(i=o.createComponent(),o.componentHasWork()&&(1==r.showSaveButton||(this.doesAnyComponentInNodeShowSubmitButton(r.id)?i.showSaveButton=!0:r.showSaveButton=!0)),this.addComponentToNode(r,i,n))}return i}},{key:"doesAnyComponentHaveWork",value:function(t){var e=this.getNodeById(t),n=!0,i=!1,r=void 0;try{for(var o,s=e.components[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=this.$injector.get(a.type+"Service");if(null!=l&&l.componentHasWork())return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return!1}},{key:"doesAnyComponentInNodeShowSubmitButton",value:function(t){var e=this.getNodeById(t),n=!0,i=!1,r=void 0;try{for(var o,s=e.components[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(1==o.value.showSubmitButton)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return!1}},{key:"addComponentToNode",value:function(t,e,n){if(null!=t&&null!=e)if(null==n)t.components.splice(0,0,e);else{for(var i=!1,r=t.components,o=0;o<r.length;o++){var s=r[o];if(null!=s&&null!=s.id&&s.id==n){r.splice(o+1,0,e),i=!0;break}}i||t.components.push(e)}}},{key:"moveComponent",value:function(t,e,n){for(var i=this.getNodeById(t).components,r=[],o=i.length-1;o>=0;o--){var s=i[o];null!=s&&-1!=e.indexOf(s.id)&&(r.splice(0,0,s),i.splice(o,1))}if(null==n)for(var a=0;a<r.length;a++)i.splice(a,0,r[a]);else for(var l=0;l<i.length;l++){var c=i[l];if(null!=c&&c.id==n){for(var u=0;u<r.length;u++)i.splice(l+1+u,0,r[u]);break}}return r}},{key:"deleteComponent",value:function(t,e){if(null!=t&&null!=e){var n=this.getNodeById(t);if(null!=n){var i=n.components;if(null!=i)for(var r=0;r<i.length;r++){if(i[r].id===e){i.splice(r,1);break}}}}}},{key:"getMaxScore",value:function(){var t=null,e=this.getStartNodeId(),n=this.getAllPaths([],e);if(null!=n&&n.length>0){var i=n[0],r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=this.getMaxScoreForNode(c);null!=u&&(null==t?t=u:t+=u)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}return t}},{key:"getMaxScoreForNode",value:function(t){var e=null;if(!this.isGroupNode(t)){var n=this.getNodeById(t),i=!0,r=!1,o=void 0;try{for(var s,a=n.components[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value.maxScore;"number"==typeof l&&(null==e?e=l:e+=l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"getMaxScoreForComponent",value:function(t,e){var n=this.getComponentByNodeIdAndComponentId(t,e);return null!=n?n.maxScore:null}},{key:"setMaxScoreForComponent",value:function(t,e,n){if(null!=t&&null!=e&&null!=n&&"number"==typeof n){var i=this.getComponentByNodeIdAndComponentId(t,e);null!=i&&(i.maxScore=n)}}},{key:"isNodeInGroup",value:function(t,e){return-1!=this.getNodeById(e).ids.indexOf(t)}},{key:"getFirstLeafNodeId",value:function(){for(var t=null,e=this.project.startGroupId,n=this.getNodeById(e),i=!1;!i;)null==n?i=!0:this.isGroupNode(n.id)?(t=n.id,n=this.getNodeById(n.startId)):this.isApplicationNode(n.id)?(t=n.id,i=!0):i=!0;return t}},{key:"replaceNode",value:function(t,e){if(null!=t&&null!=e){this.setIdToNode(t,e),this.setIdToElement(t,e);var n=this.getNodes();if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];if(null!=r)if(t===r.id){n.splice(i,1,e);break}}var o=this.applicationNodes;if(null!=o)for(var s=0;s<o.length;s++){var a=o[s];if(null!=a)t===a.id&&o.splice(s,1,e)}}}},{key:"recalculatePositionsInGroup",value:function(t){if(null!=t){var e=this.getChildNodeIdsById(t),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=this.getPositionById(a);this.setIdToPosition(a,l)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}},{key:"getConstraintMessage",value:function(t,e){var n="";if(null!=t&&null!=e){this.getNodePositionAndTitleByNodeId(t),e.removalConditional;var i=e.removalCriteria;if(null!=i){var r="",o=!0,s=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=this.getCriteriaMessage(u);null!=h&&""!=h&&(""!=r&&(r+="<br/>"),r+=h)}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}n+=r}}return n}},{key:"getConstraintDescription",value:function(t){var e="",n=t.action,i=this.getActionMessage(n),r=!0,o=!1,s=void 0;try{for(var a,l=t.removalCriteria[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;""!=e&&("any"==t.removalConditional?e+=" or ":"all"==t.removalConditional&&(e+=" and ")),e+=this.getCriteriaMessage(c)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return e=i+e}},{key:"getActionMessage",value:function(t){return"makeAllNodesAfterThisNotVisitable"==t?this.$translate("allStepsAfterThisOneWillNotBeVisitableUntil"):"makeAllNodesAfterThisNotVisible"==t?this.$translate("allStepsAfterThisOneWillNotBeVisibleUntil"):"makeAllOtherNodesNotVisitable"==t?this.$translate("allOtherStepsWillNotBeVisitableUntil"):"makeAllOtherNodesNotVisible"==t?this.$translate("allOtherStepsWillNotBeVisibleUntil"):"makeThisNodeNotVisitable"==t?this.$translate("thisStepWillNotBeVisitableUntil"):"makeThisNodeNotVisible"==t?this.$translate("thisStepWillNotBeVisibleUntil"):void 0}},{key:"getCriteriaMessage",value:function(t){var e="";if(null!=t){var n=t.name,i=t.params;if("isCompleted"===n){var r=i.nodeId;if(null!=r){var o=this.getNodePositionAndTitleByNodeId(r);e+=this.$translate("completeNodeTitle",{nodeTitle:o})}}else if("isVisited"===n){var s=i.nodeId;if(null!=s){var a=this.getNodePositionAndTitleByNodeId(s);e+=this.$translate("visitNodeTitle",{nodeTitle:a})}}else if("isCorrect"===n){var l=i.nodeId;if(null!=l){var c=this.getNodePositionAndTitleByNodeId(l);e+=this.$translate("correctlyAnswerNodeTitle",{nodeTitle:c})}}else if("score"===n){var u=i.nodeId,h="",d="";null!=u&&(h=this.getNodePositionAndTitleByNodeId(u));var f=i.scores;null!=f&&(d=f.join(", ")),e+=this.$translate("obtainAScoreOfXOnNodeTitle",{score:d,nodeTitle:h})}else if("choiceChosen"===n){var p=i.nodeId,m=i.componentId,g=i.choiceIds,v=this.getNodePositionAndTitleByNodeId(p),y=this.getChoiceTextByNodeIdAndComponentId(p,m,g).join(", ");e+=this.$translate("chooseChoiceOnNodeTitle",{choiceText:y,nodeTitle:v})}else if("usedXSubmits"===n){var b=i.nodeId,_="",w=i.requiredSubmitCount;null!=b&&(_=this.getNodePositionAndTitleByNodeId(b)),e+=1==w?this.$translate("submitXTimeOnNodeTitle",{requiredSubmitCount:w,nodeTitle:_}):this.$translate("submitXTimesOnNodeTitle",{requiredSubmitCount:w,nodeTitle:_})}else if("branchPathTaken"===n){var S=i.fromNodeId,x=this.getNodePositionAndTitleByNodeId(S),C=i.toNodeId,k=this.getNodePositionAndTitleByNodeId(C);e+=this.$translate("branchPathTakenFromTo",{fromNodeTitle:x,toNodeTitle:k})}else if("isPlanningActivityCompleted"===n){var T=i.nodeId;if(null!=T){var M=this.getNodePositionAndTitleByNodeId(T);e+=this.$translate("completeNodeTitle",{nodeTitle:M})}}else if("wroteXNumberOfWords"===n){var E=i.nodeId;if(null!=E){var A=i.requiredNumberOfWords,I=this.getNodePositionAndTitleByNodeId(E);e+=this.$translate("writeXNumberOfWordsOnNodeTitle",{requiredNumberOfWords:A,nodeTitle:I})}}else if("isVisible"===n){var $=i.nodeId;if(null!=$){var D=this.getNodePositionAndTitleByNodeId($);e+=this.$translate("nodeTitleIsVisible",{nodeTitle:D})}}else if("isVisitable"===n){var L=i.nodeId;if(null!=L){var P=this.getNodePositionAndTitleByNodeId(L);e+=this.$translate("nodeTitleIsVisitable",{nodeTitle:P})}}else if("addXNumberOfNotesOnThisStep"===n){var O=i.nodeId,N=i.requiredNumberOfNotes,j=this.getNodePositionAndTitleByNodeId(O);e+=1==N?this.$translate("addXNumberOfNotesOnThisStepSingular",{requiredNumberOfNotes:N,nodeTitle:j}):this.$translate("addXNumberOfNotesOnThisStepPlural",{requiredNumberOfNotes:N,nodeTitle:j})}else if("fillXNumberOfRows"===n){var R=i.requiredNumberOfFilledRows,B=i.nodeId,F=this.getNodePositionAndTitleByNodeId(B);e+=1==R?this.$translate("youMustFillInXRow",{requiredNumberOfFilledRows:R,nodeTitle:F}):this.$translate("youMustFillInXRows",{requiredNumberOfFilledRows:R,nodeTitle:F})}}return e}},{key:"getChoicesByNodeIdAndComponentId",value:function(t,e){var n=[],i=this.getComponentByNodeIdAndComponentId(t,e);return null!=i&&null!=i.choices&&(n=i.choices),n}},{key:"getChoiceTextByNodeIdAndComponentId",value:function(t,e,n){var i=this.getChoicesByNodeIdAndComponentId(t,e),r=[],o=!0,s=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;-1!=n.indexOf(u.id)&&r.push(u.text)}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return r}},{key:"getGroupStartId",value:function(t){return this.getNodeById(t).startId}},{key:"getParentGroupStartId",value:function(t){if(null!=t){var e=this.getParentGroup(t);if(null!=e)return e.startId}return null}},{key:"updateTransitionsForExtractingGroup",value:function(t,e,n){if(null!=t&&null!=e){var i=this.getNodeById(t),r=this.getNodeById(e),o=null,s=null;if(null!=n&&(o=this.getNodeById(n)),null!=o&&(s=o.startId),null!=i&&null!=r){var a=i.ids;if(null!=a){var l=!0,c=!1,u=void 0;try{for(var h,d=a[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=(this.getNodeById(f),this.getTransitionsByFromNodeId(f));if(null!=p)for(var m=0;m<p.length;m++){var g=p[m];if(null!=g){var v=g.to;v===e?null==n&&null==s?(p.splice(m,1),m--):g.to=n:this.isNodeInGroup(v,e)&&(null==n&&null==s?(p.splice(m,1),m--):g.to=null==s||""==s?n:s)}}}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}}}if(null!=e&&null!=n){var y=this.getNodeById(e);if(null!=y){var b=y.ids;if(null!=b){var _=!0,w=!1,S=void 0;try{for(var x,C=b[Symbol.iterator]();!(_=(x=C.next()).done);_=!0){var k=x.value,T=(this.getNodeById(k),this.getTransitionsByFromNodeId(k));if(null!=T)for(var M=0;M<T.length;M++){var E=T[M];if(null!=E){var A=E.to;A===n?(T.splice(M,1),M--):this.isNodeInGroup(A,n)&&(T.splice(M,1),M--)}}}}catch(t){w=!0,S=t}finally{try{!_&&C.return&&C.return()}finally{if(w)throw S}}}}}}},{key:"updateTransitionsForInsertingGroup",value:function(t,e,n){var i=null,r=null;if(null!=t&&(i=this.getNodeById(t)),null!=n&&(r=this.getNodeById(n)),null!=i&&null!=r){var o=i.ids,s=r.startId;if(null!=o){var a=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value,f=this.getNodeById(d),p=this.getTransitionsByFromNodeId(d);if(null==p||0==p.length)null==s||""==s?this.addToTransition(f,n):this.addToTransition(f,s);else if(null!=p){var m=!0,g=!1,v=void 0;try{for(var y,b=p[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var _=y.value;if(null!=_){var w=_.to;if(null!=e){var S=!0,x=!1,C=void 0;try{for(var k,T=e[Symbol.iterator]();!(S=(k=T.next()).done);S=!0){var M=k.value;w===M?_.to=n:this.isNodeInGroup(w,M)&&(_.to=null==s||""==s?n:s)}}catch(t){x=!0,C=t}finally{try{!S&&T.return&&T.return()}finally{if(x)throw C}}}}}}catch(t){g=!0,v=t}finally{try{!m&&b.return&&b.return()}finally{if(g)throw v}}}}}catch(t){l=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}}}if(null!=r){var E=r.ids;if(null!=E){var A=!0,I=!1,$=void 0;try{for(var D,L=E[Symbol.iterator]();!(A=(D=L.next()).done);A=!0){var P=D.value,O=this.getNodeById(P),N=this.getTransitionsByFromNodeId(P);if((null==N||0==N.length)&&null!=e){var j=!0,R=!1,B=void 0;try{for(var F,Y=e[Symbol.iterator]();!(j=(F=Y.next()).done);j=!0){var H=F.value,W=this.getNodeById(H);if(null!=W){var z=W.startId,U="";U=null==z?W:z,this.addToTransition(O,U)}}}catch(t){R=!0,B=t}finally{try{!j&&Y.return&&Y.return()}finally{if(R)throw B}}}}}catch(t){I=!0,$=t}finally{try{!A&&L.return&&L.return()}finally{if(I)throw $}}}}}},{key:"updateChildrenTransitionsInAndOutOfGroup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getGroupNodesByToNodeId(t.id),i=this.getTransitionsByFromNodeId(t.id),r=!1,o=!0,s=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null==i||0==i.length)this.updateTransitionsForExtractingGroup(u.id,t.id,null),r=!0;else{var h=!0,d=!1,f=void 0;try{for(var p,m=i[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;if(null!=g){var v=g.to;this.updateTransitionsForExtractingGroup(u.id,t.id,v),r=!0}}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}if(!r&&null!=i){var y=!0,b=!1,_=void 0;try{for(var w,S=i[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){var x=w.value;if(null!=x){var C=x.to;this.updateTransitionsForExtractingGroup(null,t.id,C),r=!0}}}catch(t){b=!0,_=t}finally{try{!y&&S.return&&S.return()}finally{if(b)throw _}}}var k=!1;if(null!=e){var T=this.getTransitionsByFromNodeId(e),M=!0,E=!1,A=void 0;try{for(var I,$=T[Symbol.iterator]();!(M=(I=$.next()).done);M=!0){var D=I.value;if(null!=D){var L=D.to;this.updateTransitionsForInsertingGroup(e,[L],t.id),k=!0}}}catch(t){E=!0,A=t}finally{try{!M&&$.return&&$.return()}finally{if(E)throw A}}}if(!k)if(null==e){var P=this.getStartGroupId();if(null!=P){var O=this.getNodeById(P);if(null!=O){var N=O.startId;this.updateTransitionsForInsertingGroup(e,[N],t.id)}}}else this.updateTransitionsForInsertingGroup(e,null,t.id)}},{key:"getActiveNodes",value:function(){return this.project.nodes}},{key:"getInactiveNodes",value:function(){var t=[];return null!=this.project&&(null==this.project.inactiveNodes&&(this.project.inactiveNodes=[]),t=this.project.inactiveNodes),t}},{key:"removeNodeFromInactiveNodes",value:function(t){var e=null;if(null!=t){null!=this.getParentGroup(t)&&this.removeChildFromParent(t);var n=this.project.inactiveNodes;if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];if(null!=r&&t===r.id){e=r,n.splice(i,1);break}}this.removeNodeFromInactiveStepNodes(t),this.removeNodeFromInactiveGroupNodes(t)}return e}},{key:"removeChildFromParent",value:function(t){var e=this.getParentGroup(t);if(null!=e){for(var n=0;n<e.ids.length;n++){if(t==e.ids[n]){e.ids.splice(n,1);break}}if(t==e.startId){var i=!1,r=this.getTransitionsByFromNodeId(t);null!=r&&r.length>0&&null!=r[0]&&null!=r[0].to&&(e.startId=r[0].to,i=!0),!i&&e.ids.length>0&&(e.startId=e.ids[0],i=!0),i||(e.startId="")}}}},{key:"removeNodeFromInactiveStepNodes",value:function(t){for(var e=0;e<this.inactiveStepNodes.length;e++){if(t==this.inactiveStepNodes[e].id){this.inactiveStepNodes.splice(e,1);break}}}},{key:"removeNodeFromInactiveGroupNodes",value:function(t){for(var e=0;e<this.inactiveGroupNodes.length;e++){if(t==this.inactiveGroupNodes[e].id){this.inactiveGroupNodes.splice(e,1);break}}}},{key:"loadInactiveNodes",value:function(t){if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s){var a=s.id;this.setIdToNode(a,s),this.setIdToElement(a,s),"group"==s.type?this.inactiveGroupNodes.push(s):this.inactiveStepNodes.push(s)}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"isActive",value:function(t){return"inactiveNodes"!==t&&"inactiveGroups"!==t&&this.isNodeActive(t)}},{key:"isNodeActive",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.project.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){if(r.value.id==t)return!0}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return!1}},{key:"moveToActive",value:function(t){if(!this.isActive(t.id)&&(this.removeNodeFromInactiveNodes(t.id),this.addNode(t),this.isGroupNode(t.id))){var e=!0,n=!1,i=void 0;try{for(var r,o=t.ids[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,a=this.removeNodeFromInactiveNodes(s);this.addNode(a)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"addGroupChildNodesToInactive",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t.ids[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,a=this.getNodeById(s);this.project.inactiveNodes.push(a),this.inactiveStepNodes.push(a)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"removeTransitionsOutOfGroup",value:function(t){var e=this.getNodeById(t),n=!0,i=!1,r=void 0;try{for(var o,s=e.ids[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)for(var a=o.value,l=this.getTransitionsByFromNodeId(a),c=0;c<l.length;c++){var u=l[c];this.getParentGroupId(u.to)!=t&&(l.splice(c,1),c--)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}},{key:"updateChildrenTransitionsIntoGroupWeAreMoving",value:function(t,e){if(null!=t&&null!=e){var n=this.getNodeById(e);if(null!=n){this.getNodesByToNodeId(e);var i=n.transitionLogic,r=[];if(null!=i&&null!=i.transitions&&(r=i.transitions),0==r.length){var o=t.ids;if(null!=o){var s=!0,a=!1,l=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value,d=this.getTransitionsByFromNodeId(h);if(null!=d)for(var f=0;f<d.length;f++){var p=d[f];if(null!=p){var m=p.to;e===this.getParentGroupId(m)&&(d.splice(f,1),f--)}}}}catch(t){a=!0,l=t}finally{try{!s&&u.return&&u.return()}finally{if(a)throw l}}}}else if(r.length>0){var g=r[0].to;if(this.isGroupNode(g)){var v=this.getNodeById(g),y=t.ids;if(null!=y){var b=!0,_=!1,w=void 0;try{for(var S,x=y[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value,k=this.getTransitionsByFromNodeId(C);if(null!=k){var T=!0,M=!1,E=void 0;try{for(var A,I=k[Symbol.iterator]();!(T=(A=I.next()).done);T=!0){var $=A.value;if(null!=$){var D=$.to;e===this.getParentGroupId(D)&&(null==v.startId?$.to=g:$.to=v.startId)}}}catch(t){M=!0,E=t}finally{try{!T&&I.return&&I.return()}finally{if(M)throw E}}}}}catch(t){_=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(_)throw w}}}}}}}}},{key:"nodeHasWork",value:function(t){if(null!=t){var e=this.getNodeContentByNodeId(t);if(null!=e){var n=e.components;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l)if(this.componentHasWork(l))return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}return!1}},{key:"componentHasWork",value:function(t){if(null!=t){var e=t.type,n=this.getComponentService(e);if(null!=n)return n.componentHasWork(t)}return!1}},{key:"getComponentService",value:function(t){var e=null;if(null!=t){var n=t+"Service";null==(e=this.componentServices[n])&&(e=this.$injector.get(n),this.componentServices[n]=e)}return e}},{key:"getUnusedComponentId",value:function(t){var e=this.UtilService.generateKey(10);if(this.isComponentIdUsed(e))for(var n=!0;!n;)e=this.UtilService.generateKey(10),n=this.isComponentIdUsed(e),null!=t&&-1!=t.indexOf(e)&&(n=!0);return e}},{key:"isComponentIdUsed",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.project.nodes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s){var a=s.components;if(null!=a){var l=!0,c=!1,u=void 0;try{for(var h,d=a[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;if(null!=f&&t===f.id)return!0}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}var p=!0,m=!1,g=void 0;try{for(var v,y=this.project.inactiveNodes[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var b=v.value;if(null!=b){var _=b.components;if(null!=_){var w=!0,S=!1,x=void 0;try{for(var C,k=_[Symbol.iterator]();!(w=(C=k.next()).done);w=!0){var T=C.value;if(null!=T&&t===T.id)return!0}}catch(t){S=!0,x=t}finally{try{!w&&k.return&&k.return()}finally{if(S)throw x}}}}}}catch(t){m=!0,g=t}finally{try{!p&&y.return&&y.return()}finally{if(m)throw g}}return!1}},{key:"getNextAvailableConstraintIdForNodeId",value:function(t){var e=null;if(null!=t){var n=[],i=this.getNodeById(t);if(null!=i){var r=i.constraints;if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=u.id;n.push(h)}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}}for(var d=!1,f=1;!d;){var p=t+"Constraint"+f;-1==n.indexOf(p)?(e=p,d=!0):f++}}return e}},{key:"getNodeIdsInBranch",value:function(t,e){var n=[],i=this.getNodes();if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;null!=c&&this.hasBranchPathTakenConstraint(c,t,e)&&n.push(c.id)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}return this.orderNodeIds(n),n}},{key:"orderNodeIds",value:function(t){var e=this.getFlattenedProjectAsNodeIds();return t.sort(this.nodeIdsComparatorGenerator(e))}},{key:"nodeIdsComparatorGenerator",value:function(t){return function(e,n){var i=t.indexOf(e),r=t.indexOf(n);return i<r?-1:i>r?1:0}}},{key:"hasBranchPathTakenConstraint",value:function(t,e,n){var i=t.constraints;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=!0,h=!1,d=void 0;try{for(var f,p=c.removalCriteria[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if("branchPathTaken"==m.name){var g=m.params;if(g.fromNodeId==e&&g.toNodeId==n)return!0}}}catch(t){h=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}return!1}},{key:"removeBranchPathTakenNodeConstraintsIfAny",value:function(t){var e=this.getNodeById(t).constraints;if(null!=e)for(var n=0;n<e.length;n++){var i=e[n].removalCriteria,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){"branchPathTaken"==a.value.name&&(e.splice(n,1),n--)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"getBranchPathTakenConstraintsByNodeId",value:function(t){var e=[],n=this.getNodeById(t).constraints;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=!0,u=!1,h=void 0;try{for(var d,f=l.removalCriteria[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){if("branchPathTaken"==d.value.name){e.push(l);break}}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"getProjectRubric",value:function(){return this.project.rubric}},{key:"isBranchPoint",value:function(t){var e=this.getTransitionsByFromNodeId(t);return null!=e&&e.length>1}},{key:"isFirstNodeInBranchPath",value:function(t){var e=this.getNodes();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&null!=a.transitionLogic&&null!=a.transitionLogic.transitions){var l=a.transitionLogic.transitions;if(l.length>1){var c=!0,u=!1,h=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;if(null!=p)if(p.to===t)return!0}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}}}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return!1}},{key:"isNodeInAnyBranchPath",value:function(t){var e=!1;if(null==this.nodeIdToIsInBranchPath[t]){var n=this.getBranches();e=this.isNodeIdInABranch(n,t),this.nodeIdToIsInBranchPath[t]=e}else e=this.nodeIdToIsInBranchPath[t];return e}},{key:"isBranchStartPoint",value:function(t){var e=this.getBranches();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.branchStartPoint==t)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return!1}},{key:"isBranchMergePoint",value:function(t){var e=this.getBranches();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.branchEndPoint==t)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return!1}},{key:"getBranchesByBranchStartPointNodeId",value:function(t){var e=[],n=this.getBranches();if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&t==l.branchStartPoint&&e.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"calculateNodeNumbers",value:function(){this.nodeIdToNumber={},this.nodeIdToBranchPathLetter={};var t=this.getStartNodeId();this.calculateNodeNumbersHelper(t,0,0)}},{key:"calculateNodeNumbersHelper",value:function(t,e,n,i){if(null!=t)if(this.isApplicationNode(t)){var r=this.getNodeById(t);if(null!=r){var o=this.getParentGroup(t);if(null!=o&&(null==this.nodeIdToNumber[o.id]?(e=parseInt(e)+1,n=1,this.nodeIdToNumber[o.id]=""+e):e=this.nodeIdToNumber[o.id]),this.isBranchMergePoint(t)&&(i=null),this.isBranchStartPoint(t)){var s=this.getBranchesByBranchStartPointNodeId(t)[0],a=0;this.nodeIdToNumber[t]=e+"."+n,n++;for(var l=s.branchPaths,c=0;c<l.length;c++)for(var u=l[c],h=n,d=c,f=0;f<u.length;f++){if(0==f){var p=u[f];this.calculateNodeNumbersHelper(p,e,h,d)}++h>a&&(a=h)}n=a;var m=s.branchEndPoint;this.calculateNodeNumbersHelper(m,e,n)}else{if(null!=this.nodeIdToNumber[t])return;var g=null;if(null==i)g=e+"."+n;else{var v=String.fromCharCode(65+i);g=e+"."+n+" "+v,this.nodeIdToBranchPathLetter[t]=v}this.nodeIdToNumber[t]=g,n++;var y=[];if(null!=r.transitionLogic&&r.transitionLogic.transitions&&(y=r.transitionLogic.transitions),y.length>0){var b=!0,_=!1,w=void 0;try{for(var S,x=y[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value;null!=C&&(this.isBranchMergePoint(C.to)||this.calculateNodeNumbersHelper(C.to,e,n,i))}}catch(t){_=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(_)throw w}}}else if(null!=o&&null!=o.transitionLogic&&null!=o.transitionLogic.transitions&&o.transitionLogic.transitions.length>0){var k=!0,T=!1,M=void 0;try{for(var E,A=o.transitionLogic.transitions[Symbol.iterator]();!(k=(E=A.next()).done);k=!0){var I=E.value;null!=I&&this.calculateNodeNumbersHelper(I.to,e,n,i)}}catch(t){T=!0,M=t}finally{try{!k&&A.return&&A.return()}finally{if(T)throw M}}}}}}else{var $=this.getNodeById(t);if(null!=$){if(null!=this.nodeIdToNumber[t])return;if("group0"==t?this.nodeIdToNumber[t]="0":(e=parseInt(e)+1,n=1,this.nodeIdToNumber[t]=""+e),null!=$.startId&&""!=$.startId)this.calculateNodeNumbersHelper($.startId,e,n,i);else if(null!=$&&null!=$.transitionLogic&&null!=$.transitionLogic.transitions&&$.transitionLogic.transitions.length>0){var D=!0,L=!1,P=void 0;try{for(var O,N=$.transitionLogic.transitions[Symbol.iterator]();!(D=(O=N.next()).done);D=!0){var j=O.value;null!=j&&this.calculateNodeNumbersHelper(j.to,e,n,i)}}catch(t){L=!0,P=t}finally{try{!D&&N.return&&N.return()}finally{if(L)throw P}}}}}}},{key:"getProjectScript",value:function(){return this.project.script}},{key:"getNextNodeId",value:function(t){var e=this.getFlattenedProjectAsNodeIds();if(null!=e){var n=e.indexOf(t);if(-1!=n)return e[n+1]}return null}},{key:"getAchievements",value:function(){return null==this.project.achievements&&(this.project.achievements={isEnabled:!1,items:[]}),this.project.achievements}},{key:"getAchievementItems",value:function(){var t=this.getAchievements();return null==t.items&&(t.items=[]),t.items}},{key:"getAchievementByAchievementId",value:function(t){if(null!=t){var e=this.getAchievements();if(null!=e){var n=e.items;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l&&l.id==t)return l}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}return null}},{key:"getNumberOfRubricsByNodeId",value:function(t){var e=0,n=this.getNodeContentByNodeId(t);if(n){var i=n.rubric;null!=i&&""!=i&&e++;var r=n.components;if(r&&r.length){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var h=u.rubric;null!=h&&""!=h&&e++}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}}return e}},{key:"cacheIsNodeAffectedByConstraintResult",value:function(t,e,n){this.isNodeAffectedByConstraintResult[t+"-"+e]=n}},{key:"getCachedIsNodeAffectedByConstraintResult",value:function(t,e){return this.isNodeAffectedByConstraintResult[t+"-"+e]}},{key:"getIdToNode",value:function(){return this.idToNode}},{key:"nodeHasRubric",value:function(t){return this.getNumberOfRubricsByNodeId(t)>0}},{key:"getSpaces",value:function(){return null!=this.project.spaces?this.project.spaces:[]}},{key:"addSpace",value:function(t){null==this.project.spaces&&(this.project.spaces=[]),this.isSpaceExists(t.id)||(this.project.spaces.push(t),this.saveProject())}},{key:"isSpaceExists",value:function(t){var e=this.getSpaces(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.id===t)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return!1}},{key:"removeSpace",value:function(t){for(var e=this.getSpaces(),n=0;n<e.length;n++)if(e[n].id==t)return e.splice(n,1),void this.saveProject()}},{key:"hasAdditionalProcessingFunctions",value:function(t,e){return null!=this.getAdditionalProcessingFunctions(t,e)}},{key:"getAdditionalProcessingFunctions",value:function(t,e){var n=t+"_"+e;return this.additionalProcessingFunctionsMap[n]}},{key:"getFeaturedProjectIcons",value:function(){var t=this.ConfigService.getConfigParam("featuredProjectIcons");return this.$http.get(t).then(function(t){return t.data})}},{key:"setFeaturedProjectIcon",value:function(t){var e=this.ConfigService.getConfigParam("featuredProjectIcon");return this.setProjectIcon(t,e)}},{key:"setCustomProjectIcon",value:function(t){var e=this.ConfigService.getConfigParam("customProjectIcon");return this.setProjectIcon(t,e)}},{key:"setProjectIcon",value:function(e,n){var i=this.ConfigService.getProjectId(),r={method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t.param({projectId:i,projectIcon:e})};return this.$http(r).then(function(t){return t.data})}}]),e}();o.$inject=["$filter","$http","$injector","$q","$rootScope","ConfigService","UtilService"],e.default=o}).call(this,n(1))},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});class i{constructor(t,e,n,i,r){this.$scope=t,this.$element=e,this.$filter=n,this.StudentStatusService=i,this.ConfigService=r,this.$translate=this.$filter("translate"),this.$scope.$watch(()=>this.response.replies.length,(t,e)=>{e!==t&&this.toggleExpanded(!0)})}getAvatarColorForWorkgroupId(t){return this.ConfigService.getAvatarColorForWorkgroupId(t)}replyEntered(t,e){13===t.keyCode&&e.replyText&&this.submitButtonClicked(e)}submitButtonClicked(t){this.submitbuttonclicked({r:t})}deleteButtonClicked(t){confirm(this.$translate("discussion.areYouSureYouWantToDeleteThisPost"))&&this.deletebuttonclicked({componentState:t})}undoDeleteButtonClicked(t){confirm(this.$translate("discussion.areYouSureYouWantToShowThisPost"))&&this.undodeletebuttonclicked({componentState:t})}toggleExpanded(e){if(this.expanded=!!e||!this.expanded,this.expanded){var n=t(this.element).find(".discussion-comments__list");setTimeout(function(){n.animate({scrollTop:n.height()},250)},250)}}adjustClientSaveTime(t){return this.ConfigService.convertToClientTimestamp(t)}}i.$inject=["$scope","$element","$filter","StudentStatusService","ConfigService"];const r={bindings:{response:"=",mode:"=",deletebuttonclicked:"&",undodeletebuttonclicked:"&",submitbuttonclicked:"&",studentdatachanged:"&",isdisabled:"="},templateUrl:"wise5/components/discussion/classResponse.html",controller:"ClassResponseController as classResponseCtrl"}}).call(this,n(1))},function(t,e,n){"use strict";(function(e){var i=n(269),r=n(273),o=n(276),s=document,a=s.documentElement;function l(t,n,i,o){e.navigator.pointerEnabled?r[n](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],o):e.navigator.msPointerEnabled?r[n](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],o):(r[n](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],o),r[n](t,i,o))}function c(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function u(t,n){return void 0!==e[n]?e[n]:a.clientHeight?a[t]:s.body[t]}function h(t,e,n){var i,r=t||{},o=r.className;return r.className+=" gu-hide",i=s.elementFromPoint(e,n),r.className=o,i}function d(){return!1}function f(){return!0}function p(t){return t.width||t.right-t.left}function m(t){return t.height||t.bottom-t.top}function g(t){return t.parentNode===s?null:t.parentNode}function v(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function t(e){if(!e)return!1;if("false"===e.contentEditable)return!1;if("true"===e.contentEditable)return!0;return t(g(e))}(t)}function y(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function b(t,e){var n=function(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(e),i={pageX:"clientX",pageY:"clientY"};return t in i&&!(t in n)&&i[t]in n&&(t=i[t]),n[t]}t.exports=function(t,e){var n,_,w,S,x,C,k,T,M,E,A;1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var I,$=null,D=e||{};void 0===D.moves&&(D.moves=f),void 0===D.accepts&&(D.accepts=f),void 0===D.invalid&&(D.invalid=function(){return!1}),void 0===D.containers&&(D.containers=t||[]),void 0===D.isContainer&&(D.isContainer=d),void 0===D.copy&&(D.copy=!1),void 0===D.copySortSource&&(D.copySortSource=!1),void 0===D.revertOnSpill&&(D.revertOnSpill=!1),void 0===D.removeOnSpill&&(D.removeOnSpill=!1),void 0===D.direction&&(D.direction="vertical"),void 0===D.ignoreInputTextSelection&&(D.ignoreInputTextSelection=!0),void 0===D.mirrorContainer&&(D.mirrorContainer=s.body);var L=i({containers:D.containers,start:function(t){var e=Y(t);e&&H(e)},end:W,cancel:q,remove:G,destroy:function(){O(!0),U({})},canMove:function(t){return!!Y(t)},dragging:!1});return!0===D.removeOnSpill&&L.on("over",function(t){o.rm(t,"gu-hide")}).on("out",function(t){L.dragging&&o.add(t,"gu-hide")}),O(),L;function P(t){return-1!==L.containers.indexOf(t)||D.isContainer(t)}function O(t){var e=t?"remove":"add";l(a,e,"mousedown",B),l(a,e,"mouseup",U)}function N(t){l(a,t?"remove":"add","mousemove",F)}function j(t){var e=t?"remove":"add";r[e](a,"selectstart",R),r[e](a,"click",R)}function R(t){I&&t.preventDefault()}function B(t){if(C=t.clientX,k=t.clientY,!(1!==c(t)||t.metaKey||t.ctrlKey)){var e=t.target,n=Y(e);n&&(I=n,N(),"mousedown"===t.type&&(v(e)?e.focus():t.preventDefault()))}}function F(t){if(I)if(0!==c(t)){if(void 0===t.clientX||t.clientX!==C||void 0===t.clientY||t.clientY!==k){if(D.ignoreInputTextSelection){var e=b("clientX",t),i=b("clientY",t);if(v(s.elementFromPoint(e,i)))return}var r=I;N(!0),j(),W(),H(r);var h,d={left:(h=w.getBoundingClientRect()).left+u("scrollLeft","pageXOffset"),top:h.top+u("scrollTop","pageYOffset")};S=b("pageX",t)-d.left,x=b("pageY",t)-d.top,o.add(E||w,"gu-transit"),function(){if(n)return;var t=w.getBoundingClientRect();(n=w.cloneNode(!0)).style.width=p(t)+"px",n.style.height=m(t)+"px",o.rm(n,"gu-transit"),o.add(n,"gu-mirror"),D.mirrorContainer.appendChild(n),l(a,"add","mousemove",Z),o.add(D.mirrorContainer,"gu-unselectable"),L.emit("cloned",n,w,"mirror")}(),Z(t)}}else U({})}function Y(t){if(!(L.dragging&&n||P(t))){for(var e=t;g(t)&&!1===P(g(t));){if(D.invalid(t,e))return;if(!(t=g(t)))return}var i=g(t);if(i)if(!D.invalid(t,e))if(D.moves(t,i,e,y(t)))return{item:t,source:i}}}function H(t){var e,n;e=t.item,n=t.source,("boolean"==typeof D.copy?D.copy:D.copy(e,n))&&(E=t.item.cloneNode(!0),L.emit("cloned",E,t.item,"copy")),_=t.source,w=t.item,T=M=y(t.item),L.dragging=!0,L.emit("drag",w,_)}function W(){if(L.dragging){var t=E||w;V(t,g(t))}}function z(){I=!1,N(!0),j(!0)}function U(t){if(z(),L.dragging){var e=E||w,i=b("clientX",t),r=b("clientY",t),o=J(h(n,i,r),i,r);o&&(E&&D.copySortSource||!E||o!==_)?V(e,o):D.removeOnSpill?G():q()}}function V(t,e){var n=g(t);E&&D.copySortSource&&e===_&&n.removeChild(w),K(e)?L.emit("cancel",t,_,_):L.emit("drop",t,e,_,M),X()}function G(){if(L.dragging){var t=E||w,e=g(t);e&&e.removeChild(t),L.emit(E?"cancel":"remove",t,e,_),X()}}function q(t){if(L.dragging){var e=arguments.length>0?t:D.revertOnSpill,n=E||w,i=g(n),r=K(i);!1===r&&e&&(E?i&&i.removeChild(E):_.insertBefore(n,T)),r||e?L.emit("cancel",n,_,_):L.emit("drop",n,i,_,M),X()}}function X(){var t=E||w;z(),n&&(o.rm(D.mirrorContainer,"gu-unselectable"),l(a,"remove","mousemove",Z),g(n).removeChild(n),n=null),t&&o.rm(t,"gu-transit"),A&&clearTimeout(A),L.dragging=!1,$&&L.emit("out",t,$,_),L.emit("dragend",t),_=w=E=T=M=A=$=null}function K(t,e){var i;return i=void 0!==e?e:n?M:y(E||w),t===_&&i===T}function J(t,e,n){for(var i=t;i&&!r();)i=g(i);return i;function r(){if(!1===P(i))return!1;var r=Q(i,t),o=tt(i,r,e,n);return!!K(i,o)||D.accepts(w,i,_,o)}}function Z(t){if(n){t.preventDefault();var e=b("clientX",t),i=b("clientY",t),r=e-S,o=i-x;n.style.left=r+"px",n.style.top=o+"px";var s=E||w,a=h(n,e,i),l=J(a,e,i),c=null!==l&&l!==$;(c||null===l)&&($&&p("out"),$=l,c&&p("over"));var u=g(s);if(l!==_||!E||D.copySortSource){var d,f=Q(l,a);if(null!==f)d=tt(l,f,e,i);else{if(!0!==D.revertOnSpill||E)return void(E&&u&&u.removeChild(s));d=T,l=_}(null===d&&c||d!==s&&d!==y(s))&&(M=d,l.insertBefore(s,d),L.emit("shadow",s,l,_))}else u&&u.removeChild(s)}function p(t){L.emit(t,s,$,_)}}function Q(t,e){for(var n=e;n!==t&&g(n)!==t;)n=g(n);return n===a?null:n}function tt(t,e,n,i){var r="horizontal"===D.direction;return e!==t?function(){var t=e.getBoundingClientRect();if(r)return o(n>t.left+p(t)/2);return o(i>t.top+m(t)/2)}():function(){var e,o,s,a=t.children.length;for(e=0;e<a;e++){if(o=t.children[e],s=o.getBoundingClientRect(),r&&s.left+s.width/2>n)return o;if(!r&&s.top+s.height/2>i)return o}return null}();function o(t){return t?y(e):e}}}}).call(this,n(7))},function(t,e){t.exports=function(t,e){return Array.prototype.slice.call(t,e)}},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(272),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(t,e,n){!function(t){"use strict";t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},o=function(t){return function(e,n,o,s){var a=i(e),l=r[t][i(e)];return 2===a&&(l=l[n?0:1]),l.replace(/%d/i,e)}},s=["","","","","","","","","","","",""];t.defineLocale("ar",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]}).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ar-dz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(t){return function(e,r,o,s){var a=n(e),l=i[t][n(e)];return 2===a&&(l=l[r?0:1]),l.replace(/%d/i,e)}},o=["","","","","","","","","","","",""];t.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]}).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(t){return/^(gndz|axam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gec":t<12?"shr":t<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(t){if(0===t)return t+"-nc";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i,r;return"m"===n?e?"":"":"h"===n?e?"":"":t+" "+(i=+t,r={ss:e?"__":"__",mm:e?"__":"__",hh:e?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2])}t.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:e,mm:e,h:e,hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-":t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){return t+" "+function(t,e){return 2===e?function(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}(t):t}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:function(t){switch(function t(e){return e>9?t(e%10):e}(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(t){return t+(1===t?"a":"vet")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),i=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],r=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function o(t){return t>1&&t<5&&1!=~~(t/10)}function s(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"pr sekund":"pr sekundami";case"ss":return e||i?r+(o(t)?"sekundy":"sekund"):r+"sekundami";case"m":return e?"minuta":i?"minutu":"minutou";case"mm":return e||i?r+(o(t)?"minuty":"minut"):r+"minutami";case"h":return e?"hodina":i?"hodinu":"hodinou";case"hh":return e||i?r+(o(t)?"hodiny":"hodin"):r+"hodinami";case"d":return e||i?"den":"dnem";case"dd":return e||i?r+(o(t)?"dny":"dn"):r+"dny";case"M":return e||i?"msc":"mscem";case"MM":return e||i?r+(o(t)?"msce":"msc"):r+"msci";case"y":return e||i?"rok":"rokem";case"yy":return e||i?r+(o(t)?"roky":"let"):r+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(t){return t+(/$/i.exec(t)?"":/$/i.exec(t)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(t,e){return t?"string"==typeof e&&/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(t,e,n){return t>11?n?"":"":n?"":""},isPM:function(t){return""===(t+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,e){var n,i=this._calendarEl[t],r=e&&e.hours();return((n=i)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(e)),i.replace("{}",r%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-SG",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],ss:[t+"sekundi",t+"sekundit"],m:["he minuti","ks minut"],mm:[t+" minuti",t+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[t+" tunni",t+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[t+" kuu",t+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d peva",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(t){return/  /.test(t)},meridiem:function(t,e,n){return t<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:" d%",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[-]/g,function(t){return n[t]}).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",e[7],e[8],e[9]];function i(t,i,r,o){var s="";switch(r){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"ss":return o?"sekunnin":"sekuntia";case"m":return o?"minuutin":"minuutti";case"mm":s=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":s=o?"tunnin":"tuntia";break;case"d":return o?"pivn":"piv";case"dd":s=o?"pivn":"piv";break;case"M":return o?"kuukauden":"kuukausi";case"MM":s=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":s=o?"vuoden":"vuotta"}return s=function(t,i){return t<10?i?n[t]:e[t]:t}(t,o)+" "+s}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,e){switch(e){case"D":return t+(1===t?"er":"");default:case"M":case"Q":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Mitheamh","Iil","Lnasa","Men Fmhair","Deaireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feab","Mrt","Aibr","Beal","Mit","Iil","Lna","Men","Deai","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Satharn"],weekdaysShort:["Dom","Lua","Mi","Ca","Da","hAo","Sat"],weekdaysMin:["Do","Lu","M","Ce","D","hA","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn aig] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d m",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["thodde secondanim","thodde second"],ss:[t+" secondanim",t+" second"],m:["eka mintan","ek minute"],mm:[t+" mintanim",t+" mintam"],h:["eka voran","ek vor"],hh:[t+" voranim",t+" voram"],d:["eka disan","ek dis"],dd:[t+" disanim",t+" dis"],M:["eka mhoinean","ek mhoino"],MM:[t+" mhoineanim",t+" mhoine"],y:["eka vorsan","ek voros"],yy:[t+" vorsanim",t+" vorsam"]};return e?r[n][0]:r[n][1]}t.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(t,e){switch(e){case"D":return t+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(t,e){return 12===t&&(t=0),"rati"===e?t<4?t:t+12:"sokalli"===e?t:"donparam"===e?t>12?t:t+12:"sanje"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"rati":t<12?"sokalli":t<16?"donparam":t<20?"sanje":"rati"}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(t){return 2===t?"":t+" "},d:"",dd:function(t){return 2===t?"":t+" "},M:"",MM:function(t){return 2===t?"":t+" "},y:"",yy:function(t){return 2===t?"":t%10==0&&10!==t?t+" ":t+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(t){return/^("| |)$/.test(t)},meridiem:function(t,e,n){return t<5?" ":t<10?"":t<12?n?'"':" ":t<18?n?'"':" ":""}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(t,e,n,i){var r=t;switch(n){case"s":return i||e?"nhny msodperc":"nhny msodperce";case"ss":return r+(i||e)?" msodperc":" msodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" ra":" rja");case"hh":return r+(i||e?" ra":" rja");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hnap":" hnapja");case"MM":return r+(i||e?" hnap":" hnapja");case"y":return"egy"+(i||e?" v":" ve");case"yy":return r+(i||e?" v":" ve")}return""}function i(t){return(t?"":"[mlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-":t+"-";default:return t}},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t){return t%100==11||t%10!=1}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"ss":return e(t)?o+(n||r?"sekndur":"sekndum"):o+"seknda";case"m":return n?"mnta":"mntu";case"mm":return e(t)?o+(n||r?"mntur":"mntum"):n?o+"mnta":o+"mntu";case"hh":return e(t)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(r?"daga":"dgum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mnuur":r?"mnu":"mnui";case"MM":return e(t)?n?o+"mnuir":o+(r?"mnui":"mnuum"):n?o+"mnuur":o+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":return e(t)?o+(n||r?"r":"rum"):o+(n||r?"r":"ri")}}t.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ja",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(t){return t.week()<this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(t){return this.week()<t.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(t){return/(|||)/.test(t)?t.replace(/$/,""):t+""},past:function(t){return/(||||)/.test(t)?t.replace(/(|)$/," ")://.test(t)?t.replace(/$/," "):void 0},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(t){return 0===t?t:1===t?t+"-":t<20||t<=100&&t%20==0||t%100==0?"-"+t:t+"-"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(t){return t+""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[" ","","","","","","","",""," "," "," "];t.defineLocale("ku",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return//.test(t)},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]}).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?r[n][0]:r[n][1]}function n(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return n(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return n(t)}return n(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(t){return n(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t},past:function(t){return n(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t},s:"e puer Sekonnen",ss:"%d Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Mint",y:e,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(t){return""+t}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(t,e,n,i){return e?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(t){return t%10==0||t>10&&t<20}function r(t){return e[t].split("_")}function o(t,e,o,s){var a=t+" ";return 1===t?a+n(0,e,o[0],s):e?a+(i(t)?r(o)[1]:r(o)[0]):s?a+r(o)[1]:a+(i(t)?r(o)[1]:r(o)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(t,e,n,i){return e?"kelios sekunds":i?"keli sekundi":"kelias sekundes"},ss:o,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function i(t,i,r){return t+" "+n(e[r],t,i)}function r(t,i,r){return n(e[r],t,i)}t.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(t,e){return e?"daas sekundes":"dam sekundm"},ss:i,m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||" "===e||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?" ":t<20?"":""}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){switch(n){case"s":return e?" ":" ";case"ss":return t+(e?" ":" ");case"m":case"mm":return t+(e?" ":" ");case"h":case"hh":return t+(e?" ":" ");case"d":case"dd":return t+(e?" ":" ");case"M":case"MM":return t+(e?" ":" ");case"y":case"yy":return t+(e?" ":" ");default:return t}}t.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+" ";default:return t}}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function i(t,e,n,i){var r="";if(e)switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}else switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}return r.replace(/%d/i,t)}t.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"":t<12?"":t<16?"":t<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function i(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function r(t,e,n){var r=t+" ";switch(n){case"ss":return r+(i(t)?"sekundy":"sekund");case"m":return e?"minuta":"minut";case"mm":return r+(i(t)?"minuty":"minut");case"h":return e?"godzina":"godzin";case"hh":return r+(i(t)?"godziny":"godzin");case"MM":return r+(i(t)?"miesice":"miesicy");case"yy":return r+(i(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,i){return t?""===i?"("+n[t.month()]+"|"+e[t.month()]+")":/D MMMM/.test(i)?n[t.month()]:e[t.month()]:e},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:r,m:r,mm:r,h:r,hh:r,d:"1 dzie",dd:"%d dni",M:"miesic",MM:r,y:"rok",yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d"})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=" ";return(t%100>=20||t>=100&&t%100==0)&&(i=" de "),t+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:e,m:"un minut",mm:e,h:"o or",hh:e,d:"o zi",dd:e,M:"o lun",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i,r;return"m"===n?e?"":"":t+" "+(i=+t,r={ss:e?"__":"__",mm:e?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2])}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:e,m:e,mm:e,h:"",hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/i,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("sd",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t){return t+" "},meridiemParse:/ | |.|../,isPM:function(t){return".."===t||" "===t},meridiem:function(t,e,n){return t>11?n?"..":" ":n?"..":" "}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function i(t){return t>1&&t<5}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pr seknd":"pr sekundami";case"ss":return e||r?o+(i(t)?"sekundy":"seknd"):o+"sekundami";case"m":return e?"minta":r?"mintu":"mintou";case"mm":return e||r?o+(i(t)?"minty":"mint"):o+"mintami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodn"):o+"hodinami";case"d":return e||r?"de":"dom";case"dd":return e||r?o+(i(t)?"dni":"dn"):o+"dami";case"M":return e||r?"mesiac":"mesiacom";case"MM":return e||r?o+(i(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return e||r?"rok":"rokom";case"yy":return e||r?o+(i(t)?"roky":"rokov"):o+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"ss":return r+=1===t?e?"sekundo":"sekundi":2===t?e||i?"sekundi":"sekundah":t<5?e||i?"sekunde":"sekundah":"sekund";case"m":return e?"ena minuta":"eno minuto";case"mm":return r+=1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami";case"h":return e?"ena ura":"eno uro";case"hh":return r+=1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami";case"d":return e||i?"en dan":"enim dnem";case"dd":return r+=1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi";case"M":return e||i?"en mesec":"enim mesecem";case"MM":return r+=1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci";case"y":return e||i?"eno leto":"enim letom";case"yy":return r+=1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti"}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"",dd:e.translate,M:"",MM:e.translate,y:"",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"e":1===e?"a":2===e?"a":"e")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t+""},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiemParse:/|||||/,meridiem:function(t,e,n){return t<2?" ":t<6?" ":t<10?" ":t<14?" ":t<18?" ":t<22?" ":" "},meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<2?t:t+12:""===e||""===e?t:""===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("tg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=11?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<11?"":t<16?"":t<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t,n,i,r){var o=function(t){var n=Math.floor(t%1e3/100),i=Math.floor(t%100/10),r=t%10,o="";return n>0&&(o+=e[n]+"vatlh"),i>0&&(o+=(""!==o?" ":"")+e[i]+"maH"),r>0&&(o+=(""!==o?" ":"")+e[r]),""===o?"pagh":o}(t);switch(i){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}t.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",ss:n,m:"wa tup",mm:n,h:"wa rep",hh:n,d:"wa jaj",dd:n,M:"wa jar",MM:n,y:"wa DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};t.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(t,n){switch(n){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'nc";var i=t%10;return t+(e[i]||e[t%100-i]||e[t>=100?100:null])}},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["viensas secunds","'iensas secunds"],ss:[t+" secunds",t+" secunds"],m:["'n mut","'iens mut"],mm:[t+" muts",t+" muts"],h:["'n ora","'iensa ora"],hh:[t+" oras",t+" oras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i?r[n][0]:e?r[n][0]:r[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(t,e){return 12===t&&(t=0)," "===e||""===e||" "===e?t:" "===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?" ":i<900?"":i<1130?" ":i<1230?"":i<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"-";case"w":case"W":return t+"-";default:return t}},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";function e(t,e,n){var i,r;return"m"===n?e?"":"":"h"===n?e?"":"":t+" "+(i=+t,r={ss:e?"__":"__",mm:e?"__":"__",hh:e?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2])}function n(t){return function(){return t+""+(11===this.hours()?"":"")+"] LT"}}t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===t?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):t?n[/(\[[]\]) ?dddd/.test(e)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]:n.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:n("[ "),nextDay:n("[ "),lastDay:n("[ "),nextWeek:n("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[] dddd [").call(this);case 1:case 2:case 4:return n("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:e,m:e,mm:e,h:"",hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("ur",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(0))},function(t,e,n){!function(t){"use strict";t.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(0))},function(t,e,n){"use strict";(function(e,i){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
var r=n(30),o=n(13),s=n(39),a=n(318),l=n(42),c=n(24),u=n(391),h=n(225),d=n(227),f=n(233),p=n(407),m=n(408),g=n(234),v=n(36),y=n(17).EventEmitter,b=13;function _(t,n,i){if(this instanceof _==!1)return new _(t,n,i);y.call(this),n&&!Array.isArray(n)&&"object"==typeof n&&(i=n,n=null),"string"==typeof n&&(n=[n]),Array.isArray(n)||(n=[]),this._socket=null,this._ultron=null,this._closeReceived=!1,this.bytesReceived=0,this.readyState=null,this.supports={},this.extensions={},this._binaryType="nodebuffer",Array.isArray(t)?function(t,e,n,i){i=new h({protocolVersion:b,protocol:null,extensions:{},maxPayload:0}).merge(i),this.protocol=i.value.protocol,this.protocolVersion=i.value.protocolVersion,this.extensions=i.value.extensions,this.supports.binary="hixie-76"!==this.protocolVersion,this.upgradeReq=t,this.readyState=_.CONNECTING,this._isServer=!0,this.maxPayload=i.value.maxPayload,"hixie-76"===i.value.protocolVersion?k.call(this,m,p,e,n):k.call(this,f,d,e,n)}.apply(this,t.concat(i)):function(t,n,i){if(8!==(i=new h({origin:null,protocolVersion:b,host:null,headers:null,protocol:n.join(","),agent:null,pfx:null,key:null,passphrase:null,cert:null,ca:null,ciphers:null,rejectUnauthorized:null,perMessageDeflate:!0,localAddress:null}).merge(i)).value.protocolVersion&&13!==i.value.protocolVersion)throw new Error("unsupported protocol version");var o=r.parse(t),c="ws+unix:"===o.protocol;if(!o.host&&!c)throw new Error("invalid url");var u,p="wss:"===o.protocol||"https:"===o.protocol,m=p?a:s,y=o.port||(p?443:80),w=o.auth,S={};i.value.perMessageDeflate&&(u=new v(!0!==typeof i.value.perMessageDeflate?i.value.perMessageDeflate:{},!1),S[v.extensionName]=u.offer());this._isServer=!1,this.url=t,this.protocolVersion=i.value.protocolVersion,this.supports.binary="hixie-76"!==this.protocolVersion;var x=new e(i.value.protocolVersion+"-"+Date.now()).toString("base64"),T=l.createHash("sha1");T.update(x+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var M=T.digest("base64"),A=i.value.agent,I=C(p,o.hostname,y),$={port:y,host:o.hostname,headers:{Connection:"Upgrade",Upgrade:"websocket",Host:I,"Sec-WebSocket-Version":i.value.protocolVersion,"Sec-WebSocket-Key":x}};w&&($.headers.Authorization="Basic "+new e(w).toString("base64"));i.value.protocol&&($.headers["Sec-WebSocket-Protocol"]=i.value.protocol);i.value.host&&($.headers.Host=i.value.host);if(i.value.headers)for(var D in i.value.headers)i.value.headers.hasOwnProperty(D)&&($.headers[D]=i.value.headers[D]);Object.keys(S).length&&($.headers["Sec-WebSocket-Extensions"]=g.format(S));(i.isDefinedAndNonNull("pfx")||i.isDefinedAndNonNull("key")||i.isDefinedAndNonNull("passphrase")||i.isDefinedAndNonNull("cert")||i.isDefinedAndNonNull("ca")||i.isDefinedAndNonNull("ciphers")||i.isDefinedAndNonNull("rejectUnauthorized"))&&(i.isDefinedAndNonNull("pfx")&&($.pfx=i.value.pfx),i.isDefinedAndNonNull("key")&&($.key=i.value.key),i.isDefinedAndNonNull("passphrase")&&($.passphrase=i.value.passphrase),i.isDefinedAndNonNull("cert")&&($.cert=i.value.cert),i.isDefinedAndNonNull("ca")&&($.ca=i.value.ca),i.isDefinedAndNonNull("ciphers")&&($.ciphers=i.value.ciphers),i.isDefinedAndNonNull("rejectUnauthorized")&&($.rejectUnauthorized=i.value.rejectUnauthorized),A||(A=new m.Agent($)));$.path=o.path||"/",A&&($.agent=A);c&&($.socketPath=o.pathname);i.value.localAddress&&($.localAddress=i.value.localAddress);i.value.origin&&(i.value.protocolVersion<13?$.headers["Sec-WebSocket-Origin"]=i.value.origin:$.headers.Origin=i.value.origin);var L=this,P=m.request($);P.on("error",function(t){L.emit("error",t),E.call(L,t)}),P.once("response",function(t){var e;L.emit("unexpected-response",P,t)||(e=new Error("unexpected server response ("+t.statusCode+")"),P.abort(),L.emit("error",e)),E.call(L,e)}),P.once("upgrade",function(t,e,n){if(L.readyState===_.CLOSED)return L.emit("close"),L.removeAllListeners(),void e.end();var r=t.headers["sec-websocket-accept"];if(void 0===r||r!==M)return L.emit("error","invalid server key"),L.removeAllListeners(),void e.end();var o=t.headers["sec-websocket-protocol"],s=(i.value.protocol||"").split(/, */),a=null;if(!i.value.protocol&&o?a="server sent a subprotocol even though none requested":i.value.protocol&&!o?a="server sent no subprotocol even though requested":o&&-1===s.indexOf(o)&&(a="server responded with an invalid protocol"),a)return L.emit("error",a),L.removeAllListeners(),void e.end();o&&(L.protocol=o);var l=g.parse(t.headers["sec-websocket-extensions"]);if(u&&l[v.extensionName]){try{u.accept(l[v.extensionName])}catch(t){return L.emit("error","invalid extension parameter"),L.removeAllListeners(),void e.end()}L.extensions[v.extensionName]=u}k.call(L,f,d,e,n),P.removeAllListeners(),P=null,A=null}),P.end(),this.readyState=_.CONNECTING}.apply(this,[t,n,i])}function w(t,e,n){this.type="message",this.data=t,this.target=n,this.binary=e}function S(t,e,n){this.type="close",this.wasClean=void 0===t||1e3===t,this.code=t,this.reason=e,this.target=n}function x(t){this.type="open",this.target=t}function C(t,e,n){var i=e;return e&&(t&&443!=n||!t&&80!=n)&&(i=i+":"+n),i}function k(t,e,n,r){var o=this._ultron=new u(n),s=!1,a=this;function l(t){s||a.readyState===_.CLOSED||(s=!0,n.removeListener("data",l),o.on("data",c),r&&r.length>0&&(c(r),r=null),t&&c(t))}function c(t){a.bytesReceived+=t.length,a._receiver.add(t)}n.setTimeout(0),n.setNoDelay(!0),this._receiver=new t(this.extensions,this.maxPayload),this._socket=n,o.on("end",E.bind(this)),o.on("close",E.bind(this)),o.on("error",E.bind(this)),o.on("data",l),i.nextTick(l),a._receiver.ontext=function(t,e){e=e||{},a.emit("message",t,e)},a._receiver.onbinary=function(t,e){(e=e||{}).binary=!0,a.emit("message",t,e)},a._receiver.onping=function(t,e){e=e||{},a.pong(t,{mask:!a._isServer,binary:!0===e.binary},!0),a.emit("ping",t,e)},a._receiver.onpong=function(t,e){a.emit("pong",t,e||{})},a._receiver.onclose=function(t,e,n){n=n||{},a._closeReceived=!0,a.close(t,e)},a._receiver.onerror=function(t,e){a.close(void 0!==e?e:1002,""),a.emit("error",t instanceof Error?t:new Error(t))},this._sender=new e(n,this.extensions),this._sender.on("error",function(t){a.close(1002,""),a.emit("error",t)}),this.readyState=_.OPEN,this.emit("open")}function T(t){t._queue=t._queue||[]}function M(t){var e=t._queue;if(void 0!==e){delete t._queue;for(var n=0,i=e.length;n<i;++n)e[n]()}}function E(t){if(this.readyState!==_.CLOSED){if(this.readyState=_.CLOSED,clearTimeout(this._closeTimer),this._closeTimer=null,!t&&this._closeReceived||(this._closeCode=1006),this.emit("close",this._closeCode||1e3,this._closeMessage||""),this._socket){this._ultron&&this._ultron.destroy(),this._socket.on("error",function(){try{this.destroy()}catch(t){}});try{t?this._socket.destroy():this._socket.end()}catch(t){}this._socket=null,this._ultron=null}this._sender&&(this._sender.removeAllListeners(),this._sender=null),this._receiver&&(this._receiver.cleanup(),this._receiver=null),this.extensions[v.extensionName]&&this.extensions[v.extensionName].cleanup(),this.extensions=null,this.removeAllListeners(),this.on("error",function(){}),delete this._queue}}o.inherits(_,y),["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t,e){_.prototype[t]=_[t]=e}),_.prototype.close=function(t,e){if(this.readyState!==_.CLOSED)if(this.readyState!==_.CONNECTING)if(this.readyState!==_.CLOSING){var n=this;try{this.readyState=_.CLOSING,this._closeCode=t,this._closeMessage=e;var i=!this._isServer;this._sender.close(t,e,i,function(t){t&&n.emit("error",t),n._closeReceived&&n._isServer?n.terminate():(clearTimeout(n._closeTimer),n._closeTimer=setTimeout(E.bind(n,!0),3e4))})}catch(t){this.emit("error",t)}}else this._closeReceived&&this._isServer&&this.terminate();else this.readyState=_.CLOSED},_.prototype.pause=function(){if(this.readyState!==_.OPEN)throw new Error("not opened");return this._socket.pause()},_.prototype.ping=function(t,e,n){if(this.readyState!==_.OPEN){if(!0===n)return;throw new Error("not opened")}void 0===(e=e||{}).mask&&(e.mask=!this._isServer),this._sender.ping(t,e)},_.prototype.pong=function(t,e,n){if(this.readyState!==_.OPEN){if(!0===n)return;throw new Error("not opened")}void 0===(e=e||{}).mask&&(e.mask=!this._isServer),this._sender.pong(t,e)},_.prototype.resume=function(){if(this.readyState!==_.OPEN)throw new Error("not opened");return this._socket.resume()},_.prototype.send=function(t,n,r){if("function"==typeof n&&(r=n,n={}),this.readyState===_.OPEN)if(t||(t=""),this._queue){var o=this;this._queue.push(function(){o.send(t,n,r)})}else{(n=n||{}).fin=!0,void 0===n.binary&&(n.binary=t instanceof ArrayBuffer||t instanceof e||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array),void 0===n.mask&&(n.mask=!this._isServer),void 0===n.compress&&(n.compress=!0),this.extensions[v.extensionName]||(n.compress=!1);var s="function"==typeof c.Readable?c.Readable:c.Stream;if(t instanceof s){T(this);o=this;!function(t,e,n,i){e.on("data",function(e){t.readyState===_.OPEN?(n.fin=!1,t._sender.send(e,n)):"function"==typeof i?i(new Error("not opened")):(delete t._queue,t.emit("error",new Error("not opened")))}),e.on("end",function(){t.readyState===_.OPEN?(n.fin=!0,t._sender.send(null,n),"function"==typeof i&&i(null)):"function"==typeof i?i(new Error("not opened")):(delete t._queue,t.emit("error",new Error("not opened")))})}(this,t,n,function(t){i.nextTick(function(){M(o)}),"function"==typeof r&&r(t)})}else this._sender.send(t,n,r)}else{if("function"!=typeof r)throw new Error("not opened");r(new Error("not opened"))}},_.prototype.stream=function(t,e){"function"==typeof t&&(e=t,t={});var n=this;if("function"!=typeof e)throw new Error("callback must be provided");if(this.readyState===_.OPEN)this._queue?this._queue.push(function(){n.stream(t,e)}):(void 0===(t=t||{}).mask&&(t.mask=!this._isServer),void 0===t.compress&&(t.compress=!0),this.extensions[v.extensionName]||(t.compress=!1),T(this),i.nextTick(e.bind(null,null,function r(o,s){try{if(n.readyState!==_.OPEN)throw new Error("not opened");t.fin=!0===s,n._sender.send(o,t),s?M(n):i.nextTick(e.bind(null,null,r))}catch(t){"function"==typeof e?e(t):(delete n._queue,n.emit("error",t))}})));else{if("function"!=typeof e)throw new Error("not opened");e(new Error("not opened"))}},_.prototype.terminate=function(){if(this.readyState!==_.CLOSED)if(this._socket){this.readyState=_.CLOSING;try{this._socket.end()}catch(t){return void E.call(this,!0)}this._closeTimer&&clearTimeout(this._closeTimer),this._closeTimer=setTimeout(E.bind(this,!0),3e4)}else this.readyState===_.CONNECTING&&E.call(this,!0)},Object.defineProperty(_.prototype,"bufferedAmount",{get:function(){var t=0;return this._socket&&(t=this._socket.bufferSize||0),t}}),Object.defineProperty(_.prototype,"binaryType",{get:function(){return this._binaryType},set:function(t){if("arraybuffer"!==t&&"nodebuffer"!==t)throw new SyntaxError('unsupported binaryType: must be either "nodebuffer" or "arraybuffer"');this._binaryType=t}}),["open","error","close","message"].forEach(function(t){Object.defineProperty(_.prototype,"on"+t,{get:function(){var e=this.listeners(t)[0];return e?e._listener?e._listener:e:void 0},set:function(e){this.removeAllListeners(t),this.addEventListener(t,e)}})}),_.prototype.addEventListener=function(t,e){var n=this;function i(t,i){i.binary&&"arraybuffer"===this.binaryType&&(t=new Uint8Array(t).buffer),e.call(n,new w(t,!!i.binary,n))}function r(t,i){e.call(n,new S(t,i,n))}function o(t){t.type="error",t.target=n,e.call(n,t)}function s(){e.call(n,new x(n))}"function"==typeof e&&("message"===t?(i._listener=e,this.on(t,i)):"close"===t?(r._listener=e,this.on(t,r)):"error"===t?(o._listener=e,this.on(t,o)):"open"===t?(s._listener=e,this.on(t,s)):this.on(t,e))},t.exports=_,t.exports.buildHostHeader=C}).call(this,n(4).Buffer,n(9))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){e.fetch=a(t.fetch)&&a(t.ReadableStream),e.writableStream=a(t.WritableStream),e.abortController=a(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var n;function i(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function r(t){var e=i();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var o=void 0!==t.ArrayBuffer,s=o&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}e.arraybuffer=e.fetch||o&&r("arraybuffer"),e.msstream=!e.fetch&&s&&r("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&r("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!i()&&a(i().overrideMimeType),e.vbArray=a(t.VBArray),n=null}).call(this,n(7))},function(t,e,n){(function(t,i,r){var o=n(189),s=n(2),a=n(21),l=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=e.IncomingMessage=function(e,n,s,l){var c=this;if(a.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===s){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)}),o.writableStream){var u=new WritableStream({write:function(t){return new Promise(function(e,n){c._destroyed?n():c.push(new i(t))?e():c._resumeFetch=e})},close:function(){r.clearTimeout(l),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void n.body.pipeTo(u).catch(function(t){r.clearTimeout(l),c._destroyed||c.emit("error",t)})}catch(t){}}var h=n.body.getReader();!function t(){h.read().then(function(e){if(!c._destroyed){if(e.done)return r.clearTimeout(l),void c.push(null);c.push(new i(e.value)),t()}}).catch(function(t){r.clearTimeout(l),c._destroyed||c.emit("error",t)})}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(e[2])):void 0!==c.headers[n]?c.headers[n]+=", "+e[2]:c.headers[n]=e[2],c.rawHeaders.push(e[1],e[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var d=c.rawHeaders["mime-type"];if(d){var f=d.match(/;\s*charset=([^;])(;|$)/);f&&(c._charset=f[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},c.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==l.DONE)break;try{n=new r.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new i(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var s=new i(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);t.push(s)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==l.DONE||!e.response)break;n=e.response,t.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==l.LOADING||!n)break;t.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==l.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new i(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(n)}t._xhr.readyState===l.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n(9),n(4).Buffer,n(7))},function(t,e,n){"use strict";(function(e,i){var r=n(31);t.exports=b;var o,s=n(188);b.ReadableState=y;n(17).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=n(192),c=n(3).Buffer,u=e.Uint8Array||function(){};var h=n(22);h.inherits=n(2);var d=n(310),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=n(311),g=n(193);h.inherits(b,l);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var i=e instanceof(o=o||n(18));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(41).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(18),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function _(t,e,n,i,r){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,C(t)}(t,s)):(r||(o=function(t,e){var n;i=e,c.isBuffer(i)||i instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):T(t,s)):w(t,s,e,!1))):i||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&C(t)),T(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=c.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(41).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var S=8388608;function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(k,t):k(t))}function k(t){f("emit readable"),t.emit("readable"),I(t)}function T(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(M,t,e))}function M(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function E(t){f("readable nexttick read 0"),t.read(0)}function A(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function $(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e):function(t,e){var n=c.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function D(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):C(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&D(this),null;var i,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),e.ended||e.reading?f("reading or ended",r=!1):r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(i=t>0?$(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&D(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?u:b;function c(e,i){f("onunpipe"),e===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",c),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",m),d=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function u(){f("onend"),t.end()}o.endEmitted?r.nextTick(l):n.once("end",l),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,I(t))}}(n);t.on("drain",h);var d=!1;var p=!1;function m(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==P(o.pipes,t))&&!d&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(e){f("onerror",e),b(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),b()}function y(){f("onfinish"),t.removeListener("close",v),b()}function b(){f("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",v),t.once("finish",y),t.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var s=P(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&C(this):r.nextTick(E,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(A,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,i=!1;for(var r in t.on("end",function(){if(f("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(f("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(e.push(r)||(i=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){f("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=$}).call(this,n(7),n(9))},function(t,e,n){t.exports=n(17).EventEmitter},function(t,e,n){"use strict";var i=n(31);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";t.exports=s;var i=n(18),r=n(22);function o(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);i.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){l(t,e,n)}):l(this,null,null)}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(2),r.inherits(s,i),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var i=n(3).Buffer,r=n(24).Transform;function o(t){r.call(this),this._block=i.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(2)(o,r),o.prototype._transform=function(t,e,n){var i=null;try{this.update(t,e)}catch(t){i=t}n(i)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!i.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(t)||(t=i.from(t,e));for(var n=this._block,r=0;this._blockOffset+t.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[r++];this._update(),this._blockOffset=0}for(;r<t.length;)n[this._blockOffset++]=t[r++];for(var s=0,a=8*t.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,n){var i=n(2),r=n(20),o=n(3).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function l(){this.init(),this._w=a,r.call(this,64,56)}function c(t,e,n){return n^t&(e^n)}function u(t,e,n){return t&e|n&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function f(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}i(l,r),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)n[v]=t.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((e=n[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[v-7]+f(n[v-15])+n[v-16];for(var y=0;y<64;++y){var b=g+d(l)+c(l,p,m)+s[y]+n[y]|0,_=h(i)+u(i,r,o)|0;g=m,m=p,p=l,l=a+b|0,a=o,o=r,r=i,i=b+_|0}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=l},function(t,e,n){var i=n(2),r=n(20),o=n(3).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function l(){this.init(),this._w=a,r.call(this,128,112)}function c(t,e,n){return n^t&(e^n)}function u(t,e,n){return t&e|n&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}i(l,r),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(t){for(var e=this._w,n=0|this._ah,i=0|this._bh,r=0|this._ch,o=0|this._dh,a=0|this._eh,l=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,S=0|this._cl,x=0|this._dl,C=0|this._el,k=0|this._fl,T=0|this._gl,M=0|this._hl,E=0;E<32;E+=2)e[E]=t.readInt32BE(4*E),e[E+1]=t.readInt32BE(4*E+4);for(;E<160;E+=2){var A=e[E-30],I=e[E-30+1],$=f(A,I),D=p(I,A),L=m(A=e[E-4],I=e[E-4+1]),P=g(I,A),O=e[E-14],N=e[E-14+1],j=e[E-32],R=e[E-32+1],B=D+N|0,F=$+O+v(B,D)|0;F=(F=F+L+v(B=B+P|0,P)|0)+j+v(B=B+R|0,R)|0,e[E]=F,e[E+1]=B}for(var Y=0;Y<160;Y+=2){F=e[Y],B=e[Y+1];var H=u(n,i,r),W=u(_,w,S),z=h(n,_),U=h(_,n),V=d(a,C),G=d(C,a),q=s[Y],X=s[Y+1],K=c(a,l,y),J=c(C,k,T),Z=M+G|0,Q=b+V+v(Z,M)|0;Q=(Q=(Q=Q+K+v(Z=Z+J|0,J)|0)+q+v(Z=Z+X|0,X)|0)+F+v(Z=Z+B|0,B)|0;var tt=U+W|0,et=z+H+v(tt,U)|0;b=y,M=T,y=l,T=k,l=a,k=C,a=o+Q+v(C=x+Z|0,x)|0,o=r,x=S,r=i,S=w,i=n,w=_,n=Q+et+v(_=Z+tt|0,Z)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+S|0,this._dl=this._dl+x|0,this._el=this._el+C|0,this._fl=this._fl+k|0,this._gl=this._gl+T|0,this._hl=this._hl+M|0,this._ah=this._ah+n+v(this._al,_)|0,this._bh=this._bh+i+v(this._bl,w)|0,this._ch=this._ch+r+v(this._cl,S)|0,this._dh=this._dh+o+v(this._dl,x)|0,this._eh=this._eh+a+v(this._el,C)|0,this._fh=this._fh+l+v(this._fl,k)|0,this._gh=this._gh+y+v(this._gl,T)|0,this._hh=this._hh+b+v(this._hl,M)|0},l.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=l},function(t,e,n){"use strict";var i=n(2),r=n(327),o=n(15),s=n(3).Buffer,a=n(199),l=n(44),c=n(45),u=s.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=s.from(e));var n="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>n)?e=("rmd160"===t?new l:c(t)).update(e).digest():e.length<n&&(e=s.concat([e,u],n));for(var i=this._ipad=s.allocUnsafe(n),r=this._opad=s.allocUnsafe(n),a=0;a<n;a++)i[a]=54^e[a],r[a]=92^e[a];this._hash="rmd160"===t?new l:c(t),this._hash.update(i)}i(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new l:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new r(a,e):new h(t,e)}},function(t,e,n){var i=n(43);t.exports=function(t){return(new i).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,n){e.pbkdf2=n(329),e.pbkdf2Sync=n(204)},function(t,e,n){(function(e){var n=Math.pow(2,30)-1;function i(t,n){if("string"!=typeof t&&!e.isBuffer(t))throw new TypeError(n+" must be a buffer or string")}t.exports=function(t,e,r,o){if(i(t,"Password"),i(e,"Salt"),"number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0||o>n||o!=o)throw new TypeError("Bad key length")}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){var n;e.browser?n="utf-8":n=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";t.exports=n}).call(this,n(9))},function(t,e,n){var i=n(199),r=n(44),o=n(45),s=n(202),a=n(203),l=n(3).Buffer,c=l.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(t,e,n){var s=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new r).update(t).digest()}:"md5"===t?i:function(e){return o(t).update(e).digest()}}(t),a="sha512"===t||"sha384"===t?128:64;e.length>a?e=s(e):e.length<a&&(e=l.concat([e,c],a));for(var h=l.allocUnsafe(a+u[t]),d=l.allocUnsafe(a+u[t]),f=0;f<a;f++)h[f]=54^e[f],d[f]=92^e[f];var p=l.allocUnsafe(a+n+4);h.copy(p,0,0,a),this.ipad1=p,this.ipad2=h,this.opad=d,this.alg=t,this.blocksize=a,this.hash=s,this.size=u[t]}h.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,i,r){s(t,e,n,i),l.isBuffer(t)||(t=l.from(t,a)),l.isBuffer(e)||(e=l.from(e,a));var o=new h(r=r||"sha1",t,e.length),c=l.allocUnsafe(i),d=l.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var f=0,p=u[r],m=Math.ceil(i/p),g=1;g<=m;g++){d.writeUInt32BE(g,e.length);for(var v=o.run(d,o.ipad1),y=v,b=1;b<n;b++){y=o.run(y,o.ipad2);for(var _=0;_<p;_++)v[_]^=y[_]}v.copy(c,f),f+=p}return c}},function(t,e,n){var i=n(25),r=n(3).Buffer,o=n(206);function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var n=Math.ceil(e.length/16),o=t._cache.length;t._cache=r.concat([t._cache,r.allocUnsafe(16*n)]);for(var a=0;a<n;a++){var l=s(t),c=o+16*a;t._cache.writeUInt32BE(l[0],c+0),t._cache.writeUInt32BE(l[1],c+4),t._cache.writeUInt32BE(l[2],c+8),t._cache.writeUInt32BE(l[3],c+12)}var u=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),i(e,u)}},function(t,e){t.exports=function(t){for(var e,n=t.length;n--;){if(255!==(e=t.readUInt8(n))){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,n){var i=n(32),r=n(3).Buffer,o=n(15),s=n(2),a=n(344),l=n(25),c=n(206);function u(t,e,n,s){o.call(this);var l=r.alloc(4,0);this._cipher=new i.AES(e);var u=this._cipher.encryptBlock(l);this._ghash=new a(u),n=function(t,e,n){if(12===e.length)return t._finID=r.concat([e,r.from([0,0,0,1])]),r.concat([e,r.from([0,0,0,2])]);var i=new a(n),o=e.length,s=o%16;i.update(e),s&&(s=16-s,i.update(r.alloc(s,0))),i.update(r.alloc(8,0));var l=8*o,u=r.alloc(8);u.writeUIntBE(l,0,8),i.update(u),t._finID=i.state;var h=r.from(t._finID);return c(h),h}(this,n,u),this._prev=r.from(n),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(u,o),u.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=r.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var n=0;t.length!==e.length&&n++;for(var i=Math.min(t.length,e.length),r=0;r<i;++r)n+=t[r]^e[r];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},u.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=u},function(t,e,n){var i=n(32),r=n(3).Buffer,o=n(15);function s(t,e,n,s){o.call(this),this._cipher=new i.AES(e),this._prev=r.from(n),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=s,this._mode=t}n(2)(s,o),s.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},function(t,e,n){var i=n(19);t.exports=y,y.simpleSieve=g,y.fermatTest=v;var r=n(8),o=new r(24),s=new(n(211)),a=new r(1),l=new r(2),c=new r(5),u=(new r(16),new r(8),new r(10)),h=new r(3),d=(new r(7),new r(11)),f=new r(4),p=(new r(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,n=3;n<1048576;n+=2){for(var i=Math.ceil(Math.sqrt(n)),r=0;r<e&&t[r]<=i&&n%t[r]!=0;r++);e!==r&&t[r]<=i||(t[e++]=n)}return p=t,t}function g(t){for(var e=m(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function v(t){var e=r.mont(t);return 0===l.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function y(t,e){if(t<16)return new r(2===e||5===e?[140,123]:[140,39]);var n,p;for(e=new r(e);;){for(n=new r(i(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(a),n.testn(1)||n.iadd(l),e.cmp(l)){if(!e.cmp(c))for(;n.mod(u).cmp(h);)n.iadd(f)}else for(;n.mod(o).cmp(d);)n.iadd(f);if(g(p=n.shrn(1))&&g(n)&&v(p)&&v(n)&&s.test(p)&&s.test(n))return n}}},function(t,e,n){var i=n(8),r=n(49);function o(t){this.rand=t||new r.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var r=new i(this.rand.generate(n))}while(r.cmp(t)>=0);return r},o.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},o.prototype.test=function(t,e,n){var r=t.bitLength(),o=i.mont(t),s=new i(1).toRed(o);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),l=0;!a.testn(l);l++);for(var c=t.shrn(l),u=a.toRed(o);e>0;e--){var h=this._randrange(new i(2),a);n&&n(h);var d=h.toRed(o).redPow(c);if(0!==d.cmp(s)&&0!==d.cmp(u)){for(var f=1;f<l;f++){if(0===(d=d.redSqr()).cmp(s))return!1;if(0===d.cmp(u))break}if(f===l)return!1}}return!0},o.prototype.getDivisor=function(t,e){var n=t.bitLength(),r=i.mont(t),o=new i(1).toRed(r);e||(e=Math.max(1,n/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var l=t.shrn(a),c=s.toRed(r);e>0;e--){var u=this._randrange(new i(2),s),h=t.gcd(u);if(0!==h.cmpn(1))return h;var d=u.toRed(r).redPow(l);if(0!==d.cmp(o)&&0!==d.cmp(c)){for(var f=1;f<a;f++){if(0===(d=d.redSqr()).cmp(o))return d.fromRed().subn(1).gcd(t);if(0===d.cmp(c))break}if(f===a)return(d=d.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,n){"use strict";var i=e;function r(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)n[i]=0|t[i];return n}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(i=0;i<t.length;i++){var r=t.charCodeAt(i),o=r>>8,s=255&r;o?n.push(o,s):n.push(s)}return n},i.zero2=r,i.toHex=o,i.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,n){"use strict";var i=e;i.base=n(34),i.short=n(355),i.mont=n(356),i.edwards=n(357)},function(t,e,n){"use strict";var i=n(14).rotr32;function r(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function s(t,e,n){return t^e^n}e.ft_1=function(t,e,n,i){return 0===t?r(e,n,i):1===t||3===t?s(e,n,i):2===t?o(e,n,i):void 0},e.ch32=r,e.maj32=o,e.p32=s,e.s0_256=function(t){return i(t,2)^i(t,13)^i(t,22)},e.s1_256=function(t){return i(t,6)^i(t,11)^i(t,25)},e.g0_256=function(t){return i(t,7)^i(t,18)^t>>>3},e.g1_256=function(t){return i(t,17)^i(t,19)^t>>>10}},function(t,e,n){"use strict";var i=n(14),r=n(26),o=n(214),s=n(11),a=i.sum32,l=i.sum32_4,c=i.sum32_5,u=o.ch32,h=o.maj32,d=o.s0_256,f=o.s1_256,p=o.g0_256,m=o.g1_256,g=r.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}i.inherits(y,g),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,i=0;i<16;i++)n[i]=t[e+i];for(;i<n.length;i++)n[i]=l(m(n[i-2]),n[i-7],p(n[i-15]),n[i-16]);var r=this.h[0],o=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(s(this.k.length===n.length),i=0;i<n.length;i++){var S=c(w,f(y),u(y,b,_),this.k[i],n[i]),x=a(d(r),h(r,o,g));w=_,_=b,b=y,y=a(v,S),v=g,g=o,o=r,r=a(S,x)}this.h[0]=a(this.h[0],r),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],w)},y.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,e,n){"use strict";var i=n(14),r=n(26),o=n(11),s=i.rotr64_hi,a=i.rotr64_lo,l=i.shr64_hi,c=i.shr64_lo,u=i.sum64,h=i.sum64_hi,d=i.sum64_lo,f=i.sum64_4_hi,p=i.sum64_4_lo,m=i.sum64_5_hi,g=i.sum64_5_lo,v=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function _(t,e,n,i,r){var o=t&n^~t&r;return o<0&&(o+=4294967296),o}function w(t,e,n,i,r,o){var s=e&i^~e&o;return s<0&&(s+=4294967296),s}function S(t,e,n,i,r){var o=t&n^t&r^n&r;return o<0&&(o+=4294967296),o}function x(t,e,n,i,r,o){var s=e&i^e&o^i&o;return s<0&&(s+=4294967296),s}function C(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function k(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function T(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function M(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function E(t,e){var n=s(t,e,1)^s(t,e,8)^l(t,e,7);return n<0&&(n+=4294967296),n}function A(t,e){var n=a(t,e,1)^a(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function I(t,e){var n=s(t,e,19)^s(e,t,29)^l(t,e,6);return n<0&&(n+=4294967296),n}function $(t,e){var n=a(t,e,19)^a(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}i.inherits(b,v),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,i=0;i<32;i++)n[i]=t[e+i];for(;i<n.length;i+=2){var r=I(n[i-4],n[i-3]),o=$(n[i-4],n[i-3]),s=n[i-14],a=n[i-13],l=E(n[i-30],n[i-29]),c=A(n[i-30],n[i-29]),u=n[i-32],h=n[i-31];n[i]=f(r,o,s,a,l,c,u,h),n[i+1]=p(r,o,s,a,l,c,u,h)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,i=this.h[0],r=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],c=this.h[5],f=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],E=this.h[11],A=this.h[12],I=this.h[13],$=this.h[14],D=this.h[15];o(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var P=$,O=D,N=T(v,y),j=M(v,y),R=_(v,y,b,E,A),B=w(v,y,b,E,A,I),F=this.k[L],Y=this.k[L+1],H=n[L],W=n[L+1],z=m(P,O,N,j,R,B,F,Y,H,W),U=g(P,O,N,j,R,B,F,Y,H,W);P=C(i,r),O=k(i,r),N=S(i,r,s,a,l),j=x(i,r,s,a,l,c);var V=h(P,O,N,j),G=d(P,O,N,j);$=A,D=I,A=b,I=E,b=v,E=y,v=h(f,p,z,U),y=d(p,p,z,U),f=l,p=c,l=s,c=a,s=i,a=r,i=h(z,U,V,G),r=d(z,U,V,G)}u(this.h,0,i,r),u(this.h,2,s,a),u(this.h,4,l,c),u(this.h,6,f,p),u(this.h,8,v,y),u(this.h,10,b,E),u(this.h,12,A,I),u(this.h,14,$,D)},b.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,e,n){var i=n(2),r=n(28).Reporter,o=n(4).Buffer;function s(t,e){r.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof a||(t=new a(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}i(s,r),e.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,r.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.prototype.join=function(t,e){return t||(t=new o(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(t,e),e+=n.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},function(t,e,n){var i=e;i._reverse=function(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n|=0);var i=t[n];e[i]=n}),e},i.der=n(377)},function(t,e,n){var i=n(2),r=n(27),o=r.base,s=r.bignum,a=r.constants.der;function l(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){o.Node.call(this,"der",t)}function u(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var i=a.tagClass[n>>6],r=0==(32&n);if(31==(31&n)){var o=n;for(n=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:i,primitive:r,tag:n,tagStr:a.tag[n]}}function h(t,e,n){var i=t.readUInt8(n);if(t.isError(i))return i;if(!e&&128===i)return null;if(0==(128&i))return i;var r=127&i;if(r>4)return t.error("length octect is too long");i=0;for(var o=0;o<r;o++){i<<=8;var s=t.readUInt8(n);if(t.isError(s))return s;i|=s}return i}t.exports=l,l.prototype.decode=function(t,e){return t instanceof o.DecoderBuffer||(t=new o.DecoderBuffer(t,e)),this.tree._decode(t,e)},i(c,o.Node),c.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var i=t.save(),r=u(t,'Failed to peek tag: "'+e+'"');return t.isError(r)?r:(t.restore(i),r.tag===e||r.tagStr===e||r.tagStr+"of"===e||n)},c.prototype._decodeTag=function(t,e,n){var i=u(t,'Failed to decode tag of "'+e+'"');if(t.isError(i))return i;var r=h(t,i.primitive,'Failed to get length of "'+e+'"');if(t.isError(r))return r;if(!n&&i.tag!==e&&i.tagStr!==e&&i.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(i.primitive||null!==r)return t.skip(r,'Failed to match body of: "'+e+'"');var o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(r=t.offset-o.offset,t.restore(o),t.skip(r,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){var n=u(t,e);if(t.isError(n))return n;var i,r=h(t,n.primitive,e);if(t.isError(r))return r;if(i=n.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===n.tagStr)break}},c.prototype._decodeList=function(t,e,n,i){for(var r=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var s=n.decode(t,"der",i);if(t.isError(s)&&o)break;r.push(s)}return r},c.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){var i=t.raw();if(i.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var r="",o=0;o<i.length/2;o++)r+=String.fromCharCode(i.readUInt16BE(2*o));return r}if("numstr"===e){var s=t.raw().toString("ascii");return this._isNumstr(s)?s:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var a=t.raw().toString("ascii");return this._isPrintstr(a)?a:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,n){for(var i,r=[],o=0;!t.isEmpty();){var s=t.readUInt8();o<<=7,o|=127&s,0==(128&s)&&(r.push(o),o=0)}128&s&&r.push(o);var a=r[0]/40|0,l=r[0]%40;if(i=n?r:[a,l].concat(r.slice(1)),e){var c=e[i.join(" ")];void 0===c&&(c=e[i.join(".")]),void 0!==c&&(i=c)}return i},c.prototype._decodeTime=function(t,e){var n=t.raw().toString();if("gentime"===e)var i=0|n.slice(0,4),r=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");i=0|n.slice(0,2),r=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),l=0|n.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,r-1,o,s,a,l,0)},c.prototype._decodeNull=function(t){return null},c.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){var n=t.raw(),i=new s(n);return e&&(i=e[i.toString(10)]||i),i},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t,e,n){var i=n(2),r=n(4).Buffer,o=n(27),s=o.base,a=o.constants.der;function l(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){s.Node.call(this,"der",t)}function u(t){return t<10?"0"+t:t}t.exports=l,l.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},i(c,s.Node),c.prototype._encodeComposite=function(t,e,n,i){var o,s=function(t,e,n,i){var r;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))r=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return i.error("Unknown tag: "+t);r=t}if(r>=31)return i.error("Multi-octet tag encoding unsupported");e||(r|=32);return r|=a.tagClassByName[n||"universal"]<<6}(t,e,n,this.reporter);if(i.length<128)return(o=new r(2))[0]=s,o[1]=i.length,this._createEncoderBuffer([o,i]);for(var l=1,c=i.length;c>=256;c>>=8)l++;(o=new r(2+l))[0]=s,o[1]=128|l;c=1+l;for(var u=i.length;u>0;c--,u>>=8)o[c]=255&u;return this._createEncoderBuffer([o,i])},c.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var n=new r(2*t.length),i=0;i<t.length;i++)n.writeUInt16BE(t.charCodeAt(i),2*i);return this._createEncoderBuffer(n)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},c.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var i=0;i<t.length;i++)t[i]|=0}else if(Array.isArray(t)){t=t.slice();for(i=0;i<t.length;i++)t[i]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var o=0;for(i=0;i<t.length;i++){var s=t[i];for(o++;s>=128;s>>=7)o++}var a=new r(o),l=a.length-1;for(i=t.length-1;i>=0;i--){s=t[i];for(a[l--]=127&s;(s>>=7)>0;)a[l--]=128|127&s}return this._createEncoderBuffer(a)},c.prototype._encodeTime=function(t,e){var n,i=new Date(t);return"gentime"===e?n=[u(i.getFullYear()),u(i.getUTCMonth()+1),u(i.getUTCDate()),u(i.getUTCHours()),u(i.getUTCMinutes()),u(i.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[u(i.getFullYear()%100),u(i.getUTCMonth()+1),u(i.getUTCDate()),u(i.getUTCHours()),u(i.getUTCMinutes()),u(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!r.isBuffer(t)){var n=t.toArray();!t.sign&&128&n[0]&&n.unshift(0),t=new r(n)}if(r.isBuffer(t)){var i=t.length;0===t.length&&i++;var o=new r(i);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);i=1;for(var s=t;s>=256;s>>=8)i++;for(s=(o=new Array(i)).length-1;s>=0;s--)o[s]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new r(o))},c.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},c.prototype._skipDefault=function(t,e,n){var i,r=this._baseState;if(null===r.default)return!1;var o=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,e,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,n){var i=n(23),r=n(3).Buffer;function o(t){var e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,s=r.alloc(0),a=0;s.length<e;)n=o(a++),s=r.concat([s,i("sha1").update(t).update(n).digest()]);return s.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var n=t.length,i=-1;++i<n;)t[i]^=e[i];return t}},function(t,e,n){var i=n(8),r=n(3).Buffer;t.exports=function(t,e){return r.from(t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed().toArray())}},function(t,e,n){
/*!
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
var i=n(226);t.exports=function(t){var e={},n=this.value={};Object.keys(t).forEach(function(i){e[i]=t[i],Object.defineProperty(n,i,{get:function(){return e[i]},configurable:!1,enumerable:!0})}),this.reset=function(){return Object.keys(t).forEach(function(n){e[n]=t[n]}),this},this.merge=function(t,n){if(t=t||{},"[object Array]"===Object.prototype.toString.call(n)){for(var i=[],r=0,o=n.length;r<o;++r){var s=n[r];s in t||i.push(s)}if(i.length>0)throw i.length>1?new Error("options "+i.slice(0,i.length-1).join(", ")+" and "+i[i.length-1]+" must be defined"):new Error("option "+i[0]+" must be defined")}return Object.keys(t).forEach(function(n){n in e&&(e[n]=t[n])}),this},this.copy=function(e){var i={};return Object.keys(t).forEach(function(t){-1!==e.indexOf(t)&&(i[t]=n[t])}),i},this.read=function(t,e){if("function"==typeof e){var n=this;i.readFile(t,function(t,i){if(t)return e(t);var r=JSON.parse(i);n.merge(r),e()})}else{var r=JSON.parse(i.readFileSync(t));this.merge(r)}return this},this.isDefined=function(t){return void 0!==n[t]},this.isDefinedAndNonNull=function(t){return null!=n[t]},Object.freeze(n),Object.freeze(this)}},function(t,e){},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
var i=n(17),r=n(13),o=n(42),s=(i.EventEmitter,n(228)),a=n(229),l=n(36);function c(t,e){if(this instanceof c==!1)throw new TypeError("Classes can't be function-called");i.EventEmitter.call(this),this._socket=t,this.extensions=e||{},this.firstFragment=!0,this.compress=!1,this.messageHandlers=[],this.processing=!1}function u(t,e){this[e]=(65280&t)>>8,this[e+1]=255&t}function h(t,e){this[e]=(4278190080&t)>>24,this[e+1]=(16711680&t)>>16,this[e+2]=(65280&t)>>8,this[e+3]=255&t}function d(t){for(var n=new Uint8Array(t.buffer||t),i=t.byteLength||t.length,r=t.byteOffset||0,o=new e(i),s=0;s<i;++s)o[s]=n[r+s];return o}r.inherits(c,i.EventEmitter),c.prototype.close=function(t,n,i,r){if(void 0!==t&&("number"!=typeof t||!s.isValidErrorCode(t)))throw new Error("first argument must be a valid error code number");t=t||1e3;var o=new e(2+(n?e.byteLength(n):0));u.call(o,t,0),o.length>2&&o.write(n,2);var a=this;this.messageHandlers.push(function(){a.frameAndSend(8,o,!0,i),"function"==typeof r&&r()}),this.flush()},c.prototype.ping=function(t,e){var n=e&&e.mask,i=this;this.messageHandlers.push(function(){i.frameAndSend(9,t||"",!0,n)}),this.flush()},c.prototype.pong=function(t,e){var n=e&&e.mask,i=this;this.messageHandlers.push(function(){i.frameAndSend(10,t||"",!0,n)}),this.flush()},c.prototype.send=function(t,e,n){var i=!e||!1!==e.fin,r=e&&e.mask,o=e&&e.compress,s=e&&e.binary?2:1;!1===this.firstFragment?(s=0,o=!1):(this.firstFragment=!1,this.compress=o),i&&(this.firstFragment=!0);var a=this.compress,l=this;this.messageHandlers.push(function(){t&&a?(l.processing=!0,l.applyExtensions(t,i,a,function(t,e){t?"function"==typeof n?n(t):l.emit("error",t):(l.frameAndSend(s,e,i,r,o,n),l.processing=!1,l.flush())})):l.frameAndSend(s,t,i,r,o,n)}),this.flush()},c.prototype.frameAndSend=function(t,n,i,r,s,l){var c=!1;if(n){e.isBuffer(n)||(c=!0,!n||void 0===n.byteLength&&void 0===n.buffer?("number"==typeof n&&(n=n.toString()),n=new e(n)):n=d(n));var f=n.length,p=r?6:2,m=f;f>=65536?(p+=8,m=127):f>125&&(p+=2,m=126);var g=f<32768||r&&!c,v=new e(g?f+p:p);switch(v[0]=i?128|t:t,s&&(v[0]|=64),m){case 126:u.call(v,f,2);break;case 127:h.call(v,0,2),h.call(v,f,6)}if(r){v[1]=128|m;var y=o.randomBytes(4);if(v[p-4]=y[0],v[p-3]=y[1],v[p-2]=y[2],v[p-1]=y[3],g){a.mask(n,y,v,p,f);try{this._socket.write(v,"binary",l)}catch(t){"function"==typeof l?l(t):this.emit("error",t)}}else{a.mask(n,y,n,0,f);try{this._socket.write(v,"binary"),this._socket.write(n,"binary",l)}catch(t){"function"==typeof l?l(t):this.emit("error",t)}}}else if(v[1]=m,g){n.copy(v,p);try{this._socket.write(v,"binary",l)}catch(t){"function"==typeof l?l(t):this.emit("error",t)}}else try{this._socket.write(v,"binary"),this._socket.write(n,"binary",l)}catch(t){"function"==typeof l?l(t):this.emit("error",t)}}else try{this._socket.write(new e([t|(i?128:0),0|(r?128:0)].concat(r?[0,0,0,0]:[])),"binary",l)}catch(t){"function"==typeof l?l(t):this.emit("error",t)}},c.prototype.flush=function(){for(;!this.processing&&this.messageHandlers.length;)this.messageHandlers.shift()()},c.prototype.applyExtensions=function(t,e,n,i){(t.buffer||t)instanceof ArrayBuffer&&(t=d(t)),this.extensions[l.extensionName].compress(t,e,i)},t.exports=c}).call(this,n(4).Buffer)},function(t,e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
t.exports={isValidErrorCode:function(t){return t>=1e3&&t<=1011&&1004!=t&&1005!=t&&1006!=t||t>=3e3&&t<=4999},1e3:"normal",1001:"going away",1002:"protocol error",1003:"unsupported data",1004:"reserved",1005:"reserved for extensions",1006:"reserved for extensions",1007:"inconsistent or invalid data",1008:"policy violation",1009:"message too big",1010:"extension handshake missing",1011:"an unexpected condition prevented the request from being fulfilled"}},function(t,e,n){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */var i;try{i=n(!function(){var t=new Error("Cannot find module 'bufferutil'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){i=n(392)}t.exports=i.BufferUtil||i},function(t,e,n){"use strict";(function(e){var i=n(395);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var s=n(13),a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c="foo"===function(){}.name;function u(t){return Object.prototype.toString.call(t)}function h(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var d=t.exports=y,f=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(s.isFunction(t)){if(c)return t.name;var e=t.toString().match(f);return e&&e[1]}}function m(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(c||!s.isFunction(t))return s.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function v(t,e,n,i,r){throw new d.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function y(t,e){t||v(t,!0,e,"==",d.ok)}function b(t,e,n,i){if(t===e)return!0;if(o(t)&&o(e))return 0===r(t,e);if(s.isDate(t)&&s.isDate(e))return t.getTime()===e.getTime();if(s.isRegExp(t)&&s.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(h(t)&&h(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),function(t,e,n,i){if(null==t||null==e)return!1;if(s.isPrimitive(t)||s.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=_(t),o=_(e);if(r&&!o||!r&&o)return!1;if(r)return t=l.call(t),e=l.call(e),b(t,e,n);var a,c,u=x(t),h=x(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!==h[c])return!1;for(c=u.length-1;c>=0;c--)if(a=u[c],!b(t[a],e[a],n,i))return!1;return!0}(t,e,n,i))}return n?t===e:t==e}function _(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function w(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&v(r,n,"Missing expected exception"+i);var o="string"==typeof i,a=!t&&r&&!n;if((!t&&s.isError(r)&&o&&w(r,n)||a)&&v(r,n,"Got unwanted exception"+i),t&&r&&n&&!w(r,n)||!t&&r)throw r}d.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return m(g(t.actual),128)+" "+t.operator+" "+m(g(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=p(e),o=i.indexOf("\n"+r);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},s.inherits(d.AssertionError,Error),d.fail=v,d.ok=y,d.equal=function(t,e,n){t!=e&&v(t,e,n,"==",d.equal)},d.notEqual=function(t,e,n){t==e&&v(t,e,n,"!=",d.notEqual)},d.deepEqual=function(t,e,n){b(t,e,!1)||v(t,e,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(t,e,n){b(t,e,!0)||v(t,e,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(t,e,n){b(t,e,!1)&&v(t,e,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function t(e,n,i){b(e,n,!0)&&v(e,n,i,"notDeepStrictEqual",t)},d.strictEqual=function(t,e,n){t!==e&&v(t,e,n,"===",d.strictEqual)},d.notStrictEqual=function(t,e,n){t===e&&v(t,e,n,"!==",d.notStrictEqual)},d.throws=function(t,e,n){S(!0,t,e,n)},d.doesNotThrow=function(t,e,n){S(!1,t,e,n)},d.ifError=function(t){if(t)throw t},d.strict=i(function t(e,n){e||v(e,!0,n,"==",t)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var x=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(7))},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
n(13);var i=n(404),r=n(228),o=n(406),s=n(229),a=n(36);function l(t,n){if(this instanceof l==!1)throw new TypeError("Classes can't be function-called");"number"==typeof t&&(n=t,t={});var i=-1;this.fragmentedBufferPool=new o(1024,function(t,e){return t.used+e},function(t){return i=i>=0?Math.ceil((i+t.used)/2):t.used});var r=-1;this.unfragmentedBufferPool=new o(1024,function(t,e){return t.used+e},function(t){return r=r>=0?Math.ceil((r+t.used)/2):t.used}),this.extensions=t||{},this.maxPayload=n||0,this.currentPayloadLength=0,this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.overflow=[],this.headerBuffer=new e(10),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.expectHeader(2,this.processPacket),this.dead=!1,this.processing=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}function c(t){return(this[t]<<8)+this[t+1]}function u(t){return(this[t]<<24)+(this[t+1]<<16)+(this[t+2]<<8)+this[t+3]}function h(t,e,n,i){switch(t){default:e.copy(n,i,0,t);break;case 16:n[i+15]=e[15];case 15:n[i+14]=e[14];case 14:n[i+13]=e[13];case 13:n[i+12]=e[12];case 12:n[i+11]=e[11];case 11:n[i+10]=e[10];case 10:n[i+9]=e[9];case 9:n[i+8]=e[8];case 8:n[i+7]=e[7];case 7:n[i+6]=e[6];case 6:n[i+5]=e[5];case 5:n[i+4]=e[4];case 4:n[i+3]=e[3];case 3:n[i+2]=e[2];case 2:n[i+1]=e[1];case 1:n[i]=e[0]}}function d(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}t.exports=l,l.prototype.add=function(t){if(!this.dead){var e=t.length;if(0!=e)if(null!=this.expectBuffer){var n=Math.min(e,this.expectBuffer.length-this.expectOffset);for(h(n,t,this.expectBuffer,this.expectOffset),this.expectOffset+=n,n<e&&this.overflow.push(t.slice(n));this.expectBuffer&&this.expectOffset==this.expectBuffer.length;){var i=this.expectBuffer;this.expectBuffer=null,this.expectOffset=0,this.expectHandler.call(this,i)}}else this.overflow.push(t)}},l.prototype.cleanup=function(){this.dead=!0,this.overflow=null,this.headerBuffer=null,this.expectBuffer=null,this.expectHandler=null,this.unfragmentedBufferPool=null,this.fragmentedBufferPool=null,this.state=null,this.currentMessage=null,this.onerror=null,this.ontext=null,this.onbinary=null,this.onclose=null,this.onping=null,this.onpong=null},l.prototype.expectHeader=function(t,e){if(0!=t){this.expectBuffer=this.headerBuffer.slice(this.expectOffset,this.expectOffset+t),this.expectHandler=e;for(var n=t;n>0&&this.overflow.length>0;){var i=this.overflow.pop();n<i.length&&this.overflow.push(i.slice(n));var r=Math.min(i.length,n);h(r,i,this.expectBuffer,this.expectOffset),this.expectOffset+=r,n-=r}}else e(null)},l.prototype.expectData=function(t,e){if(0!=t){this.expectBuffer=this.allocateFromPool(t,this.state.fragmentedOperation),this.expectHandler=e;for(var n=t;n>0&&this.overflow.length>0;){var i=this.overflow.pop();n<i.length&&this.overflow.push(i.slice(n));var r=Math.min(i.length,n);h(r,i,this.expectBuffer,this.expectOffset),this.expectOffset+=r,n-=r}}else e(null)},l.prototype.allocateFromPool=function(t,e){return(e?this.fragmentedBufferPool:this.unfragmentedBufferPool).get(t)},l.prototype.processPacket=function(t){if(this.extensions[a.extensionName]){if(0!=(48&t[0]))return void this.error("reserved fields (2, 3) must be empty",1002)}else if(0!=(112&t[0]))return void this.error("reserved fields must be empty",1002);this.state.lastFragment=128==(128&t[0]),this.state.masked=128==(128&t[1]);var e=64==(64&t[0]),n=15&t[0];if(0===n){if(e)return void this.error("continuation frame cannot have the Per-message Compressed bits",1002);if(this.state.fragmentedOperation=!0,this.state.opcode=this.state.activeFragmentedOperation,1!=this.state.opcode&&2!=this.state.opcode)return void this.error("continuation frame cannot follow current opcode",1002)}else{if(n<3&&null!=this.state.activeFragmentedOperation)return void this.error("data frames after the initial data frame must have opcode 0",1002);if(n>=8&&e)return void this.error("control frames cannot have the Per-message Compressed bits",1002);this.state.compressed=e,this.state.opcode=n,!1===this.state.lastFragment?(this.state.fragmentedOperation=!0,this.state.activeFragmentedOperation=n):this.state.fragmentedOperation=!1}var i=f[this.state.opcode];void 0===i?this.error("no handler for opcode "+this.state.opcode,1002):i.start.call(this,t)},l.prototype.endPacket=function(){this.dead||(this.state.fragmentedOperation?this.state.lastFragment&&this.fragmentedBufferPool.reset(!0):this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.state.lastFragment&&this.state.opcode===this.state.activeFragmentedOperation&&(this.state.activeFragmentedOperation=null),this.currentPayloadLength=0,this.state.lastFragment=!1,this.state.opcode=null!=this.state.activeFragmentedOperation?this.state.activeFragmentedOperation:0,this.state.masked=!1,this.expectHeader(2,this.processPacket))},l.prototype.reset=function(){this.dead||(this.state={activeFragmentedOperation:null,lastFragment:!1,masked:!1,opcode:0,fragmentedOperation:!1},this.fragmentedBufferPool.reset(!0),this.unfragmentedBufferPool.reset(!0),this.expectOffset=0,this.expectBuffer=null,this.expectHandler=null,this.overflow=[],this.currentMessage=[],this.currentMessageLength=0,this.messageHandlers=[],this.currentPayloadLength=0)},l.prototype.unmask=function(t,e,n){return null!=t&&null!=e&&s.unmask(e,t),n?e:null!=e?e.toString("utf8"):""},l.prototype.error=function(t,e){if(!this.dead)return this.reset(),"string"==typeof t?this.onerror(new Error(t),e):t.constructor==Error?this.onerror(t,e):this.onerror(new Error("An error occured"),e),this},l.prototype.flush=function(){if(!this.processing&&!this.dead){var t=this.messageHandlers.shift();if(t){this.processing=!0;var e=this;t(function(){e.processing=!1,e.flush()})}}},l.prototype.applyExtensions=function(t,e,n,i){var r=this;n?this.extensions[a.extensionName].decompress(t,e,function(t,e){r.dead||(t?i(new Error("invalid compressed data")):i(null,e))}):i(null,t)},l.prototype.maxPayloadExceeded=function(t){if(void 0===this.maxPayload||null===this.maxPayload||this.maxPayload<1)return!1;var e=this.currentPayloadLength+t;return e<this.maxPayload?(this.currentPayloadLength=e,!1):(this.error("payload cannot exceed "+this.maxPayload+" bytes",1009),this.messageBuffer=[],this.cleanup(),!0)};var f={1:{start:function(t){var e=this,n=127&t[1];if(n<126){if(e.maxPayloadExceeded(n))return void e.error("Maximumpayload exceeded in compressed text message. Aborting...",1009);f[1].getData.call(e,n)}else 126==n?e.expectHeader(2,function(t){var n=c.call(t,0);e.maxPayloadExceeded(n)?e.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):f[1].getData.call(e,n)}):127==n&&e.expectHeader(8,function(t){if(0==u.call(t,0)){var n=u.call(t,4);e.maxPayloadExceeded(n)?e.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):f[1].getData.call(e,u.call(t,4))}else e.error("packets with length spanning more than 32 bit is currently not supported",1008)})},getData:function(t){var e=this;e.state.masked?e.expectHeader(4,function(n){var i=n;e.expectData(t,function(t){f[1].finish.call(e,i,t)})}):e.expectData(t,function(t){f[1].finish.call(e,null,t)})},finish:function(t,n){var r=this,o=this.unmask(t,n,!0)||new e(0),s=d(this.state);this.messageHandlers.push(function(t){r.applyExtensions(o,s.lastFragment,s.compressed,function(n,o){if(n)return 1009===n.type?r.error("Maximumpayload exceeded in compressed text message. Aborting...",1009):r.error(n.message,1007);if(null!=o){if(!(0==r.maxPayload||r.maxPayload>0&&r.currentMessageLength+o.length<r.maxPayload))return r.currentMessage=null,r.currentMessage=[],r.currentMessageLength=0,void r.error(new Error("Maximum payload exceeded. maxPayload: "+r.maxPayload),1009);r.currentMessage.push(o),r.currentMessageLength+=o.length}if(s.lastFragment){var a=e.concat(r.currentMessage);if(r.currentMessage=[],r.currentMessageLength=0,!i(a))return void r.error("invalid utf8 sequence",1007);r.ontext(a.toString("utf8"),{masked:s.masked,buffer:a})}t()})}),this.flush(),this.endPacket()}},2:{start:function(t){var e=this,n=127&t[1];if(n<126){if(e.maxPayloadExceeded(n))return void e.error("Max payload exceeded in compressed text message. Aborting...",1009);f[2].getData.call(e,n)}else 126==n?e.expectHeader(2,function(t){var n=c.call(t,0);e.maxPayloadExceeded(n)?e.error("Max payload exceeded in compressed text message. Aborting...",1009):f[2].getData.call(e,n)}):127==n&&e.expectHeader(8,function(t){if(0==u.call(t,0)){var n=u.call(t,4,!0);e.maxPayloadExceeded(n)?e.error("Max payload exceeded in compressed text message. Aborting...",1009):f[2].getData.call(e,n)}else e.error("packets with length spanning more than 32 bit is currently not supported",1008)})},getData:function(t){var e=this;e.state.masked?e.expectHeader(4,function(n){var i=n;e.expectData(t,function(t){f[2].finish.call(e,i,t)})}):e.expectData(t,function(t){f[2].finish.call(e,null,t)})},finish:function(t,n){var i=this,r=this.unmask(t,n,!0)||new e(0),o=d(this.state);this.messageHandlers.push(function(t){i.applyExtensions(r,o.lastFragment,o.compressed,function(n,r){if(n)return 1009===n.type?i.error("Max payload exceeded in compressed binary message. Aborting...",1009):i.error(n.message,1007);if(null!=r){if(!(0==i.maxPayload||i.maxPayload>0&&i.currentMessageLength+r.length<i.maxPayload))return i.currentMessage=null,i.currentMessage=[],i.currentMessageLength=0,void i.error(new Error("Maximum payload exceeded"),1009);i.currentMessage.push(r),i.currentMessageLength+=r.length}if(o.lastFragment){var s=e.concat(i.currentMessage);i.currentMessage=[],i.currentMessageLength=0,i.onbinary(s,{masked:o.masked,buffer:s})}t()})}),this.flush(),this.endPacket()}},8:{start:function(t){if(0!=this.state.lastFragment){var e=127&t[1];e<126?f[8].getData.call(this,e):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented close is not supported",1002)},getData:function(t){var e=this;e.state.masked?e.expectHeader(4,function(n){var i=n;e.expectData(t,function(t){f[8].finish.call(e,i,t)})}):e.expectData(t,function(t){f[8].finish.call(e,null,t)})},finish:function(t,e){var n=this;e=n.unmask(t,e,!0);var o=d(this.state);this.messageHandlers.push(function(){if(e&&1==e.length)n.error("close packets with data must be at least two bytes long",1002);else{var t=e&&e.length>1?c.call(e,0):1e3;if(r.isValidErrorCode(t)){var s="";if(e&&e.length>2){var a=e.slice(2);if(!i(a))return void n.error("invalid utf8 sequence",1007);s=a.toString("utf8")}n.onclose(t,s,{masked:o.masked}),n.reset()}else n.error("invalid error code",1002)}}),this.flush()}},9:{start:function(t){if(0!=this.state.lastFragment){var e=127&t[1];e<126?f[9].getData.call(this,e):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented ping is not supported",1002)},getData:function(t){var e=this;e.state.masked?e.expectHeader(4,function(n){var i=n;e.expectData(t,function(t){f[9].finish.call(e,i,t)})}):e.expectData(t,function(t){f[9].finish.call(e,null,t)})},finish:function(t,e){var n=this;e=this.unmask(t,e,!0);var i=d(this.state);this.messageHandlers.push(function(t){n.onping(e,{masked:i.masked,binary:!0}),t()}),this.flush(),this.endPacket()}},10:{start:function(t){if(0!=this.state.lastFragment){var e=127&t[1];e<126?f[10].getData.call(this,e):this.error("control frames cannot have more than 125 bytes of data",1002)}else this.error("fragmented pong is not supported",1002)},getData:function(t){var e=this;this.state.masked?this.expectHeader(4,function(n){var i=n;e.expectData(t,function(t){f[10].finish.call(e,i,t)})}):this.expectData(t,function(t){f[10].finish.call(e,null,t)})},finish:function(t,e){var n=this;e=n.unmask(t,e,!0);var i=d(this.state);this.messageHandlers.push(function(t){n.onpong(e,{masked:i.masked,binary:!0}),t()}),this.flush(),this.endPacket()}}}}).call(this,n(4).Buffer)},function(t,e,n){var i=n(13);e.parse=function(t){var e={};return(t=t||"").split(",").forEach(function(t){var n=t.split(";"),i=n.shift().trim();if(void 0===e[i])e[i]=[];else if(!e.hasOwnProperty(i))return;var r={};n.forEach(function(t){var e=t.trim().split("="),n=e[0],i=e[1];void 0===i?i=!0:('"'===i[0]&&(i=i.slice(1)),'"'===i[i.length-1]&&(i=i.slice(0,i.length-1))),void 0===r[n]?r[n]=[i]:r.hasOwnProperty(n)&&r[n].push(i)}),e[i].push(r)}),e},e.format=function(t){return Object.keys(t).map(function(e){var n=t[e];return i.isArray(n)||(n=[n]),n.map(function(t){return[e].concat(Object.keys(t).map(function(e){var n=t[e];return i.isArray(n)||(n=[n]),n.map(function(t){return!0===t?e:e+"="+t}).join("; ")})).join("; ")}).join(", ")}).join(", ")}},function(t,e,n){var i,r;
/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.3.2
* http://www.svgjs.com
*
* @copyright Wout Fierens <wout@woutfierens.com>
* @license MIT
*
* BUILT: Tue Jun 21 2016 10:02:37 GMT+0200 (Mitteleuropische Sommerzeit)
*/r="undefined"!=typeof window?window:this,void 0===(i=function(){return function(t,e){var n=this.SVG=function(t){if(n.supported)return t=new n.Doc(t),n.parser.draw||n.prepare(),t};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(t){return"Svgjs"+o(t)+n.did++},n.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},n.extend=function(){var t,e,i,r;for(e=(t=[].slice.call(arguments)).pop(),r=t.length-1;r>=0;r--)if(t[r])for(i in e)t[r].prototype[i]=e[i];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,n.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&n.extend(e,t.extend),t.construct&&n.extend(t.parent||n.Container,t.construct),e},n.adopt=function(t){return t?t.instance?t.instance:((e="svg"==t.nodeName?t.parentNode instanceof SVGElement?new n.Nested:new n.Doc:"linearGradient"==t.nodeName?new n.Gradient("linear"):"radialGradient"==t.nodeName?new n.Gradient("radial"):n[o(t.nodeName)]?new(n[o(t.nodeName)]):new n.Element(t)).type=t.nodeName,e.node=t,t.instance=e,e instanceof n.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e):null;var e},n.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new n.Doc(t):new n.Doc(e.documentElement).nested()).size(2,0);n.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:i.polyline().node,path:i.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,matrix:/matrix\(|\)/g,matrixElements:/,*\s+|,/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,negExp:/e\-/gi,comma:/,/g,hyphen:/\-/g,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,whitespaces:/\s+/,X:/X/g},n.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(t){return[].filter.call(t,function(t){return t instanceof SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(t){var e,i;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?n.regex.isRgb.test(t)?(e=n.regex.rgb.exec(t.replace(/\s/g,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):n.regex.isHex.test(t)&&(e=n.regex.hex.exec(4==(i=t).length?["#",i.substring(1,2),i.substring(1,2),i.substring(2,3),i.substring(2,3),i.substring(3,4),i.substring(3,4)].join(""):i),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+s(this.r)+s(this.g)+s(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new n.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new n.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),n.Color.test=function(t){return t+="",n.regex.isHex.test(t)||n.regex.isRgb.test(t)},n.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},n.Color.isColor=function(t){return n.Color.isRgb(t)||n.Color.test(t)},n.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},n.extend(n.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new n.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(/\s+/)},reverse:function(){return this.value.reverse(),this}}),n.PointArray=function(t,e){this.constructor.call(this,t,e||[[0,0]])},n.PointArray.prototype=new n.Array,n.extend(n.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new n.PointArray(r)},parse:function(t){if(t=t.valueOf(),Array.isArray(t))return t;for(var e,n=0,i=(t=this.split(t)).length,r=[];n<i;n++)e=t[n].split(","),r.push([parseFloat(e[0]),parseFloat(e[1])]);return r},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x,this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y;return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}}),n.PathArray=function(t,e){this.constructor.call(this,t,e||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.extend(n.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)"M"==(i=this.value[r][0])||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(i=this.value[n][0])||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},parse:function(t){if(t instanceof n.PathArray)return t.valueOf();var e,i,r,o,s,a=0,l=0,c={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7};if("string"==typeof t){for(e=(t=t.replace(n.regex.negExp,"X").replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen," -").replace(n.regex.comma," ").replace(n.regex.X,"e-").trim().split(n.regex.whitespaces)).length;--e;)if(t[e].indexOf(".")!=t[e].lastIndexOf(".")){var u=t[e].split("."),h=[u.shift(),u.shift()].join(".");t.splice.apply(t,[e,1].concat(h,u.map(function(t){return"."+t})))}}else t=t.reduce(function(t,e){return[].concat.apply(t,e)},[]);var d=[];do{for(n.regex.isPathLetter.test(t[0])?(o=t[0],t.shift()):"M"==o?o="L":"m"==o&&(o="l"),s=[o.toUpperCase()],e=0;e<c[s[0]];++e)s.push(parseFloat(t.shift()));o==s[0]?"M"==o||"L"==o||"C"==o||"Q"==o||"S"==o||"T"==o?(a=s[c[s[0]]-1],l=s[c[s[0]]]):"V"==o?l=s[1]:"H"==o?a=s[1]:"A"==o&&(a=s[6],l=s[7]):"m"==o||"l"==o||"c"==o||"s"==o||"q"==o||"t"==o?(s[1]+=a,s[2]+=l,null!=s[3]&&(s[3]+=a,s[4]+=l),null!=s[5]&&(s[5]+=a,s[6]+=l),a=s[c[s[0]]-1],l=s[c[s[0]]]):"v"==o?(s[1]+=l,l=s[1]):"h"==o?(s[1]+=a,a=s[1]):"a"==o&&(s[6]+=a,s[7]+=l,a=s[6],l=s[7]),"M"==s[0]&&(i=a,r=l),"Z"==s[0]&&(a=i,l=r),d.push(s)}while(t.length);return d},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(n.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof n.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return new n.Number(this+new n.Number(t),this.unit)},minus:function(t){return this.plus(-new n.Number(t))},times:function(t){return new n.Number(this*new n.Number(t),this.unit)},divide:function(t){return new n.Number(this/new n.Number(t),this.unit)},to:function(t){var e=new n.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new n.Number(t),this},at:function(t){return this.destination?new n.Number(this.destination).minus(this).times(t).plus(this):this}}}),n.Element=n.invent({create:function(t){this._stroke=n.defaults.attrs.stroke,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=a(this.bbox(),t,e);return this.width(new n.Number(i.width)).height(new n.Number(i.height))},clone:function(t){var e=d(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(/\s+/)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return n.get(this.attr(t))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=n.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;e=n.adopt(e.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof n.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,o=i.firstChild.childNodes.length;r<o;r++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),n.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},n.morph=function(t){return function(e,i){return new n.MorphObj(e,i).at(t)}},n.Situation=n.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(t.duration).valueOf(),this.delay=new n.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=!1,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.Delay=function(t){this.delay=new n.Number(t).valueOf()},n.FX=n.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0},extend:{animate:function(t,e,i){"object"==typeof t&&(e=t.ease,i=t.delay,t=t.duration);var r=new n.Situation({duration:t||1e3,delay:i||0,ease:n.easing[e||"-"]||e});return this.queue(r),this},delay:function(t){return t=new n.Delay(t),this.queue(t)},target:function(t){return t&&t instanceof n.Element?(this._target=t,this):this._target},timeToPos:function(t){return(t-this.situation.start)/this.situation.duration},posToTime:function(t){return this.situation.duration*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.situation.start=+new Date+this.situation.delay,this.situation.finish=this.situation.start+this.situation.duration,this.initAnimations(),this.active=!0,this.startAnimFrame()),this},queue:function(t){return("function"==typeof t||t instanceof n.Situation||t instanceof n.Delay)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){if(this.situation&&this.situation.stop&&this.situation.stop(),this.situation=this.situations.shift(),this.situation){var t=function(){this.situation instanceof n.Situation?this.initAnimations().at(0):this.situation instanceof n.Delay?this.dequeue():this.situation.call(this)}.bind(this);this.situation.delay?setTimeout(function(){t()},this.situation.delay):t()}return this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(t in e.animations)"viewbox"==t?e.animations[t]=this.target().viewbox().morph(e.animations[t]):(e.animations[t].value="plot"==t?this.target().array().value:this.target()[t](),e.animations[t].value.value&&(e.animations[t].value=e.animations[t].value.value),e.animations[t].relative&&(e.animations[t].destination.value=e.animations[t].destination.value+e.animations[t].value));for(t in e.attrs)if(e.attrs[t]instanceof n.Color){var i=new n.Color(this.target().attr(t));e.attrs[t].r=i.r,e.attrs[t].g=i.g,e.attrs[t].b=i.b}else e.attrs[t].value=this.target().attr(t);for(t in e.styles)e.styles[t].value=this.target().style(t);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){return this.active||this.start(),e&&this.clearQueue(),this.active=!1,t&&this.situation&&(this.situation.loop=!1,this.situation.loops%2==0&&this.situation.reversing&&(this.situation.reversed=!0),this.at(1)),this.stopAnimFrame(),clearTimeout(this.timeout),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.at(0)}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},at:function(t){return this.pos=t,this.situation.start=+new Date-t*this.situation.duration,this.situation.finish=this.situation.start+this.situation.duration,this.step(!0)},speed:function(t){return this.situation.duration=this.situation.duration*this.pos+(1-this.pos)*this.situation.duration/t,this.situation.finish=this.situation.start+this.situation.duration,this.at(this.pos)},loop:function(t,e){return this.situation.loop=this.situation.loops=t||!0,e&&(this.last().reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),clearTimeout(this.timeout),this},play:function(){return this.paused?(this.paused=!1,this.at(this.pos)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))}),this},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,n.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)})},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,n.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)})},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,setTimeout(function(){this.start()}.bind(this),0),this},step:function(t){if(t||(this.pos=this.timeToPos(+new Date)),this.pos>=1&&(!0===this.situation.loop||"number"==typeof this.situation.loop&&--this.situation.loop))return this.situation.reversing&&(this.situation.reversed=!this.situation.reversed),this.at(this.pos-1);this.situation.reversed&&(this.pos=1-this.pos),this.pos>1&&(this.pos=1),this.pos<0&&(this.pos=0);var e=this.situation.ease(this.pos);for(var n in this.situation.once)n>this.lastPos&&n<=e&&(this.situation.once[n].call(this.target(),this.pos,e),delete this.situation.once[n]);return this.active&&this.target().fire("during",{pos:this.pos,eased:e,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.target().off(".fx"),this.active=!1),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=e,this):this},eachAt:function(){var t,e,i=this,r=this.target(),o=this.situation;for(t in o.animations)e=[].concat(o.animations[t]).map(function(t){return t.at?t.at(o.ease(i.pos),i.pos):t}),r[t].apply(r,e);for(t in o.attrs)e=[t].concat(o.attrs[t]).map(function(t){return t.at?t.at(o.ease(i.pos),i.pos):t}),r.attr.apply(r,e);for(t in o.styles)e=[t].concat(o.styles[t]).map(function(t){return t.at?t.at(o.ease(i.pos),i.pos):t}),r.style.apply(r,e);if(o.transforms.length){for(t in e=o.initialTransformation,o.transforms){var s=o.transforms[t];s instanceof n.Matrix?e=s.relative?e.multiply(s.at(o.ease(this.pos))):e.morph(s).at(o.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(o.ease(this.pos))))}r.matrix(e)}return this},once:function(t,e,n){return n||(t=this.situation.ease(t)),this.situation.once[t]=e,this}},parent:n.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new n.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new n.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),n.MorphObj=n.invent({create:function(t,e){return n.Color.isColor(e)?new n.Color(t).morph(e):n.regex.numberAndUnit.test(e)?new n.Number(t).morph(e):(this.value=0,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(t,e,i){if("object"==typeof t)for(var r in t)this.attr(r,t[r]);else this.add(t,new n.MorphObj(null,e),"attrs");return this},style:function(t,e){if("object"==typeof t)for(var i in t)this.style(i,t[i]);else this.add(t,new n.MorphObj(null,e),"styles");return this},x:function(t,e){if(this.target()instanceof n.G)return this.transform({x:t},e),this;var i=(new n.Number).morph(t);return i.relative=e,this.add("x",i)},y:function(t,e){if(this.target()instanceof n.G)return this.transform({y:t},e),this;var i=(new n.Number).morph(t);return i.relative=e,this.add("y",i)},cx:function(t){return this.add("cx",(new n.Number).morph(t))},cy:function(t){return this.add("cy",(new n.Number).morph(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var i;return this.target()instanceof n.Text?this.attr("font-size",t):(t&&e||(i=this.target().bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.add("width",(new n.Number).morph(t)).add("height",(new n.Number).morph(e))),this},plot:function(t){return this.add("plot",this.target().array().morph(t))},leading:function(t){return this.target().leading?this.add("leading",(new n.Number).morph(t)):this},viewbox:function(t,e,i,r){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(t,e,i,r)),this},update:function(t){if(this.target()instanceof n.Stop){if("number"==typeof t||t instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),n.BBox=n.invent({create:function(t){if(t){var i;try{if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom");i=t.node.getBBox()}catch(e){if(t instanceof n.Shape){var r=t.clone(n.parser.draw);i=r.bbox(),r.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height}f(this)},parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.TBox=n.invent({create:function(t){if(t){var e=t.ctm().extract(),n=t.bbox();this.width=n.width*e.scaleX,this.height=n.height*e.scaleY,this.x=n.x+e.x,this.y=n.y+e.y}f(this)},parent:n.Element,construct:{tbox:function(){return new n.TBox(this)}}}),n.RBox=n.invent({create:function(e){if(e){var n=e.doc().parent(),i=e.node.getBoundingClientRect(),r=1;for(this.x=i.left,this.y=i.top,this.x-=n.offsetLeft,this.y-=n.offsetTop;n=n.offsetParent;)this.x-=n.offsetLeft,this.y-=n.offsetTop;for(n=e;n.parent&&(n=n.parent());)n.viewbox&&(r*=n.viewbox().zoom,this.x-=n.x()||0,this.y-=n.y()||0);this.width=i.width/=r,this.height=i.height/=r}f(this),this.x+=t.pageXOffset,this.y+=t.pageYOffset},parent:n.Element,construct:{rbox:function(){return new n.RBox(this)}}}),[n.BBox,n.TBox,n.RBox].forEach(function(t){n.extend(t,{merge:function(e){var n=new t;return n.x=Math.min(this.x,e.x),n.y=Math.min(this.y,e.y),n.width=Math.max(this.x+this.width,e.x+e.width)-n.x,n.height=Math.max(this.y+this.height,e.y+e.height)-n.y,f(n)}})}),n.Matrix=n.invent({create:function(t){var e,i=c([1,0,0,1,0,0]);for(t=t instanceof n.Element?t.matrixify():"string"==typeof t?h(t):6==arguments.length?c([].slice.call(arguments)):"object"==typeof t?t:i,e=p.length-1;e>=0;--e)this[p[e]]=t&&"number"==typeof t[p[e]]?t[p[e]]:i[p[e]]},extend:{extract:function(){var t=l(this,0,1),e=l(this,1,0),i=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(i*Math.PI/180)+this.f*Math.sin(i*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(i*Math.PI/180)+this.e*Math.sin(-i*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-i,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(t){return this.destination=new n.Matrix(t),this},at:function(t){if(!this.destination)return this;var e=new n.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t});if(this.param&&this.param.to){var i={rotation:this.param.from.rotation+(this.param.to.rotation-this.param.from.rotation)*t,cx:this.param.from.cx,cy:this.param.from.cy};(e=e.rotate((this.param.to.rotation-2*this.param.from.rotation)*t,i.cx,i.cy)).param=i}return e},multiply:function(t){return new n.Matrix(this.native().multiply(function(t){return t instanceof n.Matrix||(t=new n.Matrix(t)),t}(t).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(t,e){return new n.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,i,r){return 1!=arguments.length&&3!=arguments.length||(e=t),3==arguments.length&&(r=i,i=e),this.around(i,r,new n.Matrix(t,0,0,e,0,0))},rotate:function(t,e,i){return t=n.utils.radians(t),this.around(e,i,new n.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):this.scale(1,-1,0,e)},skew:function(t,e,n,i){return this.around(n,i,this.native().skewX(t||0).skewY(e||0))},skewX:function(t,e,n){return this.around(e,n,this.native().skewX(t||0))},skewY:function(t,e,n){return this.around(e,n,this.native().skewY(t||0))},around:function(t,e,i){return this.multiply(new n.Matrix(1,0,0,1,t||0,e||0)).multiply(i).multiply(new n.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=n.parser.native.createSVGMatrix(),e=p.length-1;e>=0;e--)t[p[e]]=this[p[e]];return t},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(t,e){var n;n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=e?{x:t,y:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(t){return this.destination=new n.Point(t),this},at:function(t){return this.destination?new n.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=n.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new n.Point(this.native().matrixTransform(t.native()))}}}),n.extend(n.Element,{point:function(t,e){return new n.Point(t,e).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(t,e,i){if(null==t){for(t={},i=(e=this.node.attributes).length-1;i>=0;i--)t[e[i].nodeName]=n.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?n.defaults.attrs[t]:n.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(n.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof n.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new n.Number(e):n.Color.isColor(e)?e=new n.Color(e):Array.isArray(e)?e=new n.Array(e):e instanceof n.Matrix&&e.param&&(this.param=e.param),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),n.extend(n.Element,{transform:function(t,e){var i;if("object"!=typeof t)return i=new n.Matrix(this).extract(),"string"==typeof t?i[t]:i;if(i=new n.Matrix(this),e=!!e||!!t.relative,null!=t.a)i=e?i.multiply(new n.Matrix(t)):new n.Matrix(t);else if(null!=t.rotation)u(t,this),i=e?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(u(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var r=i.extract();t.scaleX=1*t.scaleX/r.scaleX,t.scaleY=1*t.scaleY/r.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else null!=t.skewX||null!=t.skewY?(u(t,this),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,e||(r=i.extract(),i=i.multiply((new n.Matrix).skew(r.skewX,r.skewY,t.cx,t.cy).inverse())),i=i.skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?i=i.flip(t.flip,null==t.offset?this.bbox()["c"+t.flip]:t.offset):null==t.x&&null==t.y||(e?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),n.extend(n.FX,{transform:function(t,e){var i,r=this.target();return"object"!=typeof t?(i=new n.Matrix(r).extract(),"string"==typeof t?i[t]:i):(e=!!e||!!t.relative,null!=t.a?i=new n.Matrix(t):null!=t.rotation?(u(t,r),i=new n.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(u(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new n.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(u(t,r),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new n.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?i=(new n.Matrix).morph((new n.Matrix).flip(t.flip,null==t.offset?r.bbox()["c"+t.flip]:t.offset)):null==t.x&&null==t.y||(i=new n.Translate(t.x,t.y)),i?(i.relative=e,this.last().transforms.push(i),setTimeout(function(){this.start()}.bind(this),0),this):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(/\)\s*/).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(n.regex.matrixElements).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(c(e[1])):t[e[0]].apply(t,e[1])},new n.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.rect(1,1),i=n.screenCTM().inverse();return n.remove(),this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.create([].slice.call(arguments));if("object"==typeof t)for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[this.arguments[n]];if(Array.isArray(t))for(n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[n];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{at:function(t){for(var e=[],i=0,r=this.arguments.length;i<r;++i)e.push(this[this.arguments[i]]);var o=this._undo||new n.Matrix;return o=(new n.Matrix).morph(n.Matrix.prototype[this.method].apply(o,e)).at(t),this.inversed?o.inverse():o},undo:function(t){for(var e=0,i=this.arguments.length;e<i;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return this._undo=new(n[o(this.method)])(t,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new n.Matrix).rotate((new n.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){this._undo=t}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){"object"==typeof t?this.constructor.call(this,t,e):this.constructor.call(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!n.regex.isCss.test(t))return this.node.style[r(t)];t=t.split(";");for(var i=0;i<t.length;i++)e=t[i].split(":"),this.style(e[0].replace(/\s+/g,""),e[1])}else this.node.style[r(t)]=null===e||n.regex.isBlank.test(e)?"":e;return this}}),n.Parent=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(t){return n.adopt(t)})},add:function(t,e){return this.has(t)||(e=null==e?this.children().length:e,this.node.insertBefore(t.node,n.utils.filterSVGElements(this.node.childNodes)[e]||null)),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return this.children().indexOf(t)},get:function(t){return this.children()[t]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(t,e){var i,r,o=this.children();for(i=0,r=o.length;i<r;i++)o[i]instanceof n.Element&&t.apply(o[i],[i,o]),e&&o[i]instanceof n.Container&&o[i].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(t,e){return 0===e||this instanceof n.Defs?this:(t=t||(this instanceof n.Doc?this:this.parent(n.Parent)),e=e||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),n.Container=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(t){var e,i,r,o,s,a,l,c=[0,0,0,0],u=1,h=1,d=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof n.Element){for(a=t,l=t,s=(t.attr("viewBox")||"").match(d),t.bbox,r=new n.Number(t.width()),o=new n.Number(t.height());"%"==r.unit;)u*=r.value,r=new n.Number(a instanceof n.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==o.unit;)h*=o.value,o=new n.Number(l instanceof n.Doc?l.parent().offsetHeight:l.parent().height()),l=l.parent();this.x=0,this.y=0,this.width=r*u,this.height=o*h,this.zoom=1,s&&(e=parseFloat(s[0]),i=parseFloat(s[1]),r=parseFloat(s[2]),o=parseFloat(s[3]),this.zoom=this.width/this.height>r/o?this.height/o:this.width/r,this.x=e,this.y=i,this.width=r,this.height=o)}else t="string"==typeof t?t.match(d).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):c,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t){return t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.destination=new n.ViewBox(t),this},at:function(t){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:n.Container,construct:{viewbox:function(t){return 0==arguments.length?new n.ViewBox(this):(t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.attr("viewBox",t))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){n.Element.prototype[t]=function(e){var n=this;return this.node["on"+t]="function"==typeof e?function(){return e.apply(n,arguments)}:null,this}}),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(t,e,i,r){var o=i.bind(r||t.instance||t),s=(n.handlerMap.indexOf(t)+1||n.handlerMap.push(t))-1,a=e.split(".")[0],l=e.split(".")[1]||"*";n.listeners[s]=n.listeners[s]||{},n.listeners[s][a]=n.listeners[s][a]||{},n.listeners[s][a][l]=n.listeners[s][a][l]||{},i._svgjsListenerId||(i._svgjsListenerId=++n.listenerId),n.listeners[s][a][l][i._svgjsListenerId]=o,t.addEventListener(a,o,!1)},n.off=function(t,e,i){var r=n.handlerMap.indexOf(t),o=e&&e.split(".")[0],s=e&&e.split(".")[1];if(-1!=r)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;n.listeners[r][o]&&n.listeners[r][o][s||"*"]&&(t.removeEventListener(o,n.listeners[r][o][s||"*"][i],!1),delete n.listeners[r][o][s||"*"][i])}else if(s&&o){if(n.listeners[r][o]&&n.listeners[r][o][s]){for(i in n.listeners[r][o][s])n.off(t,[o,s].join("."),i);delete n.listeners[r][o][s]}}else if(s)for(e in n.listeners[r])for(namespace in n.listeners[r][e])s===namespace&&n.off(t,[e,s].join("."));else if(o){if(n.listeners[r][o]){for(namespace in n.listeners[r][o])n.off(t,[o,namespace].join("."));delete n.listeners[r][o]}}else{for(e in n.listeners[r])n.off(t,e);delete n.listeners[r]}},n.extend(n.Element,{on:function(t,e,i){return n.on(this.node,t,e,i),this},off:function(t,e){return n.off(this.node,t,e),this},fire:function(t,e){return t instanceof Event?this.node.dispatchEvent(t):this.node.dispatchEvent(new m(t,{detail:e})),this}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new n.G)}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof n.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof n.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(t){return this.masker=t instanceof n.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(t){return this.clipper=t instanceof n.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(t){this.constructor.call(this,n.create(t+"Gradient")),this.type=t},inherit:n.Container,extend:{at:function(t,e,i){return this.put(new n.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),n.extend(n.Gradient,n.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(t),fy:new n.Number(e)}):this.attr({x1:new n.Number(t),y1:new n.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(t),cy:new n.Number(e)}):this.attr({x2:new n.Number(t),y2:new n.Number(e)})}}),n.extend(n.Defs,{gradient:function(t,e){return this.put(new n.Gradient(t)).update(e)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(t){return("number"==typeof t||t instanceof n.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new n.Number(t.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),n.extend(n.Defs,{pattern:function(t,e,i){return this.put(new n.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),n.Doc=n.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,n.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(t):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(t){var e=this.node.getScreenCTM();return e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),n.Shape=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element}),n.Bare=n.invent({create:function(t,e){if(this.constructor.call(this,n.create(t)),e)for(var i in e.prototype)"function"==typeof e.prototype[i]&&(this[i]=e.prototype[i])},inherit:n.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),n.extend(n.Parent,{element:function(t,e){return this.put(new n.Bare(t,e))},symbol:function(){return this.defs().element("symbol",n.Container)}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,n.xlink)}},construct:{use:function(t,e){return this.put(new n.Use).element(t,e)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(t,e){return this.put(new n.Rect).size(t,e)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(t){return this.put(new n.Circle).rx(new n.Number(t).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(t,e){return this.put(new n.Ellipse).size(t,e).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),n.extend(n.Circle,n.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new n.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new n.Number(t).divide(2))},size:function(t,e){var i=a(this.bbox(),t,e);return this.rx(new n.Number(i.width).divide(2)).ry(new n.Number(i.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,r){return t=void 0!==e?{x1:t,y1:e,x2:i,y2:r}:new n.PointArray(t).toLine(),this.attr(t)},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=a(this.bbox(),t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,i,r){return this.put(new n.Line).plot(t,e,i,r)}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(t){return this.put(new n.Polyline).plot(t)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(t){return this.put(new n.Polygon).plot(t)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(t){return this.attr("points",this._array=new n.PointArray(t))},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=a(this.bbox(),t,e);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(t){return this.attr("d",this._array=new n.PathArray(t))},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=a(this.bbox(),t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new n.Path).plot(t)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(t){if(!t)return this;var i=this,r=e.createElement("img");return r.onload=function(){var e=i.parent(n.Pattern);null!==e&&(0==i.width()&&0==i.height()&&i.size(r.width,r.height),e&&0==e.width()&&0==e.height()&&e.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:r.width,height:r.height,ratio:r.width/r.height,url:t}))},this.attr("href",r.src=this.src=t,n.xlink)},loaded:function(t){return this._loaded=t,this}},construct:{image:function(t,e,i){return this.put(new n.Image).load(t).size(e||0,i||e||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{clone:function(){var t=d(this.node.cloneNode(!0));return this.after(t),t},x:function(t){return null==t?this.attr("x"):(this.textPath||this.lines().each(function(){this.dom.newLined&&this.x(t)}),this.attr("x",t))},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,r=e.length;i<r;++i)0!=i&&3!=e[i].nodeType&&1==n.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{i=0;for(var o=(t=t.split("\n")).length;i<o;i++)this.tspan(t[i]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new n.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=n.utils.map(n.utils.filterSVGElements(t.childNodes),function(t){return n.adopt(t)});return new n.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,r=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(this.textPath||this.attr("x",e.attr("x")),"\n"==this.text()?i+=r:(this.attr("dy",r+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new n.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new n.Text).text(t)},plain:function(t){return this.put(new n.Text).plain(t)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(n.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new n.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{path:function(t){for(var e=new n.TextPath,i=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+i,n.xlink),this},plot:function(t){var e=this.track();return e&&e.plot(t),this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(t){return this.attr("href",t,n.xlink)},show:function(t){return this.attr("show",t,n.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new n.A).to(t)}}}),n.extend(n.Element,{linkTo:function(t){var e=new n.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),n.extend(n.Defs,{marker:function(t,e,i){return this.put(new n.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(t,e,i,r){var o=["marker"];return"all"!=t&&o.push(t),o=o.join("-"),t=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(e,i,r),this.attr(o,t)}});var i={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function s(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function a(t,e,n){return null==n?n=t.height/t.width*e:null==e&&(e=t.width/t.height*n),{width:e,height:n}}function l(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function c(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function u(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function h(t){return t=t.replace(n.regex.whitespace,"").replace(n.regex.matrix,"").split(n.regex.matrixElements),c(n.utils.map(t,function(t){return parseFloat(t)}))}function d(t){for(var e=t.childNodes.length-1;e>=0;e--)t.childNodes[e]instanceof SVGElement&&d(t.childNodes[e]);return n.adopt(t).id(n.eid(t.nodeName))}function f(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}["fill","stroke"].forEach(function(t){var e,r={};r[t]=function(r){if("string"==typeof r||n.Color.isRgb(r)||r&&"function"==typeof r.fill)this.attr(t,r);else for(e=i[t].length-1;e>=0;e--)null!=r[i[t][e]]&&this.attr(i.prefix(t,i[t][e]),r[i[t][e]]);return this},n.extend(n.Element,n.FX,r)}),n.extend(n.Element,n.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return this.transform({flip:t,offset:e})},matrix:function(t){return this.attr("transform",new n.Matrix(t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x((this instanceof n.FX?0:this.x())+t,!0)},dy:function(t){return this.y((this instanceof n.FX?0:this.y())+t,!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(t,e){var i=(this._target||this).type;return"radial"==i||"circle"==i?this.attr("r",new n.Number(t)):this.rx(t).ry(null==e?t:e)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),n.extend(n.Parent,n.Text,n.FX,{font:function(t){for(var e in t)"leading"==e?this.leading(t[e]):"anchor"==e?this.attr("text-anchor",t[e]):"size"==e||"family"==e||"weight"==e||"stretch"==e||"variant"==e||"style"==e?this.attr("font-"+e,t[e]):this.attr(e,t[e]);return this}}),n.Set=n.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var t=new n.BBox;if(0==this.members.length)return t;var e=this.members[0].rbox();return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,this.each(function(){t=t.merge(this.rbox())}),t}},construct:{set:function(t){return new n.Set(t)}}}),n.FX.Set=n.invent({create:function(t){this.set=t}}),n.Set.inherit=function(){var t=[];for(var e in n.Shape.prototype)"function"==typeof n.Shape.prototype[e]&&"function"!=typeof n.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){n.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new n.FX.Set(this)):this}}),t=[],n.FX.prototype)"function"==typeof n.FX.prototype[e]&&"function"!=typeof n.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){n.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},n.extend(n.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),n.extend(n.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(t){var i=e.getElementById(function(t){var e=t.toString().match(n.regex.reference);if(e)return e[1]}(t)||t);return n.adopt(i)},n.select=function(t,i){return new n.Set(n.utils.map((i||e).querySelectorAll(t),function(t){return n.adopt(t)}))},n.extend(n.Parent,{select:function(t){return n.select(t,this.node)}});var p="abcdef".split("");if("function"!=typeof m){var m=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};m.prototype=t.Event.prototype,t.CustomEvent=m}return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),o=e.setTimeout(function(){t(i+r)},r);return n=i+r,o},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),n}(r,r.document)}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){(function(e){
/**! hopscotch - v0.3.1
*
* Copyright 2017 LinkedIn Corp. All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
t.exports=function(){"use strict";var t,n,i,r,o,s,a,l,c,u,h,d,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p="bubble_default",m=window.Sizzle||null,g="undefined",v=!1,y=(void 0===e?"undefined":f(e))!==g,b=!1,_=!1,w=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,S={left:"right",right:"left"};try{f(window.sessionStorage)!==g&&(b=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),_=!0)}catch(t){}return h={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),(l={addClass:function(t,e){var n,i,r,o;if(t.className){for(i=e.split(/\s+/),n=" "+t.className+" ",r=0,o=i.length;o>r;++r)n.indexOf(" "+i[r]+" ")<0&&(n+=i[r]+" ");t.className=n.replace(/^\s+|\s+$/g,"")}else t.className=e},removeClass:function(t,e){var n,i,r,o;for(i=e.split(/\s+/),n=" "+t.className+" ",r=0,o=i.length;o>r;++r)n=n.replace(" "+i[r]+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")},hasClass:function(t,e){return!!t.className&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},getPixelValue:function(t){var e=void 0===t?"undefined":f(t);return"number"===e?t:"string"===e?parseInt(t,10):0},valOrDefault:function(t,e){return(void 0===t?"undefined":f(t))!==g?t:e},invokeCallbackArrayHelper:function(t){var e;return Array.isArray(t)&&"function"==typeof(e=u[t[0]])?e.apply(this,t.slice(1)):void 0},invokeCallbackArray:function(t){var e,n;if(Array.isArray(t)){if("string"==typeof t[0])return l.invokeCallbackArrayHelper(t);for(e=0,n=t.length;n>e;++e)l.invokeCallback(t[e])}},invokeCallback:function(t){return"function"==typeof t?t():"string"==typeof t&&u[t]?u[t]():l.invokeCallbackArray(t)},invokeEventCallbacks:function(t,e){var n,i,r=c[t];if(e)return this.invokeCallback(e);for(n=0,i=r.length;i>n;++n)this.invokeCallback(r[n].cb)},getScrollTop:function(){return f(window.pageYOffset)!==g?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return f(window.pageXOffset)!==g?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function(t,e,n){return t?t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n):void 0},removeEvtListener:function(t,e,n){return t?t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n):void 0},documentIsReady:function(){return"complete"===document.readyState},evtPreventDefault:function(t){t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)},extend:function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},getStepTargetHelper:function(t){var n=document.getElementById(t);if(n)return n;if(y)return(n=e(t)).length?n[0]:null;if(m)return(n=new m(t)).length?n[0]:null;if(document.querySelector)try{return document.querySelector(t)}catch(t){}return/^#[a-zA-Z][\w-_:.]*$/.test(t)?document.getElementById(t.substring(1)):null},getStepTarget:function(t){var e;if(!t||!t.target)return null;if("string"==typeof t.target)return l.getStepTargetHelper(t.target);if(Array.isArray(t.target)){var n,i;for(n=0,i=t.target.length;i>n;n++)if("string"==typeof t.target[n]&&(e=l.getStepTargetHelper(t.target[n])))return e;return null}return t.target},getI18NString:function(t){return o[t]||r[t]},setState:function(t,e,n){var i,r="";if(b&&_)try{sessionStorage.setItem(t,e)}catch(i){_=!1,this.setState(t,e,n)}else b&&sessionStorage.removeItem(t),n&&((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()),document.cookie=t+"="+e+r+"; path=/"},getState:function(t){var e,n,i,r=t+"=",o=document.cookie.split(";");if(b&&(i=sessionStorage.getItem(t)))return i;for(e=0;e<o.length;e++){for(n=o[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r)){i=n.substring(r.length,n.length);break}}return i},clearState:function(t){b?sessionStorage.removeItem(t):this.setState(t,"",-1)},normalizePlacement:function(t){!t.placement&&t.orientation&&(t.placement=t.orientation)},flipPlacement:function(t){if(t.isRtl&&!t._isFlipped){var e,n,i=["orientation","placement"];for(n in t.xOffset&&(t.xOffset=-1*this.getPixelValue(t.xOffset)),i)e=i[n],t.hasOwnProperty(e)&&S.hasOwnProperty(t[e])&&(t[e]=S[t[e]]);t._isFlipped=!0}}}).addEvtListener(window,"load",function(){v&&d.startTour()}),c={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},u={},r={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},o={},(n=function(t){this.init(t)}).prototype={isShowing:!1,currStep:void 0,setPosition:function(t){var e,n,i,r,o,s,a,c=l.getStepTarget(t),u=this.element,h=this.arrowEl,d=t.isRtl?"right":"left";if(l.flipPlacement(t),l.normalizePlacement(t),n=u.offsetWidth,e=u.offsetHeight,l.removeClass(u,"fade-in-down fade-in-up fade-in-left fade-in-right"),i=c.getBoundingClientRect(),a=t.isRtl?i.right-n:i.left,"top"===t.placement)r=i.top-e-this.opt.arrowWidth,o=a;else if("bottom"===t.placement)r=i.bottom+this.opt.arrowWidth,o=a;else if("left"===t.placement)r=i.top,o=i.left-n-this.opt.arrowWidth;else{if("right"!==t.placement)throw new Error("Bubble placement failed because step.placement is invalid or undefined!");r=i.top,o=i.right+this.opt.arrowWidth}(s="center"!==t.arrowOffset?l.getPixelValue(t.arrowOffset):t.arrowOffset)?"top"===t.placement||"bottom"===t.placement?(h.style.top="",h.style[d]="center"===s?Math.floor(n/2-h.offsetWidth/2)+"px":s+"px"):("left"===t.placement||"right"===t.placement)&&(h.style[d]="",h.style.top="center"===s?Math.floor(e/2-h.offsetHeight/2)+"px":s+"px"):(h.style.top="",h.style[d]=""),"center"===t.xOffset?o=i.left+c.offsetWidth/2-n/2:o+=l.getPixelValue(t.xOffset),"center"===t.yOffset?r=i.top+c.offsetHeight/2-e/2:r+=l.getPixelValue(t.yOffset),t.fixedElement||(r+=l.getScrollTop(),o+=l.getScrollLeft()),u.style.position=t.fixedElement?"fixed":"absolute",u.style.top=r+"px",u.style.left=o+"px"},render:function(t,e,n){var i,r,o,a,c,u,h,f,m,g,v=this.element;if(t?this.currStep=t:this.currStep&&(t=this.currStep),this.opt.isTourBubble?(a=d.getCurrTour())&&(r=a.customData,i=a.customRenderer,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:a.hasOwnProperty("isRtl")?a.isRtl:this.opt.isRtl,o=a.unsafe,Array.isArray(a.steps)&&(c=a.steps.length,u=this._getStepI18nNum(this._getStepNum(c-1)),f=this._getStepNum(e)===this._getStepNum(c-1))):(r=t.customData,i=t.customRenderer,o=t.unsafe,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:this.opt.isRtl),h=f?l.getI18NString("doneBtn"):t.showSkip?l.getI18NString("skipBtn"):l.getI18NString("nextBtn"),l.flipPlacement(t),l.normalizePlacement(t),this.placement=t.placement,g={i18n:{prevBtn:l.getI18NString("prevBtn"),nextBtn:h,closeTooltip:l.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(e)),numSteps:u},buttons:{showPrev:l.valOrDefault(t.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(e)>0,showNext:l.valOrDefault(t.showNextButton,this.opt.showNextButton),showCTA:l.valOrDefault(t.showCTAButton&&t.ctaLabel,!1),ctaLabel:t.ctaLabel,showClose:l.valOrDefault(this.opt.showCloseButton,!0)},step:{num:e,isLast:l.valOrDefault(f,!1),title:t.title||"",content:t.content||"",isRtl:t.isRtl,placement:t.placement,padding:l.valOrDefault(t.padding,this.opt.bubblePadding),width:l.getPixelValue(t.width)||this.opt.bubbleWidth,customData:t.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:c,unsafe:l.valOrDefault(o,!1),customData:r||{}}},"function"==typeof i)v.innerHTML=i(g);else if("string"==typeof i){if(!d.templates||"function"!=typeof d.templates[i])throw new Error('Bubble rendering failed - template "'+i+'" is not a function.');v.innerHTML=d.templates[i](g)}else if(s)v.innerHTML=s(g);else{if(!d.templates||"function"!=typeof d.templates[p])throw new Error('Bubble rendering failed - template "'+p+'" is not a function.');v.innerHTML=d.templates[p](g)}var y,b=v.children,_=b.length;for(m=0;_>m;m++)y=b[m],l.hasClass(y,"hopscotch-arrow")&&(this.arrowEl=y);return v.style.zIndex="number"==typeof t.zindex?t.zindex:"",this._setArrow(t.placement),this.hide(!1),this.setPosition(t),n&&n(!t.fixedElement),this},_getStepNum:function(t){var e,n=0,i=d.getSkippedStepsIndexes(),r=i.length;for(e=0;r>e;e++)t>i[e]&&n++;return t-n},_getStepI18nNum:function(t){var e=l.getI18NString("stepNums");return e&&t<e.length?t=e[t]:t+=1,t},_setArrow:function(t){l.removeClass(this.arrowEl,"down up right left"),"top"===t?l.addClass(this.arrowEl,"down"):"bottom"===t?l.addClass(this.arrowEl,"up"):"left"===t?l.addClass(this.arrowEl,"right"):"right"===t&&l.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var t=this,e="fade-in-"+this._getArrowDirection();return l.removeClass(this.element,"hide"),l.addClass(this.element,e),setTimeout(function(){l.removeClass(t.element,"invisible")},50),setTimeout(function(){l.removeClass(t.element,e)},1e3),this.isShowing=!0,this},hide:function(t){var e=this.element;return t=l.valOrDefault(t,!0),e.style.top="",e.style.left="",t?(l.addClass(e,"hide"),l.removeClass(e,"invisible")):(l.removeClass(e,"hide"),l.addClass(e,"invisible")),l.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t),l.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(t){var e;if("cta"===(e=function e(n){return n===t.currentTarget?null:l.hasClass(n,"hopscotch-cta")?"cta":l.hasClass(n,"hopscotch-next")?"next":l.hasClass(n,"hopscotch-prev")?"prev":l.hasClass(n,"hopscotch-close")?"close":e(n.parentElement)}((t=t||window.event).target||t.srcElement)))this.opt.isTourBubble||d.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&l.invokeCallback(this.currStep.onCTA);else if("next"===e)d.nextStep(!0);else if("prev"===e)d.prevStep(!0);else if("close"===e){if(this.opt.isTourBubble){var n=d.getCurrStepNum()===d.getCurrTour().steps.length-1;l.invokeEventCallbacks("close"),d.endTour(!0,n)}else this.opt.onClose&&l.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?d.getCalloutManager().removeCallout(this.opt.id):this.destroy();l.evtPreventDefault(t)}},init:function(t){var e,n,i,r,o=document.createElement("div"),s=this,a=!1;this.element=o,r={showPrevButton:h.showPrevButton,showNextButton:h.showNextButton,bubbleWidth:h.bubbleWidth,bubblePadding:h.bubblePadding,arrowWidth:h.arrowWidth,isRtl:h.isRtl,showNumber:!0,isTourBubble:!0},t=(void 0===t?"undefined":f(t))===g?{}:t,l.extend(r,t),this.opt=r,o.className="hopscotch-bubble animated",r.isTourBubble?(i=d.getCurrTour())&&l.addClass(o,"tour-"+i.id):l.addClass(o,"hopscotch-callout no-number"),e=function(){!a&&s.isShowing&&(a=!0,setTimeout(function(){s.setPosition(s.currStep),a=!1},100))},l.addEvtListener(window,"resize",e),this.clickCb=function(t){s._handleBubbleClick(t)},l.addEvtListener(o,"click",this.clickCb),this.hide(),l.documentIsReady()?document.body.appendChild(o):(document.addEventListener?(n=function(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),document.body.appendChild(o)},document.addEventListener("DOMContentLoaded",n,!1)):(n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),window.detachEvent("onload",n),document.body.appendChild(o))},document.attachEvent("onreadystatechange",n)),l.addEvtListener(window,"load",n))}},i=function(){var t={},e={};this.createCallout=function(i){var r;if(!i.id)throw new Error("Must specify a callout id.");if(!w.test(i.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(t[i.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!l.getStepTarget(i))throw new Error("Must specify existing target element via 'target' option.");return i.showNextButton=i.showPrevButton=!1,i.isTourBubble=!1,r=new n(i),t[i.id]=r,e[i.id]=i,r.render(i,null,function(){r.show(),i.onShow&&l.invokeCallback(i.onShow)}),r},this.getCallout=function(e){return t[e]},this.removeAllCallouts=function(){var e;for(e in t)t.hasOwnProperty(e)&&this.removeCallout(e)},this.removeCallout=function(n){var i=t[n];t[n]=null,e[n]=null,i&&i.destroy()},this.refreshCalloutPositions=function(){var n,i,r;for(n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i=t[n],r=e[n],i&&r&&i.setPosition(r))}},t=function(t){var r,m,b,_,S,x,C,k,T=this,M={},E=[],A=function(t){return r&&r.element&&r.element.parentNode||(r=new n(b)),t&&l.extend(r.opt,{bubblePadding:$("bubblePadding"),bubbleWidth:$("bubbleWidth"),showNextButton:$("showNextButton"),showPrevButton:$("showPrevButton"),showCloseButton:$("showCloseButton"),arrowWidth:$("arrowWidth"),isRtl:$("isRtl")}),r},I=function(){r&&(r.destroy(),r=null)},$=function(t){return void 0===b?h[t]:l.valOrDefault(b[t],h[t])},D=function(){return!_||0>S||S>=_.steps.length?null:_.steps[S]},L=function(){T.nextStep()},P=function t(e,n){var i,r;S+e>=0&&S+e<_.steps.length?(S+=e,r=function(){l.getStepTarget(i)?(M[S]&&delete M[S],n(S)):(M[S]=!0,l.invokeEventCallbacks("error"),t(e,n))},(i=D()).delay?setTimeout(r,i.delay):r()):n(-1)},O=function(t,e){var n,i,r,o,s=A(),a=this;if(s.hide(),t=l.valOrDefault(t,!0),(n=D()).nextOnTargetClick&&l.removeEvtListener(l.getStepTarget(n),"click",L),i=n,r=e>0?i.multipage:S>0&&_.steps[S-1].multipage,o=function(n){var o;if(-1===n)return this.endTour(!0);if(t&&(o=e>0?l.invokeEventCallbacks("next",i.onNext):l.invokeEventCallbacks("prev",i.onPrev)),n===S){if(r)return void j();(o=l.valOrDefault(o,!0))?this.showStep(n):this.endTour(!1)}},!r&&$("skipIfNoElement"))P(e,function(t){o.call(a,t)});else if(S+e>=0&&S+e<_.steps.length){if(S+=e,n=D(),!l.getStepTarget(n)&&!r)return l.invokeEventCallbacks("error"),this.endTour(!0,!1);o.call(this,S)}else if(S+e===_.steps.length)return this.endTour();return this},N=function(t){function n(){r.show(),l.invokeEventCallbacks("show",i.onShow)}var i=_.steps[t],r=A(),o=l.getStepTarget(i);S!==t&&D().nextOnTargetClick&&l.removeEvtListener(l.getStepTarget(D()),"click",L),S=t,r.hide(!1),r.render(i,t,function(t){t?function(t){var n,i,r,o,s,a,c=A().element,u=l.getPixelValue(c.style.top),h=u+l.getPixelValue(c.offsetHeight),d=l.getStepTarget(D()).getBoundingClientRect(),p=d.top+l.getScrollTop(),m=d.bottom+l.getScrollTop(),v=p>u?u:p,b=h>m?h:m,_=l.getScrollTop(),w=_+l.getWindowHeight(),S=v-$("scrollTopMargin");v>=_&&(v<=_+$("scrollTopMargin")||w>=b)?t&&t():$("smoothScroll")?("undefined"==typeof YAHOO?"undefined":f(YAHOO))!==g&&f(YAHOO.env)!==g&&f(YAHOO.env.ua)!==g&&f(YAHOO.util)!==g&&f(YAHOO.util.Scroll)!==g?(n=YAHOO.env.ua.webkit?document.body:document.documentElement,r=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,(i=new YAHOO.util.Scroll(n,{scroll:{to:[0,S]}},$("scrollDuration")/1e3,r)).onComplete.subscribe(t),i.animate()):y?e("body, html").animate({scrollTop:S},$("scrollDuration"),t):(0>S&&(S=0),o=_>v?-1:1,s=Math.abs(_-S)/($("scrollDuration")/10),(a=function(){var e=l.getScrollTop(),n=e+o*s;return o>0&&n>=S||0>o&&S>=n?(n=S,t&&t(),void window.scrollTo(0,n)):(window.scrollTo(0,n),l.getScrollTop()===e?void(t&&t()):void setTimeout(a,10))})()):(window.scrollTo(0,S),t&&t())}(n):n(),i.nextOnTargetClick&&l.addEvtListener(o,"click",L)}),j()},j=function(){var t=_.id+":"+S,e=d.getSkippedStepsIndexes();e&&e.length>0&&(t+=":"+e.join(",")),l.setState($("cookieName"),t,1)};this.getCalloutManager=function(){return(void 0===m?"undefined":f(m))===g&&(m=new i),m},this.startTour=function(t,e){var n,i={},r=this;if(!_){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!w.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");_=t,function(t){var e,n,i,r={};for(e in t)t.hasOwnProperty(e)&&"id"!==e&&"steps"!==e&&(r[e]=t[e]);return k.call(this,r,!0),(n=l.getState($("cookieName")))&&(i=n.split(":"),x=i[0],C=i[1],i.length>2&&(E=i[2].split(",")),C=parseInt(C,10)),this}.call(this,t)}if((void 0===e?"undefined":f(e))!==g){if(e>=_.steps.length)throw new Error("Specified step number out of bounds.");n=e}if(!l.documentIsReady())return v=!0,this;if(void 0===n&&_.id===x&&(void 0===C?"undefined":f(C))!==g){if(n=C,E.length>0)for(var o=0,s=E.length;s>o;o++)i[E[o]]=!0}else n||(n=0);return function(t,e,n){var i,r;if(S=t||0,M=e||{},i=D(),r=l.getStepTarget(i))n(S);else if(!r){if(l.invokeEventCallbacks("error"),M[S]=!0,$("skipIfNoElement"))return void P(1,n);n(S=-1)}}(n,i,function(t){return-1!==t&&l.getStepTarget(_.steps[t])?(l.invokeEventCallbacks("start"),A().hide(!1),r.isActive=!0,void(l.getStepTarget(D())?r.showStep(t):(l.invokeEventCallbacks("error"),$("skipIfNoElement")&&r.nextStep(!1)))):void r.endTour(!1,!1)}),this},this.showStep=function(t){var e=_.steps[t],n=S;return l.getStepTarget(e)?(e.delay?setTimeout(function(){N(t)},e.delay):N(t),this):(S=t,l.invokeEventCallbacks("error"),void(S=n))},this.prevStep=function(t){return O.call(this,t,-1),this},this.nextStep=function(t){return O.call(this,t,1),this},this.endTour=function(t,e){var n,i=A();return t=l.valOrDefault(t,!0),e=l.valOrDefault(e,!0),_&&(n=D())&&n.nextOnTargetClick&&l.removeEvtListener(l.getStepTarget(n),"click",L),S=0,C=void 0,i.hide(),t&&l.clearState($("cookieName")),this.isActive&&(this.isActive=!1,_&&e&&l.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),I(),_=null,this},this.getCurrTour=function(){return _},this.getCurrTarget=function(){return l.getStepTarget(D())},this.getCurrStepNum=function(){return S},this.getSkippedStepsIndexes=function(){var t,e=[];for(t in M)e.push(t);return e},this.refreshBubblePosition=function(){var t=D();return t&&A().setPosition(t),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(t,e,n){return t&&c[t].push({cb:e,fromTour:n}),this},this.unlisten=function(t,e){var n,i,r=c[t];for(n=0,i=r.length;i>n;++n)r[n].cb===e&&r.splice(n,1);return this},this.removeCallbacks=function(t,e){var n,i,r,o;for(o in c)if(!t||t===o)if(e)for(i=0,r=(n=c[o]).length;r>i;++i)n[i].fromTour&&(n.splice(i--,1),--r);else c[o]=[];return this},this.registerHelper=function(t,e){"string"==typeof t&&"function"==typeof e&&(u[t]=e)},this.unregisterHelper=function(t){u[t]=null},this.invokeHelper=function(t){var e,n,i=[];for(e=1,n=arguments.length;n>e;++e)i.push(arguments[e]);u[t]&&u[t].call(null,i)},this.setCookieName=function(t){return b.cookieName=t,this},this.resetDefaultOptions=function(){return b={},this},this.resetDefaultI18N=function(){return o={},this},this.getState=function(){return l.getState($("cookieName"))},k=function(t,e){var n,i,r,s=["next","prev","start","end","show","error","close"];for(b||this.resetDefaultOptions(),l.extend(b,t),t&&l.extend(o,t.i18n),i=0,r=s.length;r>i;++i)t[n="on"+s[i].charAt(0).toUpperCase()+s[i].substring(1)]&&this.listen(s[i],t[n],e);return A(!0),this},this.configure=function(t){return k.call(this,t,!1)},this.setRenderer=function(t){var e=void 0===t?"undefined":f(t);return"string"===e?(p=t,s=void 0):"function"===e&&(s=t),this},this.setEscaper=function(t){return"function"==typeof t&&(a=t),this},function(t){t&&this.configure(t)}.call(this,t)},d=new t,function(){var t={escape:function(t){return a?a(t):null==t?"":(""+t).replace(new RegExp("[&<>\"']","g"),function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&quot;":"'"==t?"&#x27;":void 0})}};this.templates=this.templates||{},this.templates.bubble_default=function(e){function n(e,n){return n?t.escape(e):e}var i,r="";t.escape,Array.prototype.join,r+="\n";var o=e.i18n,s=e.buttons,a=e.step,l=e.tour;return r+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(i=a.width)?"":i)+"px; padding: "+(null==(i=a.padding)?"":i)+'px;">\n  ',l.isTour&&(r+='<span class="hopscotch-bubble-number">'+(null==(i=o.stepNum)?"":i)+"</span>"),r+='\n  <div class="hopscotch-bubble-content">\n    ',""!==a.title&&(r+='<h3 class="hopscotch-title">'+(null==(i=n(a.title,l.unsafe))?"":i)+"</h3>"),r+="\n    ",""!==a.content&&(r+='<div class="hopscotch-content">'+(null==(i=n(a.content,l.unsafe))?"":i)+"</div>"),r+='\n  </div>\n  <div class="hopscotch-actions">\n    ',s.showPrev&&(r+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(i=o.prevBtn)?"":i)+"</button>"),r+="\n    ",s.showCTA&&(r+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(i=s.ctaLabel)?"":i)+"</button>"),r+="\n    ",s.showNext&&(r+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(i=o.nextBtn)?"":i)+"</button>"),r+="\n  </div>\n  ",s.showClose&&(r+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(i=o.closeTooltip)?"":i)+"</button>"),r+'\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>\n'}}.call(d),d}()}).call(this,n(1))},function(t,e,n){var i=n(440);function r(t,e){var n=this,r=2;e=e||{},this.margin=e.margin||-1,this.scrolling=!1,this.scrollWhenOutside=e.scrollWhenOutside||!1;var a={},l=i(a),c=!1;window.addEventListener("mousemove",l,!1),window.addEventListener("touchmove",l,!1),isNaN(e.pixels)||(r=e.pixels),"boolean"==typeof e.autoScroll?this.autoScroll=e.autoScroll?function(){return!0}:function(){return!1}:void 0===e.autoScroll?this.autoScroll=function(){return!1}:"function"==typeof e.autoScroll&&(this.autoScroll=e.autoScroll),this.destroy=function(){window.removeEventListener("mousemove",l,!1),window.removeEventListener("touchmove",l,!1),window.removeEventListener("mousedown",f,!1),window.removeEventListener("touchstart",f,!1),window.removeEventListener("mouseup",p,!1),window.removeEventListener("touchend",p,!1)};for(var u=null,h=[],d=0;d<t.length;d++){if(t[d]===window){u=window;break}h.push(t[d])}function f(){c=!0}function p(){c=!1}t=h,h=null,Object.defineProperties(this,{down:{get:function(){return c}},interval:{get:function(){return 1/r*1e3}},pixels:{set:function(t){r=t},get:function(){return r}}}),window.addEventListener("mousedown",f,!1),window.addEventListener("touchstart",f,!1),window.addEventListener("mouseup",p,!1),window.addEventListener("touchend",p,!1);var m;function g(e){if(n.autoScroll()&&e.target){var i,r=e.target;if(!m||!s(a,m))if(!m&&r){for(m=null;r=r.parentNode;)for(var o=0;o<t.length;o++)if(t[o]===r&&s(a,t[o])){m=t[o];break}}else{i=m,m=null;for(o=0;o<t.length;o++)t[o]!==i&&s(a,t[o])&&(m=t[o])}u&&v(u),m&&v(m)}}function v(t){var e=o(t);a.y<e.top+n.margin?y(t,-1,e):a.y>e.bottom-n.margin&&y(t,1,e),a.x<e.left+n.margin?b(t,-1,e):a.x>e.right-n.margin&&b(t,1,e)}function y(t,e,i){n.autoScroll()&&(n.scrollWhenOutside||s(a,t,i))&&(t===window?window.scrollTo(t.pageXOffset,t.pageYOffset+e):t.scrollTop=t.scrollTop+e,setTimeout(function(){a.y<i.top+n.margin?y(t,e,i):a.y>i.bottom-n.margin&&y(t,e,i)},n.interval))}function b(t,e,i){n.autoScroll()&&(n.scrollWhenOutside||s(a,t,i))&&(t===window?window.scrollTo(t.pageXOffset+e,t.pageYOffset):t.scrollLeft=t.scrollLeft+e,setTimeout(function(){a.x<i.left+n.margin?b(t,e,i):a.x>i.right-n.margin&&b(t,e,i)},n.interval))}window.addEventListener("mousemove",g,!1),window.addEventListener("touchmove",g,!1)}function o(t){if(t===window)return{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight};try{return t.getBoundingClientRect()}catch(e){throw new TypeError("Can't call getBoundingClientRect on "+t)}}function s(t,e,n){return n=n||o(e),t.y>n.top&&t.y<n.bottom&&t.x>n.left&&t.x<n.right}t.exports=function(t,e){return new r(t,e)}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=t,this.$q=n,this.$rootScope=i,this.ConfigService=r,this.ProjectService=o,this.StudentDataService=s,this.UtilService=a,this.studentAchievementsByWorkgroupId={},this.debug=!1}return n(e,[{key:"debugOutput",value:function(t){this.debug&&console.log(t)}},{key:"retrieveStudentAchievements",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.ConfigService.isPreview()){var i=this.ConfigService.getWorkgroupId();return this.studentAchievementsByWorkgroupId[i]=[],Promise.resolve(this.studentAchievementsByWorkgroupId)}var r={method:"GET",url:this.ConfigService.getAchievementsURL(),params:{}};return null!=e?r.params.workgroupId=e:"classroomMonitor"!==this.ConfigService.getMode()&&(r.params.workgroupId=this.ConfigService.getWorkgroupId(),r.params.periodId=this.ConfigService.getPeriodId()),null!=n&&(r.params.type=n),this.$http(r).then(function(e){var n=e.data,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(t.addOrUpdateStudentAchievement(l),"studentRun"===t.ConfigService.getMode()){var c=t.ProjectService.getAchievementByAchievementId(l.achievementId);null!=c&&(c.completed=!0,null!=c.deregisterFunction&&(c.deregisterFunction(),t.debugOutput("deregistering "+c.id)))}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}if("studentRun"===t.ConfigService.getMode()){var u=t.ProjectService.getAchievementItems(),h=!0,d=!1,f=void 0;try{for(var p,m=u[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;!t.isStudentAchievementExists(g.id)&&t.isProjectAchievementSatisfied(g)&&t.createStudentAchievement(g)}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}return t.registerAchievementListeners(),t.studentAchievementsByWorkgroupId})}},{key:"addOrUpdateStudentAchievement",value:function(t){if(null!=t){var e=t.workgroupId;null==this.studentAchievementsByWorkgroupId[e]&&(this.studentAchievementsByWorkgroupId[e]=new Array);for(var n=this.studentAchievementsByWorkgroupId[e],i=!1,r=0;r<n.length;r++){var o=n[r];if(null!=o.achievementId&&o.achievementId===t.achievementId&&null!=o.workgroupId&&o.workgroupId===t.workgroupId){n[r]=t,i=!0;break}}i||n.push(t)}}},{key:"saveAchievementToServer",value:function(e){var n=this;if(this.ConfigService.isPreview()){var i=this.$q.defer();return i.resolve(e),i.promise}var r={method:"POST",url:this.ConfigService.getAchievementsURL(),headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={achievementId:e.achievementId,workgroupId:e.workgroupId,type:e.type};return null!=e.id&&(o.id=e.id),null!=e.data&&(o.data=angular.toJson(e.data)),r.data=t.param(o),this.$http(r).then(function(t){var e=t.data;return null!=e.data&&(e.data=angular.fromJson(e.data)),n.addOrUpdateStudentAchievement(e),e})}},{key:"createNewStudentAchievement",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return null==i&&(i=this.ConfigService.getWorkgroupId()),{id:null,type:t,achievementId:e,workgroupId:i,data:n}}},{key:"registerAchievementListeners",value:function(){var t=this.ProjectService.getAchievements();if(t.isEnabled){var e=!0,n=!1,i=void 0;try{for(var r,o=t.items[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;this.isStudentAchievementExists(s.id)||this.createListenerFunction(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"createListenerFunction",value:function(t){var e=null;"milestone"===t.type||"milestoneReport"===t.type||"completion"===t.type?e=this.createStudentWorkSavedListener(t):"aggregate"===t.type&&(e=this.createAggregateAchievementListener(t)),t.deregisterListenerFunction=e}},{key:"isStudentAchievementExists",value:function(t){var e=this.ConfigService.getWorkgroupId(),n=this.getStudentAchievementsByWorkgroupId(e),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(s.value.achievementId===t)return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return!1}},{key:"createStudentAchievement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.isVisible&&(alert("Congratulations you completed: "+t.name),console.log("Congratulations you completed: "+t.name));var n=this.ProjectService.getAchievementByAchievementId(t.id);null!=n&&null!=n.deregisterListenerFunction&&(n.deregisterListenerFunction(),this.debugOutput("deregistering "+n.id));var i=this.ConfigService.getWorkgroupId(),r=this.createNewStudentAchievement(t.type,t.id,e,i),o=this.getStudentAchievementsByWorkgroupId(i);o.push(r),this.saveAchievementToServer(r),this.$rootScope.$broadcast("achievementCompleted",{achievementId:t.id})}},{key:"createStudentWorkSavedListener",value:function(t){var e=this;return this.debugOutput("registering "+t.id),this.$rootScope.$on("studentWorkSavedToServer",function(n,i){e.debugOutput("createStudentWorkSavedListener checking "+t.id+" completed "+i.nodeId),e.isStudentAchievementExists(t.id)||e.isAchievementCompletedByStudent(t)&&e.createStudentAchievement(t)})}},{key:"isProjectAchievementSatisfied",value:function(t){var e=!1;return null!=t&&("milestone"===t.type||"milestoneReport"===t.type||"completion"===t.type?e=this.isAchievementCompletedByStudent(t):"aggregate"===t.type&&(e=this.checkAggregateAchievement(t))),e}},{key:"isAchievementCompletedByStudent",value:function(t){var e=!0,n=!0,i=!1,r=void 0;try{for(var o,s=t.satisfyCriteria[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;e=e&&this.isCriterionSatisfied(a)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"isCriterionSatisfied",value:function(t){return"isCompleted"===t.name&&this.StudentDataService.isCompleted(t.nodeId,t.componentId)}},{key:"createAggregateAchievementListener",value:function(t){var e=this,n=this,i=t;return this.debugOutput("registering "+t.id),this.$rootScope.$on("achievementCompleted",function(t,r){var o=i;if(null!=o){e.debugOutput("createAggregateAchievementListener checking "+o.id+" completed "+r.achievementId);var s=o.id;r.achievementId;if(!e.isStudentAchievementExists(s))e.checkAggregateAchievement(o)&&n.createStudentAchievement(o)}})}},{key:"checkAggregateAchievement",value:function(t){var e=!1,n=t.params;if(null!=n)for(var i=n.achievementIds,r=0;r<i.length;r++){var o=i[r];e=0===r?this.isStudentAchievementExists(o):e&&this.isStudentAchievementExists(o)}return e}},{key:"getStudentAchievementsByWorkgroupId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==t&&(t=this.ConfigService.getWorkgroupId()),null==this.studentAchievementsByWorkgroupId[t]?(this.studentAchievementsByWorkgroupId[t]=[],this.studentAchievementsByWorkgroupId[t]):null!=this.studentAchievementsByWorkgroupId[t]?this.studentAchievementsByWorkgroupId[t]:[]}},{key:"getStudentAchievementsByAchievementId",value:function(t){var e=[],n=this.ConfigService.getClassmateWorkgroupIds(),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=this.studentAchievementsByWorkgroupId[l];if(null!=c)for(var u=c.length-1;u>=0;u--){var h=c[u];null!=h&&null!=h.data&&h.achievementId===t&&e.push(h)}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"getAchievementIdToStudentAchievementsMappings",value:function(t){var e={},n=this.ProjectService.getAchievementItems(),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l){var c=this.getStudentAchievementsByAchievementId(l.id);e[l.id]=c}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"getAvailableAchievementId",value:function(){for(var t=null,e=this.ProjectService.getAchievementItems();null==t;){t=this.UtilService.generateKey(10);var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.id===t){t=null;break}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return t}}]),e}();i.$inject=["$http","$q","$rootScope","ConfigService","ProjectService","StudentDataService","UtilService"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";var i=n(268),r=n(278);t.exports=function(t){var e=t.module("dragula",["ng"]);return e.factory("dragulaService",i(t)),e.directive("dragula",r(t)),"dragula"}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$http=n,this.$q=i,this.$rootScope=r,this.ConfigService=o,this.ProjectService=s,this.UtilService=a,this.$translate=this.$filter("translate"),this.annotations=null,this.dummyAnnotationId=1}return n(e,[{key:"getAnnotations",value:function(){return this.annotations}},{key:"getAnnotationById",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.annotations[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(s.id===t)return s}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return null}},{key:"getLatestAnnotation",value:function(t){var e=null;if(null!=t){var n=t.nodeId,i=t.componentId,r=t.fromWorkgroupId,o=t.toWorkgroupId,s=t.type,a=this.annotations;if(null!=a)for(var l=a.length-1;l>=0;l--){var c=a[l];if(null!=c){var u=!0;if(n&&c.nodeId!==n&&(u=!1),u&&i&&c.componentId!==i&&(u=!1),u&&r&&c.fromWorkgroupId!==r&&(u=!1),u&&o&&c.toWorkgroupId!==o&&(u=!1),u&&s)if(s.constructor===Array){var h=!0,d=!1,f=void 0;try{for(var p,m=s[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;c.type!==g&&(u=!1)}}catch(t){d=!0,f=t}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}}else c.type!==s&&(u=!1);if(u){e=c;break}}}}return e}},{key:"createAnnotation",value:function(t,e,n,i,r,o,s,a,l,c,u,h,d){var f={};return f.id=t,f.runId=e,f.periodId=n,f.fromWorkgroupId=i,f.toWorkgroupId=r,f.nodeId=o,f.componentId=s,f.studentWorkId=a,f.localNotebookItemId=l,f.notebookItemId=c,f.type=u,f.data=h,f.clientSaveTime=d,f}},{key:"saveAnnotation",value:function(e){if(null!=e){var n=[];if(n.push(e),null!=n&&n.length>0){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&(l.requestToken=this.UtilService.generateKey(),this.addOrUpdateAnnotation(l))}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}else n=[];if(this.ConfigService.isPreview()){var c={annotations:n},u=this.saveToServerSuccess(c),h=this.$q.defer();return h.resolve(u),h.promise}var d={runId:this.ConfigService.getRunId(),workgroupId:this.ConfigService.getWorkgroupId(),annotations:angular.toJson(n)},f={method:"POST",url:this.ConfigService.getConfigParam("teacherDataURL"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t.param(d)};return this.$http(f).then(angular.bind(this,function(t){var e=null;if(null!=t&&null!=t.data){var n=t.data;e=this.saveToServerSuccess(n)}return e}))}}},{key:"saveToServerSuccess",value:function(t){var e=null;if(null!=t){var n=t.annotations,i=this.annotations;if(null!=n&&null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=i.length-1;u>=0;u--){if(null!=(e=i[u]).id&&e.id===c.id){e.serverSaveTime=c.serverSaveTime,this.$rootScope.$broadcast("annotationSavedToServer",{annotation:e});break}if(null!=e.requestToken&&e.requestToken===c.requestToken){e.id=c.id,e.serverSaveTime=c.serverSaveTime,e.requestToken=null,this.ConfigService.isPreview()&&null==e.id&&(e.id=this.dummyAnnotationId,this.dummyAnnotationId++),this.$rootScope.$broadcast("annotationSavedToServer",{annotation:e});break}}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}return e}},{key:"addOrUpdateAnnotation",value:function(t){for(var e=!1,n=this.annotations.length-1;n>=0;n--){var i=this.annotations[n];this.isAnnotationMatch(t,i)&&(e=!0,i.data=t.data,i.clientSaveTime=t.clientSaveTime,i.serverSaveTime=t.serverSaveTime)}e||this.annotations.push(t)}},{key:"isAnnotationMatch",value:function(t,e){return t.id===e.id&&t.nodeId===e.nodeId&&t.componentId===e.componentId&&t.fromWorkgroupId===e.fromWorkgroupId&&t.toWorkgroupId===e.toWorkgroupId&&t.type===e.type&&t.studentWorkId===e.studentWorkId&&t.runId===e.runId&&t.periodId===e.periodId}},{key:"setAnnotations",value:function(t){this.annotations=t}},{key:"getTotalScore",value:function(t,e){var n=0,i=[];if(null!=t&&null!=e)for(var r=t.length-1;r>=0;r--){var o=t[r];if(null!=o&&o.toWorkgroupId==e&&("score"===o.type||"autoScore"===o.type)){var s=o.nodeId,a=o.componentId,l=o.data;if(this.ProjectService.isActive(s)){var c=s+"-"+a;if(-1==i.indexOf(c)&&null!=l){var u=l.value;isNaN(u)||(null==n?n=u:n+=u,i.push(c))}}}}return n}},{key:"getScore",value:function(t,e){var n=null,i=[],r=this.annotations;if(null!=t&&null!=e)for(var o=r.length-1;o>=0;o--){var s=r[o];if(null!=s&&s.toWorkgroupId==t&&("score"===s.type||"autoScore"===s.type)){var a=s.nodeId;if(e==a){var l=s.componentId;if(this.componentExists(a,l)){var c=s.data,u=a+"-"+l;if(-1==i.indexOf(u)&&null!=c){var h=c.value;isNaN(h)||(null==n?n=h:n+=h,i.push(u))}}}}}return n}},{key:"componentExists",value:function(t,e){return null!=this.ProjectService.getComponentByNodeIdAndComponentId(t,e)}},{key:"createAutoScoreAnnotation",value:function(t,e,n,i,r,o){var s=Date.parse(new Date);return this.createAnnotation(null,t,e,null,r,n,i,null,null,null,"autoScore",o,s)}},{key:"createAutoCommentAnnotation",value:function(t,e,n,i,r,o){var s=Date.parse(new Date);return this.createAnnotation(null,t,e,null,r,n,i,null,null,null,"autoComment",o,s)}},{key:"createInappropriateFlagAnnotation",value:function(t,e,n,i,r,o,s,a){var l=Date.parse(new Date);return this.createAnnotation(null,t,e,r,o,n,i,s,null,null,"inappropriateFlag",a,l)}},{key:"getLatestComponentAnnotations",value:function(t,e,n,i,r){return{score:this.getLatestScoreAnnotation(t,e,n,i),comment:this.getLatestCommentAnnotation(t,e,n,r)}}},{key:"getLatestNotebookItemAnnotations",value:function(t,e){return{score:this.getLatestNotebookItemScoreAnnotation(t,e),comment:this.getLatestNotebookItemCommentAnnotation(t,e)}}},{key:"getLatestNotebookItemScoreAnnotation",value:function(t,e){for(var n=this.getAnnotations(),i=n.length-1;i>=0;i--){var r=n[i];if(null!=r&&"score"===r.type&&null!=r.notebookItemId&&r.localNotebookItemId===e)return r}return null}},{key:"getLatestNotebookItemCommentAnnotation",value:function(t,e){for(var n=this.getAnnotations(),i=n.length-1;i>=0;i--){var r=n[i];if(null!=r&&"comment"===r.type&&null!=r.notebookItemId&&r.localNotebookItemId===e)return r}return null}},{key:"getLatestScoreAnnotation",value:function(t,e,n,i){var r=null,o=this.getAnnotations();null==i&&(i="any");for(var s=o.length-1;s>=0;s--){var a=o[s];if(null!=a){var l=!1,c=a.nodeId,u=a.componentId,h=a.toWorkgroupId,d=a.type;if(t==c&&e==u&&n==h&&("any"!==i||"autoScore"!==d&&"score"!==d?"autoScore"===i&&"autoScore"===d?l=!0:"score"===i&&"score"===d&&(l=!0):l=!0,l)){r=a;break}}}return r}},{key:"getLatestCommentAnnotation",value:function(t,e,n,i){var r=null,o=this.getAnnotations();null==i&&(i="any");for(var s=o.length-1;s>=0;s--){var a=o[s];if(null!=a){var l=!1,c=a.nodeId,u=a.componentId,h=a.toWorkgroupId,d=a.type;if(t==c&&e==u&&n==h&&("any"!==i||"autoComment"!==d&&"comment"!==d?"autoComment"===i&&"autoComment"===d?l=!0:"comment"===i&&"comment"===d&&(l=!0):l=!0,l)){r=a;break}}}return r}},{key:"getScoreValueFromScoreAnnotation",value:function(t){if(null!=t){var e=t.data;if(null!=e)return e.value}return null}},{key:"getAllGlobalAnnotationsByNodeIdAndComponentId",value:function(t,e){return this.getAllGlobalAnnotations().filter(function(n){return n.nodeId===t&&n.componentId===e})}},{key:"getAllGlobalAnnotations",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this.annotations[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;null!=s&&null!=s.data&&s.data.isGlobal&&t.push(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"getAllGlobalAnnotationGroups",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this.annotations[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s&&null!=s.data&&s.data.isGlobal)if(null!=s.data.annotationGroupName&&null!=s.data.annotationGroupCreatedTime){var a=!1,l=!0,c=!1,u=void 0;try{for(var h,d=t[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;f.annotationGroupNameAndTime==s.data.annotationGroupName+s.data.annotationGroupCreatedTime&&(f.annotations.push(s),a=!0)}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}if(!a){var p={annotationGroupNameAndTime:s.data.annotationGroupName+s.data.annotationGroupCreatedTime,annotations:[s]};t.push(p)}}else console.error(this.$translate("GLOBAL_ANNOTATION_DOES_NOT_HAVE_A_NAME")+s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"getActiveGlobalAnnotationGroups",value:function(){return this.activeGlobalAnnotationGroups}},{key:"calculateActiveGlobalAnnotationGroups",value:function(){this.activeGlobalAnnotationGroups=[];var t=!0,e=!1,n=void 0;try{for(var i,r=this.annotations[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;if(null!=o&&null!=o.data&&o.data.isGlobal&&null==o.data.unGlobalizedTimestamp)if(null!=o.data.annotationGroupName){var s=!1,a=!0,l=!1,c=void 0;try{for(var u,h=this.activeGlobalAnnotationGroups[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;d.annotationGroupName==o.data.annotationGroupName+"_"+o.data.annotationGroupCreatedTime&&(d.annotations.push(o),s=!0)}}catch(t){l=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}if(!s){var f={annotationGroupName:o.data.annotationGroupName+"_"+o.data.annotationGroupCreatedTime,annotations:[o],nodeId:o.nodeId,componentId:o.componentId,serverSaveTime:o.serverSaveTime};this.activeGlobalAnnotationGroups.push(f)}}else console.error(his.$translate("GLOBAL_ANNOTATION_DOES_NOT_HAVE_A_NAME")+o)}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}},{key:"getInActiveGlobalAnnotations",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this.annotations[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;null!=s&&null!=s.data&&s.data.isGlobal&&null!=s.data.unGlobalizedTimestamp&&t.push(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"getLatestTeacherScoreAnnotationByStudentWorkId",value:function(t){return this.getLatestAnnotationByStudentWorkIdAndType(t,"score")}},{key:"getLatestTeacherCommentAnnotationByStudentWorkId",value:function(t){return this.getLatestAnnotationByStudentWorkIdAndType(t,"comment")}},{key:"getLatestAutoScoreAnnotationByStudentWorkId",value:function(t){return this.getLatestAnnotationByStudentWorkIdAndType(t,"autoScore")}},{key:"getLatestAutoCommentAnnotationByStudentWorkId",value:function(t){return this.getLatestAnnotationByStudentWorkIdAndType(t,"autoComment")}},{key:"getLatestAnnotationByStudentWorkIdAndType",value:function(t,e){for(var n=this.annotations.length-1;n>=0;n--){var i=this.annotations[n];if(null!=i&&t==i.studentWorkId&&e==i.type)return i}return null}},{key:"getAnnotationsByStudentWorkId",value:function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=this.annotations[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a&&t==a.studentWorkId&&e.push(a)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"getAverageAutoScore",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=0,o=0,s=!0,a=!1,l=void 0;try{for(var c,u=this.getAllLatestScoreAnnotations(t,e,n)[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;if(h.nodeId===t&&h.componentId===e&&(-1===n||h.periodId===n)){var d=null;null!=(d=null!=i?this.getSubScore(h,i):this.getScoreFromAnnotation(h))&&(r+=d,o++)}}}catch(t){a=!0,l=t}finally{try{!s&&u.return&&u.return()}finally{if(a)throw l}}return r/o}},{key:"getAllLatestScoreAnnotations",value:function(t,e,n){for(var i={},r=[],o=this.annotations.length-1;o>=0;o--){var s=this.annotations[o],a=s.toWorkgroupId;null!=i[a]||t!==s.nodeId||e!==s.componentId||-1!==n&&n!==s.periodId||"score"!==s.type&&"autoScore"!==s.type||(i[a]=s,r.push(s))}return r}},{key:"getScoreFromAnnotation",value:function(t){return t.data.value}},{key:"getSubScore",value:function(t,e){var n=!0,i=!1,r=void 0;try{for(var o,s=t.data.scores[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a.id===e)return a.score}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return null}}]),e}();i.$inject=["$filter","$http","$q","$rootScope","ConfigService","ProjectService","UtilService"],e.default=i}).call(this,n(1))},function(module,__webpack_exports__,__webpack_require__){"use strict";var svg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(235),svg_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(svg_js__WEBPACK_IMPORTED_MODULE_0__),svg_draggable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(425),svg_draggable_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(svg_draggable_js__WEBPACK_IMPORTED_MODULE_1__),_componentController__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6);class ConceptMapController extends _componentController__WEBPACK_IMPORTED_MODULE_2__.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g){if(super(e,i,o,s,l,u,h,d,f,p,m,g),this.$anchorScroll=t,this.$location=n,this.$q=r,this.$timeout=a,this.ConceptMapService=c,this.width=800,this.height=600,this.availableNodes=[],this.availableLinks=[],this.nodes=[],this.links=[],this.displayLinkTypeChooser=!1,this.displayLinkTypeChooserModalOverlay=!1,this.selectedLinkType=null,this.initializedDisplayLinkTypeChooserModalOverlay=!1,this.modalWidth=800,this.modalHeight=600,this.autoFeedbackString="",this.selectedNode=null,this.tempOffsetX=0,this.tempOffsetY=0,this.setBackgroundImage(this.componentContent.background,this.componentContent.stretchBackground),this.setIdsWithNodeIdComponentId(),this.initialize(),this.isStudentMode())this.availableNodes=this.componentContent.nodes,this.availableLinks=this.componentContent.links;else if(this.isGradingMode()||this.isGradingRevisionMode()){const t=this.$scope.componentState;t?"gradingRevision"===this.mode?this.setIdsWithNodeIdComponentIdWorkgroupIdComponentStateIdPrefix(t):this.setIdsWithNodeIdComponentIdWorkgroupIdComponentStateId(t):this.setIdsWithNodeIdComponentIdWorkgroupId()}else if(this.isOnlyShowWorkMode()){null==this.$scope.componentState?this.setSVGId(this.nodeId,this.componentId,this.workgroupId,"onlyShowWork_"):this.setSVGId(this.nodeId,this.componentId,this.workgroupId,this.componentStateId,"onlyShowWork_")}this.$timeout(angular.bind(this,this.initializeSVG)),this.initializeScopeGetComponentState(this.$scope,"conceptMapController")}initialize(){this.initializeWidth(),this.initializeHeight(),this.initializeShowNodeLabels()}initializeWidth(){null!=this.componentContent.width&&(this.width=this.componentContent.width)}initializeHeight(){null!=this.componentContent.height&&(this.height=this.componentContent.height)}initializeShowNodeLabels(){null==this.componentContent.showNodeLabels&&(this.componentContent.showNodeLabels=!0)}setIdsWithNodeIdComponentId(){this.setSVGId(this.nodeId,this.componentId),this.setConceptMapContainerId(this.nodeId,this.componentId),this.setSelectNodeBarId(this.nodeId,this.componentId),this.setFeedbackContainerId(this.nodeId,this.componentId)}setIdsWithNodeIdComponentIdWorkgroupId(){this.setSVGId(this.nodeId,this.componentId,this.workgroupId),this.setConceptMapContainerId(this.nodeId,this.componentId,this.workgroupId),this.setSelectNodeBarId(this.nodeId,this.componentId,this.workgroupId),this.setFeedbackContainerId(this.nodeId,this.componentId,this.workgroupId)}setIdsWithNodeIdComponentIdWorkgroupIdComponentStateId(t){this.setSVGId(this.nodeId,this.componentId,this.workgroupId,t.id),this.setConceptMapContainerId(this.nodeId,this.componentId,this.workgroupId,t.id),this.setSelectNodeBarId(this.nodeId,this.componentId,this.workgroupId,t.id),this.setFeedbackContainerId(this.nodeId,this.componentId,this.workgroupId,t.id)}setIdsWithNodeIdComponentIdWorkgroupIdComponentStateIdPrefix(t){this.setSVGId(this.nodeId,this.componentId,this.workgroupId,t.id,"gradingRevision_"),this.setConceptMapContainerId(this.nodeId,this.componentId,this.workgroupId,t.id,"gradingRevision_"),this.setSelectNodeBarId(this.nodeId,this.componentId,this.workgroupId,t.id,"gradingRevision_"),this.setFeedbackContainerId(this.nodeId,this.componentId,this.workgroupId,t.id,"gradingRevision_")}setSVGId(t,e,n,i,r=""){null!=t&&null!=e&&null!=n&&null!=i?this.svgId="svg_"+r+t+"_"+e+"_"+n+"_"+i:null!=t&&null!=e&&null!=n?this.svgId="svg_"+t+"_"+e+"_"+n:null!=t&&null!=e&&(this.svgId="svg_"+t+"_"+e)}setConceptMapContainerId(t,e,n,i,r=""){null!=t&&null!=e&&null!=n&&null!=i?this.conceptMapContainerId="conceptMapContainer_"+t+"_"+e+"_"+n+"_"+i:null!=t&&null!=e&&null!=n?this.conceptMapContainerId="conceptMapContainer_"+t+"_"+e+"_"+n:null!=t&&null!=e&&(this.conceptMapContainerId="conceptMapContainer_"+t+"_"+e)}setSelectNodeBarId(t,e,n,i,r=""){null!=t&&null!=e&&null!=n&&null!=i?this.selectNodeBarId="selectNodeBar_"+t+"_"+e+"_"+n+"_"+i:null!=t&&null!=e&&null!=n?this.selectNodeBarId="selectNodeBar_"+t+"_"+e+"_"+n:null!=t&&null!=e&&(this.selectNodeBarId="selectNodeBar_"+t+"_"+e)}setFeedbackContainerId(t,e,n,i,r=""){null!=t&&null!=e&&null!=n&&null!=i?this.feedbackContainerId="feedbackContainer_"+t+"_"+e+"_"+n+"_"+i:null!=t&&null!=e&&null!=n?this.feedbackContainerId="feedbackContainer_"+t+"_"+e+"_"+n:null!=t&&null!=e&&(this.feedbackContainerId="feedbackContainer_"+t+"_"+e)}handleNodeSubmit(){this.submit("nodeSubmitButton")}initializeSVG(){this.setupSVG();let t=this.$scope.componentState;if(this.isStudentMode()){if(this.UtilService.hasShowWorkConnectedComponent(this.componentContent))this.handleConnectedComponents();else if(this.ConceptMapService.componentStateHasStudentWork(t,this.componentContent))t=this.ProjectService.injectAssetPaths(t),this.setStudentWork(t);else if(this.UtilService.hasConnectedComponent(this.componentContent))this.handleConnectedComponents();else if(!this.ConceptMapService.componentStateHasStudentWork(t,this.componentContent)&&this.componentContentHasStarterConceptMap()){const t=this.componentContent.starterConceptMap;this.populateConceptMapData(t)}}else null==t?this.populateStarterConceptMap():(t=this.ProjectService.injectAssetPaths(t),this.setStudentWork(t));this.hasMaxSubmitCount()&&!this.hasSubmitsLeft()&&this.disableSubmitButton(),this.isDisabled||this.enableNodeDragging(),this.disableComponentIfNecessary(),this.broadcastDoneRenderingComponent()}componentContentHasStarterConceptMap(){return null!=this.componentContent.starterConceptMap}setStudentWork(t){const e=t.studentData;if(null!=e){const t=e.conceptMapData,n=e.submitCounter;null!=n&&(this.submitCounter=n),null!=t&&this.populateConceptMapData(t),this.processLatestStudentWork()}}populateConceptMapData(t){this.populateNodes(t),this.populateLinks(t),null!=t.backgroundPath&&""!=t.backgroundPath&&this.setBackgroundImage(t.backgroundPath,t.stretchBackground),this.moveLinkTextToFront(),this.moveNodesToFront(),this.$timeout(()=>{this.refreshLinkLabels()})}populateNodes(t){this.nodes=[];for(let e of t.nodes){const t=e.instanceId,n=e.originalId,i=e.fileName,r=e.label,o=e.x,s=e.y,a=e.width,l=e.height,c=this.ConceptMapService.newConceptMapNode(this.draw,t,n,i,r,o,s,a,l,this.componentContent.showNodeLabels);this.addNode(c),this.isDisabled||this.setNodeMouseEvents(c)}}populateLinks(t){this.links=[];for(let e of t.links){const t=e.instanceId,n=e.originalId,i=e.sourceNodeInstanceId,r=e.destinationNodeInstanceId,o=e.label,s=e.color,a=e.curvature,l=e.startCurveUp,c=e.endCurveUp;let u=null,h=null;null!=i&&(u=this.getNodeById(i)),null!=r&&(h=this.getNodeById(r));const d=this.ConceptMapService.newConceptMapLink(this.draw,t,n,u,h,o,s,a,l,c);this.addLink(d),this.isDisabled||this.setLinkMouseEvents(d)}}refreshLinkLabels(){for(let t of this.nodes)if(t.showLabel){const e=t.getLabel();t.setLabel(e)}for(let t of this.links){const e=t.getLabel();t.setLabel(e)}}submit(t){if(this.isSubmitDirty){let t=!0;if(this.hasMaxSubmitCount()){const e=this.getNumberOfSubmitsLeft();let n="";e<=0?(alert(this.$translate("conceptMap.youHaveNoMoreChances")),t=!1):1===e?(n=this.$translate("conceptMap.youHaveOneChance",{numberOfSubmitsLeft:e}),t=confirm(n)):e>1&&(n=this.$translate("conceptMap.youHaveMultipleChances",{numberOfSubmitsLeft:e}),t=confirm(n))}t?(this.incrementSubmitCounter(),this.hasMaxSubmitCount()&&!this.hasSubmitsLeft()&&(this.isSubmitButtonDisabled=!0),this.hasAutoGrading()&&this.performAutoGrading(),this.isSubmit=!0,this.emitComponentSubmitTriggered()):this.isSubmit=!1}}hasAutoGrading(){return null!=this.componentContent.customRuleEvaluator&&""!=this.componentContent.customRuleEvaluator}performAutoGrading(){const customRuleEvaluator=this.componentContent.customRuleEvaluator,componentContent=this.componentContent,conceptMapData=this.getConceptMapData(),thisConceptMapService=this.ConceptMapService;let thisResult={};const any=function(){return thisConceptMapService.any(componentContent,conceptMapData,arguments)},all=function(){return thisConceptMapService.all(componentContent,conceptMapData,arguments)},setResult=function(t){thisResult=t};eval(customRuleEvaluator),this.autoFeedbackResult=thisResult;let resultString="";this.componentContent.showAutoScore&&null!=thisResult.score&&(resultString+=this.$translate("SCORE")+": "+thisResult.score,this.hasMaxScore()&&(resultString+="/"+this.getMaxScore())),this.componentContent.showAutoFeedback&&null!=thisResult.feedback&&(""!==resultString&&(resultString+="<br/>"),resultString+=this.$translate("FEEDBACK")+": "+thisResult.feedback),""!=resultString&&this.$mdDialog.show(this.$mdDialog.alert().clickOutsideToClose(!0).title(this.$translate("FEEDBACK")).htmlContent(resultString).ariaLabel(this.$translate("FEEDBACK")).ok(this.$translate("CLOSE"))),this.autoFeedbackString=resultString}createComponentState(t){const e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={},r=this.getConceptMapData();if(i.conceptMapData=r,n.isSubmit=this.isSubmit,this.isSubmit&&(this.isSubmit=!1,this.hasAutoFeedbackScore()||this.hasAutoFeedbackText())){const t=this.ConfigService.getRunId(),e=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();if(n.annotations=[],this.hasAutoFeedbackScore()){const s={value:parseFloat(this.autoFeedbackResult.score),autoGrader:"conceptMap"};this.hasMaxScore()&&(s.maxAutoScore=parseFloat(this.getMaxScore()));const a=this.AnnotationService.createAutoScoreAnnotation(t,e,i,r,o,s);n.annotations.push(a),this.isAuthoringMode()&&(null==this.latestAnnotations&&(this.latestAnnotations={}),this.latestAnnotations.score=a)}if(this.hasAutoFeedbackText()){const s={value:this.autoFeedbackResult.feedback,autoGrader:"conceptMap"},a=this.AnnotationService.createAutoCommentAnnotation(t,e,i,r,o,s);n.annotations.push(a),this.isAuthoringMode()&&(null==this.latestAnnotations&&(this.latestAnnotations={}),this.latestAnnotations.comment=a)}}return i.submitCounter=this.submitCounter,n.studentData=i,n.componentType="ConceptMap",n.nodeId=this.nodeId,n.componentId=this.componentId,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}hasAutoFeedback(){return null!=this.autoFeedbackResult}hasAutoFeedbackScore(){return null!=this.autoFeedbackResult&&null!=this.autoFeedbackResult.score}hasAutoFeedbackText(){return null!=this.autoFeedbackResult&&null!=this.autoFeedbackResult.feedback}getConceptMapData(){const t={nodes:[],links:[]};for(let e of this.nodes){const n=e.toJSONObject();t.nodes.push(n)}for(let e of this.links){const n=e.toJSONObject();t.links.push(n)}if(null!=this.background){const e=this.background;t.background=this.getBackgroundFileName(e),t.backgroundPath=e,t.stretchBackground=this.stretchBackground}return t}getBackgroundFileName(t){return t.substring(t.lastIndexOf("/")+1)}createAutoScoreAnnotation(t){const e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoScoreAnnotation(e,n,i,r,o,t)}createAutoCommentAnnotation(t){const e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoCommentAnnotation(e,n,i,r,o,t)}linkTypeSelected(t){if(null!=this.highlightedElement&&"ConceptMapLink"===this.highlightedElement.constructor.name){const e=this.highlightedElement,n=t.label,i=t.color,r=t.id;e.setLabel(n),e.setColor(i),e.setOriginalId(r)}this.clearHighlightedElement(),this.studentDataChanged()}getLinksTitle(){return this.componentContent.linksTitle}showLinkTypeChooser(){this.initializedDisplayLinkTypeChooserModalOverlay||(this.setLinkTypeChooserOverlayStyle(),this.initializedDisplayLinkTypeChooserModalOverlay=!0),this.linkTypeChooserStyle.top="20px",this.linkTypeChooserStyle.left="600px",this.displayLinkTypeChooser=!0}hideLinkTypeChooser(){this.displayLinkTypeChooser=!1,this.displayLinkTypeChooserModalOverlay=!1,this.newlyCreatedLink=null}setupSVG(){this.draw=SVG(this.svgId),this.draw.width(this.width),this.draw.height(this.height),this.highlightedElement=null,this.activeNode=null,this.activeLink=null,this.drawingLink=!1,this.newlyCreatedLink=null,this.isDisabled||(this.draw.mousedown(t=>{this.svgMouseDown(t)}),this.draw.mouseup(t=>{this.svgMouseUp(t)}),this.draw.mousemove(t=>{this.svgMouseMove(t)}),this.addDragOverListenerIfNecessary(),this.addDropListenerIfNecessary(),this.setLinkTypeChooserStyle())}addDragOverListenerIfNecessary(){const t=angular.element("#"+this.svgId);this.addedDragOverListener||(t[0].addEventListener("dragover",t=>{t.preventDefault()}),this.addedDragOverListener=!0)}addDropListenerIfNecessary(){const t=angular.element("#"+this.svgId);this.addedDropListener||(t[0].addEventListener("drop",t=>{this.newNodeDropped(t)}),this.addedDropListener=!0)}setLinkTypeChooserStyle(){this.linkTypeChooserStyle={width:"300px",position:"absolute",left:"600px",top:"20px",border:"1px solid black",backgroundColor:"white",cursor:"pointer","z-index":1e4,padding:"16px"}}setLinkTypeChooserOverlayStyle(){this.modalWidth=this.getModalWidth();const t=this.modalWidth,e=angular.element("#"+this.conceptMapContainerId).height();this.linkTypeChooserModalOverlayStyle={position:"absolute","z-index":9999,width:t,height:e,"background-color":"#000000",opacity:.4}}getModalWidth(){const t=angular.element(document.getElementById("#"+this.selectNodeBarId)).css("width"),e=angular.element(document.getElementById(this.svgId)).css("width");if(null!=t&&null!=e){const n=parseInt(t.replace("px","")),i=parseInt(e.replace("px",""));if(null!=n&&null!=i)return n+i}return null}getModalHeight(){const t=angular.element(document.getElementById("#"+this.selectNodeBarId)).css("height"),e=angular.element(document.getElementById(this.svgId)).css("height");if(null!=t&&null!=e){const n=parseInt(t.replace("px","")),i=parseInt(e.replace("px",""));if(null!=n&&null!=i)return Math.max(n,i)}return null}cancelLinkTypeChooser(){null!=this.newlyCreatedLink&&(this.newlyCreatedLink.remove(),this.newlyCreatedLink=null),this.hideLinkTypeChooser(),this.clearHighlightedElement()}svgMouseDown(t){"svg"===t.target.tagName&&this.clearHighlightedElement()}svgMouseUp(t){null!=this.activeLink&&null==this.activeNode&&this.activeLink.remove(),this.drawingLink=!1,this.activeLink=null,this.enableNodeDragging(),this.moveLinkTextToFront(),this.moveNodesToFront()}svgMouseMove(t){if(null!=this.activeLink){const e=this.getRelativeCoordinatesByEvent(t),n=null,i=null,r=e.x,o=e.y,s=this.activeLinkStartX,a=this.activeLinkStartY,l=this.ConceptMapService.calculateDistance(s,a,r,o);if(!this.linkCurvatureSet&&l>20){const t=Math.abs(this.ConceptMapService.getSlope(s,a,r,o));o<a?(this.setActiveLinkCurvature(t),this.activeLink.startCurveUp=!0,this.activeLink.endCurveUp=!0):o>a&&(this.setActiveLinkCurvature(t),this.activeLink.startCurveUp=!1,this.activeLink.endCurveUp=!1),this.linkCurvatureSet=!0}const c=!0;this.activeLink.updateCoordinates(n,i,r,o,c)}}setActiveLinkCurvature(t){this.activeLink.curvature=null==t?.5:t<1?0:.5}setActiveNode(t){t.showDeleteButton(),t.showBorder(),this.activeNode=t}clearActiveNode(){for(let t of this.nodes)t===this.activeNode&&t!==this.highlightedElement&&(t.hideDeleteButton(),t.hideBorder());this.activeNode=null}getRelativeCoordinatesByEvent(t){const e=t.offsetX,n=t.offsetY;let i=0,r=0;const o=navigator.userAgent;if("svg"===t.target.tagName)if(this.isUserAgentChrome(o)){const e=t.target.getCTM();i=e.e,r=e.f}else if(this.isUserAgentFirefox(o)){const e=t.target.createSVGMatrix();i=e.e,r=e.f}else{const e=t.target.getCTM();i=e.e,r=e.f}else if("circle"===t.target.tagName){if(this.isUserAgentChrome(o));else if(this.isUserAgentFirefox(o)){const e=t.target.getCTM(),n=t.target.getBBox();i=e.e+n.x,r=e.f+n.y}}else if("rect"===t.target.tagName){if(this.isUserAgentChrome(o));else if(this.isUserAgentFirefox(o)){const e=t.target.getCTM(),n=t.target.getBBox(),o=n.x,s=n.y;i=e.e+o,r=e.f+s}}else if("image"===t.target.tagName){if(this.isUserAgentChrome(o));else if(this.isUserAgentFirefox(o)){const e=t.target.parentElement.getCTM();i=e.e,r=e.f}}else if("path"===t.target.tagName){if(this.isUserAgentChrome(o));else if(this.isUserAgentFirefox(o)){const e=t.target.attributes.x2,n=t.target.attributes.y2;null!=e&&null!=n&&(i=parseInt(e.value),r=parseInt(n.value))}}else if(this.isUserAgentChrome(o));else if(this.isUserAgentFirefox(o)){const e=t.target.getCTM();i=e.e,r=e.f}return{x:i+e,y:r+n}}isUserAgentChrome(t){return-1!==t.indexOf("Chrome")}isUserAgentFirefox(t){return-1!==t.indexOf("Firefox")}selectNode(t,e){this.selectedNode=e,this.tempOffsetX=t.offsetX,this.tempOffsetY=t.offsetY}newNodeDropped(t){const e=this.selectedNode,n=e.fileName,i=e.label,r=e.width,o=e.height,s=e.id,a=this.getRelativeCoordinatesByEvent(t),l=a.x-this.tempOffsetX,c=a.y-this.tempOffsetY,u=this.getNewConceptMapNodeId(),h=this.ConceptMapService.newConceptMapNode(this.draw,u,s,n,i,l,c,r,o,this.componentContent.showNodeLabels);this.addNode(h),this.setNodeMouseEvents(h),this.setHighlightedElement(h),this.studentDataChanged(),this.enableNodeDragging()}getNewConceptMapNodeId(){return this.ConceptMapService.getNextAvailableId(this.nodes,"studentNode")}getNewConceptMapLinkId(){return this.ConceptMapService.getNextAvailableId(this.links,"studentLink")}setNodeMouseEvents(t){t.setNodeMouseOver(t=>{this.nodeMouseOver(t)}),t.setNodeMouseOut(t=>{this.nodeMouseOut(t)}),t.setConnectorMouseDown(t=>{this.disableNodeDragging(),this.connectorMouseDown(t)}),t.setNodeMouseDown(t=>{this.nodeMouseDown(t)}),t.setNodeMouseUp(t=>{this.nodeMouseUp(t)}),t.setDeleteButtonMouseDown(t=>{this.nodeDeleteButtonMouseDown(t)}),t.setDeleteButtonMouseOver(t=>{this.nodeDeleteButtonMouseOver(t)}),t.setDeleteButtonMouseOut(t=>{this.nodeDeleteButtonMouseOut(t)}),t.setDragMove(t=>{this.nodeDragMove(t)})}setHighlightedElement(t){this.clearHighlightedElement(),this.hideLinkTypeChooser(),this.highlightedElement=t,t.isHighlighted(!0),t.showDeleteButton(),"ConceptMapNode"===t.constructor.name?t.showBorder():"ConceptMapLink"===t.constructor.name&&(this.showLinkTypeChooser(),this.selectedLinkType=t.getOriginalId())}clearHighlightedElement(){null!=this.highlightedElement&&("ConceptMapNode"===this.highlightedElement.constructor.name?this.highlightedElement.hideBorder():"ConceptMapLink"===this.highlightedElement.constructor.name&&this.hideLinkTypeChooser(),this.highlightedElement.isHighlighted(!1),this.highlightedElement.hideDeleteButton(),this.highlightedElement=null)}enableNodeDragging(){for(let t of this.nodes){const e=t.getGroup(),n={minX:0,minY:0,maxX:this.width,maxY:this.height};e.draggable(n)}}disableNodeDragging(){for(let t of this.nodes){t.getGroup().draggable(!1)}}moveLinkTextToFront(){for(let t of this.links)t.moveTextGroupToFront()}moveNodesToFront(){for(let t of this.nodes){t.getGroup().front()}}addNode(t){this.nodes.push(t)}removeNode(t){const e=t.getOutgoingLinks();let n=e.length;for(;n>0;){const t=e[0];this.removeLink(t),n--}const i=t.getIncomingLinks();let r=i.length;for(;r>0;){const t=i[0];this.removeLink(t),r--}t.remove();for(let e=0;e<this.nodes.length;e++){if(this.nodes[e]==t){this.nodes.splice(e,1);break}}}removeAllNodes(){for(let t of this.nodes)t.remove();this.nodes=[]}getNodeById(t){for(let e of this.nodes){if(t===e.getId())return e}return null}getNodeByGroupId(t){for(let e of this.nodes){if(t===e.getGroupId())return e}return null}getLinkById(t){for(let e of this.links){if(t===e.getId())return e}return null}getLinkByGroupId(t){for(let e of this.links){if(t===e.getGroupId())return e}return null}getNodeByConnectorId(t){for(let e of this.nodes){if(t===e.getConnectorId())return e}return null}removeNodeById(t){for(let e=0;e<this.nodes.length;e++){if(t===this.nodes[e].getId()){this.nodes.splice(e,1);break}}}addLink(t){this.links.push(t)}removeLink(t){t.remove();for(let e=0;e<this.links.length;e++){if(t==this.links[e]){this.links.splice(e,1);break}}}removeAllLinks(){for(let t of this.links)t.remove();this.links=[]}nodeMouseOver(t){const e=t.target.parentElement.id,n=this.getNodeByGroupId(e);null!=n&&this.setActiveNode(n)}nodeMouseOut(t){const e=t.target.parentElement.id;null!=this.getNodeByGroupId(e)&&this.clearActiveNode()}nodeMouseDown(t){if(null!=t.target.parentElement){const e=t.target.parentElement.id,n=this.getNodeByGroupId(e);null!=n&&this.setHighlightedElement(n)}}nodeMouseUp(t){if(this.drawingLink&&null!=this.activeLink){const e=t.target.parentElement.id,n=this.getNodeByGroupId(e);this.activeLink.sourceNode.getGroupId()===e?(this.activeLink.remove(),this.activeLink=null):(this.activeLink.setDestination(n),this.addLink(this.activeLink),this.setHighlightedElement(this.activeLink),this.newlyCreatedLink=this.activeLink,this.displayLinkTypeChooserModalOverlay=!0,this.studentDataChanged())}this.drawingLink=!1}linkDeleteButtonClicked(t,e){this.removeLink(e),this.studentDataChanged(),this.hideLinkTypeChooser()}connectorMouseDown(t){this.drawingLink=!0;const e=t.target;this.disableNodeDragging();const n=this.getNodeByConnectorId(e.id),i=this.getNewConceptMapLinkId(),r=this.ConceptMapService.newConceptMapLink(this.draw,i,null,n);this.setLinkMouseEvents(r),this.activeLink=r,this.linkCurvatureSet=!1,this.activeLinkStartX=n.connectorCX(),this.activeLinkStartY=n.connectorCY(),this.setHighlightedElement(r),this.clearActiveNode(),this.setActiveNode(n)}setLinkMouseEvents(t){t.setLinkMouseDown(t=>{this.linkMouseDown(t)}),t.setLinkTextMouseDown(t=>{this.linkTextMouseDown(t)}),t.setLinkMouseOver(t=>{this.linkMouseOver(t)}),t.setLinkMouseOut(t=>{this.linkMouseOut(t)}),t.setDeleteButtonClicked(e=>{this.linkDeleteButtonClicked(e,t)})}linkMouseDown(t){const e=this.getGroupId(t.target),n=this.getLinkByGroupId(e);this.setHighlightedElement(n)}linkTextMouseDown(t){let e=null;if("tspan"===t.target.nodeName?e=t.target.parentElement.parentElement.linkGroupId:"text"===t.target.nodeName?e=t.target.parentElement.linkGroupId:"rect"===t.target.nodeName&&(e=t.target.parentElement.linkGroupId),null!=e){const t=this.getLinkByGroupId(e);this.setHighlightedElement(t)}}linkMouseOver(t){const e=this.getGroupId(t.target);this.getLinkByGroupId(e).showDeleteButton()}linkMouseOut(t){const e=this.getGroupId(t.target),n=this.getLinkByGroupId(e);null!=n&&n!=this.highlightedElement&&n.hideDeleteButton()}nodeDeleteButtonMouseDown(t){if(null!=t.target.parentElement){const e=t.target.parentElement.parentElement.id,n=this.getNodeByGroupId(e);this.removeNode(n),this.studentDataChanged()}}nodeDeleteButtonMouseOver(t){const e=t.target.parentElement.parentElement.id,n=this.getNodeByGroupId(e);this.setActiveNode(n)}nodeDeleteButtonMouseOut(t){const e=t.target.parentElement.parentElement.id,n=this.getNodeByGroupId(e);this.clearActiveNode(n)}nodeDragMove(t){const e=t.target.id,n=this.getNodeByGroupId(e);null!=n&&n.dragMove(t),this.studentDataChanged()}getGroupId(t){let e=null,n=t,i=null;for(;null!=n;)"svg"===n.tagName?(e=i,n=null):(i=n.id,n=n.parentElement);return e}populateStarterConceptMap(){null!=this.componentContent.starterConceptMap&&this.populateConceptMapData(this.componentContent.starterConceptMap)}clearConceptMap(){this.removeAllLinks(),this.removeAllNodes()}resetConceptMap(){const t=this.$translate("conceptMap.areYouSureYouWantToResetYourWork");if(confirm(t))if(this.clearConceptMap(),this.UtilService.hasConnectedComponent(this.componentContent))this.handleConnectedComponents();else if(null!=this.componentContent.starterConceptMap){const t=this.componentContent.starterConceptMap;this.populateConceptMapData(t)}}showAutoFeedback(){this.$mdDialog.show(this.$mdDialog.alert().parent(angular.element(document.querySelector("#"+this.feedbackContainerId))).clickOutsideToClose(!0).title(this.$translate("FEEDBACK")).htmlContent(this.autoFeedbackString).ariaLabel(this.$translate("FEEDBACK")).ok(this.$translate("CLOSE")))}snip(t){let e=angular.element("#svg_"+this.nodeId+"_"+this.componentId);if(null!=e&&e.length>0){e=e[0];let n=(new XMLSerializer).serializeToString(e);this.ConceptMapService.getHrefToBase64ImageReplacements(n).then(e=>{for(let t of e){const e=t.imageHref,i=t.base64Image,r=new RegExp(e,"g");n=n.replace(r,i)}const i=document.createElement("canvas"),r=i.getContext("2d"),o=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),s=(self.URL||self.webkitURL||self).createObjectURL(o),a=new Image,l=this.UtilService;a.onload=e=>{const n=e.target;i.width=n.width,i.height=n.height,r.drawImage(n,0,0);const o=i.toDataURL("image/png"),s=l.getImageObjectFromBase64String(o,!1);this.NotebookService.addNote(t,s)},a.src=s})}}createMergedComponentState(t){let e=[],n=[],i=null,r=null;for(let o of t)if("ConceptMap"===o.componentType){const t=o.studentData.conceptMapData;e=e.concat(t.nodes),n=n.concat(t.links),null!=t.backgroundPath&&""!==t.backgroundPath&&(i=t.backgroundPath,r=t.stretchBackground)}else if("Draw"===o.componentType||"Embedded"===o.componentType||"Graph"===o.componentType||"Label"===o.componentType||"Table"===o.componentType){!0===this.UtilService.getConnectedComponentByComponentState(this.componentContent,o).importWorkAsBackground&&this.setComponentStateAsBackgroundImage(o)}null!=this.componentContent.background&&""!==this.componentContent.background&&(i=this.componentContent.background,this.componentContent.stretchBackground&&(r=this.componentContent.stretchBackground));let o=this.NodeService.createNewComponentState();return o.studentData={conceptMapData:{nodes:e,links:n,backgroundPath:i}},null!=r&&(o.studentData.conceptMapData.stretchBackground=r),o=this.ProjectService.injectAssetPaths(o)}setComponentStateAsBackgroundImage(t){this.UtilService.generateImageFromComponentState(t).then(t=>{this.setBackgroundImage(t.url)})}setBackgroundImage(t,e){this.background=t,this.stretchBackground=e,this.backgroundSize=e?"100% 100%":""}}ConceptMapController.$inject=["$anchorScroll","$filter","$location","$mdDialog","$q","$rootScope","$scope","$timeout","AnnotationService","ConceptMapService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"],__webpack_exports__.a=ConceptMapController},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$http=n,this.$location=i,this.config=null,this.$translate=this.$filter("translate")}return r(t,[{key:"setConfig",value:function(t){this.config=t,this.sortClassmateUserInfosAlphabeticallyByName(),this.setPermissions(),this.setClassmateDisplayNames()}},{key:"retrieveConfig",value:function(t){var e=this;return this.$http.get(t).then(function(t){var n=t.data;e.setTimestampDiff(n);var i=!0,r=e.$location.$$absUrl;if("preview"===n.mode){var o=new RegExp("constraints=false","gi");null!=r&&r.match(o)&&(i=!1)}n.constraints=i;var s=new RegExp("showProjectPath=true","gi");if(null!=r&&r.match(s)){var a=location.origin+n.projectURL;console.log(a)}if(n.isRunActive=e.calculateIsRunActive(n),e.setConfig(n),e.isPreview()){var l=e.getMyUserInfo();null!=l&&(l.workgroupId=Math.floor(100*Math.random())+1)}return n})}},{key:"setTimestampDiff",value:function(t){if(null!=t.retrievalTimestamp){var e=(new Date).getTime()-t.retrievalTimestamp;t.timestampDiff=e}else t.timestampDiff=0}},{key:"getConfigParam",value:function(t){return null!==this.config?this.config[t]:null}},{key:"getAchievementsURL",value:function(){return this.getConfigParam("achievementURL")}},{key:"getCRaterRequestURL",value:function(){return this.getConfigParam("cRaterRequestURL")}},{key:"getMainHomePageURL",value:function(){return this.getConfigParam("mainHomePageURL")}},{key:"getNotificationURL",value:function(){return this.getConfigParam("notificationURL")}},{key:"getRunId",value:function(){return this.getConfigParam("runId")}},{key:"getProjectId",value:function(){return this.getConfigParam("projectId")}},{key:"getSessionLogOutURL",value:function(){return this.getConfigParam("sessionLogOutURL")}},{key:"getStudentAssetsURL",value:function(){return this.getConfigParam("studentAssetsURL")}},{key:"getStudentStatusURL",value:function(){return this.getConfigParam("studentStatusURL")}},{key:"getStudentMaxTotalAssetsSize",value:function(){return this.getConfigParam("studentMaxTotalAssetsSize")}},{key:"getStudentNotebookURL",value:function(){return this.getConfigParam("studentNotebookURL")}},{key:"getStudentUploadsBaseURL",value:function(){return this.getConfigParam("studentUploadsBaseURL")}},{key:"getUserInfo",value:function(){return this.getConfigParam("userInfo")}},{key:"getWebSocketURL",value:function(){return window.location.protocol+"//"+window.location.host+this.getContextPath()+"/websocket"}},{key:"getWISEBaseURL",value:function(){return this.getConfigParam("wiseBaseURL")}},{key:"getLocale",value:function(){return this.getConfigParam("locale")||"en"}},{key:"getMode",value:function(){return this.getConfigParam("mode")}},{key:"getContextPath",value:function(){return this.getConfigParam("contextPath")}},{key:"getPeriodId",value:function(){var t=this.getMyUserInfo();return null!=t?t.periodId:null}},{key:"getPeriods",value:function(){var t=this.getMyUserInfo();if(null!=t){var e=t.myClassInfo;if(null!=e&&null!=e.periods)return e.periods}return[]}},{key:"getWorkgroupId",value:function(){var t=this.getMyUserInfo();return null!=t?t.workgroupId:null}},{key:"getUserId",value:function(){var t=this.getMyUserInfo();return null!=t?t.id:null}},{key:"getMyUserInfo",value:function(){var t=this.getUserInfo();return null!=t?t.myUserInfo:null}},{key:"getMyUsername",value:function(){var t=this.getMyUserInfo();return null!=t?t.username:null}},{key:"getClassmateUserInfos",value:function(){var t=this.getMyUserInfo();if(null!=t){var e=t.myClassInfo;if(null!=e)return e.classmateUserInfos}return null}},{key:"setClassmateDisplayNames",value:function(){var t=this.getClassmateUserInfos();if(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;s.displayNames=this.getDisplayUsernamesByWorkgroupId(s.workgroupId)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"getClassmateUserInfosSortedByWorkgroupId",value:function(){var t=[],e=this.getClassmateUserInfos();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t.push(a)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}return t.sort(this.compareClassmateUserInfosByWorkgroupId),t}},{key:"compareClassmateUserInfosByWorkgroupId",value:function(t,e){return t.workgroupId<e.workgroupId?-1:t.workgroupId>e.workgroupId?1:0}},{key:"getTeacherWorkgroupId",value:function(){var t=this.getTeacherUserInfo();return null!=t?t.workgroupId:null}},{key:"getTeacherUserInfo",value:function(){var t=this.getMyUserInfo();if(null!=t){var e=t.myClassInfo;if(null!=e)return e.teacherUserInfo}return null}},{key:"getSharedTeacherUserInfos",value:function(){var t=this.getMyUserInfo();if(null!=t){var e=t.myClassInfo;if(null!=e)return e.sharedTeacherUserInfos}return null}},{key:"getClassmateWorkgroupIds",value:function(t){var e=[];t&&e.push(this.getWorkgroupId());var n=this.getClassmateUserInfos();if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l){var c=l.workgroupId;null!=c&&e.push(c)}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return e}},{key:"sortClassmateUserInfosAlphabeticallyByName",value:function(){var t=this.getClassmateUserInfos();return null!=t&&t.sort(this.sortClassmateUserInfosAlphabeticallyByNameHelper),t}},{key:"sortClassmateUserInfosAlphabeticallyByNameHelper",value:function(t,e){if(null!=t&&null!=t.username&&null!=e&&null!=e.username){var n=t.username.toLowerCase(),i=e.username.toLowerCase();if(n<i)return-1;if(n>i)return 1}return 0}},{key:"setPermissions",value:function(){var t=this.getTeacherRole(this.getWorkgroupId());"owner"===t?(this.config.canViewStudentNames=!0,this.config.canGradeStudentWork=!0):"write"===t?(this.config.canViewStudentNames=!0,this.config.canGradeStudentWork=!0):"read"===t?(this.config.canViewStudentNames=!1,this.config.canGradeStudentWork=!1):(this.config.canViewStudentNames=!0,this.config.canGradeStudentWork=!1)}},{key:"getPermissions",value:function(){return{canViewStudentNames:this.config.canViewStudentNames&&!this.isSwitchedUser(),canGradeStudentWork:this.config.canGradeStudentWork&&!this.isSwitchedUser()}}},{key:"getUserInfoByWorkgroupId",value:function(t){var e=null;if(null!=t){var n=this.getMyUserInfo();if(null!=n)t===n.workgroupId&&(e=n);if(null==e){var i=this.getClassmateUserInfos();if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c)if(t==c.workgroupId){e=c;break}}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}}return e}},{key:"getPeriodIdByWorkgroupId",value:function(t){if(null!=t){var e=this.getUserInfoByWorkgroupId(t);if(null!=e)return e.periodId}return null}},{key:"getStudentFirstNamesByWorkgroupId",value:function(t){var e=[],n=this.getUsernameByWorkgroupId(t);if(null!=n){var i=n.split(":");if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=c.indexOf(" "),h=c.substring(0,u);e.push(h)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}return e}},{key:"getUserIdsByWorkgroupId",value:function(t){if(null!=t){var e=this.getUserInfoByWorkgroupId(t);if(null!=e)return e.userIds}return[]}},{key:"getUsernameByWorkgroupId",value:function(t){if(null!=t){var e=this.getUserInfoByWorkgroupId(t);if(null!=e)return e.username}return null}},{key:"getDisplayNamesByWorkgroupId",value:function(t){if(null!=t){var e=this.getUserInfoByWorkgroupId(t);if(null!=e)return e.displayNames}return null}},{key:"getUsernamesByWorkgroupId",value:function(t){var e=[];if(null!=t){var n=this.getUserInfoByWorkgroupId(t);if(null!=n&&null!=n.username){var i=n.username.split(":"),r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u="",h=/(.+) \((.+)\)/g.exec(c);h&&(c=h[1],u=h[2]),e.push({name:c,id:u})}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}return e}},{key:"getDisplayUsernamesByWorkgroupId",value:function(t){var e="";if(null!=t)if(this.getPermissions().canViewStudentNames)for(var n=this.getUsernamesByWorkgroupId(t),i=n.length,r=0;r<i;r++){e+=n[r].name,r<i-1&&(e+=", ")}else for(var o=this.getUserIdsByWorkgroupId(t),s=0;s<o.length;s++){var a=o[s];0!==s&&(e+=", "),e+=this.$translate("studentId",{id:a})}return e}},{key:"isPreview",value:function(){var t=this.getMode();return null!=t&&"preview"===t}},{key:"convertToServerTimestamp",value:function(t){return t-this.getConfigParam("timestampDiff")}},{key:"convertToClientTimestamp",value:function(t){return t+this.getConfigParam("timestampDiff")}},{key:"isRunOwner",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getWorkgroupId();if(null!=t){var e=this.getTeacherUserInfo();if(null!=e&&t==e.workgroupId)return!0}return!1}},{key:"isRunSharedTeacher",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getWorkgroupId();if(null!=t){var e=this.getSharedTeacherUserInfos();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&t==a.workgroupId)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return!1}},{key:"getTeacherRole",value:function(t){return this.isRunOwner(t)?"owner":this.isRunSharedTeacher(t)?this.getSharedTeacherRole(t):null}},{key:"getSharedTeacherRole",value:function(t){if(null!=t){var e=this.getSharedTeacherUserInfos();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&t==a.workgroupId)return a.role}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return null}},{key:"replaceStudentNames",value:function(t){if(null!=t){var e=t;if("object"===(void 0===t?"undefined":i(t))&&(e=JSON.stringify(t)),null!=e){var n=this.getWorkgroupId(),r=this.getStudentFirstNamesByWorkgroupId(n);r.length>=1&&(e=(e=e.replace(new RegExp("{{firstStudentFirstName}}","gi"),r[0])).replace(new RegExp("{{studentFirstNames}}","gi"),r.join(", "))),r.length>=2&&(e=e.replace(new RegExp("{{secondStudentFirstName}}","gi"),r[1])),r.length>=3&&(e=e.replace(new RegExp("{{thirdStudentFirstName}}","gi"),r[2]))}"object"===(void 0===t?"undefined":i(t))?t=JSON.parse(e):"string"==typeof t&&(t=e)}return t}},{key:"getAvatarColorForWorkgroupId",value:function(t){return["#E91E63","#9C27B0","#CDDC39","#2196F3","#FDD835","#43A047","#795548","#EF6C00","#C62828","#607D8B"][t%10]}},{key:"getLibraryProjects",value:function(){var t=this.getConfigParam("getLibraryProjectsURL");if(null!=t)return this.$http.get(t).then(function(t){var e=t.data;return null!=e&&e.reverse(),e})}},{key:"getProjectAssetsDirectoryPath",value:function(t){var e=this.getConfigParam("projectBaseURL");return null!=e?t?window.location.origin+e+"assets":e+"assets":null}},{key:"removeAbsoluteAssetPaths",value:function(t){var e=this.getProjectAssetsDirectoryPath(!0),n=new RegExp(e,"g"),i=this.getProjectAssetsDirectoryPath()+"/",r=new RegExp(i,"g");return t=(t=t.replace(n,"")).replace(r,"")}},{key:"getWISEIds",value:function(t){if(null!=t){var e=this.getUserInfoByWorkgroupId(t);if(null!=e)return e.userIds}return[]}},{key:"getAuthorableProjects",value:function(){var t=this.getConfigParam("projects"),e=this.getConfigParam("sharedProjects"),n=[];return null!=t&&(n=n.concat(t)),null!=e&&(n=n.concat(e)),n.sort(this.sortByProjectId),n}},{key:"isSwitchedUser",value:function(){var t=this.getMyUserInfo();return!(null==t||!t.isSwitchedUser)}},{key:"sortByProjectId",value:function(t,e){var n=t.id,i=e.id;return n<i?1:n>i?-1:0}},{key:"calculateIsRunActive",value:function(t){var e=(new Date).getTime();return!(e<this.convertToClientTimestamp(t.startTime))&&!(null!=t.endTime&&e>this.convertToClientTimestamp(t.endTime))}},{key:"isRunActive",value:function(){return this.config.isRunActive}}]),t}();o.$inject=["$filter","$http","$location"],e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$http=e,this.ConfigService=n}return i(t,[{key:"makeCRaterScoringRequest",value:function(t,e,n){var i={method:"GET",url:this.ConfigService.getCRaterRequestURL()+"/score",params:{itemId:t,responseId:e,studentData:n}};return this.$http(i).then(function(t){return t})}},{key:"getCRaterItemType",value:function(t){return null!=t&&null!=t.cRater?t.cRater.itemType:null}},{key:"getCRaterItemId",value:function(t){return null!=t&&null!=t.cRater?t.cRater.itemId:null}},{key:"getCRaterScoreOn",value:function(t){return null!=t&&(t.enableCRater&&null!=t.cRater||!t.hasOwnProperty("enableCRater")&&null!=t.cRater)?t.cRater.scoreOn:null}},{key:"isCRaterEnabled",value:function(t){if(null!=t){var e=this.getCRaterItemType(t),n=this.getCRaterItemId(t);if(null!=e&&null!=n)return!0}return!1}},{key:"isCRaterScoreOnSave",value:function(t){if(null!=t){var e=this.getCRaterScoreOn(t);if(null!=e&&"save"===e)return!0}return!1}},{key:"isCRaterScoreOnSubmit",value:function(t){if(null!=t){var e=this.getCRaterScoreOn(t);if(null!=e&&"submit"===e)return!0}return!1}},{key:"isCRaterScoreOnChange",value:function(t){if(null!=t){var e=this.getCRaterScoreOn(t);if(null!=e&&"change"===e)return!0}return!1}},{key:"isCRaterScoreOnExit",value:function(t){if(null!=t){var e=this.getCRaterScoreOn(t);if(null!=e&&"exit"===e)return!0}return!1}},{key:"getCRaterScoringRuleByScore",value:function(t,e){if(null!=t&&null!=e){var n=t.cRater;if(null!=n){var i=n.scoringRules;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c&&c.score==e)return c}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}}return null}},{key:"getCRaterFeedbackTextByScore",value:function(t,e){var n=this.getCRaterScoringRuleByScore(t,e);return null!=n?n.feedbackText:null}},{key:"getMultipleAttemptCRaterFeedbackTextByScore",value:function(t,e,n){var i=this.getMultipleAttemptCRaterScoringRuleByScore(t,e,n);return null!=i?i.feedbackText:null}},{key:"getMultipleAttemptCRaterScoringRuleByScore",value:function(t,e,n){if(null!=t&&null!=e&&null!=n){var i=t.cRater;if(null!=i){var r=i.multipleAttemptScoringRules;if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=u.scoreSequence;if(null!=h){var d=h[0],f=h[1];if(e.toString().match("["+d+"]")&&n.toString().match("["+f+"]"))return u}}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}}}return null}},{key:"makeCRaterVerifyRequest",value:function(t){var e={method:"GET",url:this.ConfigService.getCRaterRequestURL()+"/verify",params:{itemId:t}};return this.$http(e).then(function(t){return t.data.isAvailable})}}]),t}();r.$inject=["$http","ConfigService"],e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function t(e,n,i,r,o,s,a,l,c,u){var h=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$injector=e,this.$compile=i,this.ConfigService=o,this.NodeService=s,this.NotebookService=a,this.ProjectService=l,this.StudentDataService=c,this.UtilService=u,this.mode?n.mode=this.mode:n.mode="student",n.$on("snipImage",function(t,e){var n=e.target;if(null!=n){var i=h.UtilService.getImageObjectFromImageElement(n);null!=i&&h.NotebookService.addNote(e,i)}}),null!=this.workgroupId)try{this.workgroupId=parseInt(this.workgroupId)}catch(t){}if(this.teacherWorkgroupId)try{this.teacherWorkgroupId=parseInt(this.teacherWorkgroupId)}catch(t){}null==this.componentState||""===this.componentState?this.componentState=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId):(this.componentState=angular.fromJson(this.componentState),this.nodeId=this.componentState.nodeId,this.componentId=this.componentState.componentId);var d=this.ProjectService.getComponentByNodeIdAndComponentId(this.nodeId,this.componentId),f=this.ProjectService.injectAssetPaths(d);f=this.ConfigService.replaceStudentNames(f),this.NotebookService.isNotebookEnabled()&&this.NotebookService.isStudentNoteClippingEnabled()&&(f=this.ProjectService.injectClickToSnipImage(f)),"authoring"===n.mode?(n.authoringComponentContent=d,n.nodeAuthoringController=n.$parent.nodeAuthoringController,n.componentTemplatePath=this.NodeService.getComponentAuthoringTemplatePath(f.type)):n.componentTemplatePath=this.NodeService.getComponentTemplatePath(f.type),n.componentContent=f,n.componentState=this.componentState,n.nodeId=this.nodeId,n.workgroupId=this.workgroupId,n.teacherWorkgroupId=this.teacherWorkgroupId,n.type=f.type,n.nodeController=n.$parent.nodeController;var p='<div class="component__wrapper">\n                <div ng-include="componentTemplatePath" class="component__content component__content--{{type}}"></div>\n            </div>';r.html(p),this.$compile(r.contents())(n)};i.$inject=["$injector","$scope","$compile","$element","ConfigService","NodeService","NotebookService","ProjectService","StudentDataService","UtilService"];var r={bindings:{componentContent:"@",componentId:"@",componentState:"@",mode:"@",nodeId:"@",teacherWorkgroupId:"@",workgroupId:"@"},scope:!0,controller:i};e.default=r},function(t,e,n){"use strict";(function(t){class n{constructor(e,n){this.$document=e,this.$element=n,this.startX=0,this.startY=0,n.bind("mousedown",e=>{e.preventDefault();var n=null,i=null,r=null,o=null;null!=this.$element&&this.$element.length>0&&(n=this.$element[0].style.left,i=this.$element[0].style.top,null!=n&&(r=parseInt(n.replace("px",""))),null!=i&&(o=parseInt(i.replace("px",""))),this.startX=e.pageX-r,this.startY=e.pageY-o,this.$document.on("mousemove",t.proxy(this.mousemove,this)),this.$document.on("mouseup",t.proxy(this.mouseup,this)))})}mousemove(t){var e=null,n=null,i=angular.element(this.$element[0]).css("width"),r=angular.element(this.$element[0]).css("height");null!=i&&null!=r&&(e=parseInt(i.replace("px","")),n=parseInt(r.replace("px","")));var o=this.$element.scope().$eval(this.$element[0].attributes["container-width"].value),s=this.$element.scope().$eval(this.$element[0].attributes["container-height"].value),a=t.pageX-this.startX,l=t.pageY-this.startY;a<0?a=0:a+e>o&&(a=o-e),l<0?l=0:l+n>s+0&&(l=s+0-n),this.$element.css({top:l+"px",left:a+"px"})}mouseup(){this.$document.off("mousemove",this.mousemove),this.$document.off("mouseup",this.mouseup)}}n.$inject=["$document","$element"];const i={bindings:{},controller:n};e.a=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t){class n{constructor(t,e,n){this.$scope=t,this.StudentDataService=e,this.$timeout=n}scrollAndHighlightComponent(){this.$timeout(()=>{let e=t("#"+this.componentId),n=e.css("backgroundColor");e.css("background-color","#FFFF9C"),t("#content").animate({scrollTop:e.prop("offsetTop")},1e3),e.css({transition:"background-color 3s ease-in-out","background-color":n}),this.$timeout(()=>{e.css("transition","")},4e3)},500)}follow(){let t=this.StudentDataService.getCurrentNode();null!=t&&t.id===this.nodeId&&null!=this.componentId?this.scrollAndHighlightComponent():(this.$scope.$on("currentNodeChanged",(t,e)=>{let n=this.StudentDataService.getCurrentNode();null!=this.componentId&&null!=n&&n.id===this.nodeId&&this.scrollAndHighlightComponent()}),this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId))}}n.$inject=["$scope","StudentDataService","$timeout"];const i={bindings:{nodeId:"@",componentId:"@",linkText:"@",tooltip:"@",linkClass:"@",type:"@"},templateUrl:"wise5/directives/wiselink/wiselink.html",controller:n,controllerAs:"wiselinkCtrl"};e.a=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t,i){var r=n(6),o=n(248),s=n.n(o);n(429),n(10);class a extends r.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m){if(super(t,n,r,o,a,l,u,h,d,f,p,m),this.$injector=e,this.$q=i,this.$timeout=s,this.DrawService=c,this.isResetButtonVisible=!1,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.drawingTool=null,this.latestConnectedComponentState=null,this.latestConnectedComponentParams=null,this.width=800,this.height=600,null!=this.componentContent.width&&(this.width=this.componentContent.width),null!=this.componentContent.height&&(this.height=this.componentContent.height),this.componentType=this.componentContent.type,this.isStudentMode())this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.isResetButtonVisible=!0,this.drawingToolId="drawingtool_"+this.nodeId+"_"+this.componentId;else if(this.isGradingMode()||this.isGradingRevisionMode()||this.isOnlyShowWorkMode()){const t=this.$scope.componentState;null!=t&&(this.isGradingRevisionMode()?this.drawingToolId="drawingtool_gradingRevision_"+t.id:this.drawingToolId="drawingtool_"+t.id)}this.$timeout(angular.bind(this,this.initializeDrawingTool)),this.initializeScopeGetComponentState(this.$scope,"drawController"),this.$scope.$on("requestImage",(t,e)=>{if(this.isEventTargetThisComponent(e)){const t=this.getImageObject(),n={nodeId:e.nodeId,componentId:e.componentId,imageObject:t};this.$scope.$emit("requestImageCallback",n)}}),this.$scope.$on("notebookItemChosen",(t,e)=>{if(e.requester==this.nodeId+"-"+this.componentId){const t=e.notebookItem.content.studentWorkIds[0];this.importWorkByStudentWorkId(t)}}),this.broadcastDoneRenderingComponent()}handleStudentWorkSavedToServerAdditionalProcessing(t,e){let n=e.studentWork;if(this.isForThisComponent(n)&&this.ProjectService.isConnectedComponent(this.nodeId,this.componentId,n.componentId)){const t=this.ProjectService.getConnectedComponentParams(this.componentContent,n.componentId);if(null!=t&&("save"===t.updateOn||"submit"===t.updateOn&&n.isSubmit)){let e=!1;n=this.UtilService.makeCopyOfJSONObject(n),this.isCanvasEmpty()?e=!0:confirm(this.$translate("draw.doYouWantToUpdateTheConnectedDrawing"))&&(e=!0),e&&(t.includeBackground||this.DrawService.removeBackgroundFromComponentState(n),this.setDrawData(n),this.$scope.drawController.isDirty=!0,this.$scope.drawController.isSubmitDirty=!0),this.latestConnectedComponentState=n,this.latestConnectedComponentParams=t}}}handleNodeSubmit(){this.submit("nodeSubmitButton")}initializeDrawingTool(){this.drawingTool=new DrawingTool("#"+this.drawingToolId,{stamps:this.componentContent.stamps||{},parseSVG:!0,width:this.width,height:this.height});let e=null;t("#set-background").on("click",()=>{this.drawingTool.setBackgroundImage(t("#background-src").val())}),t("#resize-background").on("click",()=>{this.drawingTool.resizeBackgroundToCanvas()}),t("#resize-canvas").on("click",()=>{this.drawingTool.resizeCanvasToBackground()}),t("#shrink-background").on("click",()=>{this.drawingTool.shrinkBackgroundToCanvas()}),t("#clear").on("click",()=>{this.drawingTool.clear(!0)}),t("#save").on("click",()=>{e=s.a.save(),t("#load").removeAttr("disabled")}),t("#load").on("click",()=>{null!==e&&this.drawingTool.load(e)});const n=this.$scope.componentState;this.isStudentMode()?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.DrawService.componentStateHasStudentWork(n,this.componentContent)?this.setStudentWork(n):this.UtilService.hasConnectedComponent(this.componentContent)?this.handleConnectedComponents():null!=n&&this.DrawService.componentStateHasStudentWork(n,this.componentContent)||(null!=this.componentContent.starterDrawData&&this.drawingTool.load(this.componentContent.starterDrawData),null!=this.componentContent.background&&this.drawingTool.setBackgroundImage(this.componentContent.background)):this.isAuthoringMode()?(null!=this.componentContent.starterDrawData&&this.drawingTool.load(this.componentContent.starterDrawData),null!=this.componentContent.background&&this.drawingTool.setBackgroundImage(this.componentContent.background)):this.setStudentWork(n),this.hasMaxSubmitCount()&&this.hasSubmitsLeft()&&(this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.$timeout(angular.bind(this,()=>{this.drawingTool.on("drawing:changed",angular.bind(this,this.studentDataChanged))}),500),this.isStudentMode()&&this.drawingTool.on("tool:changed",t=>{const e={selectedToolName:t};this.StudentDataService.saveComponentEvent(this,"Tool","toolSelected",e)}),this.isGradingMode()||this.isGradingRevisionMode()||this.isOnlyShowWorkMode()?t("#"+this.drawingToolId).find(".dt-tools").hide():this.setupTools(),this.isDisabled&&this.drawingTool.canvas.removeListeners()}handleConnectedComponentsPostProcess(){null!=this.componentContent.background&&this.drawingTool.setBackgroundImage(this.componentContent.background)}setupTools(){const e=this.componentContent.tools;if(null==e);else{const n=t("#"+this.drawingToolId);this.setupSelectTool(n,e),this.setupLineTool(n,e),this.setupShapeTool(n,e),this.setupFreeHandTool(n,e),this.setupTextTool(n,e),this.setupStampTool(n,e),this.setupCloneTool(n,e),this.setupStrokeColorTool(n,e),this.setupFillColorTool(n,e),this.setupStrokeWidthTool(n,e),this.setupSendBackTool(n,e),this.setupSendForwardTool(n,e),this.setupUndoTool(n,e),this.setupRedoTool(n,e),this.setupDeleteTool(n,e),this.isDisabled&&n.find(".dt-tools").hide()}}setupSelectTool(t,e){const n=this.$translate("draw.selectToolTooltip");e.select?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupLineTool(t,e){const n=this.$translate("draw.lineToolTooltip");e.line?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupShapeTool(t,e){const n=this.$translate("draw.shapeToolTooltip");e.shape?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupFreeHandTool(t,e){const n=this.$translate("draw.freeHandToolTooltip");e.freeHand?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupTextTool(t,e){const n=this.$translate("draw.textToolTooltip");e.text?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupStampTool(t,e){const n=this.$translate("draw.stampToolTooltip");e.stamp?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupCloneTool(t,e){const n=this.$translate("draw.cloneToolTooltip");e.clone?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupStrokeColorTool(t,e){const n=this.$translate("draw.strokeColorToolTooltip");e.strokeColor?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupFillColorTool(t,e){const n=this.$translate("draw.fillColorToolTooltip");e.fillColor?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupStrokeWidthTool(t,e){const n=this.$translate("draw.strokeWidthToolTooltip");e.strokeWidth?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupSendBackTool(t,e){const n=this.$translate("draw.sendBackToolTooltip");e.sendBack?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupSendForwardTool(t,e){const n=this.$translate("draw.sendForwardToolTooltip");e.sendForward?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupUndoTool(t,e){const n=this.$translate("draw.undo");e.undo?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupRedoTool(t,e){const n=this.$translate("draw.redo");e.redo?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setupDeleteTool(t,e){const n=this.$translate("draw.deleteToolTooltip");e.delete?t.find('[title="'+n+'"]').show():t.find('[title="'+n+'"]').hide()}setStudentWork(t){null!=t&&(this.setDrawData(t),this.processLatestStudentWork())}resetButtonClicked(){confirm(this.$translate("draw.areYouSureYouWantToClearYourDrawing"))&&(this.drawingTool.clear(),this.UtilService.hasConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.latestConnectedComponentState&&this.latestConnectedComponentParams?this.setDrawData(latestConnectedComponentState,latestConnectedComponentParams):null!=this.componentContent.starterDrawData&&this.drawingTool.load(this.componentContent.starterDrawData),null!=this.componentContent.background&&""!=this.componentContent.background&&this.drawingTool.setBackgroundImage(this.componentContent.background),this.parentStudentWorkIds=null)}createComponentState(t){const e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={},r=this.getDrawData();return i.drawData=r,i.submitCounter=this.submitCounter,null!=this.parentStudentWorkIds&&(i.parentStudentWorkIds=this.parentStudentWorkIds),n.isSubmit=this.isSubmit,n.studentData=i,n.componentType="Draw",n.nodeId=this.nodeId,n.componentId=this.componentId,this.isSubmit=!1,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}attachStudentAsset(t){this.StudentAssetService.copyAssetForReference(t).then(t=>{i.Image.fromURL(t.url,e=>{e.scaleToWidth(200),e.studentAssetId=t.id,this.drawingTool.canvas.add(e)})})}getDrawData(){return this.drawingTool.save()}getImageObject(){if(null!=this.drawingTool&&null!=this.drawingTool.canvas){const t=this.drawingTool.canvas.toDataURL("image/png");return this.UtilService.getImageObjectFromBase64String(t)}return null}setDrawData(t){if(null!=t){const e=t.studentData;null!=e.submitCounter&&(this.submitCounter=e.submitCounter);const n=e.drawData;null!=n&&""!=n&&"{}"!=n&&this.drawingTool.load(n)}}isCanvasEmpty(){if(null!=this.drawingTool&&null!=this.drawingTool.canvas){const t=this.drawingTool.canvas.getObjects();if(null!=t&&t.length>0)return!1}return!0}snipDrawing(t,e){let n=angular.element("#drawingtool_"+this.nodeId+"_"+this.componentId+" canvas");if(null!=n&&n.length>0){const i=(n=n[0]).toDataURL("image/png"),r=this.UtilService.getImageObjectFromBase64String(i),o=null;this.NotebookService.addNote(t,r,o,[e])}}snipButtonClicked(t){if(this.isDirty){const e=this.$scope.$on("studentWorkSavedToServer",(n,i)=>{let r=i.studentWork;this.isForThisComponent(r)&&(this.snipDrawing(t,r.id),e())});this.saveButtonClicked()}else{const e=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId);this.snipDrawing(t,e.id)}}createMergedComponentState(t){const e=this.NodeService.createNewComponentState();if(null!=t){let n=[],i={};for(let e=0;e<t.length;e++){const r=t[e];if("Draw"==r.componentType){const t=r.studentData.drawData,o=angular.fromJson(t);null!=o&&null!=o.canvas&&null!=o.canvas.objects&&(0==e&&(i=o),n=n.concat(o.canvas.objects))}else if("Graph"==r.componentType||"ConceptMap"==r.componentType||"Embedded"==r.componentType||"Label"==r.componentType||"Table"==r.componentType){!0===this.UtilService.getConnectedComponentByComponentState(this.componentContent,r).importWorkAsBackground&&this.setComponentStateAsBackgroundImage(r)}}if(null!=n){const t=i;null!=t.canvas&&null!=t.canvas.objects&&(t.canvas.objects=n),e.studentData={},e.studentData.drawData=angular.toJson(t)}}return e}setComponentStateAsBackgroundImage(t){this.UtilService.generateImageFromComponentState(t).then(t=>{this.drawingTool.setBackgroundImage(t.url)})}}a.$inject=["$filter","$injector","$mdDialog","$q","$rootScope","$scope","$timeout","AnnotationService","ConfigService","DrawService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.a=a}).call(this,n(1),n(29).fabric)},function(t,e,n){(function(t,e,n){!function(){"use strict";var e="undefined"!=typeof window?window:t;if("function"!=typeof e.require2){var n={},i={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},o=function(t,e){for(var n,i,r=[],o=0,s=(n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/")).length;o<s;o++)".."===(i=n[o])?r.pop():"."!==i&&""!==i&&r.push(i);return r.join("/")},s=function(t,n){var r,s={id:t,exports:{}};return i[t]=s,n(s.exports,(r=t,function(t){var n=function(t){return t.split("/").slice(0,-1).join("/")}(r),i=o(n,t);return e.require2(i,r)}),s),s.exports},a=function(t,e){if("object"==typeof t)for(var i in t)r(t,i)&&(n[i]=t[i]);else n[t]=e};e.require2=function(t,e){var a=o(t,".");if(null==e&&(e="/"),r(i,a))return i[a].exports;if(r(n,a))return s(a,n[a]);var l=o(a,"./index");if(r(i,l))return i[l].exports;if(r(n,l))return s(l,n[l]);throw new Error('Cannot find module "'+t+'" from "'+e+'"')},e.require2.define=a,e.require2.register=a,e.require2.list=function(){var t=[];for(var e in n)r(n,e)&&t.push(e);return t},e.require2.brunch=!0}}(),require2.register("scripts/convert-state",function(t,e,n){var i={0:function(t){return t.canvas.objects.forEach(function(t){if("path"===t.type){t.pathOffset.x=t.left,t.pathOffset.y=t.top;for(var e=t.left-.5*t.width,n=t.top-.5*t.height,i=t.path,r=0;r<i.length;r++)for(var o=i[r],s=1;s<o.length;s++)o[s]+=s%2==1?e:n}}),t.version=1,t}};n.exports=function(t){for(void 0===t.version&&(t.version=0);i[t.version];)t=i[t.version](t);return t}}),require2.register("scripts/drawing-tool",function(t,i,r){var o=e,s=i("scripts/tools/select-tool"),a=i("scripts/tools/shape-tools/line-tool"),l=i("scripts/tools/shape-tools/basic-shape-tool"),c=i("scripts/tools/shape-tools/free-draw"),u=i("scripts/tools/shape-tools/text-tool"),h=i("scripts/tools/shape-tools/stamp-tool"),d=i("scripts/tools/delete-tool"),f=i("scripts/tools/clone-tool"),p=i("scripts/ui/ui-manager"),m=i("scripts/undo-redo"),g=i("scripts/convert-state"),v=i("scripts/fabric-extensions/rescale-2-resize"),y=i("scripts/fabric-extensions/multi-touch-support"),b=(i("scripts/fabric-extensions/studentAsset"),{width:800,height:600,parseSVG:!0}),_={stroke:"#333",fill:"",strokeWidth:8,fontSize:27},w="drawing:changed",S="state:changed",x="tool:changed",C="undo:possible",k="undo:impossible",T="redo:possible",M="redo:impossible",E=["lockUniScaling"];function A(t,e,n){this.selector=t,this.options=o.extend(!0,{},b,e),this.state=o.extend(!0,{},_,n),this._dispatch=new EventEmitter2({wildcard:!0,newListener:!1,maxListeners:100,delimiter:":"}),this._initDOM(),this._initFabricJS(),this._setDimensions(this.options.width,this.options.height),this._initTools(),this._initStateHistory(),new p(this),v(this.canvas),y(this.canvas),this._fireStateChanged(),this.chooseTool("select"),this.pushToHistory()}A.prototype.ADDITIONAL_PROPS_TO_SERIALIZE=E,A.prototype.proxy=function(t){return this.options.proxy&&this.options.proxy(t)||t},A.prototype.clear=function(t){this.canvas.clear(),t&&this.canvas.setBackgroundImage(null),this.canvas.renderAll(),this.pushToHistory()},A.prototype.clearSelection=function(){this.canvas.deactivateAllWithDispatch(),this.canvas.renderAll()},A.prototype.save=function(){var t=this.getSelection(),e=!1;t&&(t.hasCustomControlPoints||t.length>0)&&(this.clearSelection(),e=!0);var n=JSON.stringify({version:1,dt:{width:this.canvas.getWidth(),height:this.canvas.getHeight()},canvas:this.canvas.toJSON(E)});return e&&this.select(t),n},A.prototype.load=function(t,e,n){if(!t)return this.canvas.clear(),this.canvas.setBackgroundImage(null),this.canvas.renderAll(),void h.call(this);var i=JSON.parse(t),r=(i=g(i)).dt;this._setDimensions(r.width,r.height);var s=o.Deferred(),a=o.Deferred(),l=i.canvas,c=l.backgroundImage;if(delete l.backgroundImage,this.canvas.loadFromJSON(l,s.resolve.bind(s)),void 0!==c){var u=c.src;delete c.src,this._setBackgroundImage(u,c,a.resolve.bind(a))}else this._setBackgroundImage(null,null,a.resolve.bind(a));function h(){this.tools.select.setSelectable(this.tools.select.active),n||this.pushToHistory(),"function"==typeof e&&e()}o.when(s,a).done(h.bind(this))},A.prototype.pushToHistory=function(){this._history.saveState(),this._fireHistoryEvents(),this._fireDrawingChanged()},A.prototype.undo=function(){this._history.undo(),this._fireHistoryEvents(),this._fireDrawingChanged()},A.prototype.redo=function(){this._history.redo(),this._fireHistoryEvents(),this._fireDrawingChanged()},A.prototype.resetHistory=function(){this._history.reset(),this._history.saveState(),this._fireHistoryEvents()},A.prototype._fireHistoryEvents=function(){this._history.canUndo()?this._dispatch.emit(C):this._dispatch.emit(k),this._history.canRedo()?this._dispatch.emit(T):this._dispatch.emit(M)},A.prototype._fireDrawingChanged=function(){this._dispatch.emit(w)},A.prototype.setStrokeColor=function(t){this.state.stroke=t,this._fireStateChanged()},A.prototype.setStrokeWidth=function(t){this.state.strokeWidth=t,this._fireStateChanged()},A.prototype.setFontSize=function(t){this.state.fontSize=t,this._fireStateChanged()},A.prototype.setFillColor=function(t){this.state.fill=t,this._fireStateChanged()},A.prototype.setSelectionStrokeColor=function(t){this.getSelection()&&(this.forEachSelectedObject(function(e){this._setObjectProp(e,"stroke",t)}.bind(this)),this.canvas.renderAll(),this.pushToHistory())},A.prototype.setSelectionFillColor=function(t){this.getSelection()&&(this.forEachSelectedObject(function(e){this._setObjectProp(e,"fill",t)}.bind(this)),this.canvas.renderAll(),this.pushToHistory())},A.prototype.setSelectionStrokeWidth=function(t){this.getSelection()&&(this.forEachSelectedObject(function(e){this._setObjectProp(e,"strokeWidth",t)}.bind(this)),this.canvas.renderAll(),this.pushToHistory())},A.prototype.setSelectionFontSize=function(t){this.getSelection()&&(this.forEachSelectedObject(function(e){"i-text"===e.type&&this._setObjectProp(e,"fontSize",t)}.bind(this)),this.canvas.renderAll(),this.pushToHistory())},A.prototype.sendSelectionToFront=function(){this.getSelection()&&(this._sendSelectionTo("front"),this.pushToHistory())},A.prototype.sendSelectionToBack=function(){this.getSelection()&&(this._sendSelectionTo("back"),this.pushToHistory())},A.prototype.forEachSelectedObject=function(t){this.canvas.getActiveObject()?t(this.canvas.getActiveObject()):this.canvas.getActiveGroup()&&this.canvas.getActiveGroup().objects.forEach(t)},A.prototype._setObjectProp=function(t,e,n){if("i-text"===t.type)if("stroke"===e)e="fill";else{if("fill"===e)return;if("strokeWidth"===e)return}t.set(e,n)},A.prototype._sendSelectionTo=function(t){if(this.canvas.getActiveObject())n(this.canvas.getActiveObject());else if(this.canvas.getActiveGroup()){var e=this.canvas.getActiveGroup().getObjects();this.clearSelection(),e.forEach(n),this.select(e)}function n(e){e._dt_sourceObj?n(e._dt_sourceObj):"front"===t?(e.bringToFront(),e._dt_controlPoints&&e._dt_controlPoints.forEach(function(t){t.bringToFront()})):(e._dt_controlPoints&&e._dt_controlPoints.forEach(function(t){t.sendToBack()}),e.sendToBack())}},A.prototype.setBackgroundImage=function(t,e,n){this._setBackgroundImage(t,null,function(){switch(e){case"resizeBackgroundToCanvas":this.resizeBackgroundToCanvas();break;case"resizeCanvasToBackground":this.resizeCanvasToBackground();break;case"shrinkBackgroundToCanvas":this.shrinkBackgroundToCanvas()}this.pushToHistory(),"function"==typeof n&&n()}.bind(this))},A.prototype.resizeBackgroundToCanvas=function(){this.canvas.backgroundImage&&(this.canvas.backgroundImage.set({width:this.canvas.width,height:this.canvas.height}),this.canvas.renderAll(),this.pushToHistory())},A.prototype.shrinkBackgroundToCanvas=function(){if(this.canvas.backgroundImage){var t=this.canvas.backgroundImage,e=this.canvas.width/t.width,n=this.canvas.height/t.height,i=Math.min(e,n);i<1&&(t.set({width:t.width*i,height:t.height*i}),this.canvas.renderAll(),this.pushToHistory())}},A.prototype.resizeCanvasToBackground=function(){this.canvas.backgroundImage&&(this._setDimensions(this.canvas.backgroundImage.width,this.canvas.backgroundImage.height),this.canvas.backgroundImage.set({top:this.canvas.height/2,left:this.canvas.width/2}),this.canvas.renderAll(),this.pushToHistory())},A.prototype.setDimensions=function(t,e){this._setDimensions(t,e),this.pushToHistory()},A.prototype.calcOffset=function(){this.canvas.calcOffset()},A.prototype.chooseTool=function(t){var e=this.tools[t];e&&(this.currentTool!==e?!0!==e.singleUse?(void 0!==this.currentTool&&this.currentTool.setActive(!1),this.currentTool=e,this.currentTool.setActive(!0),this._dispatch.emit(x,t),this.canvas.renderAll()):e.use():this.currentTool.activateAgain())},A.prototype.changeOutOfTool=function(){this.chooseTool("select")},A.prototype.on=function(){this._dispatch.on.apply(this._dispatch,arguments)},A.prototype.off=function(t,e){this._dispatch.off.apply(this._dispatch,arguments)},A.prototype.select=function(t){if(this.clearSelection(),t)if(1===t.length&&(t=t[0]),t.length){var e=new n.Group(t,{originX:"center",originY:"center",canvas:this.canvas});e.addWithUpdate(),this.canvas.setActiveGroup(e)}else this.canvas.setActiveObject(t)},A.prototype.getSelection=function(){var t=this.canvas.getActiveGroup();if(t)return t.getObjects();var e=this.canvas.getActiveObject();return e&&e.isControlPoint?e._dt_sourceObj:e},A.prototype._fireStateChanged=function(){this._dispatch.emit(S,this.state)},A.prototype._setBackgroundImage=function(t,e,i){e=e||{originX:"center",originY:"center",top:this.canvas.height/2,left:this.canvas.width/2,crossOrigin:"anonymous"};var r=this;function s(){n.util.loadImage(t,a,null,e.crossOrigin)}function a(t){if(("anonymous"===e.crossOrigin||""===e.crossOrigin)&&!t)return delete(e=o.extend(!0,{},e)).crossOrigin,console.log("Background could not be loaded due to lack of CORS headers. Trying to load it again without CORS support."),void s();r.canvas.setBackgroundImage(new n.Image(t,e),l)}function l(){"function"==typeof i&&i(),r.canvas.renderAll()}t?(t=this.proxy(t),s()):this.canvas.setBackgroundImage(null,l)},A.prototype._initTools=function(){this.tools={select:new s("Selection Tool",this),line:new a("Line Tool",this),arrow:new a("Arrow Tool",this,"arrow"),doubleArrow:new a("Double Arrow Tool",this,"arrow",{doubleArrowhead:!0}),rect:new l("Rectangle Tool",this,"rect"),ellipse:new l("Ellipse Tool",this,"ellipse"),square:new l("Square Tool",this,"square"),circle:new l("Circle Tool",this,"circle"),free:new c("Free Draw Tool",this),stamp:new h("Stamp Tool",this,this.options.parseSVG),text:new u("Text Tool",this),trash:new d("Delete Tool",this),clone:new f("Clone Tool",this)}},A.prototype._initDOM=function(){o(this.selector).empty(),this.$element=o('<div class="dt-container">').appendTo(this.selector);var t=o('<div class="dt-canvas-container">').attr("tabindex",0).appendTo(this.$element);this.$canvas=o("<canvas>").appendTo(t)},A.prototype._initFabricJS=function(){this.canvas=new n.Canvas(this.$canvas[0]),n.isTouchSupported||!this.options.parseSVG?this.canvas.perPixelTargetFind=!1:(this.canvas.perPixelTargetFind=!0,this.canvas.targetFindTolerance=12),this.canvas.setBackgroundColor("#fff")},A.prototype._setDimensions=function(t,e){this.canvas.setDimensions({width:t,height:e});var n=window.devicePixelRatio||1;if(1!==n){var i=this.canvas.getElement();o(i).attr("width",t*n).attr("height",e*n).css("width",t).css("height",e),i.getContext("2d").scale(n,n),i.width=t,i.height=e}},A.prototype._initStateHistory=function(){this._history=new m(this),this.canvas.on("object:modified",function(){this.pushToHistory()}.bind(this))},r.exports=A}),require2.register("scripts/fabric-extensions/studentAsset",function(t,e,i){var r;n.Image.prototype.toObject=(r=n.Image.prototype.toObject,function(){return n.util.object.extend(r.call(this),{studentAssetId:this.studentAssetId})})}),require2.register("scripts/fabric-extensions/arrow",function(t,e,n){!function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Arrow?e.warn("fabric.Arrow is already defined"):(e.Arrow=e.util.createClass(e.Line,{type:"arrow",doubleArrowhead:!1,_render:function(t){if(t.beginPath(),this.group&&"path-group"===this.group.type&&!this.transformMatrix){var e=this.getCenterPoint();t.translate(-this.group.width/2+e.x,-this.group.height/2+e.y)}if(!this.strokeDashArray){var n,i=this.x1<=this.x2?-1:1,r=this.y1<=this.y2?-1:1,o=1===this.width?0:i*this.width/2,s=1===this.height?0:r*this.height/2,a=1===this.width?0:-1*i*this.width/2,l=1===this.height?0:-1*r*this.height/2,c=a-o,u=l-s,h=Math.sqrt(c*c+u*u),d=.5*this.strokeWidth,f=Math.min(3*d,h*(this.doubleArrowhead?.21:.35)),p=2*f*c/h,m=2*f*u/h,g=a-p,v=l-m,y=a-1.1*p,b=l-1.1*m;if(this.doubleArrowhead){var _=o+p,w=s+m,S=o+1.1*p,x=s+1.1*m;n=[this._perpCoords(o,s,a,l,_,w,d,1),this._perpCoords(o,s,a,l,S,x,f,1),[o,s],this._perpCoords(o,s,a,l,S,x,f,-1),this._perpCoords(o,s,a,l,_,w,d,-1)]}else n=[this._perpCoords(o,s,a,l,o,s,.5*d,1),this._perpCoords(o,s,a,l,o,s,.5*d,-1)];n.push(this._perpCoords(o,s,a,l,g,v,d,-1),this._perpCoords(o,s,a,l,y,b,f,-1),[a,l],this._perpCoords(o,s,a,l,y,b,f,1),this._perpCoords(o,s,a,l,g,v,d,1)),t.moveTo(n[0][0],n[0][1]),n.forEach(function(e){t.lineTo(e[0],e[1])})}if(this.stroke){var C=t.fillStyle;t.fillStyle=this.stroke,this._renderFill(t),t.fillStyle=C}},_perpCoords:function(t,e,n,i,r,o,s,a){var l=n-t,c=i-e,u=s/Math.sqrt(l*l+c*c);return[r+u*-c*a,o+u*l*a]},toObject:function(t){return n(this.callSuper("toObject",t),{doubleArrowhead:this.get("doubleArrowhead")})}}),e.Arrow.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Arrow.fromElement=function(t,i){var r=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),o=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];return new e.Arrow(o,n(r,i))},e.Arrow.fromObject=function(t){var n=[t.x1,t.y1,t.x2,t.y2];return new e.Arrow(n,t)})}(this)}),require2.register("scripts/fabric-extensions/line-custom-control-points",function(t,e,i){var r=["line","arrow"];function o(t){if(!t.lineCustomControlPointsEnabled){var e=null;t.on("object:selected",function(t){var n=t.target;e&&a(e)&&!s(n,e)&&l.call(e),s(n,e)||(e=n,a(n)&&function(){this.set({hasControls:!1,hasBorders:!1});var t=o.cornerSize;this._dt_controlPoints=[p(t,this,0),p(t,this,1)],this.hasCustomControlPoints=!0,f.call(this),this.on("moving",c),this.on("removed",u),this.canvas.renderAll()}.call(n))}),t.on("selection:cleared",function(t){e&&a(e)&&l.call(e),e=null}),t.lineCustomControlPointsEnabled=!0}}function s(t,e){return e&&e._dt_controlPoints&&(e._dt_controlPoints[0]===t||e._dt_controlPoints[1]===t)}function a(t){for(var e=0;e<r.length;e++)if(t.type===r[e])return!0;return!1}function l(){this._dt_controlPoints[0]._dt_sourceObj=null,this._dt_controlPoints[1]._dt_sourceObj=null,this._dt_controlPoints[0].remove(),this._dt_controlPoints[1].remove(),this._dt_controlPoints=void 0,this.hasCustomControlPoints=!1,this.off("moving"),this.off("removed")}function c(){f.call(this)}function u(){this._dt_controlPoints&&this._dt_controlPoints[0].remove()}function h(){var t=this._dt_sourceObj;t.set("x"+(this.id+1),this.left),t.set("y"+(this.id+1),this.top),t.setCoords(),t.canvas.renderAll()}function d(){var t,e=this._dt_sourceObj;e&&((t=e._dt_controlPoints[0]!==this?e._dt_controlPoints[0]:e._dt_controlPoints[1]).line=null,t.remove(),e.remove())}function f(){(function(){var t=this.get("x1")+.5*(this.get("x2")-this.get("x1")),e=this.get("y1")+.5*(this.get("y2")-this.get("y1")),n=this.left-t,i=this.top-e;this.set("x1",n+this.x1),this.set("y1",i+this.y1),this.set("x2",n+this.x2),this.set("y2",i+this.y2)}).call(this),function(){if(0===this.get("angle"))return;var t=this.get("angle")/180*Math.PI,e=this.get("left"),n=this.get("top"),i=o(this.get("x1"),this.get("y1"),e,n,t),r=o(this.get("x2"),this.get("y2"),e,n,t);function o(t,e,n,i,r){var o=Math.cos(r),s=Math.sin(r);return[o*(t-n)-s*(e-i)+n,s*(t-n)+o*(e-i)+i]}this.set({x1:i[0],y1:i[1],x2:r[0],y2:r[1],angle:0})}.call(this),this._dt_controlPoints[0].set("left",this.get("x1")),this._dt_controlPoints[0].set("top",this.get("y1")),this._dt_controlPoints[1].set("left",this.get("x2")),this._dt_controlPoints[1].set("top",this.get("y2")),this._dt_controlPoints[0].setCoords(),this._dt_controlPoints[1].setCoords()}function p(t,e,i){var r=new n.Rect({width:t,height:t,strokeWidth:0,stroke:o.controlPointColor,fill:o.controlPointColor,hasControls:!1,hasBorders:!1,originX:"center",originY:"center",_dt_sourceObj:e,id:i,isControlPoint:!0});return e.canvas.add(r),r.on("moving",h),r.on("removed",d),r}o.controlPointColor="#bcd2ff",o.cornerSize=12,i.exports=o}),require2.register("scripts/fabric-extensions/multi-touch-support",function(t,e,i){i.exports=function(t){if("undefined"!=typeof Hammer&&n.isTouchSupported){var e,i,r,o,s,a=new Hammer.Manager(t.upperCanvasEl);a.add(new Hammer.Pinch),a.on("pinchstart",function(t){var n=c();n&&!l(n)&&(u(n,!0),e=n.get("angle"),i=n.get("scaleX"),(r="center"!==n.originX||"center"!==n.originY)&&function(t){o=t.originX,s=t.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y}(n))}),a.on("pinchmove",function(t){var n=c();n&&!l(n)&&(n.set({scaleX:t.scale*i,scaleY:t.scale*i,angle:e+t.rotation}),h(n,"scaling",t.srcEvent),h(n,"rotating",t.srcEvent),n.get("scaleX")!==t.scale*i&&(i=1/t.scale))}),a.on("pinchend",function(t){var e,n,i=c();i&&!l(i)&&(r&&(n=(e=i).translateToOriginPoint(e.getCenterPoint(),o,s),e.originX=o,e.originY=s,e.left=n.x,e.top=n.y),u(i,!1))})}function l(t){return"line"===t.type||"arrow"===t.type}function c(){return t.getActiveObject()||t.getActiveGroup()}function u(t,e){t.set({lockMovementX:e,lockMovementY:e,lockScalingX:e,lockScalingY:e})}function h(e,n,i){t.fire("object:"+n,{target:e,e:i}),e.fire(n,{e:i})}}}),require2.register("scripts/fabric-extensions/rescale-2-resize",function(t,i,r){var o=e;i("scripts/tools/shape-tools/line-tool");function s(t){t.width=t.width*t.scaleX+t.strokeWidth*(t.scaleX-1),t.height=t.height*t.scaleY+t.strokeWidth*(t.scaleY-1),t.scaleX=1,t.scaleY=1}var a={rect:function(t){s(t)},ellipse:function(t){s(t),t.rx=Math.abs(t.width/2),t.ry=Math.abs(t.height/2)},line:function(t){s(t),t.x1>t.x2?(t.x1=t.left+t.width,t.x2=t.left):(t.x2=t.left+t.width,t.x1=t.left),t.y1>t.y2?(t.y1=t.top+t.height,t.y2=t.top):(t.y2=t.top+t.height,t.y1=t.top)},arrow:function(t){this.line(t)},path:function(t){for(var e=t.pathOffset.x,n=t.pathOffset.y,i=0;i<t.path.length;i++)t.path[i][1]=(t.path[i][1]-e)*t.scaleX+e,t.path[i][2]=(t.path[i][2]-n)*t.scaleY+n,t.path[i][3]=(t.path[i][3]-e)*t.scaleX+e,t.path[i][4]=(t.path[i][4]-n)*t.scaleY+n;s(t)}},l=o.extend(!0,{},a,{"i-text":function(t){t.set({fontSize:t.get("fontSize")*t.get("scaleX"),strokeWidth:t.get("strokeWidth")*t.get("scaleX"),scaleX:1,scaleY:1}),t.setCoords()}});r.exports=function(t){t.on("object:scaling",function(t){var e=t.target,n=e.type;a[n]&&a[n](e)}),t.on("object:modified",function(t){var e=t.target,n=e.type;1===e.scaleX&&1===e.scaleY||!l[n]||l[n](e)}),n.Group.prototype.lockUniScaling=!0,t.on("before:selection:cleared",function(t){var e=t.target;if("group"===e.type&&1!==e.scaleX)for(var n,i=e.scaleX,r=e.getObjects(),o=0;o<r.length;o++)void 0!==l[r[o].type]&&(n=r[o].strokeWidth,r[o].strokeWidth=0,r[o].scaleX=i,r[o].scaleY=i,l[r[o].type](r[o]),r[o].strokeWidth=n*i,r[o].scaleX=1/i,r[o].scaleY=1/i)})}}),require2.register("scripts/inherit",function(t,e,n){n.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.super=e.prototype}}),require2.register("scripts/jquery-longpress",function(t,n,i){!function(t){t.fn.longPress=function(e,n){return this.on("mousedown touchstart",function(i){var r;r=setTimeout(function(){e.call(this,i)},n||150),t(window).one("mouseup touchend touchcancel touchleave",function(){clearTimeout(r)})})}}(e)}),require2.register("scripts/tool",function(t,e,n){function i(t,e){this.name=t||"Tool",this.master=e,this.canvas=e.canvas,this.active=!1,this.singleUse=!1,this._listeners=[],this._stateListeners=[]}i.prototype.setActive=function(t){if(!this.singleUse)return this.active===t?t:(this.active=t,!0===t?this.activate():this.deactivate(),t);console.warn("This is a single use tool. It was not activated.")},i.prototype.activate=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t].trigger,n=this._listeners[t].action;this.canvas.on(e,n)}},i.prototype.activateAgain=function(){},i.prototype.use=function(){},i.prototype.deactivate=function(){for(var t=0;t<this._listeners.length;t++){var e=this._listeners[t].trigger;this._listeners[t].action;this.canvas.off(e)}},i.prototype.addEventListener=function(t,e){this._listeners.push({trigger:t,action:e})},i.prototype.removeEventListener=function(t){for(var e=0;e<this._listeners.length;e++)if(t==this._listeners[e].trigger)return this._listeners.splice(e,1)},n.exports=i}),require2.register("scripts/tools/clone-tool",function(t,e,i){var r=e("scripts/inherit"),o=e("scripts/tool");function s(t,e){o.call(this,t,e),this.singleUse=!0,this._clipboard=null,this.master.$element.on("keydown",function(t){this._inTextEditMode()||(67===t.keyCode&&(t.ctrlKey||t.metaKey)&&(this.copy(),t.preventDefault()),86===t.keyCode&&(t.ctrlKey||t.metaKey)&&(this.paste(),t.preventDefault()))}.bind(this))}r(s,o),s.prototype.use=function(){this.copy(function(){this.paste()}.bind(this))},s.prototype.copy=function(t){var e=this.canvas.getActiveGroup()||this.canvas.getActiveObject();if(e){e._dt_sourceObj&&(e=e._dt_sourceObj);var i=n.util.getKlass(e.type),r=this.master.ADDITIONAL_PROPS_TO_SERIALIZE;i.async?e.clone(function(e){this._updateClipboard(e),"function"==typeof t&&t()}.bind(this),r):(this._updateClipboard(e.clone(null,r)),"function"==typeof t&&t())}},s.prototype.paste=function(){if(this._clipboard){var t=this._clipboard;this.canvas.deactivateAllWithDispatch(),t.set({left:t.left+15,top:t.top+15}),t.setCoords(),"group"===t.type?(t.getObjects().forEach(function(t){this.canvas.add(t)}.bind(this)),this.canvas.setActiveGroup(t)):(this.canvas.add(t),this.canvas.setActiveObject(t)),this.canvas.renderAll(),this.master.pushToHistory(),this._clipboard=null,this.copy()}},s.prototype._updateClipboard=function(t){this._clipboard=t},s.prototype._inTextEditMode=function(){var t=this.canvas.getActiveObject();return t&&t.isEditing},i.exports=s}),require2.register("scripts/tools/delete-tool",function(t,e,n){var i=e("scripts/inherit"),r=e("scripts/tool");function o(t,e){r.call(this,t,e),this.singleUse=!0,this.master.$element.on("keydown",function(t){8===t.keyCode&&(this.use(),t.preventDefault())}.bind(this))}i(o,r),o.prototype.use=function(){var t=this.canvas;t.getActiveObject()?(t.remove(t.getActiveObject()),this.master.pushToHistory()):t.getActiveGroup()&&(t.getActiveGroup().forEachObject(function(e){t.remove(e)}),t.discardActiveGroup().renderAll(),this.master.pushToHistory())},n.exports=o}),require2.register("scripts/tools/select-tool",function(t,e,i){var r=e("scripts/inherit"),o=e("scripts/tool"),s=e("scripts/fabric-extensions/line-custom-control-points"),a={cornerSize:n.isTouchSupported?22:12,transparentCorners:!1};function l(t,e){o.call(this,t,e),this.canvas.on("object:selected",function(t){t.target.set(a),this.canvas.renderAll(),this._setLastObject(t.target)}.bind(this)),this._lastObject=null,this.canvas.on("object:added",function(t){this._setLastObject(t.target)}.bind(this)),this.canvas.on("object:removed",function(t){this._checkLastObject(t.target)}.bind(this)),this.master.$element.on("keydown",function(t){65===t.keyCode&&(t.ctrlKey||t.metaKey)&&(this.selectAll(),t.preventDefault())}.bind(this)),s.controlPointColor="#bcd2ff",s.cornerSize=a.cornerSize}r(l,o),l.BASIC_SELECTION_PROPERTIES=a,l.prototype.activate=function(){l.super.activate.call(this),this.setSelectable(!0),this.selectLastObject()},l.prototype.deactivate=function(){l.super.deactivate.call(this),this.setSelectable(!1)},l.prototype.setSelectable=function(t){this.canvas.selection=t;for(var e=this.canvas.getObjects(),n=e.length-1;n>=0;n--)e[n].selectable=t},l.prototype.selectAll=function(){this.master.chooseTool("select"),this.master.select(this.canvas.getObjects())},l.prototype.selectLastObject=function(){this._lastObject&&this.canvas.setActiveObject(this._lastObject)},l.prototype._setLastObject=function(t){t._dt_sourceObj||(this._lastObject=t)},l.prototype._checkLastObject=function(t){if(t===this._lastObject){var e=this.canvas.getObjects();this._lastObject=e[e.length-1]}},i.exports=l}),require2.register("scripts/tools/shape-tool",function(t,e,n){var i=e("scripts/inherit"),r=e("scripts/tool");e("scripts/util");function o(t,e){r.call(this,t,e);var n=this;this.addEventListener("mouse:down",function(t){n.mouseDown(t)}),this.addEventListener("mouse:move",function(t){n.mouseMove(t)}),this.addEventListener("mouse:up",function(t){n.mouseUp(t)}),this.down=!1,this._firstAction=!1,this._locked=!0}i(o,r),o.prototype.minSize=7,o.prototype.defSize=30,o.prototype.activate=function(t){o.super.activate.call(this),this.down=!1,this.canvas.defaultCursor="crosshair",t||this.master.clearSelection()},o.prototype.activateAgain=function(){},o.prototype.deactivate=function(){o.super.deactivate.call(this),this.canvas.defaultCursor="default"},o.prototype.exit=function(){this.down=!1,this.master.changeOutOfTool()},o.prototype.mouseDown=function(t){this.down=!0,this._locked||this._firstAction||void 0===t.target||this.exit()},o.prototype.mouseMove=function(t){},o.prototype.mouseUp=function(t){this.down=!1},o.prototype.actionComplete=function(t){t&&(t.selectable=!this._locked),this._locked||this._firstAction&&(this._firstAction=!1,this._setAllObjectsSelectable(!0))},o.prototype.setCentralOrigin=function(t,e){var n=t.stroke?t.strokeWidth:0,i=t.left+(t.width+n)/2,r=t.top+(t.height+n)/2;t.set({left:i,top:r,originX:"center",originY:"center"})},o.prototype.convertToPositiveDimensions=function(t){t.width<0&&(t.left=t.left+t.width,t.width=-t.width),t.height<0&&(t.top=t.top+t.height,t.height=-t.height)},o.prototype.moveObjectLeftTop=function(t){var e=t.stroke?t.strokeWidth:0,n=t.left-(t.width+e)/2,i=t.top-(t.height+e)/2;t.set({left:n,top:i})},o.prototype._setFirstActionMode=function(){this._firstAction=!0,this._setAllObjectsSelectable(!1)},o.prototype._setAllObjectsSelectable=function(t){for(var e=this.canvas.getObjects(),n=e.length-1;n>=0;n--)e[n].selectable=t},n.exports=o}),require2.register("scripts/tools/shape-tools/basic-shape-tool",function(t,e,i){var r=e("scripts/inherit"),o=e("scripts/tools/shape-tool"),s=(e("scripts/util"),{rect:{fabricType:"rect"},square:{fabricType:"rect",uniform:!0},ellipse:{fabricType:"ellipse",radius:!0},circle:{fabricType:"ellipse",uniform:!0,radius:!0}});function a(t,e,i){o.call(this,t,e),this._type=s[i],this._shapeKlass=n.util.getKlass(this._type.fabricType)}function l(t){return t>=0?1:-1}r(a,o),a.prototype.mouseDown=function(t){if(a.super.mouseDown.call(this,t),this.active){var e=this.canvas.getPointer(t.e),n=e.x,i=e.y;this.curr=new this._shapeKlass({top:i,left:n,width:0,height:0,selectable:!1,lockUniScaling:this._type.uniform,fill:this.master.state.fill,stroke:this.master.state.stroke,strokeWidth:this.master.state.strokeWidth}),this.canvas.add(this.curr)}},a.prototype.mouseMove=function(t){if(a.super.mouseMove.call(this,t),!1!==this.down){var e=this.canvas.getPointer(t.e),n=e.x-this.curr.left,i=e.y-this.curr.top;this._type.uniform&&(Math.abs(n)<Math.abs(i)?i=Math.abs(n)*l(i):n=Math.abs(i)*l(n)),this.curr.set({width:n,height:i}),this._type.radius&&this.curr.set({rx:Math.abs(n/2),ry:Math.abs(i/2)}),this.canvas.renderAll()}},a.prototype.mouseUp=function(t){a.super.mouseUp.call(this,t),this._processNewShape(this.curr),this.canvas.renderAll(),this.actionComplete(this.curr),this.curr=void 0,this.master.pushToHistory()},a.prototype._processNewShape=function(t){this.convertToPositiveDimensions(t),Math.max(t.width,t.height)<this.minSize&&(t.set("width",this.defSize),t.set("height",this.defSize),this._type.radius&&(t.set("rx",this.defSize/2),t.set("ry",this.defSize/2)),this.moveObjectLeftTop(t)),this.setCentralOrigin(t),t.setCoords()},i.exports=a}),require2.register("scripts/tools/shape-tools/free-draw",function(t,e,n){var i=e("scripts/inherit"),r=e("scripts/tools/shape-tool");function o(t,e){r.call(this,t,e);var n=this;n.canvas.freeDrawingBrush.color=this.master.state.stroke,n.canvas.freeDrawingBrush.width=this.master.state.strokeWidth,this.master.on("state:changed",function(t){n.canvas.freeDrawingBrush.color=n.master.state.stroke,n.canvas.freeDrawingBrush.width=n.master.state.strokeWidth})}i(o,r),o.prototype.mouseDown=function(t){o.super.mouseDown.call(this,t),this.active&&(this.canvas.isDrawingMode||(this.canvas.isDrawingMode=!0,this.canvas._onMouseDownInDrawingMode(t.e)))},o.prototype.mouseUp=function(t){var e=this.canvas.getObjects(),n=e[e.length-1];this.curr=n,o.super.mouseUp.call(this,t),this._locked||(this.canvas.isDrawingMode=!1),this.actionComplete(n),this.curr=void 0,this.master.pushToHistory()},o.prototype.deactivate=function(){o.super.deactivate.call(this),this.canvas.isDrawingMode=!1},n.exports=o}),require2.register("scripts/tools/shape-tools/line-tool",function(t,i,r){var o=e,s=i("scripts/inherit"),a=i("scripts/tools/shape-tool"),l=(i("scripts/tools/select-tool"),i("scripts/util")),c=i("scripts/fabric-extensions/line-custom-control-points");function u(t,e,i,r){a.call(this,t,e),i=i||"line",this._lineKlass=n.util.getKlass(i),this._lineOptions=r,c(this.canvas)}i("scripts/fabric-extensions/arrow"),s(u,a),u.prototype.mouseDown=function(t){if(u.super.mouseDown.call(this,t),this.active){var e=this.canvas.getPointer(t.e),n=e.x,i=e.y;this.curr=new this._lineKlass([n,i,n,i],o.extend(!0,{originX:"center",originY:"center",selectable:!1,stroke:this.master.state.stroke,strokeWidth:this.master.state.strokeWidth},this._lineOptions)),this.canvas.add(this.curr)}},u.prototype.mouseMove=function(t){if(u.super.mouseMove.call(this,t),!1!==this.down){var e=this.canvas.getPointer(t.e),n=e.x,i=e.y;this.curr.set("x2",n),this.curr.set("y2",i),this.canvas.renderAll()}},u.prototype.mouseUp=function(t){u.super.mouseUp.call(this,t),this._processNewShape(this.curr),this.canvas.renderAll(),this.actionComplete(this.curr),this.curr=void 0,this.master.pushToHistory()},u.prototype._processNewShape=function(t){var e=t.get("x1"),n=t.get("y1"),i=t.get("x2"),r=t.get("y2");l.dist(e-i,n-r)<this.minSize&&(i=e+this.defSize,r=n+this.defSize,t.set("x2",i),t.set("y2",r)),t.setCoords()},r.exports=u}),require2.register("scripts/tools/shape-tools/stamp-tool",function(t,e,i){var r=e("scripts/inherit"),o=e("scripts/tools/shape-tool");function s(t,e,n){o.call(this,t,e),this._parseSVG=n,this._stamp=null,this._curr=null,this._startX=null,this._startY=null}function a(t){return t>=0?1:-1}r(s,o),s.prototype.mouseDown=function(t){if(s.super.mouseDown.call(this,t),this.active&&this._stamp){var e=this.canvas.getPointer(t.e);this._startX=e.x,this._startY=e.y,this._stamp.clone(function(t){t.set({left:this._startX,top:this._startY,scaleX:0,scaleY:0,originX:"center",originY:"center",selectable:!1}),this._curr=t,this.canvas.add(this._curr)}.bind(this))}},s.prototype.mouseMove=function(t){if(s.super.mouseMove.call(this,t),!1!==this.down&&this._curr){var e=this.canvas.getPointer(t.e),n=e.x-this._startX,i=e.y-this._startY,r=this._stamp.width/this._stamp.height||1;Math.abs(n/i)>r?n=a(n)*Math.abs(i)*r:i=a(i)*Math.abs(n)/r,this._curr.set({scaleX:Math.abs(n)/this._stamp.width,scaleY:Math.abs(i)/this._stamp.height,left:this._startX+.5*n,top:this._startY+.5*i}),this.canvas.renderAll()}},s.prototype.mouseUp=function(t){s.super.mouseUp.call(this,t),this._curr&&(this._processNewShape(this._curr),this.canvas.renderAll(),this.actionComplete(this._curr),this._curr=void 0,this.master.pushToHistory())},s.prototype.loadImage=function(t,e){this._parseSVG&&".svg"===t.toLowerCase().substr(-4)?this._loadSVGImage(t,e):this._loadNonSVGImage(t,e)},s.prototype.setStampObject=function(t){this._stamp=t},s.prototype.getStampSrc=function(){return this._stamp&&this._stamp._dt_sourceURL},s.prototype._processNewShape=function(t){Math.max(t.width*t.scaleX,t.height*t.scaleY)<this.minSize&&t.set({scaleX:1,scaleY:1}),t.setCoords()},s.prototype._loadSVGImage=function(t,e){n.loadSVGFromURL(t,function(i,r){var o=n.util.groupSVGElements(i,r);o._dt_sourceURL=t,e(o,this._renderToImage(o))}.bind(this))},s.prototype._loadNonSVGImage=function(t,e){n.util.loadImage(t,function(i){var r=new n.Image(i,{crossOrigin:i.crossOrigin});r._dt_sourceURL=t,e(r,i)},null,"anonymous")},s.prototype._renderToImage=function(t){var e=new n.Canvas(document.createElement("canvas"));e.setDimensions({width:t.width,height:t.height}),e.add(t).renderAll();var i=new Image;return i.src=e.toDataURL(),i},i.exports=s}),require2.register("scripts/tools/shape-tools/text-tool",function(t,i,r){var o=e,s=i("scripts/inherit"),a=i("scripts/tools/shape-tool");function l(t,e){a.call(this,t,e),this.canvas.on("text:editing:exited",function(t){this.active&&(t.target.selectable=!1),this._pushToHistoryIfModified(t.target)}.bind(this))}s(l,a),l.prototype.mouseDown=function(t){if(!t.target||!t.target.isEditing){l.super.mouseDown.call(this,t);var e=this.canvas.findTarget(t.e);if(e&&"i-text"===e.type)this.editText(e,t.e);else if(this.active&&!t.e._dt_doNotCreateNewTextObj){var i=this.canvas.getPointer(t.e),r=i.x,o=i.y,s=new n.IText("",{left:r,top:o,lockUniScaling:!0,fontFamily:"Arial",fontSize:this.master.state.fontSize,fill:this.master.state.stroke});this.actionComplete(s),this.canvas.add(s),this.editText(s,t.e),t.e.preventDefault()}}},l.prototype.activate=function(){l.super.activate.call(this,!0)},l.prototype.deactivate=function(){l.super.deactivate.call(this),this.exitTextEditing()},l.prototype.exitTextEditing=function(){var t=this.canvas.getActiveObject();t&&t.isEditing&&this.canvas.deactivateAllWithDispatch()},l.prototype.editText=function(t,e){this.canvas.setActiveObject(t),t.enterEditing(),t.setCursorByClick(e),t.hiddenTextarea&&t.canvas&&(t.canvas.wrapperEl.appendChild(t.hiddenTextarea),n.isTouchSupported&&o(t.hiddenTextarea).css({left:"-1000px",top:e.pageY||0,"font-size":"50px"}),t.hiddenTextarea.focus()),this._exitTextEditingOnFirstClick()},l.prototype._exitTextEditingOnFirstClick=function(){var t=this,e=this.canvas;function n(i){if(!(o(i.target).closest(".dt-keep-text-edit-mode").length>0)){var r=e.findTarget(i),s=e.getActiveObject();r!==s&&s&&s.isEditing&&(window.removeEventListener("mousedown",n,!0),window.removeEventListener("touchstart",n,!0),t.exitTextEditing(),i._dt_doNotCreateNewTextObj=!0)}}window.addEventListener("mousedown",n,!0),window.addEventListener("touchstart",n,!0)},l.prototype._pushToHistoryIfModified=function(t){t.text!==t._dt_lastText&&(this.master.pushToHistory(),t._dt_lastText=t.text)},r.exports=l}),require2.register("scripts/ui/basic-button",function(t,n,i){var r=e;function o(t,e,n){this.ui=e,this.dt=n,this.name=t.name,this.palette=t.palette,this.onInit=t.onInit,this._locked=!1,this.$element=r("<div>").addClass("dt-btn").addClass(t.classes).attr("title",t.tooltip).appendTo(e.getPalette(t.palette).$element),this.$label=r("<span>").text(t.label).appendTo(this.$element),t.onClick&&this.$element.on("mousedown touchstart",function(i){this._locked||(t.onClick.call(this,i,e,n),i.preventDefault())}.bind(this)),t.onLongPress&&this.$element.longPress(function(i){this._locked||(t.onLongPress.call(this,i,e,n),i.preventDefault())}.bind(this)),t.onStateChange&&n.on("state:changed",function(e){t.onStateChange.call(this,e)}.bind(this)),t.onToolChange&&n.on("tool:changed",function(e){t.onToolChange.call(this,e)}.bind(this)),t.activatesTool&&(this.$element.on("mousedown touchstart",function(e){this._locked||(n.chooseTool(t.activatesTool),e.preventDefault())}.bind(this)),n.on("tool:changed",function(e){e===t.activatesTool?this.$element.addClass("dt-active"):this.$element.removeClass("dt-active")}.bind(this))),t.reflectsTools&&n.on("tool:changed",function(n){-1!==t.reflectsTools.indexOf(n)?(this.setActive(!0),this.setLabel(e.getButton(n).getLabel())):(this.setActive(!1),this.$element.removeClass("dt-active"))}.bind(this))}n("scripts/jquery-longpress"),o.prototype.setLabel=function(t){this.$label.text(t)},o.prototype.getLabel=function(){return this.$label.text()},o.prototype.click=function(){this.$element.triggerHandler("mousedown")},o.prototype.setActive=function(t){t?this.$element.addClass("dt-active"):this.$element.removeClass("dt-active")},o.prototype.setLocked=function(t){t?this.$element.addClass("dt-locked"):this.$element.removeClass("dt-locked"),this._locked=t},i.exports=o}),require2.register("scripts/ui/color-button",function(t,e,n){var i=e("scripts/inherit"),r=e("scripts/ui/basic-button");function o(t,e,n){var i;i="stroke"===t.type?function(){this.dt.setStrokeColor(t.color),this.dt.setSelectionStrokeColor(t.color)}:function(){this.dt.setFillColor(t.color),this.dt.setSelectionFillColor(t.color)},t.onClick=i,r.call(this,t,e,n),this.setBackground(t.color)}i(o,r),o.prototype.setBackground=function(t){t?this.$element.css("background",t):this.$element.addClass("dt-transparent")},n.exports=o}),require2.register("scripts/ui/fill-button",function(t,n,i){var r=e,o=n("scripts/inherit"),s=n("scripts/ui/basic-button");function a(t,e,n){s.call(this,t,e,n),this.$element.addClass("dt-fill-color"),r("<div>").addClass("dt-color").appendTo(this.$element)}o(a,s),a.prototype.setColor=function(t){t?this.$element.find(".dt-color").removeClass("dt-no-color"):(this.$element.find(".dt-color").addClass("dt-no-color"),t="#ddd"),this.$element.find(".dt-color").css("background",t)},i.exports=a}),require2.register("scripts/ui/generate-stamps",function(t,e,n){var i=e("scripts/ui/stamp-image-button"),r="text";n.exports=function(t,e){if(e){var n=function(t,e){for(var n=0;n<e.length;n++)if(e[n].name===t)return n}(r,t.buttons);t.buttons.splice(n+1,0,{name:"stamp",tooltip:"Stamp tool (click and hold to show available categories)",classes:"dt-expand",label:"M",palette:"main",activatesTool:"stamp",onClick:function(){this.ui.togglePalette("stampCategories"),Object.keys(e).forEach(function(t){var e=t+"StampsPalette";this.ui.togglePalette(e)},this)}}),t.palettes.push({name:"stampCategories",anchor:"stamp",vertical:!0,hideOnClick:!1});var o=!0;Object.keys(e).forEach(function(n){var r=n+"StampsCategory",s=n+"StampsPalette",a={name:r,label:n,tooltip:n+" category (click to show available stamps)",classes:"dt-text-btn dt-expand",palette:"stampCategories",onClick:function(){this.ui.togglePalette(s)}};t.buttons.push(a);var l,c,u,h={name:s,anchor:r};t.palettes.push(h),(l=s,c=e[n],u=[],c.forEach(function(t){u.push({imageSrc:t,setStampOnImgLoad:o,buttonClass:i,palette:l}),o&&(o=!1)}),u).forEach(function(e){t.buttons.push(e)})})}}}),require2.register("scripts/ui/line-width-button",function(t,n,i){var r=e,o=n("scripts/inherit"),s=n("scripts/ui/basic-button");function a(t,e,n){t.onClick=function(){this.dt.setStrokeWidth(t.width),this.dt.setSelectionStrokeWidth(t.width)},t.onStateChange=function(e){e.strokeWidth===t.width?this.$element.addClass("dt-active"):this.$element.removeClass("dt-active")},s.call(this,t,e,n),r("<div>").addClass("dt-line-width-icon").appendTo(this.$element),this.setLineWidth(t.width)}o(a,s),a.prototype.setLineWidth=function(t){0!==t?this.$element.find(".dt-line-width-icon").css("width",t):this.$element.find(".dt-line-width-icon").addClass("dt-no-stroke")},i.exports=a}),require2.register("scripts/ui/palette",function(t,n,i){var r=e;function o(t,e){this.ui=e,this.name=t.name,this.permanent=!!t.permanent,this.hideOnClick=void 0===t.hideOnClick||t.hideOnClick,this.anchor=t.anchor,this.$element=r("<div>").addClass("dt-palette").addClass(t.vertical?"dt-vertical":"dt-horizontal"),this._closeOnClick=function(t){!this.hideOnClick&&(this.$element===t.target||this.$element.find(t.target).length>0)||(this.$element.is(":visible")&&this._hide(),this._clearWindowHandlers())}.bind(this),this.permanent||this.$element.hide()}o.prototype.toggle=function(){this.$element.is(":visible")?this._hide():this._show()},o.prototype._show=function(){this._position(),this.$element.show(),this.permanent||setTimeout(function(){r(window).on("mousedown touchstart",this._closeOnClick)}.bind(this),16)},o.prototype._hide=function(){this.$element.hide(),this._clearWindowHandlers()},o.prototype._clearWindowHandlers=function(){r(window).off("mousedown touchstart",this._closeOnClick)},o.prototype._position=function(){var t=this.anchor&&this.ui.getButton(this.anchor);if(t){var e=t.$element.offset(),n=this.ui.getMainContainer().offset();this.$element.css({position:"absolute",top:e.top-n.top,left:e.left+t.$element.outerWidth()-n.left})}},i.exports=o}),require2.register("scripts/ui/stamp-image-button",function(t,n,i){var r=e,o=n("scripts/inherit"),s=n("scripts/ui/basic-button");function a(t,e,n){t.onClick=function(){this.dt.tools.stamp.setStampObject(this._stamp)},s.call(this,t,e,n),this._stamp=null,this._imageSrc=n.proxy(t.imageSrc),this.$element.addClass("dt-img-btn"),this._startWaiting(),this.dt.tools.stamp.loadImage(this._imageSrc,function(e,n){this._stamp=e,this.$image=r(n).appendTo(this.$element),this._stopWaiting(),t.setStampOnImgLoad&&this.dt.tools.stamp.setStampObject(this._stamp)}.bind(this),null,"anonymous"),n.on("tool:changed",function(t){"stamp"===t&&n.tools.stamp.getStampSrc()===this._imageSrc?this.setActive(!0):this.setActive(!1)}.bind(this))}o(a,s),a.prototype._startWaiting=function(){this.setLocked(!0),this.$element.find("span").addClass("dt-spin").text("/")},a.prototype._stopWaiting=function(){this.setLocked(!1),this.$element.find("span").removeClass("dt-spin").text("")},i.exports=a}),require2.register("scripts/ui/stroke-button",function(t,n,i){var r=e,o=n("scripts/inherit"),s=n("scripts/ui/basic-button");function a(t,e,n){s.call(this,t,e,n),this.$element.addClass("dt-stroke-color");var i=r("<div>").addClass("dt-color").appendTo(this.$element);r("<div>").addClass("dt-inner1").appendTo(i),r("<div>").addClass("dt-inner2").appendTo(i)}o(a,s),a.prototype.setColor=function(t){t?this.$element.find(".dt-color").removeClass("dt-no-color"):(this.$element.find(".dt-color").addClass("dt-no-color"),t="#ddd"),this.$element.find(".dt-color").css("background",t)},i.exports=a}),require2.register("scripts/ui/ui-definition",function(t,e,n){var i=e("scripts/ui/stroke-button"),r=e("scripts/ui/fill-button"),o=e("scripts/ui/color-button"),s=e("scripts/ui/line-width-button"),a={palettes:[{name:"main",permanent:!0,vertical:!0},{name:"lines",anchor:"linesPalette"},{name:"shapes",anchor:"shapesPalette"},{name:"fontSizes",anchor:"text"},{name:"strokeColors",anchor:"strokeColorPalette"},{name:"fillColors",anchor:"fillColorPalette"},{name:"strokeWidths",anchor:"strokeWidthPalette"}],buttons:[{label:"s",tooltip:"Select tool",activatesTool:"select",palette:"main"},{name:"linesPalette",tooltip:"Line tool (click and hold to show available line types)",classes:"dt-expand",reflectsTools:["line","arrow","doubleArrow"],palette:"main",onInit:function(){this.setLabel(this.ui.getPaletteActiveButton("lines").getLabel())},onClick:function(){this.ui.getPaletteActiveButton("lines").click(),this.ui.togglePalette("lines")}},{name:"shapesPalette",tooltip:"Basic shape tool (click and hold to show available shapes)",classes:"dt-expand",reflectsTools:["rect","ellipse","square","circle"],palette:"main",onInit:function(){this.setLabel(this.ui.getPaletteActiveButton("shapes").getLabel())},onClick:function(){this.ui.getPaletteActiveButton("shapes").click(),this.ui.togglePalette("shapes")}},{name:"free",tooltip:"Free hand drawing tool",label:"F",activatesTool:"free",palette:"main"},{name:"text",tooltip:"Text tool (click and hold to show available font sizes)",label:"T",classes:"dt-expand dt-keep-text-edit-mode",activatesTool:"text",palette:"main",onClick:function(){this.ui.togglePalette("fontSizes")}},{name:"clone",tooltip:"Clone tool",label:"c",activatesTool:"clone",palette:"main",onInit:l},{name:"strokeColorPalette",tooltip:"Stroke color (click and hold to show available colors)",buttonClass:i,classes:"dt-expand dt-keep-text-edit-mode",palette:"main",onInit:function(){this.setColor(this.dt.state.stroke)},onStateChange:function(t){this.setColor(t.stroke)},onClick:function(){this.ui.togglePalette("strokeColors")}},{name:"fillColorPalette",tooltip:"Fill color (click and hold to show available colors)",buttonClass:r,classes:"dt-expand",palette:"main",onInit:function(){this.setColor(this.dt.state.fill)},onStateChange:function(t){this.setColor(t.fill)},onClick:function(){this.ui.togglePalette("fillColors")}},{name:"strokeWidthPalette",tooltip:"Stroke width (click and hold to show available options)",label:"w",classes:"dt-expand",palette:"main",onClick:function(){this.ui.togglePalette("strokeWidths")}},{name:"sendToBack",tooltip:"Send selected objects to back",label:"m",classes:"dt-send-to",palette:"main",onInit:l,onClick:function(){this.dt.sendSelectionToBack()}},{name:"sendToFront",tooltip:"Send selected objects to front",label:"l",classes:"dt-send-to",palette:"main",onInit:l,onClick:function(){this.dt.sendSelectionToFront()}},{name:"undo",tooltip:"Undo",label:"u",classes:"dt-undo-redo",palette:"main",onClick:function(){this.dt.undo()},onInit:function(){this.setLocked(!0),this.dt.on("undo:possible",function(){this.setLocked(!1)}.bind(this)),this.dt.on("undo:impossible",function(){this.setLocked(!0)}.bind(this))}},{name:"redo",tooltip:"Redo",label:"r",classes:"dt-undo-redo",palette:"main",onClick:function(){this.dt.redo()},onInit:function(){this.setLocked(!0),this.dt.on("redo:possible",function(){this.setLocked(!1)}.bind(this)),this.dt.on("redo:impossible",function(){this.setLocked(!0)}.bind(this))}},{name:"trash",tooltip:"Delete selected objects",label:"d",activatesTool:"trash",palette:"main",onInit:l},{name:"line",tooltip:"Line",label:"L",activatesTool:"line",palette:"lines"},{name:"arrow",tooltip:"Arrow",label:"A",activatesTool:"arrow",palette:"lines"},{name:"doubleArrow",tooltip:"Double arrow",label:"D",activatesTool:"doubleArrow",palette:"lines"},{name:"rect",tooltip:"Rectangle",label:"R",activatesTool:"rect",palette:"shapes"},{name:"ellipse",tooltip:"Ellipse",label:"E",activatesTool:"ellipse",palette:"shapes"},{name:"square",tooltip:"Square",label:"S",activatesTool:"square",palette:"shapes"},{name:"circle",tooltip:"Circle",label:"C",activatesTool:"circle",palette:"shapes"}]};function l(){this.setLocked(!0),this.dt.canvas.on("object:selected",function(){this.setLocked(!1)}.bind(this)),this.dt.canvas.on("selection:cleared",function(){this.setLocked(!0)}.bind(this))}[12,17,22,27,32,37,42].forEach(function(t){a.buttons.push({label:"T",tooltip:t+"px",classes:"dt-keep-text-edit-mode",onInit:function(){this.$element.css("font-size",t),this.$element.css("line-height","50px")},onClick:function(){this.dt.setFontSize(t),this.dt.setSelectionFontSize(t)},onStateChange:function(e){this.setActive(e.fontSize===t)},palette:"fontSizes"})}),["","#efefef","#e66665","#75b792","#076bb6","#ffd605","#f47d43","#ae70af","#a9b2b1","#333333"].forEach(function(t){a.buttons.push({buttonClass:o,tooltip:t,classes:"dt-keep-text-edit-mode",color:t,type:"stroke",palette:"strokeColors"}),a.buttons.push({buttonClass:o,tooltip:t,color:t,type:"fill",palette:"fillColors"})}),[1,2,4,8,12,16,20].forEach(function(t){a.buttons.push({buttonClass:s,tooltip:t+"px",width:t,palette:"strokeWidths"})}),n.exports=a}),require2.register("scripts/ui/ui-manager",function(t,n,i){var r=e,o=n("scripts/ui/basic-button"),s=n("scripts/ui/palette"),a=n("scripts/ui/generate-stamps"),l=n("scripts/ui/ui-definition");function c(t){this.drawingTool=t,this.$tools=r("<div>").addClass("dt-tools").prependTo(t.$element),this._palettes={},this._buttons={},this._paletteActiveButton={};var e=r.extend(!0,{},l);for(var n in this.drawingTool.options.stamps&&a(e,this.drawingTool.options.stamps),this._processUIDefinition(e),this._buttons){var i=this._buttons[n];i.onInit&&i.onInit.call(i,this,t)}}c.prototype._processUIDefinition=function(t){this.$tools.empty(),t.palettes.forEach(this._createPalette.bind(this)),t.buttons.forEach(this._createButton.bind(this))},c.prototype.getButton=function(t){return this._buttons[t]},c.prototype.getPalette=function(t){return this._palettes[t]},c.prototype.togglePalette=function(t){this._palettes[t].toggle()},c.prototype.getMainContainer=function(){return this.drawingTool.$element},c.prototype.getPaletteActiveButton=function(t){return this._paletteActiveButton[t]},c.prototype._createPalette=function(t){var e=new s(t,this),n=e.name||h();e.$element.appendTo(this.$tools),this._palettes[n]=e},c.prototype._createButton=function(t){var e=new(t.buttonClass||o)(t,this,this.drawingTool),n=e.name||h();this._buttons[n]=e,this._setupPaletteActiveButton(e)},c.prototype._setupPaletteActiveButton=function(t){this._paletteActiveButton[t.palette]||(this._paletteActiveButton[t.palette]=t),t.$element.on("mousedown touchstart",function(){this._paletteActiveButton[t.palette]=t}.bind(this))};var u=0;function h(){return u++}i.exports=c}),require2.register("scripts/undo-redo",function(t,e,n){function i(t){this.dt=t,this._suppressHistoryUpdate=!1,this.reset(),this.dt.$element.on("keydown",function(t){90===t.keyCode&&(t.ctrlKey||t.metaKey)?(this.undo(),t.preventDefault()):89===t.keyCode&&(t.ctrlKey||t.metaKey)&&(this.redo(),t.preventDefault())}.bind(this))}i.prototype.undo=function(){var t=this._storage[this._idx-1];t&&(this._load(t),this._idx-=1)},i.prototype.redo=function(){var t=this._storage[this._idx+1];t&&(this._load(t),this._idx+=1)},i.prototype.saveState=function(t){var e=this.dt.save();this._suppressHistoryUpdate||e===this._lastState()||(this._idx+=1,this._storage[this._idx]=e,this._storage.length=this._idx+1,this._cutOffOldStates())},i.prototype.reset=function(){this._storage=[],this._idx=-1},i.prototype.canUndo=function(){return!!this._storage[this._idx-1]},i.prototype.canRedo=function(){return!!this._storage[this._idx+1]},i.prototype._lastState=function(){return this._storage[this._idx]},i.prototype._load=function(t){this.dt.load(t,null,!0)},i.prototype._cutOffOldStates=function(){var t=this._storage.length-20;t>0&&(this._storage.splice(0,t),this._idx=this._storage.length-1)},n.exports=i}),require2.register("scripts/util",function(t,e,n){n.exports={dist:function(t,e){var n=Math.pow(t,2),i=Math.pow(e,2);return Math.sqrt(n+i)}}}),window.DrawingTool=require2("scripts/drawing-tool")}).call(this,n(7),n(1),n(29).fabric)},function(t,e,n){"use strict";(function(t){var i=n(5),r=n(10),o=n.n(r);class s extends i.a{constructor(t,e,n,i,r){super(t,i,r),this.$q=e,this.StudentAssetService=n}getComponentTypeLabel(){return this.$translate("embedded.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Embedded",t.url="",t}isCompleted(t,e,n,i){let r=!1;if(null!=e)for(let t of e){const e=t.studentData;if(null!=e&&null!=e.isCompleted){if(!0===e.isCompleted)return!0;r=!0}}if(!1===r&&null!=i)for(let t of i)if("nodeEntered"===t.event)return!0;return!1}componentHasWork(t){return!1}componentStateHasStudentWork(t,e){return null!=t.studentData}generateImageFromRenderedComponentState(e){const n=this.$q.defer(),i=t("#componentApp_"+e.componentId);if(null!=i&&i.length>0){let t=i.contents().find("html");null!=t&&t.length>0&&(t=t[0],o()(t).then(t=>{const e=t.toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(e);this.StudentAssetService.uploadAsset(i).then(t=>{n.resolve(t)})}))}return n.promise}}s.$inject=["$filter","$q","StudentAssetService","StudentDataService","UtilService"],e.a=s}).call(this,n(1))},function(t,e,n){"use strict";(function(t){var i=n(6),r=n(10),o=n.n(r);n(430);class s extends i.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g){if(super(t,e,i,r,l,c,h,d,f,p,m,g),this.$q=n,this.$sce=o,this.$timeout=s,this.$window=a,this.EmbeddedService=u,this.componentType=null,this.url=null,this.width=this.componentContent.width?this.componentContent.width:"100%",this.height=this.componentContent.height?this.componentContent.height:"100%",this.maxWidth=null,this.maxHeight=null,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.componentStateId=null,this.embeddedApplicationIFrameId="",this.annotationsToSave=[],this.embeddedApplicationIFrameId="componentApp_"+this.componentId,this.componentType=this.componentContent.type,this.isGradingMode()||this.isGradingRevisionMode()){const t=this.$scope.componentState;null!=t&&(this.embeddedApplicationIFrameId="componentApp_"+t.id,this.isGradingRevisionMode()&&(this.embeddedApplicationIFrameId="componentApp_gradingRevision_"+t.id))}this.setURL(this.componentContent.url),this.$scope.handleConnectedComponentStudentDataChanged=(t,e,n)=>{const i={messageType:"handleConnectedComponentStudentDataChanged",componentState:n};this.sendMessageToApplication(i)},this.initializeScopeGetComponentState(this.$scope,"embeddedController"),this.$scope.$on("siblingComponentStudentDataChanged",(t,e)=>{if(this.isEventTargetThisComponent(e)){const t={messageType:"siblingComponentStudentDataChanged",componentState:e.componentState};this.sendMessageToApplication(t)}}),this.initializeMessageEventListener(),this.broadcastDoneRenderingComponent()}cleanupBeforeExiting(){this.$window.removeEventListener("message",this.messageEventListener)}initializeMessageEventListener(){this.messageEventListener=t=>{const e=t.data;"event"===e.messageType?this.handleEventMessage(e):"studentWork"===e.messageType?this.handleStudentWorkMessage(e):"applicationInitialized"===e.messageType?this.handleApplicationInitializedMessage(e):"componentDirty"===e.messageType?this.handleComponentDirtyMessage(e):"componentSubmitDirty"===e.messageType?this.handleComponentSubmitDirtyMessage(e):"studentDataChanged"===e.messageType?this.handleStudentDataChangedMessage(e):"getStudentWork"===e.messageType?this.handleGetStudentWorkMessage(e):"getLatestStudentWork"===e.messageType?this.handleGetLatestStudentWorkMessage(e):"getParameters"===e.messageType?this.handleGetParametersMessage(e):"getProjectPath"===e.messageType?this.handleGetProjectPathMessage(e):"getLatestAnnotations"===e.messageType&&this.handleGetLatestAnnotationsMessage(e)}}handleEventMessage(t){const e=this.nodeId,n=this.componentId,i=this.componentType,r=t.eventCategory,o=t.event,s=t.eventData;this.StudentDataService.saveVLEEvent(e,n,i,r,o,s)}handleStudentWorkMessage(t){null!=t.id?this.componentStateId=t.id:this.componentStateId=null,t.isSubmit&&(this.isSubmit=t.isSubmit),this.isDirty=!0,this.setStudentData(t.studentData),null!=t.annotations&&this.setAnnotations(t.annotations),this.studentDataChanged(),this.$scope.$emit("componentSaveTriggered",{nodeId:this.nodeId,componentId:this.componentId})}handleApplicationInitializedMessage(e){this.sendLatestWorkToApplication(),this.processLatestStudentWork(),t("#"+this.embeddedApplicationIFrameId).iFrameResize({scrolling:!0})}handleComponentDirtyMessage(t){this.isDirty=t.isDirty,this.$scope.$emit("componentDirty",{componentId:this.componentId,isDirty:isDirty})}handleComponentSubmitDirtyMessage(t){this.isSubmitDirty=t.isDirty,this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:isDirty})}handleStudentDataChangedMessage(t){this.setStudentData(t.studentData),null!=t.annotations&&this.setAnnotations(t.annotations),this.studentDataChanged()}handleGetStudentWorkMessage(t){const e=t.getStudentWorkParams,n=this.getStudentWork(t.getStudentWorkParams);n.messageType="studentWork",n.getStudentWorkParams=e,this.sendMessageToApplication(n)}handleGetLatestStudentWorkMessage(t){const e={messageType:"latestStudentWork",latestStudentWork:this.getLatestStudentWork()};this.sendMessageToApplication(e)}handleGetParametersMessage(t){let e={};null!=this.componentContent.parameters&&(e=this.UtilService.makeCopyOfJSONObject(this.componentContent.parameters)),e.nodeId=this.nodeId,e.componentId=this.componentId;const n={messageType:"parameters",parameters:e};this.sendMessageToApplication(n)}handleGetProjectPathMessage(t){const e={messageType:"projectPath",projectPath:this.ConfigService.getConfigParam("projectBaseURL"),projectAssetsPath:this.ConfigService.getConfigParam("projectBaseURL")+"assets"};this.sendMessageToApplication(e)}handleGetLatestAnnotationsMessage(t){const e={messageType:"latestAnnotations",latestScoreAnnotation:this.AnnotationService.getLatestScoreAnnotation(this.nodeId,this.componentId,this.ConfigService.getWorkgroupId(),"any"),latestCommentAnnotation:this.AnnotationService.getLatestCommentAnnotation(this.nodeId,this.componentId,this.ConfigService.getWorkgroupId(),"any")};this.sendMessageToApplication(e)}registerStudentWorkSavedToServerListener(){this.$scope.$on("studentWorkSavedToServer",(t,e)=>{const n=e.studentWork;if(null!=n&&n.componentId===this.componentId){this.isDirty=!1,this.$scope.$emit("componentDirty",{componentId:this.componentId,isDirty:!1}),this.$scope.embeddedController.componentState=null;const t=n.isAutoSave,e=n.isSubmit,i=n.serverSaveTime,r=this.ConfigService.convertToClientTimestamp(i);e?(this.setSubmittedMessage(r),this.submit(),this.isSubmitDirty=!1,this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:!1})):t?this.setAutoSavedMessage(r):this.setSavedMessage(r);const o={messageType:"componentStateSaved",componentState:n};this.sendMessageToApplication(o)}})}iframeLoaded(t){window.document.getElementById(this.embeddedApplicationIFrameId).contentWindow.addEventListener("message",this.messageEventListener)}setURL(t){this.url=this.$sce.trustAsResourceUrl(t)}createComponentState(t){const e=this.NodeService.createNewComponentState();e.studentData=this.studentData,e.componentType="Embedded",e.nodeId=this.nodeId,e.componentId=this.componentId,null!=this.componentStateId&&(e.id=this.componentStateId),this.isSubmit&&(e.isSubmit=this.isSubmit,this.isSubmit=!1),0!==this.annotationsToSave.length&&(e.annotations=this.annotationsToSave),"save"===t&&this.clearAnnotationsToSave();const n=this.$q.defer();return this.createComponentStateAdditionalProcessing(n,e,t),n.promise}clearAnnotationsToSave(){this.annotationsToSave=[]}sendLatestWorkToApplication(){let t=this.$scope.componentState;this.UtilService.hasConnectedComponent(this.componentContent)&&(t=this.handleConnectedComponents());const e={messageType:"componentState",componentState:t};this.sendMessageToApplication(e)}sendMessageToApplication(t){window.document.getElementById(this.embeddedApplicationIFrameId).contentWindow.postMessage(t,"*")}snipModel(e){const n=t("#"+this.embeddedApplicationIFrameId);if(null!=n&&n.length>0){let t=n.contents().find("html");null!=t&&t.length>0&&(t=t[0],o()(t).then(t=>{const n=t.toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(n);this.NotebookService.addNote(e,i)}))}}getLatestStudentWork(){return this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId)}getStudentWork(t){const e={};return null!=t&&(t.getLatestStudentWorkFromThisComponent&&(e.latestStudentWorkFromThisComponent=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId)),t.getAllStudentWorkFromThisComponent&&(e.allStudentWorkFromThisComponent=this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId)),t.getLatestStudentWorkFromThisNode&&(e.latestStudentWorkFromThisNode=this.StudentDataService.getLatestComponentStatesByNodeId(this.nodeId)),t.getAllStudentWorkFromThisNode&&(e.allStudentWorkFromThisNode=this.StudentDataService.getComponentStatesByNodeId(this.nodeId)),t.getLatestStudentWorkFromOtherComponents&&(e.latestStudentWorkFromOtherComponents=this.getLatestStudentWorkFromOtherComponents(t.otherComponents)),t.getAllStudentWorkFromOtherComponents&&(e.allStudentWorkFromOtherComponents=this.getAllStudentWorkFromOtherComponents(t.otherComponents))),e}getLatestStudentWorkFromOtherComponents(t){const e=[];if(null!=t)for(let n of t){const t=n.nodeId,i=n.componentId;if(null!=t&&null!=i){const n=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(t,i);null!=n&&e.push(n)}}return e}getAllStudentWorkFromOtherComponents(t){let e=[];if(null!=t)for(let n of t)if(null!=n){const t=n.nodeId,i=n.componentId;if(null!=t&&null!=i){let n=this.StudentDataService.getComponentStatesByNodeIdAndComponentId(t,i);null!=n&&n.length>0&&(e=e.concat(n))}}return e}handleConnectedComponents(){let t=this.$scope.componentState,e=!0;null==t?(t=this.NodeService.createNewComponentState()).studentData={}:e=!1;const n=this.componentContent.connectedComponents;if(null!=n){const i=[];for(let r of n){const n=r.type;"showWork"===n?this.handleShowWorkConnectedComponent(r,i):"importWork"!==n&&null!=n||(t=this.handleImportWorkConnectedComponent(r,t,e))}null!=t&&(this.setStudentWork(t),this.studentDataChanged())}return t}handleShowWorkConnectedComponent(t,e){const n=t.nodeId,i=t.componentId,r=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(n,i);null!=r&&e.push(this.UtilService.makeCopyOfJSONObject(r)),this.isDisabled=!0}handleImportWorkConnectedComponent(t,e,n){const i=t.nodeId,r=t.componentId,o=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(i,r);if(null!=o){const i=t.fields,r=t.when;(null==r||"firstTime"===r&&n)&&(e=this.mergeComponentState(e,o,i,n))}return e}mergeComponentState(t,e,n,i){if(null==n)"Embedded"===e.componentType&&(t.studentData=this.UtilService.makeCopyOfJSONObject(e.studentData));else for(let r of n)this.mergeField(t,e,r,i);return t}mergeField(t,e,n,i){const r=n.name,o=n.when,s=n.action;"firstTime"==o&&1==i?"write"==s&&(t.studentData[r]=e.studentData[r]):"always"==o&&"write"==s&&(t.studentData[r]=e.studentData[r])}setStudentWork(t){this.studentData=t.studentData}setStudentData(t){this.studentData=t}setAnnotations(t){for(let e of t)if(this.isAnnotationValid(e))if("autoScore"===e.type){const t=this.createAutoScoreAnnotation(e.data);this.updateLatestScoreAnnotation(t),this.addToAnnotationsToSave(t)}else if("autoComment"===e.type){const t=this.createAutoCommentAnnotation(e.data);this.updateLatestCommentAnnotation(t),this.addToAnnotationsToSave(t)}}isAnnotationValid(t){return null!=t.type&&null!=t.data&&null!=t.data.value}addToAnnotationsToSave(t){this.annotationsToSave.push(t)}}s.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","$sce","$timeout","$window","AnnotationService","ConfigService","EmbeddedService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.a=s}).call(this,n(1))},function(t,e,n){"use strict";(function(t){var i=n(6),r=n(54),o=n.n(r);n(10);class s extends i.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p){super(t,e,i,r,s,a,c,u,h,d,f,p),this.$q=n,this.$timeout=o,this.GraphService=l,this.graphType=null,this.series=[],this.seriesColors=["blue","red","green","orange","purple","black"],this.seriesMarkers=["circle","square","diamond","triangle","triangle-down","circle"],this.activeSeries=null,this.isResetGraphButtonVisible=!1,this.isSelectSeriesVisible=!1,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.hideAllTrialsOnNewTrial=!0,this.showUndoButton=!1,this.isLegendEnabled=!0,this.hasCustomLegendBeenSet=!1,this.showTrialSelect=!0,this.chartId="chart1",this.width=null,this.height=null,this.trials=[],this.activeTrial=null,this.trialIdsToShow=[],this.selectedTrialsText="",this.studentDataVersion=2,this.canCreateNewTrials=!1,this.canDeleteTrials=!1,this.uploadedFileName=null,this.backgroundImage=null,this.mouseOverPoints=[],this.initialComponentState=null,this.undoStack=[],this.addNextComponentStateToUndoStack=!1,this.chartId="chart_"+this.componentId,this.hiddenCanvasId="hiddenCanvas_"+this.componentId,this.initializeComponentContentParams();const m=this.$scope.componentState;this.isStudentMode()?this.initializeStudentMode(m):"grading"===this.mode||"gradingRevision"===this.mode?this.initializeGradingMode(m):"onlyShowWork"===this.mode&&this.initializeOnlyShowWorkMode(),!this.isStudentMode()&&this.GraphService.componentStateHasStudentWork(m,this.componentContent)&&this.setStudentWork(m),this.initialComponentState=m,this.previousComponentState=m,this.canSubmit()||(this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.initializeHandleConnectedComponentStudentDataChanged(),this.initializeDeleteKeyPressedListener(),this.initializeFileUploadChanged(),this.initializeScopeGetComponentState(this.$scope,"graphController"),this.drawGraph().then(()=>{this.broadcastDoneRenderingComponent()})}initializeComponentContentParams(){this.graphType=this.componentContent.graphType,null==this.graphType&&(this.graphType="line"),null!=this.componentContent.canCreateNewTrials&&(this.canCreateNewTrials=this.componentContent.canCreateNewTrials),null!=this.componentContent.canDeleteTrials&&(this.canDeleteTrials=this.componentContent.canDeleteTrials),!1===this.componentContent.hideAllTrialsOnNewTrial&&(this.hideAllTrialsOnNewTrial=!1),this.componentContent.hideLegend&&(this.isLegendEnabled=!1),this.componentContent.hideTrialSelect&&(this.showTrialSelect=!1)}initializeStudentMode(t){this.isResetSeriesButtonVisible=!0,this.isSelectSeriesVisible=!0,this.backgroundImage=this.componentContent.backgroundImage,this.GraphService.componentStateHasStudentWork(t,this.componentContent)||this.newTrial(),this.UtilService.hasConnectedComponentAlwaysField(this.componentContent)?this.handleConnectedComponents():this.GraphService.componentStateHasStudentWork(t,this.componentContent)?this.setStudentWork(t):this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents()}initializeGradingMode(t){this.isResetSeriesButtonVisible=!1,this.isSelectSeriesVisible=!1,null!=t&&("gradingRevision"===this.mode?this.chartId="chart_gradingRevision_"+t.id:this.chartId="chart_"+t.id)}initializeOnlyShowWorkMode(){this.isResetGraphButtonVisible=!1,this.isResetSeriesButtonVisible=!1,this.isSelectSeriesVisible=!1,this.backgroundImage=this.componentContent.backgroundImage}initializeHandleConnectedComponentStudentDataChanged(){this.$scope.handleConnectedComponentStudentDataChanged=(t,e,n)=>{const i=t.type;"Table"===i?this.handleTableConnectedComponentStudentDataChanged(t,e,n):"Embedded"===i?this.handleEmbeddedConnectedComponentStudentDataChanged(t,e,n):"Animation"===i&&this.handleAnimationConnectedComponentStudentDataChanged(t,e,n)}}initializeDeleteKeyPressedListener(){this.deleteKeyPressedListenerDestroyer=this.$scope.$on("deleteKeyPressed",()=>{this.handleDeleteKeyPressed()})}initializeFileUploadChanged(){this.$scope.fileUploadChanged=t=>{let e=!0;this.activeSeries.data.length>0&&(confirm(this.$translate("graph.areYouSureYouWantToOverwriteTheCurrentLineData"))||(e=!1)),e&&this.uploadFileAndReadContent(t),t.value=null}}uploadFileAndReadContent(t){const e=t.files,n=new FileReader;n.onload=()=>{const t=n.result;this.readCSVIntoActiveSeries(t),this.setUploadedFileName(this.fileName),this.studentDataChanged()},n.scope=this,n.fileName=e[0].name,n.readAsText(e[0]),this.StudentAssetService.uploadAsset(e[0])}cleanupBeforeExiting(){this.deleteKeyPressedListenerDestroyer()}handleTableConnectedComponentStudentDataChanged(t,e,n){const i=n.studentData;if(null!=i&&null!=i.tableData){const t=i.tableData,n=this.convertRowDataToSeriesData(t,e);let r=e.seriesIndex;if(null==r&&(r=0),this.isStudentDataVersion1()){let t=this.series[r];null==t&&(t={},this.series[r]=t),t.data=n}else{const t=this.activeTrial;if(null!=t&&null!=t.series){let e=t.series[r];null==e&&(e={},this.series[r]=e),e.data=n}}this.drawGraph(),this.isDirty=!0}}handleEmbeddedConnectedComponentStudentDataChanged(t,e,n){const i=(n=this.UtilService.makeCopyOfJSONObject(n)).studentData;this.processConnectedComponentStudentData(i,e),this.studentDataChanged()}handleAnimationConnectedComponentStudentDataChanged(t,e,n){null!=n.t&&(this.setVerticalPlotLine(n.t),this.drawGraph())}handleNodeSubmit(){this.submit("nodeSubmitButton")}setupMouseMoveListener(){this.setupMouseMoveListenerDone||(t("#"+this.chartId).unbind(),t("#"+this.chartId).bind("mousedown",t=>{this.mouseDown=!0,this.mouseDownEventOccurred(t)}),t("#"+this.chartId).bind("mouseup",t=>{this.mouseDown=!1}),t("#"+this.chartId).bind("mousemove",t=>{this.mouseDown&&this.mouseDownEventOccurred(t)}),t("#"+this.chartId).bind("mouseleave",t=>{this.mouseDown=!1}),this.setupMouseMoveListenerDone=!0)}mouseDownEventOccurred(t){if(t.offsetX<10||t.offsetY<10)return;const e=this.handleMouseDownXPosition(t),n=this.handleMouseDownYPosition(t);if(this.componentContent.saveMouseOverPoints){const t=(new Date).getTime(),i=200;(null==this.lastSavedMouseMoveTimestamp||t-this.lastSavedMouseMoveTimestamp>i)&&(this.addMouseOverPoint(e,n),this.studentDataChanged(),this.lastSavedMouseMoveTimestamp=t)}}handleMouseDownXPosition(e){let n=t("#"+this.chartId).highcharts().xAxis[0].toValue(e.offsetX,!1);return n=this.makeSureXIsWithinXMinMaxLimits(n),this.componentContent.showMouseXPlotLine&&this.showXPlotLine(n),n}handleMouseDownYPosition(e){let n=t("#"+this.chartId).highcharts().yAxis[0].toValue(e.offsetY,!1);return n=this.makeSureYIsWithinYMinMaxLimits(n),this.componentContent.showMouseYPlotLine&&this.showYPlotLine(n),n}showXPlotLine(e,n){const i=t("#"+this.chartId).highcharts(),r=i.xAxis[0];r.removePlotLine("plot-line-x");const o={value:e,color:"red",width:4,id:"plot-line-x"};null!=n&&""!==n&&(o.label={text:n,verticalAlign:"top"}),r.addPlotLine(o),this.componentContent.highlightXRangeFromZero&&this.drawRangeRectangle(0,e,i.yAxis[0].min,i.yAxis[0].max)}drawRangeRectangle(t,e,n,i,r="black",o=".5",s="black",a=".1"){this.createRectangleIfNecessary(r,o,s,a),t=this.convertToXPixels(t),e=this.convertToXPixels(e),n=this.convertToYPixels(n),i=this.convertToYPixels(i),this.updateRectanglePositionAndSize(t,e,n,i)}convertToXPixels(e){return t("#"+this.chartId).highcharts().xAxis[0].translate(e)}convertToYPixels(e){return t("#"+this.chartId).highcharts().yAxis[0].translate(e)}createRectangleIfNecessary(e,n,i,r){if(null==this.rectangle){const o=t("#"+this.chartId).highcharts();this.rectangle=o.renderer.rect(0,0,0,0,0).css({stroke:e,strokeWidth:n,fill:i,fillOpacity:r}).add()}}updateRectanglePositionAndSize(e,n,i,r){const o=t("#"+this.chartId).highcharts();this.rectangle.attr({x:e+o.plotLeft,y:o.plotHeight+o.plotTop-r,width:n-e,height:r-i})}showYPlotLine(e,n){const i=t("#"+this.chartId).highcharts().yAxis[0];i.removePlotLine("plot-line-y");const r={value:e,color:"red",width:2,id:"plot-line-y"};null!=n&&""!==n&&(r.label={text:n,align:"right"}),i.addPlotLine(r)}clearPlotLines(){const t=Highcharts.charts[0];t.xAxis[0].removePlotLine("plot-line-x"),t.yAxis[0].removePlotLine("plot-line-y")}makeSureXIsWithinXMinMaxLimits(t){return t<this.xAxis.min&&(t=this.xAxis.min),t>this.xAxis.max&&(t=this.xAxis.max),t}makeSureYIsWithinYMinMaxLimits(t){return t<this.yAxis.min&&(t=this.yAxis.min),t>this.yAxis.max&&(t=this.yAxis.max),t}addMouseOverPoint(t,e){this.mouseOverPoints.push([t,e])}drawGraph(t){const e=this.$q.defer();return t?(this.clearChartConfig(),this.$timeout(()=>{this.drawGraphHelper(e)})):this.drawGraphHelper(e),e.promise}drawGraphHelper(t){const e=this.componentContent.title,n=this.setupXAxis(),i=this.setupYAxis();this.setupWidth(),this.setupHeight(),this.setupXAxisLimitSpacerWidth();let r=null;this.isTrialsEnabled()?(r=this.getSeriesFromTrials(this.trials),n.plotBands=this.getPlotBandsFromTrials(this.trials)):r=this.getSeries(),null==this.activeSeries&&this.setDefaultActiveSeries(),this.isDisabled&&this.setCanEditForAllSeries(r,!1),this.showUndoButton=!1,this.setAllSeriesFields(r),this.refreshSeriesIds(r),this.updateMinMaxAxisValues(r,n,i),null!=this.plotLines&&(n.plotLines=this.plotLines);const o=this.getZoomType();return this.chartConfig=this.createChartConfig(t,e,n,i,r,o),this.componentContent.useCustomLegend&&this.$timeout(()=>{this.setCustomLegend()}),t.promise}setupXAxis(){return null==this.xAxis&&null!=this.componentContent.xAxis&&(this.xAxis=this.UtilService.makeCopyOfJSONObject(this.componentContent.xAxis)),null!=this.xAxis&&(this.xAxis.allowDecimals=!1,this.xAxis.plotBands=null,null!=this.componentContent.xAxis&&null!=this.componentContent.xAxis.plotBands&&(this.xAxis.plotBands=this.componentContent.xAxis.plotBands)),this.xAxis}setupYAxis(){return null==this.yAxis&&null!=this.componentContent.yAxis&&(this.yAxis=this.UtilService.makeCopyOfJSONObject(this.componentContent.yAxis)),null!=this.yAxis&&(this.yAxis.allowDecimals=!1),this.yAxis}setupWidth(){null!=this.componentContent.width&&(this.width=this.componentContent.width)}setupHeight(){null!=this.componentContent.height&&(this.height=this.componentContent.height)}setupXAxisLimitSpacerWidth(){this.width>100?this.xAxisLimitSpacerWidth=this.width-100:this.xAxisLimitSpacerWidth=0}getSeriesFromTrials(t){let e=[];for(const n of t)n.show&&(e=e.concat(n.series));return e}getPlotBandsFromTrials(t){let e=[];for(const n of t)n.show&&null!=n.xAxis&&null!=n.xAxis.plotBands&&(e=e.concat(n.xAxis.plotBands));return e}refreshSeriesIds(t){this.clearSeriesIds(t),this.setSeriesIds(t)}setAllSeriesFields(t){for(const e of t)this.setSingleSeriesFields(e)}setSingleSeriesFields(t){t.canEdit&&this.isActiveSeries(t)?("line"===this.graphType||"scatter"===this.graphType?t.draggableX=!0:"column"===this.graphType&&(t.draggableX=!1),t.draggableY=!0,t.cursor="move",t.stickyTracking=!1,t.shared=!1,t.allowPointSelect=!0,t.enableMouseTracking=!0,this.showUndoButton=!0):(t.draggableX=!1,t.draggableY=!1,t.stickyTracking=!1,t.shared=!1,t.allowPointSelect=!1,t.enableMouseTracking=!1),!0===t.allowPointMouseOver&&(t.allowPointSelect=!0,t.enableMouseTracking=!0),this.isMousePlotLineOn()&&(t.enableMouseTracking=!0)}getZoomType(){return"grading"===this.mode||"gradingRevision"===this.mode?"xy":null}clearChartConfig(){this.chartConfig={chart:{options:{chart:{}}}}}createChartConfig(t,e,n,i,r,o){return{options:{legend:{enabled:this.isLegendEnabled},tooltip:{formatter:this.createTooltipFormatter()},chart:{width:this.width,height:this.height,type:this.graphType,zoomType:o,plotBackgroundImage:this.backgroundImage,events:{load:function(){t.resolve(this)},click:this.createGraphClickHandler()}},plotOptions:{series:{dragSensitivity:10,stickyTracking:!1,events:{legendItemClick:this.createLegendItemClickHandler()},point:{events:{drag:this.createPointDragEventHandler(),drop:this.createPointDropEventHandler()}}}},exporting:{buttons:{contextButton:{enabled:!1}}}},series:r,title:{text:e},xAxis:n,yAxis:i,loading:!1,func:this.createGraphCallbackHandler()}}createTooltipFormatter(){const t=this;return function(){let e="";if(t.isLimitXAxisType(t.xAxis)){e=t.getSeriesText(this.series);const n=t.getXTextForLimitGraph(this.series,this.x),i=t.getYTextForLimitGraph(this.series,this.y);e+=t.combineXTextAndYText(n,i)}else if(t.isCategoriesXAxisType(t.xAxis)){e=t.getSeriesText(this.series),e+=t.getXTextForCategoriesGraph(this.point,this.x)+" "+t.getYTextForCategoriesGraph(this.y)}return t.pointHasCustomTooltip(this.point)&&(e+="<br/>"+this.point.tooltip),e}}getXAxisUnits(t){return null!=t.xAxis&&null!=t.xAxis.userOptions&&null!=t.xAxis.userOptions.units?t.xAxis.userOptions.units:""}getYAxisUnits(t){return null!=t.yAxis&&null!=t.yAxis.userOptions&&null!=t.yAxis.userOptions.units?t.yAxis.userOptions.units:""}isLimitXAxisType(t){return"limits"===t.type}isCategoriesXAxisType(t){return"categories"===t.type}getSeriesText(t){let e="";return""!==t.name&&(e="<b>"+t.name+"</b><br/>"),e}getXTextForLimitGraph(t,e){let n=this.performRounding(e),i=this.getXAxisUnits(t);return null!=i&&""!==i&&(n+=" "+i),n}getYTextForLimitGraph(t,e){let n=this.performRounding(e),i=this.getYAxisUnits(this.series);return null!=i&&""!==i&&(n+=" "+i),n}combineXTextAndYText(t,e){let n=t;return""!==t&&(n+=", "),n+=e}getXTextForCategoriesGraph(t,e){const n=this.getCategoryByIndex(t.index);return null!=n?n:this.performRounding(e)}getYTextForCategoriesGraph(t){return this.performRounding(t)}pointHasCustomTooltip(t){return null!=t.tooltip&&""!==t.tooltip}createGraphClickHandler(){const t=this;return function(e){if("line"===t.graphType||"scatter"===t.graphType){if(t.isIgnoreClickEvent())return;t.handleGraphClickEvent(e,this.series)}}}isIgnoreClickEvent(){const t=(new Date).getTime();return null!=this.lastDropTime&&t-this.lastDropTime<100}handleGraphClickEvent(t,e){if(!this.isDisabled){const n=this.activeSeries;if(null!=n&&this.canEdit(n)){const i=n.id;for(const t of e)if(i===t.options.id&&!t.visible)return void alert(this.$translate("graph.studentAddingPointToHiddenSeriesMessage"));const r=this.performRounding(t.xAxis[0].value),o=this.performRounding(t.yAxis[0].value);this.addPointToSeries(n,r,o),this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()}else this.isMousePlotLineOn()||alert(this.$translate("graph.youCanNotEditThisSeriesPleaseChooseASeriesThatCanBeEdited"))}}createLegendItemClickHandler(){const t=this;return function(e){const n=!0===t.componentContent.canStudentHideSeriesOnLegendClick;if(n){for(const e of this.yAxis.series){let n=t.getSeriesById(e.userOptions.id);this.userOptions.id===n.id?n.show=!e.visible:n.show=e.visible}t.studentDataChanged()}return n}}createPointDragEventHandler(){const t=this;return function(e){if(!t.isDisabled){const e=t.activeSeries;t.canEdit(e)&&(t.dragging=!0)}}}createPointDropEventHandler(){const t=this;return function(e){if(!t.isDisabled&&t.dragging){const n=t.activeSeries;t.dragging=!1,t.lastDropTime=(new Date).getTime();const i=e.target,r=t.performRounding(i.x),o=t.performRounding(i.y),s=i.index,a=n.data;t.isLimitXAxisType(t.xAxis)?a[s]=[r,o]:t.isCategoriesXAxisType(t.xAxis)&&(a[s]=o),t.addNextComponentStateToUndoStack=!0,t.studentDataChanged()}}}createGraphCallbackHandler(){const t=this;return function(e){t.$timeout(function(){t.showXPlotLineIfOn("Drag Me"),t.showYPlotLineIfOn("Drag Me"),(t.isMouseXPlotLineOn()||t.isMouseYPlotLineOn()||t.isSaveMouseOverPoints())&&t.setupMouseMoveListener(),e.reflow()},1e3)}}setCustomLegend(){if(!this.hasCustomLegendBeenSet){if(t(".highcharts-legend").length>0){if(-1!==navigator.userAgent.indexOf("Firefox")){const e=/(translate\()(\d*)(,\s*\d*\))/,n=t(".highcharts-legend").attr("transform").replace(e,"$10$3");t(".highcharts-legend").attr("transform",n)}else{const e=/(matrix\(\d*,\s*\d*,\s*\d*,\s*\d*,\s*)(\d*)(,\s*\d*\))/,n=t(".highcharts-legend").css("transform").replace(e,"$10$3");t(".highcharts-legend").css("transform",n)}t(".highcharts-legend").html(this.componentContent.customLegend)}this.hasCustomLegendBeenSet=!0}}addPointToSeries(t,e,n){const i=t.data;this.isCategoriesXAxisType(this.componentContent.xAxis)?i[e]=n:i.push([e,n])}removePointFromSeries(t,e){const n=t.data;for(let t=0;t<n.length;t++){e===n[t][0]&&(n.splice(t,1),t--)}}canEdit(t){return t.canEdit}setSeries(t){this.series=t}getSeries(){return this.series}setSeriesByIndex(t,e){this.series[e]=t}getSeriesByIndex(t){return this.series[t]}setTrials(t){this.trials=t}getTrials(){return this.trials}getTrialIndex(t){for(let e=0;e<this.trials.length;e++){if(t===this.trials[e])return e}return-1}setActiveTrialByIndex(t){this.activeTrial=this.trials[t]}canEditTrial(t){let e=t.series;for(const t of e)if(t.canEdit)return!0;return!1}showSelectActiveTrials(){let t=0;for(const e of this.trials)if(this.canEditTrial(e)&&e.show&&++t>1)return!0;return!1}setXAxis(t){this.xAxis=this.UtilService.makeCopyOfJSONObject(t)}getXAxis(){return this.xAxis}setYAxis(t){this.yAxis=this.UtilService.makeCopyOfJSONObject(t)}getYAxis(){return this.yAxis}setActiveSeries(t){this.activeSeries=t}setActiveSeriesByIndex(t){const e=this.getSeriesByIndex(t);this.setActiveSeries(e)}resetGraph(){this.setSeries(this.UtilService.makeCopyOfJSONObject(this.componentContent.series)),null!=this.componentContent.xAxis&&this.setXAxis(this.componentContent.xAxis),null!=this.componentContent.yAxis&&this.setYAxis(this.componentContent.yAxis),this.setActiveSeries(null),this.backgroundImage=this.componentContent.backgroundImage,this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()}resetSeries(){let t="";const e=this.activeSeries.name;t=""===e?this.$translate("graph.areYouSureYouWantToResetTheSeries"):this.$translate("graph.areYouSureYouWantToResetTheNamedSeries",{seriesName:e}),confirm(t)&&this.resetSeriesHelper()}resetSeriesHelper(){if(this.UtilService.hasConnectedComponent(this.componentContent)){this.newTrial();const t=!0;this.handleConnectedComponents(t)}else{const t=this.getSeriesIndex(this.activeSeries);let e=this.componentContent.series[t];null!=e&&(e=this.UtilService.makeCopyOfJSONObject(e),this.setSeriesByIndex(e,t),this.setActiveSeriesByIndex(t),null!=this.componentContent.xAxis&&this.setXAxis(this.componentContent.xAxis),null!=this.componentContent.yAxis&&this.setYAxis(this.componentContent.yAxis),this.backgroundImage=this.componentContent.backgroundImage,this.addNextComponentStateToUndoStack=!0,this.studentDataChanged())}}setStudentWork(t){const e=t.studentData;if(this.isStudentDataVersion1(e.version))this.studentDataVersion=1,this.setSeries(this.UtilService.makeCopyOfJSONObject(e.series));else if(this.studentDataVersion=e.version,null!=e.trials&&e.trials.length>0){const t=this.UtilService.makeCopyOfJSONObject(e.trials);this.setTrials(t);const n=e.activeTrialIndex;null==n?t.length>0&&this.setActiveTrialByIndex(e.trials.length-1):this.setActiveTrialByIndex(n),null!=this.activeTrial&&null!=this.activeTrial.series&&(this.series=this.activeTrial.series)}this.setTrialIdsToShow(),null!=e.xAxis&&this.setXAxis(e.xAxis),null!=e.yAxis&&this.setYAxis(e.yAxis),this.setActiveSeriesByIndex(e.activeSeriesIndex),null!=e.backgroundImage&&(this.backgroundImage=e.backgroundImage);const n=e.submitCounter;null!=n&&(this.submitCounter=n),null!=e.mouseOverPoints&&e.mouseOverPoints.length>0&&(this.mouseOverPoints=e.mouseOverPoints),this.processLatestStudentWork()}activeSeriesChanged(){this.studentDataChanged(!0)}studentDataChanged(t){this.isDirty=!0,this.emitComponentDirty(!0),this.isSubmitDirty=!0,this.emitComponentSubmitDirty(!0),this.clearSaveText(),this.drawGraph(t);this.createComponentState("change").then(t=>{this.addNextComponentStateToUndoStack&&(null!=this.previousComponentState&&this.undoStack.push(this.previousComponentState),this.previousComponentState=t,this.addNextComponentStateToUndoStack=!1),this.$timeout(()=>{this.emitComponentStudentDataChanged(t)},100)})}createComponentState(t){const e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={};if(i.version=this.studentDataVersion,this.isStudentDataVersion1())i.series=this.UtilService.makeCopyOfJSONObject(this.getSeries());else if(null!=this.trials){i.trials=this.UtilService.makeCopyOfJSONObject(this.trials);const t=this.getTrialIndex(this.activeTrial);i.activeTrialIndex=t}i.xAxis=this.UtilService.makeCopyOfJSONObject(this.getXAxis()),delete i.xAxis.plotBands,null!=this.componentContent.xAxis&&null!=this.componentContent.xAxis.plotBands&&(i.xAxis.plotBands=this.componentContent.xAxis.plotBands),i.yAxis=this.getYAxis();const r=this.getSeriesIndex(this.activeSeries);null!=r&&(i.activeSeriesIndex=r);const o=this.getUploadedFileName();return null!=o&&(i.uploadedFileName=o),null!=this.backgroundImage&&(i.backgroundImage=this.backgroundImage),i.submitCounter=this.submitCounter,0!==this.mouseOverPoints.length&&(i.mouseOverPoints=this.mouseOverPoints),n.isSubmit=this.isSubmit,n.studentData=i,n.componentType="Graph",n.nodeId=this.nodeId,n.componentId=this.componentId,this.isSubmit=!1,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}createComponentStateAdditionalProcessing(t,e,n){if(this.ProjectService.hasAdditionalProcessingFunctions(this.nodeId,this.componentId)){const i=this.ProjectService.getAdditionalProcessingFunctions(this.nodeId,this.componentId);let r=[];for(const t of i){const i=this.$q.defer(),o=i.promise;r.push(o),t(i,e,n)}this.$q.all(r).then(()=>{t.resolve(e)})}else t.resolve(e)}showPrompt(){return!0===this.isPromptVisible}showResetGraphButton(){return!0===this.isResetGraphButtonVisible}showResetSeriesButton(){return!0===this.isResetSeriesButtonVisible}getSeriesIndex(t){const e=this.getSeries();for(let n=0;n<e.length;n++){if(t===e[n])return n}return null}getSeriesByIndex(t){return this.getSeries()[t]}getSeriesById(t){for(const e of this.getSeries())if(e.id===t)return e;return null}getTrialsFromClassmates(t,e,n){const i=this.$q.defer();return this.StudentDataService.getClassmateStudentWork(t,e,n).then(n=>{const r=[];for(const i of n)r.push(this.getTrialsFromComponentState(t,e,i));this.$q.all(r).then(t=>{const e=[];for(const n of t)for(const t of n)e.push(t);i.resolve(e)})}),i.promise}getTrialsFromComponentState(t,e,n){const i=this.$q.defer(),r=[],o=this.ProjectService.getNodePositionAndTitleByNodeId(t),s=n.studentData;if(this.isStudentDataVersion1(s.version)){const t=s.series,e={id:this.UtilService.generateKey(10),name:o,show:!0,series:t};r.push(e)}else{const t=s.trials;if(null!=t)for(const e of t){const t=this.UtilService.makeCopyOfJSONObject(e);t.name=o,t.show=!0,r.push(t)}}return i.resolve(r),i.promise}attachStudentAsset(t){this.StudentAssetService.copyAssetForReference(t).then(t=>{this.StudentAssetService.getAssetContent(t).then(e=>{const n=this.StudentDataService.CSVToArray(e),i=this.convertRowDataToSeriesData(n,{skipFirstRow:!0,xColumn:0,yColumn:1}),r=this.series.length,o={name:t.fileName,color:this.seriesColors[r],marker:{symbol:this.seriesMarkers[r]},canEdit:!1};this.series[r]=o,o.data=i,this.isDirty=!0,this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()})})}convertRowDataToSeriesData(t,e){const n=[];let i=this.getSkipFirstRowValue(e),r=this.getXColumnValue(e),o=this.getYColumnValue(e);for(let e=0;e<t.length;e++){if(i&&0===e)continue;const s=t[e],a=s[r],l=s[o];null!=a&&null!=l&&this.addPointFromTableIntoData(a,l,n)}return n}getSkipFirstRowValue(t){return null!=t&&t.skipFirstRow}getXColumnValue(t){return null==t||null==t.xColumn?0:t.xColumn}getYColumnValue(t){return null==t||null==t.yColumn?1:t.yColumn}addPointFromTableIntoData(t,e,n){let i=t.text,r=e.text;if(null!=i&&""!==i&&null!=r&&""!==r){const t=Number(i),e=Number(r),o=[];isNaN(t)?o.push(i):o.push(t),isNaN(e)?o.push(r):o.push(e),n.push(o)}}setSeriesIds(t){const e=this.getAllUsedSeriesIds(t);for(const n of t)if(null==n.id){const t=this.getNextSeriesId(e);n.id=t,e.push(t)}}getAllUsedSeriesIds(t){const e=[];for(const n of t)e.push(n.id);return e}getNextSeriesId(t){let e=null,n=0,i=!1;for(;!i;){const r="series-"+n;-1===t.indexOf(r)?(e=r,i=!0):n++}return e}handleDeleteKeyPressed(){const e=this.activeSeries;if(this.canEdit(e)){const n=t("#"+this.chartId).highcharts().getSelectedPoints();let i=null;if(null!=n){const t=[],r=e.data;for(const e of n){const n=r[i=e.index];null!=n&&(n[0]!==e.x&&n[1]!==e.y||t.push(i))}t.sort().reverse();for(let e=0;e<t.length;e++)r.splice(t[e],1);this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()}}}createNewSeries(){return{name:"",data:[],marker:{symbol:"circle"},canEdit:!0}}isActiveSeries(t){const e=this.getSeriesIndex(t);return this.isActiveSeriesIndex(e)}isActiveSeriesIndex(t){return this.series.indexOf(this.activeSeries)===t}isShowSelectSeriesInput(){return this.trialIdsToShow.length&&this.hasEditableSeries()&&this.isSelectSeriesVisible&&this.series.length>1}newTrialButtonClicked(){this.newTrial(),this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()}newTrial(){const t=this.getSeriesIndex(this.activeSeries),e=this.getTrialNumbers();let n=0;if(e.length>0&&(n=e[e.length-1]),this.hideAllTrialsOnNewTrial)for(const t of this.trials)t.show=!1;const i=this.UtilService.makeCopyOfJSONObject(this.componentContent.series),r={name:this.$translate("graph.trial")+" "+(n+1),series:i,show:!0,id:this.UtilService.generateKey(10)};this.trials.push(r),this.activeTrial=r,this.series=i,null==this.activeSeries?this.setDefaultActiveSeries():this.setActiveSeriesByIndex(t),this.setTrialIdsToShow()}getTrialNumbers(){const t=[],e=/Trial (\d*)/;for(const n of this.trials){const i=n.name,r=e.exec(i);if(null!=r&&r.length>0){const e=r[1];t.push(parseInt(e))}}return t.sort(),t}deleteTrial(t){const e=this.trials[t],n=e.id;this.trials.splice(t,1);for(let t=0;t<this.trialIdsToShow.length;t++)n===this.trialIdsToShow[t]&&this.trialIdsToShow.splice(t,1);0===this.trials.length?(this.newTrial(),this.setXAxis(this.componentContent.xAxis),this.setYAxis(this.componentContent.yAxis)):this.trials.length>0&&e===this.activeTrial&&this.makeHighestTrialActive(),this.setTrialIdsToShow(),this.addNextComponentStateToUndoStack=!0,this.studentDataChanged(),this.selectedTrialsText=this.getSelectedTrialsText()}makeHighestTrialActive(){this.activeTrial=null,this.activeSeries=null,this.series=[];const t=this.getHighestTrial();if(null!=t){const e=this.getSeriesIndex(this.activeSeries);this.activeTrial=t,this.setSeries(this.activeTrial.series),null!=e&&this.setActiveSeriesByIndex(e)}}getHighestTrial(){let t=null,e=null;for(const n of this.trialIdsToShow){const i=this.getTrialById(n),r=this.getTrialIndex(i);(null==t||r>t)&&(t=r,e=i)}return e}activeTrialChanged(){const t=this.getSeriesIndex(this.activeSeries),e=this.activeTrial;this.series=e.series,this.setActiveSeriesByIndex(t),this.addNextComponentStateToUndoStack=!0,this.studentDataChanged()}trialIdsToShowChanged(){this.showOrHideTrials(this.trialIdsToShow),this.setActiveTrialAndSeriesByTrialIdsToShow(this.trialIdsToShow);for(let t=0;t<this.trialIdsToShow.length;t++){const e=this.trialIdsToShow[t];this.getTrialById(e)||this.trialIdsToShow.splice(t,1)}this.UtilService.arraysContainSameValues(this.previousTrialIdsToShow,this.trialIdsToShow)||(this.trialIdsToShow=this.trialIdsToShow,this.studentDataChanged()),this.previousTrialIdsToShow=this.UtilService.makeCopyOfJSONObject(this.trialIdsToShow),this.selectedTrialsText=this.getSelectedTrialsText()}showOrHideTrials(t){for(const e of this.trials)-1!==t.indexOf(e.id)?e.show=!0:(e.show=!1,null!=this.activeTrial&&this.activeTrial.id===e.id&&(this.activeTrial=null,this.activeSeries=null,this.series=[]))}setActiveTrialAndSeriesByTrialIdsToShow(t){if(t.length>0){const e=t[t.length-1],n=this.getTrialById(e);if(this.hasEditableSeries(n.series)){this.activeTrial=n;let t=this.getSeriesIndex(this.activeSeries);this.isSeriesEditable(this.activeTrial.series,t)||(t=this.getLatestEditableSeriesIndex(this.activeTrial.series)),this.setSeries(this.activeTrial.series),null!=t&&this.setActiveSeriesByIndex(t)}}}isSeriesEditable(t,e){return null!=t[e]&&t[e].canEdit}getLatestEditableSeriesIndex(t){for(let e=t.length-1;e>=0;e--)if(t[e].canEdit)return e;return null}setTrialIdsToShow(){const t=[];for(const e of this.trials)e.show&&t.push(e.id);this.trialIdsToShow=t}getSelectedTrialsText(){if(1===this.trialIdsToShow.length){const t=this.trialIdsToShow[0];return this.getTrialById(t).name}return this.trialIdsToShow.length>1?this.trialIdsToShow.length+" "+this.$translate("graph.trialsShown"):this.$translate("graph.selectTrialsToShow")}processConnectedComponentStudentData(t,e){if(null==e.fields)this.parseLatestTrial(t,e);else for(const n of e.fields){const i=n.name,r=n.when,o=n.action,s=!1;"firstTime"===r&&!0===s||"always"===r&&("write"===o||"read"===o&&this.readConnectedComponentFieldFromStudentData(t,e,i))}}readConnectedComponentFieldFromStudentData(t,e,n){if("selectedCells"===n){let e=t[n];if(null!=e){let t=this.convertSelectedCellsToTrialIds(e);for(let e of this.trials)t.includes(e.id)?e.show=!0:e.show=!1}}else"trial"===n?this.parseLatestTrial(t,e):"trialIdsToDelete"===n&&this.deleteTrialsByTrialId(t.trialIdsToDelete)}deleteTrialsByTrialId(t){if(null!=t)for(let e of t)this.deleteTrialId(e)}deleteTrialId(t){for(let e=0;e<this.trials.length;e++){if(this.trials[e].id===t){this.trials.splice(e,1);break}}}parseLatestTrial(t,e){const n=this.getLatestStudentDataTrial(t),i=n.id;this.removeDefaultTrialIfNecessary(i);const r=this.createNewTrialIfNecessary(i);this.copySeriesIntoTrial(n,r,t,e),this.copyTrialNameIntoTrial(n,r),this.copyPlotBandsIntoTrial(n,r),this.setLastTrialToActive(),null!=t.xPlotLine&&this.showXPlotLine(t.xPlotLine),this.setTrialIdsToShow(),this.activeTrialChanged()}getLatestStudentDataTrial(t){let e=null;return null!=t.trial&&(e=t.trial),null!=t.trials&&t.trials.length>0&&(e=t.trials[t.trials.length-1]),e}hideAllTrials(){for(const t of this.trials)t.show=!1}createNewTrial(t){return{id:t,name:"",series:[],show:!0}}copySeries(t){const e={name:t.name,data:t.data,color:t.color,canEdit:!1,allowPointSelect:!1};return null!=t.marker&&(e.marker=t.marker),null!=t.dashStyle&&(e.dashStyle=t.dashStyle),null!=t.allowPointMouseOver&&(e.allowPointMouseOver=t.allowPointMouseOver),e}removeDefaultTrialIfNecessary(t){if(this.trials.length>0){const e=this.trials[0];this.isTrialHasEmptySeries(e)&&(null!=e.id&&e.id===t||this.deleteFirstTrial(this.trials))}}isTrialHasEmptySeries(t){return null==t.series||0===t.series.length||this.isSeriesEmpty(t.series)}isSeriesEmpty(t){return 1===t.length&&0===t[0].data.length}deleteFirstTrial(t){t.shift()}createNewTrialIfNecessary(t){let e=this.getTrialById(t);return null==e&&(this.hideAllTrialsOnNewTrial&&this.hideAllTrials(),(e=this.createNewTrial(t)).show=!0,this.setXAxis(this.componentContent.xAxis),this.setYAxis(this.componentContent.yAxis),this.trials.push(e)),e}copySeriesIntoTrial(t,e,n,i){e.series=[];const r=t.series;for(let t=0;t<r.length;t++)this.isAddSeries(i,t)&&(e.series.push(this.copySeries(r[t])),i.highlightLatestPoint&&this.$timeout(()=>{this.highlightPointOnX(n.trial.id,n.xPointToHighlight)},1))}isAddSeries(t,e){return null==t||null==t.seriesNumbers||0===t.seriesNumbers.length||null!=t.seriesNumbers&&-1!==t.seriesNumbers.indexOf(e)}copyTrialNameIntoTrial(t,e){null!=t.name&&(e.name=t.name)}copyPlotBandsIntoTrial(t,e){null!=t.xAxis&&null!=t.xAxis.plotBands&&(null==e.xAxis&&(e.xAxis={}),e.xAxis.plotBands=t.xAxis.plotBands)}setLastTrialToActive(){this.trials.length>0&&(this.activeTrial=this.trials[this.trials.length-1],this.activeTrial.show=!0)}getTrialById(t){for(const e of this.trials)if(e.id===t)return e;return null}hasEditableSeries(t=this.getSeries()){for(const e of t)if(e.canEdit)return!0;return!1}updateMinMaxAxisValues(t,e,n){const i=this.getMinMaxValues(t);this.updateXAxisMinMaxIfNecessary(e,i),this.updateYAxisMinMaxIfNecessary(n,i)}updateXAxisMinMaxIfNecessary(t,e){null==t||t.locked||(e.xMin<t.min&&(t.min=null,t.minPadding=.2),e.xMax>=t.max&&(t.max=null,t.maxPadding=.2))}updateYAxisMinMaxIfNecessary(t,e){null==t||t.locked||(e.yMin<t.min&&(t.min=null,t.minPadding=.2),e.yMax>=t.max&&(t.max=null,t.maxPadding=.2))}getMinMaxValues(t){let e=0,n=0,i=0,r=0;for(const o of t){const t=o.data;for(const o of t)if(null!=o){let t=null,s=null;"Object"===o.constructor.name?(t=o.x,s=o.y):"Array"===o.constructor.name?(t=o[0],s=o[1]):"Number"===o.constructor.name&&(s=o),t>n&&(n=t),t<e&&(e=t),s>r&&(r=s),s<i&&(i=s)}}return{xMin:e,xMax:n,yMin:i,yMax:r}}clearSeriesIds(t){for(const e of t)e.id=null}snipGraph(e){const n=t("#"+this.chartId).highcharts().getSVG(),i=document.getElementById(this.hiddenCanvasId);o()(i,n,{renderCallback:()=>{const t=i.toDataURL("image/png"),n=this.UtilService.getImageObjectFromBase64String(t);this.NotebookService.addNote(e,n)}})}readCSVIntoActiveSeries(t){const e=t.split(/\r\n|\n/);this.activeSeries.data=[];for(const t of e){const e=t.split(","),n=parseFloat(e[0]),i=parseFloat(e[1]);if(!isNaN(n)&&!isNaN(i)){const t=[n,i];this.activeSeries.data.push(t)}}}setUploadedFileName(t){this.uploadedFileName=t}getUploadedFileName(){return this.uploadedFileName}convertSeriesDataPoints(t,e){const n=t.data,i=[];for(let t=0;t<n.length;t++){const r=n[t];null==e||""===e||"limits"===e?Array.isArray(r)?i.push(r):i.push([t+1,r]):"categories"===e&&(Array.isArray(r)?i.push(r[1]):i.push(r))}t.data=i}performRounding(t){return"integer"===this.componentContent.roundValuesTo?t=this.roundToNearestInteger(t):"tenth"===this.componentContent.roundValuesTo?t=this.roundToNearestTenth(t):"hundredth"===this.componentContent.roundValuesTo&&(t=this.roundToNearestHundredth(t)),t}roundToNearestInteger(t){return t=parseFloat(t),t=Math.round(t)}roundToNearestTenth(t){return t=parseFloat(t),t=Math.round(10*t)/10}roundToNearestHundredth(t){return t=parseFloat(t),t=Math.round(100*t)/100}setDefaultActiveSeries(){for(let t=0;t<this.series.length;t++){if(this.series[t].canEdit){this.setActiveSeriesByIndex(t);break}}null==this.activeSeries&&this.series.length>0&&this.setActiveSeriesByIndex(0)}setVerticalPlotLine(t){const e={color:"red",width:2,value:t,zIndex:5};this.plotLines=[e],this.$timeout(()=>{this.$scope.$apply()})}handleConnectedComponents(t){const e=[];let n=null;for(const t of this.componentContent.connectedComponents){const i=t.type;"showClassmateWork"===i?n=this.handleShowClassmateWorkConnectedComponent(t,e):"showWork"!==i&&"importWork"!==i&&null!=i||(n=this.handleShowOrImportWorkConnectedComponent(t,e))}this.$q.all(e).then(this.handleConnectedComponentPromiseResults(n,t))}handleShowClassmateWorkConnectedComponent(t,e){const n=t.nodeId,i=t.componentId;let r=null;if(this.isDisabled=!0,this.ConfigService.isPreview()){const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(n,i);null!=t&&(e.push(this.getTrialsFromComponentState(n,i,t)),null!=t&&null!=t.studentData&&null!=t.studentData.backgroundImage&&(r=t.studentData.backgroundImage))}else{const o=t.showClassmateWorkSource;e.push(this.getTrialsFromClassmates(n,i,o));let s=this.ProjectService.getComponentByNodeIdAndComponentId(n,i);r=(s=this.ProjectService.injectAssetPaths(s)).backgroundImage}return r}handleShowOrImportWorkConnectedComponent(t,e){const n=t.nodeId,i=t.componentId;let r=null,o=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(n,i);if(null!=o)if("ConceptMap"===o.componentType||"Draw"===o.componentType||"Label"===o.componentType){!0===this.UtilService.getConnectedComponentByComponentState(this.componentContent,o).importWorkAsBackground&&e.push(this.setComponentStateAsBackgroundImage(o))}else{if("showWork"===t.type){o=this.UtilService.makeCopyOfJSONObject(o);const t=!1;this.setCanEditForAllSeriesInComponentState(o,t)}e.push(this.getTrialsFromComponentState(n,i,o)),null!=o&&null!=o.studentData&&null!=o.studentData.backgroundImage&&(r=o.studentData.backgroundImage)}return r}handleConnectedComponentPromiseResults(t,e){return n=>{const i=[];let r=0,o=0;for(const e of n)if(e instanceof Array){const t=e;for(const e of t)this.canEditTrial(e)&&(o=r),i.push(e),r++}else"string"==typeof e&&(t=e);o=this.addTrialFromThisComponentIfNecessary(i,r,o);let s=this.NodeService.createNewComponentState();s.studentData={trials:i,activeTrialIndex:o,activeSeriesIndex:0,version:2},null!=this.componentContent.backgroundImage&&""!==this.componentContent.backgroundImage?s.studentData.backgroundImage=this.componentContent.backgroundImage:null!=t&&(s.studentData.backgroundImage=t),s=this.handleConnectedComponentsHelper(s,e),this.setStudentWork(s),this.studentDataChanged()}}addTrialFromThisComponentIfNecessary(t,e,n){if(this.componentContent.series.length>0){const i=this.createNewTrial(this.UtilService.generateKey(10));i.name=this.$translate("graph.trial")+" "+e,i.series=this.UtilService.makeCopyOfJSONObject(this.componentContent.series),t.push(i),this.canEditTrial(i)&&(n=e)}return n}setComponentStateAsBackgroundImage(t){return this.UtilService.generateImageFromComponentState(t).then(t=>t.url)}handleConnectedComponentsHelper(t,e){let n=this.$scope.componentState,i=!0;null==n||e||!this.GraphService.componentStateHasStudentWork(n)?n=t:i=!1;for(const e of this.componentContent.connectedComponents){const r=e.nodeId,o=e.componentId,s=e.type;if("showClassmateWork"===s)n=t;else if("importWork"===s||null==s){const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(r,o),s=e.fields;null!=t?"Graph"!==t.componentType&&(n=this.mergeComponentState(n,t,s,i)):n=this.mergeNullComponentState(n,s,i)}}return null==n.studentData.version&&(n.studentData.version=this.studentDataVersion),null!=t.studentData.backgroundImage&&(n.studentData.backgroundImage=t.studentData.backgroundImage),n}mergeComponentState(t,e,n,i){if(null==n)"Graph"===e.componentType&&i&&(t.studentData=this.UtilService.makeCopyOfJSONObject(e.studentData));else for(const r of n){const n=r.name,o=r.when,s=r.action;"firstTime"===o&&i?"write"===s&&(t.studentData[n]=e.studentData[n]):"always"===o&&("write"===s?t.studentData[n]=e.studentData[n]:"read"===s&&this.readConnectedComponentField(t,e,n))}return t}mergeNullComponentState(t,e,n){if(null==e);else for(const i of e){const e=i.name,r=i.when,o=i.action;if("firstTime"===r&&1==n);else if("always"===r)if("write"===o);else if("read"===o){const n=null;this.readConnectedComponentField(t,n,e)}}return t}readConnectedComponentField(t,e,n){if("selectedCells"===n)if(null==e)for(const e of t.studentData.trials)e.show=!1;else{const i=e.studentData[n],r=this.convertSelectedCellsToTrialIds(i);for(const e of t.studentData.trials)r.includes(e.id)?e.show=!0:e.show=!1}}setCanEditForAllSeriesInComponentState(t,e){for(const n of t.studentData.trials)this.setCanEditForAllSeries(n.series,e)}setCanEditForAllSeries(t,e){for(const n of t)n.canEdit=e}undoClicked(){if(this.undoStack.length>0){const t=this.undoStack.pop();this.setStudentWork(t),this.previousComponentState=t,this.drawGraph()}else null==this.initialComponentState&&(this.previousComponentState=null,this.trials=[],this.newTrial(),this.resetSeriesHelper(),this.drawGraph())}trialCheckboxClicked(){this.addNextComponentStateToUndoStack=!0}getCategoryByIndex(t){return null!=this.componentContent.xAxis&&null!=this.componentContent.xAxis.categories&&t<this.componentContent.xAxis.categories.length?this.componentContent.xAxis.categories[t]:null}isMousePlotLineOn(){return this.isMouseXPlotLineOn()||this.isMouseYPlotLineOn()}isMouseXPlotLineOn(){return this.componentContent.showMouseXPlotLine}isMouseYPlotLineOn(){return this.componentContent.showMouseYPlotLine}isSaveMouseOverPoints(){return this.componentContent.saveMouseOverPoints}getXValueFromDataPoint(t){return"Object"===t.constructor.name?t.x:"Array"===t.constructor.name?t[0]:null}getYValueFromDataPoint(t){return"Object"===t.constructor.name?t.y:"Array"===t.constructor.name?t[1]:null}getLatestMouseOverPointX(){return this.mouseOverPoints.length>0?this.getXValueFromDataPoint(this.mouseOverPoints[this.mouseOverPoints.length-1]):null}getLatestMouseOverPointY(){return this.mouseOverPoints.length>0?this.getYValueFromDataPoint(this.mouseOverPoints[this.mouseOverPoints.length-1]):null}showXPlotLineIfOn(t=null){if(this.isMouseXPlotLineOn()){let e=this.getLatestMouseOverPointX();null==e&&(e=0),this.showXPlotLine(e,t)}}showYPlotLineIfOn(t=null){if(this.isMouseYPlotLineOn()){let e=this.getLatestMouseOverPointY();null==e&&(e=0),this.showYPlotLine(e,t)}}showTooltipOnX(e,n){const i=t("#"+this.chartId).highcharts();if(i.series.length>0){let t=null;if(null==e)t=i.series[i.series.length-1];else for(const n of i.series)n.userOptions.name===e&&(t=n);const r=t.points;for(const t of r)t.x===n&&i.tooltip.refresh(t)}}highlightPointOnX(e,n){const i=t("#"+this.chartId).highcharts();if(i.series.length>0){let t=null;if(null==e)t=i.series[i.series.length-1];else for(const n of i.series)n.userOptions.name===e&&(t=n),this.removeHoverStateFromPoints(n.points);this.setHoverStateOnPoint(t.points,n)}}removeHoverStateFromPoints(t){for(const e of t)e.setState("")}setHoverStateOnPoint(t,e){for(const n of t)n.x===e&&n.setState("hover")}showTooltipOnLatestPoint(){const e=t("#"+this.chartId).highcharts();if(e.series.length>0){const t=e.series[e.series.length-1].points;if(t.length>0){const n=t[t.length-1];e.tooltip.refresh(n)}}}convertSelectedCellsToTrialIds(t){const e=[];if(null!=t)for(const n of t){const t=n.material,i=n.bevTemp,r=(n.airTemp,t+"-"+i+"Liquid");e.push(r)}return e}isTrialsEnabled(){return!0===this.componentContent.enableTrials}isStudentDataVersion1(t){return null==t?null==this.studentDataVersion||1===this.studentDataVersion:1===t}}s.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","$timeout","AnnotationService","ConfigService","GraphService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.a=s}).call(this,n(1))},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(r=this).$q=e,r.$rootScope=n}var e,n,o;return e=t,(n=[{key:"request",value:function(t){return t}},{key:"requestError",value:function(t){return r.$q.reject(t)}},{key:"response",value:function(t){return r.$rootScope.$broadcast("serverConnected"),t}},{key:"responseError",value:function(t){return-1!==t.status&&500!==t.status&&503!==t.status&&504!==t.status||r.$rootScope.$broadcast("serverDisconnected"),r.$q.reject(t)}}])&&i(e.prototype,n),o&&i(e,o),t}();o.$inject=["$q","$rootScope"];var s=o;e.default=s},function(t,e,n){"use strict";(function(t,i){var r=n(6);n(29),n(10);class o extends r.a{constructor(e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v){super(e,n,r,o,l,c,h,d,p,m,g,v),this.$q=i,this.$timeout=s,this.$window=a,this.LabelService=u,this.OpenResponseService=f,this.isNewLabelButtonVisible=!0,this.isCancelButtonVisible=!1,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.canCreateLabels=!0,this.createLabelMode=!1,this.canvas=null,this.canvasWidth=800,this.canvasHeight=600,this.lineZIndex=0,this.textZIndex=1,this.circleZIndex=2,this.canvasId="c",this.backgroundImage=null,this.isResetButtonVisible=!0,this.enableCircles=!0,t.Text.prototype.set({_getNonTransformedDimensions(){return new t.Point(this.width,this.height).scalarAdd(this.padding)},_calculateCurrentDimensions(){return t.util.transformPoint(this._getTransformedDimensions(),this.getViewportTransform(),!0)}}),this.studentDataVersion=2,this.labels=[],this.canvasId="canvas_"+this.nodeId+"_"+this.componentId;var y=this.$scope.componentState;null!=this.componentContent.canCreateLabels&&(this.canCreateLabels=this.componentContent.canCreateLabels),null!=this.componentContent.width&&(this.canvasWidth=this.componentContent.width),null!=this.componentContent.height&&(this.canvasHeight=this.componentContent.height),null!=this.componentContent.enableCircles&&(this.enableCircles=this.componentContent.enableCircles),"student"===this.mode?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.onlyHasShowWorkConnectedComponents()&&(this.isDisabled=!0),this.canCreateLabels?this.isNewLabelButtonVisible=!0:this.isNewLabelButtonVisible=!1,this.isDisabled&&(this.isNewLabelButtonVisible=!1,this.canCreateLabels=!1,this.isResetButtonVisible=!1)):"grading"===this.mode||"gradingRevision"===this.mode?(this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isNewLabelButtonVisible=!1,this.isDisabled=!0,null!=y&&(this.canvasId="labelCanvas_"+y.id,"gradingRevision"===this.mode&&(this.canvasId="labelCanvas_gradingRevision_"+y.id))):"onlyShowWork"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isNewLabelButtonVisible=!1,this.isDisabled=!0):"showPreviousWork"===this.mode&&(this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isNewLabelButtonVisible=!1,this.isDisabled=!0),this.$timeout(angular.bind(this,function(){this.setupCanvas()})),this.$scope.isDirty=function(){return this.$scope.labelController.isDirty}.bind(this),this.$scope.getComponentState=function(t){var e=this.$q.defer();let n=!1,i="change";return t?this.$scope.labelController.isSubmitDirty&&(n=!0,i="submit"):this.$scope.labelController.isDirty&&(n=!0,i="save"),n?this.$scope.labelController.createComponentState(i).then(t=>{e.resolve(t)}):e.resolve(),e.promise}.bind(this),this.$scope.$on("requestImage",(t,e)=>{var n=e.nodeId,i=e.componentId;if(this.nodeId===n&&this.componentId===i){var r=this.getImageObject();if(null!=r)(e={}).nodeId=n,e.componentId=i,e.imageObject=r,this.$scope.$emit("requestImageCallback",e)}}),this.$scope.$on("exitNode",angular.bind(this,function(t,e){})),this.$scope.fileUploadChanged=function(t){var e=this.labelController.getBackgroundImage(),n=!0;null!=e&&""!=e&&(confirm(this.labelController.$translate("label.areYouSureYouWantToChangeTheBackgroundImage"))?n=!0:(n=!1,t.value=null));if(n){var i=t.files;null!=i&&i.length>0&&this.labelController.StudentAssetService.uploadAsset(i[0]).then(t=>{this.labelController.StudentAssetService.copyAssetForReference(t).then(t=>{if(null!=t){var e=t.url;null!=e&&""!=e&&(this.labelController.setBackgroundImage(e),this.labelController.studentDataChanged())}})})}},this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}handleNodeSubmit(){this.submit("nodeSubmitButton")}setupCanvas(){var t=this.initializeCanvas();this.canvas=t;var e=this.$scope.componentState;this.disabled||this.createKeydownListener(),"student"==this.mode?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.LabelService.componentStateHasStudentWork(e,this.componentContent)?this.setStudentWork(e):this.UtilService.hasConnectedComponent(this.componentContent)?(this.handleConnectedComponents(),null!=this.componentContent.labels&&this.addLabelsToCanvas(this.componentContent.labels)):this.LabelService.componentStateIsSameAsStarter(e,this.componentContent)?this.setStudentWork(e):null==e&&null!=this.componentContent.labels&&this.addLabelsToCanvas(this.componentContent.labels):"grading"===this.mode?this.setStudentWork(e):null==e&&null!=this.componentContent.labels?this.addLabelsToCanvas(this.componentContent.labels):this.setStudentWork(e),null==this.getBackgroundImage()&&null!=this.componentContent.backgroundImage&&this.setBackgroundImage(this.componentContent.backgroundImage),null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount&&(this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary()}setStudentWork(t){if(null!=t){var e=t.studentData;if(null!=e){null==e.version?this.setStudentDataVersion(1):this.setStudentDataVersion(e.version);var n=e.labels;this.addLabelsToCanvas(n);var i=e.backgroundImage;null!=i&&this.setBackgroundImage(i);var r=e.submitCounter;null!=r&&(this.submitCounter=r),this.processLatestStudentWork()}}}addLabelsToCanvas(t){if(null!=t)for(let n=0;n<t.length;n++){if(null!=(e=t[n])){let t=e.pointX,n=e.pointY,i=e.textX,r=e.textY,o=e.text,s=e.color,a=e.canEdit,l=e.canDelete;var e=this.createLabel(t,n,i,r,o,s,a,l);this.addLabelToCanvas(this.canvas,e)}}}newLabelButtonClicked(){this.createLabelOnCanvas()}cancelButtonClicked(){this.createLabelMode=!1,this.isCancelButtonVisible=!1}getLabelData(){var t=[],e=this.canvas.getObjects("i-text");if(null!=e)for(var n=0;n<e.length;n++){var i=e[n];if(null!=i){var r=this.getLabelJSONObjectFromText(i);null!=r&&t.push(r)}}return t}getLabelJSONObjectFromCircle(t){var e={},n=this.getLabelFromCircle(t),i=t.line,r=t.text,o=t.get("left"),s=t.get("top");let a=null,l=null;this.isStudentDataVersion(1)?(a=i.x2-i.x1,l=i.y2-i.y1):(a=r.left,l=r.top);var c=n.textString,u=r.backgroundColor;return e.pointX=parseInt(o),e.pointY=parseInt(s),e.textX=parseInt(a),e.textY=parseInt(l),e.text=c,e.color=u,e}getLabelJSONObjectFromText(t){let e={},n=this.getLabelFromText(t),i=n.circle,r=n.line,o=n.text,s=i.get("left"),a=i.get("top"),l=null,c=null;if(this.isStudentDataVersion(1)){l=r.x2-r.x1,c=r.y2-r.y1}else l=o.left,c=o.top;let u=n.textString,h=o.backgroundColor;e.pointX=parseInt(s),e.pointY=parseInt(a),e.textX=parseInt(l),e.textY=parseInt(c),e.text=u,e.color=h;let d=n.canEdit;null==d&&(d=!1),e.canEdit=d;let f=n.canDelete;return null==f&&(f=!1),e.canDelete=f,e}createComponentState(t){var e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={};i.version=this.getStudentDataVersion(),i.labels=this.getLabelData();var r=this.getBackgroundImage();return null!=r&&(i.backgroundImage=r),i.submitCounter=this.submitCounter,n.isSubmit=this.isSubmit,n.studentData=i,n.componentType="Label",n.nodeId=this.nodeId,n.componentId=this.componentId,this.isSubmit=!1,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}showNewLabelButton(){return this.isNewLabelButtonVisible}showCancelButton(){return this.isCancelButtonVisible}initializeCanvas(){var e=null;return null!=this.componentContent.width&&""!=this.componentContent.width&&(this.canvasWidth=this.componentContent.width),null!=this.componentContent.height&&""!=this.componentContent.height&&(this.canvasHeight=this.componentContent.height),(e=this.isDisabled?new t.StaticCanvas(this.canvasId):new t.Canvas(this.canvasId)).selection=!1,e.hoverCursor="pointer",e.setWidth(this.canvasWidth),e.setHeight(this.canvasHeight),document.getElementById(this.canvasId).width=this.canvasWidth,document.getElementById(this.canvasId).height=this.canvasHeight,i("#canvasParent_"+this.canvasId).css("height",this.canvasHeight+2),e.on("mouse:down",angular.bind(this,function(t){null==this.canvas.getActiveObject()&&(this.selectedLabel=null,this.editLabelMode=!1)})),e.on("object:moving",angular.bind(this,function(t){var n=t.target;if(null!=n){var i=n.get("type"),r=n.get("left"),o=n.get("top");if(r<0?(n.set("left",0),r=0):r>this.canvasWidth&&(n.set("left",this.canvasWidth),r=this.canvasWidth),o<0?(n.set("top",0),o=0):o>this.canvasHeight&&(n.set("top",this.canvasHeight),o=this.canvasHeight),"circle"===i){var s=0,a=0;null!=(c=n.line)&&(s=c.x2-c.x1,a=c.y2-c.y1,this.isStudentDataVersion(1)?c.set({x1:r,y1:o,x2:r+s,y2:o+a}):c.set({x1:r,y1:o}),e.remove(c),e.add(c),e.moveTo(c,this.lineZIndex));var l=n.text;null!=l&&this.isStudentDataVersion(1)&&(l.set({left:r+s,top:o+a}),e.remove(l),e.add(l),e.moveTo(l,this.textZIndex))}else if("i-text"===i)if(this.enableCircles){var c;null!=(c=n.line)&&(c.set({x2:r,y2:o}),e.remove(c),e.add(c),e.moveTo(c,this.lineZIndex))}else{let t=n.circle,e=n.line;t.set({left:r,top:o}),e.set({x1:r,y1:o,x2:r,y2:o})}e.renderAll(),this.studentDataChanged()}})),e.on("text:changed",angular.bind(this,function(t){var e=t.target;null!=e&&("i-text"===e.get("type")&&this.studentDataChanged())})),e}createLabelOnCanvas(){this.createLabelMode=!1,this.isCancelButtonVisible=!1;const t=this.getNewLabelLocation(),e=this.createLabel(t.pointX,t.pointY,t.textX,t.textY,this.$translate("label.aNewLabel"),"blue",!0,!0);this.addLabelToCanvas(this.canvas,e),this.selectLabel(e),this.studentDataChanged()}getNewLabelLocation(){const t=this.getNextPointLocation(),e=t.pointX,n=t.pointY,i=this.getNextTextLocation(e,n);return{pointX:e,pointY:n,textX:i.textX,textY:i.textY}}getNextPointLocation(){let t=this.getUnoccupiedPointLocation();return null==t?{pointX:50,pointY:50}:t}getNextTextLocation(t,e){let n=null,i=null;return this.enableCircles?this.isStudentDataVersion(1)?(n=100,i=100):(n=t+100,i=e+100):(n=t,i=e),{textX:n,textY:i}}getOccupiedPointLocations(){let t=this.getLabelData();const e=[];for(let n of t)e.push({pointX:n.pointX,pointY:n.pointY});return e}isPointOccupied(t,e,n){for(let i of t)if(i.pointX==e&&i.pointY==n)return!0;return!1}getUnoccupiedPointLocation(){const t=this.getOccupiedPointLocations();for(let e=50;e<this.canvasHeight;e+=150)for(let n=50;n<this.canvasWidth;n+=150)if(!this.isPointOccupied(t,n,e))return{pointX:n,pointY:e};return null}setBackgroundImage(t){null!=t&&(this.backgroundImage=t,this.canvas.setBackgroundImage(t,this.canvas.renderAll.bind(this.canvas)))}getBackgroundImage(){return this.backgroundImage}createKeydownListener(){window.addEventListener("keydown",angular.bind(this,this.keyPressed),!1)}keyPressed(t){13===t.keyCode&&null!=this.selectedLabel&&(this.saveLabelButtonClicked(),this.$scope.$apply())}getLabelFromCircle(t){for(let e of this.labels)if(t==e.circle)return e;return null}getLabelFromText(t){for(let e of this.labels)if(t==e.text)return e;return null}createLabel(e,n,i,r,o,s,a,l){let c={},u=e,h=n,d=null,f=null;this.isStudentDataVersion(1)?(d=e+i,f=n+r):(d=i,f=r),u=this.makeSureXIsWithinXMinMaxLimits(u),h=this.makeSureYIsWithinYMinMaxLimits(h),d=this.makeSureXIsWithinXMinMaxLimits(d),f=this.makeSureYIsWithinYMinMaxLimits(f),null==s&&(s="blue");let p=5;null!=this.componentContent.pointSize&&""!=this.componentContent.pointSize&&(p=parseFloat(this.componentContent.pointSize));let m=20;null!=this.componentContent.fontSize&&""!=this.componentContent.fontSize&&(m=parseFloat(this.componentContent.fontSize));var g=new t.Circle({radius:p,left:u,top:h,originX:"center",originY:"center",hasControls:!1,borderColor:"red",hasBorders:!0,selectable:!0}),v=new t.Line([u,h,d,f],{fill:"black",stroke:"black",strokeWidth:3,selectable:!1});let y=o;this.componentContent.labelWidth&&(y=this.UtilService.wordWrap(o,this.componentContent.labelWidth));var b=new t.IText(y,{left:d,top:f,originX:"center",originY:"center",fontSize:m,fill:"white",backgroundColor:s,width:100,hasControls:!1,hasBorders:!0,borderColor:"red",borderDashArray:[8,8],borderScaleFactor:3,borderOpacityWhenMoving:1,selectable:!0,cursorWidth:0,editable:!1,padding:16});return g.line=v,g.text=b,b.line=v,b.circle=g,c.circle=g,c.line=v,c.text=b,c.textString=o,null==a&&(a=!0),c.canEdit=a,null==l&&(l=!0),c.canDelete=l,c}makeSureXIsWithinXMinMaxLimits(t){return t<0&&(t=0),t>this.canvasWidth&&(t=this.canvasWidth),t}makeSureYIsWithinYMinMaxLimits(t){return t<0&&(t=0),t>this.canvasHeight&&(t=this.canvasHeight),t}addLabelToCanvas(t,e){if(null!=t&&null!=e){var n=e.circle,i=e.line,r=e.text;null!=n&&null!=i&&null!=r&&(this.enableCircles?(t.add(n,i,r),t.moveTo(i,this.lineZIndex),t.moveTo(r,this.textZIndex),t.moveTo(n,this.circleZIndex)):(t.add(r),t.moveTo(r,this.textZIndex)),t.renderAll(),this.enableCircles&&n.on("mousedown",()=>{this.selectLabel(e)}),r.on("mousedown",()=>{this.selectLabel(e)}),this.labels.push(e))}}selectLabel(t){this.selectedLabel=t,t.canEdit?(this.selectedLabelText=t.text.text,this.editLabelMode=!0,this.canvas.setActiveObject(t.text),this.giveFocusToLabelTextInput()):this.editLabelMode=!1}giveFocusToLabelTextInput(){this.$timeout(()=>{const t=i("#editLabelTextInput").offset();if(null!=t){t.top>100&&angular.element("#editLabelTextInput").focus()}})}selectedLabelTextChanged(t,e,n){t.textString=n;let i=n;null!=this.componentContent.labelWidth&&""!=this.componentContent.labelWidth&&(i=this.UtilService.wordWrap(n,this.componentContent.labelWidth)),e.setText(i),this.studentDataChanged(),this.canvas.renderAll()}removeLabelFromCanvas(t,e){if(null!=t&&null!=e){var n=e.circle,i=e.line,r=e.text;null!=n&&null!=i&&null!=r&&(t.remove(n),t.remove(i),t.remove(r),this.labels.splice(this.labels.indexOf(e),1),t.renderAll())}}getImageObject(){var t=null;if(null!=this.canvas){var e=this.canvas.toDataURL("image/png");t=this.UtilService.getImageObjectFromBase64String(e)}return t}snipImage(t){var e=angular.element("#"+this.canvasId);if(null!=e&&e.length>0){var n=(e=e[0]).toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(n);this.NotebookService.addNote(t,i)}}saveLabelButtonClicked(){null!=this.selectedLabel&&(this.selectedLabel=null,this.editLabelMode=!1,this.canvas.discardActiveObject())}cancelLabelButtonClicked(){if(null!=this.selectedLabel){var t=this.selectedLabelText;this.selectedLabel.text.setText(t),this.selectedLabelText=null,this.selectedLabel=null,this.editLabelMode=!1,this.canvas.discardActiveObject(),this.studentDataChanged(),this.canvas.renderAll()}}deleteLabelButtonClicked(){if(null!=this.selectedLabel){var t=this.selectedLabel.textString;confirm(this.$translate("label.areYouSureYouWantToDeleteThisLabel",{selectedLabelText:t}))&&(this.deleteLabel(this.selectedLabel),this.selectedLabel=null,this.editLabelMode=!1,this.canvas.discardActiveObject(),this.studentDataChanged())}}deleteLabel(t){this.removeLabelFromCanvas(this.canvas,t)}handleConnectedComponentsPostProcess(){null!=this.componentContent.backgroundImage&&""!=this.componentContent.backgroundImage&&this.setBackgroundImage(this.componentContent.backgroundImage)}createMergedComponentState(t){let e=this.NodeService.createNewComponentState();if(null!=t){let n=[],i=null,r=2;for(let e=0;e<t.length;e++){let o=t[e];if(null!=o)if("Label"==o.componentType){let t=o.studentData;if(null!=t){null!=t.version&&(r=t.version);let e=t.labels,o=t.backgroundImage;null!=e&&""!=e&&(n=n.concat(e)),null!=o&&""!=o&&(i=o)}}else if("OpenResponse"==o.componentType){let t=this.getConnectedComponentForComponentState(o);if(null!=t){let e=o.studentData.response;if(t.importWorkAsBackground){let n=t.charactersPerLine,i=t.spaceInbetweenLines,r=t.fontSize;this.LabelService.createImageFromText(e,null,null,n,null,i,r).then(t=>{this.setBackgroundImage(t),this.studentDataChanged()})}}}else if("ConceptMap"==o.componentType||"Draw"==o.componentType||"Embedded"==o.componentType||"Graph"==o.componentType||"Table"==o.componentType){!0===this.UtilService.getConnectedComponentByComponentState(this.componentContent,o).importWorkAsBackground&&this.setComponentStateAsBackgroundImage(o)}}null!=n&&(e.studentData={},e.studentData.labels=n,e.studentData.backgroundImage=i),null!=r&&(e.studentData.version=r)}return e}getConnectedComponentForComponentState(t){for(let e of this.componentContent.connectedComponents)if(t.nodeId==e.nodeId&&t.componentId==e.componentId)return e;return null}setComponentStateAsBackgroundImage(t){this.UtilService.generateImageFromComponentState(t).then(t=>{this.setBackgroundImage(t.url)})}resetButtonClicked(){if(confirm(this.$translate("label.areYouSureYouWantToReset"))){let t=[];for(let e of this.labels)t.push(e);for(let e of t)this.deleteLabel(e);this.selectedLabel=null,this.editLabelMode=!1,this.canvas.discardActiveObject(),null!=this.componentContent.labels&&this.addLabelsToCanvas(this.componentContent.labels),this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents(),this.studentDataChanged()}}setStudentDataVersion(t){this.studentDataVersion=t}getStudentDataVersion(){return this.studentDataVersion}isStudentDataVersion(t){return this.getStudentDataVersion()==t}onlyHasShowWorkConnectedComponents(){let t=this.componentContent.connectedComponents,e=0;if(null!=t){for(let n of t)"showWork"==n.type&&(e+=1);if(t.length>0&&t.length==e)return!0}return!1}}o.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","$timeout","$window","AnnotationService","ConfigService","LabelService","NodeService","NotebookService","OpenResponseService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.a=o}).call(this,n(29).fabric,n(1))},function(t,e,n){"use strict";(function(t,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function e(t,n,i,r,o,s,a,l,c,u,h,d,f,p){var m=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$compile=t,this.$filter=n,this.$q=i,this.$rootScope=r,this.$scope=o,this.$state=s,this.$timeout=a,this.AnnotationService=l,this.ConfigService=c,this.NodeService=u,this.NotebookService=h,this.ProjectService=d,this.StudentDataService=f,this.UtilService=p,this.$translate=this.$filter("translate"),this.autoSaveInterval=6e4,this.nodeId=null,this.nodeContent=null,this.nodeStatus=null,this.nodeTitle=null,this.dirtyComponentIds=[],this.dirtySubmitComponentIds=[],this.submit=!1,this.workgroupId=this.ConfigService.getWorkgroupId(),this.teacherWorkgroupId=this.ConfigService.getTeacherWorkgroupId(),this.isDisabled=!this.ConfigService.isRunActive(),this.componentToScope={},this.saveMessage={text:"",time:""},this.rubric=null,this.mode=this.ConfigService.getMode(),this.StudentDataService.getCurrentNode()&&this.ProjectService.isApplicationNode(this.StudentDataService.getCurrentNodeId())){var g=this.StudentDataService.getCurrentNode();null!=g&&(this.nodeId=g.id),this.nodeContent=this.ProjectService.getNodeById(this.nodeId),this.nodeTitle=this.ProjectService.getNodeTitleByNodeId(this.nodeId),this.nodeStatus=this.StudentDataService.nodeStatuses[this.nodeId],this.startAutoSaveInterval(),this.registerExitListener(),this.NodeService.currentNodeHasTransitionLogic()&&this.NodeService.evaluateTransitionLogicOn("enterNode")&&this.NodeService.evaluateTransitionLogic();var v=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId);if(v){var y=v.clientSaveTime;v.isSubmit?this.setSubmittedMessage(y):this.setSavedMessage(y)}var b=this.nodeId,_={};if(_.nodeId=b,this.StudentDataService.saveVLEEvent(b,null,null,"Navigation","nodeEntered",_),null!=this.nodeContent&&(this.rubric=this.nodeContent.rubric,this.createRubricTour()),null!=this.$state&&null!=this.$state.params&&null!=this.$state.params.componentId){var w=this.$state.params.componentId;this.scrollAndHighlightComponent(w)}}this.$scope.$on("componentSaveTriggered",function(t,e){if(null!=e){var n=e.nodeId,i=e.componentId;if(null!=n&&null!=i&&m.nodeId==n&&m.nodeContainsComponent(i)){m.createAndSaveComponentData(!1,i)}}}),this.$scope.$on("componentSubmitTriggered",function(t,e){if(null!=e){var n=e.nodeId,i=e.componentId;if(null!=n&&null!=i&&m.nodeId==n&&m.nodeContainsComponent(i)){m.createAndSaveComponentData(!1,i,!0)}}}),this.$scope.$on("componentStudentDataChanged",function(t,e){if(null!=e){var n=e.componentId,i=e.componentState;null!=n&&null!=i&&(null==i.nodeId&&null!=e.nodeId&&(i.nodeId=e.nodeId),null==i.componentId&&null!=e.componentId&&(i.componentId=e.componentId),m.notifyConnectedParts(n,i),m.$scope.$broadcast("siblingComponentStudentDataChanged",e))}}),this.$scope.$on("componentDirty",function(t,e){var n=e.componentId;if(n){var i=e.isDirty,r=m.dirtyComponentIds.indexOf(n);i&&-1===r?m.dirtyComponentIds.push(n):!i&&r>-1&&m.dirtyComponentIds.splice(r,1)}}),this.$scope.$on("componentSubmitDirty",function(t,e){var n=e.componentId;if(n){var i=e.isDirty,r=m.dirtySubmitComponentIds.indexOf(n);i&&-1===r?m.dirtySubmitComponentIds.push(n):!i&&r>-1&&m.dirtySubmitComponentIds.splice(r,1)}}),this.$scope.$on("exitNode",function(t,e){e.nodeToExit.id===m.nodeId&&(m.stopAutoSaveInterval(),m.nodeUnloaded(m.nodeId),m.NodeService.currentNodeHasTransitionLogic()&&m.NodeService.evaluateTransitionLogicOn("exitNode")&&m.NodeService.evaluateTransitionLogic())});var S=this.nodeContent.script;null!=S&&this.ProjectService.retrieveScript(S).then(function(t){new Function(t).call(m)})}var r,o,s;return r=e,(o=[{key:"createRubricTour",value:function(){if(this.rubricTour={id:"rubricTour",arrowWidth:12,bubblePadding:0,bubbleWidth:800,container:"#content",steps:[],showPrevButton:!0,showNextButton:!0,scrollDuration:400,customRenderer:this.getRubricTemplate,customData:{$ctrl:this},i18n:{nextBtn:this.$translate("NEXT"),prevBtn:this.$translate("PREVIOUS"),doneBtn:this.$translate("DONE"),closeTooltip:this.$translate("CLOSE")}},this.rubric){var t="#nodeRubric_"+this.nodeId;this.rubricTour.steps.push({target:t,placement:"bottom",title:this.$translate("STEP_INFO"),content:this.ProjectService.replaceAssetPaths(this.rubric),xOffset:"center",arrowOffset:"center",onShow:this.onShowRubric,viewed:!1})}var e=this.getComponents(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a.rubric){var l="#rubric_"+a.id;this.rubricTour.steps.push({target:l,arrowOffset:21,placement:"right",yOffset:1,title:this.$translate("ITEM_INFO"),content:this.ProjectService.replaceAssetPaths(a.rubric),onShow:this.onShowRubric,viewed:!1})}}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"showRubric",value:function(e){if(this.rubricTour){var n=-1,i=0;if(this.nodeId,this.nodeId===e&&(n=i),n<0){this.rubric&&i++;var r=this.getComponents(),o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u.rubric){if(u.id,u.id===e){n=i;break}i++}}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}t.endTour(this.rubricTour),t.startTour(this.rubricTour,n)}}},{key:"scrollAndHighlightComponent",value:function(t){this.$timeout(function(){var e=n("#component_"+t);if(null!=e){var i=e.css("backgroundColor");e.css("background-color","#FFFF9C"),n("#content").animate({scrollTop:e.prop("offsetTop")},1e3),e.css({transition:"background-color 3s ease-in-out","background-color":i})}},1e3)}},{key:"getRubricTemplate",value:function(t){var e=t.i18n,n=t.buttons,i=t.step,r=t.tour,o=r.customData.$ctrl,s='<div class="hopscotch-bubble-container help-bubble md-whiteframe-4dp" style="width: '.concat(i.width,"px; padding: ").concat(i.padding,'px;">\n                <md-toolbar class="md-subhead help-bubble__title md-toolbar--wise">\n                    <div class="help-bubble___title__content" layout="row" layout-align="start center" flex>\n                        <span>').concat(r.isTour?"".concat(e.stepNum," | "):"").concat(""!==i.title?"".concat(i.title):"","</span>\n                        <span flex></span>\n                        ").concat(n.showClose?'<md-button class="md-icon-button hopscotch-close">\n                            <md-icon aria-label="'.concat(e.closeTooltip,'"> close </md-icon>\n                        </md-button>'):"",'\n                    </div>\n                </md-toolbar>\n                <div class="help-bubble__content">\n                    ').concat(""!==i.content?"".concat(i.content):"","\n                    ").concat(n.showCTA?'<md-button class="hopscotch-cta md-primary md-raised">'.concat(e.ctaLabel,"</md-button>"):"",'\n                </div>\n                <md-divider></md-divider>\n                <div class="help-bubble__actions gray-lightest-bg" layout="row" layout-align="start center">\n                    ').concat(n.showClose?'<md-button class="button--small hopscotch-close">'.concat(e.closeTooltip,"</md-button>"):"","\n                    <span flex></span>\n                    ").concat(n.showPrev?'<md-button class="button--small info hopscotch-prev">'.concat(e.prevBtn,"</md-button>"):"","\n                    ").concat(n.showNext?'<md-button class="button--small info hopscotch-next">'.concat(e.nextBtn,"</md-button>"):"","\n                </md-card-actions>\n            </div>");return o.$compile(s)(o.$scope)[0].outerHTML+'<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n                <div class="hopscotch-bubble-arrow-border"></div>\n                <div class="hopscotch-bubble-arrow"></div>\n            </div>'}},{key:"onShowRubric",value:function(){var e=t.getCurrStepNum();t.getCurrTour().customData.$ctrl.rubricTour.steps[e].viewed=!0}},{key:"registerComponentController",value:function(t,e){if(null!=t&&null!=e){var n=e.id;this.componentToScope[n]=t}}},{key:"setStudentWork",value:function(){}},{key:"importWork",value:function(){}},{key:"getRevisions",value:function(t){return this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,t)}},{key:"showRevisions",value:function(t,e,n){var i=this.getRevisions(e),r=!n,o=this.componentToScope[e],s=null;o.openResponseController?s=o.openResponseController:o.drawController&&(s=o.drawController),this.$rootScope.$broadcast("showRevisions",{revisions:i,componentController:s,allowRevert:r,$event:t})}},{key:"showStudentAssets",value:function(t,e){var n=this.componentToScope[e],i=null;n.openResponseController?i=n.openResponseController:n.drawController?i=n.drawController:n.discussionController?i=n.discussionController:n.tableController?i=n.tableController:n.graphController&&(i=n.graphController),this.$rootScope.$broadcast("showStudentAssets",{componentController:i,$event:t})}},{key:"saveButtonClicked",value:function(){this.$rootScope.$broadcast("nodeSaveClicked",{nodeId:this.nodeId}),this.createAndSaveComponentData(!1)}},{key:"submitButtonClicked",value:function(){this.$rootScope.$broadcast("nodeSubmitClicked",{nodeId:this.nodeId}),this.createAndSaveComponentData(!1,null,!0)}},{key:"getComponents",value:function(){var t=null;if(null!=this.nodeContent&&(t=this.nodeContent.components),null!=t&&this.isDisabled){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)r.value.isDisabled=!0}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}return t}},{key:"getComponentById",value:function(t){if(null!=t){var e=this.getComponents(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&a.id===t)return a}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return null}},{key:"nodeContainsComponent",value:function(t){if(null!=t){var e=this.getComponents(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&a.id===t)return!0}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return!1}},{key:"getComponentTemplatePath",value:function(t){return this.NodeService.getComponentTemplatePath(t)}},{key:"showSaveButton",value:function(){return null!=this.nodeContent&&this.nodeContent.showSaveButton}},{key:"showSubmitButton",value:function(){return null!=this.nodeContent&&this.nodeContent.showSubmitButton}},{key:"setSavedMessage",value:function(t){this.setSaveText(this.$translate("SAVED"),t)}},{key:"setAutoSavedMessage",value:function(t){this.setSaveText(this.$translate("AUTO_SAVED"),t)}},{key:"setSubmittedMessage",value:function(t){this.setSaveText(this.$translate("SUBMITTED"),t)}},{key:"setSaveText",value:function(t,e){this.saveMessage.text=t,this.saveMessage.time=e}},{key:"clearSaveText",value:function(){this.setSaveText("",null)}},{key:"startAutoSaveInterval",value:function(){var t=this;this.autoSaveIntervalId=setInterval(function(){t.dirtyComponentIds.length&&t.createAndSaveComponentData(!0)},this.autoSaveInterval)}},{key:"stopAutoSaveInterval",value:function(){clearInterval(this.autoSaveIntervalId)}},{key:"createAndSaveComponentData",value:function(t,e,n){var i=this;return this.createComponentStates(t,e,n).then(function(r){var o=[];if(i.UtilService.arrayHasNonNullElement(r)){var s=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;if(null!=h){var d=h.annotations;null!=d&&(o=o.concat(d)),delete h.annotations}}}catch(t){a=!0,l=t}finally{try{s||null==u.return||u.return()}finally{if(a)throw l}}return i.StudentDataService.saveToServer(r,[],[],o).then(function(r){if(r){if(i.NodeService.currentNodeHasTransitionLogic()&&(i.NodeService.evaluateTransitionLogicOn("studentDataChanged")&&i.NodeService.evaluateTransitionLogic(),i.NodeService.evaluateTransitionLogicOn("scoreChanged")&&null!=o&&o.length>0)){var s=!1,a=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;null!=d&&"autoScore"===d.type&&(s=!0)}}catch(t){l=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}s&&i.NodeService.evaluateTransitionLogic()}var f=r.studentWorkList;if(!e&&f&&f.length){var p=f[f.length-1].serverSaveTime,m=i.ConfigService.convertToClientTimestamp(p);t?i.setAutoSavedMessage(m):n?i.setSubmittedMessage(m):i.setSavedMessage(m)}else i.clearSaveText()}return r})}})}},{key:"createComponentStates",value:function(t,e,n){var i=[],r=[];if(e){var o=this.getComponentById(e);o&&i.push(o)}else i=this.getComponents();if(i.length){var s=this.ConfigService.getRunId(),a=this.ConfigService.getPeriodId(),l=this.ConfigService.getWorkgroupId(),c=this.nodeId,u=!0,h=!1,d=void 0;try{for(var f,p=i[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(null!=m){var g=m.id,v=m.type,y=this.componentToScope[g];if(null!=y&&y.getComponentState){var b=this.getComponentStateFromChildScope(y,s,a,l,c,e,g,v,t,n);r.push(b)}}}}catch(t){h=!0,d=t}finally{try{u||null==p.return||p.return()}finally{if(h)throw d}}}return this.$q.all(r)}},{key:"getComponentStateFromChildScope",value:function(t,e,n,i,r,o,s,a,l,c){var u=this;return t.getComponentState(c).then(function(t){if(null!=t)return t.runId=e,t.periodId=n,t.workgroupId=i,t.nodeId=u.nodeId,t.componentId=s,t.componentType=a,null==o?(t.isAutoSave=l,c&&null==t.isSubmit&&(t.isSubmit=!0)):o===s&&(t.isAutoSave=!1,c&&null==t.isSubmit&&(t.isSubmit=!0)),t})}},{key:"getLatestComponentAnnotations",value:function(t){var e=this.nodeId,n=this.workgroupId;return{score:this.AnnotationService.getLatestScoreAnnotation(e,t,n,"any"),comment:this.AnnotationService.getLatestCommentAnnotation(e,t,n,"any")}}},{key:"notifyConnectedParts",value:function(t,e){if(null!=t&&null!=e){var n=this.getComponents();if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l){var c=l.id,u=l.connectedComponents;if(null!=u){var h=!0,d=!1,f=void 0;try{for(var p,m=u[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value;if(null!=g){var v=g.nodeId,y=g.componentId,b=g.id;if(null!=v&&null!=y){var _=y;if(v==this.nodeId&&_===t){var w=this.getComponentById(_),S=this.componentToScope[c];null!=S.handleConnectedComponentStudentDataChanged&&S.handleConnectedComponentStudentDataChanged(w,g,e)}}else if(null!=y){var x=y;if(x===t){var C=this.getComponentById(x),k=this.componentToScope[c];null!=k.handleConnectedComponentStudentDataChanged&&k.handleConnectedComponentStudentDataChanged(C,g,e)}}else if(null!=b){var T=b;if(T===t){var M=this.getComponentById(T),E=this.componentToScope[c];null!=E.handleConnectedComponentStudentDataChanged&&E.handleConnectedComponentStudentDataChanged(M,g,e)}}}}}catch(t){d=!0,f=t}finally{try{h||null==m.return||m.return()}finally{if(d)throw f}}}}}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}}}},{key:"getComponentStateByComponentId",value:function(t){return null!=t?this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,t):null}},{key:"getComponentStateByNodeIdAndComponentId",value:function(t,e){return null!=t&&null!=e?this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(t,e):null}},{key:"nodeUnloaded",value:function(e){t.endTour(this.rubricTour),this.createAndSaveComponentData(!0);var n={};n.nodeId=e,this.StudentDataService.saveVLEEvent(e,null,null,"Navigation","nodeExited",n)}},{key:"getSubmitDirty",value:function(){var t=this.getComponents();if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value.id,a=this.getComponentStateByComponentId(s);if(a&&!a.isSubmit)return!0}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}return!1}},{key:"registerExitListener",value:function(){var t=this;this.logOutListener=this.$scope.$on("exit",function(e,n){t.stopAutoSaveInterval(),t.nodeUnloaded(t.nodeId),t.logOutListener(),t.$rootScope.$broadcast("doneExiting")})}}])&&i(r.prototype,o),s&&i(r,s),e}();r.$inject=["$compile","$filter","$q","$rootScope","$scope","$state","$timeout","AnnotationService","ConfigService","NodeService","NotebookService","ProjectService","StudentDataService","UtilService"],e.a=r}).call(this,n(236),n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r,o,s,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$http=n,this.$injector=i,this.$mdDialog=r,this.$q=o,this.ConfigService=s,this.ProjectService=a,this.StudentDataService=l,this.$filter&&(this.$translate=this.$filter("translate")),null==this.ConfigService||"classroomMonitor"!=this.ConfigService.getMode()&&"author"!=this.ConfigService.getMode()||(this.TeacherDataService=this.$injector.get("TeacherDataService")),this.transitionResults={},this.chooseTransitionPromises={}}return i(t,[{key:"createNewComponentState",value:function(){var t={};return t.clientSaveTime=Date.parse(new Date),t}},{key:"createNewNodeState",value:function(){var t={};return t.runId=this.ConfigService.getRunId(),t.periodId=this.ConfigService.getPeriodId(),t.workgroupId=this.ConfigService.getWorkgroupId(),t.clientSaveTime=Date.parse(new Date),t}},{key:"toCamelCase",value:function(t){if(null!=t&&t.length>0){var e=t.charAt(0);if(null!=e){var n=e.toLowerCase();if(null!=n)return n+t.substr(1)}}return null}},{key:"isStringUpperCase",value:function(t){return null!=t&&t===t.toUpperCase()}},{key:"getComponentTemplatePath",value:function(t){return this.getComponentFolderPath(t)+"/index.html"}},{key:"getComponentAuthoringTemplatePath",value:function(t){return this.getComponentFolderPath(t)+"/authoring.html"}},{key:"getComponentFolderPath",value:function(t){return t=this.isStringUpperCase(t)?t.toLowerCase():this.toCamelCase(t),this.ConfigService.getWISEBaseURL()+"/wise5/components/"+t}},{key:"getComponentContentById",value:function(t,e){if(null!=t&&null!=e){var n=t.components;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l)if(l.id===e)return l}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}return null}},{key:"isWorkSubmitted",value:function(t){if(null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null!=s&&s.isSubmit)return!0}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}return!1}},{key:"isCompleted",value:function(t){if(null!=t){var e=t.nodeId,n=t.componentId;return this.StudentDataService.isCompleted(e,n)}return!1}},{key:"goToNextNode",value:function(){var t=this;return this.getNextNodeId().then(function(e){if(null!=e){var n=t.ConfigService.getMode();"classroomMonitor"===n||"author"===n?t.TeacherDataService.endCurrentNodeAndSetCurrentNodeByNodeId(e):t.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(e)}return e})}},{key:"getNextNodeId",value:function(t){var e=this,n=this.$q.defer(),i=n.promise,r=null,o=null,s=this.ConfigService.getMode();if(t)o=t;else{var a=null;(a="classroomMonitor"===s||"author"===s?this.TeacherDataService.getCurrentNode():this.StudentDataService.getCurrentNode())&&(o=a.id)}if(o)if("classroomMonitor"===s||"author"===s){var l=this.ProjectService.getNodeOrderById(o);if(l){var c=l+1,u=this.ProjectService.getNodeIdByOrder(c);u&&(this.ProjectService.isApplicationNode(u)?r=u:this.ProjectService.isGroupNode(u)&&(r=this.getNextNodeId(u)))}n.resolve(r)}else{var h=this.ProjectService.getTransitionLogicByFromNodeId(o),d=this.StudentDataService.getBranchPathTakenEventsByNodeId(o);if(null!=d&&d.length>0&&null!=h&&1!=h.canChangePath)for(var f=d.length-1;f>=0;f--){var p=d[f];if(null!=p){var m=p.data;if(null!=m){var g=m.toNodeId;r=g,n.resolve(r);break}}}else if(null!=h){var v=h.transitions;if(null==v||0==v.length){var y=this.ProjectService.getParentGroupId(o),b=!1;if(null!=y){var _=this.ProjectService.getTransitionLogicByFromNodeId(y);null!=_&&(b=!0,this.chooseTransition(y,_).then(function(t){if(null!=t){var i=t.to;if(e.ProjectService.isGroupNode(i)){var o=e.ProjectService.getGroupStartId(i);r=null==o||""==o?i:o}else r=i}n.resolve(r)}))}b||n.resolve(null)}else this.chooseTransition(o,h).then(function(t){null!=t&&(r=t.to,n.resolve(r))})}}else n.resolve(null);return i}},{key:"goToNextNodeWithWork",value:function(){var t=this;this.getNextNodeIdWithWork().then(function(e){if(e){var n=t.ConfigService.getMode();"classroomMonitor"===n||"author"===n?t.TeacherDataService.endCurrentNodeAndSetCurrentNodeByNodeId(e):t.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(e)}return e})}},{key:"getNextNodeIdWithWork",value:function(t){var e=this;return this.getNextNodeId(t).then(function(t){return t?e.ProjectService.nodeHasWork(t)?t:e.getNextNodeIdWithWork(t):null})}},{key:"goToPrevNode",value:function(){var t=this.getPrevNodeId(),e=this.ConfigService.getMode();"classroomMonitor"===e||"author"===e?this.TeacherDataService.endCurrentNodeAndSetCurrentNodeByNodeId(t):this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(t)}},{key:"getPrevNodeId",value:function(t){var e=null,n=null,i=this.ConfigService.getMode();if(t)n=t;else{var r=null;(r="classroomMonitor"===i||"author"===i?this.TeacherDataService.getCurrentNode():this.StudentDataService.getCurrentNode())&&(n=r.id)}if(n)if("classroomMonitor"===i||"author"===i){var o=this.ProjectService.getNodeOrderById(n);if(o){var s=o-1,a=this.ProjectService.getNodeIdByOrder(s);a&&(this.ProjectService.isApplicationNode(a)?e=a:this.ProjectService.isGroupNode(a)&&(e=this.getPrevNodeId(a)))}}else{var l=this.ProjectService.getNodesWithTransitionToNodeId(n);if(null==l);else if(1===l.length)e=l[0];else if(l.length>1)for(var c=this.StudentDataService.getStackHistory(),u=c.length-1;u>=0;u--){var h=c[u];if(-1!=l.indexOf(h)){e=h;break}}}return e}},{key:"goToPrevNodeWithWork",value:function(){var t=this.getPrevNodeIdWithWork(),e=this.ConfigService.getMode();"classroomMonitor"===e||"author"===e?this.TeacherDataService.endCurrentNodeAndSetCurrentNodeByNodeId(t):this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(t)}},{key:"getPrevNodeIdWithWork",value:function(t){var e=this.getPrevNodeId(t);return e?this.ProjectService.nodeHasWork(e)?e:this.getPrevNodeIdWithWork(e):null}},{key:"closeNode",value:function(){var t=this.ConfigService.getMode(),e=null;if(e="classroomMonitor"===t?this.TeacherDataService.getCurrentNode():this.StudentDataService.getCurrentNode()){var n=e.id,i=this.ProjectService.getParentGroup(n).id;"classroomMonitor"===t?this.TeacherDataService.endCurrentNodeAndSetCurrentNodeByNodeId(i):this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(i)}}},{key:"chooseTransition",value:function(t,e){var n=this.$q.defer(),i=this.getChooseTransitionPromise(t);if(null!=i)return i;i=n.promise;var r=!0,o=this.getTransitionResultByNodeId(t);if(null==o||null!=e&&1==e.canChangePath){var s=e.transitions;if(null!=s){var a=[],l=!0,c=!1,u=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=f.to,m=f.criteria,g=!0;if(null!=m){var v=!0,y=!0,b=!0,_=!1,w=void 0;try{for(var S,x=m[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value;y=this.StudentDataService.evaluateCriteria(C),v?(g=y,v=!1):g=g&&y}}catch(t){_=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(_)throw w}}}null!=p&&g&&a.push(f)}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}if(0==a.length)o=null;else if(1==a.length)o=a[0];else if(a.length>1)if(this.ConfigService.isPreview())if(null!=o);else{var k=function(t,e,n,i,r,o,s){t.availableTransitions=r,t.NodeService=n,t.ProjectService=i,t.chooseBranchPath=function(n){t.NodeService.setTransitionResult(s,n),o.resolve(n),t.NodeService.setChooseTransitionPromise(s,null),e.hide()},t.getNodePositionAndTitleByNodeId=function(e){return t.ProjectService.getNodePositionAndTitleByNodeId(e)},t.close=function(){e.hide()}};r=!1;var T={templateUrl:this.ProjectService.getThemePath()+"/templates/branchPathChooser.html",controller:k,locals:{availableTransitions:a,deferred:n,nodeId:t}};k.$inject=["$scope","$mdDialog","NodeService","ProjectService","availableTransitions","deferred","nodeId"],this.$mdDialog.show(T)}else{var M=e.howToChooseAmongAvailablePaths;if(null==M||""===M||"random"===M)o=a[Math.floor(Math.random()*a.length)];else if("workgroupId"===M){o=a[this.ConfigService.getWorkgroupId()%a.length]}else"firstAvailable"===M?o=a[0]:"lastAvailable"===M&&(o=a[a.length-1])}}}return r?(this.setTransitionResult(t,o),n.resolve(o)):this.setChooseTransitionPromise(t,i),i}},{key:"currentNodeHasTransitionLogic",value:function(){var t=this.StudentDataService.getCurrentNode();if(null!=t&&null!=t.transitionLogic)return!0;return!1}},{key:"evaluateTransitionLogic",value:function(){var t=this,e=this.StudentDataService.getCurrentNode();if(null!=e){var n=e.id,i=e.transitionLogic;if(null!=i){i.transitions;var r=i.canChangePath,o=!1;this.StudentDataService.getBranchPathTakenEventsByNodeId(e.id).length>0&&(o=!0);var s=void 0,a=void 0;o?r&&this.chooseTransition(n,i).then(function(n){null!=n&&(s=e.id,a=n.to,t.createBranchPathTakenEvent(s,a))}):this.chooseTransition(n,i).then(function(n){null!=n&&(s=e.id,a=n.to,t.createBranchPathTakenEvent(s,a))})}}}},{key:"createBranchPathTakenEvent",value:function(t,e){var n=t,i={};i.fromNodeId=t,i.toNodeId=e,this.StudentDataService.saveVLEEvent(n,null,null,"Navigation","branchPathTaken",i)}},{key:"evaluateTransitionLogicOn",value:function(t){var e=this.StudentDataService.getCurrentNode();if(null!=e&&t===e.transitionLogic.whenToChoosePath)return!0;return!1}},{key:"getTransitionResultByNodeId",value:function(t){return this.transitionResults[t]}},{key:"setTransitionResult",value:function(t,e){null!=t&&(this.transitionResults[t]=e)}},{key:"getChooseTransitionPromise",value:function(t){return this.chooseTransitionPromises[t]}},{key:"setChooseTransitionPromise",value:function(t,e){null!=t&&(this.chooseTransitionPromises[t]=e)}},{key:"showNodeInfo",value:function(t,e){var n=this.ProjectService.getNodePositionAndTitleByNodeId(t),i=this.$translate("STEP_INFO"),r='<md-dialog class="dialog--wider" aria-label="'+n+" - "+i+'">'+('<md-toolbar>\n                <div class="md-toolbar-tools">\n                    <h2>'+n+"</h2>\n                </div>\n            </md-toolbar>")+('<md-dialog-content class="gray-lighter-bg">\n                <div class="md-dialog-content" id="nodeInfo_'+t+'">\n                    <node-info node-id="'+t+'"></node-info>\n                </div>\n            </md-dialog-content>')+'<md-dialog-actions layout="row" layout-align="end center">\n                <md-button class="md-primary" ng-click="openInNewWindow()" aria-label="{{ \'openInNewWindow\' | translate }}">{{ \'openInNewWindow\' | translate }}</md-button>\n                <md-button class="md-primary" ng-click="close()" aria-label="{{ \'close\' | translate }}">{{ \'close\' | translate }}</md-button>\n            </md-dialog-actions></md-dialog>';this.$mdDialog.show({template:r,fullscreen:!0,controller:["$scope","$mdDialog",function(e,i){e.openInNewWindow=function(){var e=window.open("","_blank"),r="<link rel='stylesheet' href='../wise5/lib/bootstrap/css/bootstrap.min.css' />\n                            <link rel='stylesheet' href='../wise5/themes/default/style/monitor.css'>\n                            <link rel='stylesheet' href='../wise5/themes/default/style/angular-material.css'>\n                            <link rel='stylesheet' href='../wise5/lib/summernote/dist/summernote.css' />\n                            <link rel=\"stylesheet\" href=\"http://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic%7CMaterial+Icons\" media=\"all\">\n                            <body class=\"layout-column\">\n                                <div class=\"layout-column\">"+('<md-toolbar class="layout-row">\n                                <div class="md-toolbar-tools primary-bg" style="color: #ffffff;">\n                                    <h2>'+n+"</h2>\n                                </div>\n                            </md-toolbar>")+'<md-content class="md-padding">'+document.getElementById("nodeInfo_"+t).innerHTML+"</div></md-content></div>\n                            </body>";e.document.write(r),i.hide()},e.close=function(){i.hide()}}],targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0})}}]),t}();r.$inject=["$filter","$http","$injector","$mdDialog","$q","ConfigService","ProjectService","StudentDataService"],e.default=r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=t,this.$q=n,this.$rootScope=i,this.ConfigService=r,this.ProjectService=o,this.StudentAssetService=s,this.StudentDataService=a,this.config={enabled:!1,label:"Notebook",icon:"book",enableAddNew:!0,addIcon:"note_add",itemTypes:{note:{enabled:!0,requireTextOnEveryNote:!1,enableLink:!0,enableClipping:!0,enableStudentUploads:!0,type:"note",label:{singular:"note",plural:"notes",link:"Manage Notes",icon:"note",color:"#1565C0"}},question:{enabled:!1,enableLink:!0,enableClipping:!0,enableStudentUploads:!0,type:"question",label:{singular:"question",plural:"questions",link:"Manage Questions",icon:"live_help",color:"#F57C00"}},report:{enabled:!1,enableLink:!0,type:"report",label:{singular:"report",plural:"reports",link:"Report",icon:"assignment",color:"#AD1457"},notes:[]}}},this.reports=[],this.publicNotebookItems={}}return n(e,[{key:"getStudentNotebookConfig",value:function(){return angular.merge(this.config,this.ProjectService.project.notebook)}},{key:"getTeacherNotebookConfig",value:function(){return angular.merge(this.config,this.ProjectService.project.teacherNotebook)}},{key:"editItem",value:function(t,e){this.$rootScope.$broadcast("editNote",{itemId:e,ev:t})}},{key:"addNote",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.$rootScope.$broadcast("addNote",{ev:t,file:e,text:n,studentWorkIds:i,isEditTextEnabled:r,isFileUploadEnabled:o})}},{key:"deleteNote",value:function(t){var e=angular.copy(t);e.id=null,e.content.clientSaveTime=Date.parse(new Date);var n=Date.parse(new Date);return this.saveNotebookItem(e.id,e.nodeId,e.localNotebookItemId,e.type,e.title,e.content,e.groups,e.content.clientSaveTime,n)}},{key:"reviveNote",value:function(t){var e=angular.copy(t);e.id=null,e.content.clientSaveTime=Date.parse(new Date);return this.saveNotebookItem(e.id,e.nodeId,e.localNotebookItemId,e.type,e.title,e.content,e.groups,e.content.clientSaveTime,null)}},{key:"getLatestNotebookItemByLocalNotebookItemId",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ConfigService.getWorkgroupId(),n=this.getNotebookByWorkgroup(e);if(null!=n){var i=n.allItems,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.localNotebookItemId===t)return c}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}return null}},{key:"getLatestNotebookReportItemByReportId",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ConfigService.getWorkgroupId();return this.getLatestNotebookItemByLocalNotebookItemId(t,e)}},{key:"getTemplateReportItemByReportId",value:function(t){var e=this.config.itemTypes.report.notes,n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a.reportId===t)return{id:null,type:"report",localNotebookItemId:t,content:a}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return null}},{key:"getMaxScoreByReportId",value:function(t){var e=this.getReportNoteContentByReportId(t);return null!=e&&null!=e.maxScore?e.maxScore:0}},{key:"getNotebookConfig",value:function(){return this.config}},{key:"getReportNoteContentByReportId",value:function(t){var e=this.config.itemTypes.report.notes,n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a.reportId===t)return a}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return null}},{key:"isNotebookEnabled",value:function(){return null!=this.ProjectService.project.notebook&&this.ProjectService.project.notebook.enabled}},{key:"isTeacherNotebookEnabled",value:function(){return null!=this.ProjectService.project.teacherNotebook&&this.ProjectService.project.teacherNotebook.enabled}},{key:"isStudentNoteEnabled",value:function(){return null!=this.ProjectService.project.notebook&&this.ProjectService.project.notebook.itemTypes.note.enabled}},{key:"isStudentNoteClippingEnabled",value:function(){return this.isStudentNoteEnabled()&&this.ProjectService.project.notebook.itemTypes.note.enableClipping}},{key:"retrieveNotebookItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.ConfigService.isPreview()){var i=this.ConfigService.getWorkgroupId();this.notebooksByWorkgroup={},this.notebooksByWorkgroup[i]={},this.notebooksByWorkgroup[i].allItems=[],this.notebooksByWorkgroup[i].items=[],this.notebooksByWorkgroup[i].deletedItems=[],this.groupNotebookItems();var r=this.$q.defer();return r.resolve(this.notebooksByWorkgroup[i]),r.promise}var o={method:"GET",url:this.ConfigService.getStudentNotebookURL(),params:{}};return null!=e&&(o.params.workgroupId=e),null!=n&&(o.params.periodId=n),this.$http(o).then(function(e){t.notebooksByWorkgroup={};var n=e.data,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;try{null!=l.studentAssetId?l.studentAsset=t.StudentAssetService.getAssetById(l.studentAssetId):null!=l.studentWorkId?l.studentWork=t.StudentDataService.getStudentWorkByStudentWorkId(l.studentWorkId):"note"!==l.type&&"report"!==l.type||(l.content=angular.fromJson(l.content));var c=l.workgroupId;t.notebooksByWorkgroup.hasOwnProperty(c)?t.notebooksByWorkgroup[c].allItems.push(l):t.notebooksByWorkgroup[c]={allItems:[l]}}catch(t){}}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return t.groupNotebookItems(),t.notebooksByWorkgroup})}},{key:"groupNotebookItems",value:function(){for(var t in this.notebooksByWorkgroup)if(this.notebooksByWorkgroup.hasOwnProperty(t)){var e=this.notebooksByWorkgroup[t];e.items={},e.deletedItems={};for(var n=0;n<e.allItems.length;n++){var i=e.allItems[n],r=i.localNotebookItemId;e.items.hasOwnProperty(r)?e.items[r].push(i):e.items[r]=[i]}for(var o in e.items)if(e.items.hasOwnProperty(o)){var s=e.items[o];if(null!=s){var a=s[s.length-1];null!=a&&null!=a.serverDeleteTime&&(e.deletedItems[o]=s,delete e.items[o])}}}}},{key:"getPrivateNotebookItemById",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getNotebookByWorkgroup(e);if(null!=n){var i=n.allItems,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.id===t)return c}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"getPrivateNotebookItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ConfigService.getWorkgroupId(),e=this.getNotebookByWorkgroup(t),n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e.allItems[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l.groups&&0!=l.groups.length||n.push(l)}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}},{key:"getNotebookItemById",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getPrivateNotebookItemById(t,e);return null==n&&(n=this.getPublicNotebookItemById(t)),n}},{key:"getPublicNotebookItem",value:function(t,e,n){var i=this.publicNotebookItems[t],r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.localNotebookItemId===e&&c.workgroupId===n)return c}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return null}},{key:"getPublicNotebookItemById",value:function(t){for(var e in this.publicNotebookItems){var n=this.publicNotebookItems[e],i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(t===l.id)return l}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return null}},{key:"getNotebookByWorkgroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ConfigService.getWorkgroupId(),e=this.notebooksByWorkgroup[t];return null==e&&(e={allItems:[],items:{},deletedItems:{}}),e}},{key:"retrievePublicNotebookItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.ConfigService.isPreview()){var i=this.$q.defer();return i.resolve({}),i.promise}var r={method:"GET",url:this.ConfigService.getStudentNotebookURL()+"/group/"+e,params:{}};return null!=n&&(r.params.periodId=n),this.$http(r).then(function(n){var i=n.data,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.content=angular.fromJson(c.content)}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return t.publicNotebookItems[e]=i,t.$rootScope.$broadcast("publicNotebookItemsRetrieved",{publicNotebookItems:t.publicNotebookItems}),t.publicNotebookItems})}},{key:"saveNotebookItem",value:function(e,n,i,r,o,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=this,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(this.ConfigService.isPreview())return this.$q(function(t,h){var d={content:s,localNotebookItemId:i,nodeId:n,notebookItemId:e,title:o,type:r,workgroupId:l.ConfigService.getWorkgroupId(),groups:a,clientSaveTime:c,clientDeleteTime:u};d.serverDeleteTime=null!=u?u:null;var f=d.workgroupId;l.notebooksByWorkgroup.hasOwnProperty(f)?l.notebooksByWorkgroup[f].allItems.push(d):l.notebooksByWorkgroup[f]={allItems:[d]},l.groupNotebookItems(),l.$rootScope.$broadcast("notebookUpdated",{notebook:l.notebooksByWorkgroup[f],notebookItem:d}),t()});var h={method:"POST",url:this.ConfigService.getStudentNotebookURL(),headers:{"Content-Type":"application/x-www-form-urlencoded"}},d={workgroupId:this.ConfigService.getWorkgroupId(),periodId:this.ConfigService.getPeriodId(),notebookItemId:e,localNotebookItemId:i,nodeId:n,type:r,title:o,content:angular.toJson(s),groups:angular.toJson(a),clientSaveTime:Date.parse(new Date),clientDeleteTime:u};return"classroomMonitor"===this.ConfigService.getMode()&&delete d.periodId,h.data=t.param(d),this.$http(h).then(function(t){var e=t.data;if(null!=e){"note"!==e.type&&"report"!==e.type||(e.content=angular.fromJson(e.content));var n=e.workgroupId;l.isNotebookItemPrivate(e)&&l.updatePrivateNotebookItem(e,n),l.$rootScope.$broadcast("notebookUpdated",{notebook:l.notebooksByWorkgroup[n],notebookItem:e})}return t.data})}},{key:"updatePrivateNotebookItem",value:function(t,e){this.notebooksByWorkgroup.hasOwnProperty(e)?this.notebooksByWorkgroup[e].allItems.push(t):this.notebooksByWorkgroup[e]={allItems:[t]},this.groupNotebookItems()}},{key:"isNotebookItemPublic",value:function(t){return!this.isNotebookItemPrivate(t)}},{key:"isNotebookItemPrivate",value:function(t){return null==t.groups}},{key:"copyNotebookItem",value:function(e){var n=this;if(!this.ConfigService.isPreview()){var i={method:"POST",url:this.ConfigService.getStudentNotebookURL()+"/parent/"+e,headers:{"Content-Type":"application/x-www-form-urlencoded"}},r={workgroupId:this.ConfigService.getWorkgroupId(),clientSaveTime:Date.parse(new Date)};return i.data=t.param(r),this.$http(i).then(function(t){var e=t.data;return n.handleNewNotebookItem(e)})}}},{key:"addNotebookItemToGroup",value:function(e,n){var i=this;if(!this.ConfigService.isPreview()){var r={method:"POST",url:this.ConfigService.getStudentNotebookURL()+"/group/"+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}},o={workgroupId:this.ConfigService.getWorkgroupId(),notebookItemId:e,clientSaveTime:Date.parse(new Date)};return r.data=t.param(o),this.$http(r).then(function(t){var e=t.data;return i.handleNewNotebookItem(e)})}}},{key:"removeNotebookItemFromGroup",value:function(t,e){var n=this;if(!this.ConfigService.isPreview()){var i={method:"DELETE",url:this.ConfigService.getStudentNotebookURL()+"/group/"+e,params:{workgroupId:this.ConfigService.getWorkgroupId(),notebookItemId:t,clientSaveTime:Date.parse(new Date)}};return this.$http(i).then(function(t){var e=t.data;return n.handleNewNotebookItem(e)})}}},{key:"handleNewNotebookItem",value:function(t){"note"!==t.type&&"report"!==t.type||(t.content=angular.fromJson(t.content));var e=t.workgroupId;return this.notebooksByWorkgroup[e].allItems.push(t),this.groupNotebookItems(),this.$rootScope.$broadcast("notebookUpdated",{notebook:this.notebooksByWorkgroup[e],notebookItem:t}),t}},{key:"saveNotebookToggleEvent",value:function(t,e){var n={curentNodeId:null==e?null:e.id},i=t?"notebookOpened":"notebookClosed";this.StudentDataService.saveVLEEvent(null,null,null,"Notebook",i,n)}}]),e}();i.$inject=["$http","$q","$rootScope","ConfigService","ProjectService","StudentAssetService","StudentDataService"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s,a){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$http=t,this.$q=n,this.$rootScope=i,this.ConfigService=r,this.ProjectService=o,this.StudentWebSocketService=s,this.UtilService=a,this.notifications=[],this.$rootScope.$on("newNotificationReceived",function(t,e){l.setNotificationNodePositionAndTitle(e);for(var n=!0,i=0;i<l.notifications.length;i++){if(l.notifications[i].id===e.id){l.notifications[i]=e,n=!1,l.$rootScope.$broadcast("notificationChanged",e);break}}n&&(l.notifications.push(e),l.$rootScope.$broadcast("notificationChanged",e))})}return n(e,[{key:"createNewNotification",value:function(t,e,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=this.ProjectService.getNodePositionById(e),c=this.ProjectService.getNodePositionAndTitleByNodeId(e),u=this.ProjectService.getComponentByNodeIdAndComponentId(e,n),h=null;return null!=u&&(h=u.type),{id:null,type:t,nodeId:e,groupId:a,componentId:n,componentType:h,nodePosition:l,nodePositionAndTitle:c,fromWorkgroupId:i,toWorkgroupId:r,message:o,data:s,timeGenerated:Date.parse(new Date),timeDismissed:null}}},{key:"retrieveNotifications",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.ConfigService.isPreview())return Promise.resolve(this.notifications);var n={method:"GET",url:this.ConfigService.getNotificationURL(),params:{}};return null!=e?n.params.toWorkgroupId=e:"classroomMonitor"!==this.ConfigService.getMode()&&(n.params.toWorkgroupId=this.ConfigService.getWorkgroupId(),n.params.periodId=this.ConfigService.getPeriodId()),this.$http(n).then(function(e){return t.notifications=e.data,t.notifications.map(function(e){t.setNotificationNodePositionAndTitle(e),null!=e.data&&(e.data=angular.fromJson(e.data))}),t.notifications})}},{key:"setNotificationNodePositionAndTitle",value:function(t){t.nodePosition=this.ProjectService.getNodePositionById(t.nodeId),t.nodePositionAndTitle=this.ProjectService.getNodePositionAndTitleByNodeId(t.nodeId)}},{key:"dismissNotification",value:function(t){this.dismissNotificationToServer(t)}},{key:"sendNotificationForScore",value:function(t){var e=t.notificationType;if(t.isNotifyTeacher||t.isNotifyStudent){var n=this.ConfigService.getWorkgroupId(),i=this.ConfigService.getRunId()+"_"+this.UtilService.generateKey(10),r={};if(t.isAmbient&&(r.isAmbient=!0),null!=t.dismissCode&&(r.dismissCode=t.dismissCode),t.isNotifyStudent){var o=this.ConfigService.getWorkgroupId(),s=t.notificationMessageToStudent;s=(s=(s=s.replace("{{username}}",this.ConfigService.getUsernameByWorkgroupId(n))).replace("{{score}}",t.score)).replace("{{dismissCode}}",t.dismissCode);var a=this.createNewNotification(e,t.nodeId,t.componentId,n,o,s,r,i);this.saveNotificationToServer(a)}if(t.isNotifyTeacher){var l=this.ConfigService.getTeacherWorkgroupId(),c=t.notificationMessageToTeacher;c=(c=(c=c.replace("{{username}}",this.ConfigService.getUsernameByWorkgroupId(n))).replace("{{score}}",t.score)).replace("{{dismissCode}}",t.dismissCode);var u=this.createNewNotification(e,t.nodeId,t.componentId,n,l,c,r,i);this.saveNotificationToServer(u)}}}},{key:"saveNotificationToServer",value:function(e){if(this.ConfigService.isPreview())return this.pretendServerRequest(e);var n={periodId:this.ConfigService.getPeriodId(),fromWorkgroupId:e.fromWorkgroupId,toWorkgroupId:e.toWorkgroupId,nodeId:e.nodeId,componentId:e.componentId,componentType:e.componentType,type:e.type,message:e.message};null!=e.id&&(n.notificationId=e.id),null!=e.data&&(n.data=angular.toJson(e.data)),null!=e.groupId&&(n.groupId=e.groupId),n.timeGenerated=e.timeGenerated,null!=e.timeDismissed&&(n.timeDismissed=e.timeDismissed);var i={method:"POST",url:this.ConfigService.getNotificationURL(),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t.param(n)};return this.$http(i).then(function(t){var e=t.data;return null!=e.data&&(e.data=angular.fromJson(e.data)),e})}},{key:"dismissNotificationToServer",value:function(e){var n=this;if(e.timeDismissed=Date.parse(new Date),this.ConfigService.isPreview())return this.pretendServerRequest(e);if(null!=e.id){var i={notificationId:e.id,fromWorkgroupId:e.fromWorkgroupId,toWorkgroupId:e.toWorkgroupId,type:e.type,timeDismissed:e.timeDismissed};null!=e.groupId&&(i.groupId=e.groupId);var r={method:"POST",url:this.ConfigService.getNotificationURL()+"/dismiss",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t.param(i)};return this.$http(r).then(function(t){var e=t.data;return null!=e.data&&(e.data=angular.fromJson(e.data)),n.$rootScope.$broadcast("notificationChanged",e),e})}}},{key:"pretendServerRequest",value:function(t){var e=this.$q.defer();return e.resolve(t),e.promise}},{key:"getNotifications",value:function(t){var e=this.notifications;if(t){var n=function(n){t.hasOwnProperty(n)&&null!==t[n]&&(e=e.filter(function(e){return e[n]===t[n]}))};for(var i in t)n(i)}return e}},{key:"getAlertNotifications",value:function(t){var e=[],n=t.nodeId,i=t;if(i.type="CRaterResult",t.periodId&&(i.periodId=-1===t.periodId?null:t.periodId),n&&this.ProjectService.isGroupNode(n)){var r=this.ProjectService.getNodeById(n).ids,o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;i.nodeId=u;var h=this.getAlertNotifications(t);e=e.concat(h)}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}}else e=this.getNotifications(i);return e}}]),e}();i.$inject=["$http","$q","$rootScope","ConfigService","ProjectService","StudentWebSocketService","UtilService"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t){var i=n(6);class r extends i.a{constructor(e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g){super(e,n,r,o,s,a,c,u,f,p,m,g),this.$q=i,this.CRaterService=l,this.NotificationService=h,this.OpenResponseService=d,this.studentResponse="",this.isRichTextEnabled=!1,this.onlyShowWork=!1,this.messageDialog=null,this.useCustomCompletionCriteria=!1,this.isVerifyingCRaterItemId=!1,this.cRaterItemIdIsValid=null;let v=this.ProjectService.getThemePath();this.tinymceOptions={menubar:!1,plugins:"link image media autoresize",toolbar:"undo redo | bold italic | superscript subscript | bullist numlist | alignleft aligncenter alignright | link image media",autoresize_bottom_margin:"0",autoresize_min_height:"100",image_advtab:!0,content_css:v+"/style/tinymce.css",setup:function(e){e.on("focus",function(e){t(e.target.editorContainer).addClass("input--focused").parent().addClass("input-wrapper--focused"),t('label[for="'+e.target.id+'"]').addClass("input-label--focused")}),e.on("blur",function(e){t(e.target.editorContainer).removeClass("input--focused").parent().removeClass("input-wrapper--focused"),t('label[for="'+e.target.id+'"]').removeClass("input-label--focused")})}},"student"===this.mode?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton):"grading"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):"onlyShowWork"===this.mode?(this.onlyShowWork=!0,this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):"showPreviousWork"===this.mode&&(this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0);var y;this.isRichTextEnabled=this.componentContent.isRichTextEnabled,null!=this.componentContent.completionCriteria&&(this.useCustomCompletionCriteria=!0),y=this.$scope.componentState,"student"==this.mode?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():null!=y&&this.OpenResponseService.componentStateHasStudentWork(y,this.componentContent)?this.setStudentWork(y):this.UtilService.hasConnectedComponent(this.componentContent)?this.handleConnectedComponents():null==y&&(this.UtilService.hasConnectedComponent(this.componentContent)?this.handleConnectedComponents():null!=this.componentContent.starterSentence&&(this.studentResponse=this.componentContent.starterSentence)):this.setStudentWork(y),this.canSubmit()||(this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.$scope.isDirty=function(){return this.$scope.openResponseController.isDirty}.bind(this),this.$scope.getComponentState=function(t){var e=this.$q.defer();let n=!1,i="change";return t?this.$scope.openResponseController.isSubmitDirty&&(n=!0,i="submit"):this.$scope.openResponseController.isDirty&&(n=!0,i="save"),n?this.$scope.openResponseController.createComponentState(i).then(t=>{e.resolve(t)}):e.resolve(),e.promise}.bind(this),this.$scope.$on("exitNode",function(t,e){}.bind(this)),this.$scope.$on("notebookItemChosen",(t,e)=>{if(e.requester==this.nodeId+"-"+this.componentId){const t=e.notebookItem.content.studentWorkIds[0];this.importWorkByStudentWorkId(t)}});let b=this.componentContent.script;null!=b&&this.ProjectService.retrieveScript(b).then(t=>{new Function(t).call(this)}),this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}handleNodeSubmit(){this.submit("nodeSubmitButton")}setStudentWork(t){if(null!=t){var e=t.studentData;if(null!=e){var n=e.response;null!=n&&(this.studentResponse=n);var i=e.submitCounter;null!=i&&(this.submitCounter=i);var r=e.attachments;null!=r&&(this.attachments=r),this.processLatestStudentWork()}}}hasSubmitMessage(){return!0}confirmSubmit(t){let e="",n=!1;return t<=0?alert(this.$translate("openResponse.youHaveNoMoreChances")):1==t?(e=this.$translate("openResponse.youHaveOneChance",{numberOfSubmitsLeft:t}),n=confirm(e)):t>1&&(e=this.$translate("openResponse.youHaveMultipleChances",{numberOfSubmitsLeft:t}),n=confirm(e)),n}getStudentResponse(){return this.studentResponse}createComponentState(t){var e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={},r=this.getStudentResponse();return i.response=r,i.attachments=angular.copy(this.attachments),i.submitCounter=this.submitCounter,null!=this.parentStudentWorkIds&&(i.parentStudentWorkIds=this.parentStudentWorkIds),n.isSubmit=this.isSubmit,n.studentData=i,n.componentType="OpenResponse",n.nodeId=this.nodeId,n.componentId=this.componentId,n.isCompleted=this.OpenResponseService.isCompleted(this.componentContent,[n],null,null,this.ProjectService.getNodeById(this.nodeId)),this.isSubmit=!1,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}createComponentStateAdditionalProcessing(t,e,n){var i=!1;if("submit"==n&&e.isSubmit?this.isCRaterScoreOnSubmit(this.componentContent)&&(i=!0):"save"==n?this.isCRaterScoreOnSave(this.componentContent)&&(i=!0):"change"!=n&&null!=n||this.isCRaterScoreOnChange(this.componentContent)&&(i=!0),i){var r=this.CRaterService.getCRaterItemId(this.componentContent),o=(new Date).getTime(),s=this.studentResponse;this.$mdDialog.show({template:'<md-dialog aria-label="'+this.$translate("openResponse.pleaseWait")+'"><md-dialog-content><div class="md-dialog-content">'+this.$translate("openResponse.pleaseWaitWeAreScoringYourWork")+"</div></md-dialog-content></md-dialog>",escapeToClose:!1}),this.CRaterService.makeCRaterScoringRequest(r,o,s).then(n=>{if(null!=n){var i=n.data;if(null!=i){e.annotations=[];let t=i.score,n=i.concepts,l=null;if(null!=i.scores){const e=(t,e)=>Math.max(t,e.score);t=i.scores.reduce(e,0)}if(null!=t){const c={value:t,maxAutoScore:this.ProjectService.getMaxScoreForComponent(this.nodeId,this.componentId),concepts:n,autoGrader:"cRater"};null!=i.scores&&(c.scores=i.scores);let u=this.createAutoScoreAnnotation(c),h=null;if(null!=this.$scope.$parent.nodeController){let e=this.$scope.$parent.nodeController.getLatestComponentAnnotations(this.componentId);if(null!=e&&null!=e.score&&null!=e.score.data&&(l=e.score.data.value),this.componentContent.enableGlobalAnnotations&&null!=this.componentContent.globalAnnotationSettings){let e=0;if(null!=this.componentContent.globalAnnotationSettings.globalAnnotationMaxCount&&(e=this.componentContent.globalAnnotationSettings.globalAnnotationMaxCount),null!=(h=this.ProjectService.getGlobalAnnotationGroupByScore(this.componentContent,l,t))){let t=this.AnnotationService.getAllGlobalAnnotationGroups(this.nodeId,this.componentId);h.annotationGroupCreatedTime=u.clientSaveTime,t.length>=e&&(h=null)}null!=h&&h.isGlobal&&null!=h.unGlobalizeCriteria&&h.unGlobalizeCriteria.map(t=>{null!=t.params&&(t.params.criteriaCreatedTimestamp=u.clientSaveTime)}),null!=h&&angular.merge(u.data,h)}}e.annotations.push(u),"authoring"===this.mode&&(null==this.latestAnnotations&&(this.latestAnnotations={}),this.latestAnnotations.score=u);var r=null,o=this.submitCounter;if(null!=(r=this.componentContent.cRater.enableMultipleAttemptScoringRules&&o>1?this.CRaterService.getMultipleAttemptCRaterFeedbackTextByScore(this.componentContent,l,t):this.CRaterService.getCRaterFeedbackTextByScore(this.componentContent,t))){var s={};s.value=r,s.concepts=n,s.autoGrader="cRater";var a=this.createAutoCommentAnnotation(s);this.componentContent.enableGlobalAnnotations&&null!=h&&angular.merge(a.data,h),e.annotations.push(a),"authoring"===this.mode&&(null==this.latestAnnotations&&(this.latestAnnotations={}),this.latestAnnotations.comment=a)}if(this.componentContent.enableNotifications){const e=this.ProjectService.getNotificationByScore(this.componentContent,l,t);null!=e&&(e.score=t,e.nodeId=this.nodeId,e.componentId=this.componentId,this.NotificationService.sendNotificationForScore(e))}this.componentContent.enableGlobalAnnotations&&null!=h&&h.isGlobal&&h.isPopup&&this.$scope.$emit("displayGlobalAnnotations")}}}this.$mdDialog.hide(),t.resolve(e)})}else if(this.ProjectService.hasAdditionalProcessingFunctions(this.nodeId,this.componentId)){let i=this.ProjectService.getAdditionalProcessingFunctions(this.nodeId,this.componentId),r=[];for(let t=0;t<i.length;t++){let o=i[t],s=this.$q.defer(),a=s.promise;r.push(a),o(s,e,n)}this.$q.all(r).then(()=>{t.resolve(e)})}else t.resolve(e)}createAutoScoreAnnotation(t){var e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoScoreAnnotation(e,n,i,r,o,t)}createAutoCommentAnnotation(t){var e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoCommentAnnotation(e,n,i,r,o,t)}getNumRows(){var t=null;return null!=this.componentContent&&(t=this.componentContent.numRows),t}getNumColumns(){var t=null;return null!=this.componentContent&&(t=this.componentContent.numColumns),t}getResponse(){var t=null;return null!=this.studentResponse&&(t=this.studentResponse),t}snipButtonClicked(t){if(this.isDirty){const e=this.$scope.$on("studentWorkSavedToServer",(n,i)=>{let r=i.studentWork;if(r&&this.nodeId===r.nodeId&&this.componentId===r.componentId){const n=null,i=r.studentData.response,o=!1,s=!1;this.NotebookService.addNote(t,n,i,[r.id],o,s),e()}});this.saveButtonClicked()}else{const e=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId),n=null,i=e.studentData.response,r=!1,o=!1;this.NotebookService.addNote(t,n,i,[e.id],r,o)}}isCRaterEnabled(){var t=!1;return this.CRaterService.isCRaterEnabled(this.componentContent)&&(t=!0),t}isCRaterScoreOnSave(){var t=!1;return this.CRaterService.isCRaterScoreOnSave(this.componentContent)&&(t=!0),t}isCRaterScoreOnSubmit(){var t=!1;return this.CRaterService.isCRaterScoreOnSubmit(this.componentContent)&&(t=!0),t}isCRaterScoreOnChange(){var t=!1;return this.CRaterService.isCRaterScoreOnChange(this.componentContent)&&(t=!0),t}isCRaterScoreOnExit(){var t=!1;return this.CRaterService.isCRaterScoreOnExit(this.componentContent)&&(t=!0),t}getRevisions(){return this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId)}createMergedComponentState(t){let e=this.NodeService.createNewComponentState();if(null!=t){let n="";for(let e=0;e<t.length;e++){let i=t[e];if(null!=i){let t=i.studentData;if(null!=t){let e=t.response;null!=e&&""!=e&&(""!=n&&(n+="\n"),n+=e)}}}null!=n&&""!=n&&(e.studentData={},e.studentData.response=n)}return e}studentDataChanged(){this.setIsDirtyAndBroadcast(),""===this.studentResponse?this.setIsSubmitDirty(!1):this.setIsSubmitDirtyAndBroadcast(),this.clearSaveText();this.createComponentStateAndBroadcast("change")}}r.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","AnnotationService","ConfigService","CRaterService","NodeService","NotebookService","NotificationService","OpenResponseService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.a=r}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ProjectService=e}return i(t,[{key:"getPlanningNodes",value:function(){return this.ProjectService.project.planningNodes}},{key:"isPlanning",value:function(t){var e=this.ProjectService.getNodeById(t);return null!=e&&e.planning}},{key:"isPlanningInstance",value:function(t){var e=this.ProjectService.getNodeById(t);return null!=e&&e.planningNodeTemplateId}},{key:"getAvailablePlanningNodes",value:function(t){var e=[],n=this.ProjectService.getNodeById(t);if(null!=n&&null!=n.availablePlanningNodes){var i=n.availablePlanningNodes,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=this.ProjectService.getNodeById(c.nodeId);null!=u&&(null!=c.max&&(u.max=c.max),e.push(u))}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}return e}},{key:"createPlanningNodeInstance",value:function(t,e){var n=this.ProjectService.copyNode(t);return n.planningNodeTemplateId=t,n.id=e,n}},{key:"addPlanningNodeInstanceInside",value:function(t,e){var n=e.id;this.ProjectService.setIdToNode(n,e),this.ProjectService.setIdToElement(n,e),this.ProjectService.addNode(e),this.ProjectService.insertNodeInsideOnlyUpdateTransitions(n,t),this.ProjectService.insertNodeInsideInGroups(n,t),this.ProjectService.recalculatePositionsInGroup(t),this.ProjectService.calculateNodeOrderOfProject()}},{key:"addPlanningNodeInstanceAfter",value:function(t,e){var n=e.id;this.ProjectService.setIdToNode(n,e),this.ProjectService.setIdToElement(n,e),this.ProjectService.addNode(e),this.ProjectService.insertNodeAfterInTransitions(e,t),this.ProjectService.insertNodeAfterInGroups(n,t);var i=this.ProjectService.getParentGroup(t);this.ProjectService.recalculatePositionsInGroup(i.id),this.ProjectService.calculateNodeOrderOfProject()}},{key:"movePlanningNodeInstanceInside",value:function(t,e){this.ProjectService.moveNodesInside([t],e),this.ProjectService.recalculatePositionsInGroup(e),this.ProjectService.calculateNodeOrderOfProject()}},{key:"movePlanningNodeInstanceAfter",value:function(t,e){this.ProjectService.moveNodesAfter([t],e);var n=this.ProjectService.getParentGroup(e);this.ProjectService.recalculatePositionsInGroup(n.id),this.ProjectService.calculateNodeOrderOfProject()}}]),t}();r.$inject=["ProjectService"],e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$http=e,this.$rootScope=n,this.ConfigService=i,this.warningVisible=!1,this.checkMouseEventInMinutesInterval=1,this.showWarningInMinutesInterval=25,this.forceLogoutAfterWarningInMinutesInterval=5,this.lastActivityTimestamp=new Date,this.initializeListeners(),this.initializeSession()}return i(t,[{key:"initializeListeners",value:function(){var t=this;this.$rootScope.$on("goHome",function(){t.goHome()}),this.$rootScope.$on("logOut",function(){t.logOut()})}},{key:"goHome",value:function(){var t=this.ConfigService.getWISEBaseURL(),e=this.ConfigService.getConfigParam("userType"),n=this.ConfigService.getMainHomePageURL();"student"===e?n=t+"/student":"teacher"===e&&(n=t+"/teacher"),window.location.href=n}},{key:"logOut",value:function(){this.$rootScope.$broadcast("exit"),window.location.href=this.ConfigService.getSessionLogOutURL()}},{key:"initializeSession",value:function(){this.ConfigService.isPreview()||this.startCheckMouseEvent()}},{key:"startCheckMouseEvent",value:function(){var t=this;setInterval(function(){t.checkMouseEvent()},this.convertMinutesToMilliseconds(this.checkMouseEventInMinutesInterval))}},{key:"convertMinutesToMilliseconds",value:function(t){return 60*t*1e3}},{key:"mouseMoved",value:function(){this.lastActivityTimestamp=new Date}},{key:"checkMouseEvent",value:function(){this.isInactiveLongEnoughToForceLogout()?this.forceLogOut():this.isInactiveLongEnoughToWarn()&&!this.isShowingWarning()&&this.showWarning()}},{key:"isInactiveLongEnoughToForceLogout",value:function(){return this.getInactiveTimeInMinutes()>=this.showWarningInMinutesInterval+this.forceLogoutAfterWarningInMinutesInterval}},{key:"isInactiveLongEnoughToWarn",value:function(){return this.getInactiveTimeInMinutes()>=this.showWarningInMinutesInterval}},{key:"isShowingWarning",value:function(){return this.warningVisible}},{key:"getInactiveTimeInMinutes",value:function(){return Math.floor(this.getInactiveTimeInMilliseconds()/1e3/60)}},{key:"getInactiveTimeInMilliseconds",value:function(){return new Date-this.lastActivityTimestamp}},{key:"forceLogOut",value:function(){this.$rootScope.$broadcast("logOut")}},{key:"showWarning",value:function(){this.warningVisible=!0,this.$rootScope.$broadcast("showSessionWarning")}},{key:"renewSession",value:function(){this.lastActivityTimestamp=new Date,this.warningVisible=!1}}]),t}();r.$inject=["$http","$rootScope","ConfigService"],e.default=r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$http=n,this.$q=i,this.Upload=r,this.$rootScope=o,this.ConfigService=s,this.$translate=this.$filter("translate"),this.allAssets=[]}return n(e,[{key:"getAssetById",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=this.allAssets[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(s.id===t)return s}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return null}},{key:"retrieveAssets",value:function(){var t=this;if(this.ConfigService.isPreview()){this.allAssets=[];var e=this.$q.defer();return e.resolve(this.allAssets),e.promise}var n={method:"GET",url:this.ConfigService.getStudentAssetsURL(),params:{workgroupId:this.ConfigService.getWorkgroupId()}};return this.$http(n).then(function(e){var n=[],i=e.data,r=t.ConfigService.getStudentUploadsBaseURL(),o=!0,s=!1,a=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;u.isReferenced||null!=u.serverDeleteTime||".DS_Store"===u.fileName||(u.url=r+u.filePath,t.isImage(u)?(u.type="image",u.iconURL=u.url):t.isAudio(u)?(u.type="audio",u.iconURL="wise5/vle/notebook/audio.png"):(u.type="file",u.iconURL="wise5/vle/notebook/file.png"),n.push(u))}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return t.allAssets=n,n})}},{key:"getAssetContent",value:function(t){var e=t.url,n={method:"GET"};return n.url=e,this.$http(n).then(function(t){return t.data})}},{key:"isImage",value:function(t){if(null!=t){var e=t.url;if(null!=e&&-1!==e.lastIndexOf(".")){var n=e.substring(e.lastIndexOf(".")+1);if(-1!=["png","jpg","jpeg","gif"].indexOf(n.toLowerCase()))return!0}}return!1}},{key:"isAudio",value:function(t){if(null!=t){var e=t.url;if(null!=e&&-1!=e.lastIndexOf(".")){var n=e.substring(e.lastIndexOf(".")+1);if(-1!=["wav","mp3","ogg","m4a","m4p","raw","aiff"].indexOf(n.toLowerCase()))return!0}}return!1}},{key:"uploadAsset",value:function(t){var e=this;if(this.ConfigService.isPreview())return this.$q(function(n,i){var r,o=new FileReader;o.onload=(r=t,function(i){var o=i.target.result,s=(r.name,{});return s.file=t,s.url=o,s.type="image",s.iconURL=s.url,e.allAssets.push(s),e.$rootScope.$broadcast("studentAssetsUpdated"),n(s)}),o.readAsDataURL(t)});var n=this.ConfigService.getStudentAssetsURL(),i=this.$q.defer();return this.Upload.upload({url:n,fields:{runId:this.ConfigService.getRunId(),workgroupId:this.ConfigService.getWorkgroupId(),periodId:this.ConfigService.getPeriodId(),clientSaveTime:Date.parse(new Date)},file:t}).success(function(t,n,r,o){if("error"===t)alert(e.$translate("THERE_WAS_AN_ERROR_UPLOADING"));else{var s=e.ConfigService.getStudentUploadsBaseURL();t.url=s+t.filePath,e.isImage(t)?(t.type="image",t.iconURL=t.url):e.isAudio(t)?(t.type="audio",t.iconURL="wise5/vle/notebook/audio.png"):(t.type="file",t.iconURL="wise5/vle/notebook/file.png"),e.allAssets.push(t),e.$rootScope.$broadcast("studentAssetsUpdated"),i.resolve(t)}}).error(function(t,n,i,r){alert(e.$translate("THERE_WAS_AN_ERROR_UPLOADING_YOU_MIGHT_HAVE_REACHED_LIMIT"))}),i.promise}},{key:"uploadAssets",value:function(t){var e=this,n=this.ConfigService.getStudentAssetsURL(),i=t.map(function(t){return e.Upload.upload({url:n,fields:{runId:e.ConfigService.getRunId(),workgroupId:e.ConfigService.getWorkgroupId(),periodId:e.ConfigService.getPeriodId(),clientSaveTime:Date.parse(new Date)},file:t}).progress(function(t){parseInt(100*t.loaded/t.total)}).success(function(t,e,n,i){})});return this.$q.all(i)}},{key:"copyAssetForReference",value:function(e){var n=this;if(this.ConfigService.isPreview())return this.$q(function(t,n){return t(e)});var i={method:"POST"};i.url=this.ConfigService.getStudentAssetsURL()+"/copy",i.headers={"Content-Type":"application/x-www-form-urlencoded"};var r={};return r.studentAssetId=e.id,r.workgroupId=this.ConfigService.getWorkgroupId(),r.periodId=this.ConfigService.getPeriodId(),r.clientSaveTime=Date.parse(new Date),i.data=t.param(r),this.$http(i).then(function(t){var e=t.data;if(null!=e){var i=n.ConfigService.getStudentUploadsBaseURL();if(e.isReferenced&&".DS_Store"!==e.fileName)return e.url=i+e.filePath,n.isImage(e)?(e.type="image",e.iconURL=e.url):n.isAudio(e)?(e.type="audio",e.iconURL="wise5/vle/notebook/audio.png"):(e.type="file",e.iconURL="wise5/vle/notebook/file.png"),e}return null})}},{key:"deleteAsset",value:function(e){var n=this,i={method:"POST"};i.url=this.ConfigService.getStudentAssetsURL()+"/remove",i.headers={"Content-Type":"application/x-www-form-urlencoded"};var r={};return r.studentAssetId=e.id,r.workgroupId=this.ConfigService.getWorkgroupId(),r.periodId=this.ConfigService.getPeriodId(),r.clientDeleteTime=Date.parse(new Date),i.data=t.param(r),this.$http(i).then(function(t){return n.allAssets=n.allAssets.splice(n.allAssets.indexOf(e),1),n.$rootScope.$broadcast("studentAssetsUpdated"),e})}}]),e}();i.$inject=["$filter","$http","$q","Upload","$rootScope","ConfigService"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function e(t,n,i,r,o,s,a,l,c,u){var h=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$http=n,this.$injector=i,this.$q=r,this.$rootScope=o,this.AnnotationService=s,this.ConfigService=a,this.PlanningService=l,this.ProjectService=c,this.UtilService=u,this.$translate=this.$filter("translate"),this.currentNode=null,this.previousStep=null,this.studentData=null,this.stackHistory=[],this.visitedNodesHistory=[],this.nodeStatuses={},this.runStatus=null,this.maxScore=null,this.maxPlanningNodeNumber=0,this.saveToServerRequestCount=0,this.dummyStudentWorkId=1,this.$rootScope.$on("nodeStatusesChanged",function(t,e){h.AnnotationService.calculateActiveGlobalAnnotationGroups(),h.AnnotationService.getActiveGlobalAnnotationGroups().map(function(t){t.annotations.map(function(t){if(null!=t.data&&t.data.isGlobal){var e=t.data.unGlobalizeConditional,n=t.data.unGlobalizeCriteria;if(null!=n)if("any"===e){var i=!1,r=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=h.evaluateCriteria(c);i=i||u}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}i&&(t.data.unGlobalizedTimestamp=Date.parse(new Date),h.saveAnnotations([t]))}else if("all"===e){var d=!0,f=!0,p=!1,m=void 0;try{for(var g,v=n[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value,b=h.evaluateCriteria(y);d=d&&b}}catch(t){p=!0,m=t}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}d&&(t.data.unGlobalizedTimestamp=Date.parse(new Date),h.saveAnnotations([t]))}}})})}),this.$rootScope.$on("newAnnotationReceived",function(t,e){if(e){var n=e.annotation;h.handleAnnotationReceived(n)}}),this.$rootScope.$on("notebookUpdated",function(t,e){var n=h.ConfigService.getMode();"student"!==n&&"preview"!==n||h.updateNodeStatuses()})}var i,r,o;return i=e,(r=[{key:"retrieveStudentData",value:function(){var t=this;if(!this.ConfigService.isPreview()){var e=this.ConfigService.getConfigParam("studentDataURL"),n={method:"GET"};n.url=e;var i={};return i.workgroupId=this.ConfigService.getWorkgroupId(),i.runId=this.ConfigService.getRunId(),i.getStudentWork=!0,i.getEvents=!0,i.getAnnotations=!0,i.toWorkgroupId=this.ConfigService.getWorkgroupId(),n.params=i,this.$http(n).then(function(e){var n=e.data;if(null!=n){t.studentData={},t.studentData.componentStates=[],t.studentData.nodeStates=[];var i=n.studentWorkList,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;null!=c.componentId?t.studentData.componentStates.push(c):t.studentData.nodeStates.push(c)}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}if(null!=t.ProjectService.project.nodes&&t.ProjectService.project.nodes.length>0){var u=!0,h=!1,d=void 0;try{for(var f,p=t.ProjectService.project.nodes[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;if(m.planning){var g=t.getLatestNodeStateByNodeId(m.id);if(null!=g){var v=g.studentData.nodes;if(null!=v){var y=!0,b=!1,_=void 0;try{for(var w,S=v[Symbol.iterator]();!(y=(w=S.next()).done);y=!0){var x=w.value,C=x.id;if(x.planning)for(var k=0;k<t.ProjectService.project.nodes.length;k++)t.ProjectService.project.nodes[k].id===C&&(t.ProjectService.project.nodes[k].ids=x.ids);else t.ProjectService.project.nodes.push(x)}}catch(t){b=!0,_=t}finally{try{y||null==S.return||S.return()}finally{if(b)throw _}}}}}}}catch(t){h=!0,d=t}finally{try{u||null==p.return||p.return()}finally{if(h)throw d}}t.ProjectService.parseProject()}t.studentData.events=n.events,t.studentData.annotations=n.annotations,t.AnnotationService.setAnnotations(t.studentData.annotations),t.populateHistories(t.studentData.events),t.updateNodeStatuses()}return t.studentData})}this.studentData={},this.studentData.componentStates=[],this.studentData.nodeStates=[],this.studentData.events=[],this.studentData.annotations=[],this.studentData.username=this.$translate("PREVIEW_STUDENT"),this.studentData.userId="0",this.AnnotationService.setAnnotations(this.studentData.annotations),this.populateHistories(this.studentData.events),this.updateNodeStatuses()}},{key:"retrieveRunStatus",value:function(){var t=this;if(!this.ConfigService.isPreview()){var e=this.ConfigService.getConfigParam("runStatusURL"),n={runId:this.ConfigService.getConfigParam("runId")},i={method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return i.url=e,i.params=n,this.$http(i).then(function(e){if(null!=e){var n=e.data;null!=n&&(t.runStatus=n)}})}this.runStatus={}}},{key:"getNodeStatuses",value:function(){return this.nodeStatuses}},{key:"setNodeStatusByNodeId",value:function(t,e){if(null!=t&&null!=e){var n=this.nodeStatuses;null!=n&&(n[t]=e)}}},{key:"getNodeStatusByNodeId",value:function(t){var e=this.nodeStatuses;return null!=t&&null!=e?e[t]:null}},{key:"updateNodeStatuses",value:function(){var t=this.ProjectService.getNodes(),e=this.PlanningService.getPlanningNodes(),n=this.ProjectService.getGroups();if(null!=t){null!=e&&(t=t.concat(e));var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.ProjectService.isGroupNode(l.id)||this.updateNodeStatusByNode(l)}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}if(null!=n){var c=!0,u=!1,h=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;p.depth=this.ProjectService.getNodeDepth(p.id)}}catch(t){u=!0,h=t}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}n.sort(function(t,e){return e.depth-t.depth});var m=!0,g=!1,v=void 0;try{for(var y,b=n[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var _=y.value;this.updateNodeStatusByNode(_)}}catch(t){g=!0,v=t}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}}this.maxScore=this.getMaxScore(),this.$rootScope.$broadcast("nodeStatusesChanged")}},{key:"updateNodeStatusByNode",value:function(t){if(null!=t){var e=t.id,n={};n.nodeId=e,n.isVisitable=!0,n.isCompleted=!0;var i=this.ProjectService.getConstraintsForNode(t);if(0==this.ConfigService.getConfigParam("constraints")&&(i=null),null==i||0==i.length)-1!=this.ProjectService.getFlattenedProjectAsNodeIds().indexOf(e)||this.ProjectService.isGroupNode(e)?(n.isVisible=!0,n.isVisitable=!0):(n.isVisible=!1,n.isVisitable=!0);else{var r=[],o=[],s=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;if(null!=h){var d=this.evaluateConstraint(t,h),f=h.action;null!=f&&("makeThisNodeNotVisible"===f?r.push(d):"makeThisNodeNotVisitable"===f?o.push(d):"makeAllNodesAfterThisNotVisible"===f?r.push(d):"makeAllNodesAfterThisNotVisitable"===f?o.push(d):"makeAllOtherNodesNotVisible"===f?r.push(d):"makeAllOtherNodesNotVisitable"===f&&o.push(d))}}}catch(t){a=!0,l=t}finally{try{s||null==u.return||u.return()}finally{if(a)throw l}}for(var p=!0,m=!0,g=0,v=r;g<v.length;g++){var y=v[g];p=p&&y}for(var b=0,_=o;b<_.length;b++){var w=_[b];m=m&&w}n.isVisible=p,n.isVisitable=m}if(n.isCompleted=this.isCompleted(e),n.isVisited=this.isNodeVisited(e),null==this.getNodeStatusByNodeId(e))this.setNodeStatusByNodeId(e,n);else{var S=this.nodeStatuses[e].isCompleted;this.nodeStatuses[e].isVisited=n.isVisited,this.nodeStatuses[e].isVisible=n.isVisible,this.nodeStatuses[e].isVisitable=n.isVisitable,this.nodeStatuses[e].isCompleted=n.isCompleted,0==S&&n.isCompleted&&this.$rootScope.$broadcast("nodeCompleted",{nodeId:e})}this.nodeStatuses[e].progress=this.getNodeProgressById(e),this.nodeStatuses[e].icon=this.ProjectService.getNodeIconByNodeId(e);var x=this.getLatestComponentStateByNodeId(e);null!=x&&(this.nodeStatuses[e].latestComponentStateClientSaveTime=x.clientSaveTime,this.nodeStatuses[e].latestComponentStateServerSaveTime=x.serverSaveTime)}}},{key:"evaluateConstraint",value:function(t,e){return null!=e&&null!=e.removalCriteria&&this.evaluateNodeConstraint(t,e)}},{key:"evaluateNodeConstraint",value:function(t,e){var n=!1;if(null!=e){var i=e.removalCriteria,r=e.removalConditional;if(null==i)n=!0;else{var o=!0,s=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;if(null!=h){var d=this.evaluateCriteria(h);o?(n=d,o=!1):n="any"===r?n||d:n&&d}}}catch(t){a=!0,l=t}finally{try{s||null==u.return||u.return()}finally{if(a)throw l}}}}return n}},{key:"evaluateCriteria",value:function(t){var e=!1;if(null!=t){var n=t.name;null==n||("branchPathTaken"===n?e=this.evaluateBranchPathTakenCriteria(t):"isVisible"===n||"isVisitable"===n||("isVisited"===n?e=this.evaluateIsVisitedCriteria(t):"isVisitedAfter"===n?e=this.evaluateIsVisitedAfterCriteria(t):"isRevisedAfter"===n?e=this.evaluateIsRevisedAfterCriteria(t):"isVisitedAndRevisedAfter"===n?e=this.evaluateIsVisitedAndRevisedAfterCriteria(t):"isCompleted"===n?e=this.evaluateIsCompletedCriteria(t):"isCorrect"===n?e=this.evaluateIsCorrectCriteria(t):"choiceChosen"===n?e=this.evaluateChoiceChosenCriteria(t):"isPlanningActivityCompleted"===n?e=this.evaluateIsPlanningActivityCompletedCriteria(t):"score"===n?e=this.evaluateScoreCriteria(t):"usedXSubmits"===n?e=this.evaluateUsedXSubmitsCriteria(t):"wroteXNumberOfWords"===n?e=this.evaluateNumberOfWordsWrittenCriteria(t):"addXNumberOfNotesOnThisStep"===n?e=this.evaluateAddXNumberOfNotesOnThisStepCriteria(t):"fillXNumberOfRows"===n&&(e=this.evaluateFillXNumberOfRowsCriteria(t))))}return e}},{key:"evaluateIsCompletedCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.nodeId;return this.isCompleted(e)}return!1}},{key:"evaluateIsCorrectCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params,n=e.nodeId,i=e.componentId;if(null!=n&&null!=i){var r=this.getComponentStatesByNodeIdAndComponentId(n,i);if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=u.studentData;if(null!=h&&h.isCorrect)return!0}}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}}}return!1}},{key:"evaluateIsPlanningActivityCompletedCriteria",value:function(t){var e=!1;if(null!=t&&null!=t.params){var n=t.params,i=n.nodeId,r=n.planningStepsCreated,o=n.planningStepsCompleted,s=!1,a=!1;if(null==r)s=!0;else{var l=this.getNodeStatesByNodeId(i);if(null!=l)for(var c=l.length-1;c>=0;c--){var u=0,h=l[c];if(null!=h){var d=h.studentData;if(null!=d){var f=d.nodes;if(null!=f){var p=!0,m=!1,g=void 0;try{for(var v,y=f[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var b=v.value;null!=b&&"node"===b.type&&null!=b.planningNodeTemplateId&&u++}}catch(t){m=!0,g=t}finally{try{p||null==y.return||y.return()}finally{if(m)throw g}}if(u>=r){s=!0;break}}}}}}null==o?a=!0:this.isCompleted(i)&&(a=!0),s&&a&&(e=!0)}return e}},{key:"evaluateBranchPathTakenCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.fromNodeId,n=t.params.toNodeId,i=this.getBranchPathTakenEventsByNodeId(e);if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c){var u=c.data;if(null!=u){var h=u.fromNodeId,d=u.toNodeId;if(e===h&&n===d)return!0}}}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}}return!1}},{key:"evaluateIsVisitedCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.nodeId,n=this.studentData.events;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l&&e==l.nodeId&&"nodeEntered"===l.event)return!0}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}}return!1}},{key:"evaluateIsVisitedAfterCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.isVisitedAfterNodeId,n=t.params.criteriaCreatedTimestamp,i=this.studentData.events;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c&&e==c.nodeId&&"nodeEntered"===c.event&&c.clientSaveTime>n)return!0}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}}return!1}},{key:"evaluateIsRevisedAfterCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.isRevisedAfterNodeId,n=t.params.isRevisedAfterComponentId,i=t.params.criteriaCreatedTimestamp;if(this.getLatestComponentStateByNodeIdAndComponentId(e,n).clientSaveTime>i)return!0}return!1}},{key:"evaluateIsVisitedAndRevisedAfterCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params.isVisitedAfterNodeId,n=t.params.isRevisedAfterNodeId,i=t.params.isRevisedAfterComponentId,r=t.params.criteriaCreatedTimestamp,o=this.studentData.events;if(null!=o){var s=!0,a=!1,l=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var h=c.value;if(null!=h&&e==h.nodeId&&"nodeEntered"===h.event&&h.clientSaveTime>r&&this.getLatestComponentStateByNodeIdAndComponentId(n,i).clientSaveTime>h.clientSaveTime)return!0}}catch(t){a=!0,l=t}finally{try{s||null==u.return||u.return()}finally{if(a)throw l}}}}return!1}},{key:"getBranchPathTakenEventsByNodeId",value:function(t){var e=[],n=this.studentData.events;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&t===l.nodeId&&"branchPathTaken"===l.event&&e.push(l)}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}return e}},{key:"evaluateChoiceChosenCriteria",value:function(t){return!!this.$injector.has("MultipleChoiceService")&&this.$injector.get("MultipleChoiceService").choiceChosen(t)}},{key:"evaluateScoreCriteria",value:function(t){var e=t.params;if(null!=e){var n=e.nodeId,i=e.componentId,r=e.scores,o=this.ConfigService.getWorkgroupId();if(null!=n&&null!=i&&null!=r){var s=this.AnnotationService.getLatestScoreAnnotation(n,i,o,"any");if(null!=s){var a=this.AnnotationService.getScoreValueFromScoreAnnotation(s);if(-1!=r.indexOf(a)||null!=a&&-1!=r.indexOf(a.toString()))return!0}}}return!1}},{key:"evaluateUsedXSubmitsCriteria",value:function(t){var e=t.params;if(null!=e){var n=e.nodeId,i=e.componentId,r=e.requiredSubmitCount;if(null!=n&&null!=i){var o=this.getComponentStatesByNodeIdAndComponentId(n,i);if(null!=o){var s=0,a=0,l=!0,c=!1,u=void 0;try{for(var h,d=o[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;if(null!=f){f.isSubmit&&s++;var p=f.studentData;null!=p&&null!=p.submitCounter&&p.submitCounter>a&&(a=p.submitCounter)}}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}if(s>=r||a>=r)return!0}}}return!1}},{key:"evaluateNumberOfWordsWrittenCriteria",value:function(t){if(null!=t&&null!=t.params){var e=t.params,n=e.nodeId,i=e.componentId,r=e.requiredNumberOfWords;if(null!=n&&null!=i){var o=this.getLatestComponentStateByNodeIdAndComponentId(n,i);if(null!=o){var s=o.studentData.response;if(this.UtilService.wordCount(s)>=r)return!0}}}return!1}},{key:"evaluateAddXNumberOfNotesOnThisStepCriteria",value:function(t){var e=t.params,n=e.nodeId,i=e.requiredNumberOfNotes,r=this.$injector.get("NotebookService");try{var o=r.getNotebookByWorkgroup();return this.getNotebookItemsByNodeId(o,n).length>=i}catch(t){}return!1}},{key:"evaluateFillXNumberOfRowsCriteria",value:function(t){var e=t.params,n=e.nodeId,i=e.componentId,r=e.requiredNumberOfFilledRows,o=e.tableHasHeaderRow,s=e.requireAllCellsInARowToBeFilled,a=this.$injector.get("TableService"),l=this.getLatestComponentStateByNodeIdAndComponentId(n,i);return null!=l&&a.hasRequiredNumberOfFilledRows(l,r,o,s)}},{key:"getNotebookItemsByNodeId",value:function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t.allItems[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;l.nodeId===e&&n.push(l)}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}},{key:"populateHistories",value:function(t){if(this.stackHistory=[],this.visitedNodesHistory=[],null!=t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;null!=s&&"nodeEntered"===s.event&&(this.updateStackHistory(s.nodeId),this.updateVisitedNodesHistory(s.nodeId))}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"getStackHistoryAtIndex",value:function(t){return t<0&&(t=this.stackHistory.length+t),null!=this.stackHistory&&this.stackHistory.length>0?this.stackHistory[t]:null}},{key:"getStackHistory",value:function(){return this.stackHistory}},{key:"updateStackHistory",value:function(t){var e=this.stackHistory.indexOf(t);-1===e?this.stackHistory.push(t):this.stackHistory.splice(e+1,this.stackHistory.length)}},{key:"updateVisitedNodesHistory",value:function(t){-1===this.visitedNodesHistory.indexOf(t)&&this.visitedNodesHistory.push(t)}},{key:"getVisitedNodesHistory",value:function(){return this.visitedNodesHistory}},{key:"isNodeVisited",value:function(t){var e=this.visitedNodesHistory;return null!=e&&-1!==e.indexOf(t)}},{key:"createComponentState",value:function(){var t={};return t.timestamp=Date.parse(new Date),t}},{key:"addComponentState",value:function(t){null!=this.studentData&&null!=this.studentData.componentStates&&this.studentData.componentStates.push(t)}},{key:"addNodeState",value:function(t){null!=this.studentData&&null!=this.studentData.nodeStates&&this.studentData.nodeStates.push(t)}},{key:"getNodeStates",value:function(){return null!=this.studentData&&null!=this.studentData.nodeStates?this.studentData.nodeStates:[]}},{key:"getNodeStatesByNodeId",value:function(t){var e=[];if(null!=this.studentData&&null!=this.studentData.nodeStates){var n=this.studentData.nodeStates,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&t===l.nodeId&&e.push(l)}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}return e}},{key:"addEvent",value:function(t){null!=this.studentData&&null!=this.studentData.events&&this.studentData.events.push(t)}},{key:"addAnnotation",value:function(t){null!=this.studentData&&null!=this.studentData.annotations&&this.studentData.annotations.push(t)}},{key:"handleAnnotationReceived",value:function(t){this.studentData.annotations.push(t),t.notebookItemId?this.$rootScope.$broadcast("notebookItemAnnotationReceived",{annotation:t}):this.$rootScope.$broadcast("annotationReceived",{annotation:t})}},{key:"saveComponentEvent",value:function(t,e,n,i){if(null!=t&&null!=e&&null!=n){var r=t.nodeId,o=t.componentId,s=t.componentType;null!=r&&null!=o&&null!=s?this.saveEvent("Component",r,o,s,e,n,i):alert(this.$translate("STUDENT_DATA_SERVICE_SAVE_COMPONENT_EVENT_NODE_ID_COMPONENT_ID_COMPONENT_TYPE_ERROR"))}else alert(this.$translate("STUDENT_DATA_SERVICE_SAVE_COMPONENT_EVENT_COMPONENT_CATEGORY_EVENT_ERROR"))}},{key:"saveVLEEvent",value:function(t,e,n,i,r,o){null!=i&&null!=r?this.saveEvent("VLE",t,e,n,i,r,o):alert(this.$translate("STUDENT_DATA_SERVICE_SAVE_VLE_EVENT_CATEGORY_EVENT_ERROR"))}},{key:"saveEvent",value:function(t,e,n,i,r,o,s){var a=[],l=this.createNewEvent();l.context=t,l.nodeId=e,l.componentId=n,l.type=i,l.category=r,l.event=o,l.data=s,a.push(l),this.saveToServer(null,null,a,null)}},{key:"createNewEvent",value:function(){var t={};return t.projectId=this.ConfigService.getProjectId(),t.runId=this.ConfigService.getRunId(),t.periodId=this.ConfigService.getPeriodId(),t.workgroupId=this.ConfigService.getWorkgroupId(),t.clientSaveTime=Date.parse(new Date),t}},{key:"saveNodeStates",value:function(t){this.saveToServer(null,t,null,null)}},{key:"saveAnnotations",value:function(t){this.saveToServer(null,null,null,t)}},{key:"saveToServer",value:function(e,n,i,r){var o=this;this.saveToServerRequestCount+=1;var s=[];if(null!=e&&e.length>0){var a=!0,l=!1,c=void 0;try{for(var u,h=e[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;null!=d&&(d.requestToken=this.UtilService.generateKey(),this.addComponentState(d),s.push(d))}}catch(t){l=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}if(null!=n&&n.length>0){var f=!0,p=!1,m=void 0;try{for(var g,v=n[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;null!=y&&(y.requestToken=this.UtilService.generateKey(),this.addNodeState(y),s.push(y))}}catch(t){p=!0,m=t}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}}if(null!=i&&i.length>0){var b=!0,_=!1,w=void 0;try{for(var S,x=i[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value;null!=C&&(C.requestToken=this.UtilService.generateKey(),this.addEvent(C))}}catch(t){_=!0,w=t}finally{try{b||null==x.return||x.return()}finally{if(_)throw w}}}else i=[];if(null!=r&&r.length>0){var k=!0,T=!1,M=void 0;try{for(var E,A=r[Symbol.iterator]();!(k=(E=A.next()).done);k=!0){var I=E.value;null!=I&&(I.requestToken=this.UtilService.generateKey(),null==I.id&&this.addAnnotation(I))}}catch(t){T=!0,M=t}finally{try{k||null==A.return||A.return()}finally{if(T)throw M}}}else r=[];if(this.ConfigService.isPreview()){var $={studentWorkList:s,events:i,annotations:r};this.saveToServerSuccess($);var D=this.$q.defer();return D.resolve($),D.promise}if(this.ConfigService.isRunActive()){var L={};L.projectId=this.ConfigService.getProjectId(),L.runId=this.ConfigService.getRunId(),L.workgroupId=this.ConfigService.getWorkgroupId(),L.studentWorkList=angular.toJson(s),L.events=angular.toJson(i),L.annotations=angular.toJson(r);var P={method:"POST"};return P.url=this.ConfigService.getConfigParam("studentDataURL"),P.headers={"Content-Type":"application/x-www-form-urlencoded"},P.data=t.param(L),this.$http(P).then(function(t){if(null!=t&&null!=t.data){var e=t.data;return o.saveToServerSuccess(e),e}},function(t){return o.saveToServerRequestCount-=1,null})}return this.$q.defer().promise}},{key:"saveToServerSuccess",value:function(t){var e=Date.parse(new Date);if(t.studentWorkList){var n=t.studentWorkList,i=this.studentData.componentStates;this.studentData.nodeStates&&(i=i.concat(this.studentData.nodeStates));var r=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=i.length-1;u>=0;u--){var h=i[u];if(h.requestToken&&h.requestToken===c.requestToken){h.id=c.id,h.serverSaveTime=c.serverSaveTime?c.serverSaveTime:e,h.requestToken=null,"preview"==this.ConfigService.getMode()&&null==h.id&&(h.id=this.dummyStudentWorkId,this.dummyStudentWorkId++),this.$rootScope.$broadcast("studentWorkSavedToServer",{studentWork:h});break}}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}if(t.events){var d=t.events,f=this.studentData.events,p=!0,m=!1,g=void 0;try{for(var v,y=d[Symbol.iterator]();!(p=(v=y.next()).done);p=!0)for(var b=v.value,_=f.length-1;_>=0;_--){var w=f[_];if(w.requestToken&&w.requestToken===b.requestToken){w.id=b.id,w.serverSaveTime=b.serverSaveTime?b.serverSaveTime:e,w.requestToken=null,this.$rootScope.$broadcast("eventSavedToServer",{event:w});break}}}catch(t){m=!0,g=t}finally{try{p||null==y.return||y.return()}finally{if(m)throw g}}}if(t.annotations){var S=t.annotations,x=this.studentData.annotations,C=!0,k=!1,T=void 0;try{for(var M,E=S[Symbol.iterator]();!(C=(M=E.next()).done);C=!0)for(var A=M.value,I=x.length-1;I>=0;I--){var $=x[I];if($.requestToken&&$.requestToken===A.requestToken){$.id=A.id,$.serverSaveTime=A.serverSaveTime?A.serverSaveTime:e,$.requestToken=null,this.$rootScope.$broadcast("annotationSavedToServer",{annotation:$});break}}}catch(t){k=!0,T=t}finally{try{C||null==E.return||E.return()}finally{if(k)throw T}}}this.saveToServerRequestCount-=1,0==this.saveToServerRequestCount&&(this.updateNodeStatuses(),this.saveStudentStatus())}},{key:"saveStudentStatus",value:function(){if(!this.ConfigService.isPreview()&&this.ConfigService.isRunActive()){var e=this.ConfigService.getStudentStatusURL();if(null!=e){var n=this.ConfigService.getRunId(),i=this.ConfigService.getPeriodId(),r=this.ConfigService.getWorkgroupId(),o=this.getCurrentNodeId(),s=this.getNodeStatuses(),a=this.getProjectCompletion(),l={};l.runId=n,l.periodId=i,l.workgroupId=r,l.currentNodeId=o,l.nodeStatuses=s,l.projectCompletion=a;var c=angular.toJson(l),u={};u.runId=n,u.periodId=i,u.workgroupId=r,u.status=c;var h={method:"POST"};return h.url=e,h.headers={"Content-Type":"application/x-www-form-urlencoded"},h.data=t.param(u),this.$http(h).then(function(t){return!0},function(t){return!1})}}}},{key:"retrieveComponentStates",value:function(t,e,n){}},{key:"getLatestComponentState",value:function(){var t=this.studentData;if(null!=t){var e=t.componentStates;if(null!=e)return e[e.length-1]}return null}},{key:"isComponentSubmitDirty",value:function(){var t=this.getLatestComponentState();return!(!t||t.isSubmit)}},{key:"getLatestNodeStateByNodeId",value:function(t){var e=this.getNodeStatesByNodeId(t);return null!=e&&e.length>0?e[e.length-1]:null}},{key:"getLatestComponentStateByNodeIdAndComponentId",value:function(t,e){if(t){var n=this.studentData;if(n){var i=n.componentStates;if(i)for(var r=i.length-1;r>=0;r--){var o=i[r];if(o&&t===o.nodeId){if(!e)return o;if(e===o.componentId)return o}}}}return null}},{key:"getLatestSubmitComponentState",value:function(t,e){for(var n=this.studentData.componentStates,i=n.length-1;i>=0;i--){var r=n[i];if(r.nodeId===t&&r.componentId===e&&r.isSubmit)return r}return null}},{key:"getStudentWorkByStudentWorkId",value:function(t){if(null!=t){var e=this.studentData.componentStates;if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&a.id===t)return a}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}var l=this.studentData.nodeStates;if(null!=l){var c=!0,u=!1,h=void 0;try{for(var d,f=l[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;if(null!=p&&p.id===t)return p}}catch(t){u=!0,h=t}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}}}return null}},{key:"getComponentStates",value:function(){return this.studentData.componentStates}},{key:"getComponentStatesByNodeId",value:function(t){var e=[];if(null!=t){var n=this.studentData;if(null!=n){var i=n.componentStates;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;null!=c&&t==c.nodeId&&e.push(c)}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}}}return e}},{key:"getComponentStatesByNodeIdAndComponentId",value:function(t,e){var n=[];if(null!=t&&null!=e){var i=this.studentData;if(null!=i){var r=i.componentStates;if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u){var h=u.nodeId,d=u.componentId;t==h&&e==d&&n.push(u)}}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}}}return n}},{key:"getEvents",value:function(){return null!=this.studentData&&null!=this.studentData.events?this.studentData.events:[]}},{key:"getEventsByNodeId",value:function(t){var e=[];if(null!=t&&null!=this.studentData&&null!=this.studentData.events){var n=this.studentData.events,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;null!=l&&t===l.nodeId&&e.push(l)}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}return e}},{key:"getEventsByNodeIdAndComponentId",value:function(t,e){var n=[];if(null!=t&&null!=this.studentData&&null!=this.studentData.events){var i=this.studentData.events,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c){var u=c.nodeId,h=c.componentId;t===u&&e===h&&n.push(c)}}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}return n}},{key:"getLatestNodeEnteredEventNodeIdWithExistingNode",value:function(){for(var t=this.studentData.events,e=t.length-1;e>=0;e--){var n=t[e];if(null!=n&&"nodeEntered"==n.event){var i=n.nodeId;if(null!=this.ProjectService.getNodeById(i)&&this.ProjectService.isActive(i))return i}}return null}},{key:"canVisitNode",value:function(t){if(null!=t){var e=this.getNodeStatusByNodeId(t);if(null!=e&&e.isVisitable)return!0}return!1}},{key:"getNodeStatusByNodeId",value:function(t){return null!=t?this.nodeStatuses[t]:null}},{key:"getNodeProgressById",value:function(t){var e=0,n=0,i=0,r=0,o={};if(this.ProjectService.isGroupNode(t)){var s=this.ProjectService.getChildNodeIdsById(t),a=!0,l=!1,c=void 0;try{for(var u,h=s[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value,f=this.nodeStatuses[d];if(this.ProjectService.isGroupNode(d))if(f.progress.totalItemsWithWork>-1)e+=f.progress.completedItems,i+=f.progress.totalItems,n+=f.progress.completedItemsWithWork,r+=f.progress.totalItemsWithWork;else{var p=this.getNodeProgressById(d);e+=p.completedItems,i+=p.totalItems,n+=p.completedItemsWithWork,r+=p.totalItemsWithWork}else if(f.isVisible){i++;var m=this.ProjectService.nodeHasWork(d);m&&r++,f.isCompleted&&(e++,m&&n++)}}}catch(t){l=!0,c=t}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}o={completedItems:e,completedItemsWithWork:n,totalItems:i,totalItemsWithWork:r,completionPct:i?Math.round(e/i*100):0,completionPctWithWork:r?Math.round(n/r*100):0}}return o}},{key:"isCompleted",value:function(t,e){var n=!1;if(t&&e){var i=this.getComponentStatesByNodeIdAndComponentId(t,e),r=this.getEventsByNodeIdAndComponentId(t,e),o=this.getEventsByNodeId(t),s=this.ProjectService.getComponentByNodeIdAndComponentId(t,e),a=this.ProjectService.getNodeById(t);if(null!=s){var l=s.type;null!=l&&this.$injector.get(l+"Service").isCompleted(s,i,r,o,a)&&(n=!0)}}else if(t){var c=this.ProjectService.isGroupNode(t),u=this.ProjectService.getNodeById(t);if(c){var h=!0,d=this.ProjectService.getChildNodeIdsById(t);if(d.length){var f=!0,p=!1,m=void 0;try{for(var g,v=d[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;if(null==this.nodeStatuses[y]||!this.nodeStatuses[y].isVisible||!this.nodeStatuses[y].isCompleted){h=!1;break}}}catch(t){p=!0,m=t}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}}else h=!1;n=h}else{var b=this.ProjectService.getComponentsByNodeId(t),_=!0,w=!0,S=!1,x=void 0;try{for(var C,k=b[Symbol.iterator]();!(w=(C=k.next()).done);w=!0){var T=C.value;if(null!=T){var M=T.id,E=T.type,A=t,I=u,$=M,D=T;if(null!=E)try{var L=E+"Service";if(this.$injector.has(L)){var P=this.$injector.get(L),O=this.getComponentStatesByNodeIdAndComponentId(A,$),N=this.getEventsByNodeIdAndComponentId(A,$),j=this.getEventsByNodeId(A),R=P.isCompleted(D,O,N,j,I);_=_&&R}}catch(t){console.log(this.$translate("ERROR_COULD_NOT_CALCULATE_IS_COMPLETED")+$)}}}}catch(t){S=!0,x=t}finally{try{w||null==k.return||k.return()}finally{if(S)throw x}}n=_}}return n}},{key:"getCurrentNode",value:function(){return this.currentNode}},{key:"getCurrentNodeId",value:function(){return null!=this.currentNode?this.currentNode.id:null}},{key:"setCurrentNodeByNodeId",value:function(t){if(null!=t){var e=this.ProjectService.getNodeById(t);this.setCurrentNode(e)}}},{key:"setCurrentNode",value:function(t){var e=this.currentNode;e!==t&&(e&&!this.ProjectService.isGroupNode(e.id)&&(this.previousStep=e),this.currentNode=t,this.$rootScope.$broadcast("currentNodeChanged",{previousNode:e,currentNode:this.currentNode}))}},{key:"endCurrentNode",value:function(){var t=this.currentNode;null!=t&&this.$rootScope.$broadcast("exitNode",{nodeToExit:t})}},{key:"endCurrentNodeAndSetCurrentNodeByNodeId",value:function(t){this.nodeStatuses[t].isVisitable?(this.endCurrentNode(),this.setCurrentNodeByNodeId(t)):this.nodeClickLocked(t)}},{key:"nodeClickLocked",value:function(t){this.$rootScope.$broadcast("nodeClickLocked",{nodeId:t})}},{key:"CSVToArray",value:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],r=null;r=n.exec(t);){var o=r[1];o.length&&o!=e&&i.push([]),r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3];var s=strMatchedValue,a=parseFloat(strMatchedValue);isNaN(a)||(s=a),i[i.length-1].push(s)}return i}},{key:"getTotalScore",value:function(){var t=this.studentData.annotations,e=this.ConfigService.getWorkgroupId();return this.AnnotationService.getTotalScore(t,e)}},{key:"getProjectCompletion",value:function(){return this.getNodeProgressById("group0")}},{key:"getRunStatus",value:function(){return this.runStatus}},{key:"getNextAvailablePlanningNodeId",value:function(){var t=1,e=this.getNodeStates();if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a){var l=a.nodeId;if(this.PlanningService.isPlanning(l)&&null!=a.studentData){var c=a.studentData.nodes,u=!0,h=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value.id,g=m.match(/planningNode(.*)/);if(null!=g){var v=parseInt(g[1]);v>t&&(t=v)}}}catch(t){h=!0,d=t}finally{try{u||null==p.return||p.return()}finally{if(h)throw d}}}}}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return this.maxPlanningNodeNumber<t&&(this.maxPlanningNodeNumber=t),this.maxPlanningNodeNumber++,"planningNode"+this.maxPlanningNodeNumber}},{key:"getAnnotations",value:function(){return null!=this.studentData&&null!=this.studentData.annotations?this.studentData.annotations:null}},{key:"getLatestComponentStatesByNodeId",value:function(t){var e=[];if(t&&this.studentData){var n=this.ProjectService.getNodeById(t);if(null!=n){var i=n.components;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c){var u=c.id,h=this.getLatestComponentStateByNodeIdAndComponentId(t,u);null==h&&((h={}).nodeId=t,h.componentId=u),e.push(h)}}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}}}return e}},{key:"getLatestComponentStateByNodeId",value:function(t){if(null!=t&&this.studentData){var e=this.getComponentStatesByNodeId(t);return e[e.length-1]}return null}},{key:"isCompletionCriteriaSatisfied",value:function(t){var e=!0;if(null!=t&&t.inOrder){var n=0,i=t.criteria,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c){var u=c.name;if("isSubmitted"==u){var h=c.nodeId,d=c.componentId,f=this.getComponentStateSubmittedAfter(h,d,n);if(null==f){e=!1;break}n=f.serverSaveTime}else if("isSaved"==u){var p=c.nodeId,m=c.componentId,g=this.getComponentStateSavedAfter(p,m,n);if(null==g){e=!1;break}n=g.serverSaveTime}else if("isVisited"==u){var v=c.nodeId,y=this.getVisitEventAfter(v,n);if(null==y){e=!1;break}n=y.serverSaveTime}}}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}return e}},{key:"getComponentStateSavedAfter",value:function(t,e,n){var i=this.studentData.componentStates;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c&&c.serverSaveTime>n&&c.nodeId===t&&c.componentId===e)return c}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}return null}},{key:"getComponentStateSubmittedAfter",value:function(t,e,n){var i=this.studentData.componentStates;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c&&c.serverSaveTime>n&&c.nodeId===t&&c.componentId===e&&c.isSubmit)return c}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}return null}},{key:"getVisitEventAfter",value:function(t,e){var n=this.studentData.events;if(null!=n){var i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(null!=l&&l.serverSaveTime>e&&l.nodeId===t&&"nodeEntered"===l.event)return l}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}}return null}},{key:"getClassmateStudentWork",value:function(t,e,n){var i=this.ConfigService.getConfigParam("studentDataURL"),r={method:"GET"};r.url=i;var o={};return o.runId=this.ConfigService.getRunId(),o.nodeId=t,o.componentId=e,o.getStudentWork=!0,o.getEvents=!1,o.getAnnotations=!1,o.onlyGetLatest=!0,"period"==n&&(o.periodId=this.ConfigService.getPeriodId()),r.params=o,this.$http(r).then(function(t){var e=t.data;return null!=e?e.studentWorkList:[]})}},{key:"getStudentWorkById",value:function(t){var e=this.ConfigService.getConfigParam("studentDataURL"),n={method:"GET"};n.url=e;var i={};return i.runId=this.ConfigService.getRunId(),i.id=t,i.getStudentWork=!0,i.getEvents=!1,i.getAnnotations=!1,i.onlyGetLatest=!0,n.params=i,this.$http(n).then(function(t){var e=t.data;return null!=e&&e.studentWorkList.length>0?e.studentWorkList[0]:null})}},{key:"getMaxScore",value:function(){var t=null;for(var e in this.nodeStatuses)if(this.nodeStatuses.hasOwnProperty(e)){var n=this.nodeStatuses[e],i=n.nodeId;if(n.isVisible&&!this.ProjectService.isGroupNode(i)){var r=this.ProjectService.getMaxScoreForNode(i);r&&(t+=r)}}return t}}])&&n(i.prototype,r),o&&n(i,o),e}();i.$inject=["$filter","$http","$injector","$q","$rootScope","AnnotationService","ConfigService","PlanningService","ProjectService","UtilService"];var r=i;e.default=r}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$http=e,this.AnnotationService=n,this.ConfigService=i,this.ProjectService=r,this.studentStatuses=null}return i(t,[{key:"retrieveStudentStatuses",value:function(t){var e=this,n=this.ConfigService.getStudentStatusURL(),i={params:{runId:this.ConfigService.getRunId()}};return this.$http.get(n,i).then(function(t){var n=t.data;return e.studentStatuses=n,n})}},{key:"getStudentStatuses",value:function(){return this.studentStatuses}},{key:"getCurrentNodePositionAndNodeTitleForWorkgroupId",value:function(t){var e=this.getStudentStatusForWorkgroupId(t);if(null!=e){var n=e.currentNodeId;return this.ProjectService.getNodePositionAndTitleByNodeId(n)}return null}},{key:"getStudentStatusForWorkgroupId",value:function(t){var e=this.getStudentStatuses(),n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a)if(t===a.workgroupId)return a}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return null}},{key:"setStudentStatus",value:function(t){for(var e=this.getStudentStatuses(),n=0;n<e.length;n++){if(e[n].workgroupId===t.workgroupId){e.splice(n,1,t);break}}}},{key:"getStudentProjectCompletion",value:function(t,e){var n={totalItems:0,completedItems:0,completionPct:0},i=this.getStudentStatusForWorkgroupId(t);if(i){var r=i.projectCompletion;if(r)if(e)r.completionPctWithWork?(n.totalItems=r.totalItemsWithWork,n.completedItems=r.completedItemsWithWork,n.completionPct=r.completionPctWithWork):n=this.getNodeCompletion("group0",-1,t,!0);else n=r}return n}},{key:"getWorkgroupIdsOnNode",value:function(t,e){var n=[],i=this.studentStatuses,r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null!=c&&(-1===e||e===c.periodId)){var u=c.currentNodeId;if(t===u)n.push(c.workgroupId);else if(this.ProjectService.isGroupNode(t)){var h=this.ProjectService.getNodeById(u),d=this.ProjectService.getNodeById(t);this.ProjectService.isNodeDescendentOfGroup(h,d)&&n.push(c.workgroupId)}}}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return n}},{key:"getNodeCompletion",value:function(t,e,n,i){var r=0,o=0,s=this.ProjectService.isGroupNode(t),a=this.studentStatuses,l=!0,c=!1,u=void 0;try{for(var h,d=a[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;if(f&&!(-1!==e&&e!==f.periodId||n&&n!==f.workgroupId)){var p=f.nodeStatuses;if(p){var m=p[t];if(null!=m)if(s){var g=m.progress;if(i)if(g&&g.totalItemsWithWork)o+=g.totalItemsWithWork,r+=g.completedItemsWithWork;else{var v=this.ProjectService.getNodeById(t),y=this.ProjectService.getDescendentsOfGroup(v),b=!0,_=!1,w=void 0;try{for(var S,x=y[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var C=S.value;if(!this.ProjectService.isGroupNode(C)){var k=p[C];k&&k.isVisible&&this.ProjectService.nodeHasWork(C)&&(o++,k.isCompleted&&r++)}}}catch(t){_=!0,w=t}finally{try{!b&&x.return&&x.return()}finally{if(_)throw w}}}else g&&(o+=g.totalItems,r+=g.completedItems)}else{if(m.isVisible)(!i||this.ProjectService.nodeHasWork(t))&&(o++,m.isCompleted&&r++)}}}}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}return{completedItems:r,totalItems:o,completionPct:o>0?Math.floor(100*r/o):0}}},{key:"isWorkgroupOnlineOnNode",value:function(t,e,n){var i=[],r=!0,o=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=this.getStudentStatusForWorkgroupId(c);if(u){var h=u.periodId;-1!==n&&h!==n||i.push(c)}}}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return!!i.length&&this.getWorkgroupIdsOnNode(e,n).some(function(t){return i.indexOf(t)>-1})}},{key:"getNodeAverageScore",value:function(t,e){var n=0,i=0,r=this.studentStatuses,o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u&&(-1===e||e===u.periodId)){var h=u.workgroupId,d=this.AnnotationService.getScore(h,t);null!=d&&(i++,n+=d)}}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}var f=null;return 0!==i&&(f=Math.floor(100*n/i)/100),f}},{key:"getMaxScoreForWorkgroupId",value:function(t){var e=null,n=this.getStudentStatusForWorkgroupId(t);if(n){var i=n.nodeStatuses;if(i)for(var r in i)if(i.hasOwnProperty(r)){var o=i[r],s=o.nodeId;if(o.isVisible&&this.ProjectService.isApplicationNode(s)){var a=this.ProjectService.getMaxScoreForNode(s);a&&(e+=a)}}}return e}}]),t}();r.$inject=["$http","AnnotationService","ConfigService","ProjectService"],e.default=r},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$rootScope=e,this.AnnotationService=n,this.ConfigService=i}var e,n,r;return e=t,(n=[{key:"initialize",value:function(){this.runId=this.ConfigService.getRunId(),this.periodId=this.ConfigService.getPeriodId(),this.workgroupId=this.ConfigService.getWorkgroupId()}},{key:"subscribeToClassroomTopic",value:function(){var t=this;this.$stomp.subscribe("/topic/classroom/".concat(this.runId,"/").concat(this.periodId),function(e,n,i){if("pause"===e.type)t.$rootScope.$broadcast("pauseScreen",{data:e.content});else if("unpause"===e.type)t.$rootScope.$broadcast("unPauseScreen",{data:e.content});else if("studentWork"===e.type){var r=JSON.parse(e.content);t.$rootScope.$broadcast("studentWorkReceived",r)}})}},{key:"subscribeToWorkgroupTopic",value:function(){var t=this;this.$stomp.subscribe("/topic/workgroup/".concat(this.workgroupId),function(e,n,i){if("notification"===e.type){var r=JSON.parse(e.content);t.$rootScope.$broadcast("newNotificationReceived",r)}else if("annotation"===e.type){var o=JSON.parse(e.content);t.AnnotationService.addOrUpdateAnnotation(o),t.$rootScope.$broadcast("newAnnotationReceived",{annotation:o})}})}}])&&i(e.prototype,n),r&&i(e,r),t}();r.$inject=["$rootScope","AnnotationService","ConfigService"];var o=r;e.default=o},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$injector=n,this.$mdDialog=i,this.$q=r,this.$rootScope=o,this.$timeout=s,this.componentTypeToLabel={},this.$translate=this.$filter("translate")}return n(e,[{key:"generateKey",value:function(t){this.CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],t||(t=10);for(var e="",n=0;n<t;n++)e+=this.CHARS[Math.floor(Math.random()*(this.CHARS.length-1))];return e}},{key:"convertStringToNumber",value:function(t){return null==t||""==t||isNaN(Number(t))?t:Number(t)}},{key:"makeCopyOfJSONObject",value:function(t){if(null!=t){var e=angular.toJson(t);return angular.fromJson(e)}return null}},{key:"getImageObjectFromBase64String",value:function(t){var e=this.dataURItoBlob(t),n=(new Date).getTime(),i=encodeURIComponent("picture_"+n+".png");return new File([e],i,{lastModified:n,type:"image/png"})}},{key:"dataURItoBlob",value:function(t){var e=void 0;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return new Blob([i],{type:n})}},{key:"getImageObjectFromImageElement",value:function(t){var e=null;if(null!=t){var n=document.createElement("canvas");n.width=t.naturalWidth,n.height=t.naturalHeight,n.getContext("2d").drawImage(t,0,0);var i=n.toDataURL("image/png");e=this.getImageObjectFromBase64String(i)}return e}},{key:"isImage",value:function(t){if(null!=t){var e=new RegExp(".*.(png|jpg|jpeg|bmp|gif|tiff|svg)");if(null!=t.toLowerCase().match(e))return!0}return!1}},{key:"isVideo",value:function(t){if(null!=t){var e=new RegExp(".*.(mp4|mpg|mpeg|m4v|m2v|avi|gifv|mov|qt)");if(null!=t.toLowerCase().match(e))return!0}return!1}},{key:"insertWISELinks",value:function(t){return t=this.insertWISELinkAnchors(t),t=this.insertWISELinkButtons(t)}},{key:"insertWISELinkAnchors",value:function(t){for(var e=new RegExp(/<a.*?wiselink="true".*?>(.*?)<\/a>/),n=e.exec(t);null!=n;){var i=n[0],r=n[1],o=this.getWISELinkNodeId(i);null==o&&(o="");var s="",a=this.getWISELinkComponentId(i);null!=a&&(s="component-id='"+a+"'");var l="<wiselink type='link' link-text='"+r+"' node-id='"+o+"' "+s+"/>";t=t.replace(n[0],l),n=e.exec(t)}return t}},{key:"insertWISELinkButtons",value:function(t){for(var e=new RegExp(/<button.*?wiselink="true".*?>(.*?)<\/button>/),n=e.exec(t);null!=n;){var i=n[0],r=n[1],o=this.getWISELinkNodeId(i);null==o&&(o="");var s="",a=this.getWISELinkComponentId(i);null!=a&&(s="component-id='"+a+"'");var l="<wiselink type='button' link-text='"+r+"' node-id='"+o+"' "+s+"/>";t=t.replace(n[0],l),n=e.exec(t)}return t}},{key:"getWISELinkNodeId",value:function(t){if(null!=t){var e=new RegExp(/node-id=["'b](.*?)["']/,"g").exec(t);if(null!=e)return e[1]}return null}},{key:"getWISELinkComponentId",value:function(t){if(null!=t){var e=new RegExp(/component-id=["'b](.*?)["']/,"g").exec(t);if(null!=e)return e[1]}return null}},{key:"getWISELinkType",value:function(t){if(null!=t){var e=new RegExp(/type=["'b](.*?)["']/,"g").exec(t);if(null!=e)return e[1]}return null}},{key:"getWISELinkLinkText",value:function(t){if(null!=t){var e=new RegExp(/link-text=["'b](.*?)["']/,"g").exec(t);if(null!=e)return e[1]}return null}},{key:"replaceWISELinks",value:function(t){return t=this.replaceWISELinksHelper(t,"<wiselink.*?/>"),t=this.replaceWISELinksHelper(t,"<wiselink.*?>.*?</wiselink>")}},{key:"replaceWISELinksHelper",value:function(t,e){for(var n=new RegExp(e),i=n.exec(t);null!=i;){var r=i[0],o=this.getWISELinkNodeId(r),s=this.getWISELinkComponentId(r),a="";null!=s&&""!=s&&(a="component-id='"+s+"'");var l=this.getWISELinkType(r),c=this.getWISELinkLinkText(r),u=null;null!=(u="link"==l?"<a wiselink='true' node-id='"+o+"' "+a+">"+c+"</a>":"button"==l?"<button wiselink='true' node-id='"+o+"' "+a+">"+c+"</button>":"<a wiselink='true' node-id='"+o+"' "+a+">"+c+"</a>")&&(t=t.replace(r,u)),i=n.exec(t)}return t}},{key:"createInsertAssetButton",value:function(e,n,i,r,o,s){var a=this.$rootScope;return function(e){return t.summernote.ui.button({contents:'<i class="note-icon-picture"></i>',tooltip:s,click:function(){e.invoke("editor.saveRange");var t={isPopup:!0};null!=n&&(t.projectId=n),null!=i&&(t.nodeId=i),null!=r&&(t.componentId=r),t.target=o,a.$broadcast("openAssetChooser",t)}}).render()}}},{key:"createInsertWISELinkButton",value:function(e,n,i,r,o,s){var a=this.$rootScope;return function(e){return t.summernote.ui.button({contents:'<i class="note-icon-link"></i>',tooltip:s,click:function(){e.invoke("editor.saveRange");var t={};null!=n&&(t.projectId=n),null!=i&&(t.nodeId=i),null!=r&&(t.componentId=r),t.target=o,a.$broadcast("openWISELinkChooser",t)}}).render()}}},{key:"removeHTMLTags",value:function(t){var e="";return null!=t&&(e=(e=(e=t.replace(/<\/?[^>]+(>|$)/g," ")).replace(/\n/g," ")).replace(/\r/g," ")),e}},{key:"endsWith",value:function(t,e,n){("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>t.length)&&(n=t.length),n-=e.length;var i=t.lastIndexOf(e,n);return-1!==i&&i===n}},{key:"sortByServerSaveTime",value:function(t,e){return t.serverSaveTime<e.serverSaveTime?-1:t.serverSaveTime>e.serverSaveTime?1:0}},{key:"convertMillisecondsToFormattedDateTime",value:function(t){var e=new Date(t);return null!=e?e.toDateString()+" "+e.toLocaleTimeString():""}},{key:"getComponentTypeLabel",value:function(t){var e=this.componentTypeToLabel[t];if(null==e){var n=this.$injector.get(t+"Service");null!=n&&null!=n.getComponentTypeLabel&&(e=n.getComponentTypeLabel(),this.componentTypeToLabel[t]=e)}return null==e&&(e=t),e}},{key:"arraysContainSameValues",value:function(t,e){if(null!=t&&null!=e){var n=this.makeCopyOfJSONObject(t);n.sort();var i=this.makeCopyOfJSONObject(e);if(i.sort(),angular.toJson(n)==angular.toJson(i))return!0}return!1}},{key:"hasConnectedComponent",value:function(t){if(null!=t){var e=t.connectedComponents;if(null!=e&&e.length>0)return!0}return!1}},{key:"hasConnectedComponentAlwaysField",value:function(t){if(null!=t){var e=t.connectedComponents;if(null!=e&&e.length>0){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a.fields){var l=!0,c=!1,u=void 0;try{for(var h,d=a.fields[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){if("always"==h.value.when)return!0}}catch(t){c=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return!1}},{key:"hasShowWorkConnectedComponent",value:function(t){if(null!=t){var e=t.connectedComponents;if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&"showWork"==a.type)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return!1}},{key:"hasImportWorkConnectedComponent",value:function(t){if(null!=t){var e=t.connectedComponents;if(null!=e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!=a&&"importWork"==a.type)return!0}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return!1}},{key:"arrayHasNonNullElement",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){if(null!=r.value)return!0}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return!1}},{key:"wordWrap",value:function(t,e){if(t.length<=e)return t;var n="\n",i=!1,r="";do{for(var o=!1,s=e-1;s>=0;s--)if(this.testWhite(t.charAt(s))){r+=[t.slice(0,s),n].join(""),t=t.slice(s+1),o=!0;break}o||(r+=[t.slice(0,e),n].join(""),t=t.slice(e)),t.length<e&&(i=!0)}while(!i);return r+t}},{key:"testWhite",value:function(t){return new RegExp(/^\s$/).test(t.charAt(0))}},{key:"wordCount",value:function(t){return t.trim().split(/\s+/).length}},{key:"hasNodeEnteredEvent",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){if("nodeEntered"==r.value.event)return!0}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return!1}},{key:"hasImportWorkConnectedComponent",value:function(t){return this.hasXConnectedComponent(t,"importWork")}},{key:"hasShowWorkConnectedComponent",value:function(t){return this.hasXConnectedComponent(t,"showWork")}},{key:"hasShowClassmateWorkConnectedComponent",value:function(t){return this.hasXConnectedComponent(t,"showClassmateWork")}},{key:"hasXConnectedComponent",value:function(t,e){if(null!=t.connectedComponents){var n=t.connectedComponents,i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){if(s.value.type==e)return!0}}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}return!1}},{key:"temporarilyHighlightElement",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=t("#"+e),o=r.css("backgroundColor");r.css("background-color","#FFFF9C"),this.$timeout(function(){r.css({transition:"background-color 2s ease-in-out","background-color":o}),n.$timeout(function(){r.css({transition:"","background-color":""})},2e3)},i)}},{key:"generateImageFromComponentState",value:function(t){var e=this,n=this.$q.defer();function i(t,e,n,i,r){t.nodeId=n,t.componentId=i,t.componentState=r,t.closeDialog=function(){e.hide()}}this.$mdDialog.show({template:'\n        <div style="position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0,0,0,0.2); z-index: 2;"></div>\n        <div align="center" style="position: absolute; top: 100px; left: 200px; z-index: 1000; padding: 20px; background-color: yellow;">\n          <span>{{ "importingWork" | translate }}...</span>\n          <br/>\n          <br/>\n          <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n        </div>\n        <component node-id="{{nodeId}}"\n                   component-id="{{componentId}}"\n                   component-state="{{componentState}}"\n                   mode="student"></component>\n      ',locals:{nodeId:t.nodeId,componentId:t.componentId,componentState:t},controller:i}),i.$inject=["$scope","$mdDialog","nodeId","componentId","componentState"];var r=this.$rootScope.$on("doneRenderingComponent",function(i,s){t.nodeId==s.nodeId&&t.componentId==s.componentId&&e.$timeout(function(){e.generateImageFromComponentStateHelper(t).then(function(t){r(),e.$timeout.cancel(o),n.resolve(t)})},1e3)}),o=this.$timeout(function(){r()},1e4);return n.promise}},{key:"generateImageFromComponentStateHelper",value:function(t){var e=this,n=this.$q.defer();return this.$injector.get(t.componentType+"Service").generateImageFromRenderedComponentState(t).then(function(t){n.resolve(t),e.$mdDialog.hide()}),n.promise}},{key:"getConnectedComponentByComponentState",value:function(t,e){var n=e.nodeId,i=e.componentId,r=t.connectedComponents,o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u.nodeId==n&&u.componentId==i)return u}}catch(t){s=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw a}}return null}},{key:"showJSONValidMessage",value:function(){this.setIsJSONValidMessage(!0)}},{key:"showJSONInvalidMessage",value:function(){this.setIsJSONValidMessage(!1)}},{key:"hideJSONValidMessage",value:function(){this.setIsJSONValidMessage(null)}},{key:"setIsJSONValidMessage",value:function(t){this.$rootScope.$broadcast("setIsJSONValid",{isJSONValid:t})}},{key:"moveObjectUp",value:function(t,e){if(0!==e){var n=t[e];t.splice(e,1),t.splice(e-1,0,n)}}},{key:"moveObjectDown",value:function(t,e){if(e!==t.length-1){var n=t[e];t.splice(e,1),t.splice(e+1,0,n)}}},{key:"restoreSummernoteCursorPosition",value:function(e){t("#"+e).summernote("editor.restoreRange"),t("#"+e).summernote("editor.focus")}},{key:"insertImageIntoSummernote",value:function(e,n,i){t("#"+e).summernote("insertImage",n,i)}},{key:"insertVideoIntoSummernote",value:function(e,n){var i=document.createElement("video");i.controls="true",i.innerHTML='<source ng-src="'+n+'" type="video/mp4">',t("#"+e).summernote("insertNode",i)}},{key:"rgbToHex",value:function(t,e){var n=t.replace(/rgb?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(e||1),r=Math.floor(i*parseInt(n[0])+255*(1-i)),o=Math.floor(i*parseInt(n[1])+255*(1-i)),s=Math.floor(i*parseInt(n[2])+255*(1-i));return"#"+("0"+r.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)+("0"+s.toString(16)).slice(-2)}}]),e}();Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),i.$inject=["$filter","$injector","$mdDialog","$q","$rootScope","$timeout"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";(function(t){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var i=function(){function e(n,i,r,o,s,a,l,c,u,h,d,f,p,m){var g=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=n,this.$rootScope=i,this.$filter=r,this.$mdDialog=o,this.$mdMenu=s,this.$state=a,this.AnnotationService=l,this.ConfigService=c,this.NotebookService=u,this.NotificationService=h,this.ProjectService=d,this.SessionService=f,this.StudentDataService=p,this.UtilService=m,this.$translate=this.$filter("translate"),this.workgroupId=this.ConfigService.getWorkgroupId(),this.currentNode=null,this.pauseDialog=null,this.noteDialog=null,this.navFilters=this.ProjectService.getFilters(),this.navFilter=this.navFilters[0].name,this.projectStyle=this.ProjectService.getStyle(),this.projectName=this.ProjectService.getProjectTitle(),this.totalScore=this.StudentDataService.getTotalScore(),this.maxScore=this.StudentDataService.maxScore,this.notebookEnabled=this.NotebookService.isNotebookEnabled(),this.notebookConfig=this.NotebookService.getNotebookConfig(),this.reportItem=this.notebookConfig.itemTypes.report.notes[0],this.constraintsDisabled=!1;var v=this.ConfigService.getConfigParam("userType"),y=this.ConfigService.getConfigParam("contextPath");this.homePath="student"==v?y+"/student":"teacher"==v?y+"/teacher":y,0==this.ConfigService.getConfigParam("constraints")&&(this.constraintsDisabled=!0);var b=this.ProjectService.getProjectScript();null!=b&&this.ProjectService.retrieveScript(b).then(function(t){new Function(t).call(g)}),this.$scope.$on("currentNodeChanged",function(t,e){var n,i,r,o,s,a,l=e.previousNode,c=g.StudentDataService.getCurrentNode(),u=c.id;g.StudentDataService.updateStackHistory(u),g.StudentDataService.updateVisitedNodesHistory(u),g.$state.go("root.vle",{nodeId:u}),null!=l&&g.ProjectService.isGroupNode(l.id)&&(n=null,i=null,r="Navigation",o="nodeExited",s={nodeId:l.id},a=l.id,g.StudentDataService.saveVLEEvent(a,n,i,r,o,s)),g.ProjectService.isGroupNode(u)&&(n=null,i=null,r="Navigation",o="nodeEntered",s={nodeId:c.id},a=c.id,g.StudentDataService.saveVLEEvent(a,n,i,r,o,s))}),this.notifications=this.NotificationService.notifications,this.$scope.$watch(function(){return g.NotificationService.notifications.length},function(t,e){g.notifications=g.NotificationService.notifications,g.newNotifications=g.getNewNotifications()}),this.$scope.$on("notificationChanged",function(t,e){g.notifications=g.NotificationService.notifications,g.newNotifications=g.getNewNotifications()}),this.$scope.$on("componentStudentDataChanged",function(){}),this.$scope.$on("pauseScreen",function(t,e){g.pauseScreen()}),this.$scope.$on("unPauseScreen",function(t,e){g.unPauseScreen()}),this.$scope.$on("requestImageCallback",function(t,e){if(null==g.snippableItems&&(g.snippableItems=[]),null!=e.imageObject&&g.snippableItems.push(e.imageObject),null!=e.imageObjects){var n=!0,i=!1,r=void 0;try{for(var o,s=e.imageObjects[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;null!=a&&g.snippableItems.push(a)}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}}),t(document.body).on("dragover",function(t){return t.preventDefault(),!1}),t(document.body).on("drop",function(t){return t.preventDefault(),!1}),this.themePath=this.ProjectService.getThemePath(),this.notebookItemPath=this.themePath+"/notebook/notebookItem.html";var _=null,w=null,S=null;null!=this.$state&&(w=this.$state.params),null!=w&&(S=w.nodeId),null!=(_=null!=S&&""!==S?S:this.StudentDataService.getLatestNodeEnteredEventNodeIdWithExistingNode())&&""!==_||(_=this.ProjectService.getStartNodeId()),this.StudentDataService.setCurrentNodeByNodeId(_);var x=this.StudentDataService.getRunStatus();if(null!=x){var C=!1,k=this.ConfigService.getPeriodId();if(null!=k){var T=x.periods;if(null!=T){var M=!0,E=!1,A=void 0;try{for(var I,$=T[Symbol.iterator]();!(M=(I=$.next()).done);M=!0){var D=I.value;if(k===D.periodId&&D.paused){C=!0;break}}}catch(t){E=!0,A=t}finally{try{M||null==$.return||$.return()}finally{if(E)throw A}}}}C&&this.pauseScreen()}}var i,r,o;return i=e,(r=[{key:"snipNewNote",value:function(t){var e=this.themePath+"/notebook/contentSnipper.html",n=this.StudentDataService.getCurrentNodeId(),i=this.ProjectService.getComponentsByNodeId(n);this.snippableItems=[];var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u={};u.nodeId=n,u.componentId=c.id,this.$rootScope.$broadcast("requestImage",u)}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}function h(e,n,i,r,o,s,a){n.NotebookService=o,n.StudentDataService=s,n.ProjectService=a,n.snippableItems=r;var l=!0,c=!1,u=void 0;try{for(var h,d=r[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;null!=f&&(f.url=URL.createObjectURL(f))}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n.close=function(){i.hide()},n.chooseSnippet=function(e){n.NotebookService.addNote(t,e),i.hide()}}this.$mdDialog.show({parent:angular.element(document.body),targetEvent:t,templateUrl:e,clickOutsideToClose:!0,locals:{snippableItems:this.snippableItems},controller:h,controllerAs:"notebookContentSnippetController",bindToController:!0}),h.$inject=["$rootScope","$scope","$mdDialog","snippableItems","NotebookService","StudentDataService","ProjectService"]}},{key:"goHome",value:function(){this.StudentDataService.saveVLEEvent(null,null,null,"Navigation","goHomeButtonClicked",{}),this.$rootScope.$broadcast("goHome")}},{key:"logOut",value:function(){this.StudentDataService.saveVLEEvent(null,null,null,"Navigation","logOutButtonClicked",{}),this.$rootScope.$broadcast("logOut")}},{key:"loadRoot",value:function(){this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.ProjectService.rootNode.id)}},{key:"mouseMoved",value:function(){this.SessionService.mouseEventOccurred()}},{key:"hasNewNotifications",value:function(){return this.newNotifications.length>0}},{key:"hasNewAmbientNotifications",value:function(){return this.getNewAmbientNotifications().length>0}},{key:"getNewNotifications",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this.notifications[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(null==s.timeDismissed){for(var a=s.nodeId,l=s.type,c=!1,u=0,h=t;u<h.length;u++){var d=h[u];d.nodeId==a&&d.type==l&&(c=!0,d.notifications.push(s),s.timeGenerated>d.latestNotificationTimestamp&&(d.latestNotificationTimestamp=s.timeGenerated))}var f=null;if(!c){var p="";if("DiscussionReply"===l)p=this.$translate("newRepliesOnDiscussionPost");else if("teacherToStudent"===l){if(p=this.$translate("newFeedbackFromTeacher"),null!=s.data&&("string"==typeof s.data&&(s.data=angular.fromJson(s.data)),null!=s.data.annotationId)){var m=this.AnnotationService.getAnnotationById(s.data.annotationId);null!=m&&null!=m.notebookItemId&&(f=m.notebookItemId)}}else"CRaterResult"===l&&(p=this.$translate("newFeedback"));var g={latestNotificationTimestamp:s.timeGenerated,message:p,nodeId:a,notebookItemId:f,notifications:[s],type:l};t.push(g)}}}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}return t.sort(function(t,e){return e.latestNotificationTimestamp-t.latestNotificationTimestamp}),t}},{key:"getNewAmbientNotifications",value:function(){return this.notifications.filter(function(t){var e=!!t.data&&t.data.isAmbient;return null==t.timeDismissed&&e})}},{key:"dismissNotification",value:function(t,e){if(null==e.data||null==e.data.dismissCode)this.NotificationService.dismissNotification(e);else{var n={event:t,notification:e};this.$rootScope.$broadcast("viewCurrentAmbientNotification",n),this.$mdMenu.hide()}}},{key:"viewCurrentAmbientNotification",value:function(t){var e=this.getNewAmbientNotifications();if(e.length){var n=e[0],i={};i.event=t,i.notification=n,this.$rootScope.$broadcast("viewCurrentAmbientNotification",i)}}},{key:"dismissNotificationAggregate",value:function(t,e){if(null!=e&&null!=e.notifications){var n=!0,i=!1,r=void 0;try{for(var o,s=e.notifications[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.dismissNotification(t,a)}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}}},{key:"dismissNotificationAggregateAndVisitNode",value:function(t,e){if(null!=e&&null!=e.notifications){var n=!0,i=!1,r=void 0;try{for(var o,s=e.notifications[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;null!=a.data&&null!=a.data.dismissCode||this.dismissNotification(t,a)}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}var l=e.nodeId,c=e.notebookItemId;null!=l?this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(l):null!=c&&this.$rootScope.$broadcast("showReportAnnotations",{ev:t})}},{key:"pauseScreen",value:function(){this.pauseDialog=this.$mdDialog.show({template:'<md-dialog aria-label="Screen Paused"><md-dialog-content><div class="md-dialog-content">'+this.$translate("yourTeacherHasPausedAllTheScreensInTheClass")+"</div></md-dialog-content></md-dialog>",escapeToClose:!1})}},{key:"unPauseScreen",value:function(){this.$mdDialog.hide(),this.pauseDialog=null}},{key:"isPreview",value:function(){return this.ConfigService.isPreview()}},{key:"hasConstraints",value:function(){var t=!1,e=this.ProjectService.activeConstraints;return null!=e&&e.length>0&&(t=!0),t}},{key:"disableConstraints",value:function(){this.ConfigService.isPreview()&&(this.constraintsDisabled=!0,this.ProjectService.activeConstraints=[],this.StudentDataService.updateNodeStatuses())}},{key:"getWISEAPI",value:function(){var t=this;return{registerAdditionalProcessingFunction:function(e,n,i){t.ProjectService.addAdditionalProcessingFunction(e,n,i)},createAutoScoreAnnotation:function(e,n,i){var r=t.ConfigService.getRunId(),o=t.ConfigService.getPeriodId(),s=t.ConfigService.getWorkgroupId();return t.AnnotationService.createAutoScoreAnnotation(r,o,e,n,s,i)},createAutoCommentAnnotation:function(e,n,i){var r=t.ConfigService.getRunId(),o=t.ConfigService.getPeriodId(),s=t.ConfigService.getWorkgroupId();return t.AnnotationService.createAutoCommentAnnotation(r,o,e,n,s,i)},getLatestAnnotationForComponent:function(e,n,i){var r={nodeId:e,componentId:n,type:i};return t.AnnotationService.getLatestAnnotation(r)},updateAnnotation:function(e){t.AnnotationService.saveAnnotation(e)},getMaxScoreForComponent:function(e,n){return t.ProjectService.getMaxScoreForComponent(e,n)}}}}])&&n(i.prototype,r),o&&n(i,o),e}();i.$inject=["$scope","$rootScope","$filter","$mdDialog","$mdMenu","$state","AnnotationService","ConfigService","NotebookService","NotificationService","ProjectService","SessionService","StudentDataService","UtilService"],e.a=i}).call(this,n(1))},function(t,e){
/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,i,r=2,o=arguments,s=o[0],a="["+(t?t+":":"")+s+"] ",l=o[1];for(a+=l.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1)+r;return e<o.length?Yt(o[e]):t}),a+="\nhttp://errors.angularjs.org/1.5.11/"+(t?t+"/":"")+s,i=r,n="?";i<o.length;i++,n="&")a+=n+"p"+(i-r)+"="+encodeURIComponent(Yt(o[i]));return new e(a)}}var n=/^\/(.+)\/([a-z]*)$/,i="validity",r=Object.prototype.hasOwnProperty,o=function(t){return B(t)?t.toLowerCase():t},s=function(t){return B(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(o=function(t){return B(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},s=function(t){return B(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var a,l,c,u,h=[].slice,d=[].splice,f=[].push,p=Object.prototype.toString,m=Object.getPrototypeOf,g=e("ng"),v=t.angular||(t.angular={}),y=0;function b(t){if(null==t||U(t))return!1;if(H(t)||B(t)||l&&t instanceof l)return!0;var e="length"in Object(t)&&t.length;return F(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function _(t,e,n){var i,o;if(t)if(W(t))for(i in t)"prototype"===i||"length"===i||"name"===i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(H(t)||b(t)){var s="object"!=typeof t;for(i=0,o=t.length;i<o;i++)(s||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==_)t.forEach(e,n,t);else if(R(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)r.call(t,i)&&e.call(n,t[i],i,t);return t}function w(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function S(t){return function(e,n){t(n,e)}}function x(){return++y}function C(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function k(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(j(s)||W(s))for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l],h=s[u];n&&j(h)?Y(h)?t[u]=new Date(h.valueOf()):z(h)?t[u]=new RegExp(h):h.nodeName?t[u]=h.cloneNode(!0):Z(h)?t[u]=h.clone():(j(t[u])||(t[u]=H(h)?[]:{}),k(t[u],[h],!0)):t[u]=h}}return C(t,i),t}function T(t){return k(t,h.call(arguments,1),!1)}function M(t){return k(t,h.call(arguments,1),!0)}function E(t){return parseInt(t,10)}a=t.document.documentMode;var A=Number.isNaN||function(t){return t!=t};function I(t,e){return T(Object.create(t),e)}function $(){}function D(t){return t}function L(t){return function(){return t}}function P(t){return W(t.toString)&&t.toString!==p}function O(t){return void 0===t}function N(t){return void 0!==t}function j(t){return null!==t&&"object"==typeof t}function R(t){return null!==t&&"object"==typeof t&&!m(t)}function B(t){return"string"==typeof t}function F(t){return"number"==typeof t}function Y(t){return"[object Date]"===p.call(t)}$.$inject=[],D.$inject=[];var H=Array.isArray;function W(t){return"function"==typeof t}function z(t){return"[object RegExp]"===p.call(t)}function U(t){return t&&t.window===t}function V(t){return t&&t.$evalAsync&&t.$watch}function G(t){return"boolean"==typeof t}function q(t){return t&&W(t.then)}var X=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var K=function(t){return B(t)?t.trim():t},J=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function Z(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function Q(t){return o(t.nodeName||t[0]&&t[0].nodeName)}function tt(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function et(t,e){var n,i,o=[],s=[];if(e){if((i=e)&&F(i.length)&&X.test(p.call(i))||(n=e,"[object ArrayBuffer]"===p.call(n)))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw g("cpi","Can't copy! Source and destination are identical.");return H(e)?e.length=0:_(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),o.push(t),s.push(e),a(t,e)}return l(t);function a(t,e){var n,i=e.$$hashKey;if(H(t))for(var o=0,s=t.length;o<s;o++)e.push(l(t[o]));else if(R(t))for(n in t)e[n]=l(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=l(t[n]));else for(n in t)r.call(t,n)&&(e[n]=l(t[n]));return C(e,i),e}function l(t){if(!j(t))return t;var e=o.indexOf(t);if(-1!==e)return s[e];if(U(t)||V(t))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=function(t){switch(p.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(l(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(W(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=H(t)?[]:Object.create(m(t)),n=!0),o.push(t),s.push(i),n?a(t,i):i}}function nt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!H(t)){if(Y(t))return!!Y(e)&&nt(t.getTime(),e.getTime());if(z(t))return!!z(e)&&t.toString()===e.toString();if(V(t)||V(e)||U(t)||U(e)||H(e)||Y(e)||z(e))return!1;for(i in r=Pt(),t)if("$"!==i.charAt(0)&&!W(t[i])){if(!nt(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&N(e[i])&&!W(e[i]))return!1;return!0}if(!H(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!nt(t[i],e[i]))return!1;return!0}}return!1}var it=function(){if(!N(it.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");it.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else it.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return it.rules},rt=function(){if(N(rt.name_))return rt.name_;var e,n,i,r,o=_t.length;for(n=0;n<o;++n)if(i=_t[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return rt.name_=r};function ot(t,e,n){return t.concat(h.call(e,n))}function st(t,e){return h.call(t,e||0)}function at(t,e){var n=arguments.length>2?st(arguments,2):[];return!W(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ot(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function lt(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:U(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":V(n)&&(i="$SCOPE"),i}function ct(t,e){if(!O(t))return F(e)||(e=e?2:null),JSON.stringify(t,lt,e)}function ut(t){return B(t)?JSON.parse(t):t}var ht=/:/g;function dt(t,e){t=t.replace(ht,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return A(n)?e:n}function ft(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(dt(e,i)-i))}function pt(t){t=l(t).clone();try{t.empty()}catch(t){}var e=l("<div>").append(t).html();try{return t[0].nodeType===Nt?o(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+o(e)})}catch(t){return o(e)}}function mt(t){try{return decodeURIComponent(t)}catch(t){}}function gt(t){var e={};return _((t||"").split("&"),function(t){var n,i,o;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),o=t.substring(n+1)),N(i=mt(i))&&(o=!N(o)||mt(o),r.call(e,i)?H(e[i])?e[i].push(o):e[i]=[e[i],o]:e[i]=o))}),e}function vt(t){var e=[];return _(t,function(t,n){H(t)?_(t,function(t){e.push(bt(n,!0)+(!0===t?"":"="+bt(t,!0)))}):e.push(bt(n,!0)+(!0===t?"":"="+bt(t,!0)))}),e.length?e.join("&"):""}function yt(t){return bt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function bt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var _t=["ng-","data-ng-","ng:","x-ng-"];var wt=function(t){var e=t.currentScript,n=e&&e.getAttribute("src");if(!n)return!0;var i=t.createElement("a");if(i.href=n,t.location.origin===i.origin)return!0;switch(i.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}(t.document);function St(e,n){var i,r,o={};if(_(_t,function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))}),_(_t,function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))}),i){if(!wt)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,i,r=_t.length;for(i=0;i<r;++i)if(n=_t[i]+e,B(n=t.getAttribute(n)))return n;return null}(i,"strict-di"),n(i,r?[r]:[],o)}}function xt(e,n,i){j(i)||(i={});i=T({strictDi:!1},i);var r=function(){if((e=l(e)).injector()){var r=e[0]===t.document?"document":pt(e);throw g("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=He(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!s.test(t.name))return r();t.name=t.name.replace(s,""),v.resumeBootstrap=function(t){return _(t,function(t){n.push(t)}),r()},W(v.resumeDeferredBootstrap)&&v.resumeDeferredBootstrap()}function Ct(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function kt(t){var e=v.element(t).injector();if(!e)throw g("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Tt=/[A-Z]/g;function Mt(t,e){return e=e||"_",t.replace(Tt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Et=!1;function At(t,e,n){if(!t)throw g("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function It(t,e,n){return n&&H(t)&&(t=t[t.length-1]),At(W(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function $t(t,e){if("hasOwnProperty"===t)throw g("badname","hasOwnProperty is not a valid {0} name",e)}function Dt(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t&&(t=(o=t)[i]);return!n&&W(t)?at(o,t):t}function Lt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=l(h.call(t,0,r))),e.push(n));return e||t}function Pt(){return Object.create(null)}var Ot=1,Nt=3,jt=8,Rt=9,Bt=11;function Ft(t,e){if(H(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(j(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function Yt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):O(t)?"undefined":"string"!=typeof t?function(t){var e=[];return JSON.stringify(t,function(t,n){if(j(n=lt(t,n))){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}(t):t}var Ht={full:"1.5.11",major:1,minor:5,dot:11,codeName:"princely-quest"};le.expando="ng339";var Wt=le.cache={},zt=1,Ut=function(t,e,n){t.addEventListener(e,n,!1)},Vt=function(t,e,n){t.removeEventListener(e,n,!1)};le._data=function(t){return this.cache[t[this.expando]]||{}};var Gt=/([:\-_]+(.))/g,qt=/^moz([A-Z])/,Xt={mouseleave:"mouseout",mouseenter:"mouseover"},Kt=e("jqLite");function Jt(t){return t.replace(Gt,function(t,e,n,i){return i?n.toUpperCase():n}).replace(qt,"Moz$1")}var Zt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Qt=/<|&#?\w+;/,te=/<([\w:-]+)/,ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ne={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ie(t){return!Qt.test(t)}function re(t){var e=t.nodeType;return e===Ot||!e||e===Rt}function oe(t,e){var n,i,r,o,s=e.createDocumentFragment(),a=[];if(ie(t))a.push(e.createTextNode(t));else{for(n=s.appendChild(e.createElement("div")),i=(te.exec(t)||["",""])[1].toLowerCase(),r=ne[i]||ne._default,n.innerHTML=r[1]+t.replace(ee,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;a=ot(a,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",_(a,function(t){s.appendChild(t)}),s}function se(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}ne.optgroup=ne.option,ne.tbody=ne.tfoot=ne.colgroup=ne.caption=ne.thead,ne.th=ne.td;var ae=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function le(e){if(e instanceof le)return e;var n,i,r,o;if(B(e)&&(e=K(e),n=!0),!(this instanceof le)){if(n&&"<"!==e.charAt(0))throw Kt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new le(e)}ye(this,n?(i=e,r=r||t.document,(o=Zt.exec(i))?[r.createElement(o[1])]:(o=oe(i,r))?o.childNodes:[]):e)}function ce(t){return t.cloneNode(!0)}function ue(t,e){if(e||de(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;i<r;i++)de(n[i])}function he(t,e,n,i){if(N(i))throw Kt("offargs","jqLite#off() does not support the `selector` argument");var r=fe(t),o=r&&r.events,s=r&&r.handle;if(s)if(e){var a=function(e){var i=o[e];N(n)&&tt(i||[],n),N(n)&&i&&i.length>0||(Vt(t,e,s),delete o[e])};_(e.split(" "),function(t){a(t),Xt[t]&&a(Xt[t])})}else for(e in o)"$destroy"!==e&&Vt(t,e,s),delete o[e]}function de(t,e){var n=t.ng339,i=n&&Wt[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),he(t)),delete Wt[n],t.ng339=void 0}}function fe(t,e){var n=t.ng339,i=n&&Wt[n];return e&&!i&&(t.ng339=n=++zt,i=Wt[n]={events:{},data:{},handle:void 0}),i}function pe(t,e,n){if(re(t)){var i=N(n),r=!i&&e&&!j(e),o=!e,s=fe(t,!r),a=s&&s.data;if(i)a[e]=n;else{if(o)return a;if(r)return a&&a[e];T(a,e)}}}function me(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function ge(t,e){e&&t.setAttribute&&_(e.split(" "),function(e){t.setAttribute("class",K((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+K(e)+" "," ")))})}function ve(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");_(e.split(" "),function(t){t=K(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",K(n))}}function ye(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function be(t,e){return _e(t,"$"+(e||"ngController")+"Controller")}function _e(t,e,n){t.nodeType===Rt&&(t=t.documentElement);for(var i=H(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(N(n=l.data(t,i[r])))return n;t=t.parentNode||t.nodeType===Bt&&t.host}}function we(t){for(ue(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Se(t,e){e||ue(t);var n=t.parentNode;n&&n.removeChild(t)}var xe=le.prototype={ready:function(e){var n=!1;function i(){n||(n=!0,e())}"complete"===t.document.readyState?t.setTimeout(i):(this.on("DOMContentLoaded",i),le(t).on("load",i))},toString:function(){var t=[];return _(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return l(t>=0?this[t]:this[this.length+t])},length:0,push:f,sort:[].sort,splice:[].splice},Ce={};_("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Ce[o(t)]=t});var ke={};_("input,select,option,textarea,button,form,details".split(","),function(t){ke[t]=!0});var Te={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function Me(t,e){var n=Ce[e.toLowerCase()];return n&&ke[Q(t)]&&n}function Ee(t,e,n){n.call(t,e)}function Ae(t,e,n){var i=e.relatedTarget;i&&(i===t||ae.call(t,i))||n.call(t,e)}function Ie(){this.$get=function(){return T(le,{hasClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),ve(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),ge(t,e)}})}}function $e(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||x)():i+":"+t}function De(t,e){if(e){var n=0;this.nextUid=function(){return++n}}_(t,this.put,this)}_({data:pe,removeData:de,hasData:function(t){for(var e in Wt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)de(t[e])}},function(t,e){le[e]=t}),_({data:pe,inheritedData:_e,scope:function(t){return l.data(t,"$scope")||_e(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return l.data(t,"$isolateScope")||l.data(t,"$isolateScopeNoTemplate")},controller:be,injector:function(t){return _e(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:me,css:function(t,e,n){if(e=Jt(e),!N(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i=t.nodeType;if(i!==Nt&&2!==i&&i!==jt){var r=o(e);if(Ce[r]){if(!N(n))return t[e]||(t.attributes.getNamedItem(e)||$).specified?r:void 0;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(N(n))t.setAttribute(e,n);else if(t.getAttribute){var s=t.getAttribute(e,2);return null===s?void 0:s}}},prop:function(t,e,n){if(!N(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(O(e)){var n=t.nodeType;return n===Ot||n===Nt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(O(e)){if(t.multiple&&"select"===Q(t)){var n=[];return _(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(O(e))return t.innerHTML;ue(t,!0),t.innerHTML=e},empty:we},function(t,e){le.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==we&&O(2===t.length&&t!==me&&t!==be?e:n)){if(j(e)){for(i=0;i<o;i++)if(t===pe)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var s=t.$dv,a=O(s)?Math.min(o,1):o,l=0;l<a;l++){var c=t(this[l],e,n);s=s?s+c:c}return s}for(i=0;i<o;i++)t(this[i],e,n);return this}}),_({removeData:de,on:function(t,e,n,i){if(N(i))throw Kt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(re(t)){var r=fe(t,!0),o=r.events,s=r.handle;s||(s=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(O(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var a=r.specialHandlerWrapper||Ee;o>1&&(r=Ft(r));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||a(t,n,r[l])}};return n.elem=t,n}(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],l=a.length,c=function(e,i,r){var a=o[e];a||((a=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||Ut(t,e,s)),a.push(n)};l--;)e=a[l],Xt[e]?(c(Xt[e],Ae),c(e,void 0,!0)):c(e)}},off:he,one:function(t,e,n){(t=l(t)).on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;ue(t),_(new le(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return _(t.childNodes,function(t){t.nodeType===Ot&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ot||n===Bt)for(var i=0,r=(e=new le(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Ot){var n=t.firstChild;_(new le(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){se(t,l(e).eq(0).clone()[0])},remove:Se,detach:function(t){Se(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new le(e)).length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:ve,removeClass:ge,toggleClass:function(t,e,n){e&&_(e.split(" "),function(e){var i=n;O(i)&&(i=!me(t,e)),(i?ve:ge)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Bt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ce,triggerHandler:function(t,e,n){var i,r,o,s=e.type||e,a=fe(t),l=a&&a.events,c=l&&l[s];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:$,type:s,target:t},e.type&&(i=T(i,e)),r=Ft(c),o=n?[i].concat(n):[i],_(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){le.prototype[e]=function(e,n,i){for(var r,o=0,s=this.length;o<s;o++)O(r)?N(r=t(this[o],e,n,i))&&(r=l(r)):ye(r,t(this[o],e,n,i));return N(r)?r:this}}),le.prototype.bind=le.prototype.on,le.prototype.unbind=le.prototype.off,De.prototype={put:function(t,e){this[$e(t,this.nextUid)]=e},get:function(t){return this[$e(t,this.nextUid)]},remove:function(t){var e=this[t=$e(t,this.nextUid)];return delete this[t],e}};var Le=[function(){this.$get=[function(){return De}]}],Pe=/^([^(]+?)=>/,Oe=/^[^(]*\(\s*([^)]*)\)/m,Ne=/,/,je=/^\s*(_?)(\S+?)\1\s*$/,Re=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Be=e("$injector");function Fe(t){return Function.prototype.toString.call(t)+" "}function Ye(t){var e=Fe(t).replace(Re,"");return e.match(Pe)||e.match(Oe)}function He(t,e){e=!0===e;var n={},i="Provider",r=[],o=new De([],!0),s={$provide:{provider:p(m),factory:p(y),service:p(function(t,e){return y(t,["$injector",function(t){return t.instantiate(e)}])}),value:p(function(t,e){return y(t,L(e),!1)}),constant:p(function(t,e){$t(t,"constant"),s[t]=e,c[t]=e}),decorator:function(t,e){var n=l.get(t+i),r=n.$get;n.$get=function(){var t=d.invoke(r,n);return d.invoke(e,null,{$delegate:t})}}}},l=s.$injector=b(s,function(t,e){throw v.isString(e)&&r.push(e),Be("unpr","Unknown provider: {0}",r.join(" <- "))}),c={},h=b(c,function(t,e){var n=l.get(t+i,e);return d.invoke(n.$get,n,void 0,t)}),d=h;s["$injector"+i]={$get:L(h)};var f=function t(e){At(O(e)||H(e),"modulesToLoad","not an array");var n,i=[];_(e,function(e){if(!o.get(e)){o.put(e,!0);try{B(e)?(n=u(e),i=i.concat(t(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):W(e)?i.push(l.invoke(e)):H(e)?i.push(l.invoke(e)):It(e,"module")}catch(t){throw H(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Be("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=l.get(i[0]);r[i[1]].apply(r,i[2])}}});return i}(t);return(d=h.get("$injector")).strictDi=e,_(f,function(t){t&&d.invoke(t)}),d;function p(t){return function(e,n){if(!j(e))return t(e,n);_(e,S(t))}}function m(t,e){if($t(t,"service"),(W(e)||H(e))&&(e=l.instantiate(e)),!e.$get)throw Be("pget","Provider '{0}' must define $get factory method.",t);return s[t+i]=e}function g(t,e){return function(){var n=d.invoke(e,this);if(O(n))throw Be("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function y(t,e,n){return m(t,{$get:!1!==n?g(t,e):e})}function b(t,o){function l(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Be("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=o(e,i),t[e]}catch(i){throw t[e]===n&&delete t[e],i}finally{r.shift()}}function c(t,n,i){for(var r=[],o=He.$$annotate(t,e,i),s=0,a=o.length;s<a;s++){var c=o[s];if("string"!=typeof c)throw Be("itkn","Incorrect injection token! Expected service name as string, got {0}",c);r.push(n&&n.hasOwnProperty(c)?n[c]:l(c,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r,o=c(t,n,i);return H(t)&&(t=t[t.length-1]),r=t,a<=11||"function"!=typeof r||!/^(?:class\b|constructor\()/.test(Fe(r))?t.apply(e,o):(o.unshift(null),new(Function.prototype.bind.apply(t,o)))},instantiate:function(t,e,n){var i=H(t)?t[t.length-1]:t,r=c(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:l,annotate:He.$$annotate,has:function(e){return s.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function We(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=a.yOffset;if(W(t))t=t();else if(Z(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else F(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function a(t){var e,n,r;(t=B(t)?t:F(t)?t.toString():i.hash())?(e=o.getElementById(t))?s(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,function(t){if("a"===Q(t))return r=t,!0}),(e=r)?s(e):"top"===t&&s(null)):s(null)}return e&&r.$watch(function(){return i.hash()},function(e,n){var i,o;e===n&&""===e||(i=function(){r.$evalAsync(a)},"complete"===(o=o||t).document.readyState?o.setTimeout(i):l(o).on("load",i))}),a}]}He.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw B(n)&&n||(n=t.name||function(t){var e=Ye(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Be("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);_(Ye(t)[1].split(Ne),function(t){t.replace(je,function(t,e,n){i.push(n)})})}t.$inject=i}}else H(t)?(It(t[r=t.length-1],"fn"),i=t.slice(0,r)):It(t,"fn",!0);return i};var ze=e("$animate"),Ue=1;function Ve(t,e){return t||e?t?e?(H(t)&&(t=t.join(" ")),H(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Ge(t){return j(t)?t:{}}var qe=function(){this.$get=$},Xe=function(){var t=new De,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:$,on:$,off:$,pin:$,push:function(s,a,l,c){c&&c(),(l=l||{}).from&&s.css(l.from),l.to&&s.css(l.to),(l.addClass||l.removeClass)&&function(n,s,a){var l=t.get(n)||{},c=r(l,s,!0),u=r(l,a,!1);(c||u)&&(t.put(n,l),e.push(n),1===e.length&&i.$$postDigest(o))}(s,l.addClass,l.removeClass);var u=new n;return u.complete(),u}};function r(t,e,n){var i=!1;return e&&_(e=B(e)?e.split(" "):H(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function o(){_(e,function(e){var n=t.get(e);if(n){var i=function(t){B(t)&&(t=t.split(" "));var e=Pt();return _(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),r="",o="";_(n,function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)}),_(e,function(t){r&&ve(t,r),o&&ge(t,o)}),t.remove(e)}}),e.length=0}}]},Ke=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw ze("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw ze("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Ue)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&l(i),r=r&&l(r),e(n,i=i||r.parent(),r),t.push(n,"enter",Ge(o))},move:function(n,i,r,o){return i=i&&l(i),r=r&&l(r),e(n,i=i||r.parent(),r),t.push(n,"move",Ge(o))},leave:function(e,n){return t.push(e,"leave",Ge(n),function(){e.remove()})},addClass:function(e,n,i){return(i=Ge(i)).addClass=Ve(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=Ge(i)).removeClass=Ve(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=Ge(r)).addClass=Ve(r.addClass,n),r.removeClass=Ve(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=Ge(o)).from=o.from?T(o.from,n):n,o.to=o.to?T(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=Ve(o.tempClasses,r),t.push(e,"animate",o)}}}]}],Je=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},Ze=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){var n=i[0];n&&n.hidden?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,i()):e(!1)})}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}_(t,function(t){t.done(r)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:$,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(_(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},Qe=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=et(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,s=new n;return{start:a,end:a};function a(){return t(function(){!function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null);r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null);r.to&&(e.css(r.to),r.to=null)}(),o||s.complete(),o=!0}),s}}}]};function tn(t,e,n,i){var r=this,o=t.location,s=t.history,a=t.setTimeout,c=t.clearTimeout,u={};r.isMock=!1;var h=0,d=[];function f(t){try{t.apply(null,st(arguments,1))}finally{if(0===--h)for(;d.length;)try{d.pop()()}catch(t){n.error(t)}}}r.$$completeOutstandingRequest=f,r.$$incOutstandingRequestCount=function(){h++},r.notifyWhenNoOutstandingRequests=function(t){0===h?t():d.push(t)};var p,m,g=o.href,v=e.find("base"),y=null,b=i.history?function(){try{return s.state}catch(t){}}:$;k(),m=p,r.url=function(e,n,a){if(O(a)&&(a=null),o!==t.location&&(o=t.location),s!==t.history&&(s=t.history),e){var l=m===a;if(g===e&&(!i.history||l))return r;var c=g&&Jn(g)===Jn(e);return g=e,m=a,!i.history||c&&l?(c||(y=e),n?o.replace(e):c?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(y=e)):(s[n?"replaceState":"pushState"](a,"",e),k(),m=p),y&&(y=e),r}return y||o.href.replace(/%27/g,"'")},r.state=function(){return p};var w=[],S=!1;function x(){y=null,k(),T()}var C=null;function k(){nt(p=O(p=b())?null:p,C)&&(p=C),C=p}function T(){g===r.url()&&m===p||(g=r.url(),m=p,_(w,function(t){t(r.url(),p)}))}r.onUrlChange=function(e){return S||(i.history&&l(t).on("popstate",x),l(t).on("hashchange",x),S=!0),w.push(e),e},r.$$applicationDestroyed=function(){l(t).off("hashchange popstate",x)},r.$$checkUrlChange=T,r.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?:)?\/\/[^\/]*/,""):""},r.defer=function(t,e){var n;return h++,n=a(function(){delete u[n],f(t)},e||0),u[n]=!0,n},r.defer.cancel=function(t){return!!u[t]&&(delete u[t],c(t),f($),!0)}}function en(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new tn(t,i,e,n)}]}function nn(){this.$get=function(){var t={};function n(n,i){if(n in t)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",n);var r=0,o=T({},i,{id:n}),s=Pt(),a=i&&i.capacity||Number.MAX_VALUE,l=Pt(),c=null,u=null;return t[n]={put:function(t,e){if(!O(e)){if(a<Number.MAX_VALUE)h(l[t]||(l[t]={key:t}));return t in s||r++,s[t]=e,r>a&&this.remove(u.key),e}},get:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;h(e)}return s[t]},remove:function(t){if(a<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),d(e.n,e.p),delete l[t]}t in s&&(delete s[t],r--)},removeAll:function(){s=Pt(),r=0,l=Pt(),c=u=null},destroy:function(){s=null,o=null,l=null,delete t[n]},info:function(){return T({},o,{size:r})}};function h(t){t!==c&&(u?u===t&&(u=t.n):u=t,d(t.n,t.p),d(t,c),(c=t).n=null)}function d(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return n.info=function(){var e={};return _(t,function(t,n){e[n]=t.info()}),e},n.get=function(e){return t[e]},n}}function rn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var on=e("$compile");var sn=new function(){};function an(e,n){var i={},s="Directive",c=/^\s*directive:\s*([\w-]+)\s+(.*)$/,u=/(([\w-]+)(?::([^;]+))?;?)/,h=function(t){var e,n={},i=t.split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,m=Pt();function g(t,e,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,r=Pt();return _(t,function(t,o){if(t in m)r[o]=m[t];else{var s=t.match(i);if(!s)throw on("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o},s[4]&&(m[t]=r[o])}}),r}function v(t,e){var n={isolateScope:null,bindToController:null};if(j(t.scope)&&(!0===t.bindToController?(n.bindToController=g(t.scope,e,!0),n.isolateScope={}):n.isolateScope=g(t.scope,e,!1)),j(t.bindToController)&&(n.bindToController=g(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw on("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,r){return At(n,"name"),$t(n,"directive"),B(n)?(!function(t){var e=t.charAt(0);if(!e||e!==o(e))throw on("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw on("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),At(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+s,["$injector","$exceptionHandler",function(t,e){var r=[];return _(i[n],function(i,o){try{var s=t.invoke(i);W(s)?s={compile:L(s)}:!s.compile&&s.link&&(s.compile=L(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||n,s.require=function(t){var e=t.require||t.controller&&t.name;return!H(e)&&j(e)&&_(e,function(t,n){var i=t.match(d);t.substring(i[0].length)||(e[n]=i[0]+n)}),e}(s),s.restrict=function(t,e){if(t&&(!B(t)||!/[EACM]/.test(t)))throw on("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(s.restrict,n),s.$$moduleName=i.$$moduleName,r.push(s)}catch(t){e(t)}}),r}])),i[n].push(r)):_(n,S(t)),this},this.component=function(t,e){var n=e.controller||function(){};function i(t){function i(e){return W(e)||H(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=e.template||e.templateUrl?e.template:"",o={controller:n,controllerAs:mn(e.controller)||e.controllerAs||"$ctrl",template:i(r),templateUrl:i(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return _(e,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return _(e,function(t,e){"$"===e.charAt(0)&&(i[e]=t,W(n)&&(n[e]=t))}),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(t){return N(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return N(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(t){return N(t)?(y=t,this):y};var b=!0;this.preAssignBindingsEnabled=function(t){return N(t)?(b=t,this):b};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w};var x=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(x=t,this):x};var C=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(C=t,this):C},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,m,g,S,k,M,E,A,L){var P,R=/^\w/,F=t.document.createElement("div"),Y=x,z=C,U=w;function q(){try{if(!--U)throw P=void 0,on("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);M.$apply(function(){for(var t=[],e=0,n=P.length;e<n;++e)try{P[e]()}catch(e){t.push(e)}if(P=void 0,t.length)throw t})}finally{U++}}function X(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function J(t,e){try{t.addClass(e)}catch(t){}}X.prototype={$normalize:un,$addClass:function(t){t&&t.length>0&&A.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&A.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=hn(t,e);n&&n.length&&A.addClass(this.$$element,n);var i=hn(e,t);i&&i.length&&A.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r,o=Me(this.$$element[0],t),s=Te[t],a=t;if(o?(this.$$element.prop(t,e),i=o):s&&(this[s]=e,a=s),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Mt(t,"-")),"a"===(r=Q(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===r&&"src"===t)this[t]=e=L(e,"src"===t);else if("img"===r&&"srcset"===t&&N(e)){for(var l="",c=K(e),u=/\s/.test(c)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,h=c.split(u),d=Math.floor(h.length/2),f=0;f<d;f++){var p=2*f;l+=L(K(h[p]),!0),l+=" "+K(h[p+1])}var g=K(h[2*f]).split(/\s/);l+=L(K(g[0]),!0),2===g.length&&(l+=" "+K(g[1])),this[t]=e=l}!1!==n&&(null===e||O(e)?this.$$element.removeAttr(i):R.test(i)?this.$$element.attr(i,e):function(t,e,n){F.innerHTML="<span "+e+">";var i=F.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var v=this.$$observers;v&&_(v[a],function(t){try{t(e)}catch(t){m(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Pt()),r=i[t]||(i[t]=[]);return r.push(e),M.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||O(n[t])||e(n[t])}),function(){tt(r,e)}}};var Z=n.startSymbol(),et=n.endSymbol(),it="{{"===Z&&"}}"===et?D:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,et)},rt=/^ngAttr[A-Z]/,ot=/^(.+)Start$/;return lt.$$addBindingInfo=y?function(t,e){var n=t.data("$binding")||[];H(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:$,lt.$$addBindingClass=y?function(t){J(t,"ng-binding")}:$,lt.$$addScopeInfo=y?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:$,lt.$$addScopeClass=y?function(t,e){J(t,e?"ng-isolate-scope":"ng-scope")}:$,lt.$$createComment=function(e,n){var i="";return y&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},lt;function lt(e,n,i,r,o){e instanceof l||(e=l(e));for(var s=/\S+/,a=0,c=e.length;a<c;a++){var u=e[a];u.nodeType===Nt&&u.nodeValue.match(s)&&se(u,e[a]=t.document.createElement("span"))}var h=ct(e,n,e,i,r,o);lt.$$addScopeClass(e);var d=null;return function(t,n,i){At(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new());var r,s,a,c=(i=i||{}).parentBoundTranscludeFn,u=i.transcludeControllers,f=i.futureParentElement;if(c&&c.$$boundTransclude&&(c=c.$$boundTransclude),d||(s=(r=f)&&r[0],d=s&&"foreignobject"!==Q(s)&&p.call(s).match(/SVG/)?"svg":"html"),a="html"!==d?l(kt(d,l("<div>").append(e).html())):n?xe.clone.call(e):e,u)for(var m in u)a.data("$"+m+"Controller",u[m].instance);return lt.$$addScopeInfo(a,t),n&&n(a,t),h&&h(t,a,a,c),a}}function ct(t,e,n,i,r,o){for(var s,a,c,u,h,d,f,p=[],m=0;m<t.length;m++)s=new X,(c=(a=ht(t[m],[],s,0===m?i:void 0,r)).length?gt(a,t[m],s,e,n,null,[],[],o):null)&&c.scope&&lt.$$addScopeClass(s.$$element),h=c&&c.terminal||!(u=t[m].childNodes)||!u.length?null:ct(u,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||h)&&(p.push(m,c,h),d=!0,f=f||c),o=null;return d?function(t,n,i,r){var o,s,a,c,u,h,d,m,g;if(f){var v=n.length;for(g=new Array(v),u=0;u<p.length;u+=3)d=p[u],g[d]=n[d]}else g=n;for(u=0,h=p.length;u<h;)a=g[p[u++]],o=p[u++],s=p[u++],o?(o.scope?(c=t.$new(),lt.$$addScopeInfo(l(a),c)):c=t,m=o.transcludeOnThisElement?ut(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?ut(t,e):null,o(s,c,a,i,m)):s&&s(t,a.childNodes,void 0,r)}:null}function ut(t,e,n){function i(i,r,o,s,a){return i||((i=t.$new(!1,a)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}var r=i.$$slots=Pt();for(var o in e.$$slots)e.$$slots[o]?r[o]=ut(t,e.$$slots[o],n):r[o]=null;return i}function ht(t,e,i,r,o){var s,l,h,d=t.nodeType,f=i.$attr;switch(d){case Ot:bt(e,un(l=Q(t)),"E",r,o);for(var p,m,g,v,y,b,_=t.attributes,w=0,S=_&&_.length;w<S;w++){var x=!1,C=!1;m=(p=_[w]).name,y=K(p.value),v=un(m),(b=rt.test(v))&&(m=m.replace(cn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var k=v.match(ot);k&&_t(k[1])&&(x=m,C=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),f[g=un(m.toLowerCase())]=m,!b&&i.hasOwnProperty(g)||(i[g]=y,Me(t,g)&&(i[g]=!0)),Tt(t,e,y,g,b),bt(e,g,"A",r,o,x,C)}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!z)break;if(j(h=t.className)&&(h=h.animVal),B(h)&&""!==h)for(;s=u.exec(h);)bt(e,g=un(s[2]),"C",r,o)&&(i[g]=K(s[3])),h=h.substr(s.index+s[0].length);break;case Nt:if(11===a)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===Nt;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&lt.$$addBindingClass(e),function(t,e){var r=e.parent();n||lt.$$addBindingClass(r),lt.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case jt:if(!Y)break;!function(t,e,n,i,r){try{var o=c.exec(t.nodeValue);if(o){var s=un(o[1]);bt(e,s,"M",i,r)&&(n[s]=K(o[2]))}}catch(t){}}(t,e,i,r,o)}return e.sort(xt),e}function dt(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw on("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ot&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return l(i)}function ft(t,e,n){return function(i,r,o,s,a){return r=dt(r[0],e,n),t(i,r,o,s,a)}}function mt(t,e,n,i,r,o){var s;return t?lt(e,n,i,r,o):function(){return s||(s=lt(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function gt(t,e,n,i,r,o,s,a,c){c=c||{};for(var u,h,d,f,p,g=-Number.MAX_VALUE,v=c.newScopeDirective,y=c.controllerDirectives,w=c.newIsolateScopeDirective,S=c.templateDirective,x=c.nonTlbTranscludeDirective,C=!1,M=!1,E=c.hasElementTranscludeDirective,A=n.$$element=l(e),I=o,$=i,D=!1,L=!1,P=0,N=t.length;P<N;P++){var R=(u=t[P]).$$start,B=u.$$end;if(R&&(A=dt(e,R,B)),d=void 0,g>u.priority)break;if((p=u.scope)&&(u.templateUrl||(j(p)?(Ct("new/isolated scope",w||v,u,A),w=u):Ct("new/isolated scope",w,u,A)),v=v||u),h=u.name,!D&&(u.replace&&(u.templateUrl||u.template)||u.transclude&&!u.$$tlb)){for(var F,Y=P+1;F=t[Y++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){L=!0;break}D=!0}if(!u.templateUrl&&u.controller&&(y=y||Pt(),Ct("'"+h+"' controller",y[h],u,A),y[h]=u),p=u.transclude)if(C=!0,u.$$tlb||(Ct("transclusion",x,u,A),x=u),"element"===p)E=!0,g=u.priority,d=A,A=n.$$element=l(lt.$$createComment(h,n[h])),e=A[0],Et(r,st(d),e),d[0].$$parentNode=d[0].parentNode,$=mt(L,d,i,g,I&&I.name,{nonTlbTranscludeDirective:x});else{var z=Pt();if(d=l(ce(e)).contents(),j(p)){d=[];var U=Pt(),G=Pt();for(var q in _(p,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,U[t]=e,z[e]=null,G[e]=n}),_(A.contents(),function(t){var e=U[un(Q(t))];e?(G[e]=!0,z[e]=z[e]||[],z[e].push(t)):d.push(t)}),_(G,function(t,e){if(!t)throw on("reqslot","Required transclusion slot `{0}` was not filled.",e)}),z)z[q]&&(z[q]=mt(L,z[q],i))}A.empty(),($=mt(L,d,i,void 0,void 0,{needsNewScope:u.$$isolateScope||u.$$newScope})).$$slots=z}if(u.template)if(M=!0,Ct("template",S,u,A),S=u,p=W(u.template)?u.template(A,n):u.template,p=it(p),u.replace){if(I=u,d=ie(p)?[]:dn(kt(u.templateNamespace,K(p))),e=d[0],1!==d.length||e.nodeType!==Ot)throw on("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h,"");Et(r,A,e);var J={$attr:{}},Z=ht(e,[],J),tt=t.splice(P+1,t.length-(P+1));(w||v)&&yt(Z,w,v),t=t.concat(Z).concat(tt),wt(n,J),N=t.length}else A.html(p);if(u.templateUrl)M=!0,Ct("template",S,u,A),S=u,u.replace&&(I=u),rt=St(t.splice(P,t.length-P),A,n,r,C&&$,s,a,{controllerDirectives:y,newScopeDirective:v!==u&&v,newIsolateScopeDirective:w,templateDirective:S,nonTlbTranscludeDirective:x}),N=t.length;else if(u.compile)try{f=u.compile(A,n,$);var et=u.$$originalDirective||u;W(f)?nt(null,at(et,f),R,B):f&&nt(at(et,f.pre),at(et,f.post),R,B)}catch(t){m(t,pt(A))}u.terminal&&(rt.terminal=!0,g=Math.max(g,u.priority))}return rt.scope=v&&!0===v.scope,rt.transcludeOnThisElement=C,rt.templateOnThisElement=M,rt.transclude=$,c.hasElementTranscludeDirective=E,rt;function nt(t,e,n,i){t&&(n&&(t=ft(t,n,i)),t.require=u.require,t.directiveName=h,(w===u||u.$$isolateScope)&&(t=It(t,{isolateScope:!0})),s.push(t)),e&&(n&&(e=ft(e,n,i)),e.require=u.require,e.directiveName=h,(w===u||u.$$isolateScope)&&(e=It(e,{isolateScope:!0})),a.push(e))}function rt(t,i,r,o,c){var u,h,d,f,p,g,x,C,M,A;for(var I in e===r?(M=n,C=n.$$element):M=new X(C=l(r),n),p=i,w?f=i.$new(!0):v&&(p=i.$parent),c&&((x=function(t,e,n,i){var r;V(t)||(i=n,n=e,e=t,t=void 0);E&&(r=g);n||(n=E?C.parent():C);if(!i)return c(t,e,r,n,N);var o=c.$$slots[i];if(o)return o(t,e,r,n,N);if(O(o))throw on("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,pt(C))}).$$boundTransclude=c,x.isSlotFilled=function(t){return!!c.$$slots[t]}),y&&(g=function(t,e,n,i,r,o,s){var a=Pt();for(var l in i){var c=i[l],u={$scope:c===s||c.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=c.controller;"@"===h&&(h=e[c.name]);var d=k(h,u,!0,c.controllerAs);a[c.name]=d,t.data("$"+c.name+"Controller",d.instance)}return a}(C,M,x,y,f,i,w)),w&&(lt.$$addScopeInfo(C,f,!0,!(S&&(S===w||S===w.$$originalDirective))),lt.$$addScopeClass(C,!0),f.$$isolateBindings=w.$$isolateBindings,(A=Dt(i,M,f,f.$$isolateBindings,w)).removeWatches&&f.$on("$destroy",A.removeWatches)),g){var $=y[I],D=g[I],L=$.$$bindings.bindToController;if(b){D.bindingInfo=L?Dt(p,M,D.instance,L,$):{};var P=D();P!==D.instance&&(D.instance=P,C.data("$"+$.name+"Controller",P),D.bindingInfo.removeWatches&&D.bindingInfo.removeWatches(),D.bindingInfo=Dt(p,M,D.instance,L,$))}else D.instance=D(),C.data("$"+$.name+"Controller",D.instance),D.bindingInfo=Dt(p,M,D.instance,L,$)}for(_(y,function(t,e){var n=t.require;t.bindToController&&!H(n)&&j(n)&&T(g[e].instance,vt(e,n,C,g))}),_(g,function(t){var e=t.instance;if(W(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){m(t)}if(W(e.$onInit))try{e.$onInit()}catch(t){m(t)}W(e.$doCheck)&&(p.$watch(function(){e.$doCheck()}),e.$doCheck()),W(e.$onDestroy)&&p.$on("$destroy",function(){e.$onDestroy()})}),u=0,h=s.length;u<h;u++)$t(d=s[u],d.isolateScope?f:i,C,M,d.require&&vt(d.directiveName,d.require,C,g),x);var N=i;for(w&&(w.template||null===w.templateUrl)&&(N=f),t&&t(N,r.childNodes,void 0,c),u=a.length-1;u>=0;u--)$t(d=a[u],d.isolateScope?f:i,C,M,d.require&&vt(d.directiveName,d.require,C,g),x);_(g,function(t){var e=t.instance;W(e.$postLink)&&e.$postLink()})}}function vt(t,e,n,i){var r;if(B(e)){var o=e.match(d),s=e.substring(o[0].length),a=o[1]||o[3],l="?"===o[2];if("^^"===a?n=n.parent():r=(r=i&&i[s])&&r.instance,!r){var c="$"+s+"Controller";r=a?n.inheritedData(c):n.data(c)}if(!r&&!l)throw on("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(H(e)){r=[];for(var u=0,h=e.length;u<h;u++)r[u]=vt(t,e[u],n,i)}else j(e)&&(r={},_(e,function(e,o){r[o]=vt(t,e,n,i)}));return r||null}function yt(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=I(t[i],{$$isolateScope:e,$$newScope:n})}function bt(t,n,r,o,a,l,c){if(n===a)return null;var u=null;if(i.hasOwnProperty(n))for(var h,d=e.get(n+s),f=0,p=d.length;f<p;f++)if(h=d[f],(O(o)||o>h.priority)&&-1!==h.restrict.indexOf(r)){if(l&&(h=I(h,{$$start:l,$$end:c})),!h.$$bindings){var m=h.$$bindings=v(h,h.name);j(m.isolateScope)&&(h.$$isolateBindings=m.isolateScope)}t.push(h),u=h}return u}function _t(t){if(i.hasOwnProperty(t))for(var n=e.get(t+s),r=0,o=n.length;r<o;r++)if(n[r].multiElement)return!0;return!1}function wt(t,e){var n=e.$attr,i=t.$attr;_(t,function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),_(e,function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function St(t,e,n,i,r,o,s,a){var c,u,h=[],d=e[0],f=t.shift(),p=I(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),m=W(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,v=f.templateNamespace;return e.empty(),g(m).then(function(g){var y,b,w,S;if(g=it(g),f.replace){if(w=ie(g)?[]:dn(kt(v,K(g))),y=w[0],1!==w.length||y.nodeType!==Ot)throw on("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,m);b={$attr:{}},Et(i,e,y);var x=ht(y,[],b);j(f.scope)&&yt(x,!0),t=x.concat(t),wt(n,b)}else y=d,e.html(g);for(t.unshift(p),c=gt(t,y,n,r,e,f,o,s,a),_(i,function(t,n){t===y&&(i[n]=e[0])}),u=ct(e[0].childNodes,r);h.length;){var C=h.shift(),k=h.shift(),T=h.shift(),M=h.shift(),E=e[0];if(!C.$$destroyed){if(k!==d){var A=k.className;a.hasElementTranscludeDirective&&f.replace||(E=ce(y)),Et(T,l(k),E),J(l(E),A)}S=c.transcludeOnThisElement?ut(C,c.transclude,M):M,c(u,C,E,i,S)}}h=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(h?h.push(e,n,i,o):(c.transcludeOnThisElement&&(o=ut(e,c.transclude,r)),c(u,e,n,i,o)))}}function xt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Ct(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw on("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,pt(i))}function kt(e,n){switch(e=o(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Tt(t,e,i,r,o){var s=function(t,e){if("srcdoc"===e)return E.HTML;var n=Q(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return E.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e)return E.RESOURCE_URL}(t,r),a=!o,l=h[r]||o,c=n(i,a,s,l);if(c){if("multiple"===r&&"select"===Q(t))throw on("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",pt(t));e.push({priority:100,compile:function(){return{pre:function(t,e,o){var a=o.$$observers||(o.$$observers=Pt());if(f.test(r))throw on("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=o[r];u!==i&&(c=u&&n(u,!0,s,l),i=u),c&&(o[r]=c(t),(a[r]||(a[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||t).$watch(c,function(t,e){"class"===r&&t!==e?o.$updateClass(t,e):o.$set(r,t)}))}}}})}}function Et(e,n,i){var r,o,s=n[0],a=n.length,c=s.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===s){e[r++]=i;for(var u=r,h=u+a-1,d=e.length;u<d;u++,h++)h<d?e[u]=e[h]:delete e[u];e.length-=a-1,e.context===s&&(e.context=i);break}c&&c.replaceChild(i,s);var f=t.document.createDocumentFragment();for(r=0;r<a;r++)f.appendChild(n[r]);for(l.hasData(s)&&(l.data(i,l.data(s)),l(s).off("$destroy")),l.cleanData(f.querySelectorAll("*")),r=1;r<a;r++)delete n[r];n[0]=i,n.length=1}function It(t,e){return T(function(){return t.apply(null,arguments)},t,e)}function $t(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){m(t,pt(n))}}function Dt(t,e,i,o,s){var a,l=[],c={};function u(e,n,r){!W(i.$onChanges)||n===r||n!=n&&r!=r||(P||(t.$$postDigest(q),P=[]),a||(a={},P.push(h)),a[e]&&(r=a[e].previousValue),a[e]=new ln(r,n))}function h(){i.$onChanges(a),a=void 0}return _(o,function(o,a){var h,d,f,p,m,g=o.attrName,v=o.optional;switch(o.mode){case"@":v||r.call(e,g)||(i[a]=e[g]=void 0),m=e.$observe(g,function(t){if(B(t)||G(t)){var e=i[a];u(a,t,e),i[a]=t}}),e.$$observers[g].$$scope=t,B(h=e[g])?i[a]=n(h)(t):G(h)&&(i[a]=h),c[a]=new ln(sn,i[a]),l.push(m);break;case"=":if(!r.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;d=S(e[g]),p=d.literal?nt:function(t,e){return t===e||t!=t&&e!=e},f=d.assign||function(){throw h=i[a]=d(t),on("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,s.name)},h=i[a]=d(t);var y=function(e){return p(e,i[a])||(p(e,h)?f(t,e=i[a]):i[a]=e),h=e};y.$stateful=!0,m=o.collection?t.$watchCollection(e[g],y):t.$watch(S(e[g],y),null,d.literal),l.push(m);break;case"<":if(!r.call(e,g)){if(v)break;e[g]=void 0}if(v&&!e[g])break;var b=(d=S(e[g])).literal,_=i[a]=d(t);c[a]=new ln(sn,i[a]),m=t.$watch(d,function(t,e){if(e===t){if(e===_||b&&nt(e,_))return;e=_}u(a,t,e),i[a]=t},b),l.push(m);break;case"&":if((d=e.hasOwnProperty(g)?S(e[g]):$)===$&&v)break;i[a]=function(e){return d(t,e)}}}),{initialChanges:c,removeWatches:l.length&&function(){for(var t=0,e=l.length;t<e;++t)l[t]()}}}}]}function ln(t,e){this.previousValue=t,this.currentValue=e}an.$inject=["$provide","$$sanitizeUriProvider"],ln.prototype.isFirstChange=function(){return this.previousValue===sn};var cn=/^((?:x|data)[:\-_])/i;function un(t){return Jt(t.replace(cn,""))}function hn(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s===r[a])continue t;n+=(n.length>0?" ":"")+s}return n}function dn(t){var e=(t=l(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===jt||n.nodeType===Nt&&""===n.nodeValue.trim())&&d.call(t,e,1)}return t}var fn=e("$controller"),pn=/^(\S+)(\s+as\s+([\w$]+))?$/;function mn(t,e){if(e&&B(e))return e;if(B(t)){var n=pn.exec(t);if(n)return n[3]}}function gn(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){$t(e,"controller"),j(e)?T(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(i,r){return function(e,s,a,l){var c,u,h,d;if(a=!0===a,l&&B(l)&&(d=l),B(e)){if(!(u=e.match(pn)))throw fn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);if(h=u[1],d=d||u[3],!(e=t.hasOwnProperty(h)?t[h]:Dt(s.$scope,h,!0)||(n?Dt(r,h,!0):void 0)))throw fn("ctrlreg","The controller with the name '{0}' is not registered.",h);It(e,h,!0)}if(a){var f=(H(e)?e[e.length-1]:e).prototype;return c=Object.create(f||null),d&&o(s,d,c,h||e.name),T(function(){var t=i.invoke(e,c,s,h);return t!==c&&(j(t)||W(t))&&(c=t,d&&o(s,d,c,h||e.name)),c},{instance:c,identifier:d})}return c=i.instantiate(e,s,h),d&&o(s,d,c,h||e.name),c};function o(t,n,i,r){if(!t||!j(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,n);t.$scope[n]=i}}]}function vn(){this.$get=["$window",function(t){return l(t.document)}]}function yn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var bn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof l&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},_n="application/json",wn={"Content-Type":_n+";charset=utf-8"},Sn=/^\[|^\{(?!\{)/,xn={"[":/]$/,"{":/}$/},Cn=/^\)]\}',?\n/,kn=e("$http"),Tn=function(t){return function(){throw kn("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}};function Mn(t){return j(t)?Y(t)?t.toISOString():ct(t):t}function En(){this.$get=function(){return function(t){if(!t)return"";var e=[];return w(t,function(t,n){null===t||O(t)||(H(t)?_(t,function(t){e.push(bt(n)+"="+bt(Mn(t)))}):e.push(bt(n)+"="+bt(Mn(t))))}),e.join("&")}}}function An(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){if(null===n||O(n))return;H(n)?_(n,function(e,n){t(e,i+"["+(j(e)?n:"")+"]")}):j(n)&&!Y(n)?w(n,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):e.push(bt(i)+"="+bt(Mn(n)))}(t,"",!0),e.join("&")}}}function In(t,e){if(B(t)){var n=t.replace(Cn,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(_n)||(o=(r=n).match(Sn))&&xn[o[0]].test(r))&&(t=ut(n))}}var r,o;return t}function $n(t){var e,n=Pt();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return B(t)?_(t.split("\n"),function(t){e=t.indexOf(":"),i(o(K(t.substr(0,e))),K(t.substr(e+1)))}):j(t)&&_(t,function(t,e){i(o(e),K(t))}),n}function Dn(t){var e;return function(n){if(e||(e=$n(t)),n){var i=e[o(n)];return void 0===i&&(i=null),i}return e}}function Ln(t,e,n,i){return W(i)?i(t,e,n):(_(i,function(i){t=i(t,e,n)}),t)}function Pn(t){return 200<=t&&t<300}function On(){var t=this.defaults={transformResponse:[In],transformRequest:[function(t){return!j(t)||(e=t,"[object File]"===p.call(e))||function(t){return"[object Blob]"===p.call(t)}(t)||function(t){return"[object FormData]"===p.call(t)}(t)?t:ct(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ft(wn),put:Ft(wn),patch:Ft(wn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return N(t)?(n=!!t,this):n};var i=!0;this.useLegacyPromiseExtensions=function(t){return N(t)?(i=!!t,this):i};var r=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,l,c,u,h,d){var f=c("$http");t.paramSerializer=B(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var p=[];function m(r){if(!j(r))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!B(r.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",r.url);var c=T({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},r);c.headers=function(e){var n,i,r,s=t.headers,a=T({},e.headers);s=T({},s.common,s[o(e.method)]);t:for(n in s){for(r in i=o(n),a)if(o(r)===i)continue t;a[n]=s[n]}return function(t,e){var n,i={};return _(t,function(t,r){W(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t}),i}(a,Ft(e))}(r),c.method=s(c.method),c.paramSerializer=B(c.paramSerializer)?d.get(c.paramSerializer):c.paramSerializer;var g=[],v=[],y=h.when(c);return _(p,function(t){(t.request||t.requestError)&&g.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)}),y=b(y,g),y=b(y=y.then(function(e){var i=e.headers,r=Ln(e.data,Dn(i),void 0,e.transformRequest);O(r)&&_(i,function(t,e){"content-type"===o(e)&&delete i[e]});O(e.withCredentials)&&!O(t.withCredentials)&&(e.withCredentials=t.withCredentials);return function(e,i){var r,o,s=h.defer(),c=s.promise,d=e.headers,p=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(e.url,e.paramSerializer(e.params));m.pendingRequests.push(e),c.then(w,w),!e.cache&&!t.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(r=j(e.cache)?e.cache:j(t.cache)?t.cache:f);r&&(N(o=r.get(p))?q(o)?o.then(b,b):H(o)?y(o[1],o[0],Ft(o[2]),o[3]):y(o,200,{},"OK"):r.put(p,c));if(O(o)){var g=dr(e.url)?l()[e.xsrfCookieName||t.xsrfCookieName]:void 0;g&&(d[e.xsrfHeaderName||t.xsrfHeaderName]=g),a(e.method,p,i,function(t,e,i,o){r&&(Pn(t)?r.put(p,[t,e,$n(i),o]):r.remove(p));function s(){y(e,t,i,o)}n?u.$applyAsync(s):(s(),u.$$phase||u.$apply())},d,e.timeout,e.withCredentials,e.responseType,v(e.eventHandlers),v(e.uploadEventHandlers))}return c;function v(t){if(t){var e={};return _(t,function(t,i){e[i]=function(e){function i(){t(e)}n?u.$applyAsync(i):u.$$phase?i():u.$apply(i)}}),e}}function y(t,n,i,r){(Pn(n=n>=-1?n:0)?s.resolve:s.reject)({data:t,status:n,headers:Dn(i),config:e,statusText:r})}function b(t){y(t.data,t.status,Ft(t.headers()),t.statusText)}function w(){var t=m.pendingRequests.indexOf(e);-1!==t&&m.pendingRequests.splice(t,1)}}(e,r).then(w,w)}),v),i?(y.success=function(t){return It(t,"fn"),y.then(function(e){t(e.data,e.status,e.headers,c)}),y},y.error=function(t){return It(t,"fn"),y.then(null,function(e){t(e.data,e.status,e.headers,c)}),y}):(y.success=Tn("success"),y.error=Tn("error")),y;function b(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function w(t){var e=T({},t);return e.data=Ln(t.data,t.headers,t.status,c.transformResponse),Pn(t.status)?e:h.reject(e)}}return _(r,function(t){p.unshift(B(t)?d.get(t):d.invoke(t))}),m.pendingRequests=[],function(t){_(arguments,function(t){m[t]=function(e,n){return m(T({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){_(arguments,function(t){m[t]=function(e,n,i){return m(T({},i||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function Nn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function jn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(s,a,l,c,u,h,d,f,p,m){if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"===o(s))var g=i.createCallback(a),v=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){Vt(o,"load",s),Vt(o,"error",s),r.body.removeChild(o),o=null;var a=-1,l="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),l=t.type,a="error"===t.type?404:200),n&&n(a,l)},Ut(o,"load",s),Ut(o,"error",s),r.body.appendChild(o),s}(a,g,function(t,e){var n=200===t&&i.getResponse(g);x(c,t,n,"",e),i.removeCallback(g)});else{var y=e(s,a);y.open(s,a,!0),_(u,function(t,e){N(t)&&y.setRequestHeader(e,t)}),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"===hr(a).protocol?404:0),x(c,n,e,y.getAllResponseHeaders(),t)};var b=function(){x(c,-1,null,null,"")};if(y.onerror=b,y.onabort=b,y.ontimeout=b,_(p,function(t,e){y.addEventListener(e,t)}),_(m,function(t,e){y.upload.addEventListener(e,t)}),d&&(y.withCredentials=!0),f)try{y.responseType=f}catch(t){if("json"!==f)throw t}y.send(O(l)?null:l)}if(h>0)var w=n(S,h);else q(h)&&h.then(S);function S(){v&&v(),y&&y.abort()}function x(e,i,r,o,s){N(w)&&n.cancel(w),v=y=null,e(i,r,o,s),t.$$completeOutstandingRequest($)}}}(t,i,t.defer,e,n[0])}]}var Rn=v.$interpolateMinErr=e("$interpolate");function Bn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,s=e.length,a=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(n){return n.replace(a,t).replace(l,e)}function h(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function d(a,l,c,d){if(!a.length||-1===a.indexOf(t)){var f;if(!l)(f=L(u(a))).exp=a,f.expressions=[],f.$$watchDelegate=h;return f}d=!!d;for(var p,m,g,v=0,y=[],b=[],_=a.length,w=[],S=[];v<_;){if(-1===(p=a.indexOf(t,v))||-1===(m=a.indexOf(e,p+o))){v!==_&&w.push(u(a.substring(v)));break}v!==p&&w.push(u(a.substring(v,p))),g=a.substring(p+o,m),y.push(g),b.push(n(g,k)),v=m+s,S.push(w.length),w.push("")}if(c&&w.length>1&&Rn.throwNoconcat(a),!l||y.length){var x=function(t){for(var e=0,n=y.length;e<n;e++){if(d&&O(t[e]))return;w[S[e]]=t[e]}return w.join("")},C=function(t){return c?r.getTrusted(c,t):r.valueOf(t)};return T(function(t){var e=0,n=y.length,r=new Array(n);try{for(;e<n;e++)r[e]=b[e](t);return x(r)}catch(t){i(Rn.interr(a,t))}},{exp:a,expressions:y,$$watchDelegate:function(t,e){var n;return t.$watchGroup(b,function(i,r){var o=x(i);W(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}function k(t){try{return t=C(t),d&&!N(t)?t:function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=ct(t)}return t}(t)}catch(t){i(Rn.interr(a,t))}}}return d.startSymbol=function(){return t},d.endSymbol=function(){return e},d}]}function Fn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){var o={};function s(s,a,l,c){var u=arguments.length>4,h=u?st(arguments,4):[],d=e.setInterval,f=e.clearInterval,p=0,m=N(c)&&!c,g=(m?i:n).defer(),v=g.promise;return l=N(l)?l:0,v.$$intervalId=d(function(){m?r.defer(y):t.$evalAsync(y),g.notify(p++),l>0&&p>=l&&(g.resolve(p),f(v.$$intervalId),delete o[v.$$intervalId]),m||t.$apply()},a),o[v.$$intervalId]=g,v;function y(){u?s.apply(null,h):s(p)}}return s.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},s}]}Rn.throwNoconcat=function(t){throw Rn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Rn.interr=function(t,e){return Rn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Yn=function(){this.$get=["$window",function(t){var e=t.angular.callbacks,n={};return{createCallback:function(t){var i="_"+(e.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return n[r]=e[i]=o,r},wasCalled:function(t){return n[t].called},getResponse:function(t){return n[t].data},removeCallback:function(t){var i=n[t];delete e[i.id],delete n[t]}}}]},Hn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Wn={http:80,https:443,ftp:21},zn=e("$location");function Un(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=yt(e[n]);return e.join("/")}function Vn(t,e){var n=hr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=E(n.port)||Wn[n.protocol]||null}var Gn=/^\s*[\\\/]{2,}/;function qn(t,e){if(Gn.test(t))throw zn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var i=hr(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=gt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Xn(t,e){return t.slice(0,e.length)===e}function Kn(t,e){if(Xn(e,t))return e.substr(t.length)}function Jn(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function Zn(t){return t.replace(/(#.+)|#$/,"$1")}function Qn(t,e,n){this.$$html5=!0,n=n||"",Vn(t,this),this.$$parse=function(t){var n=Kn(e,t);if(!B(n))throw zn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);qn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=vt(this.$$search),n=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Un(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(N(o=Kn(t,i))?(s=o,a=n&&N(o=Kn(n,o))?e+(Kn("/",o)||o):t+s):N(o=Kn(e,i))?a=e+o:e===i+"/"&&(a=e),a&&this.$$parse(a),!!a);var o,s,a}}function ti(t,e,n){Vn(t,this),this.$$parse=function(i){var r,o=Kn(t,i)||Kn(e,i);O(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",O(o)&&(t=i,this.replace())):O(r=Kn(n,o))&&(r=o),qn(r,this),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;Xn(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$compose=function(){var e=vt(this.$$search),i=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Un(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Jn(t)===Jn(e)&&(this.$$parse(e),!0)}}function ei(t,e,n){this.$$html5=!0,ti.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===Jn(i)?o=i:(s=Kn(e,i))?o=t+n+s:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,s},this.$$compose=function(){var e=vt(this.$$search),i=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Un(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}var ni={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:ii("$$absUrl"),url:function(t){if(O(t))return this.$$url;var e=Hn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:ii("$$protocol"),host:ii("$$host"),port:ii("$$port"),path:ri("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(B(t)||F(t))t=t.toString(),this.$$search=gt(t);else{if(!j(t))throw zn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");_(t=et(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:O(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:ri("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function ii(t){return function(){return this[t]}}function ri(t,e){return function(n){return O(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function oi(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return N(e)?(t=e,this):t},this.html5Mode=function(t){return G(t)?(e.enabled=t,this):j(t)?(G(t.enabled)&&(e.enabled=t.enabled),G(t.requireBase)&&(e.requireBase=t.requireBase),(G(t.rewriteLinks)||B(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){var a,c,u,h,d=i.baseHref(),f=i.url();if(e.enabled){if(!d&&e.requireBase)throw zn("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(h=f).substring(0,h.indexOf("/",h.indexOf("//")+2))+(d||"/"),c=r.history?Qn:ei}else u=Jn(f),c=ti;var p=function(t){return t.substr(0,Jn(t).lastIndexOf("/")+1)}(u);(a=new c(u,p,"#"+t)).$$parseLinkUrl(f,f),a.$$state=i.state();var m=/^\s*(javascript|mailto):/i;function g(t,e,n){var r=a.url(),o=a.$$state;try{i.url(t,e,n),a.$$state=i.state()}catch(t){throw a.url(r),a.$$state=o,t}}o.on("click",function(t){var r=e.rewriteLinks;if(r&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var c=l(t.target);"a"!==Q(c[0]);)if(c[0]===o[0]||!(c=c.parent())[0])return;if(!B(r)||!O(c.attr(r))){var u=c.prop("href"),h=c.attr("href")||c.attr("xlink:href");j(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=hr(u.animVal).href),m.test(u)||!u||c.attr("target")||t.isDefaultPrevented()||a.$$parseLinkUrl(u,h)&&(t.preventDefault(),a.absUrl()!==i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}}),Zn(a.absUrl())!==Zn(f)&&i.url(a.absUrl(),!0);var v=!0;return i.onUrlChange(function(t,e){O(Kn(p,t))?s.location.href=t:(n.$evalAsync(function(){var i,r=a.absUrl(),o=a.$$state;t=Zn(t),a.$$parse(t),a.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,a.absUrl()===t&&(i?(a.$$parse(r),a.$$state=o,g(r,!1,o)):(v=!1,y(r,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var t=Zn(i.url()),e=Zn(a.absUrl()),o=i.state(),s=a.$$replace,l=t!==e||a.$$html5&&r.history&&o!==a.$$state;(v||l)&&(v=!1,n.$evalAsync(function(){var e=a.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,a.$$state,o).defaultPrevented;a.absUrl()===e&&(i?(a.$$parse(t),a.$$state=o):(l&&g(e,s,o===a.$$state?null:a.$$state),y(t,o)))})),a.$$replace=!1}),a;function y(t,e){n.$broadcast("$locationChangeSuccess",a.absUrl(),t,a.$$state,e)}}]}function si(){var t=!0,e=this;this.debugEnabled=function(e){return N(e)?(t=e,this):t},this.$get=["$window",function(n){return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:(i=o("debug"),function(){t&&i.apply(e,arguments)})};var i;function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function o(t){var e=n.console||{},i=e[t]||e.log||$,o=!1;try{o=!!i.apply}catch(t){}return o?function(){var t=[];return _(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}}]}_([ei,ti,Qn],function(t){t.prototype=Object.create(ni),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Qn||!this.$$html5)throw zn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=O(e)?null:e,this}});var ai=e("$parse"),li=[].constructor,ci=(!1).constructor,ui=Function.constructor,hi=(0).constructor,di={}.constructor,fi="".constructor,pi=li.prototype,mi=ci.prototype,gi=ui.prototype,vi=hi.prototype,yi=di.prototype,bi=fi.prototype,_i=gi.call,wi=gi.apply,Si=gi.bind,xi=yi.valueOf;function Ci(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ai("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function ki(t){return t+""}function Ti(t,e){if(t){if(t.constructor===t)throw ai("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ai("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ai("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ai("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Mi(t,e){if(t){if(t.constructor===t)throw ai("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===_i||t===wi||t===Si)throw ai("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Ei(t,e){if(t&&(t===li||t===ci||t===ui||t===hi||t===di||t===fi||t===pi||t===mi||t===gi||t===vi||t===yi||t===bi))throw ai("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",e)}var Ai=Pt();_("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Ai[t]=!0});var Ii={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},$i=function(t){this.options=t};$i.prototype={constructor:$i,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=Ai[e],o=Ai[n],s=Ai[i];if(r||o||s){var a=s?i:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=N(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw ai("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=o(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=Ii[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Di=function(t,e){this.lexer=t,this.options=e};function Li(t,e){return void 0!==t?t:e}function Pi(t,e){return void 0===t?e:void 0===e?t:t+e}function Oi(t,e){var n,i,r;switch(t.type){case Di.Program:n=!0,_(t.body,function(t){Oi(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case Di.Literal:t.constant=!0,t.toWatch=[];break;case Di.UnaryExpression:Oi(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Di.BinaryExpression:Oi(t.left,e),Oi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Di.LogicalExpression:Oi(t.left,e),Oi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Di.ConditionalExpression:Oi(t.test,e),Oi(t.alternate,e),Oi(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Di.Identifier:t.constant=!1,t.toWatch=[t];break;case Di.MemberExpression:Oi(t.object,e),t.computed&&Oi(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Di.CallExpression:r=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),n=r,i=[],_(t.arguments,function(t){Oi(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=r?i:[t];break;case Di.AssignmentExpression:Oi(t.left,e),Oi(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Di.ArrayExpression:n=!0,i=[],_(t.elements,function(t){Oi(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case Di.ObjectExpression:n=!0,i=[],_(t.properties,function(t){Oi(t.value,e),n=n&&t.value.constant&&!t.computed,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=n,t.toWatch=i;break;case Di.ThisExpression:case Di.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Ni(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function ji(t){return t.type===Di.Identifier||t.type===Di.MemberExpression}function Ri(t){if(1===t.body.length&&ji(t.body[0].expression))return{type:Di.AssignmentExpression,left:t.body[0].expression,right:{type:Di.NGValueParameter},operator:"="}}function Bi(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===Di.Literal||t.body[0].expression.type===Di.ArrayExpression||t.body[0].expression.type===Di.ObjectExpression)}function Fi(t){return t.constant}function Yi(t,e){this.astBuilder=t,this.$filter=e}function Hi(t,e){this.astBuilder=t,this.$filter=e}Di.Program="Program",Di.ExpressionStatement="ExpressionStatement",Di.AssignmentExpression="AssignmentExpression",Di.ConditionalExpression="ConditionalExpression",Di.LogicalExpression="LogicalExpression",Di.BinaryExpression="BinaryExpression",Di.UnaryExpression="UnaryExpression",Di.CallExpression="CallExpression",Di.MemberExpression="MemberExpression",Di.Identifier="Identifier",Di.Literal="Literal",Di.ArrayExpression="ArrayExpression",Di.Property="Property",Di.ObjectExpression="ObjectExpression",Di.ThisExpression="ThisExpression",Di.LocalsExpression="LocalsExpression",Di.NGValueParameter="NGValueParameter",Di.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Di.Program,body:t}},expressionStatement:function(){return{type:Di.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!ji(t))throw ai("lval","Trying to assign a value to a non l-value");t={type:Di.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Di.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Di.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Di.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Di.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Di.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Di.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Di.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Di.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=et(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Di.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Di.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Di.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Di.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Di.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Di.Identifier,name:t.text}},constant:function(){return{type:Di.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Di.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Di.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Di.ObjectExpression,properties:e}},throwError:function(t,e){throw ai("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ai("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ai("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Di.ThisExpression},$locals:{type:Di.LocalsExpression}}},Yi.prototype={compile:function(t,e){var n=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Oi(i,n.$filter);var r,o="";if(this.stage="assign",r=Ri(i)){this.state.computing="assign";var s=this.nextId();this.recurse(r,s),this.return_(s),o="fn.assign="+this.generateFunction("assign","s,v,l")}var a=Ni(i.body);n.stage="inputs",_(a,function(t,e){var i="fn"+e;n.state[i]={vars:[],body:[],own:{}},n.state.computing=i;var r=n.nextId();n.recurse(t,r),n.return_(r),n.state.inputs.push(i),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,Ci,Ti,Mi,ki,Ei,Li,Pi,t);return this.state=this.stage=void 0,c.literal=Bi(i),c.constant=Fi(i),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return _(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return _(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var s,a,l,c,u,h=this;if(i=i||$,!o&&N(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case Di.Program:_(t.body,function(e,n){h.recurse(e.expression,void 0,void 0,function(t){a=t}),n!==t.body.length-1?h.current().body.push(a,";"):h.return_(a)});break;case Di.Literal:c=this.escape(t.value),this.assign(e,c),i(c);break;case Di.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){a=t}),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),i(c);break;case Di.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){s=t}),this.recurse(t.right,void 0,void 0,function(t){a=t}),c="+"===t.operator?this.plus(s,a):"-"===t.operator?this.ifDefined(s,0)+t.operator+this.ifDefined(a,0):"("+s+")"+t.operator+"("+a+")",this.assign(e,c),i(c);break;case Di.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case Di.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case Di.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),Ci(t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),function(){h.if_("inputs"===h.stage||"s",function(){r&&1!==r&&h.if_(h.not(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),(h.state.expensiveChecks||zi(t.name))&&h.addEnsureSafeObject(e),i(e);break;case Di.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,s,void 0,function(){h.if_(h.notNull(s),function(){r&&1!==r&&h.addEnsureSafeAssignContext(s),t.computed?(a=h.nextId(),h.recurse(t.property,a),h.getStringValue(a),h.addEnsureSafeMemberName(a),r&&1!==r&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),c=h.ensureSafeObject(h.computedMember(s,a)),h.assign(e,c),n&&(n.computed=!0,n.name=a)):(Ci(t.property.name),r&&1!==r&&h.if_(h.not(h.nonComputedMember(s,t.property.name)),h.lazyAssign(h.nonComputedMember(s,t.property.name),"{}")),c=h.nonComputedMember(s,t.property.name),(h.state.expensiveChecks||zi(t.property.name))&&(c=h.ensureSafeObject(c)),h.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){h.assign(e,"undefined")}),i(e)},!!r);break;case Di.CallExpression:e=e||this.nextId(),t.filter?(a=h.filter(t.callee.name),l=[],_(t.arguments,function(t){var e=h.nextId();h.recurse(t,e),l.push(e)}),c=a+"("+l.join(",")+")",h.assign(e,c),i(e)):(a=h.nextId(),s={},l=[],h.recurse(t.callee,a,s,function(){h.if_(h.notNull(a),function(){h.addEnsureSafeFunction(a),_(t.arguments,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(h.ensureSafeObject(t))})}),s.name?(h.state.expensiveChecks||h.addEnsureSafeObject(s.context),c=h.member(s.context,s.name,s.computed)+"("+l.join(",")+")"):c=a+"("+l.join(",")+")",c=h.ensureSafeObject(c),h.assign(e,c)},function(){h.assign(e,"undefined")}),i(e)}));break;case Di.AssignmentExpression:a=this.nextId(),s={},this.recurse(t.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(t.right,a),h.addEnsureSafeObject(h.member(s.context,s.name,s.computed)),h.addEnsureSafeAssignContext(s.context),c=h.member(s.context,s.name,s.computed)+t.operator+a,h.assign(e,c),i(e||c)})},1);break;case Di.ArrayExpression:l=[],_(t.elements,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(t)})}),c="["+l.join(",")+"]",this.assign(e,c),i(c);break;case Di.ObjectExpression:l=[],u=!1,_(t.properties,function(t){t.computed&&(u=!0)}),u?(e=e||this.nextId(),this.assign(e,"{}"),_(t.properties,function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Di.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)})):(_(t.properties,function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,function(t){l.push(h.escape(e.key.type===Di.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+l.join(",")+"}",this.assign(e,c)),i(e||c);break;case Di.ThisExpression:this.assign(e,"s"),i("s");break;case Di.LocalsExpression:this.assign(e,"l"),i("l");break;case Di.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(B(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(F(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw ai("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Hi.prototype={compile:function(t,e){var n,i,r=this,o=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Oi(o,r.$filter),(n=Ri(o))&&(i=this.recurse(n));var s,a=Ni(o.body);a&&(s=[],_(a,function(t,e){var n=r.recurse(t);t.input=n,s.push(n),t.watchId=e}));var l=[];_(o.body,function(t){l.push(r.recurse(t.expression))});var c=0===o.body.length?$:1===o.body.length?l[0]:function(t,e){var n;return _(l,function(i){n=i(t,e)}),n};return i&&(c.assign=function(t,e,n){return i(t,n,e)}),s&&(c.inputs=s),c.literal=Bi(o),c.constant=Fi(o),c},recurse:function(t,e,n){var i,r,o,s=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Di.Literal:return this.value(t.value,e);case Di.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case Di.BinaryExpression:case Di.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case Di.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Di.Identifier:return Ci(t.name,s.expression),s.identifier(t.name,s.expensiveChecks||zi(t.name),e,n,s.expression);case Di.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(Ci(t.property.name,s.expression),r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n,s.expression):this.nonComputedMember(i,r,s.expensiveChecks,e,n,s.expression);case Di.CallExpression:return o=[],_(t.arguments,function(t){o.push(s.recurse(t))}),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,s){for(var a=[],l=0;l<o.length;++l)a.push(o[l](t,n,i,s));var c=r.apply(void 0,a,s);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,i,a){var l,c=r(t,n,i,a);if(null!=c.value){Ti(c.context,s.expression),Mi(c.value,s.expression);for(var u=[],h=0;h<o.length;++h)u.push(Ti(o[h](t,n,i,a),s.expression));l=Ti(c.value.apply(c.context,u),s.expression)}return e?{value:l}:l};case Di.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,a){var l=i(t,n,o,a),c=r(t,n,o,a);return Ti(l.value,s.expression),Ei(l.context),l.context[l.name]=c,e?{value:c}:c};case Di.ArrayExpression:return o=[],_(t.elements,function(t){o.push(s.recurse(t))}),function(t,n,i,r){for(var s=[],a=0;a<o.length;++a)s.push(o[a](t,n,i,r));return e?{value:s}:s};case Di.ObjectExpression:return o=[],_(t.properties,function(t){t.computed?o.push({key:s.recurse(t.key),computed:!0,value:s.recurse(t.value)}):o.push({key:t.key.type===Di.Identifier?t.key.name:""+t.key.value,computed:!1,value:s.recurse(t.value)})}),function(t,n,i,r){for(var s={},a=0;a<o.length;++a)o[a].computed?s[o[a].key(t,n,i,r)]=o[a].value(t,n,i,r):s[o[a].key]=o[a].value(t,n,i,r);return e?{value:s}:s};case Di.ThisExpression:return function(t){return e?{value:t}:t};case Di.LocalsExpression:return function(t,n){return e?{value:n}:n};case Di.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=N(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(n,i,r,o){var s=t(n,i,r,o);return s=N(s)?-s:0,e?{value:s}:s}},"unary!":function(t,e){return function(n,i,r,o){var s=!t(n,i,r,o);return e?{value:s}:s}},"binary+":function(t,e,n){return function(i,r,o,s){var a=Pi(t(i,r,o,s),e(i,r,o,s));return n?{value:a}:a}},"binary-":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s),l=e(i,r,o,s),c=(N(a)?a:0)-(N(l)?l:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)*e(i,r,o,s);return n?{value:a}:a}},"binary/":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)/e(i,r,o,s);return n?{value:a}:a}},"binary%":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)%e(i,r,o,s);return n?{value:a}:a}},"binary===":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)===e(i,r,o,s);return n?{value:a}:a}},"binary!==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!==e(i,r,o,s);return n?{value:a}:a}},"binary==":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)==e(i,r,o,s);return n?{value:a}:a}},"binary!=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)!=e(i,r,o,s);return n?{value:a}:a}},"binary<":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<e(i,r,o,s);return n?{value:a}:a}},"binary>":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>e(i,r,o,s);return n?{value:a}:a}},"binary<=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)<=e(i,r,o,s);return n?{value:a}:a}},"binary>=":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)>=e(i,r,o,s);return n?{value:a}:a}},"binary&&":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)&&e(i,r,o,s);return n?{value:a}:a}},"binary||":function(t,e,n){return function(i,r,o,s){var a=t(i,r,o,s)||e(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(t,e,n,i){return function(r,o,s,a){var l=t(r,o,s,a)?e(r,o,s,a):n(r,o,s,a);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,i,r){return function(o,s,a,l){var c=s&&t in s?s:o;i&&1!==i&&c&&!c[t]&&(c[t]={});var u=c?c[t]:void 0;return e&&Ti(u,r),n?{context:c,name:t,value:u}:u}},computedMember:function(t,e,n,i,r){return function(o,s,a,l){var c,u,h=t(o,s,a,l);return null!=h&&(Ci(c=ki(c=e(o,s,a,l)),r),i&&1!==i&&(Ei(h),h&&!h[c]&&(h[c]={})),Ti(u=h[c],r)),n?{context:h,name:c,value:u}:u}},nonComputedMember:function(t,e,n,i,r,o){return function(s,a,l,c){var u=t(s,a,l,c);r&&1!==r&&(Ei(u),u&&!u[e]&&(u[e]={}));var h=null!=u?u[e]:void 0;return(n||zi(e))&&Ti(h,o),i?{context:u,name:e,value:h}:h}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var Wi=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new Di(t,n),this.astCompiler=n.csp?new Hi(this.ast,e):new Yi(this.ast,e)};function zi(t){return"constructor"===t}function Ui(t){return W(t.valueOf)?t.valueOf():xi.call(t)}function Vi(){var t,e,n=Pt(),i=Pt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(o){var s=it().noUnsafeEval,a={csp:s,expensiveChecks:!1,literals:et(r),isIdentifierStart:W(t)&&t,isIdentifierContinue:W(e)&&e},l={csp:s,expensiveChecks:!0,literals:et(r),isIdentifierStart:W(t)&&t,isIdentifierContinue:W(e)&&e},c=!1;return u.$$runningExpensiveChecks=function(){return c},u;function u(t,e,r){var s,u,h;switch(r=r||c,typeof t){case"string":t=t.trim();var v=r?i:n;if(!(s=v[h=t])){":"===t.charAt(0)&&":"===t.charAt(1)&&(u=!0,t=t.substring(2));var y=r?l:a,b=new $i(y);(s=new Wi(b,o,y).parse(t)).constant?s.$$watchDelegate=m:u?s.$$watchDelegate=s.literal?p:f:s.inputs&&(s.$$watchDelegate=d),r&&(s=function t(e){if(!e)return e;i.$$watchDelegate=e.$$watchDelegate;i.assign=t(e.assign);i.constant=e.constant;i.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=t(e.inputs[n]);i.inputs=e.inputs;return i;function i(t,n,i,r){var o=c;c=!0;try{return e(t,n,i,r)}finally{c=o}}}(s)),v[h]=s}return g(s,e);case"function":return g(t,e);default:return g($,e)}}function h(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=Ui(t)))&&(t===e||t!=t&&e!=e)}function d(t,e,n,i,r){var o,s=i.inputs;if(1===s.length){var a=h;return s=s[0],t.$watch(function(t){var e=s(t);return h(e,a)||(o=i(t,void 0,void 0,[e]),a=e&&Ui(e)),o},e,n,r)}for(var l=[],c=[],u=0,d=s.length;u<d;u++)l[u]=h,c[u]=null;return t.$watch(function(t){for(var e=!1,n=0,r=s.length;n<r;n++){var a=s[n](t);(e||(e=!h(a,l[n])))&&(c[n]=a,l[n]=a&&Ui(a))}return e&&(o=i(t,void 0,void 0,c)),o},e,n,r)}function f(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,W(e)&&e.apply(this,arguments),N(t)&&i.$$postDigest(function(){N(o)&&r()})},n)}function p(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,W(e)&&e.call(this,t,n,i),s(t)&&i.$$postDigest(function(){s(o)&&r()})},n);function s(t){var e=!0;return _(t,function(t){N(t)||(e=!1)}),e}}function m(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function g(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==p&&n!==f?function(n,r,o,s){var a=i&&s?s[0]:t(n,r,o,s);return e(a,n,r)}:function(n,i,r,o){var s=t(n,i,r,o),a=e(s,n,i);return N(s)?a:s};return t.$$watchDelegate&&t.$$watchDelegate!==d?r.$$watchDelegate=t.$$watchDelegate:e.$stateful||(r.$$watchDelegate=d,i=!t.inputs,r.inputs=t.inputs?t.inputs:[t]),r}}]}function Gi(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Xi(function(e){t.$evalAsync(e)},e)}]}function qi(){this.$get=["$browser","$exceptionHandler",function(t,e){return Xi(function(e){t.defer(e)},e)}]}function Xi(t,n){var i=e("$q",TypeError);function r(){var t=new l;return t.resolve=s(t,t.resolve),t.reject=s(t,t.reject),t.notify=s(t,t.notify),t}function o(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(t){var e,i,r;r=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,s=r.length;o<s;++o){i=r[o][0],e=r[o][t.status];try{W(e)?i.resolve(e(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(t){i.reject(t),n(t)}}}(e)}))}function l(){this.promise=new o}function c(t){var e=new l;return e.reject(t),e.promise}function u(t,e,n){var i=null;try{W(n)&&(i=n())}catch(t){return c(t)}return q(i)?i.then(function(){return e(t)},c):e(t)}function h(t,e,n,i){var r=new l;return r.resolve(t),r.promise.then(e,n,i)}T(o.prototype,{then:function(t,e,n){if(O(t)&&O(e)&&O(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&a(this.$$state),i.promise},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return u(e,d,t)},function(e){return u(e,c,t)},e)}}),T(l.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var e,i=this,r=!1;try{(j(t)||W(t))&&(e=t&&t.then),W(e)?(this.promise.$$state.status=-1,e.call(t,function(t){if(r)return;r=!0,i.$$resolve(t)},o,s(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(t){o(t),n(t)}function o(t){r||(r=!0,i.$$reject(t))}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(e){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,s=i.length;o<s;o++){r=i[o][0],t=i[o][3];try{r.notify(W(t)?t(e):e)}catch(t){n(t)}}})}});var d=h;function f(t){if(!W(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise}return f.prototype=o.prototype,f.defer=r,f.reject=c,f.when=h,f.resolve=d,f.all=function(t){var e=new l,n=0,i=H(t)?[]:{};return _(t,function(t,r){n++,h(t).then(function(t){i[r]=t,--n||e.resolve(i)},function(t){e.reject(t)})}),0===n&&e.resolve(i),e.promise},f.race=function(t){var e=r();return _(t,function(t){h(t).then(e.resolve,e.reject)}),e.promise},f}function Ki(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Ji(){var t=10,n=e("$rootScope"),i=null,o=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(e,s,l){function c(t){t.currentScope.$$destroyed=!0}function u(){this.$id=x(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var n;return e=e||this,t?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=x(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",c),n},$watch:function(t,e,n,r){var o=s(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var a=this,l=a.$$watchers,c={fn:e,last:S,get:o,exp:r||t,eq:!!n};return i=null,W(e)||(c.fn=$),l||((l=a.$$watchers=[]).$$digestWatchIndex=-1),l.unshift(c),l.$$digestWatchIndex++,y(this,1),function(){var t=tt(l,c);t>=0&&(y(a,-1),t<l.$$digestWatchIndex&&l.$$digestWatchIndex--),i=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,s=!1,a=!0;if(!t.length){var l=!0;return o.$evalAsync(function(){l&&e(i,i,o)}),function(){l=!1}}if(1===t.length)return this.$watch(t[0],function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)});function c(){s=!1,a?(a=!1,e(i,i,o)):e(i,n,o)}return _(t,function(t,e){var a=o.$watch(t,function(t,r){i[e]=t,n[e]=r,s||(s=!0,o.$evalAsync(c))});r.push(a)}),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){m.$stateful=!0;var n,i,o,a=this,l=e.length>1,c=0,u=s(t,m),h=[],d={},f=!0,p=0;function m(t){var e,o,s,a;if(!O(n=t)){if(j(n))if(b(n)){i!==h&&(p=(i=h).length=0,c++),e=n.length,p!==e&&(c++,i.length=p=e);for(var l=0;l<e;l++)a=i[l],s=n[l],a!=a&&s!=s||a===s||(c++,i[l]=s)}else{for(o in i!==d&&(i=d={},p=0,c++),e=0,n)r.call(n,o)&&(e++,s=n[o],a=i[o],o in i?a!=a&&s!=s||a===s||(c++,i[o]=s):(p++,i[o]=s,c++));if(p>e)for(o in c++,i)r.call(n,o)||(p--,delete i[o])}else i!==n&&(i=n,c++);return c}}return this.$watch(u,function(){if(f?(f=!1,e(n,n,a)):e(n,o,a),l)if(j(n))if(b(n)){o=new Array(n.length);for(var t=0;t<n.length;t++)o[t]=n[t]}else for(var i in o={},n)r.call(n,i)&&(o[i]=n[i]);else o=n})},$digest:function(){var r,s,a,c,u,p,y,b,_,w=t,x=[];g("$digest"),l.$$checkUrlChange(),this===h&&null!==o&&(l.defer.cancel(o),C()),i=null;do{u=!1,y=this;for(var k=0;k<d.length;k++){try{(_=d[k]).scope.$eval(_.expression,_.locals)}catch(t){e(t)}i=null}d.length=0;t:do{if(c=y.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(r=c[c.$$digestWatchIndex])if((s=(0,r.get)(y))===(a=r.last)||(r.eq?nt(s,a):A(s)&&A(a))){if(r===i){u=!1;break t}}else u=!0,i=r,r.last=r.eq?et(s,null):s,(0,r.fn)(s,a===S?s:a,y),w<5&&(x[b=4-w]||(x[b]=[]),x[b].push({msg:W(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:a}))}catch(t){e(t)}if(!(p=y.$$watchersCount&&y.$$childHead||y!==this&&y.$$nextSibling))for(;y!==this&&!(p=y.$$nextSibling);)y=y.$parent}while(y=p);if((u||d.length)&&!w--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,x)}while(u||d.length);for(v();m<f.length;)try{f[m++]()}catch(t){e(t)}f.length=m=0},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&l.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)w(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=$,this.$on=this.$watch=this.$watchGroup=function(){return $},this.$$listeners={},this.$$nextSibling=null,function t(e){9===a&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return s(t)(this,e)},$evalAsync:function(t,e){h.$$phase||d.length||l.defer(function(){d.length&&h.$digest()}),d.push({scope:this,expression:s(t),locals:e})},$$postDigest:function(t){f.push(t)},$apply:function(t){try{g("$apply");try{return this.$eval(t)}finally{v()}}catch(t){e(t)}finally{try{h.$digest()}catch(t){throw e(t),t}}},$applyAsync:function(t){var e=this;t&&p.push(function(){e.$eval(t)}),t=s(t),null===o&&(o=l.defer(function(){h.$apply(C)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,w(r,1,t))}},$emit:function(t,n){var i,r,o,s=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ot([c],arguments,1);do{for(i=a.$$listeners[t]||s,c.currentScope=a,r=0,o=i.length;r<o;r++)if(i[r])try{i[r].apply(null,u)}catch(t){e(t)}else i.splice(r,1),r--,o--;if(l)return c.currentScope=null,c;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,n){var i=this,r=i,o=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!i.$$listenerCount[t])return s;for(var a,l,c,u=ot([s],arguments,1);r=o;){for(s.currentScope=r,l=0,c=(a=r.$$listeners[t]||[]).length;l<c;l++)if(a[l])try{a[l].apply(null,u)}catch(t){e(t)}else a.splice(l,1),l--,c--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==i&&r.$$nextSibling))for(;r!==i&&!(o=r.$$nextSibling);)r=r.$parent}return s.currentScope=null,s}};var h=new u,d=h.$$asyncQueue=[],f=h.$$postDigestQueue=[],p=h.$$applyAsyncQueue=[],m=0;return h;function g(t){if(h.$$phase)throw n("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function v(){h.$$phase=null}function y(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function w(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function S(){}function C(){for(;p.length;)try{p.shift()()}catch(t){e(t)}o=null}}]}function Zi(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return N(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return N(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return""===(r=hr(n).href)||r.match(o)?n:"unsafe:"+r}}}Wi.prototype={constructor:Wi,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Qi=e("$sce"),tr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function er(t){var e=[];return N(t)&&_(t,function(t){e.push(function(t){if("self"===t)return t;if(B(t)){if(t.indexOf("***")>-1)throw Qi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=J(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(z(t))return new RegExp("^"+t.source+"$");throw Qi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function nr(){this.SCE_CONTEXTS=tr;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=er(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=er(t)),e},this.$get=["$injector",function(n){var i=function(t){throw Qi("unsafe","Attempting to use an unsafe value in a safe context.")};function r(t,e){return"self"===t?dr(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(i=n.get("$sanitize"));var s=o(),a={};return a[tr.HTML]=o(s),a[tr.CSS]=o(s),a[tr.URL]=o(s),a[tr.JS]=o(s),a[tr.RESOURCE_URL]=o(a[tr.URL]),{trustAs:function(t,e){var n=a.hasOwnProperty(t)?a[t]:null;if(!n)throw Qi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||O(e)||""===e)return e;if("string"!=typeof e)throw Qi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||O(o)||""===o)return o;var s=a.hasOwnProperty(n)?a[n]:null;if(s&&o instanceof s)return o.$$unwrapTrustedValue();if(n===tr.RESOURCE_URL){if(function(n){var i,o,s=hr(n.toString()),a=!1;for(i=0,o=t.length;i<o;i++)if(r(t[i],s)){a=!0;break}if(a)for(i=0,o=e.length;i<o;i++)if(r(e[i],s)){a=!1;break}return a}(o))return o;throw Qi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===tr.HTML)return i(o);throw Qi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function ir(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&a<8)throw Qi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Ft(tr);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=D),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,s=i.getTrusted,l=i.trustAs;return _(tr,function(t,e){var n=o(e);i[Jt("parse_as_"+n)]=function(e){return r(t,e)},i[Jt("get_trusted_"+n)]=function(e){return s(t,e)},i[Jt("trust_as_"+n)]=function(e){return l(t,e)}}),i}]}function rr(){this.$get=["$window","$document",function(t,e){var n,i,r={},s=!(t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,l=E((/android (\d+)/.exec(o((t.navigator||{}).userAgent))||[])[1]),c=/Boxee/i.test((t.navigator||{}).userAgent),u=e[0]||{},h=/^(Moz|webkit|ms)(?=[A-Z])/,d=u.body&&u.body.style,f=!1,p=!1;if(d){for(var m in d)if(i=h.exec(m)){n=(n=i[0])[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),f=!!("transition"in d||n+"Transition"in d),p=!!("animation"in d||n+"Animation"in d),!l||f&&p||(f=B(d.webkitTransition),p=B(d.webkitAnimation))}return{history:!(!s||l<4||c),hasEvent:function(t){if("input"===t&&a<=11)return!1;if(O(r[t])){var e=u.createElement("div");r[t]="on"+t in e}return r[t]},csp:it(),vendorPrefix:n,transitions:f,animations:p,android:l}}]}var or=e("$compile");function sr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,i,r){function o(s,a){o.totalPendingRequests++,B(s)&&!O(e.get(s))||(s=r.getTrustedResourceUrl(s));var l=n.defaults&&n.defaults.transformResponse;return H(l)?l=l.filter(function(t){return t!==In}):l===In&&(l=null),n.get(s,T({cache:e,transformResponse:l},t)).finally(function(){o.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},function(t){if(!a)throw or("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);return i.reject(t)})}return o.totalPendingRequests=0,o}]}function ar(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var i={findBindings:function(t,e,n){var i=t.getElementsByClassName("ng-binding"),r=[];return _(i,function(t){var i=v.element(t).data("$binding");i&&_(i,function(i){n?new RegExp("(^|\\s)"+J(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return i}]}function lr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function s(s,a,l){W(s)||(l=a,a=s,s=$);var c,u=st(arguments,3),h=N(l)&&!l,d=(h?i:n).defer(),f=d.promise;return c=e.defer(function(){try{d.resolve(s.apply(null,u))}catch(t){d.reject(t),r(t)}finally{delete o[f.$$timeoutId]}h||t.$apply()},a),f.$$timeoutId=c,o[c]=d,f}return s.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},s}]}var cr=t.document.createElement("a"),ur=hr(t.location.href);function hr(t){var e=t;return a&&(cr.setAttribute("href",e),e=cr.href),cr.setAttribute("href",e),{href:cr.href,protocol:cr.protocol?cr.protocol.replace(/:$/,""):"",host:cr.host,search:cr.search?cr.search.replace(/^\?/,""):"",hash:cr.hash?cr.hash.replace(/^#/,""):"",hostname:cr.hostname,port:cr.port,pathname:"/"===cr.pathname.charAt(0)?cr.pathname:"/"+cr.pathname}}function dr(t){var e=B(t)?hr(t):t;return e.protocol===ur.protocol&&e.host===ur.host}function fr(){this.$get=L(t)}function pr(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,s,a,l,c=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(c!==i)for(t=(i=c).split("; "),n={},s=0;s<t.length;s++)(a=(o=t[s]).indexOf("="))>0&&(l=r(o.substring(0,a)),O(n[l])&&(n[l]=r(o.substring(a+1))));return n}}function mr(){this.$get=pr}function gr(t){var e="Filter";function n(i,r){if(j(i)){var o={};return _(i,function(t,e){o[e]=n(e,t)}),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",xr),n("date",Or),n("filter",vr),n("json",Nr),n("limitTo",Br),n("lowercase",jr),n("number",Cr),n("orderBy",Yr),n("uppercase",Rr)}function vr(){return function(t,n,i,r){if(!b(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var s,a;switch(r=r||"$",br(n)){case"function":s=n;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":s=function(t,e,n,i){var r=j(t)&&n in t;!0===e?e=nt:W(e)||(e=function(t,e){return!O(t)&&(null===t||null===e?t===e:!(j(e)||j(t)&&!P(t))&&(t=o(""+t),e=o(""+e),-1!==t.indexOf(e)))});return function(o){return r&&!j(o)?yr(o,t[n],e,n,!1):yr(o,t,e,n,i)}}(n,i,r,a);break;default:return t}return Array.prototype.filter.call(t,s)}}function yr(t,e,n,i,r,o){var s=br(t),a=br(e);if("string"===a&&"!"===e.charAt(0))return!yr(t,e.substring(1),n,i,r);if(H(t))return t.some(function(t){return yr(t,e,n,i,r)});switch(s){case"object":var l;if(r){for(l in t)if("$"!==l.charAt(0)&&yr(t[l],e,n,i,!0))return!0;return!o&&yr(t,e,n,i,!1)}if("object"===a){for(l in e){var c=e[l];if(!W(c)&&!O(c)){var u=l===i;if(!yr(u?t:t[l],c,n,i,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function br(t){return null===t?"null":typeof t}pr.$inject=["$document"],gr.$inject=["$provide"];var _r=22,wr=".",Sr="0";function xr(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return O(n)&&(n=e.CURRENCY_SYM),O(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:kr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Cr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:kr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function kr(t,e,n,i,r){if(!B(t)&&!F(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,l=Math.abs(t)+"",c="";if(s)c="";else{(function(t,e,n,i){var r=t.d,o=r.length-t.i,s=(e=O(e)?Math.min(Math.max(n,o),i):+e)+t.i,a=r[s];if(s>0){r.splice(Math.max(t.i,s));for(var l=s;l<r.length;l++)r[l]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var c=1;c<s;c++)r[c]=0}if(a>=5)if(s-1<0){for(var u=0;u>s;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(r.unshift(h),t.i++)})(o=function(t){var e,n,i,r,o,s=0;for((n=t.indexOf(wr))>-1&&(t=t.replace(wr,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)===Sr;i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===Sr;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>_r&&(e=e.splice(0,_r-1),s=n-1,n=1),{d:e,e:s,i:n}}(l),r,e.minFrac,e.maxFrac);var u=o.d,h=o.i,d=o.e,f=[];for(a=u.reduce(function(t,e){return t&&!e},!0);h<0;)u.unshift(0),h++;h>0?f=u.splice(h,u.length):(f=u,u=[0]);var p=[];for(u.length>=e.lgSize&&p.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)p.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&p.unshift(u.join("")),c=p.join(n),f.length&&(c+=i+f.join("")),d&&(c+="e+"+d)}return t<0&&!a?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Tr(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t=Sr+t;return n&&(t=t.substr(t.length-e)),r+t}function Mr(t,e,n,i,r){return n=n||0,function(o){var s=o["get"+t]();return(n>0||s>-n)&&(s+=n),0===s&&-12===n&&(s=12),Tr(s,e,i,r)}}function Er(t,e,n){return function(i,r){var o=i["get"+t]();return r[s((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Ar(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Ir(t){return function(e){var n,i=Ar(e.getFullYear()),r=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+i;return Tr(1+Math.round(r/6048e5),t)}}function $r(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}xr.$inject=["$locale"],Cr.$inject=["$locale"];var Dr={yyyy:Mr("FullYear",4,0,!1,!0),yy:Mr("FullYear",2,0,!0,!0),y:Mr("FullYear",1,0,!1,!0),MMMM:Er("Month"),MMM:Er("Month",!0),MM:Mr("Month",2,1),M:Mr("Month",1,1),LLLL:Er("Month",!1,!0),dd:Mr("Date",2),d:Mr("Date",1),HH:Mr("Hours",2),H:Mr("Hours",1),hh:Mr("Hours",2,-12),h:Mr("Hours",1,-12),mm:Mr("Minutes",2),m:Mr("Minutes",1),ss:Mr("Seconds",2),s:Mr("Seconds",1),sss:Mr("Milliseconds",3),EEEE:Er("Day"),EEE:Er("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=i>=0?"+":"";return r+=Tr(Math[i>0?"floor":"ceil"](i/60),2)+Tr(Math.abs(i%60),2)},ww:Ir(2),w:Ir(1),G:$r,GG:$r,GGG:$r,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Lr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Pr=/^-?\d+$/;function Or(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,s,a="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,B(n)&&(n=Pr.test(n)?E(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,s=n[8]?i.setUTCFullYear:i.setFullYear,a=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=E(n[9]+n[10]),o=E(n[9]+n[11])),s.call(i,E(n[1]),E(n[2])-1,E(n[3]));var l=E(n[4]||0)-r,c=E(n[5]||0)-o,u=E(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return a.call(i,l,c,u,h),i}return t}(n)),F(n)&&(n=new Date(n)),!Y(n)||!isFinite(n.getTime()))return n;for(;i;)(s=Lr.exec(i))?i=(l=ot(l,s,1)).pop():(l.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=dt(r,c),n=ft(n,r,!0)),_(l,function(e){o=Dr[e],a+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function Nr(){return function(t,e){return O(e)&&(e=2),ct(t,e)}}Or.$inject=["$locale"];var jr=L(o),Rr=L(s);function Br(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):E(e),A(e)?t:(F(t)&&(t=t.toString()),b(t)?(n=(n=!n||isNaN(n)?0:E(n))<0?Math.max(0,t.length+n):n,e>=0?Fr(t,n,n+e):0===n?Fr(t,e,t.length):Fr(t,Math.max(0,n+e),n)):t)}}function Fr(t,e,n){return B(t)?t.slice(e,n):h.call(t,e,n)}function Yr(t){return function(r,o,s,a){if(null==r)return r;if(!b(r))throw e("orderBy")("notarray","Expected array but received: {0}",r);H(o)||(o=[o]),0===o.length&&(o=["+"]);var l=o.map(function(e){var n=1,i=D;if(W(e))i=e;else if(B(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}}),c=s?-1:1,u=W(a)?a:i,h=Array.prototype.map.call(r,function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:l.map(function(i){return function(t,e){var i=typeof t;null===t?(i="string",t="null"):"object"===i&&(t=function(t){if(W(t.valueOf)&&n(t=t.valueOf()))return t;if(P(t)&&n(t=t.toString()))return t;return t}(t));return{value:t,type:i,index:e}}(i.get(t),e)})}});return h.sort(function(t,e){for(var n=0,i=l.length;n<i;n++){var r=u(t.predicateValues[n],e.predicateValues[n]);if(r)return r*l[n].descending*c}return u(t.tieBreaker,e.tieBreaker)*c}),r=h.map(function(t){return t.value})};function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,s=e.value;"string"===i?(o=o.toLowerCase(),s=s.toLowerCase()):"object"===i&&(j(o)&&(o=t.index),j(s)&&(s=e.index)),o!==s&&(n=o<s?-1:1)}else n=i<r?-1:1;return n}}function Hr(t){return W(t)&&(t={link:t}),t.restrict=t.restrict||"AC",L(t)}Yr.$inject=["$parse"];var Wr=L({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===p.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),zr={};_(Ce,function(t,e){if("multiple"!==t){var n=un("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),zr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],function(t){r.$set(e,!!t)})}}),_(Te,function(t,e){zr[e]=function(){return{priority:100,link:function(t,i,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var o=r.ngPattern.match(n);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),_(["src","srcset","href"],function(t){var e=un("ng-"+t);zr[e]=function(){return{priority:99,link:function(n,i,r){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===p.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(e,function(e){e?(r.$set(s,e),a&&o&&i.prop(o,r[s])):"href"===t&&r.$set(s,null)})}}}});var Ur={$addControl:$,$$renameControl:function(t,e){t.$name=e},$removeControl:$,$setValidity:$,$setDirty:$,$setPristine:$,$setSubmitted:$},Vr="ng-submitted";function Gr(t,e,n,i,r){var o=this,s=[];o.$error={},o.$$success={},o.$pending=void 0,o.$name=r(e.name||e.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=Ur,o.$rollbackViewValue=function(){_(s,function(t){t.$rollbackViewValue()})},o.$commitViewValue=function(){_(s,function(t){t.$commitViewValue()})},o.$addControl=function(t){$t(t.$name,"input"),s.push(t),t.$name&&(o[t.$name]=t),t.$$parentForm=o},o.$$renameControl=function(t,e){var n=t.$name;o[n]===t&&delete o[n],o[e]=t,t.$name=e},o.$removeControl=function(t){t.$name&&o[t.$name]===t&&delete o[t.$name],_(o.$pending,function(e,n){o.$setValidity(n,null,t)}),_(o.$error,function(e,n){o.$setValidity(n,null,t)}),_(o.$$success,function(e,n){o.$setValidity(n,null,t)}),tt(s,t),t.$$parentForm=Ur},Ko({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(tt(i,n),0===i.length&&delete t[e])},$animate:i}),o.$setDirty=function(){i.removeClass(t,Ho),i.addClass(t,Wo),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(t,Ho,Wo+" "+Vr),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,_(s,function(t){t.$setPristine()})},o.$setUntouched=function(){_(s,function(t){t.$setUntouched()})},o.$setSubmitted=function(){i.addClass(t,Vr),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}Gr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var qr=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Gr,compile:function(n,r){n.addClass(Ho).addClass(Fo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,s){var a=s[0];if(!("action"in r)){var l=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};Ut(n[0],"submit",l),n.on("$destroy",function(){e(function(){Vt(n[0],"submit",l)},0,!1)})}(s[1]||a.$$parentForm).$addControl(a);var c=o?i(a.$name):$;o&&(c(t,a),r.$observe(o,function(e){a.$name!==e&&(c(t,void 0),a.$$parentForm.$$renameControl(a,e),(c=i(a.$name))(t,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),c(t,void 0),T(a,Ur)})}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||$}}]},Xr=qr(),Kr=qr(!0),Jr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Zr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Qr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,to=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,eo=/^(\d{4,})-(\d{2})-(\d{2})$/,no=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,io=/^(\d{4,})-W(\d\d)$/,ro=/^(\d{4,})-(\d\d)$/,oo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,so="keydown wheel mousedown",ao=Pt();_("date,datetime-local,month,time,week".split(","),function(t){ao[t]=!0});var lo={text:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i)},date:fo("date",eo,ho(eo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":fo("datetimelocal",no,ho(no,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:fo("time",oo,ho(oo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:fo("week",io,function(t,e){if(Y(t))return t;if(B(t)){io.lastIndex=0;var n=io.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,l=0,c=Ar(i),u=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,c.getDate()+u,o,s,a,l)}}return NaN},"yyyy-Www"),month:fo("month",ro,ho(ro,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o){var s,a;po(t,e,n,i),uo(t,e,n,i,r,o),mo(i),(N(n.min)||n.ngMin)&&(i.$validators.min=function(t){return i.$isEmpty(t)||O(s)||t>=s},n.$observe("min",function(t){s=go(t),i.$validate()}));(N(n.max)||n.ngMax)&&(i.$validators.max=function(t){return i.$isEmpty(t)||O(a)||t<=a},n.$observe("max",function(t){a=go(t),i.$validate()}))},url:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Zr.test(n)}},email:function(t,e,n,i,r,o){uo(t,e,n,i,r,o),co(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Qr.test(n)}},radio:function(t,e,n,i){O(n.name)&&e.attr("name",x());e.on("click",function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)}),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){po(t,e,n,i),mo(i),uo(t,e,n,i,r,o);var s=i.$$hasNativeValidators&&"range"===e[0].type,a=s?0:void 0,l=s?100:void 0,c=s?1:void 0,u=e[0].validity,h=N(n.min),d=N(n.max),f=N(n.step),p=i.$render;i.$render=s&&N(u.rangeUnderflow)&&N(u.rangeOverflow)?function(){p(),i.$setViewValue(e.val())}:p,h&&(i.$validators.min=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||O(a)||e>=a},m("min",function(t){if(a=go(t),A(i.$modelValue))return;if(s){var n=e.val();a>n&&(n=a,e.val(n)),i.$setViewValue(n)}else i.$validate()}));d&&(i.$validators.max=s?function(){return!0}:function(t,e){return i.$isEmpty(e)||O(l)||e<=l},m("max",function(t){if(l=go(t),A(i.$modelValue))return;if(s){var n=e.val();l<n&&(e.val(l),n=l<a?a:l),i.$setViewValue(n)}else i.$validate()}));f&&(i.$validators.step=s?function(){return!u.stepMismatch}:function(t,e){return i.$isEmpty(e)||O(c)||function(t,e,n){var i=Number(t);if(!vo(i)||!vo(e)||!vo(n)){var r=Math.max(yo(i),yo(e),yo(n)),o=Math.pow(10,r);i*=o,e*=o,n*=o}return(i-e)%n==0}(e,a||0,c)},m("step",function(t){if(c=go(t),A(i.$modelValue))return;s&&i.$viewValue!==e.val()?i.$setViewValue(e.val()):i.$validate()}));function m(t,i){e.attr(t,n[t]),n.$observe(t,i)}},checkbox:function(t,e,n,i,r,o,s,a){var l=bo(a,t,"ngTrueValue",n.ngTrueValue,!0),c=bo(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return nt(t,l)}),i.$parsers.push(function(t){return t?l:c})},hidden:$,button:$,submit:$,reset:$,file:$};function co(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function uo(t,e,n,r,s,a){var l,c=o(e[0].type);if(!s.android){var u=!1;e.on("compositionstart",function(){u=!0}),e.on("compositionend",function(){u=!1,h()})}var h=function(t){if(l&&(a.defer.cancel(l),l=null),!u){var i=e.val(),o=t&&t.type;"password"===c||n.ngTrim&&"false"===n.ngTrim||(i=K(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)}};if(s.hasEvent("input"))e.on("input",h);else{var d=function(t,e,n){l||(l=a.defer(function(){l=null,e&&e.value===n||h(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||d(t,this,this.value)}),s.hasEvent("paste")&&e.on("paste cut",d)}e.on("change",h),ao[c]&&r.$$hasNativeValidators&&c===n.type&&e.on(so,function(t){if(!l){var e=this[i],n=e.badInput,r=e.typeMismatch;l=a.defer(function(){l=null,e.badInput===n&&e.typeMismatch===r||h(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function ho(t,e){return function(n,i){var r,o;if(Y(n))return n;if(B(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Jr.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},_(r,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function fo(t,e,n,i){return function(r,o,s,a,l,c,u){po(r,o,s,a),uo(0,o,s,a,l,c);var h,d,f,p=a&&a.$options&&a.$options.timezone;(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var i=n(t,h);return p&&(i=ft(i,p)),i}}),a.$formatters.push(function(t){if(t&&!Y(t))throw Uo("datefmt","Expected `{0}` to be a date",t);return m(t)?((h=t)&&p&&(h=ft(h,p,!0)),u("date")(t,i,p)):(h=null,"")}),N(s.min)||s.ngMin)&&(a.$validators.min=function(t){return!m(t)||O(d)||n(t)>=d},s.$observe("min",function(t){d=g(t),a.$validate()}));(N(s.max)||s.ngMax)&&(a.$validators.max=function(t){return!m(t)||O(f)||n(t)<=f},s.$observe("max",function(t){f=g(t),a.$validate()}));function m(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function g(t){return N(t)&&!Y(t)?n(t)||void 0:t}}}function po(t,e,n,r){var o=e[0];(r.$$hasNativeValidators=j(o.validity))&&r.$parsers.push(function(t){var n=e.prop(i)||{};return n.badInput||n.typeMismatch?void 0:t})}function mo(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:to.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!F(e))throw Uo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function go(t){return N(t)&&!F(t)&&(t=parseFloat(t)),A(t)?void 0:t}function vo(t){return(0|t)===t}function yo(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function bo(t,e,n,i,r){var o;if(N(i)){if(!(o=t(i)).constant)throw Uo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var _o=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,s,a,l){if(l[0]){var c=o(a.type);"range"!==c||a.hasOwnProperty("ngInputRange")||(c="text"),(lo[c]||lo.text)(r,s,a,l[0],e,t,n,i)}}}}}],wo=/^(true|false|\d+)$/,So=function(){return{restrict:"A",priority:100,compile:function(t,e){return wo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},xo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=O(t)?"":t})}}}}],Co=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=O(t)?"":t})}}}}],ko=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),s=e(r.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(s,function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")})}}}}],To=L({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Mo(t,e){return t="ngClass"+t,["$animate",function(n){return{restrict:"AC",link:function(o,s,a){var l;function c(t){var e=u(t,1);a.$addClass(e)}function u(t,e){var n=s.data("$classCounts")||Pt(),i=[];return _(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&i.push(t))}),s.data("$classCounts",n),i.join(" ")}function h(t){if(!0===e||(1&o.$index)===e){var a=r(t||[]);if(l){if(!nt(t,l)){!function(t,e){var r=i(e,t),o=i(t,e);r=u(r,1),o=u(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}(r(l),a)}}else c(a)}l=H(t)?t.map(function(t){return Ft(t)}):Ft(t)}a.$observe("class",function(e){h(o.$eval(a[t]))}),"ngClass"!==t&&o.$watch("$index",function(t,n){var i=1&t;if(i!==(1&n)){var o=r(l);i===e?c(o):function(t){var e=u(t,-1);a.$removeClass(e)}(o)}}),o.$watch(a[t],h,!0)}};function i(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){var e=[];return H(t)?(_(t,function(t){e=e.concat(r(t))}),e):B(t)?t.split(" "):j(t)?(_(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}}]}var Eo=Mo("",!0),Ao=Mo("Odd",0),Io=Mo("Even",1),$o=Hr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Do=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Lo={},Po={blur:!0,focus:!0};_("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=un("ng-"+t);Lo[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){s(e,{$event:n})};Po[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var Oo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,l,c;n.$watch(r.ngIf,function(n){n?l||s(function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),a={clone:n},t.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),a&&(c=Lt(a.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),a=null))})}}}],No=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:v.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,l,c,u){var h,d,f,p=0,m=function(){d&&(d.remove(),d=null),h&&(h.$destroy(),h=null),f&&(n.leave(f).done(function(t){!1!==t&&(d=null)}),d=f,f=null)};i.$watch(o,function(o){var l=function(t){!1===t||!N(a)||a&&!i.$eval(a)||e()},d=++p;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&d===p){var e=i.$new();c.template=t;var a=u(e,function(t){m(),n.enter(t,null,r).done(l)});f=a,(h=e).$emit("$includeContentLoaded",o),i.$eval(s)}},function(){i.$$destroyed||d===p&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),c.template=null)})}}}}],jo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(p.call(i[0]).match(/SVG/))return i.empty(),void e(oe(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],Ro=Hr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Bo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=e.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,s=o?K(r):r;i.$parsers.push(function(t){if(!O(t)){var e=[];return t&&_(t.split(s),function(t){t&&e.push(o?K(t):t)}),e}}),i.$formatters.push(function(t){if(H(t))return t.join(r)}),i.$isEmpty=function(t){return!t||!t.length}}}},Fo="ng-valid",Yo="ng-invalid",Ho="ng-pristine",Wo="ng-dirty",zo="ng-pending",Uo=e("ngModel"),Vo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,i,r,o,s,a,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(t),this.$$parentForm=Ur;var u,h=r(n.ngModel),d=h.assign,f=h,p=d,m=null,g=this;this.$$setOptions=function(t){if(g.$options=t,t&&t.getterSetter){var e=r(n.ngModel+"()"),o=r(n.ngModel+"($$$p)");f=function(t){var n=h(t);return W(n)&&(n=e(t)),n},p=function(t,e){W(h(t))?o(t,{$$$p:e}):d(t,e)}}else if(!h.assign)throw Uo("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,pt(i))},this.$render=$,this.$isEmpty=function(t){return O(t)||""===t||null===t||t!=t},this.$$updateEmptyClasses=function(t){g.$isEmpty(t)?(o.removeClass(i,"ng-not-empty"),o.addClass(i,"ng-empty")):(o.removeClass(i,"ng-empty"),o.addClass(i,"ng-not-empty"))};var v=0;Ko({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(i,Wo),o.addClass(i,Ho)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(i,Ho),o.addClass(i,Wo),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){s.cancel(m),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(!A(g.$modelValue)){var t=g.$$lastCommittedViewValue,e=g.$$rawModelValue,n=g.$valid,i=g.$modelValue,r=g.$options&&g.$options.allowInvalid;g.$$runValidators(e,t,function(t){r||n===t||(g.$modelValue=t?e:void 0,g.$modelValue!==i&&g.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){var i,r,o=++v;(function(){var t=g.$$parserName||"parse";if(!O(u))return u||(_(g.$validators,function(t,e){s(e,null)}),_(g.$asyncValidators,function(t,e){s(e,null)})),s(t,u),u;s(t,null);return!0})()?!function(){var n=!0;if(_(g.$validators,function(i,r){var o=i(t,e);n=n&&o,s(r,o)}),!n)return _(g.$asyncValidators,function(t,e){s(e,null)}),!1;return!0}()?a(!1):(i=[],r=!0,_(g.$asyncValidators,function(n,o){var a=n(t,e);if(!q(a))throw Uo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),i.push(a.then(function(){s(o,!0)},function(){r=!1,s(o,!1)}))}),i.length?l.all(i).then(function(){a(r)},$):a(!0)):a(!1);function s(t,e){o===v&&g.$setValidity(t,e)}function a(t){o===v&&n(t)}},this.$commitViewValue=function(){var t=g.$viewValue;s.cancel(m),(g.$$lastCommittedViewValue!==t||""===t&&g.$$hasNativeValidators)&&(g.$$updateEmptyClasses(t),g.$$lastCommittedViewValue=t,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=g.$$lastCommittedViewValue;if(u=!O(e)||void 0)for(var n=0;n<g.$parsers.length;n++)if(O(e=g.$parsers[n](e))){u=!1;break}A(g.$modelValue)&&(g.$modelValue=f(t));var i=g.$modelValue,r=g.$options&&g.$options.allowInvalid;function o(){g.$modelValue!==i&&g.$$writeModelToScope()}g.$$rawModelValue=e,r&&(g.$modelValue=e,o()),g.$$runValidators(e,g.$$lastCommittedViewValue,function(t){r||(g.$modelValue=t?e:void 0,o())})},this.$$writeModelToScope=function(){p(t,g.$modelValue),_(g.$viewChangeListeners,function(t){try{t()}catch(t){e(t)}})},this.$setViewValue=function(t,e){g.$viewValue=t,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=g.$options;r&&N(r.debounce)&&(F(n=r.debounce)?i=n:F(n[e])?i=n[e]:F(n.default)&&(i=n.default)),s.cancel(m),i?m=s(function(){g.$commitViewValue()},i):a.$$phase?g.$commitViewValue():t.$apply(function(){g.$commitViewValue()})},t.$watch(function(){var e=f(t);if(e!==g.$modelValue&&(g.$modelValue==g.$modelValue||e==e)){g.$modelValue=g.$$rawModelValue=e,u=void 0;for(var n=g.$formatters,i=n.length,r=e;i--;)r=n[i](r);g.$viewValue!==r&&(g.$$updateEmptyClasses(r),g.$viewValue=g.$$lastCommittedViewValue=r,g.$render(),g.$$runValidators(g.$modelValue,g.$viewValue,$))}return e})}],Go=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vo,priority:1,compile:function(e){return e.addClass(Ho).addClass("ng-untouched").addClass(Fo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],qo=/(\s+|^)default(\s+|$)/,Xo=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=et(t.$eval(e.ngModelOptions)),N(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=K(this.$options.updateOn.replace(qo,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function Ko(t){var e=t.ctrl,n=t.$element,i={},r=t.set,o=t.unset,s=t.$animate;function a(t,e){e&&!i[t]?(s.addClass(n,t),i[t]=!0):!e&&i[t]&&(s.removeClass(n,t),i[t]=!1)}function l(t,e){t=t?"-"+Mt(t,"-"):"",a(Fo+t,!0===e),a(Yo+t,!1===e)}i[Yo]=!(i[Fo]=n.hasClass(Fo)),e.$setValidity=function(t,n,i){O(n)?function(t,n,i){e[t]||(e[t]={});r(e[t],n,i)}("$pending",t,i):function(t,n,i){e[t]&&o(e[t],n,i);Jo(e[t])&&(e[t]=void 0)}("$pending",t,i);G(n)?n?(o(e.$error,t,i),r(e.$$success,t,i)):(r(e.$error,t,i),o(e.$$success,t,i)):(o(e.$error,t,i),o(e.$$success,t,i));e.$pending?(a(zo,!0),e.$valid=e.$invalid=void 0,l("",null)):(a(zo,!1),e.$valid=Jo(e.$error),e.$invalid=!e.$valid,l("",e.$valid));var s;s=e.$pending&&e.$pending[t]?void 0:!e.$error[t]&&(!!e.$$success[t]||null);l(t,s),e.$$parentForm.$setValidity(t,s,e)}}function Jo(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Zo=Hr({terminal:!0,priority:1e3}),Qo=e("ngOptions"),ts=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,es=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=$},post:function(t,s,a,c){for(var u,h=c[0],d=c[1],f=a.multiple,p=0,m=s.children(),g=m.length;p<g;p++)if(""===m[p].value){u=m.eq(p);break}var v,y=!!u,w=!1,S=l(r.cloneNode(!1));S.val("?");var x=function(t,e,n){var r=t.match(ts);if(!r)throw Qo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,pt(e));var o=r[5]||r[7],s=r[6],a=/ as /.test(r[0])&&r[1],l=r[9],c=i(r[2]?r[1]:o),u=a&&i(a)||c,h=l&&i(l),d=l?function(t,e){return h(n,e)}:function(t){return $e(t)},f=function(t,e){return d(t,_(t,e))},p=i(r[2]||r[1]),m=i(r[3]||""),g=i(r[4]||""),v=i(r[8]),y={},_=s?function(t,e){return y[s]=e,y[o]=t,y}:function(t){return y[o]=t,y};function w(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function S(t){var e;if(!s&&b(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:f,getWatchables:i(v,function(t){for(var e=[],i=S(t=t||[]),o=i.length,s=0;s<o;s++){var a=t===i?s:i[s],l=t[a],c=_(l,a),u=d(l,c);if(e.push(u),r[2]||r[1]){var h=p(n,c);e.push(h)}if(r[4]){var f=g(n,c);e.push(f)}}return e}),getOptions:function(){for(var t=[],e={},i=v(n)||[],r=S(i),o=r.length,s=0;s<o;s++){var a=i===r?s:r[s],c=i[a],h=_(c,a),y=u(n,h),b=d(y,h),x=new w(b,y,p(n,h),m(n,h),g(n,h));t.push(x),e[b]=x}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return l?et(t.viewValue):t.viewValue}}}}}(a.ngOptions,s,t),C=n[0].createDocumentFragment(),k=function(){y?w&&u.removeAttr("selected"):u.remove()},T=function(){S.remove()};function M(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function E(){var t=v&&h.readValue();if(v)for(var e=v.items.length-1;e>=0;e--){var n=v.items[e];N(n.group)?Se(n.element.parentNode):Se(n.element)}v=x.getOptions();var i={};if(y&&s.prepend(u),v.items.forEach(function(t){var e;N(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),C.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),M(t,e)):M(t,C)}),s[0].appendChild(C),d.$render(),!d.$isEmpty(t)){var r=h.readValue();(x.trackBy||f?nt(t,r):t===r)||(d.$setViewValue(r),d.$render())}}f?(d.$isEmpty=function(t){return!t||0===t.length},h.writeValue=function(t){v.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=v.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},h.readValue=function(){var t=s.val()||[],e=[];return _(t,function(t){var n=v.selectValueMap[t];n&&!n.disabled&&e.push(v.getViewValueFromOption(n))}),e},x.trackBy&&t.$watchCollection(function(){if(H(d.$viewValue))return d.$viewValue.map(function(t){return x.getTrackByValue(t)})},function(){d.$render()})):(h.writeValue=function(t){var e=v.selectValueMap[s.val()],n=v.getOptionFromViewValue(t);e&&e.element.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(T(),k(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):null===t||y?(T(),y||s.prepend(u),s.val(""),w&&(u.prop("selected",!0),u.attr("selected",!0))):(k(),s.prepend(S),s.val("?"),S.prop("selected",!0),S.attr("selected",!0))},h.readValue=function(){var t=v.selectValueMap[s.val()];return t&&!t.disabled?(k(),T(),v.getViewValueFromOption(t)):null},x.trackBy&&t.$watch(function(){return x.getTrackByValue(d.$viewValue)},function(){d.$render()})),y?(u.remove(),e(u)(t),u[0].nodeType===jt?(w=!1,h.registerOption=function(t,e){""===e.val()&&(w=!0,(u=e).removeClass("ng-scope"),d.$render(),e.on("$destroy",function(){u=void 0,w=!1}))}):(u.removeClass("ng-scope"),w=!0)):u=l(r.cloneNode(!1)),s.empty(),E(),t.$watchCollection(x.getWatchables,E)}}}}],ns=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(s,a,l){var c,u=l.count,h=l.$attr.when&&a.attr(l.$attr.when),d=l.offset||0,f=s.$eval(h)||{},p={},m=e.startSymbol(),g=e.endSymbol(),y=m+u+"-"+d+g,b=v.noop;function w(t){a.text(t||"")}_(l,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+o(n[2]);f[i]=a.attr(l.$attr[e])}}),_(f,function(t,n){p[n]=e(t.replace(i,y))}),s.$watch(u,function(e){var i=parseFloat(e),r=A(i);if(r||i in f||(i=t.pluralCat(i-d)),!(i===c||r&&A(c))){b();var o=p[i];O(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+h),b=$,w()):b=s.$watch(o,w),c=i}})}}}],is=["$parse","$animate","$compile",function(t,n,i){var o=e("ngRepeat"),s=function(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},a=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,c){var u=c.ngRepeat,h=i.$$createComment("end ngRepeat",u),d=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",u);var f=d[1],p=d[2],m=d[3],g=d[4];if(!(d=f.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",f);var v,y,w,S,x=d[3]||d[1],C=d[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var k={$id:$e};return g?v=t(g):(w=function(t,e){return $e(e)},S=function(t){return t}),function(t,e,i,c,d){v&&(y=function(e,n,i){return C&&(k[C]=e),k[x]=n,k.$index=i,v(t,k)});var f=Pt();t.$watchCollection(p,function(i){var c,p,g,v,k,T,M,E,A,I,$,D,L=e[0],P=Pt();if(m&&(t[m]=i),b(i))A=i,E=y||w;else for(var O in E=y||S,A=[],i)r.call(i,O)&&"$"!==O.charAt(0)&&A.push(O);for(v=A.length,$=new Array(v),c=0;c<v;c++)if(k=i===A?c:A[c],T=i[k],M=E(k,T,c),f[M])I=f[M],delete f[M],P[M]=I,$[c]=I;else{if(P[M])throw _($,function(t){t&&t.scope&&(f[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",u,M,T);$[c]={id:M,scope:void 0,clone:void 0},P[M]=!0}for(var N in f){if(D=Lt((I=f[N]).clone),n.leave(D),D[0].parentNode)for(c=0,p=D.length;c<p;c++)D[c].$$NG_REMOVED=!0;I.scope.$destroy()}for(c=0;c<v;c++)if(k=i===A?c:A[c],T=i[k],(I=$[c]).scope){g=L;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);a(I)!==g&&n.move(Lt(I.clone),null,L),L=l(I),s(I.scope,c,x,T,C,k,v)}else d(function(t,e){I.scope=e;var i=h.cloneNode(!1);t[t.length++]=i,n.enter(t,null,L),L=i,I.clone=t,P[I.id]=I,s(I.scope,c,x,T,C,k,v)});f=P})}}}}],rs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],os=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ss=Hr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&_(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),as=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var s=r.ngSwitch||r.on,a=[],l=[],c=[],u=[],h=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(s,function(n){for(var i,r;c.length;)t.cancel(c.pop());for(i=0,r=u.length;i<r;++i){var s=Lt(l[i].clone);u[i].$destroy(),(c[i]=t.leave(s)).done(h(c,i))}l.length=0,u.length=0,(a=o.cases["!"+n]||o.cases["?"])&&_(a,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:i};l.push(s),t.enter(i,o.parent(),o)})})})}}}],ls=Hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){_(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})})}}),cs=Hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),us=e("ngTransclude"),hs=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw us("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",pt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var s=i.ngTransclude||i.ngTranscludeSlot;function a(){n(t,function(t){e.append(t)})}o(function(t,n){t.length?e.append(t):(a(),n.$destroy())},null,s),s&&!o.isSlotFilled(s)&&a()}}}}],ds=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],fs={$setViewValue:$,$render:$};var ps=["$element","$scope",function(e,n){var i=this,r=new De;i.ngModelCtrl=fs,i.unknownOption=l(t.document.createElement("option")),i.renderUnknownOption=function(t){var n="? "+$e(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},n.$on("$destroy",function(){i.renderUnknownOption=$}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==jt){$t(t,'"option value"'),""===t&&(i.emptyOption=e);var n,o=r.get(t)||0;r.put(t,o+1),i.ngModelCtrl.$render(),(n=e)[0].hasAttribute("selected")&&(n[0].selected=!0)}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.remove(t),""===t&&(i.emptyOption=void 0)):r.put(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.registerOption=function(t,e,n,r,o){var s;r?n.$observe("value",function(t){N(s)&&i.removeOption(s),s=t,i.addOption(t,e)}):o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e);e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],ms=function(){return{restrict:"E",require:["select","?ngModel"],controller:ps,priority:1,link:{pre:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];if(o.ngModelCtrl=r,e.on("change",function(){t.$apply(function(){r.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var t=[];return _(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},o.writeValue=function(t){var n=new De(t);_(e.find("option"),function(t){t.selected=N(n.get(t.value))})};var s,a=NaN;t.$watch(function(){a!==r.$viewValue||nt(s,r.$viewValue)||(s=Ft(r.$viewValue),r.$render()),a=r.$viewValue}),r.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}},gs=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var i,r;return N(n.ngValue)?i=!0:N(n.value)?i=t(n.value,!0):(r=t(e.text(),!0))||n.$set("value",e.text()),function(t,e,n){var o=e.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.registerOption(t,e,n,i,r)}}}}],vs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},ys=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(B(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,pt(n));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||O(o)||o.test(e)}}}}},bs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=E(t);r=A(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},_s=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=E(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!Et){var n=rt();(c=O(n)?t.jQuery:n?t[n]:void 0)&&c.fn.on?(l=c,T(c.fn,{scope:xe.scope,isolateScope:xe.isolateScope,controller:xe.controller,injector:xe.injector,inheritedData:xe.inheritedData}),e=c.cleanData,c.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=c._data(i,"events"))&&n.$destroy&&c(i).triggerHandler("$destroy");e(t)}):l=le,v.element=l,Et=!0}}(),function(n){T(n,{bootstrap:xt,copy:et,extend:T,merge:M,equals:nt,element:l,forEach:_,injector:He,noop:$,bind:at,toJson:ct,fromJson:ut,identity:D,isUndefined:O,isDefined:N,isString:B,isFunction:W,isObject:j,isNumber:F,isElement:Z,isArray:H,version:Ht,isDate:Y,lowercase:o,uppercase:s,callbacks:{$$counter:0},getTestability:kt,$$minErr:e,$$csp:it,reloadWithDebugInfo:Ct}),(u=function(t){var n=e("$injector"),i=e("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||e,r(o,"module",function(){var t={};return function(e,o,s){return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)}(e,"module"),o&&t.hasOwnProperty(e)&&(t[e]=null),r(t,e,function(){if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var t=[],i=[],r=[],a=c("$injector","invoke","push",i),l={_invokeQueue:t,_configBlocks:i,_runBlocks:r,requires:o,name:e,provider:u("$provide","provider"),factory:u("$provide","factory"),service:u("$provide","service"),value:c("$provide","value"),constant:c("$provide","constant","unshift"),decorator:u("$provide","decorator"),animation:u("$animateProvider","register"),filter:u("$filterProvider","register"),controller:u("$controllerProvider","register"),directive:u("$compileProvider","directive"),component:u("$compileProvider","component"),config:a,run:function(t){return r.push(t),this}};return s&&a(s),l;function c(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),l}}function u(n,i){return function(r,o){return o&&W(o)&&(o.$$moduleName=e),t.push([n,i,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Zi}),t.provider("$compile",an).directive({a:Wr,input:_o,textarea:_o,form:Xr,script:ds,select:ms,option:gs,ngBind:xo,ngBindHtml:ko,ngBindTemplate:Co,ngClass:Eo,ngClassEven:Io,ngClassOdd:Ao,ngCloak:$o,ngController:Do,ngForm:Kr,ngHide:os,ngIf:Oo,ngInclude:No,ngInit:Ro,ngNonBindable:Zo,ngPluralize:ns,ngRepeat:is,ngShow:rs,ngStyle:ss,ngSwitch:as,ngSwitchWhen:ls,ngSwitchDefault:cs,ngOptions:es,ngTransclude:hs,ngModel:Go,ngList:Bo,ngChange:To,pattern:ys,ngPattern:ys,required:vs,ngRequired:vs,minlength:_s,ngMinlength:_s,maxlength:bs,ngMaxlength:bs,ngValue:So,ngModelOptions:Xo}).directive({ngInclude:jo}).directive(zr).directive(Lo),t.provider({$anchorScroll:We,$animate:Ke,$animateCss:Qe,$$animateJs:qe,$$animateQueue:Xe,$$AnimateRunner:Ze,$$animateAsyncRun:Je,$browser:en,$cacheFactory:nn,$controller:gn,$document:vn,$exceptionHandler:yn,$filter:gr,$$forceReflow:bn,$interpolate:Bn,$interval:Fn,$http:On,$httpParamSerializer:En,$httpParamSerializerJQLike:An,$httpBackend:jn,$xhrFactory:Nn,$jsonpCallbacks:Yn,$location:oi,$log:si,$parse:Vi,$rootScope:Ji,$q:Gi,$$q:qi,$sce:ir,$sceDelegate:nr,$sniffer:rr,$templateCache:rn,$templateRequest:sr,$$testability:ar,$timeout:lr,$window:fr,$$rAF:Ki,$$jqLite:Ie,$$HashMap:Le,$$cookieReader:mr})}])}(v),v.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,i){var r=0|t,o=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,i);return 1==r&&0==o.v?e:n}})}]),l(t.document).ready(function(){St(t.document,xt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){"use strict";var i=n(57),r="$$dragula",o=n(277);t.exports=function(t){return[function(){return{add:a,find:l,options:function(t,n,r){var o=a(t,n,i(r));e(t,o.drake)},destroy:function(t,e){var i=n(t).bags,r=l(t,e),o=i.indexOf(r);i.splice(o,1),r.drake.destroy()},handleModels:e};function e(e,n){var i,r,o,a;n.registered||(n.on("remove",function(t,i){n.models&&(a=n.models[n.containers.indexOf(i)],e.$applyAsync(function(){a.splice(r,1),n.emit("remove-model",t,i)}))}),n.on("drag",function(t,e){i=t,r=s(t,e)}),n.on("drop",function(l,c,u){n.models&&(o=s(l,c),e.$applyAsync(function(){if(a=n.models[n.containers.indexOf(u)],c===u)a.splice(o,0,a.splice(r,1)[0]);else{var e=i===l,s=n.models[n.containers.indexOf(c)],h=e?a[r]:t.copy(a[r]);e&&a.splice(r,1),s.splice(o,0,h),c.removeChild(l)}n.emit("drop-model",l,c,u)}))}),n.registered=!0)}function n(t){var e=t[r];return e||(e=t[r]={bags:[]}),e}function s(e,n){return Array.prototype.indexOf.call(t.element(n).children(),e)}function a(i,r,s){var a=l(i,r);if(a)throw new Error('Bag named: "'+r+'" already exists in same angular scope.');return a={name:r,drake:s},n(i).bags.push(a),o(t,a,i),s.models&&e(i,s),a}function l(t,e){for(var i=n(t).bags,r=0;r<i.length;r++)if(i[r].name===e)return i[r]}}]}},function(t,e,n){"use strict";var i=n(58),r=n(270);t.exports=function(t,e){var n=e||{},o={};return void 0===t&&(t={}),t.on=function(e,n){return o[e]?o[e].push(n):o[e]=[n],t},t.once=function(e,n){return n._once=!0,t.on(e,n),t},t.off=function(e,n){var i=arguments.length;if(1===i)delete o[e];else if(0===i)o={};else{var r=o[e];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.emit=function(){var e=i(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var s=(o[e]||[]).slice(0);return function(){var o=i(arguments),a=this||t;if("error"===e&&!1!==n.throws&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(i){n.async?r(i,o,a):i.apply(a,o),i._once&&t.off(e,i)}),t}},t}},function(t,e,n){"use strict";var i=n(271);t.exports=function(t,e,n){t&&i(function(){t.apply(n||null,e||[])})}},function(t,e,n){(function(e){var n;n="function"==typeof e?function(t){e(t)}:function(t){setTimeout(t,0)},t.exports=n}).call(this,n(59).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,l=1,c={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[l]=r,i(l),l++},d.clearImmediate=f}function f(t){delete c[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(9))},function(t,e,n){"use strict";(function(e){var i=n(274),r=n(275),o=e.document,s=function(t,e,n,i){return t.addEventListener(e,n,i)},a=function(t,e,n,i){return t.removeEventListener(e,n,i)},l=[];function c(t,e,n){var i=function(t,e,n){var i,r;for(i=0;i<l.length;i++)if((r=l[i]).element===t&&r.type===e&&r.fn===n)return i}(t,e,n);if(i){var r=l[i].wrapper;return l.splice(i,1),r}}e.addEventListener||(s=function(t,n,i){return t.attachEvent("on"+n,function(t,n,i){var r=c(t,n,i)||function(t,n,i){return function(n){var r=n||e.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,i.call(t,r)}}(t,0,i);return l.push({wrapper:r,element:t,type:n,fn:i}),r}(t,n,i))},a=function(t,e,n){var i=c(t,e,n);if(i)return t.detachEvent("on"+e,i)}),t.exports={add:s,remove:a,fabricate:function(t,e,n){var s=-1===r.indexOf(e)?new i(e,{detail:n}):function(){var t;o.createEvent?(t=o.createEvent("Event")).initEvent(e,!0,!0):o.createEventObject&&(t=o.createEventObject());return t}();t.dispatchEvent?t.dispatchEvent(s):t.fireEvent("on"+e,s)}}}).call(this,n(7))},function(t,e,n){(function(e){var n=e.CustomEvent;t.exports=function(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=Boolean(e.bubbles),n.cancelable=Boolean(e.cancelable),n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,n(7))},function(t,e,n){"use strict";(function(e){var n=[],i="",r=/^on/;for(i in e)r.test(i)&&n.push(i.slice(2));t.exports=n}).call(this,n(7))},function(t,e,n){"use strict";var i={},r="(?:^|\\s)",o="(?:\\s|$)";function s(t){var e=i[t];return e?e.lastIndex=0:i[t]=e=new RegExp(r+t+o,"g"),e}t.exports={add:function(t,e){var n=t.className;n.length?s(e).test(n)||(t.className+=" "+e):t.className=e},rm:function(t,e){t.className=t.className.replace(s(e)," ").trim()}}},function(t,e,n){"use strict";var i=n(58),r=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow","drop-model","remove-model"];t.exports=function(t,e,n){function o(e){return t.isElement(e)?t.element(e):e}r.forEach(function(t){e.drake.on(t,function(){var r=i(arguments).map(o);r.unshift(e.name+"."+t),n.$emit.apply(n,r)})})}},function(t,e,n){"use strict";var i=n(57);t.exports=function(t){return["dragulaService",function(t){return{restrict:"A",scope:{dragulaScope:"=",dragulaModel:"="},link:function(e,n,r){var o,s=e.dragulaScope||e.$parent,a=n[0],l=e.$eval(r.dragula),c=t.find(s,l);c?(o=c.drake).containers.push(a):(o=i({containers:[a]}),t.add(s,l,o));e.$watch("dragulaModel",function(e,n){if(e){if(o.models){var i=n?o.models.indexOf(n):-1;i>=0?o.models.splice(i,1,e):o.models.push(e)}else o.models=[e];t.handleModels(s,o)}})}}}]}},function(t,e,n){n(280),t.exports="ngFileUpload"},function(t,e,n){(function(t){var e;
/**!
 * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * FileAPI Flash shim for old browsers not supporting FormData
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */
!function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(t){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,i){t.__listeners[n]=i,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,i,r){n(this),this.__url=i;try{t.apply(this,[e,i,r])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,t.apply(this,[e,"_fix_for_ie_crossdomain__",r]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,i){if("__setXHR_"===e){n(this);var r=i(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=i,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var i=arguments[0],r={url:n.__url,jsonp:!1,cache:!0,complete:function(t,i){t&&angular.isString(t)&&-1!==t.indexOf("#2174")&&(t=null),n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&e(n,"status",function(){return 0===i.status&&t&&"abort"!==t?500:i.status}),void 0!==i.statusText&&e(n,"statusText",function(){return i.statusText}),e(n,"readyState",function(){return 4}),void 0!==i.response&&e(n,"response",function(){return i.response});var r=i.responseText||(t&&0===i.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return r}),e(n,"response",function(){return r}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders,data:{},files:{}},o=0;o<i.data.length;o++){var s=i.data[o];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?r.files[s.key]=s.val:r.data[s.key]=s.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(r)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}}}}(),function(){function e(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(e){var n=0,i=0;if(window.jQuery)return t(e).offset();if(e.offsetParent)do{n+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent}while(e);return{left:n,top:i}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=e(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var i,r,o,s,a,l=document.createElement("script"),c=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)i=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)r=window.FileAPI.jsPath;else for(o=0;o<c.length;o++)if((s=(a=c[o].src).search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/))>-1){r=a.substring(0,s+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=r),l.setAttribute("src",i||r+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(l)}FileAPI.ngfFixIE=function(t,i,r){if(!e())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';t.bind("mouseenter",function(){var e=i.parent();t.attr("disabled")?e&&e.removeClass("js-fileapi-wrapper"):(i.attr("__ngf_flash_")||(i.unbind("change"),i.unbind("click"),i.bind("change",function(t){o.apply(this,[t]),r.apply(this,[t])}),i.attr("__ngf_flash_","true")),e.addClass("js-fileapi-wrapper"),function(t){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}(t)||(e.css("position","absolute").css("top",n(t[0]).top+"px").css("left",n(t[0]).left+"px").css("width",t[0].offsetWidth+"px").css("height",t[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",t.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),i.css("width",t[0].offsetWidth+"px").css("height",t[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))});var o=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var i=0;i<n.length;i++)n[i].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var i={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){var r;e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",i))),"load"===i.type?(t.onloadend&&t.onloadend(n("loadend",i)),r=n("load",i),t.onload&&t.onload(r),t.dispatchEvent(r)):"progress"===i.type?(r=n("progress",i),t.onprogress&&t.onprogress(r),t.dispatchEvent(r)):(r=n("error",i),t.onerror&&t.onerror(r),t.dispatchEvent(r))};this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,i)},this.readAsText=function(t){FileAPI.readAsText(t,i)}})
/**!
 * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,
 * progress, resize, thumbnail, preview, validation and CORS
 * @author  Danial  <danial.farid@gmail.com>
 * @version 12.2.13
 */,!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=(e=window.XMLHttpRequest.prototype.setRequestHeader,function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}));var n=angular.module("ngFileUpload",[]);n.version="12.2.13",n.service("UploadBase",["$http","$q","$timeout",function(t,e,i){var r=this;r.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var o=this.isResumeSupported();function s(n){n.method=n.method||"POST",n.headers=n.headers||{};var s=n._deferred=n._deferred||e.defer(),a=s.promise;function l(t){s.notify&&s.notify(t),a.progressFunc&&i(function(){a.progressFunc(t)})}function c(t){return null!=n._start&&o?{loaded:t.loaded+n._start,total:n._file&&n._file.size||t.total,type:t.type,config:n,lengthComputable:!0,target:t.target}:t}function u(){t(n).then(function(t){if(o&&n._chunkSize&&!n._finished&&n._file){var e=n._file&&n._file.size||0;l({loaded:Math.min(n._end,e),total:e,config:n,type:"progress"}),r.upload(n,!0)}else n._finished&&delete n._finished,s.resolve(t)},function(t){s.reject(t)},function(t){s.notify(t)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(t){t&&t.upload&&t.upload.addEventListener&&(n.__XHR=t,n.xhrFn&&n.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=n,l(c(t))},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=n,l(c(t)))},!1))}}),o?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,u()):n.resumeSizeUrl?t.get(n.resumeSizeUrl).then(function(t){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(t.data):n._start=parseInt((null==t.data.size?t.data:t.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),u()},function(t){throw t}):n.resumeSize?n.resumeSize().then(function(t){n._start=t,n._chunkSize&&(n._end=n._start+n._chunkSize),u()},function(t){throw t}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),u()):u(),a.success=function(t){return a.then(function(e){t(e.data,e.status,e.headers,n)}),a},a.error=function(t){return a.then(null,function(e){t(e.data,e.status,e.headers,n)}),a},a.progress=function(t){return a.progressFunc=t,a.then(null,null,function(e){t(e)}),a},a.abort=a.pause=function(){return n.__XHR&&i(function(){n.__XHR.abort()}),a},a.xhr=function(t){var e;return n.xhrFn=(e=n.xhrFn,function(){e&&e.apply(a,arguments),t.apply(a,arguments)}),a},r.promisesCount++,a.finally&&a.finally instanceof Function&&a.finally(function(){r.promisesCount--}),a}function a(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}this.isUploadInProgress=function(){return r.promisesCount>0},this.rename=function(t,e){return t.ngfName=e,t},this.jsonBlob=function(t){null==t||angular.isString(t)||(t=JSON.stringify(t));var e=new window.Blob([t],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(t){return angular.toJson(t)},this.isFile=function(t){return null!=t&&(t instanceof window.Blob||t.flashId&&t.name&&t.size)},this.upload=function(t,e){function n(e,i,s){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))e.append(s,i);else if(r.isFile(i)){var a=function(e,n){if(e._ngfBlob)return e;if(t._file=t._file||e,null!=t._start&&o){t._end&&t._end>=e.size&&(t._finished=!0,t._end=e.size);var i=e.slice(t._start,t._end||e.size);return i.name=e.name,i.ngfName=e.ngfName,t._chunkSize&&(n.append("_chunkSize",t._chunkSize),n.append("_currentChunkSize",t._end-t._start),n.append("_chunkNumber",Math.floor(t._start/t._chunkSize)),n.append("_totalSize",t._file.size)),i}return e}(i,e),l=s.split(",");l[1]&&(a.ngfName=l[1].replace(/^\s+|\s+$/g,""),s=l[0]),t._fileKey=t._fileKey||s,e.append(s,a,a.ngfName||a.name)}else if(angular.isObject(i)){if(i.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+s;i.$$ngfCircularDetection=!0;try{for(var c in i)if(i.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==t.objectKey?"[i]":t.objectKey;i.length&&parseInt(c)>-1&&(u=null==t.arrayKey?u:t.arrayKey),n(e,i[c],s+u.replace(/[ik]/g,c))}}finally{delete i.$$ngfCircularDetection}}else e.append(s,i)}return e||(t=a(t)),t._isDigested||(t._isDigested=!0,t._chunkSize=r.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?angular.isArray(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e){var i,r=new window.FormData;for(i in e=e||t.fields||{},t.file&&(e.file=t.file),e)if(e.hasOwnProperty(i)){var o=e[i];t.formDataAppender?t.formDataAppender(r,i,o):n(r,o,i)}return r})),s(t)},this.http=function(e){return(e=a(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:t.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=r.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,s(e)},this.translateScalars=function(t){if(angular.isString(t)){if(t.search(/kb/i)===t.length-2)return parseFloat(1024*t.substring(0,t.length-2));if(t.search(/mb/i)===t.length-2)return parseFloat(1048576*t.substring(0,t.length-2));if(t.search(/gb/i)===t.length-2)return parseFloat(1073741824*t.substring(0,t.length-2));if(t.search(/b/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/s/i)===t.length-1)return parseFloat(t.substring(0,t.length-1));if(t.search(/m/i)===t.length-1)return parseFloat(60*t.substring(0,t.length-1));if(t.search(/h/i)===t.length-1)return parseFloat(3600*t.substring(0,t.length-1))}return t},this.urlToBlob=function(n){var i=e.defer();return t({url:n,method:"get",responseType:"arraybuffer"}).then(function(t){var e=new Uint8Array(t.data),r=t.headers("content-type")||"image/WebP",o=new window.Blob([e],{type:r}),s=n.match(/.*\/(.+?)(\?.*)?$/);s.length>1&&(o.name=s[1]),i.resolve(o)},function(t){i.reject(t)}),i.promise},this.setDefaults=function(t){this.defaults=t||{}},this.defaults={},this.version=n.version}]),n.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(t,e,n,i,r){var o=r;function s(t,e,n,r,s){var a=[o.emptyPromise()];function l(i,l){if(0===i.type.indexOf("image")){if(t.pattern&&!o.validatePattern(i,t.pattern))return;t.resizeIf=function(t,e){return o.attrGetter("ngfResizeIf",n,r,{$width:t,$height:e,$file:i})};var c=o.resize(i,t);a.push(c),c.then(function(t){e.splice(l,1,t)},function(t){i.$error="resize",(i.$errorMessages=i.$errorMessages||{}).resize=!0,i.$errorParam=(t?(t.message?t.message:t)+": ":"")+(i&&i.name),s.$ngfValidations.push({name:"resize",valid:!1}),o.applyModelValidation(s,e)})}}for(var c=0;c<e.length;c++)l(e[c],c);return i.all(a)}return o.getAttrWithDefaults=function(t,e){if(null!=t[e])return t[e];var n=o.defaults[e];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},o.attrGetter=function(e,n,i,r){var o=this.getAttrWithDefaults(n,e);if(!i)return o;try{return r?t(o)(i,r):t(o)(i)}catch(t){if(e.search(/min|max|pattern/i))return o;throw t}},o.shouldUpdateOn=function(t,e,n){var i=o.attrGetter("ngfModelOptions",e,n);return!i||!i.updateOn||i.updateOn.split(" ").indexOf(t)>-1},o.emptyPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.resolve.apply(t,n)}),t.promise},o.rejectPromise=function(){var t=i.defer(),n=arguments;return e(function(){t.reject.apply(t,n)}),t.promise},o.happyPromise=function(t,n){var r=i.defer();return t.then(function(t){r.resolve(t)},function(t){e(function(){throw t}),r.resolve(n)}),r.promise},o.updateModel=function(n,r,a,l,c,u,h){function d(i,s,c,h,d){r.$$ngfPrevValidFiles=i,r.$$ngfPrevInvalidFiles=s;var f=i&&i.length?i[0]:null,p=s&&s.length?s[0]:null;n&&(o.applyModelValidation(n,i),n.$setViewValue(d?f:i)),l&&t(l)(a,{$files:i,$file:f,$newFiles:c,$duplicateFiles:h,$invalidFiles:s,$invalidFile:p,$event:u});var m=o.attrGetter("ngfModelInvalid",r);m&&e(function(){t(m).assign(a,d?p:s)}),e(function(){})}var f,p,m,g,v=[],y=[],b=[];function _(){function t(){e(function(){d(w?p.concat(b):b,w?m.concat(y):y,c,v,S)},C&&C.debounce?C.debounce.change||C.debounce:0)}var l=x?f:b;(function(t,e,n,r){var a=o.attrGetter("ngfResize",e,n);if(!a||!o.isResizeSupported()||!t.length)return o.emptyPromise();if(a instanceof Function){var l=i.defer();return a(t).then(function(i){s(i,t,e,n,r).then(function(t){l.resolve(t)},function(t){l.reject(t)})},function(t){l.reject(t)})}return s(a,t,e,n,r)})(l,r,a,n).then(function(){x?o.validate(f,w?p.length:0,n,r,a).then(function(e){b=e.validsFiles,y=e.invalidsFiles,t()}):t()},function(){for(var e=0;e<l.length;e++){var n=l[e];if("resize"===n.$error){var i=b.indexOf(n);i>-1&&(b.splice(i,1),y.push(n)),t()}}})}p=r.$$ngfPrevValidFiles||[],m=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(g=n.$modelValue,p=angular.isArray(g)?g:[g]);var w=o.attrGetter("ngfKeep",r,a);f=(c||[]).slice(0),"distinct"!==w&&!0!==o.attrGetter("ngfKeepDistinct",r,a)||function(){function t(t,e){return t.name===e.name&&(t.$ngfOrigSize||t.size)===(e.$ngfOrigSize||e.size)&&t.type===e.type}function e(e){var n;for(n=0;n<p.length;n++)if(t(e,p[n]))return!0;for(n=0;n<m.length;n++)if(t(e,m[n]))return!0;return!1}if(c){f=[],v=[];for(var n=0;n<c.length;n++)e(c[n])?v.push(c[n]):f.push(c[n])}}();var S=!w&&!o.attrGetter("ngfMultiple",r,a)&&!o.attrGetter("multiple",r);if(!w||f.length){o.attrGetter("ngfBeforeModelChange",r,a,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:f,$duplicateFiles:v,$event:u});var x=o.attrGetter("ngfValidateAfterResize",r,a),C=o.attrGetter("ngfModelOptions",r,a);o.validate(f,w?p.length:0,n,r,a).then(function(t){h?d(f,[],c,v,S):(C&&C.allowInvalid||x?b=f:(b=t.validFiles,y=t.invalidFiles),o.attrGetter("ngfFixOrientation",r,a)&&o.isExifSupported()?function(t,e,n){var r=[o.emptyPromise()];return angular.forEach(t,function(i,s){0===i.type.indexOf("image/jpeg")&&o.attrGetter("ngfFixOrientation",e,n,{$file:i})&&r.push(o.happyPromise(o.applyExifRotation(i),i).then(function(e){t.splice(s,1,e)}))}),i.all(r)}(b,r,a).then(function(){_()}):_())})}},o}]),n.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(t,e,n,i){var r=[];function o(t,e,n,o,s,a,l,c){var u=function(t,e){return c.attrGetter(t,n,e)};function h(){return"input"===e[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return u("ngfChange")||u("ngfSelect")}function f(e){if(c.shouldUpdateOn("change",n,t)){var i=e.__files_||e.target&&e.target.files,r=[];if(!i)return;for(var s=0;s<i.length;s++)r.push(i[s]);c.updateModel(o,n,t,d(),r.length?r:null,e)}}c.registerModelChangeValidator(o,n,t);var p=[];u("ngfMultiple")&&p.push(t.$watch(u("ngfMultiple"),function(){v.attr("multiple",u("ngfMultiple",t))})),u("ngfCapture")&&p.push(t.$watch(u("ngfCapture"),function(){v.attr("capture",u("ngfCapture",t))})),u("ngfAccept")&&p.push(t.$watch(u("ngfAccept"),function(){v.attr("accept",u("ngfAccept",t))})),p.push(n.$observe("accept",function(){v.attr("accept",u("accept"))}));var m=0,g=0;var v=e;function y(e){c.shouldUpdateOn("click",n,t)&&v.val()&&(v.val(null),c.updateModel(o,n,t,d(),null,e,!0))}h()||(v=function(){if(h())return e;var t=angular.element('<input type="file">'),i=angular.element("<label>upload</label>");return i.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,i){function r(e){t.attr("id","ngf-"+e),i.attr("id","ngf-label-"+e)}for(var o=0;o<e[0].attributes.length;o++){var s=e[0].attributes[o];"type"!==s.name&&"class"!==s.name&&"style"!==s.name&&("id"===s.name?(r(s.value),p.push(n.$observe("id",r))):t.attr(s.name,s.value||"required"!==s.name&&"multiple"!==s.name?s.value:s.name))}}(t,i),r.push({el:e,ref:i}),document.body.appendChild(i.append(t)[0]),t}()),v.bind("change",f),h()?e.bind("click",y):e.bind("click touchstart touchend",function(n){if(e.attr("disabled"))return!1;if(!u("ngfSelectDisabled",t)){var o=function(t){var e=t.changedTouches||t.originalEvent&&t.originalEvent.changedTouches;if(e){if("touchstart"===t.type)return g=e[0].clientX,m=e[0].clientY,!0;if("touchend"===t.type){var n=e[0].clientX,i=e[0].clientY;if(Math.abs(n-g)>20||Math.abs(i-m)>20)return t.stopPropagation(),t.preventDefault(),!1}return!0}}(n);if(null!=o)return o;y(n);try{h()||document.body.contains(v[0])||(r.push({el:e,ref:v.parent()}),document.body.appendChild(v.parent()[0]),v.bind("change",f))}catch(t){}return!function(t){var e=t.match(/Android[^\d]*(\d+)\.(\d+)/);if(e&&e.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(e[1])<4||parseInt(e[1])===n&&parseInt(e[2])<n}return-1===t.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(t)}(navigator.userAgent)?v[0].click():setTimeout(function(){v[0].click()},0),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&v.bind("click",function t(e){if(v&&!v.attr("__ngf_ie10_Fix_")){if(!v[0].parentNode)return void(v=null);e.preventDefault(),e.stopPropagation(),v.unbind("click");var n=v.clone();return v.replaceWith(n),(v=n).attr("__ngf_ie10_Fix_","true"),v.bind("change",f),v.bind("click",t),v[0].click(),!1}v.removeAttr("__ngf_ie10_Fix_")}),o&&o.$formatters.push(function(t){return null!=t&&0!==t.length||v.val()&&v.val(null),t}),t.$on("$destroy",function(){h()||v.parent().remove(),angular.forEach(p,function(t){t()})}),a(function(){for(var t=0;t<r.length;t++){var e=r[t];document.body.contains(e.el[0])||(r.splice(t,1),e.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(e,v,f)}return{restrict:"AEC",require:"?ngModel",link:function(t,n,r,s){o(t,n,r,s,0,e,0,i)}}}]),function(){function t(t,e,n,i,r,o,s,a){function l(o){var s=t.attrGetter("ngfNoObjectUrl",r,n);t.dataUrl(o,s).finally(function(){e(function(){var t=(s?o.$ngfDataUrl:o.$ngfBlobUrl)||o.$ngfDataUrl;a?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}e(function(){var e=n.$watch(r[o],function(e){var c,u=s;if("ngfThumbnail"===o&&(u||(u={width:i[0].naturalWidth||i[0].clientWidth,height:i[0].naturalHeight||i[0].clientHeight}),0===u.width&&window.getComputedStyle)){var h=getComputedStyle(i[0]);h.width&&h.width.indexOf("px")>-1&&h.height&&h.height.indexOf("px")>-1&&(u={width:parseInt(h.width.slice(0,-2)),height:parseInt(h.height.slice(0,-2))})}if(angular.isString(e))return i.removeClass("ng-hide"),a?i.css("background-image","url('"+e+"')"):i.attr("src",e);!e||!e.type||0!==e.type.search("img"===(c=i[0]).tagName.toLowerCase()?"image":"audio"===c.tagName.toLowerCase()?"audio":"video"===c.tagName.toLowerCase()?"video":/./)||a&&0!==e.type.indexOf("image")?i.addClass("ng-hide"):u&&t.isResizeSupported()?(u.resizeIf=function(i,o){return t.attrGetter("ngfResizeIf",r,n,{$width:i,$height:o,$file:e})},t.resize(e,u).then(function(t){l(t)},function(t){throw t})):l(e)});n.$on("$destroy",function(){e()})})}n.service("UploadDataUrl",["UploadBase","$timeout","$q",function(t,e,n){var i=t;return i.base64DataUrl=function(t){if(angular.isArray(t)){var e=n.defer(),r=0;return angular.forEach(t,function(n){i.dataUrl(n,!0).finally(function(){if(++r===t.length){var n=[];angular.forEach(t,function(t){n.push(t.$ngfDataUrl)}),e.resolve(n,t)}})}),e.promise}return i.dataUrl(t,!0)},i.dataUrl=function(t,r){if(!t)return i.emptyPromise(t,t);if(r&&null!=t.$ngfDataUrl||!r&&null!=t.$ngfBlobUrl)return i.emptyPromise(r?t.$ngfDataUrl:t.$ngfBlobUrl,t);var o=r?t.$$ngfDataUrlPromise:t.$$ngfBlobUrlPromise;if(o)return o;var s=n.defer();return e(function(){if(window.FileReader&&t&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||t.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||t.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!r){var o;try{o=n.createObjectURL(t)}catch(n){return void e(function(){t.$ngfBlobUrl="",s.reject()})}e(function(){if(t.$ngfBlobUrl=o,o){s.resolve(o,t),i.blobUrls=i.blobUrls||[],i.blobUrlsTotalSize=i.blobUrlsTotalSize||0,i.blobUrls.push({url:o,size:t.size}),i.blobUrlsTotalSize+=t.size||0;for(var e=i.defaults.blobUrlsMaxMemory||268435456,r=i.defaults.blobUrlsMaxQueueSize||200;(i.blobUrlsTotalSize>e||i.blobUrls.length>r)&&i.blobUrls.length>1;){var a=i.blobUrls.splice(0,1)[0];n.revokeObjectURL(a.url),i.blobUrlsTotalSize-=a.size}}})}else{var a=new FileReader;a.onload=function(n){e(function(){t.$ngfDataUrl=n.target.result,s.resolve(n.target.result,t),e(function(){delete t.$ngfDataUrl},1e3)})},a.onerror=function(){e(function(){t.$ngfDataUrl="",s.reject()})},a.readAsDataURL(t)}}else e(function(){t[r?"$ngfDataUrl":"$ngfBlobUrl"]="",s.reject()})}),(o=r?t.$$ngfDataUrlPromise=s.promise:t.$$ngfBlobUrlPromise=s.promise).finally(function(){delete t[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},i}]),n.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,o){t(e,n,i,r,o,"ngfSrc",e.attrGetter("ngfResize",o,i),!1)}}}]),n.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,o){t(e,n,i,r,o,"ngfBackground",e.attrGetter("ngfResize",o,i),!0)}}}]),n.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,o){var s=e.attrGetter("ngfSize",o,i);t(e,n,i,r,o,"ngfThumbnail",s,e.attrGetter("ngfAsBackground",o,i))}}}]),n.config(["$compileProvider",function(t){t.imgSrcSanitizationWhitelist&&t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),t.aHrefSanitizationWhitelist&&t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),n.filter("ngfDataUrl",["UploadDataUrl","$sce",function(t,e){return function(n,i,r){if(angular.isString(n))return e.trustAsResourceUrl(n);var o=n&&((i?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!o?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,t.dataUrl(n,i)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&o?r?e.trustAsResourceUrl(o):o:n)||"")}}])}(),n.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(t,e,n){var i=t;return i.validatePattern=function(t,e){if(!e)return!0;var n=function t(e){var n="",i=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])n=e.substring(1,e.length-1);else{var r=e.split(",");if(r.length>1)for(var o=0;o<r.length;o++){var s=t(r[o]);s.regexp?(n+="("+s.regexp+")",o<r.length-1&&(n+="|")):i=i.concat(s.excludes)}else 0===e.indexOf("!")?i.push("^((?!"+t(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),n=(n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:i}}(e),i=!0;if(n.regexp&&n.regexp.length){var r=new RegExp(n.regexp,"i");i=null!=t.type&&r.test(t.type)||null!=t.name&&r.test(t.name)}for(var o=n.excludes.length;o--;){var s=new RegExp(n.excludes[o],"i");i=i&&(null==t.type||s.test(t.type))&&(null==t.name||s.test(t.name))}return i},i.ratioToFloat=function(t){var e=t.toString(),n=e.search(/[x:]/i);return e=n>-1?parseFloat(e.substring(0,n))/parseFloat(e.substring(n+1)):parseFloat(e)},i.registerModelChangeValidator=function(t,e,n){t&&t.$formatters.push(function(r){if(t.$dirty){var o=r;r&&!angular.isArray(r)&&(o=[r]),i.validate(o,0,t,e,n).then(function(){i.applyModelValidation(t,o)})}return r})},i.applyModelValidation=function(t,e){!function(t,e){null==e||t.$dirty||(t.$setDirty?t.$setDirty():t.$dirty=!0)}(t,e),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},i.getValidationAttr=function(t,e,n,r,o){var s="ngf"+n[0].toUpperCase()+n.substr(1),a=i.attrGetter(s,t,e,{$file:o});if(null==a&&(a=i.attrGetter("ngfValidate",t,e,{$file:o}))){var l=(r||n).split(".");a=a[l[0]],l.length>1&&(a=a&&a[l[1]])}return a},i.validate=function(t,n,r,o,s){(r=r||{}).$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(t){t.valid=!0});var a=function(t,e){return i.attrGetter(t,o,s,e)},l=(i.attrGetter("ngfIgnoreInvalid",o,s)||"").split(" "),c=i.attrGetter("ngfRunAllValidations",o,s);if(null==t||0===t.length)return i.emptyPromise({validFiles:t,invalidFiles:[]});t=void 0===t.length?[t]:t.slice(0);var u=[];function h(e,n,a){if(t){for(var h=t.length,d=null;h--;){var f=t[h];if(f){var p=i.getValidationAttr(o,s,e,n,f);null!=p&&(a(f,p,h)||(-1===l.indexOf(e)?(f.$error=e,(f.$errorMessages=f.$errorMessages||{})[e]=!0,f.$errorParam=p,-1===u.indexOf(f)&&u.push(f),c||t.splice(h,1),d=!1):t.splice(h,1)))}}null!==d&&r.$ngfValidations.push({name:e,valid:d})}}h("pattern",null,i.validatePattern),h("minSize","size.min",function(t,e){return t.size+.1>=i.translateScalars(e)}),h("maxSize","size.max",function(t,e){return t.size-.1<=i.translateScalars(e)});var d=0;if(h("maxTotalSize",null,function(e,n){return!((d+=e.size)>i.translateScalars(n))||(t.splice(0,t.length),!1)}),h("validateFn",null,function(t,e){return!0===e||null===e||""===e}),!t.length)return i.emptyPromise({validFiles:[],invalidFiles:u});function f(n,h,d,f,p){function m(e,i,r){function o(o){if(o())if(-1===l.indexOf(n)){if(i.$error=n,(i.$errorMessages=i.$errorMessages||{})[n]=!0,i.$errorParam=r,-1===u.indexOf(i)&&u.push(i),!c){var s=t.indexOf(i);s>-1&&t.splice(s,1)}e.resolve(!1)}else{var a=t.indexOf(i);a>-1&&t.splice(a,1),e.resolve(!0)}else e.resolve(!0)}null!=r?f(i,r).then(function(t){o(function(){return!p(t,r)})},function(){o(function(){return a("ngfValidateForce",{$file:i})})}):e.resolve(!0)}var g=[i.emptyPromise(!0)];t&&(t=void 0===t.length?[t]:t,angular.forEach(t,function(t){var r=e.defer();g.push(r.promise),!d||null!=t.type&&0===t.type.search(d)?"dimensions"===n&&null!=i.attrGetter("ngfDimensions",o)?i.imageDimensions(t).then(function(e){m(r,t,a("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){r.resolve(!1)}):"duration"===n&&null!=i.attrGetter("ngfDuration",o)?i.mediaDuration(t).then(function(e){m(r,t,a("ngfDuration",{$file:t,$duration:e}))},function(){r.resolve(!1)}):m(r,t,i.getValidationAttr(o,s,n,h,t)):r.resolve(!0)}));var v=e.defer();return e.all(g).then(function(t){for(var e=!0,i=0;i<t.length;i++)if(!t[i]){e=!1;break}r.$ngfValidations.push({name:n,valid:e}),v.resolve(e)}),v.promise}var p=e.defer(),m=[];return m.push(f("maxHeight","height.max",/image/,this.imageDimensions,function(t,e){return t.height<=e})),m.push(f("minHeight","height.min",/image/,this.imageDimensions,function(t,e){return t.height>=e})),m.push(f("maxWidth","width.max",/image/,this.imageDimensions,function(t,e){return t.width<=e})),m.push(f("minWidth","width.min",/image/,this.imageDimensions,function(t,e){return t.width>=e})),m.push(f("dimensions",null,/image/,function(t,e){return i.emptyPromise(e)},function(t){return t})),m.push(f("ratio",null,/image/,this.imageDimensions,function(t,e){for(var n=e.toString().split(","),r=!1,o=0;o<n.length;o++)Math.abs(t.width/t.height-i.ratioToFloat(n[o]))<.01&&(r=!0);return r})),m.push(f("maxRatio","ratio.max",/image/,this.imageDimensions,function(t,e){return t.width/t.height-i.ratioToFloat(e)<1e-4})),m.push(f("minRatio","ratio.min",/image/,this.imageDimensions,function(t,e){return t.width/t.height-i.ratioToFloat(e)>-1e-4})),m.push(f("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(t,e){return t<=i.translateScalars(e)})),m.push(f("minDuration","duration.min",/audio|video/,this.mediaDuration,function(t,e){return t>=i.translateScalars(e)})),m.push(f("duration",null,/audio|video/,function(t,e){return i.emptyPromise(e)},function(t){return t})),m.push(f("validateAsyncFn",null,null,function(t,e){return e},function(t){return!0===t||null===t||""===t})),e.all(m).then(function(){if(c)for(var e=0;e<t.length;e++){t[e].$error&&t.splice(e--,1)}c=!1,h("maxFiles",null,function(t,e,i){return n+i<e}),p.resolve({validFiles:t,invalidFiles:u})}),p.promise},i.imageDimensions=function(t){if(t.$ngfWidth&&t.$ngfHeight){var r=e.defer();return n(function(){r.resolve({width:t.$ngfWidth,height:t.$ngfHeight})}),r.promise}if(t.$ngfDimensionPromise)return t.$ngfDimensionPromise;var o=e.defer();return n(function(){0===t.type.indexOf("image")?i.dataUrl(t).then(function(e){var i=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function r(){var e=i[0].naturalWidth||i[0].clientWidth,n=i[0].naturalHeight||i[0].clientHeight;i.remove(),t.$ngfWidth=e,t.$ngfHeight=n,o.resolve({width:e,height:n})}function s(){i.remove(),o.reject("load error")}i.on("load",r),i.on("error",s);var a=0;!function t(){n(function(){i[0].parentNode&&(i[0].clientWidth?r():a++>10?s():t())},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(i)},function(){o.reject("load error")}):o.reject("not image")}),t.$ngfDimensionPromise=o.promise,t.$ngfDimensionPromise.finally(function(){delete t.$ngfDimensionPromise}),t.$ngfDimensionPromise},i.mediaDuration=function(t){if(t.$ngfDuration){var r=e.defer();return n(function(){r.resolve(t.$ngfDuration)}),r.promise}if(t.$ngfDurationPromise)return t.$ngfDurationPromise;var o=e.defer();return n(function(){0===t.type.indexOf("audio")||0===t.type.indexOf("video")?i.dataUrl(t).then(function(e){var i=angular.element(0===t.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function r(){var e=i[0].duration;t.$ngfDuration=e,i.remove(),o.resolve(e)}function s(){i.remove(),o.reject("load error")}i.on("loadedmetadata",r),i.on("error",s);var a=0;!function t(){n(function(){i[0].parentNode&&(i[0].duration?r():a>10?s():t())},1e3)}(),angular.element(document.body).append(i)},function(){o.reject("load error")}):o.reject("not media")}),t.$ngfDurationPromise=o.promise,t.$ngfDurationPromise.finally(function(){delete t.$ngfDurationPromise}),t.$ngfDurationPromise},i}]),n.service("UploadResize",["UploadValidate","$q",function(t,e){var n=t,i=function(t,i,r,o,s,a,l,c){var u=e.defer(),h=document.createElement("canvas"),d=document.createElement("img");return d.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(d),d.onload=function(){var t=d.width,e=d.height;if(d.parentNode.removeChild(d),null==c||!1!==c(t,e))try{if(a){var f=n.ratioToFloat(a);t/e<f?r=(i=t)/f:i=(r=e)*f}i||(i=t),r||(r=e);var p=function(t,e,n,i,r){var o=r?Math.max(n/t,i/e):Math.min(n/t,i/e);return{width:t*o,height:e*o,marginX:t*o-n,marginY:e*o-i}}(t,e,i,r,l);h.width=Math.min(p.width,i),h.height=Math.min(p.height,r),h.getContext("2d").drawImage(d,Math.min(0,-p.marginX/2),Math.min(0,-p.marginY/2),p.width,p.height),u.resolve(h.toDataURL(s||"image/WebP",o||.934))}catch(t){u.reject(t)}else u.reject("resizeIf")},d.onerror=function(){d.parentNode.removeChild(d),u.reject()},d.src=t,u.promise};return n.dataUrltoBlob=function(t,e,n){for(var i=t.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);var l=new window.Blob([a],{type:r});return l.name=e,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var t=document.createElement("canvas");return window.atob&&t.getContext&&t.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(t){this.$ngfName=t},configurable:!0}),n.resize=function(t,r){if(0!==t.type.indexOf("image"))return n.emptyPromise(t);var o=e.defer();return n.dataUrl(t,!0).then(function(e){i(e,r.width,r.height,r.quality,r.type||t.type,r.ratio,r.centerCrop,r.resizeIf).then(function(i){if("image/jpeg"===t.type&&!1!==r.restoreExif)try{i=n.restoreExif(e,i)}catch(t){setTimeout(function(){throw t},1)}try{var s=n.dataUrltoBlob(i,t.name,t.size);o.resolve(s)}catch(t){o.reject(t)}},function(e){"resizeIf"===e&&o.resolve(t),o.reject(e)})},function(t){o.reject(t)}),o.promise},n}]),function(){function t(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t&&!/Edge\/12./i.test(navigator.userAgent)}n.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(e,n,i,r,o,s){return{restrict:"AEC",require:"?ngModel",link:function(o,a,l,c){!function(e,n,i,r,o,s,a,l,c,u){var h=t(),d=function(t,e,n){return l.attrGetter(t,i,e,n)};d("dropAvailable")&&s(function(){e[d("dropAvailable")]?e[d("dropAvailable")].value=h:e[d("dropAvailable")]=h});if(!h)return void(!0===d("ngfHideOnDropNotAvailable",e)&&n.css("display","none"));function f(){return n.attr("disabled")||d("ngfDropDisabled",e)}null==d("ngfSelect")&&l.registerModelChangeValidator(r,i,e);var p,m=null,g=o(d("ngfStopPropagation")),v=1;n[0].addEventListener("dragover",function(t){if(!f()&&l.shouldUpdateOn("drop",i,e)){if(t.preventDefault(),g(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}s.cancel(m),p||(p="C",function(t,e,n,i){var r=d("ngfDragOverClass",t,{$event:n}),o="dragover";if(angular.isString(r))o=r;else if(r&&(r.delay&&(v=r.delay),r.accept||r.reject)){var s=n.dataTransfer.items;if(null!=s&&s.length)for(var a=r.pattern||d("ngfPattern",t,{$event:n}),c=s.length;c--;){if(!l.validatePattern(s[c],a)){o=r.reject;break}o=r.accept}else o=r.accept}i(o)}(e,0,t,function(i){p=i,n.addClass(p),d("ngfDrag",e,{$isDragging:!0,$class:p,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!f()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),g(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!f()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),g(e)&&t.stopPropagation(),m=s(function(){p&&n.removeClass(p),p=null,d("ngfDrag",e,{$isDragging:!1,$event:t})},v||100))},!1),n[0].addEventListener("drop",function(t){!f()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),g(e)&&t.stopPropagation(),p&&n.removeClass(p),p=null,y(t.dataTransfer,t,"dropUrl"))},!1),n[0].addEventListener("paste",function(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&d("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!f()&&l.shouldUpdateOn("paste",i,e)&&y(t.clipboardData||t.originalEvent.clipboardData,t,"pasteUrl")},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&d("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(t){t.metaKey||t.ctrlKey||t.preventDefault()}));function y(t,n,r){if(t){var o;try{o=t&&t.getData&&t.getData("text/html")}catch(t){}(function(t,n,r,o){var s=l.getValidationAttr(i,e,"maxFiles");null==s&&(s=Number.MAX_VALUE);var c=l.getValidationAttr(i,e,"maxTotalSize");null==c&&(c=Number.MAX_VALUE);var h=d("ngfIncludeDir",e),f=[],p=0;function m(t,e){var n=u.defer();if(null!=t)if(t.isDirectory){var i=[l.emptyPromise()];if(h){var r={type:"directory"};r.name=r.path=(e||"")+t.name,f.push(r)}var o=t.createReader(),a=[],d=function(){o.readEntries(function(r){try{r.length?(a=a.concat(Array.prototype.slice.call(r||[],0)),d()):(angular.forEach(a.slice(0),function(n){f.length<=s&&p<=c&&i.push(m(n,(e||"")+t.name+"/"))}),u.all(i).then(function(){n.resolve()},function(t){n.reject(t)}))}catch(t){n.reject(t)}},function(t){n.reject(t)})};d()}else t.file(function(t){try{t.path=(e||"")+t.name,h&&(t=l.rename(t,t.path)),f.push(t),p+=t.size,n.resolve()}catch(t){n.reject(t)}},function(t){n.reject(t)});return n.promise}var g=[l.emptyPromise()];if(t&&t.length>0&&"file:"!==a.location.protocol)for(var v=0;v<t.length;v++){if(t[v].webkitGetAsEntry&&t[v].webkitGetAsEntry()&&t[v].webkitGetAsEntry().isDirectory){var y=t[v].webkitGetAsEntry();if(y.isDirectory&&!r)continue;null!=y&&g.push(m(y))}else{var b=t[v].getAsFile();null!=b&&(f.push(b),p+=b.size)}if(f.length>s||p>c||!o&&f.length>0)break}else if(null!=n)for(var _=0;_<n.length;_++){var w=n.item(_);if((w.type||w.size>0)&&(f.push(w),p+=w.size),f.length>s||p>c||!o&&f.length>0)break}var S=u.defer();return u.all(g).then(function(){if(o||h||!f.length)S.resolve(f);else{for(var t=0;f[t]&&"directory"===f[t].type;)t++;S.resolve([f[t]])}},function(t){S.reject(t)}),S.promise})(t.items,t.files,!1!==d("ngfAllowDir",e),d("multiple")||d("ngfMultiple",e)).then(function(t){t.length?b(t,n):function(t,n){if(!l.shouldUpdateOn(t,i,e)||"string"!=typeof n)return l.rejectPromise([]);var r=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(t,e,n){r.push(n)});var o=[],s=[];if(r.length){angular.forEach(r,function(t){o.push(l.urlToBlob(t).then(function(t){s.push(t)}))});var a=u.defer();return u.all(o).then(function(){a.resolve(s)},function(t){a.reject(t)}),a.promise}return l.emptyPromise()}(r,o).then(function(t){b(t,n)})})}}function b(t,n){l.updateModel(r,i,e,d("ngfChange")||d("ngfDrop"),t,n)}}(o,a,l,c,e,n,i,r,0,s)}}}]),n.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),n.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,i){return function(r,o,s){if(t()){var a=e(i.attrGetter("ngfDropAvailable",s));n(function(){a(r),a.assign&&a.assign(r,!0)})}}}])}(),n.service("UploadExif",["UploadResize","$q",function(t,e){var n=t;return n.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&n.isResizeSupported()},n.readOrientation=function(t){var n=e.defer(),i=new FileReader,r=t.slice?t.slice(0,65536):t;return i.readAsArrayBuffer(r),i.onerror=function(t){return n.reject(t)},i.onload=function(t){var e={orientation:1},i=new DataView(this.result);if(65496!==i.getUint16(0,!1))return n.resolve(e);for(var r=i.byteLength,o=2;o<r;){var s=i.getUint16(o,!1);if(o+=2,65505===s){if(1165519206!==i.getUint32(o+=2,!1))return n.resolve(e);var a=18761===i.getUint16(o+=6,!1);o+=i.getUint32(o+4,a);var l=i.getUint16(o,a);o+=2;for(var c=0;c<l;c++)if(274===i.getUint16(o+12*c,a)){var u=i.getUint16(o+12*c+8,a);return u>=2&&u<=8&&(i.setUint16(o+12*c+8,1,a),e.fixedArrayBuffer=t.target.result),e.orientation=u,n.resolve(e)}}else{if(65280!=(65280&s))break;o+=i.getUint16(o,!1)}}return n.resolve(e)},n.promise},n.applyExifRotation=function(t){if(0!==t.type.indexOf("image/jpeg"))return n.emptyPromise(t);var i=e.defer();return n.readOrientation(t).then(function(e){if(e.orientation<2||e.orientation>8)return i.resolve(t);n.dataUrl(t,!0).then(function(r){var o=document.createElement("canvas"),s=document.createElement("img");s.onload=function(){try{o.width=e.orientation>4?s.height:s.width,o.height=e.orientation>4?s.width:s.height;var r=o.getContext("2d");!function(t,e,n,i){switch(e){case 2:return t.transform(-1,0,0,1,n,0);case 3:return t.transform(-1,0,0,-1,n,i);case 4:return t.transform(1,0,0,-1,0,i);case 5:return t.transform(0,1,1,0,0,0);case 6:return t.transform(0,1,-1,0,i,0);case 7:return t.transform(0,-1,-1,0,i,n);case 8:t.transform(0,-1,1,0,0,n)}}(r,e.orientation,s.width,s.height),r.drawImage(s,0,0);var a=o.toDataURL(t.type||"image/WebP",.934);a=n.restoreExif(function(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)}(e.fixedArrayBuffer),a);var l=n.dataUrltoBlob(a,t.name);i.resolve(l)}catch(t){return i.reject(t)}},s.onerror=function(){i.reject()},s.src=r},function(t){i.reject(t)})},function(t){i.reject(t)}),i.promise},n.restoreExif=function(t,e){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(t){var e,n,i,r,o,s="",a="",l="",c=0;do{i=(e=t[c++])>>2,r=(3&e)<<4|(n=t[c++])>>4,o=(15&n)<<2|(a=t[c++])>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),e=n=a="",i=r=o=l=""}while(c<t.length);return s},restore:function(t,e){t.match("data:image/jpeg;base64,")&&(t=t.replace("data:image/jpeg;base64,",""));var n=this.decode64(t),i=this.slice2Segments(n),r=this.exifManipulation(e,i);return"data:image/jpeg;base64,"+this.encode64(r)},exifManipulation:function(t,e){var n=this.getExifArray(e),i=this.insertExif(t,n);return new Uint8Array(i)},getExifArray:function(t){for(var e,n=0;n<t.length;n++)if(255===(e=t[n])[0]&225===e[1])return e;return[]},insertExif:function(t,e){var n=t.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r),a=o;return a=(a=a.concat(e)).concat(s)},slice2Segments:function(t){for(var e=0,n=[];!(255===t[e]&218===t[e+1]);){if(255===t[e]&216===t[e+1])e+=2;else{var i=e+(256*t[e+2]+t[e+3])+2,r=t.slice(e,i);n.push(r),e=i}if(e>t.length)break}return n},decode64:function(t){var e,n,i,r,o="",s="",a=0,l=[];/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=this.KEY_STR.indexOf(t.charAt(a++))<<2|(i=this.KEY_STR.indexOf(t.charAt(a++)))>>4,n=(15&i)<<4|(r=this.KEY_STR.indexOf(t.charAt(a++)))>>2,o=(3&r)<<6|(s=this.KEY_STR.indexOf(t.charAt(a++))),l.push(e),64!==r&&l.push(n),64!==s&&l.push(o),e=n=o="",i=r=s=""}while(a<t.length);return l}};return n.restore(t,e)},n}])}).call(this,n(1))},function(t,e,n){
/**
 * highcharts-ng
 * @version v0.0.13 - 2016-10-04
 * @link https://github.com/pablojim/highcharts-ng
 * @author Barry Fitzgerald <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
t.exports===e&&(t.exports="highcharts-ng"),function(){"use strict";function t(t,e,n){void 0===n&&(n=0),n<0&&(n+=t.length),n<0&&(n=0);for(var i=t.length;n<i;n++)if(n in t&&t[n]===e)return n;return-1}function e(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return n.apply(this,t),i?i.apply(this,t):void 0}}function n(t,e){if(angular.isArray(e)){t=angular.isArray(t)?t:[];for(var i=0;i<e.length;i++)t[i]=n(t[i]||{},e[i])}else if(angular.isObject(e))for(var r in t=angular.isObject(t)?t:{},e)t[r]=n(t[r]||{},e[r]);else t=e;return t}angular.module("highcharts-ng",[]).factory("highchartsNG",["$q","$window",function(t,e){var n=t.when(e.Highcharts);function i(){return n}return{getHighcharts:i,ready:function(t,e){i().then(function(){t.call(e)})}}}]).directive("highchart",["highchartsNG","$timeout",function(i,r){var o=0,s=function(t){var e=!1;return angular.forEach(t,function(t){angular.isDefined(t.id)||(t.id="series-"+o++,e=!0)}),e},a=["xAxis","yAxis"],l={stock:"StockChart",map:"Map",chart:"Chart"},c=function(t,i,o){var s={},l={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1},xAxis:{events:{}},yAxis:{events:{}}};return(s=o.options?n(l,o.options):l).chart.renderTo=i[0],angular.forEach(a,function(i){angular.isDefined(o[i])&&(s[i]=n(s[i]||{},o[i]),(angular.isDefined(o[i].currentMin)||angular.isDefined(o[i].currentMax))&&(e(s.chart.events,"selection",function(e){var n=this;e[i]?t.$apply(function(){t.config[i].currentMin=e[i][0].min,t.config[i].currentMax=e[i][0].max}):t.$apply(function(){t.config[i].currentMin=n[i][0].dataMin,t.config[i].currentMax=n[i][0].dataMax})}),e(s.chart.events,"addSeries",function(e){t.config[i].currentMin=this[i][0].min||t.config[i].currentMin,t.config[i].currentMax=this[i][0].max||t.config[i].currentMax}),e(s[i].events,"setExtremes",function(e){e.trigger&&"zoom"!==e.trigger&&r(function(){t.config[i].currentMin=e.min,t.config[i].currentMax=e.max,t.config[i].min=e.min,t.config[i].max=e.max},0)})))}),o.title&&(s.title=o.title),o.subtitle&&(s.subtitle=o.subtitle),o.credits&&(s.credits=o.credits),o.size&&(o.size.width&&(s.chart.width=o.size.width),o.size.height&&(s.chart.height=o.size.height)),s},u=function(t,e){var n=t.getExtremes();e.currentMin===n.dataMin&&e.currentMax===n.dataMax||(t.setExtremes?t.setExtremes(e.currentMin,e.currentMax,!1):t.detachedsetExtremes(e.currentMin,e.currentMax,!1))},h=function(t,e,n){(e.currentMin||e.currentMax)&&t[n][0].setExtremes(e.currentMin,e.currentMax,!0)},d=function(t){return angular.extend(n({},t),{data:null,visible:null})},f=function(t){return void 0===t.config?"Chart":l[(""+t.config.chartType).toLowerCase()]||(t.config.useHighStocks?"StockChart":"Chart")};return{restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"=",disableDataWatch:"="},link:function(e,n,o){i.getHighcharts().then(function(i){!function(e,n,i,o){var l={},p=!1,m=function(e,i){var r,o=[];if(e){if(s(e)&&!n.disableDataWatch)return!1;if(angular.forEach(e,function(t,e){o.push(t.id);var n=p.get(t.id);if(n)if(angular.equals(l[t.id],d(t)))if(void 0!==t.visible&&n.visible!==t.visible&&n.setVisible(t.visible,!1),e<i.length){var r=i[e],s=angular.copy(r),a=t.data[t.data.length-1];s.data.push(a),angular.equals(s,t)?n.addPoint(a,!1):(s.data.shift(),angular.equals(s,t)?n.addPoint(a,!1,!0):n.setData(angular.copy(t.data),!1))}else n.setData(angular.copy(t.data),!1);else n.update(angular.copy(t),!1);else p.addSeries(angular.copy(t),!1);l[t.id]=d(t)}),n.config.noData){var a=!1;for(r=0;r<e.length;r++)if(e[r].data&&e[r].data.length>0){a=!0;break}a?p.hideLoading():p.showLoading(n.config.noData)}}for(r=p.series.length-1;r>=0;r--){var c=p.series[r];"highcharts-navigator-series"!==c.options.id&&t(o,c.options.id)<0&&c.remove(!1)}return!0},g=function(){p&&p.destroy(),l={};var t=n.config||{},r=c(n,i,t),o=t.func||void 0,s=f(n);p=new e[s](r,o);for(var u=0;u<a.length;u++)t[a[u]]&&h(p,t[a[u]],a[u]);t.loading&&p.showLoading(),t.getHighcharts=function(){return p}};g(),n.disableDataWatch?n.$watchCollection("config.series",function(t,e){m(t),p.redraw()}):n.$watch("config.series",function(t,e){m(t,e)&&p.redraw()},!0),n.$watch("config.title",function(t){p.setTitle(t,!0)},!0),n.$watch("config.subtitle",function(t){p.setTitle(!0,t)},!0),n.$watch("config.loading",function(t){t?p.showLoading(!0===t?null:t):p.hideLoading()}),n.$watch("config.noData",function(t){n.config&&n.config.loading&&p.showLoading(t)},!0),n.$watch("config.credits.enabled",function(t){t?p.credits.show():p.credits&&p.credits.hide()}),n.$watch(f,function(t,e){t!==e&&g()}),angular.forEach(a,function(t){n.$watch("config."+t,function(e){if(e){if(angular.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];n<p[t].length&&(p[t][n].update(i,!1),u(p[t][n],angular.copy(i)))}else p[t][0].update(e,!1),u(p[t][0],angular.copy(e));p.redraw()}},!0)}),n.$watch("config.options",function(t,e,n){t!==e&&(g(),m(n.config.series),p.redraw())},!0),n.$watch("config.size",function(t,e){t!==e&&t&&p.setSize(t.width||p.chartWidth,t.height||p.chartHeight)},!0),n.$on("highchartsng.reflow",function(){p.reflow()}),n.$on("$destroy",function(){if(p){try{p.destroy()}catch(t){}r(function(){i.remove()},0)}})}(i,e,n)})}}}])}()},function(t,e,n){n(16),n(283),n(285),n(287),t.exports="ngMaterial"},function(t,e,n){n(284),t.exports="ngAnimate"},function(t,e){
/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";var n,i,r,o,s=1,a="-add",l="-remove",c="ng-",u="ng-animate",h="$$ngAnimateChildren";void 0===t.ontransitionend&&void 0!==t.onwebkittransitionend?("-webkit-",n="WebkitTransition",i="webkitTransitionEnd transitionend"):(n="transition",i="transitionend"),void 0===t.onanimationend&&void 0!==t.onwebkitanimationend?("-webkit-",r="WebkitAnimation",o="webkitAnimationEnd animationend"):(r="animation",o="animationend");var d="Duration",f="TimingFunction",p="PlayState",m=r+"Delay",g=r+d,v=n+"Delay",y=n+d,b=e.$$minErr("ng");function _(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function w(t,e){return t||e?t?e?(J(t)&&(t=t.join(" ")),J(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function S(t,e,n){var i="";return t=J(t)?t:t&&nt(t)&&t.length?t.split(/\s+/):[],K(t,function(t,r){t&&t.length>0&&(i+=r>0?" ":"",i+=n?e+t:t+e)}),i}function x(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===s)return n}}function C(t){return function(e,n){n.addClass&&(!function(t,e,n){K(e,function(e){t.addClass(e,n)})}(t,e,n.addClass),n.addClass=null),n.removeClass&&(!function(t,e,n){K(e,function(e){t.removeClass(e,n)})}(t,e,n.removeClass),n.removeClass=null)}}function k(t){if(!(t=t||{}).$$prepared){var e=t.domOperation||ot;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=ot},t.$$prepared=!0}return t}function T(t,e){M(t,e),E(t,e)}function M(t,e){e.from&&(t.css(e.from),e.from=null)}function E(t,e){e.to&&(t.css(e.to),e.to=null)}function A(t,e,n){var i=e.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),s=(i.removeClass||"")+" "+(r.removeClass||""),c=function(t,e,n){var i={};t=o(t),e=o(e),K(e,function(t,e){i[e]=1}),n=o(n),K(n,function(t,e){i[e]=1===i[e]?null:-1});var r={addClass:"",removeClass:""};function o(t){nt(t)&&(t=t.split(" "));var e={};return K(t,function(t){t.length&&(e[t]=!0)}),e}return K(i,function(e,n){var i,o;1===e?(i="addClass",o=!t[n]||t[n+l]):-1===e&&(i="removeClass",o=t[n]||t[n+a]),o&&(r[i].length&&(r[i]+=" "),r[i]+=n)}),r}(t.attr("class"),o,s);r.preparationClasses&&(i.preparationClasses=P(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var u=i.domOperation!==ot?i.domOperation:null;return X(i,r),u&&(i.domOperation=u),c.addClass?i.addClass=c.addClass:i.addClass=null,c.removeClass?i.removeClass=c.removeClass:i.removeClass=null,e.addClass=i.addClass,e.removeClass=i.removeClass,i}function I(t){return t instanceof rt?t[0]:t}function $(t,e){var n=e?"-"+e+"s":"";return L(t,[v,n]),[v,n]}function D(t,e){var n=e?"paused":"",i=r+p;return L(t,[i,n]),[i,n]}function L(t,e){var n=e[0],i=e[1];t.style[n]=i}function P(t,e){return t?e?t+" "+e:t:e}var O=["$interpolate",function(t){return{link:function(e,n,i){var r=i.ngAnimateChildren;function o(t){t="on"===t||"true"===t,n.data(h,t)}nt(r)&&0===r.length?n.data(h,!0):(o(t(r)(e)),i.$observe("ngAnimateChildren",o))}}}],N="$$animateCss",j=1e3,R=3,B=1.5,F={transitionDuration:y,transitionDelay:v,transitionProperty:n+"Property",animationDuration:g,animationDelay:m,animationIterationCount:r+"IterationCount"},Y={transitionDuration:y,transitionDelay:v,animationDuration:g,animationDelay:m};function H(t,e){return[e?m:v,t+"s"]}function W(t,e,n){var i=Object.create(null),r=t.getComputedStyle(e)||{};return K(n,function(t,e){var n,o,s=r[t];if(s){var a=s.charAt(0);("-"===a||"+"===a||a>=0)&&(n=0,o=s.split(/\s*,\s*/),K(o,function(t){"s"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,n=n?Math.max(t,n):t}),s=n),0===s&&(s=null),i[e]=s}}),i}function z(t){return 0===t||null!=t}function U(t,e){var i=n,r=t+"s";return e?i+=d:r+=" linear all",[i,r]}function V(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){var n=t[e];return n?n.total:0},get:function(e){var n=t[e];return n&&n.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function G(t,e,n){K(n,function(n){t[n]=Z(t[n])?t[n]:e.style.getPropertyValue(n)})}var q,X,K,J,Z,Q,tt,et,nt,it,rt,ot,st=["$animateProvider",function(t){var e=V(),s=V();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(t,u,h,d,p,m,v,y){var b=C(u),_=0;function w(t,e){var n="$$ngAnimateParentKey",i=t.parentNode;return(i[n]||(i[n]=++_))+"-"+t.getAttribute("class")+"-"+e}var x=[];function A(t){x.push(t),v.waitUntilQuiet(function(){e.flush(),s.flush();for(var t=p(),n=0;n<x.length;n++)x[n](t);x.length=0})}function P(n,i,r){var o=function(n,i,r,o){var s=e.get(r);return s||"infinite"===(s=W(t,n,o)).animationIterationCount&&(s.animationIterationCount=1),e.put(r,s),s}(n,0,r,F),s=o.animationDelay,a=o.transitionDelay;return o.maxDelay=s&&a?Math.max(s,a):s||a,o.maxDuration=Math.max(o.animationDuration*o.animationIterationCount,o.transitionDuration),o}return function(p,v){var _=v||{};_.$$prepared||(_=k(q(_)));var x={},C=I(p);if(!C||!C.parentNode||!y.enabled())return Lt();var O,F,V,X,Z,Q,tt,et,nt,it,rt=[],st=p.attr("class"),at=function(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}(_),lt=[];if(0===_.duration||!m.animations&&!m.transitions)return Lt();var ct=_.event&&J(_.event)?_.event.join(" "):_.event,ut="",ht="";ct&&_.structural?ut=S(ct,c,!0):ct&&(ut=ct),_.addClass&&(ht+=S(_.addClass,a)),_.removeClass&&(ht.length&&(ht+=" "),ht+=S(_.removeClass,l)),_.applyClassesEarly&&ht.length&&b(p,_);var dt,ft,pt,mt=[ut,ht].join(" ").trim(),gt=st+" "+mt,vt=S(mt,"-active"),yt=at.to&&Object.keys(at.to).length>0;if(!((_.keyframeStyle||"").length>0)&&!yt&&!mt)return Lt();if(_.stagger>0){var bt=parseFloat(_.stagger);ft={transitionDelay:bt,animationDelay:bt,transitionDuration:0,animationDuration:0}}else dt=w(C,gt),ft=function(n,i,r,o){var a;if(e.count(r)>0&&!(a=s.get(r))){var l=S(i,"-stagger");u.addClass(n,l),(a=W(t,n,o)).animationDuration=Math.max(a.animationDuration,0),a.transitionDuration=Math.max(a.transitionDuration,0),u.removeClass(n,l),s.put(r,a)}return a||{}}(C,mt,dt,Y);if(_.$$skipPreparationClasses||u.addClass(p,mt),_.transitionStyle){var _t=[n,_.transitionStyle];L(C,_t),rt.push(_t)}if(_.duration>=0){pt=C.style[n].length>0;var wt=U(_.duration,pt);L(C,wt),rt.push(wt)}if(_.keyframeStyle){var St=[r,_.keyframeStyle];L(C,St),rt.push(St)}var xt=ft?_.staggerIndex>=0?_.staggerIndex:e.count(dt):0,Ct=0===xt;Ct&&!_.skipBlocking&&$(C,9999);var kt=P(C,0,dt),Tt=kt.maxDelay;Q=Math.max(Tt,0),et=kt.maxDuration;var Mt,Et={};if(Et.hasTransitions=kt.transitionDuration>0,Et.hasAnimations=kt.animationDuration>0,Et.hasTransitionAll=Et.hasTransitions&&"all"===kt.transitionProperty,Et.applyTransitionDuration=yt&&(Et.hasTransitions&&!Et.hasTransitionAll||Et.hasAnimations&&!Et.hasTransitions),Et.applyAnimationDuration=_.duration&&Et.hasAnimations,Et.applyTransitionDelay=z(_.delay)&&(Et.applyTransitionDuration||Et.hasTransitions),Et.applyAnimationDelay=z(_.delay)&&Et.hasAnimations,Et.recalculateTimingStyles=ht.length>0,(Et.applyTransitionDuration||Et.applyAnimationDuration)&&(et=_.duration?parseFloat(_.duration):et,Et.applyTransitionDuration&&(Et.hasTransitions=!0,kt.transitionDuration=et,pt=C.style[n+"Property"].length>0,rt.push(U(et,pt))),Et.applyAnimationDuration&&(Et.hasAnimations=!0,kt.animationDuration=et,rt.push([g,et+"s"]))),0===et&&!Et.recalculateTimingStyles)return Lt();null!=_.delay&&("boolean"!=typeof _.delay&&(Mt=parseFloat(_.delay),Q=Math.max(Mt,0)),Et.applyTransitionDelay&&rt.push(H(Mt)),Et.applyAnimationDelay&&rt.push(H(Mt,!0)));return null==_.duration&&kt.transitionDuration>0&&(Et.recalculateTimingStyles=Et.recalculateTimingStyles||Ct),tt=Q*j,nt=et*j,_.skipBlocking||(Et.blockTransition=kt.transitionDuration>0,Et.blockKeyframeAnimation=kt.animationDuration>0&&ft.animationDelay>0&&0===ft.animationDuration),_.from&&(_.cleanupStyles&&G(x,C,Object.keys(_.from)),M(p,_)),Et.blockTransition||Et.blockKeyframeAnimation?Dt(et):_.skipBlocking||$(C,!1),{$$willAnimate:!0,end:At,start:function(){if(!O)return X=new h(Z={end:At,cancel:It,resume:null,pause:null}),A(Ot),X}};function At(){$t()}function It(){$t(!0)}function $t(t){if(!(O||V&&F)){O=!0,F=!1,_.$$skipPreparationClasses||u.removeClass(p,mt),u.removeClass(p,vt),D(C,!1),$(C,!1),K(rt,function(t){C.style[t[0]]=""}),b(p,_),T(p,_),Object.keys(x).length&&K(x,function(t,e){t?C.style.setProperty(e,t):C.style.removeProperty(e)}),_.onDone&&_.onDone(),lt&&lt.length&&p.off(lt.join(" "),Pt);var e=p.data(N);e&&(d.cancel(e[0].timer),p.removeData(N)),X&&X.complete(!t)}}function Dt(t){Et.blockTransition&&$(C,t),Et.blockKeyframeAnimation&&D(C,!!t)}function Lt(){return X=new h({end:At,cancel:It}),A(ot),$t(),{$$willAnimate:!1,start:function(){return X},end:At}}function Pt(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||Date.now(),i=parseFloat(e.elapsedTime.toFixed(R));Math.max(n-it,0)>=tt&&i>=et&&(V=!0,$t())}function Ot(){if(!O)if(C.parentNode){var t=function(t){if(V)F&&t&&(F=!1,$t());else if(F=!t,kt.animationDuration){var e=D(C,F);F?rt.push(e):(i=e,r=(n=rt).indexOf(i),i>=0&&n.splice(r,1))}var n,i,r},e=xt>0&&(kt.transitionDuration&&0===ft.transitionDuration||kt.animationDuration&&0===ft.animationDuration)&&Math.max(ft.animationDelay,ft.transitionDelay);e?d(s,Math.floor(e*xt*j),!1):s(),Z.resume=function(){t(!0)},Z.pause=function(){t(!1)}}else $t();function s(){if(!O){if(Dt(!1),K(rt,function(t){var e=t[0],n=t[1];C.style[e]=n}),b(p,_),u.addClass(p,vt),Et.recalculateTimingStyles){if(gt=C.className+" "+mt,dt=w(C,gt),kt=P(C,0,dt),Tt=kt.maxDelay,Q=Math.max(Tt,0),0===(et=kt.maxDuration))return void $t();Et.hasTransitions=kt.transitionDuration>0,Et.hasAnimations=kt.animationDuration>0}if(Et.applyAnimationDelay&&(Tt="boolean"!=typeof _.delay&&z(_.delay)?parseFloat(_.delay):Tt,Q=Math.max(Tt,0),kt.animationDelay=Tt,Mt=H(Tt,!0),rt.push(Mt),C.style[Mt[0]]=Mt[1]),tt=Q*j,nt=et*j,_.easing){var t,e=_.easing;Et.hasTransitions&&(t=n+f,rt.push([t,e]),C.style[t]=e),Et.hasAnimations&&(t=r+f,rt.push([t,e]),C.style[t]=e)}kt.transitionDuration&&lt.push(i),kt.animationDuration&&lt.push(o),it=Date.now();var s=tt+B*nt,l=it+s,c=p.data(N)||[],h=!0;if(c.length){var m=c[0];(h=l>m.expectedEndTime)?d.cancel(m.timer):c.push($t)}if(h){var g=d(a,s,!1);c[0]={timer:g,expectedEndTime:l},c.push($t),p.data(N,c)}lt.length&&p.on(lt.join(" "),Pt),_.to&&(_.cleanupStyles&&G(x,C,Object.keys(_.to)),E(p,_))}}function a(){var t=p.data(N);if(t){for(var e=1;e<t.length;e++)t[e]();p.removeData(N)}}}}}]}],at=["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver");var e="ng-animate-shim",n="ng-anchor",i="ng-anchor-out",r="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,o,s,a,l,c,u){if(!l.animations&&!l.transitions)return ot;var h,d=u[0].body,f=I(a),p=rt((h=f).parentNode&&11===h.parentNode.nodeType||d.contains(f)?f:d);return function(o){return o.from&&o.to?function(o,a,l,c){var u=v(o),h=v(a),f=[];if(K(c,function(o){var a=function(o,a,l){var c=rt(I(a).cloneNode(!0)),u=m(_(c));a.addClass(e),l.addClass(e),c.addClass(n),p.append(c);var h,f=(v=t(c,{addClass:i,delay:!0,from:b(a)}),v.$$willAnimate?v:null);var v;if(!f&&!(h=w()))return S();var y=f||h;return{start:function(){var t,e=y.start();return e.done(function(){if(e=null,!h&&(h=w()))return(e=h.start()).done(function(){e=null,S(),t.complete()}),e;S(),t.complete()}),t=new s({end:n,cancel:n});function n(){e&&e.end()}}};function b(t){var e={},n=I(t).getBoundingClientRect();return K(["width","height","top","left"],function(t){var i=n[t];switch(t){case"top":i+=d.scrollTop;break;case"left":i+=d.scrollLeft}e[t]=Math.floor(i)+"px"}),e}function _(t){return t.attr("class")||""}function w(){var e=m(_(l)),n=g(e,u),o=g(u,e),s=t(c,{to:b(l),addClass:r+" "+n,removeClass:i+" "+o,delay:!0});return s.$$willAnimate?s:null}function S(){c.remove(),a.removeClass(e),l.removeClass(e)}}(0,o.out,o.in);a&&f.push(a)}),!u&&!h&&0===f.length)return;return{start:function(){var t=[];u&&t.push(u.start()),h&&t.push(h.start()),K(f,function(e){t.push(e.start())});var e=new s({end:n,cancel:n});return s.all(t,function(t){e.complete(t)}),e;function n(){K(t,function(t){t.end()})}}}}(o.from,o.to,o.classes,o.anchors):v(o)};function m(t){return t.replace(/\bng-\S+\b/g,"")}function g(t,e){return nt(t)&&(t=t.split(" ")),nt(e)&&(e=e.split(" ")),t.filter(function(t){return-1===e.indexOf(t)}).join(" ")}function v(e){var n=e.element,i=e.options||{};e.structural&&(i.event=e.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===e.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=P(i.event,i.preparationClasses));var r=t(n,i);return r.$$willAnimate?r:null}}]}],lt=["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,i){var r=C(i);return function(t,e,i,s){var a=!1;3===arguments.length&&et(i)&&(s=i,i=null),s=k(s),i||(i=t.attr("class")||"",s.addClass&&(i+=" "+s.addClass),s.removeClass&&(i+=" "+s.removeClass));var l,c,u,h,d,f=s.addClass,p=s.removeClass,m=o(i);m.length&&("leave"===e?(h="leave",u="afterLeave"):(h="before"+e.charAt(0).toUpperCase()+e.substr(1),u=e),"enter"!==e&&"move"!==e&&(l=_(t,e,s,m,h)),c=_(t,e,s,m,u));if(l||c)return{$$willAnimate:!0,end:function(){return d?d.end():(v(),(d=new n).complete(!0)),d},start:function(){if(d)return d;var t;d=new n;var e=[];return l&&e.push(function(e){t=l(e)}),e.length?e.push(function(t){g(),t(!0)}):g(),c&&e.push(function(e){t=c(e)}),d.setHost({end:function(){r()},cancel:function(){r(!0)}}),n.chain(e,i),d;function i(t){v(),d.complete(t)}function r(e){a||((t||ot)(e),i(e))}}};function g(){s.domOperation(),r(t,s)}function v(){a=!0,g(),T(t,s)}function y(t,e,i,r,o){var s;switch(i){case"animate":s=[e,r.from,r.to,o];break;case"setClass":s=[e,f,p,o];break;case"addClass":s=[e,f,o];break;case"removeClass":s=[e,p,o];break;default:s=[e,o]}s.push(r);var a=t.apply(t,s);if(a)if(tt(a.start)&&(a=a.start()),a instanceof n)a.done(o);else if(tt(a))return a;return ot}function b(t,e,i,r,o){var s=[];return K(r,function(r){var a=r[o];a&&s.push(function(){var r,o,s=!1,l=function(t){s||(s=!0,(o||ot)(t),r.complete(!t))};return r=new n({end:function(){l()},cancel:function(){l(!0)}}),o=y(a,t,e,i,function(t){l(!1===t)}),r})}),s}function _(t,e,i,r,o){var s,a,l=b(t,e,i,r,o);0===l.length&&("beforeSetClass"===o?(s=b(t,"removeClass",i,r,"beforeRemoveClass"),a=b(t,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(s=b(t,"removeClass",i,r,"removeClass"),a=b(t,"addClass",i,r,"addClass")),s&&(l=l.concat(s)),a&&(l=l.concat(a)));if(0!==l.length)return function(t){var e=[];return l.length&&K(l,function(t){e.push(t())}),e.length?n.all(e,t):t(),function(t){K(e,function(e){t?e.cancel():e.end()})}}}};function o(n){n=J(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var s=n[o],a=t.$$registeredAnimations[s];a&&!r[s]&&(i.push(e.get(a)),r[s]=!0)}return i}}]}],ct=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){return function(t){if(t.from&&t.to){var i=n(t.from),r=n(t.to);if(!i&&!r)return;return{start:function(){var t=[];i&&t.push(i.start()),r&&t.push(r.start()),e.all(t,function(t){n.complete(t)});var n=new e({end:o(),cancel:o()});return n;function o(){return function(){K(t,function(t){t.end()})}}}}}return n(t)};function n(e){var n=e.element,i=e.event,r=e.options,o=e.classes;return t(n,i,o,r)}}]}],ut="data-ng-animate",ht="$ngAnimatePin",dt=["$animateProvider",function(e){var n=1,i=2,r=" ",o=this.rules={skip:[],cancel:[],join:[]};function u(t,e){if(t&&e){var n=function(t){if(!t)return null;var e=t.split(r),n=Object.create(null);return K(e,function(t){n[t]=!0}),n}(e);return t.split(r).some(function(t){return n[t]})}}function d(t,e,n,i){return o[t].some(function(t){return t(e,n,i)})}function f(t,e){var n=(t.addClass||"").length>0,i=(t.removeClass||"").length>0;return e?n&&i:n||i}o.join.push(function(t,e,n){return!e.structural&&f(e)}),o.skip.push(function(t,e,n){return!e.structural&&!f(e)}),o.skip.push(function(t,e,n){return"leave"===n.event&&e.structural}),o.skip.push(function(t,e,n){return n.structural&&n.state===i&&!e.structural}),o.cancel.push(function(t,e,n){return n.structural&&e.structural}),o.cancel.push(function(t,e,n){return n.state===i&&e.structural}),o.cancel.push(function(t,e,n){if(n.structural)return!1;var i=e.addClass,r=e.removeClass,o=n.addClass,s=n.removeClass;return!(it(i)&&it(r)||it(o)&&it(s))&&(u(i,s)||u(r,o))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(r,o,u,p,m,g,v,y,b,w){var M=new m,E=new m,$=null;var D=o.$watch(function(){return 0===y.totalPendingRequests},function(t){t&&(D(),o.$$postDigest(function(){o.$$postDigest(function(){null===$&&($=!0)})}))}),L=Object.create(null),O=e.classNameFilter(),N=O?function(t){return O.test(t)}:function(){return!0},j=C(b);function R(t,e){return A(t,e,{})}var B=t.Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))};function F(t,e,n){var i=x(e);return t.filter(function(t){return!(t.node===i&&(!n||t.callback===n))})}function Y(t,e){"close"!==t||e[0].parentNode||H.off(e)}var H={on:function(t,e,n){var i=x(e);L[t]=L[t]||[],L[t].push({node:i,callback:n}),rt(e).on("$destroy",function(){M.get(i)||H.off(t,e,n)})},off:function(t,e,n){if(1!==arguments.length||nt(arguments[0])){var i=L[t];i&&(L[t]=1===arguments.length?null:F(i,e,n))}else for(var r in e=arguments[0],L)L[r]=F(L[r],e)},pin:function(t,e){_(Q(t),"element","not an element"),_(Q(e),"parentElement","not an element"),t.data(ht,e)},push:function(t,e,m,y){return(m=m||{}).domOperation=y,function(t,e,m){var y,b,_=q(m);(t=function(t){if(t instanceof rt)switch(t.length){case 0:return t;case 1:if(t[0].nodeType===s)return t;break;default:return rt(x(t))}if(t.nodeType===s)return rt(t)}(t))&&(y=I(t),b=t.parent());_=k(_);var w=new v,C=(D=!1,function(t){D?t():o.$$postDigest(function(){D=!0,t()})});var D;J(_.addClass)&&(_.addClass=_.addClass.join(" "));_.addClass&&!nt(_.addClass)&&(_.addClass=null);J(_.removeClass)&&(_.removeClass=_.removeClass.join(" "));_.removeClass&&!nt(_.removeClass)&&(_.removeClass=null);_.from&&!et(_.from)&&(_.from=null);_.to&&!et(_.to)&&(_.to=null);if(!y)return at(),w;var O=[y.className,_.addClass,_.removeClass].join(" ");if(!N(O))return at(),w;var F=["enter","move","leave"].indexOf(e)>=0,H=p[0].hidden,V=!$||H||E.get(y),G=!V&&M.get(y)||{},X=!!G.state;V||X&&G.state===n||(V=!function(t,e,n){var i,r=rt(p[0].body),o=z(t,r)||"HTML"===t[0].nodeName,a=z(t,u),l=!1,c=E.get(I(t)),d=rt.data(t[0],ht);d&&(e=d);e=I(e);for(;e&&(a||(a=z(e,u)),e.nodeType===s);){var f=M.get(e)||{};if(!l){var m=E.get(e);if(!0===m&&!1!==c){c=!0;break}!1===m&&(c=!1),l=f.structural}if(it(i)||!0===i){var g=rt.data(e,h);Z(g)&&(i=g)}if(l&&!1===i)break;if(o||(o=z(e,r)),o&&a)break;e=a||!(d=rt.data(e,ht))?e.parentNode:I(d)}return(!l||i)&&!0!==c&&a&&o}(t,b));if(V)return H&&st(w,e,"start"),at(),H&&st(w,e,"close"),w;F&&function(t){var e=I(t).querySelectorAll("["+ut+"]");K(e,function(t){var e=parseInt(t.getAttribute(ut),10),r=M.get(t);if(r)switch(e){case i:r.runner.end();case n:M.remove(t)}})}(t);var Q={structural:F,element:t,event:e,addClass:_.addClass,removeClass:_.removeClass,close:at,options:_,runner:w};if(X){if(d("skip",t,Q,G))return G.state===i?(at(),w):(A(t,G,Q),G.runner);if(d("cancel",t,Q,G))if(G.state===i)G.runner.end();else{if(!G.structural)return A(t,G,Q),G.runner;G.close()}else if(d("join",t,Q,G)){if(G.state!==i)return function(t,e,n){var i="";e&&(i=S(e,c,!0)),n.addClass&&(i=P(i,S(n.addClass,a))),n.removeClass&&(i=P(i,S(n.removeClass,l))),i.length&&(n.preparationClasses=i,t.addClass(i))}(t,F?e:null,_),e=Q.event=G.event,_=A(t,G,Q),G.runner;R(t,Q)}}else R(t,Q);var tt=Q.structural;tt||(tt="animate"===Q.event&&Object.keys(Q.options.to||{}).length>0||f(Q));if(!tt)return at(),W(t),w;var ot=(G.counter||0)+1;return Q.counter=ot,U(t,n,Q),o.$$postDigest(function(){var n=M.get(y),r=!n;n=n||{};var o=(t.parent()||[]).length>0&&("animate"===n.event||n.structural||f(n));if(r||n.counter!==ot||!o)return r&&(j(t,_),T(t,_)),(r||F&&n.event!==e)&&(_.domOperation(),w.end()),void(o||W(t));e=!n.structural&&f(n,!0)?"setClass":n.event,U(t,i);var s=g(t,e,n.options);w.setHost(s),st(w,e,"start",{}),s.done(function(n){at(!n);var i=M.get(y);i&&i.counter===ot&&W(I(t)),st(w,e,"close",{})})}),w;function st(e,n,i,o){C(function(){var e=function(t,e,n){var i=I(e),r=I(t),o=[],s=L[n];return s&&K(s,function(t){B.call(t.node,i)?o.push(t.callback):"leave"===n&&B.call(t.node,r)&&o.push(t.callback)}),o}(b,t,n);e.length?r(function(){K(e,function(e){e(t,i,o)}),Y(i,t)}):Y(i,t)}),e.progress(n,i,o)}function at(e){!function(t,e){e.preparationClasses&&(t.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(t.removeClass(e.activeClasses),e.activeClasses=null)}(t,_),j(t,_),T(t,_),_.domOperation(),w.complete(!e)}}(t,e,m)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!$;else{var i=Q(t);if(i){var r=I(t);1===n?e=!E.get(r):E.put(r,!e)}else e=$=!!t}return e}};return H;function W(t){var e=I(t);e.removeAttribute(ut),M.remove(e)}function z(t,e){return I(t)===I(e)}function U(t,e,n){(n=n||{}).state=e;var i=I(t);i.setAttribute(ut,e);var r=M.get(i),o=r?X(r,n):n;M.put(i,o)}}]}],ft=["$animateProvider",function(t){var e="ng-animate-ref",n=this.drivers=[],i="$$animationRunner";function r(t){return t.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(t,o,s,a,l,c){var h=[],d=C(t);return function(f,p,m){m=k(m);var g=["enter","move","leave"].indexOf(p)>=0,v=new a({end:function(){C()},cancel:function(){C(!0)}});if(!n.length)return C(),v;!function(t,e){t.data(i,e)}(f,v);var y,b=w(f.attr("class"),w(m.addClass,m.removeClass)),_=m.tempClasses;return _&&(b+=" "+_,m.tempClasses=null),g&&(y="ng-"+p+"-prepare",t.addClass(f,y)),h.push({element:f,classes:b,event:p,structural:g,options:m,beforeStart:function(){f.addClass(u),_&&t.addClass(f,_);y&&(t.removeClass(f,y),y=null)},close:C}),f.on("$destroy",x),h.length>1?v:(o.$$postDigest(function(){var t=[];K(h,function(e){r(e.element)?t.push(e):e.close()}),h.length=0;var i=function(t){var n=[],i={};K(t,function(t,r){var o=I(t.element),s=t.event,a=["enter","move"].indexOf(s)>=0,l=t.structural?function(t){var n="["+e+"]",i=t.hasAttribute(e)?[t]:t.querySelectorAll(n),r=[];return K(i,function(t){var n=t.getAttribute(e);n&&n.length&&r.push(t)}),r}(o):[];if(l.length){var c=a?"to":"from";K(l,function(t){var n=t.getAttribute(e);i[n]=i[n]||{},i[n][c]={animationID:r,element:rt(t)}})}else n.push(t)});var r={},o={};return K(i,function(e,i){var s=e.from,a=e.to;if(s&&a){var l=t[s.animationID],c=t[a.animationID],u=s.animationID.toString();if(!o[u]){var h=o[u]={structural:!0,beforeStart:function(){l.beforeStart(),c.beforeStart()},close:function(){l.close(),c.close()},classes:S(l.classes,c.classes),from:l,to:c,anchors:[]};h.classes.length?n.push(h):(n.push(l),n.push(c))}o[u].anchors.push({out:s.element,in:a.element})}else{var d=s?s.animationID:a.animationID,f=d.toString();r[f]||(r[f]=!0,n.push(t[d]))}}),n}(t),o=[];K(i,function(t){o.push({domNode:I(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var e,i=t.close;if(r(t.anchors?t.from.element||t.to.element:t.element)){var o=function(t){for(var e=n.length-1;e>=0;e--){var i=n[e],r=s.get(i)(t);if(r)return r}}(t);o&&(e=o.start)}if(e){var a=e();a.done(function(t){i(!t)}),function(t,e){t.from&&t.to?(n(t.from.element),n(t.to.element)):n(t.element);function n(t){var n=r(t);n&&n.setHost(e)}}(t,a)}else i()}})}),c(function(t){var e,n={children:[]},i=new l;for(e=0;e<t.length;e++){var r=t[e];i.put(r.domNode,t[e]={domNode:r.domNode,fn:r.fn,children:[]})}for(e=0;e<t.length;e++)o(t[e]);return function(t){var e,n=[],i=[];for(e=0;e<t.children.length;e++)i.push(t.children[e]);var r=i.length,o=0,s=[];for(e=0;e<i.length;e++){var a=i[e];r<=0&&(r=o,o=0,n.push(s),s=[]),s.push(a.fn),a.children.forEach(function(t){o++,i.push(t)}),r--}s.length&&n.push(s);return n}(n);function o(t){if(t.processed)return t;t.processed=!0;var e,r=t.domNode,s=r.parentNode;for(i.put(r,t);s;){if(e=i.get(s)){e.processed||(e=o(e));break}s=s.parentNode}return(e||n).children.push(t),t}}(o))}),v);function S(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],i=0;i<t.length;i++){var r=t[i];if("ng-"!==r.substring(0,3))for(var o=0;o<e.length;o++)if(r===e[o]){n.push(r);break}}return n.join(" ")}function x(){var t=r(f);!t||"leave"===p&&m.$$domOperationFired||t.end()}function C(e){f.off("$destroy",x),function(t){t.removeData(i)}(f),d(f,m),T(f,m),m.domOperation(),_&&t.removeClass(f,_),f.removeClass(u),v.complete(!e)}}}]}];e.module("ngAnimate",[],function(){ot=e.noop,q=e.copy,X=e.extend,rt=e.element,K=e.forEach,J=e.isArray,nt=e.isString,et=e.isObject,it=e.isUndefined,Z=e.isDefined,tt=e.isFunction,Q=e.isElement}).directive("ngAnimateSwap",["$animate","$rootScope",function(t,e){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(e,n,i,r,o){var s,a;e.$watchCollection(i.ngAnimateSwap||i.for,function(i){s&&t.leave(s),a&&(a.$destroy(),a=null),(i||0===i)&&(a=e.$new(),o(a,function(e){s=e,t.enter(e,null,n)}))})}}}]).directive("ngAnimateChildren",O).factory("$$rAFScheduler",["$$rAF",function(t){var e,n;function i(t){e=e.concat(t),r()}return e=i.queue=[],i.waitUntilQuiet=function(e){n&&n(),n=t(function(){n=null,e(),r()})},i;function r(){if(e.length){for(var i=e.shift(),o=0;o<i.length;o++)i[o]();n||t(function(){n||r()})}}}]).provider("$$animateQueue",dt).provider("$$animation",ft).provider("$animateCss",st).provider("$$animateCssDriver",at).provider("$$animateJs",lt).provider("$$animateJsDriver",ct)}(window,window.angular)},function(t,e,n){n(286),t.exports="ngAria"},function(t,e){
/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";var n=e.module("ngAria",["ng"]).provider("$aria",function(){var t={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0,bindRoleForClick:!0};function n(e,n,i,o){return function(s,a,l){var c=l.$normalize(n);!t[c]||r(a,i)||l[c]||s.$watch(l[e],function(t){t=o?!t:!!t,a.attr(n,t)})}}this.config=function(n){t=e.extend(t,n)},this.$get=function(){return{config:function(e){return t[e]},$$watchExpr:n}}}),i=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],r=function(t,e){if(-1!==e.indexOf(t[0].nodeName))return!0};n.directive("ngShow",["$aria",function(t){return t.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(t){return t.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(t){return t.$$watchExpr("ngValue","aria-checked",i,!1)}]).directive("ngChecked",["$aria",function(t){return t.$$watchExpr("ngChecked","aria-checked",i,!1)}]).directive("ngReadonly",["$aria",function(t){return t.$$watchExpr("ngReadonly","aria-readonly",i,!1)}]).directive("ngRequired",["$aria",function(t){return t.$$watchExpr("ngRequired","aria-required",i,!1)}]).directive("ngModel",["$aria",function(t){function e(e,n,o,s){return t.config(n)&&!o.attr(e)&&(s||!r(o,i))}function n(t,e){return!e.attr("role")&&e.attr("type")===t&&"INPUT"!==e[0].nodeName}return{restrict:"A",require:"ngModel",priority:200,compile:function(i,r){var o=function(t,e){var n=t.type,i=t.role;return"checkbox"===(n||i)||"menuitemcheckbox"===i?"checkbox":"radio"===(n||i)||"menuitemradio"===i?"radio":"range"===n||"progressbar"===i||"slider"===i?"range":""}(r);return{pre:function(t,e,n,i){"checkbox"===o&&(i.$isEmpty=function(t){return!1===t})},post:function(i,r,s,a){var l=e("tabindex","tabindex",r,!1);function c(){return a.$modelValue}switch(o){case"radio":case"checkbox":n(o,r)&&r.attr("role",o),e("aria-checked","ariaChecked",r,!1)&&i.$watch(c,"radio"===o?function(t){var e=s.value==a.$viewValue;r.attr("aria-checked",e)}:function(){r.attr("aria-checked",!a.$isEmpty(a.$viewValue))}),l&&r.attr("tabindex",0);break;case"range":if(n(o,r)&&r.attr("role","slider"),t.config("ariaValue")){var u=!r.attr("aria-valuemin")&&(s.hasOwnProperty("min")||s.hasOwnProperty("ngMin")),h=!r.attr("aria-valuemax")&&(s.hasOwnProperty("max")||s.hasOwnProperty("ngMax")),d=!r.attr("aria-valuenow");u&&s.$observe("min",function(t){r.attr("aria-valuemin",t)}),h&&s.$observe("max",function(t){r.attr("aria-valuemax",t)}),d&&i.$watch(c,function(t){r.attr("aria-valuenow",t)})}l&&r.attr("tabindex",0)}!s.hasOwnProperty("ngRequired")&&a.$validators.required&&e("aria-required","ariaRequired",r,!1)&&s.$observe("required",function(){r.attr("aria-required",!!s.required)}),e("aria-invalid","ariaInvalid",r,!0)&&i.$watch(function(){return a.$invalid},function(t){r.attr("aria-invalid",!!t)})}}}}}]).directive("ngDisabled",["$aria",function(t){return t.$$watchExpr("ngDisabled","aria-disabled",i,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(t,e,n,i){e.attr("aria-live")||e.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(t,e){return{restrict:"A",compile:function(n,o){var s=e(o.ngClick,null,!0);return function(e,n,o){r(n,i)||(t.config("bindRoleForClick")&&!n.attr("role")&&n.attr("role","button"),t.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0),t.config("bindKeypress")&&!o.ngKeypress&&n.on("keypress",function(t){var n=t.which||t.keyCode;32!==n&&13!==n||e.$apply(function(){s(e,{$event:t})})}))}}}}]).directive("ngDblclick",["$aria",function(t){return function(e,n,o){!t.config("tabindex")||n.attr("tabindex")||r(n,i)||n.attr("tabindex",0)}}])}(window,window.angular)},function(t,e){
/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.20
 */
!function(t,e,n){"use strict";e.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.animate","material.core.gestures","material.core.interaction","material.core.layout","material.core.meta","material.core.theming.palette","material.core.theming","material.components.autocomplete","material.components.backdrop","material.components.bottomSheet","material.components.button","material.components.card","material.components.checkbox","material.components.chips","material.components.colors","material.components.content","material.components.datepicker","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabShared","material.components.fabSpeedDial","material.components.fabToolbar","material.components.gridList","material.components.icon","material.components.input","material.components.list","material.components.menu","material.components.menuBar","material.components.navBar","material.components.panel","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.select","material.components.showHide","material.components.sidenav","material.components.slider","material.components.sticky","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.truncate","material.components.virtualRepeat","material.components.whiteframe"]),function(){function t(t,e){if(e.has("$swipe")){t.warn("You are using the ngTouch module. \nAngularJS Material already has mobile click, tap, and swipe support... \nngTouch is not supported with AngularJS Material!")}}function n(t,e){t.decorator("$$rAF",["$delegate",i]),t.decorator("$q",["$delegate",r]),e.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("deep-orange").backgroundPalette("grey")}function i(t){return t.throttle=function(e){var n,i,r,o;return function(){n=arguments,o=this,r=e,i||(i=!0,t(function(){r.apply(o,Array.prototype.slice.call(n)),i=!1}))}},t}function r(t){return t.resolve||(t.resolve=t.when),t}t.$inject=["$log","$injector"],n.$inject=["$provide","$mdThemingProvider"],i.$inject=["$delegate"],r.$inject=["$delegate"],e.module("material.core",["ngAnimate","material.core.animate","material.core.layout","material.core.interaction","material.core.gestures","material.core.theming"]).config(n).run(t)}(),function(){function t(t){return{restrict:"A",link:{pre:function(n,i,r){var o=r.mdAutoFocus||r.mdAutofocus||r.mdSidenavFocus;s(t(o)(n)),o&&n.$watch(o,s);function s(t){e.isUndefined(t)&&(t=!0),i.toggleClass("md-autofocus",!!t)}}}}}t.$inject=["$parse"],e.module("material.core").directive("mdAutofocus",t).directive("mdAutoFocus",t).directive("mdSidenavFocus",t)}(),e.module("material.core").factory("$mdColorUtil",function(){return{rgbaToHex:function(t){return((t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):"").toUpperCase()},hexToRgba:function(t){var e="#"===t[0]?t.substr(1):t,n=e.length/3,i=e.substr(0,n),r=e.substr(n,n),o=e.substr(2*n);return 1===n&&(i+=i,r+=r,o+=o),"rgba("+parseInt(i,16)+","+parseInt(r,16)+","+parseInt(o,16)+",0.1)"},rgbToRgba:function(t){return t.replace(")",", 0.1)").replace("(","a(")},rgbaToRgb:function(t){return t?t.replace("rgba","rgb").replace(/,[^),]+\)/,")"):"rgb(0,0,0)"}}}),e.module("material.core").factory("$mdConstant",function(){var t=document.createElement("div"),n=function(t){var e,n,i=/^(Moz|webkit|ms)(?=[A-Z])/;for(e in t.style)if(n=i.exec(e))return n[0]}(t),i=/webkit/i.test(n),r=/([:\-_]+(.))/g;function o(e){var i=(n+"-"+e).replace(r,function(t,e,n,i){return i?n.toUpperCase():n}),o=i.charAt(0).toLowerCase()+i.substring(1);return s(t,e)?e:s(t,i)?i:s(t,o)?o:e}function s(t,n){return e.isDefined(t.style[n])}var a={isInputKey:function(t){return t.keyCode>=31&&t.keyCode<=90},isNumPadKey:function(t){return 3===t.location&&t.keyCode>=97&&t.keyCode<=105},isMetaKey:function(t){return t.keyCode>=91&&t.keyCode<=93},isFnLockKey:function(t){return t.keyCode>=112&&t.keyCode<=145},isNavigationKey:function(t){var e=a.KEY_CODE;return-1!=[e.SPACE,e.ENTER,e.UP_ARROW,e.DOWN_ARROW].indexOf(t.keyCode)},hasModifierKey:function(t){return t.ctrlKey||t.metaKey||t.altKey},ELEMENT_MAX_PIXELS:1533917,BEFORE_NG_ARIA:210,KEY_CODE:{COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(i?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(i?" webkitAnimationEnd":""),TRANSFORM:o("transform"),TRANSFORM_ORIGIN:o("transformOrigin"),TRANSITION:o("transition"),TRANSITION_DURATION:o("transitionDuration"),ANIMATION_PLAY_STATE:o("animationPlayState"),ANIMATION_DURATION:o("animationDuration"),ANIMATION_NAME:o("animationName"),ANIMATION_TIMING:o("animationTimingFunction"),ANIMATION_DIRECTION:o("animationDirection")},MEDIA:{xs:"(max-width: 599px)","gt-xs":"(min-width: 600px)",sm:"(min-width: 600px) and (max-width: 959px)","gt-sm":"(min-width: 960px)",md:"(min-width: 960px) and (max-width: 1279px)","gt-md":"(min-width: 1280px)",lg:"(min-width: 1280px) and (max-width: 1919px)","gt-lg":"(min-width: 1920px)",xl:"(min-width: 1920px)",landscape:"(orientation: landscape)",portrait:"(orientation: portrait)",print:"print"},MEDIA_PRIORITY:["xl","gt-lg","lg","gt-md","md","gt-sm","sm","gt-xs","xs","landscape","portrait","print"]};return a}),function(){function t(t,n){var i=function(){return!0};t&&!e.isArray(t)&&(t=Array.prototype.slice.call(t)),n=!!n;var r=t||[];return{items:function(){return[].concat(r)},count:function(){return r.length},inRange:o,contains:a,indexOf:s,itemAt:function(t){return o(t)?r[t]:null},findBy:function(t,e){return r.filter(function(n){return n[t]===e})},add:function(t,n){if(!t)return-1;e.isNumber(n)||(n=r.length);return r.splice(n,0,t),s(t)},remove:function(t){a(t)&&r.splice(s(t),1)},first:l,last:c,next:e.bind(null,u,!1),previous:e.bind(null,u,!0),hasPrevious:function(t){return!!t&&o(s(t)-1)},hasNext:function(t){return!!t&&o(s(t)+1)}};function o(t){return r.length&&t>-1&&t<r.length}function s(t){return r.indexOf(t)}function a(t){return t&&s(t)>-1}function l(){return r.length?r[0]:null}function c(){return r.length?r[r.length-1]:null}function u(t,a,u,h){u=u||i;for(var d=s(a);;){if(!o(d))return null;var f=d+(t?-1:1),p=null;if(o(f)?p=r[f]:n&&(f=s(p=t?c():l())),null===p||f===h)return null;if(u(p))return p;e.isUndefined(h)&&(h=f),d=f}}}e.module("material.core").config(["$provide",function(e){e.decorator("$mdUtil",["$delegate",function(e){return e.iterator=t,e}])}])}(),function(){function t(t,n,i){var r={},o={},s={},a={};return l.getResponsiveAttribute=function(e,n){for(var i=0;i<t.MEDIA_PRIORITY.length;i++){var s=t.MEDIA_PRIORITY[i];if(o[r[s]].matches){var a=u(e,n+"-"+s);if(e[a])return e[a]}}return e[u(e,n)]},l.getQuery=function(t){return o[t]},l.watchResponsiveAttributes=function(n,i,r){var o=[];return n.forEach(function(n){var s=u(i,n);for(var a in e.isDefined(i[s])&&o.push(i.$observe(s,e.bind(void 0,r,null))),t.MEDIA)s=u(i,n+"-"+a),e.isDefined(i[s])&&o.push(i.$observe(s,e.bind(void 0,r,a)))}),function(){o.forEach(function(t){t()})}},l;function l(n){var a=r[n];e.isUndefined(a)&&(a=r[n]=function(e){return t.MEDIA[e]||("("!==e.charAt(0)?"("+e+")":e)}(n));var l=s[a];return e.isUndefined(l)&&(l=function(t){var e=o[t];e||(e=o[t]=i.matchMedia(t));return e.addListener(c),s[e.media]=!!e.matches}(a)),l}function c(t){n.$evalAsync(function(){s[t.media]=!!t.matches})}function u(t,e){return a[e]||(a[e]=t.$normalize(e))}}t.$inject=["$mdConstant","$rootScope","$window"],e.module("material.core").factory("$mdMedia",t)}(),function(){function t(t,n){var i=["data","x"];return t?n?o(t):r(t):{buildList:r,buildSelector:o,hasAttribute:function(t,e){if(!(t=s(t)))return!1;for(var n=r(e),i=0;i<n.length;i++)if(t.hasAttribute(n[i]))return!0;return!1},removeAttribute:function(t,e){if(!(t=s(t)))return;r(e).forEach(function(e){t.removeAttribute(e)})}};function r(t){return(t=e.isArray(t)?t:[t]).forEach(function(e){i.forEach(function(n){t.push(n+"-"+e)})}),t}function o(t){return r(t=e.isArray(t)?t:[t]).map(function(t){return"["+t+"]"}).join(",")}function s(t){if((t=t[0]||t).nodeType)return t}}e.module("material.core").config(["$provide",function(e){e.decorator("$mdUtil",["$delegate",function(e){return e.prefixer=t,e}])}])}(),function(){r.$inject=["$document","$timeout","$compile","$rootScope","$$mdAnimate","$interpolate","$log","$rootElement","$window","$$rAF"];var i=0;function r(r,o,s,a,l,c,u,h,d,f){var p=c.startSymbol(),m=c.endSymbol(),g="{{"===p&&"}}"===m;document.contains||(document.contains=function(t){return document.body.contains(t)});var v=function(t,n,i){var r=!1;if(t&&t.length){var o=d.getComputedStyle(t[0]);r=e.isDefined(o[n])&&(!i||o[n]==i)}return r};function y(t){return t?function(t){return String(t).indexOf("px")>-1}(t)||function(t){return String(t).indexOf("%")>-1}(t)?t:t+"px":"0"}var b={dom:{},now:t.performance&&t.performance.now?e.bind(t.performance,t.performance.now):Date.now||function(){return(new Date).getTime()},getModelOption:function(t,e){if(t.$options){var n=t.$options;return n.getOption?n.getOption(e):n[e]}},isRtl:function(t){switch(e.isDefined(t)&&t.hasOwnProperty("dir")&&t.dir){case"ltr":return!1;case"rtl":return!0}return"rtl"===r[0].dir||"rtl"===r[0].body.dir},bidi:function(t,n,i,r){var o=!this.isRtl();if(0==arguments.length)return o?"ltr":"rtl";var s=e.element(t);o&&e.isDefined(i)?s.css(n,y(i)):!o&&e.isDefined(r)&&s.css(n,y(r))},bidiProperty:function(t,n,i,r){var o=!this.isRtl(),s=e.element(t);o&&e.isDefined(n)?(s.css(n,y(r)),s.css(i,"")):!o&&e.isDefined(i)&&(s.css(i,y(r)),s.css(n,""))},clientRect:function(t,e,n){var i=_(t);e=_(e||i.offsetParent||document.body);var r=i.getBoundingClientRect(),o=n?e.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:r.left-o.left,top:r.top-o.top,width:r.width,height:r.height}},offsetRect:function(t,e){return b.clientRect(t,e,!0)},nodesToArray:function(t){t=t||[];for(var e=[],n=0;n<t.length;++n)e.push(t.item(n));return e},getViewportTop:function(){return b.disableScrollAround._count&&b.disableScrollAround._viewPortTop?b.disableScrollAround._viewPortTop:d.scrollY||d.pageYOffset||0},findFocusTarget:function(t,n){var i,r=this.prefixer("md-autofocus",!0);return(i=o(t,n||r))||n==r||(i=o(t,this.prefixer("md-auto-focus",!0)))||(i=o(t,r)),i;function o(t,n){var i,r=t[0].querySelectorAll(n);return r&&r.length&&r.length&&e.forEach(r,function(t){(t=e.element(t)).hasClass("md-autofocus")&&(i=t)}),i}},disableScrollAround:function(t,n,i){if(i=i||{},b.disableScrollAround._count=Math.max(0,b.disableScrollAround._count||0),b.disableScrollAround._count++,b.disableScrollAround._restoreScroll)return b.disableScrollAround._restoreScroll;var o=r[0].body,s=function(){var t=r[0].documentElement,n=t.style.cssText||"",i=o.style.cssText||"",s=b.getViewportTop();b.disableScrollAround._viewPortTop=s;var a=o.clientWidth,l=o.scrollHeight>o.clientHeight+1,c=t.scrollTop>0?t:o;l&&e.element(o).css({position:"fixed",width:"100%",top:-s+"px"});o.clientWidth<a&&(o.style.overflow="hidden");return function(){o.style.cssText=i,t.style.cssText=n,c.scrollTop=s}}(),a=function(t,n){var i,r=e.element(t||o);n.disableScrollMask?i=r:(i=e.element('<div class="md-scroll-mask">  <div class="md-scroll-mask-bar"></div></div>'),r.append(i));function s(t){t.preventDefault()}return i.on("wheel",s),i.on("touchmove",s),function(){i.off("wheel"),i.off("touchmove"),!n.disableScrollMask&&i[0].parentNode&&i[0].parentNode.removeChild(i[0])}}(n,i);return b.disableScrollAround._restoreScroll=function(){--b.disableScrollAround._count<=0&&(delete b.disableScrollAround._viewPortTop,s(),a(),delete b.disableScrollAround._restoreScroll)}},enableScrolling:function(){var t=this.disableScrollAround._restoreScroll;t&&t()},floatingScrollbars:function(){if(this.floatingScrollbars.cached===n){var t=e.element("<div><div></div></div>").css({width:"100%","z-index":-1,position:"absolute",height:"35px","overflow-y":"scroll"});t.children().css("height","60px"),r[0].body.appendChild(t[0]),this.floatingScrollbars.cached=t[0].offsetWidth==t[0].childNodes[0].offsetWidth,t.remove()}return this.floatingScrollbars.cached},forceFocus:function(e){var n=e[0]||e;document.addEventListener("click",function t(e){e.target===n&&e.$focus&&(n.focus(),e.stopImmediatePropagation(),e.preventDefault(),n.removeEventListener("click",t))},!0);var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!1,!0,t,{},0,0,0,0,!1,!1,!1,!1,0,null),i.$material=!0,i.$focus=!0,n.dispatchEvent(i)},createBackdrop:function(t,e){return s(b.supplant('<md-backdrop class="{0}">',[e]))(t)},supplant:function(t,e,n){return n=n||/\{([^{}]*)\}/g,t.replace(n,function(t,n){var i=n.split("."),r=e;try{for(var o in i)i.hasOwnProperty(o)&&(r=r[i[o]])}catch(e){r=t}return"string"==typeof r||"number"==typeof r?r:t})},fakeNgModel:function(){return{$fake:!0,$setTouched:e.noop,$setViewValue:function(t){this.$viewValue=t,this.$render(t),this.$viewChangeListeners.forEach(function(t){t()})},$isEmpty:function(t){return 0===(""+t).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:e.noop}},debounce:function(t,e,i,r){var s;return function(){var a=i,l=Array.prototype.slice.call(arguments);o.cancel(s),s=o(function(){s=n,t.apply(a,l)},e||10,r)}},throttle:function(t,e){var n;return function(){var i=this,r=arguments,o=b.now();(!n||o-n>e)&&(t.apply(i,r),n=o)}},time:function(t){var e=b.now();return t(),b.now()-e},valueOnUse:function(t,e,n){var i=null,r=Array.prototype.slice.call(arguments),o=r.length>3?r.slice(3):[];Object.defineProperty(t,e,{get:function(){return null===i&&(i=n.apply(t,o)),i}})},nextUid:function(){return""+i++},disconnectScope:function(t){if(t&&t.$root!==t&&!t.$$destroyed){var e=t.$parent;t.$$disconnected=!0,e.$$childHead===t&&(e.$$childHead=t.$$nextSibling),e.$$childTail===t&&(e.$$childTail=t.$$prevSibling),t.$$prevSibling&&(t.$$prevSibling.$$nextSibling=t.$$nextSibling),t.$$nextSibling&&(t.$$nextSibling.$$prevSibling=t.$$prevSibling),t.$$nextSibling=t.$$prevSibling=null}},reconnectScope:function(t){if(t&&t.$root!==t&&t.$$disconnected){var e=t,n=e.$parent;e.$$disconnected=!1,e.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=e,n.$$childTail=e):n.$$childHead=n.$$childTail=e}},getClosest:function(t,n,i){if(e.isString(n)){var r=n.toUpperCase();n=function(t){return t.nodeName.toUpperCase()===r}}if(t instanceof e.element&&(t=t[0]),i&&(t=t.parentNode),!t)return null;do{if(n(t))return t}while(t=t.parentNode);return null},elementContains:function(n,i){return(t.Node&&t.Node.prototype&&Node.prototype.contains?e.bind(n,n.contains):e.bind(n,function(t){return n===i||!!(16&this.compareDocumentPosition(t))}))(i)},extractElementByName:function(t,n,i,r){var o=s(t);return!o&&r&&u.warn(b.supplant("Unable to find node '{0}' in element '{1}'.",[n,t[0].outerHTML])),e.element(o||t);function s(t){return function(t){if(t)for(var e=0,i=t.length;e<i;e++)if(t[e].nodeName.toLowerCase()===n)return t[e];return null}(t)||(i?function(t){var e;if(t)for(var n=0,i=t.length;n<i;n++){var r=t[n];if(!e)for(var o=0,a=r.childNodes.length;o<a;o++)e=e||s([r.childNodes[o]])}return e}(t):null)}},initOptionalProperties:function(t,n,i){i=i||{},e.forEach(t.$$isolateBindings,function(r,o){if(r.optional&&e.isUndefined(t[o])){var s=e.isDefined(n[r.attrName]);t[o]=e.isDefined(i[o])?i[o]:s}})},nextTick:function(t,e,n){var i=b.nextTick,r=i.timeout,s=i.queue||[];return s.push({scope:n,callback:t}),null==e&&(e=!0),i.digest=i.digest||e,i.queue=s,r||(i.timeout=o(function(){var t=i.queue,e=i.digest;i.queue=[],i.timeout=null,i.digest=!1,t.forEach(function(t){t.scope&&t.scope.$$destroyed||t.callback()}),e&&a.$digest()},0,!1))},processTemplate:function(t){return g?t:t&&e.isString(t)?t.replace(/\{\{/g,p).replace(/}}/g,m):t},getParentWithPointerEvents:function(t){for(var e=t.parent();v(e,"pointer-events","none");)e=e.parent();return e},getNearestContentElement:function(t){for(var e=t.parent()[0];e&&e!==h[0]&&e!==document.body&&"MD-CONTENT"!==e.nodeName.toUpperCase();)e=e.parentNode;return e},checkStickySupport:function(){var t,n=e.element("<div>");r[0].body.appendChild(n[0]);for(var i=["sticky","-webkit-sticky"],o=0;o<i.length;++o)if(n.css({position:i[o],top:0,"z-index":2}),n.css("position")==i[o]){t=i[o];break}return n.remove(),t},parseAttributeBoolean:function(t,e){return""===t||!!t&&(!1===e||"false"!==t&&"0"!==t)},hasComputedStyle:v,isParentFormSubmitted:function(t){var n=b.getClosest(t,"form"),i=n?e.element(n).controller("form"):null;return!!i&&i.$submitted},animateScrollTo:function(t,e,n){var i=t.scrollTop,r=e-i,o=i<e,s=b.now();f(function a(){var l=(c=n||1e3,function(t,e,n,i){if(t>i)return e+n;var r=(t/=i)*t;return e+n*(r*t*-2+3*r)}(b.now()-s,i,r,c));var c;t.scrollTop=l;(o?l<e:l>e)&&f(a)})},uniq:function(t){if(t)return t.filter(function(t,e,n){return n.indexOf(t)===e})},getInnerHTML:function(t){var e=new XMLSerializer;return Array.prototype.map.call(t.childNodes,function(t){return e.serializeToString(t)}).join("")},getOuterHTML:function(t){return(new XMLSerializer).serializeToString(t)},msie:t.document.documentMode};return b.dom.animator=l(b),b;function _(t){return t[0]||t}}e.module("material.core").factory("$mdUtil",r),e.element.prototype.focus=e.element.prototype.focus||function(){return this.length&&this[0].focus(),this},e.element.prototype.blur=e.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),e.module("material.core").factory("$$mdAnimate",["$q","$timeout","$mdConstant","$animateCss",function(n,i,r,o){return function(s){return function(n,i,r,o,s){var a;return a={translate3d:function(t,e,n,i){return s(t,{from:e,to:n,addClass:i.transitionInClass,removeClass:i.transitionOutClass,duration:i.duration}).start().then(function(){return r});function r(n){return s(t,{to:n||e,addClass:i.transitionOutClass,removeClass:i.transitionInClass,duration:i.duration}).start()}},waitTransitionEnd:function(e,n){var s=3e3;return i(function(i,a){var l;("0s"==(l=(l=(n=n||{}).cachedTransitionStyles)||t.getComputedStyle(e[0])).transitionDuration||!l.transition&&!l.transitionProperty)&&(s=0);var c=r(u,n.timeout||s);function u(t){t&&t.target!==e[0]||(t&&r.cancel(c),e.off(o.CSS.TRANSITIONEND,u),i())}e.on(o.CSS.TRANSITIONEND,u)})},calculateTransformValues:function(t,e){var n=e.element,i=e.bounds;if(n||i){var r=n?a.clientRect(n)||function(){var e=t?t.parent():null,n=e?e.parent():null;return n?a.clientRect(n):null}():a.copyRect(i),o=a.copyRect(t[0].getBoundingClientRect()),s=a.centerPointFor(o),l=a.centerPointFor(r);return{centerX:l.x-s.x,centerY:l.y-s.y,scaleX:Math.round(100*Math.min(.5,r.width/o.width))/100,scaleY:Math.round(100*Math.min(.5,r.height/o.height))/100}}return{centerX:0,centerY:0,scaleX:.5,scaleY:.5}},calculateZoomToOrigin:function(t,i){return e.bind(null,n.supplant,"translate3d( {centerX}px, {centerY}px, 0 ) scale( {scaleX}, {scaleY} )")(a.calculateTransformValues(t,i))},calculateSlideToOrigin:function(t,i){return e.bind(null,n.supplant,"translate3d( {centerX}px, {centerY}px, 0 )")(a.calculateTransformValues(t,i))},toCss:function(t){var n={};return e.forEach(t,function(t,r){if(!e.isUndefined(t))if("left top right bottom width height x y min-width min-height max-width max-height".indexOf(r)>=0)n[r]=t+"px";else switch(r){case"transition":i(0,o.CSS.TRANSITION,t);break;case"transform":i(0,o.CSS.TRANSFORM,t);break;case"transformOrigin":i(0,o.CSS.TRANSFORM_ORIGIN,t);break;case"font-size":n["font-size"]=t}}),n;function i(t,i,r){e.forEach(i.split(" "),function(t){n[t]=r})}},toTransformCss:function(t,n,i){var r={};return e.forEach(o.CSS.TRANSFORM.split(" "),function(e){r[e]=t}),n&&(i=i||"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important",r.transition=i),r},copyRect:function(t,n){return t?(n=n||{},e.forEach("left top right bottom width height".split(" "),function(e){n[e]=Math.round(t[e])}),n.width=n.width||n.right-n.left,n.height=n.height||n.bottom-n.top,n):null},clientRect:function(t){var n,i=e.element(t)[0].getBoundingClientRect();return(n=i)&&n.width>0&&n.height>0?a.copyRect(i):null},centerPointFor:function(t){return t?{x:Math.round(t.left+t.width/2),y:Math.round(t.top+t.height/2)}:{x:0,y:0}}}}(s,n,i,r,o)}}]),e.version.minor>=4?e.module("material.core.animate",[]):function(){var t=e.forEach,n=e.isDefined(document.documentElement.style.WebkitAppearance),i=n?"-webkit-":"",r=(n?"webkitTransitionEnd ":"")+"transitionend",o=(n?"webkitAnimationEnd ":"")+"animationend",s=["$q","$$rAFMutex",function(n,i){function r(t){this.setHost(t),this._doneCallbacks=[],this._runInAnimationFrame=i(),this._state=0}return r.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:e.noop,getPromise:function(){if(!this.promise){var t=this;this.promise=n(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._runInAnimationFrame(function(){e._resolve(t)}))},_resolve:function(e){2!==this._state&&(t(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},r.all=function(e,n){var i=0,r=!0;function o(t){r=r&&t,++i===e.length&&n(r)}t(e,function(t){t.done(o)})},r}];function a(t){return t.replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()})}e.module("material.core.animate",[]).factory("$$forceReflow",["$document",function(t){return function(){return t[0].body.clientWidth+1}}]).factory("$$AnimateRunner",s).factory("$$rAFMutex",["$$rAF",function(t){return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]).factory("$animateCss",["$window","$$rAF","$$AnimateRunner","$$forceReflow","$$jqLite","$timeout","$animate",function(e,s,l,c,u,h,d){function f(t,e){e.addClass&&(u.addClass(t,e.addClass),e.addClass=null),e.removeClass&&(u.removeClass(t,e.removeClass),e.removeClass=null)}function p(e){var n=0,i=(e||"").split(/\s*,\s*/);return t(i,function(t){"s"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,n=n?Math.max(t,n):t}),n}var m,g=[];function v(t,e){e.from&&(t.css(e.from),e.from=null)}function y(t,e){e.to&&(t.css(e.to),e.to=null)}function b(t){for(var e=0;e<t.length;e++)if(1===t[e].nodeType)return t[e]}function _(t,e){var n=b(t),r=a(i+"transition-delay");n.style[r]=e?"-9999s":""}return function(u,w){var S=[],x=b(u),C=x&&d.enabled(),k=!1,T=!1;C&&(w.transitionStyle&&S.push([i+"transition",w.transitionStyle]),w.keyframeStyle&&S.push([i+"animation",w.keyframeStyle]),w.delay&&S.push([i+"transition-delay",w.delay+"s"]),w.duration&&S.push([i+"transition-duration",w.duration+"s"]),k=w.keyframeStyle||w.to&&(w.duration>0||w.transitionStyle),T=!!w.addClass||!!w.removeClass,_(u,!0));var M=C&&(k||T);v(u,w);var E,A,I=!1;return{close:e.close,start:function(){var d,C=new l;return d=function(){if(_(u,!1),!M)return k();t(S,function(t){var e=t[0],n=t[1];x.style[a(e)]=n}),f(u,w);var s=function(t){var i=b(t),r=e.getComputedStyle(i),o=p(r[h("transitionDuration")]),s=p(r[h("animationDuration")]),a=p(r[h("transitionDelay")]),l=p(r[h("animationDelay")]);s*=parseInt(r[h("animationIterationCount")],10)||1;var c=Math.max(s,o),u=Math.max(l,a);return{duration:c,delay:u,animationDuration:s,transitionDuration:o,animationDelay:l,transitionDelay:a};function h(t){return n?"Webkit"+t.charAt(0).toUpperCase()+t.substr(1):t}}(u);if(0===s.duration)return k();var l=[];w.easing&&(s.transitionDuration&&l.push([i+"transition-timing-function",w.easing]),s.animationDuration&&l.push([i+"animation-timing-function",w.easing])),w.delay&&s.animationDelay&&l.push([i+"animation-delay",w.delay+"s"]),w.duration&&s.animationDuration&&l.push([i+"animation-duration",w.duration+"s"]),t(l,function(t){var e=t[0],n=t[1];x.style[a(e)]=n,S.push(t)});var c=1e3*s.delay,d=s.duration,m=1e3*d,g=Date.now();E=[],s.transitionDuration&&E.push(r),s.animationDuration&&E.push(o),E=E.join(" "),A=function(t){t.stopPropagation();var e=t.originalEvent||t,n=e.timeStamp||Date.now(),i=parseFloat(e.elapsedTime.toFixed(3));Math.max(n-g,0)>=c&&i>=d&&k()},u.on(E,A),y(u,w),h(k,c+1.5*m,!1)},m&&m(),g.push(d),m=s(function(){m=null;for(var t=c(),e=0;e<g.length;e++)g[e](t);g.length=0}),C;function k(){if(!I)return I=!0,E&&A&&u.off(E,A),f(u,w),function(t,e){v(t,e),y(t,e)}(u,w),t(S,function(t){x.style[a(t[0])]=""}),C.complete(!0),C}}}}}])}(),function(){function t(t,n,i,r){var o=this.showWarnings;return{expect:s,expectAsync:a,expectWithText:function(t,e){var n=l(t)||"";n.indexOf(r.startSymbol())>-1?a(t,e,function(){return l(t)}):s(t,e,n)},expectWithoutText:function(t,e){var n=l(t);n.indexOf(r.startSymbol())>-1||n||s(t,e,n)},getText:l,hasAriaLabel:c,parentHasAriaLabel:function t(n,i){i=i||1;var r=e.element(n)[0]||n;if(!r.parentNode)return!1;if(function(t){if(!c(t))return!1;if(t.hasAttribute("role"))switch(t.getAttribute("role").toLowerCase()){case"command":case"definition":case"directory":case"grid":case"list":case"listitem":case"log":case"marquee":case"menu":case"menubar":case"note":case"presentation":case"separator":case"scrollbar":case"status":case"tablist":return!1}switch(t.tagName.toLowerCase()){case"abbr":case"acronym":case"address":case"applet":case"audio":case"b":case"bdi":case"bdo":case"big":case"blockquote":case"br":case"canvas":case"caption":case"center":case"cite":case"code":case"col":case"data":case"dd":case"del":case"dfn":case"dir":case"div":case"dl":case"em":case"embed":case"fieldset":case"figcaption":case"font":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"hgroup":case"html":case"i":case"ins":case"isindex":case"kbd":case"keygen":case"label":case"legend":case"li":case"map":case"mark":case"menu":case"object":case"ol":case"output":case"pre":case"presentation":case"q":case"rt":case"ruby":case"samp":case"small":case"source":case"span":case"status":case"strike":case"strong":case"sub":case"sup":case"svg":case"tbody":case"td":case"th":case"thead":case"time":case"tr":case"track":case"tt":case"ul":case"var":return!1}return!0}(r.parentNode))return!0;i--;if(i)return t(r.parentNode,i);return!1}};function s(t,r,s){var a=e.element(t)[0]||t;!a||a.hasAttribute(r)&&0!==a.getAttribute(r).length||function(t,e){var n=t.hasChildNodes(),r=!1;if(n)for(var o=t.childNodes,s=0;s<o.length;s++){var a=o[s];1===a.nodeType&&a.hasAttribute(e)&&"none"!==((l=a).currentStyle?l.currentStyle:i.getComputedStyle(l)).display&&(r=!0)}var l;return r}(a,r)||((s=e.isString(s)?s.trim():"").length?t.attr(r,s):o&&n.warn('ARIA: Attribute "',r,'", required for accessibility, is missing on node:',a))}function a(e,n,i){t(function(){s(e,n,i())})}function l(t){t=t[0]||t;for(var e,n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),i="";e=n.nextNode();)r(e)||(i+=e.textContent);return i.trim()||"";function r(e){for(;e.parentNode&&(e=e.parentNode)!==t;)if(e.getAttribute&&"true"===e.getAttribute("aria-hidden"))return!0}}function c(t){var n=e.element(t)[0]||t;return!!n.hasAttribute&&(n.hasAttribute("aria-label")||n.hasAttribute("aria-labelledby")||n.hasAttribute("aria-describedby"))}}t.$inject=["$$rAF","$log","$window","$interpolate"],e.module("material.core").provider("$mdAria",function(){var e={showWarnings:!0};return{disableWarnings:function(){e.showWarnings=!1},$get:["$$rAF","$log","$window","$interpolate",function(n,i,r,o){return t.apply(e,arguments)}]}})}(),function(){function t(t){var n=!1;function i(t,e,n,i,r){this.$q=t,this.$templateRequest=e,this.$injector=n,this.$compile=i,this.$controller=r}this.respectPreAssignBindingsEnabled=function(t){return e.isDefined(t)?(n=t,this):n},this.$get=["$q","$templateRequest","$injector","$compile","$controller",function(t,e,n,r,o){return new i(t,e,n,r,o)}],i.prototype.compile=function(t){return t.contentElement?this._prepareContentElement(t):this._compileTemplate(t)},i.prototype._prepareContentElement=function(t){var e=this._fetchContentElement(t);return this.$q.resolve({element:e.element,cleanup:e.restore,locals:{},link:function(){return e.element}})},i.prototype._compileTemplate=function(t){var n=this,i=t.templateUrl,r=t.template||"",o=e.extend({},t.resolve),s=e.extend({},t.locals),a=t.transformTemplate||e.identity;return e.forEach(o,function(t,i){e.isString(t)?o[i]=n.$injector.get(t):o[i]=n.$injector.invoke(t)}),e.extend(o,s),o.$$ngTemplate=i?this.$templateRequest(i):this.$q.when(r),this.$q.all(o).then(function(i){var r=a(i.$$ngTemplate,t),o=t.element||e.element("<div>").html(r.trim()).contents();return n._compileElement(i,o,t)})},i.prototype._compileElement=function(t,n,i){var r=this,o=this.$compile(n),s={element:n,cleanup:n.remove.bind(n),locals:t,link:function(a){if(t.$scope=a,i.controller){var l=e.extend({},t,{$element:n}),c=r._createController(i,l,t);n.data("$ngControllerController",c),n.children().data("$ngControllerController",c),s.controller=c}return o(a)}};return s},i.prototype._createController=function(i,r,o){var s;if(!n||("function"==typeof t.preAssignBindingsEnabled?t.preAssignBindingsEnabled():1===e.version.major&&e.version.minor<6)){var a=this.$controller(i.controller,r,!0);i.bindToController&&e.extend(a.instance,o),s=a()}else s=this.$controller(i.controller,r),i.bindToController&&e.extend(s,o);return i.controllerAs&&(r.$scope[i.controllerAs]=s),e.isFunction(s.$onInit)&&s.$onInit(),s},i.prototype._fetchContentElement=function(t){var n=t.contentElement,i=null;return e.isString(n)?i=r(n=document.querySelector(n)):(n=n[0]||n,i=document.contains(n)?r(n):function(){n.parentNode&&n.parentNode.removeChild(n)}),{element:e.element(n),restore:i};function r(t){var e=t.parentNode,n=t.nextElementSibling;return function(){n?e.insertBefore(t,n):e.appendChild(t)}}}}e.module("material.core").provider("$mdCompiler",t),t.$inject=["$compileProvider"]}(),function(){p.$inject=["$$MdGestureHandler","$$rAF","$timeout"],g.$inject=["$mdGesture","$$MdGestureHandler"];var n,i,r={},o=6,s=!1,a=!1,l=null,c=!1;if(t.navigator)var u=t.navigator.userAgent||t.navigator.vendor||t.opera,h=u.match(/ipad|iphone|ipod/i),d=u.match(/android/i);function f(){}function p(n,i,a){var l=function(){for(var t=document.createElement("div"),n=["","webkit","Moz","MS","ms","o"],i=0;i<n.length;i++){var r=n[i],o=r?r+"TouchAction":"touchAction";if(e.isDefined(t.style[o]))return o}}(),c=void 0!==t.jQuery&&e.element===t.jQuery,u={handler:function(t,i){var o=new n(t);return e.extend(o,i),r[t]=o,u},register:function(t,e,n){var i=r[e.replace(/^\$md./,"")];if(!i)throw new Error("Failed to register element with handler "+e+". Available handlers: "+Object.keys(r).join(", "));return i.registerElement(t,n)},isAndroid:d,isIos:h,isHijackingClicks:(h||d)&&!c&&!s};function f(t){return function(e,n){n.distance<this.state.options.maxDistance&&this.dispatchEvent(e,t,n)}}return u.isHijackingClicks&&(u.handler("click",{options:{maxDistance:o},onEnd:f("click")}),u.handler("focus",{options:{maxDistance:o},onEnd:function(t,e){e.distance<this.state.options.maxDistance&&S(t.target)&&(this.dispatchEvent(t,"focus",e),t.target.focus())}}),u.handler("mouseup",{options:{maxDistance:o},onEnd:f("mouseup")}),u.handler("mousedown",{onStart:function(t){this.dispatchEvent(t,"mousedown")}})),u.handler("press",{onStart:function(t,e){this.dispatchEvent(t,"$md.pressdown")},onEnd:function(t,e){this.dispatchEvent(t,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){a.cancel(this.state.timeout)},onStart:function(t,n){if(!this.state.registeredParent)return this.cancel();this.state.pos={x:n.x,y:n.y},this.state.timeout=a(e.bind(this,function(){this.dispatchEvent(t,"$md.hold"),this.cancel()}),this.state.options.delay,!1)},onMove:function(t,e){l||"touchmove"!==t.type||t.preventDefault();var n=this.state.pos.x-e.x,i=this.state.pos.y-e.y;Math.sqrt(n*n+i*i)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onSetup:function(t,e){l&&(this.oldTouchAction=t[0].style[l],t[0].style[l]=e.horizontal?"pan-y":"pan-x")},onCleanup:function(t){this.oldTouchAction&&(t[0].style[l]=this.oldTouchAction)},onStart:function(t){this.state.registeredParent||this.cancel()},onMove:function(t,e){var n,i;l||"touchmove"!==t.type||t.preventDefault(),this.state.dragPointer?this.dispatchDragMove(t):(this.state.options.horizontal?(n=Math.abs(e.distanceX)>this.state.options.minDistance,i=Math.abs(e.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(n=Math.abs(e.distanceY)>this.state.options.minDistance,i=Math.abs(e.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),n?(this.state.dragPointer=v(t),_(t,this.state.dragPointer),this.dispatchEvent(t,"$md.dragstart",this.state.dragPointer)):i&&this.cancel())},dispatchDragMove:i.throttle(function(t){this.state.isRunning&&(_(t,this.state.dragPointer),this.dispatchEvent(t,"$md.drag",this.state.dragPointer))}),onEnd:function(t,e){this.state.dragPointer&&(_(t,this.state.dragPointer),this.dispatchEvent(t,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(t,e){var n;Math.abs(e.velocityX)>this.state.options.minVelocity&&Math.abs(e.distanceX)>this.state.options.minDistance?(n="left"==e.directionX?"$md.swipeleft":"$md.swiperight",this.dispatchEvent(t,n)):Math.abs(e.velocityY)>this.state.options.minVelocity&&Math.abs(e.distanceY)>this.state.options.minDistance&&(n="up"==e.directionY?"$md.swipeup":"$md.swipedown",this.dispatchEvent(t,n))}})}function m(t){this.name=t,this.state={}}function g(t,o){if(!a){!c&&t.isHijackingClicks&&(document.addEventListener("click",function(t){var n;n=h?e.isDefined(t.webkitForce)&&0===t.webkitForce:0===t.clientX&&0===t.clientY;n||t.$material||t.isIonicTap||b(t)?(l=null,"label"===t.target.tagName.toLowerCase()&&(l={x:t.x,y:t.y})):(t.preventDefault(),t.stopPropagation(),l=null)},!0),document.addEventListener("mouseup",s,!0),document.addEventListener("mousedown",s,!0),document.addEventListener("focus",s,!0),c=!0);e.element(document).on("mousedown touchstart pointerdown",function(t){if(n)return;var e=+Date.now();if(i&&!y(t,i)&&e-i.endTime<1500)return;n=v(t),u("start",t)}).on("mousemove touchmove pointermove",function(t){if(!n||!y(t,n))return;_(t,n),u("move",t)}).on("mouseup mouseleave touchend touchcancel pointerup pointercancel",function(t){if(!n||!y(t,n))return;_(t,n),n.endTime=+Date.now(),"pointercancel"!==t.type&&u("end",t);i=n,n=null}).on("$$mdGestureReset",function(){i=n=null})}function s(t){!t.clientX&&!t.clientY||t.$material||t.isIonicTap||b(t)||"mousedown"===t.type&&(S(t.target)||S(document.activeElement))||(t.preventDefault(),t.stopPropagation())}function u(t,e){var i;for(var s in r)(i=r[s])instanceof o&&("start"===t&&i.cancel(),i[t](e,n))}}function v(t){var e=w(t),n={startTime:+Date.now(),target:t.target,type:t.type.charAt(0)};return n.startX=n.x=e.pageX,n.startY=n.y=e.pageY,n}function y(t,e){return t&&e&&t.type.charAt(0)===e.type}function b(t){return l&&l.x===t.x&&l.y===t.y}function _(t,e){var n=w(t),i=e.x=n.pageX,r=e.y=n.pageY;e.distanceX=i-e.startX,e.distanceY=r-e.startY,e.distance=Math.sqrt(e.distanceX*e.distanceX+e.distanceY*e.distanceY),e.directionX=e.distanceX>0?"right":e.distanceX<0?"left":"",e.directionY=e.distanceY>0?"down":e.distanceY<0?"up":"",e.duration=+Date.now()-e.startTime,e.velocityX=e.distanceX/e.duration,e.velocityY=e.distanceY/e.duration}function w(t){return(t=t.originalEvent||t).touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t}function S(t){return!!t&&"-1"!==t.getAttribute("tabindex")&&!t.hasAttribute("disabled")&&(t.hasAttribute("tabindex")||t.hasAttribute("href")||t.isContentEditable||-1!==["INPUT","SELECT","BUTTON","TEXTAREA","VIDEO","AUDIO"].indexOf(t.nodeName))}e.module("material.core.gestures",[]).provider("$mdGesture",f).factory("$$MdGestureHandler",function(){var i=void 0!==t.jQuery&&e.element===t.jQuery;return m.prototype={options:{},dispatchEvent:i?function(t,i,r){r=r||n;var o=new e.element.Event(i);o.$material=!0,o.pointer=r,o.srcEvent=t,e.extend(o,{clientX:r.x,clientY:r.y,screenX:r.x,screenY:r.y,pageX:r.x,pageY:r.y,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey}),e.element(r.target).trigger(o)}:function(e,i,r){var o;r=r||n,"click"===i||"mouseup"===i||"mousedown"===i?"function"==typeof t.MouseEvent?o=new MouseEvent(i,{bubbles:!0,cancelable:!0,screenX:Number(e.screenX),screenY:Number(e.screenY),clientX:Number(r.x),clientY:Number(r.y),ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,relatedTarget:e.relatedTarget||null}):(o=document.createEvent("MouseEvents")).initMouseEvent(i,!0,!0,t,e.detail,r.x,r.y,r.x,r.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget||null):"function"==typeof t.CustomEvent?o=new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:{}}):(o=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,{});o.$material=!0,o.pointer=r,o.srcEvent=e,r.target.dispatchEvent(o)},onSetup:e.noop,onCleanup:e.noop,onStart:e.noop,onMove:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(t,n){if(!this.state.isRunning){var i=this.getNearestParent(t.target),r=i&&i.$mdGesture[this.name]||{};this.state={isRunning:!0,options:e.extend({},this.options,r),registeredParent:i},this.onStart(t,n)}},move:function(t,e){this.state.isRunning&&this.onMove(t,e)},end:function(t,e){this.state.isRunning&&(this.state.isRunning=!1,this.onEnd(t,e))},cancel:function(t,e){this.onCancel(t,e),this.state={}},getNearestParent:function(t){for(var e=t;e;){if((e.$mdGesture||{})[this.name])return e;e=e.parentNode}return null},registerElement:function(t,e){var n=this;return t[0].$mdGesture=t[0].$mdGesture||{},t[0].$mdGesture[this.name]=e||{},t.on("$destroy",i),n.onSetup(t,e||{}),i;function i(){delete t[0].$mdGesture[n.name],t.off("$destroy",i),n.onCleanup(t,e||{})}}},m}).run(g),f.prototype={disableAll:function(){a=!0},skipClickHijack:function(){return s=!0},setMaxClickDistance:function(t){o=parseInt(t)},$get:["$$MdGestureHandler","$$rAF","$timeout",function(t,e,n){return new p(t,e,n)}]}}(),function(){function n(n,i,r){this.$timeout=n,this.$mdUtil=i,this.$rootScope=r,this.pointerEvent="MSPointerEvent"in t?"MSPointerDown":"PointerEvent"in t?"pointerdown":null,this.bodyElement=e.element(document.body),this.isBuffering=!1,this.bufferTimeout=null,this.lastInteractionType=null,this.lastInteractionTime=null,this.inputHandler=this.onInputEvent.bind(this),this.bufferedInputHandler=this.onBufferInputEvent.bind(this),this.inputEventMap={keydown:"keyboard",mousedown:"mouse",mouseenter:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},this.iePointerMap={2:"touch",3:"touch",4:"mouse"},this.initializeEvents(),this.$rootScope.$on("$destroy",this.deregister.bind(this))}n.$inject=["$timeout","$mdUtil","$rootScope"],e.module("material.core.interaction",[]).service("$mdInteraction",n),n.prototype.deregister=function(){this.bodyElement.off("keydown mousedown",this.inputHandler),"ontouchstart"in document.documentElement&&this.bodyElement.off("touchstart",this.bufferedInputHandler),this.pointerEvent&&this.bodyElement.off(this.pointerEvent,this.inputHandler)},n.prototype.initializeEvents=function(){this.bodyElement.on("keydown mousedown",this.inputHandler),"ontouchstart"in document.documentElement&&this.bodyElement.on("touchstart",this.bufferedInputHandler),this.pointerEvent&&this.bodyElement.on(this.pointerEvent,this.inputHandler)},n.prototype.onInputEvent=function(t){if(!this.isBuffering){var e=this.inputEventMap[t.type];"pointer"===e&&(e=this.iePointerMap[t.pointerType]||t.pointerType),this.lastInteractionType=e,this.lastInteractionTime=this.$mdUtil.now()}},n.prototype.onBufferInputEvent=function(t){this.$timeout.cancel(this.bufferTimeout),this.onInputEvent(t),this.isBuffering=!0,this.bufferTimeout=this.$timeout(function(){this.isBuffering=!1}.bind(this),650,!1)},n.prototype.getLastInteractionType=function(){return this.lastInteractionType},n.prototype.isUserInvoked=function(t){var n=e.isNumber(t)?t:15;return this.lastInteractionTime>=this.$mdUtil.now()-n}}(),e.module("material.core").provider("$$interimElement",function(){return i.$inject=["$document","$q","$rootScope","$timeout","$rootElement","$animate","$mdUtil","$mdCompiler","$mdTheming","$injector","$exceptionHandler"],t.$get=i,t;function t(t){s.$inject=["$$interimElement","$injector"];var n=["onHide","onShow","onRemove"],i={},r={presets:{}},o={setDefaults:function(t){return r.optionsFactory=t.options,r.methods=(t.methods||[]).concat(n),o},addPreset:function(e,i){if((i=i||{}).methods=i.methods||[],i.options=i.options||function(){return{}},/^cancel|hide|show$/.test(e))throw new Error("Preset '"+e+"' in "+t+" is reserved!");if(i.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+t+" is reserved!");return r.presets[e]={methods:i.methods.concat(n),optionsFactory:i.options,argOption:i.argOption},o},addMethod:function(t,e){return i[t]=e,o},$get:s};return o.addPreset("build",{methods:["controller","controllerAs","resolve","multiple","template","templateUrl","themable","transformTemplate","parent","contentElement"]}),o;function s(n,o){var s,a,l=n(),c={hide:l.hide,cancel:l.cancel,show:function(t){return(t=t||{})._options&&(t=t._options),l.show(e.extend({},a,t))},destroy:function(t){return l.destroy(t)}};return s=r.methods||[],a=u(r.optionsFactory,{}),e.forEach(i,function(t,e){c[e]=t}),e.forEach(r.presets,function(t,n){var i=u(t.optionsFactory,{}),r=(t.methods||[]).concat(s);function o(t){this._options=e.extend({},i,t)}if(e.extend(i,{$type:n}),e.forEach(r,function(t){o.prototype[t]=function(e){return this._options[t]=e,this}}),t.argOption){var a="show"+n.charAt(0).toUpperCase()+n.slice(1);c[a]=function(t){var e=c[n](t);return c.show(e)}}c[n]=function(n){return arguments.length&&t.argOption&&!e.isObject(n)&&!e.isArray(n)?(new o)[t.argOption](n):new o(n)}}),c;function u(e,n){var i={};return i[t]=c,o.invoke(e||function(){return n},{},i)}}}function i(t,i,r,o,s,a,l,c,u,h,d){return function(){var f,p=!1,m=[],g=[],v=[];return f={show:function(t){var e=new b((t=t||{})||{}),n=t.multiple?i.resolve():i.all(m);t.multiple||(n=n.then(function(){var t=g.concat(v.map(f.cancel));return i.all(t)}));var r=n.then(function(){return e.show().then(function(){v.push(e)}).catch(function(t){return t}).finally(function(){m.splice(m.indexOf(r),1)})});return m.push(r),e.deferred.promise.catch(function(t){return t instanceof Error&&d(t),t}),e.deferred.promise},hide:y(function(t,e){return(e=e||{}).closeAll?i.all(v.slice().reverse().map(r)):e.closeTo!==n?i.all(v.slice(e.closeTo).map(r)):r(v[v.length-1]);function r(n){if(!n)return i.when(t);var r=n.remove(t,!1,e||{}).catch(function(t){return t}).finally(function(){g.splice(g.indexOf(r),1)});return v.splice(v.indexOf(n),1),g.push(r),n.deferred.promise}}),cancel:y(function(t,n){var r=v.pop();if(!r)return i.when(t);var o=r.remove(t,!0,n||{}).catch(function(t){return t}).finally(function(){g.splice(g.indexOf(o),1)});return g.push(o),r.deferred.promise.catch(e.noop)}),destroy:function(t){var n=t?null:v.shift(),r=e.element(t).length&&e.element(t)[0].parentNode;if(r){var o=v.filter(function(t){return t.options.element[0]===r});o.length&&(n=o[0],v.splice(v.indexOf(n),1))}return n?n.remove(p,!1,{$destroy:!0}):i.when(p)},$injector_:h};function y(t){return function(){var e=arguments;return v.length?t.apply(f,e):m.length?m[0].finally(function(){return t.apply(f,e)}):i.when("No interim elements currently showing up.")}}function b(h){var d,p,m=i.when(!0);return h=function(t){return(t=t||{}).template&&(t.template=l.processTemplate(t.template)),e.extend({preserveScope:!1,cancelAutoHide:e.noop,scope:t.scope||r.$new(t.isolateScope),onShow:function(t,e,n){return a.enter(e,n.parent)},onRemove:function(t,e){return e&&a.leave(e)||i.when()}},t)}(h),d={options:h,deferred:i.defer(),show:function(){return i(function(n,r){function o(t){d.deferred.reject(t),r(t)}h.onCompiling&&h.onCompiling(h),function(t){return(t.skipCompile?null:c.compile(t))||i(function(e){e({locals:{},link:function(){return t.element}})})}(h).then(function(r){p=function(n,i){e.extend(n.locals,i);var r=n.link(i.scope);return i.element=r,i.parent=function(n,i){var r,o=i.parent;return((o=e.isFunction(o)?o(i.scope,n,i):e.isString(o)?e.element(t[0].querySelector(o)):e.element(o))||{}).length?o:(s[0]&&s[0].querySelector&&(r=s[0].querySelector(":not(svg) > body")),r||(r=s[0]),"#comment"==r.nodeName&&(r=t[0].body),e.element(r))}(r,i),i.themable&&u(r),r}(r,h),h.cleanupElement=r.cleanup,m=function(t,n,r){var o=n.onShowing||e.noop,s=n.onComplete||e.noop;try{o(n.scope,t,n,r)}catch(t){return i.reject(t)}return i(function(e,o){try{i.when(n.onShow(n.scope,t,n,r)).then(function(){s(n.scope,t,n),g(),e(t)},o)}catch(t){o(t.message)}})}(p,h,r.controller).then(n,o)}).catch(o)})},remove:function(t,n,r){return p?((h=e.extend(h||{},r||{})).cancelAutoHide&&h.cancelAutoHide(),h.element.triggerHandler("$mdInterimElementRemove"),!0===h.$destroy?v(h.element,h).then(function(){n&&s(t)||o(t)}):(i.when(m).finally(function(){v(h.element,h).then(function(){n?s(t):o(t)},s)}),d.deferred.promise)):i.when(!1);function o(t){d.deferred.resolve(t)}function s(t){d.deferred.reject(t)}}};function g(){var t,i=e.noop;h.hideDelay&&(t=o(f.hide,h.hideDelay),i=function(){o.cancel(t)}),h.cancelAutoHide=function(){i(),h.cancelAutoHide=n}}function v(t,n){var r=n.onRemoving||e.noop;return i(function(e,o){try{var s=i.when(n.onRemove(n.scope,t,n)||!0);r(t,s),n.$destroy?(e(t),!n.preserveScope&&n.scope&&s.then(function(){n.scope.$destroy()})):s.then(function(){!n.preserveScope&&n.scope&&n.scope.$destroy(),e(t)},o)}catch(t){o(t.message)}})}}}}}),function(){var t,n,i,r=/(-gt)?-(sm|md|lg|print)/g,o=/\s+/g,s=["grow","initial","auto","none","noshrink","nogrow"],a=["row","column"],l=["","start","center","end","stretch","space-around","space-between"],c=["","start","center","end","stretch"],u={enabled:!0,breakpoints:[]};function h(){var t=!!document.querySelector("[md-layouts-disabled]");u.enabled=!t}function d(){return u.enabled=!1,{restrict:"A",priority:"900"}}function f(r){return["$mdUtil","$interpolate","$log",function(s,a,l){return t=s,n=a,i=l,{restrict:"A",compile:function(t,n){var i;return u.enabled&&(g(r,b(r,n,""),v(0,r,n)),o(0,t),i=o),i||e.noop}}}];function o(t,e){e.addClass(r)}}function p(t){var n=t.split("-");return["$log",function(i){return i.warn(t+"has been deprecated. Please use a `"+n[0]+"-gt-<xxx>` variant."),e.noop}]}function m(e,n,i,o){var s,a=i[0].nodeName.toLowerCase();switch(e.replace(r,"")){case"flex":"md-button"!=a&&"fieldset"!=a||(s="<"+a+" "+e+"></"+a+">",o.warn(t.supplant("Markup '{0}' may not work as expected in IE Browsers. Consult '{1}' for details.",[s,"https://github.com/philipwalton/flexbugs#9-some-html-elements-cant-be-flex-containers"])))}}function g(n,i,u){if(!y(i)){switch(n.replace(r,"")){case"layout":_(i,a)||(i=a[0]);break;case"flex":_(i,s)||isNaN(i)&&(i="");break;case"flex-offset":case"flex-order":i&&!isNaN(+i)||(i="0");break;case"layout-align":var h=function(t){var e,n={main:"start",cross:"stretch"};return 0!==(t=t||"").indexOf("-")&&0!==t.indexOf(" ")||(t="none"+t),(e=t.toLowerCase().trim().replace(o,"-").split("-")).length&&"space"===e[0]&&(e=[e[0]+"-"+e[1],e[2]]),e.length>0&&(n.main=e[0]||n.main),e.length>1&&(n.cross=e[1]||n.cross),l.indexOf(n.main)<0&&(n.main="start"),c.indexOf(n.cross)<0&&(n.cross="stretch"),n}(i);i=t.supplant("{main}-{cross}",h);break;case"layout-padding":case"layout-margin":case"layout-fill":case"layout-wrap":case"layout-nowrap":i=""}null!=i&&(u||e.noop)(i)}return i?i.trim():""}function v(t,e,n){return function(t){y(t)||(n[n.$normalize(e)]=t)}}function y(t){return(t||"").indexOf(n.startSymbol())>-1}function b(t,e,n){var i=e.$normalize(t);return e[i]?e[i].trim().replace(o,"-"):n||null}function _(t,e,n){t=n&&t?t.replace(o,n):t;var i=!1;return t&&e.forEach(function(e){e=n?e.replace(o,n):e,i=i||e===t}),i}!function(r){var s,a=/^((?:x|data)[:\-_])/i,l=/([:\-_]+(.))/g,c=["layout","flex","flex-order","flex-offset","layout-align"],y=["show","hide","layout-padding","layout-margin"];function _(t){return t.replace(a,"").replace(l,function(t,e,n,i){return i?n.toUpperCase():n})}e.forEach(["","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","print"],function(s){e.forEach(c,function(a){var l=s?a+"-"+s:a;r.directive(_(l),function(r){return["$mdUtil","$interpolate","$log",function(o,a,l){return t=o,n=a,i=l,{restrict:"A",compile:function(t,n){var o;return u.enabled&&(m(r,0,t,i),g(r,b(r,n,""),v(0,r,n)),o=s),o||e.noop}}}];function s(t,n,i){var s=function(t,n){var i;return function(r){var s=g(n,r||"");e.isDefined(s)&&(i&&t.removeClass(i),i=s?n+"-"+s.trim().replace(o,"-"):n,t.addClass(i))}}(n,r),a=i.$observe(i.$normalize(r),s);s(b(r,i,"")),t.$on("$destroy",function(){a()})}}(l))}),e.forEach(y,function(t){var e=s?t+"-"+s:t;r.directive(_(e),f(e))})}),r.provider("$$mdLayout",function(){return{$get:e.noop,validateAttributeValue:g,validateAttributeUsage:m,disableLayouts:function(t){u.enabled=!0!==t}}}).directive("mdLayoutCss",d).directive("ngCloak",(s="ng-cloak",["$timeout",function(t){return{restrict:"A",priority:-10,compile:function(n){return u.enabled?(n.addClass(s),function(e,n){t(function(){n.removeClass(s)},10,!1)}):e.noop}}}])).directive("layoutWrap",f("layout-wrap")).directive("layoutNowrap",f("layout-nowrap")).directive("layoutNoWrap",f("layout-no-wrap")).directive("layoutFill",f("layout-fill")).directive("layoutLtMd",p("layout-lt-md")).directive("layoutLtLg",p("layout-lt-lg")).directive("flexLtMd",p("flex-lt-md")).directive("flexLtLg",p("flex-lt-lg")).directive("layoutAlignLtMd",p("layout-align-lt-md")).directive("layoutAlignLtLg",p("layout-align-lt-lg")).directive("flexOrderLtMd",p("flex-order-lt-md")).directive("flexOrderLtLg",p("flex-order-lt-lg")).directive("offsetLtMd",p("flex-offset-lt-md")).directive("offsetLtLg",p("flex-offset-lt-lg")).directive("hideLtMd",p("hide-lt-md")).directive("hideLtLg",p("hide-lt-lg")).directive("showLtMd",p("show-lt-md")).directive("showLtLg",p("show-lt-lg")).config(h)}(e.module("material.core.layout",["ng"]))}(),function(){function t(t){this._$timeout=t,this._liveElement=this._createLiveElement(),this._announceTimeout=100}t.$inject=["$timeout"],e.module("material.core").service("$mdLiveAnnouncer",t),t.prototype.announce=function(t,e){e||(e="polite");var n=this;n._liveElement.textContent="",n._liveElement.setAttribute("aria-live",e),n._$timeout(function(){n._liveElement.textContent=t},n._announceTimeout,!1)},t.prototype._createLiveElement=function(){var t=document.createElement("div");return t.classList.add("md-visually-hidden"),t.setAttribute("role","status"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),document.body.appendChild(t),t}}(),e.module("material.core.meta",[]).provider("$$mdMeta",function(){var t=e.element(document.head),n={};function i(t){if(n[t])return!0;var i=document.getElementsByName(t)[0];return!!i&&(n[t]=e.element(i),!0)}var r={setMeta:function(r,o){if(i(r),n[r])n[r].attr("content",o);else{var s=e.element('<meta name="'+r+'" content="'+o+'"/>');t.append(s),n[r]=s}return function(){n[r].attr("content",""),n[r].remove(),delete n[r]}},getMeta:function(t){if(!i(t))throw Error("$$mdMeta: could not find a meta tag with the name '"+t+"'");return n[t].attr("content")}};return e.extend({},r,{$get:function(){return r}})}),function(){function t(t,i){var r,o=[],s={};return r={notFoundError:function(e,n){t.error((n||"")+"No instance found for handle",e)},getInstances:function(){return o},get:function(t){if(!a(t))return null;var e,n,i;for(e=0,n=o.length;e<n;e++)if((i=o[e]).$$mdHandle===t)return i;return null},register:function(t,n){return n?(t.$$mdHandle=n,o.push(t),(i=s[n])&&(i.forEach(function(e){e.resolve(t)}),delete s[n]),function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}):e.noop;var i},when:function(t){if(a(t)){var e=i.defer(),o=r.get(t);return o?e.resolve(o):(s[t]===n&&(s[t]=[]),s[t].push(e)),e.promise}return i.reject("Invalid `md-component-id` value.")}};function a(t){return t&&""!==t}}t.$inject=["$log","$q"],e.module("material.core").factory("$mdComponentRegistry",t)}(),function(){function t(t){return{attach:function(n,i,r){return r=e.extend(function(t){return t.hasClass("md-icon-button")?{isMenuItem:t.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:t.hasClass("md-menu-item"),dimBackground:!0}}(i),r),t.attach(n,i,r)}}}t.$inject=["$mdInkRipple"],e.module("material.core").factory("$mdButtonInkRipple",t)}(),function(){function t(t){return{attach:function(n,i,r){return t.attach(n,i,e.extend({center:!0,dimBackground:!1,fitRipple:!0},r))}}}t.$inject=["$mdInkRipple"],e.module("material.core").factory("$mdCheckboxInkRipple",t)}(),function(){function t(t){return{attach:function(n,i,r){return t.attach(n,i,e.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},r))}}}t.$inject=["$mdInkRipple"],e.module("material.core").factory("$mdListInkRipple",t)}(),function(){n.$inject=["$scope","$element","rippleOptions","$window","$timeout","$mdUtil","$mdColorUtil"],t.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],e.module("material.core").provider("$mdInkRipple",function(){var t=!1;return{disableInkRipple:function(){t=!0},$get:["$injector",function(i){return{attach:function(r,o,s){return t||o.controller("mdNoInk")?e.noop:i.instantiate(n,{$scope:r,$element:o,rippleOptions:s})}}}]}}).directive("mdInkRipple",t).directive("mdNoInk",r).directive("mdNoBar",r).directive("mdNoStretch",r);function t(t,n){return{controller:e.noop,link:function(e,i,r){r.hasOwnProperty("mdInkRippleCheckbox")?n.attach(e,i):t.attach(e,i)}}}function n(t,n,i,r,o,s,a){this.$window=r,this.$timeout=o,this.$mdUtil=s,this.$mdColorUtil=a,this.$scope=t,this.$element=n,this.options=i,this.mousedown=!1,this.ripples=[],this.timeout=null,this.lastRipple=null,s.valueOnUse(this,"container",this.createContainer),this.$element.addClass("md-ink-ripple"),(n.controller("mdInkRipple")||{}).createRipple=e.bind(this,this.createRipple),(n.controller("mdInkRipple")||{}).setColor=e.bind(this,this.color),this.bindEvents()}function i(t,n){(t.mousedown||t.lastRipple)&&(t.mousedown=!1,t.$mdUtil.nextTick(e.bind(t,n),!1))}function r(){return{controller:e.noop}}n.prototype.color=function(t){var n,i,r=this;return e.isDefined(t)&&(r._color=r._parseColor(t)),r._color||r._parseColor(r.inkRipple())||r._parseColor((n=r.options&&r.options.colorElement?r.options.colorElement:[],(i=n.length?n[0]:r.$element[0])?r.$window.getComputedStyle(i).color:"rgb(0,0,0)"))},n.prototype.calculateColor=function(){return this.color()},n.prototype._parseColor=function(t,e){e=e||1;var n=this.$mdColorUtil;if(t)return 0===t.indexOf("rgba")?t.replace(/\d?\.?\d*\s*\)\s*$/,(.1*e).toString()+")"):0===t.indexOf("rgb")?n.rgbToRgba(t):0===t.indexOf("#")?n.hexToRgba(t):void 0},n.prototype.bindEvents=function(){this.$element.on("mousedown",e.bind(this,this.handleMousedown)),this.$element.on("mouseup touchend",e.bind(this,this.handleMouseup)),this.$element.on("mouseleave",e.bind(this,this.handleMouseup)),this.$element.on("touchmove",e.bind(this,this.handleTouchmove))},n.prototype.handleMousedown=function(t){if(!this.mousedown)if(t.hasOwnProperty("originalEvent")&&(t=t.originalEvent),this.mousedown=!0,this.options.center)this.createRipple(this.container.prop("clientWidth")/2,this.container.prop("clientWidth")/2);else if(t.srcElement!==this.$element[0]){var e=this.$element[0].getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top;this.createRipple(n,i)}else this.createRipple(t.offsetX,t.offsetY)},n.prototype.handleMouseup=function(){this.$timeout(function(){i(this,this.clearRipples)}.bind(this))},n.prototype.handleTouchmove=function(){i(this,this.deleteRipples)},n.prototype.deleteRipples=function(){for(var t=0;t<this.ripples.length;t++)this.ripples[t].remove()},n.prototype.clearRipples=function(){for(var t=0;t<this.ripples.length;t++)this.fadeInComplete(this.ripples[t])},n.prototype.createContainer=function(){var t=e.element('<div class="md-ripple-container"></div>');return this.$element.append(t),t},n.prototype.clearTimeout=function(){this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},n.prototype.isRippleAllowed=function(){var t=this.$element[0];do{if(!t.tagName||"BODY"===t.tagName)break;if(t&&e.isFunction(t.hasAttribute)){if(t.hasAttribute("disabled"))return!1;if("false"===this.inkRipple()||"0"===this.inkRipple())return!1}}while(t=t.parentNode);return!0},n.prototype.inkRipple=function(){return this.$element.attr("md-ink-ripple")},n.prototype.createRipple=function(t,n){if(this.isRippleAllowed()){var i=this,r=i.$mdColorUtil,o=e.element('<div class="md-ripple"></div>'),s=this.$element.prop("clientWidth"),a=this.$element.prop("clientHeight"),l=2*Math.max(Math.abs(s-t),t),c=2*Math.max(Math.abs(a-n),n),u=function(t,e,n){return t?Math.max(e,n):Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}(this.options.fitRipple,l,c),h=this.calculateColor();o.css({left:t+"px",top:n+"px",background:"black",width:u+"px",height:u+"px",backgroundColor:r.rgbaToRgb(h),borderColor:r.rgbaToRgb(h)}),this.lastRipple=o,this.clearTimeout(),this.timeout=this.$timeout(function(){i.clearTimeout(),i.mousedown||i.fadeInComplete(o)},157.5,!1),this.options.dimBackground&&this.container.css({backgroundColor:h}),this.container.append(o),this.ripples.push(o),o.addClass("md-ripple-placed"),this.$mdUtil.nextTick(function(){o.addClass("md-ripple-scaled md-ripple-active"),i.$timeout(function(){i.clearRipples()},450,!1)},!1)}},n.prototype.fadeInComplete=function(t){this.lastRipple===t&&(this.timeout||this.mousedown)||this.removeRipple(t)},n.prototype.removeRipple=function(t){var e=this;this.ripples.indexOf(t)<0||(this.ripples.splice(this.ripples.indexOf(t),1),t.removeClass("md-ripple-active"),t.addClass("md-ripple-remove"),0===this.ripples.length&&this.container.css({backgroundColor:""}),this.$timeout(function(){e.fadeOutComplete(t)},450,!1))},n.prototype.fadeOutComplete=function(t){t.remove(),this.lastRipple=null}}(),function(){function t(t){return{attach:function(n,i,r){return t.attach(n,i,e.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},r))}}}t.$inject=["$mdInkRipple"],e.module("material.core").factory("$mdTabInkRipple",t)}(),e.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100",contrastStrongLightColors:"400 500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A700",contrastStrongLightColors:"600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A200 A400 A700"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200",contrastStrongLightColors:"400 500 700"}}),function(t){function e(t){var e=!!document.querySelector("[md-themes-disabled]");t.disableTheming(e)}e.$inject=["$mdThemingProvider"],b.$inject=["$mdTheming","$interpolate","$parse","$mdUtil","$q","$log"],_.$inject=["$mdTheming"],y.$inject=["$mdColorPalette","$$mdMetaProvider"],x.$inject=["$injector","$mdTheming"],t.module("material.core.theming",["material.core.theming.palette","material.core.meta"]).directive("mdTheme",b).directive("mdThemable",_).directive("mdThemesDisabled",function(){return v.disableTheming=!0,{restrict:"A",priority:"900"}}).provider("$mdTheming",y).config(e).run(x);var i,r={},o={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.38)",4:"rgba(0,0,0,0.12)"},s={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.5)",4:"rgba(255,255,255,0.12)"},a="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",l="",c=k("rgba(0,0,0,0.87)"),u=k("rgba(255,255,255,0.87)"),h=k("rgb(255,255,255)"),d=["primary","accent","warn","background"],f="primary",p={accent:{default:"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{default:"50","hue-1":"A100","hue-2":"100","hue-3":"300"}},m={background:{default:"A400","hue-1":"800","hue-2":"900","hue-3":"A200"}};d.forEach(function(t){var e={default:"500","hue-1":"300","hue-2":"800","hue-3":"A100"};p[t]||(p[t]=e),m[t]||(m[t]=e)});var g=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],v={disableTheming:!1,generateOnDemand:!1,registeredStyles:[],nonce:null};function y(e,r){x.$inject=["$rootScope","$mdUtil","$q","$log"],i={};var c,u={},h=!1,f="default";t.extend(i,e);var y=function(e){var n=(e=t.isObject(e)?e:{}).theme||"default",o=e.hue||"800",s=i[e.palette]||i[u[n].colors[e.palette||"primary"].name],a=t.isObject(s[o])?s[o].hex:s[o];return"#"!==a.substr(0,1)&&(a="#"+a),function(t){var e=r.setMeta("theme-color",t),n=r.setMeta("msapplication-navbutton-color",t);return function(){e(),n()}}(a)};return c={definePalette:function(t,e){return e=e||{},i[t]=b(t,e),c},extendPalette:function(e,n){return b(e,t.extend({},i[e]||{},n))},theme:_,configuration:function(){return t.extend({},v,{defaultTheme:f,alwaysWatchTheme:h,registeredStyles:[].concat(v.registeredStyles)})},disableTheming:function(e){v.disableTheming=t.isUndefined(e)||!!e},registerStyles:function(t){v.registeredStyles.push(t)},setNonce:function(t){v.nonce=t},generateThemesOnDemand:function(t){v.generateOnDemand=t},setDefaultTheme:function(t){f=t},alwaysWatchTheme:function(t){h=t},enableBrowserColor:y,$get:x,_LIGHT_DEFAULT_HUES:p,_DARK_DEFAULT_HUES:m,_PALETTES:i,_THEMES:u,_parseRules:w,_rgba:T};function b(t,e){var n=g.filter(function(t){return!e[t]});if(n.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",n.join(", ")).replace("%2",t));return e}function _(e,n){if(u[e])return u[e];var i="string"==typeof(n=n||"default")?u[n]:n,r=new S(e);return i&&t.forEach(i.colors,function(e,n){r.colors[n]={name:e.name,hues:t.extend({},e.hues)}}),u[e]=r,r}function S(e){var n=this;function i(e){if((e=0===arguments.length||!!e)!==n.isDark){n.isDark=e,n.foregroundPalette=n.isDark?s:o,n.foregroundShadow=n.isDark?a:l;var i=n.isDark?m:p,r=n.isDark?p:m;return t.forEach(i,function(t,e){var i=n.colors[e],o=r[e];if(i)for(var s in i.hues)i.hues[s]===o[s]&&(i.hues[s]=t[s])}),n}}n.name=e,n.colors={},n.dark=i,i(!1),d.forEach(function(e){var i=(n.isDark?m:p)[e];n[e+"Palette"]=function(r,o){var s=n.colors[e]={name:r,hues:t.extend({},i,o)};return Object.keys(s.hues).forEach(function(t){if(!i[t])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",t).replace("%2",n.name).replace("%3",r).replace("%4",Object.keys(i).join(", ")))}),Object.keys(s.hues).map(function(t){return s.hues[t]}).forEach(function(t){if(-1==g.indexOf(t))throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",t).replace("%2",n.name).replace("%3",e).replace("%4",r).replace("%5",g.join(", ")))}),n},n[e+"Color"]=function(){var t=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+e+"Color() has been deprecated. Use $mdThemingProviderTheme."+e+"Palette() instead."),n[e+"Palette"].apply(n,t)}})}function x(e,r,o,s){var a=function(t,i){i===n&&(i=t,t=n),t===n&&(t=e),a.inherit(i,i)};return Object.defineProperty(a,"THEMES",{get:function(){return t.extend({},u)}}),Object.defineProperty(a,"PALETTES",{get:function(){return t.extend({},i)}}),Object.defineProperty(a,"ALWAYS_WATCH",{get:function(){return h}}),a.inherit=function(t,e){var i=e.controller("mdTheme")||t.data("$mdThemeController"),o=t.scope();if(d(i&&i.$mdTheme||("default"===f?"":f)),i){var a=h||i.$shouldWatch||r.parseAttributeBoolean(t.attr("md-theme-watch"));if(a||i.isAsyncTheme){var c=function(){u&&(u(),u=n)},u=i.registerChanges(function(t){d(t),a||c()});o?o.$on("$destroy",c):t.on("$destroy",c)}}function d(e){if(e){l(e)||s.warn("Attempted to use unregistered theme '"+e+"'. Register it with $mdThemingProvider.theme().");var n=t.data("$mdThemeName");n&&t.removeClass("md-"+n+"-theme"),t.addClass("md-"+e+"-theme"),t.data("$mdThemeName",e),i&&t.data("$mdThemeController",i)}}},a.registered=l,a.defaultTheme=function(){return f},a.generateTheme=function(t){C(u[t],t,v.nonce)},a.defineTheme=function(t,e){e=e||{};var n=_(t);return e.primary&&n.primaryPalette(e.primary,e.primaryHues),e.accent&&n.accentPalette(e.accent,e.accentHues),e.warn&&n.warnPalette(e.warn,e.warnHues),e.background&&n.backgroundPalette(e.background,e.backgroundHues),e.dark&&n.dark(),this.generateTheme(t),o.resolve(t)},a.setBrowserColor=y,a;function l(t){return t===n||""===t||a.THEMES[t]!==n}}}function b(e,n,i,r,o,s){return{priority:101,link:{pre:function(a,l,c){var u=[],h=n.startSymbol(),d=n.endSymbol(),f=c.mdTheme.trim(),p=f.substr(0,h.length)===h&&f.lastIndexOf(d)===f.length-d.length,m="::"===c.mdTheme.split(h).join("").split(d).join("").trim().substr(0,"::".length),g=function(){var t=n(c.mdTheme)(a);return i(t)(a)||t},v={isAsyncTheme:t.isFunction(g())||t.isFunction(g().then),registerChanges:function(e,n){return n&&(e=t.bind(n,e)),u.push(e),function(){var t=u.indexOf(e);t>-1&&u.splice(t,1)}},$setTheme:function(t){e.registered(t)||s.warn("attempted to use unregistered theme '"+t+"'"),v.$mdTheme=t;for(var n=u.length;n--;)u[n](t)},$shouldWatch:r.parseAttributeBoolean(l.attr("md-theme-watch"))||e.ALWAYS_WATCH||p&&!m};l.data("$mdThemeController",v);var y=function(e){if("string"==typeof e)return v.$setTheme(e);o.when(t.isFunction(e)?e():e).then(function(t){v.$setTheme(t)})};y(g());var b=a.$watch(g,function(t){t&&(y(t),v.$shouldWatch||b())})}}}}function _(t){return t}function w(e,n,r){!function(t,e){if(!i[(t.colors[e]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",t.name).replace("%2",e).replace("%3",Object.keys(i).join(", ")))}(e,n),r=r.replace(/THEME_NAME/g,e.name);var o=new RegExp("\\.md-"+e.name+"-theme","g");r=r.replace(/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue-[0-3]|shadow|default)-?(\d\.?\d*)?(contrast)?\s*\}\}'?"?/g,function(t,n,r,o,s){return"foreground"===n?"shadow"==r?e.foregroundShadow:e.foregroundPalette[r]||e.foregroundPalette[1]:(0!==r.indexOf("hue")&&"default"!==r||(r=e.colors[n].hues[r]),T((i[e.colors[n].name][r]||"")[s?"contrast":"value"],o))});var s=new RegExp("('|\")?{{\\s*([a-zA-Z]+)-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),a=[];return t.forEach(["default","hue-1","hue-2","hue-3"],function(t){var n=r.replace(s,function(n,r,o,s,a){var l=e.colors[o];return T(i[l.name][l.hues[t]]["color"===s?"value":"contrast"],a)});"default"!==t&&(n=n.replace(o,".md-"+e.name+"-theme.md-"+t)),"default"==e.name&&(n=n.replace(/((?:\s|>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)\.md-default-theme((?:\s|>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)/g,function(t,e,n){return t+", "+e+n})),a.push(n)}),a}var S={};function x(e,n){var o=document.head,s=o?o.firstElementChild:null,a=!v.disableTheming&&e.has("$MD_THEME_CSS")?e.get("$MD_THEME_CSS"):"";if(a+=v.registeredStyles.join(""),s&&0!==a.length){t.forEach(i,function(e,n){var i=e.contrastDefaultColor,r=e.contrastLightColors||[],o=e.contrastStrongLightColors||[],s=e.contrastDarkColors||[];"string"==typeof r&&(r=r.split(" ")),"string"==typeof o&&(o=o.split(" ")),"string"==typeof s&&(s=s.split(" ")),delete e.contrastDefaultColor,delete e.contrastLightColors,delete e.contrastStrongLightColors,delete e.contrastDarkColors,t.forEach(e,function(n,a){if(!t.isObject(n)){var l=k(n);if(!l)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",n).replace("%2",e.name).replace("%3",a));e[a]={hex:e[a],value:l,contrast:"light"===i?s.indexOf(a)>-1?c:o.indexOf(a)>-1?h:u:r.indexOf(a)>-1?o.indexOf(a)>-1?h:u:c}}})});var l=a.split(/\}(?!(\}|'|"|;))/).filter(function(t){return t&&t.trim().length}).map(function(t){return t.trim()+"}"});d.forEach(function(t){S[t]=""}),l.forEach(function(t){for(var e,n=0;e=d[n];n++)if(t.indexOf(".md-"+e)>-1)return S[e]+=t;for(n=0;e=d[n];n++)if(t.indexOf(e)>-1)return S[e]+=t;return S[f]+=t}),v.generateOnDemand||t.forEach(n.THEMES,function(t){r[t.name]||"default"!==n.defaultTheme()&&"default"===t.name||C(t,t.name,v.nonce)})}}function C(t,e,n){var i=document.head,o=i?i.firstElementChild:null;r[e]||(d.forEach(function(e){for(var r=w(t,e,S[e]);r.length;){var s=r.shift();if(s){var a=document.createElement("style");a.setAttribute("md-theme-style",""),n&&a.setAttribute("nonce",n),a.appendChild(document.createTextNode(s)),i.insertBefore(a,o)}}}),r[t.name]=!0)}function k(e){if(t.isArray(e)&&3==e.length)return e;if(/^rgb/.test(e))return e.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(t,e){return 3==e?parseFloat(t,10):parseInt(t,10)});if("#"==e.charAt(0)&&(e=e.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(e)){var n=e.length/3,i=e.substr(0,n),r=e.substr(n,n),o=e.substr(2*n);return 1===n&&(i+=i,r+=r,o+=o),[parseInt(i,16),parseInt(r,16),parseInt(o,16)]}}function T(e,n){return e?(4==e.length&&(e=t.copy(e),n?e.pop():n=e.pop()),n&&("number"==typeof n||"string"==typeof n&&n.length)?"rgba("+e.join(",")+","+n+")":"rgb("+e.join(",")+")"):"rgb('0,0,0')"}}(t.angular),e.module("material.components.autocomplete",["material.core","material.components.icon","material.components.virtualRepeat"]),function(){l.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q","$log","$mdLiveAnnouncer"],e.module("material.components.autocomplete").controller("MdAutocompleteCtrl",l);var t=48,i=5,r=8,o=2,s="standard",a="virtual";function l(l,c,u,h,d,f,p,m,g,v,y,b){var _,w,S,x=this,C=l.itemsExpr.split(/ in /i),k=C[1],T=null,M={},E=!1,A=[],I=!1,$=0,D=null,L=null,P=u.debounce(function(){x.hidden||B()}),O=a;x.documentElement=e.element(document.documentElement),_="hidden",w=function(t,n){!t&&n?(B(),st(!0,j.Count|j.Selected),T&&(u.disableScrollAround(T.ul),D=function(t){function e(t){t.preventDefault()}return t.on("wheel",e),t.on("touchmove",e),function(){t.off("wheel",e),t.off("touchmove",e)}}(e.element(T.wrap)),x.documentElement.on("click",H))):t&&!n&&(x.documentElement.off("click",H),u.enableScrolling(),D&&(D(),D=null))},S=!0,Object.defineProperty(x,_,{get:function(){return S},set:function(t){var e=S;S=t,w(t,e)}}),x.scope=l,x.parent=l.$parent,x.itemName=C[0],x.matches=[],x.loading=!1,x.hidden=!0,x.index=null,x.id=u.nextUid(),x.isDisabled=null,x.isRequired=null,x.isReadonly=null,x.hasNotFound=!1,x.selectedMessage=l.selectedMessage||"selected",x.keydown=function(t){switch(t.keyCode){case h.KEY_CODE.DOWN_ARROW:if(x.loading||tt())return;t.stopPropagation(),t.preventDefault(),x.index=Math.min(x.index+1,x.matches.length-1),at(),st(!1,j.Selected);break;case h.KEY_CODE.UP_ARROW:if(x.loading||tt())return;t.stopPropagation(),t.preventDefault(),x.index=x.index<0?x.matches.length-1:Math.max(0,x.index-1),at(),st(!1,j.Selected);break;case h.KEY_CODE.TAB:if(W(),x.hidden||x.loading||x.index<0||x.matches.length<1)return;it(x.index);break;case h.KEY_CODE.ENTER:if(x.hidden||x.loading||x.index<0||x.matches.length<1)return;if(tt())return;t.stopImmediatePropagation(),t.preventDefault(),it(x.index);break;case h.KEY_CODE.ESCAPE:if(t.preventDefault(),!(Z("blur")||!x.hidden||x.loading||Z("clear")&&l.searchText))return;t.stopPropagation(),rt(),l.searchText&&Z("clear")&&ot(),x.hidden=!0,Z("blur")&&function(t){t&&(E=!1,I=!1);T.input.blur()}(!0)}},x.blur=function(t){I=!1,E||(x.hidden=K(),dt("ngBlur",{$event:t}))},x.focus=function(t){I=!0,J()&&nt()&&ut();x.hidden=K(),dt("ngFocus",{$event:t})},x.clear=function(t){t&&t.stopPropagation();rt(),ot()},x.select=it,x.listEnter=function(){E=!0},x.listLeave=W,x.mouseUp=function(){T.input.focus()},x.getCurrentDisplayValue=et,x.registerSelectedItemWatcher=function(t){-1===A.indexOf(t)&&A.push(t)},x.unregisterSelectedItemWatcher=function(t){var e=A.indexOf(t);-1!==e&&A.splice(e,1)},x.notFoundVisible=ct,x.loadingIsVisible=function(){return x.loading&&!tt()},x.positionDropdown=B;var N,j={Count:1,Selected:2};return u.initOptionalProperties(l,g,{searchText:"",selectedItem:null,clearButton:!1,disableVirtualRepeat:!1}),d(c),N=parseInt(l.delay,10)||0,g.$observe("disabled",function(t){x.isDisabled=u.parseAttributeBoolean(t,!1)}),g.$observe("required",function(t){x.isRequired=u.parseAttributeBoolean(t,!1)}),g.$observe("readonly",function(t){x.isReadonly=u.parseAttributeBoolean(t,!1)}),l.$watch("searchText",N?u.debounce(U,N):U),l.$watch("selectedItem",z),e.element(f).on("resize",P),l.$on("$destroy",Y),void u.nextTick(function(){var t;t=function(){var t,n;for(t=c;t.length&&(n=t.attr("md-autocomplete-snap"),!e.isDefined(n));t=t.parent());if(t.length)return{snap:t[0],wrap:"width"===n.toLowerCase()?t[0]:c.find("md-autocomplete-wrap")[0]};var i=c.find("md-autocomplete-wrap")[0];return{snap:i,wrap:i}}(),(T={main:c[0],scrollContainer:c[0].querySelector(".md-virtual-repeat-container, .md-standard-list-container"),scroller:c[0].querySelector(".md-virtual-repeat-scroller, .md-standard-list-scroller"),ul:c.find("ul")[0],input:c.find("input")[0],wrap:t.wrap,snap:t.snap,root:document.body}).li=T.ul.getElementsByTagName("li"),T.$=function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e.element(t[i]));return n}(T),O=T.scrollContainer.classList.contains("md-standard-list-container")?s:a,L=T.$.input.controller("ngModel"),T.$.root.length&&(d(T.$.scrollContainer),T.$.scrollContainer.detach(),T.$.root.append(T.$.scrollContainer),p.pin&&p.pin(T.$.scrollContainer,m)),l.autofocus&&c.on("focus",F),l.inputAriaDescribedBy&&T.input.setAttribute("aria-describedby",l.inputAriaDescribedBy),l.floatingLabel||(l.inputAriaLabel?T.input.setAttribute("aria-label",l.inputAriaLabel):l.inputAriaLabelledBy?T.input.setAttribute("aria-labelledby",l.inputAriaLabelledBy):l.placeholder&&T.input.setAttribute("aria-label",l.placeholder))});function R(){l.requireMatch&&L&&L.$setValidity("md-require-match",!!l.selectedItem||!l.searchText)}function B(){if(!T)return u.nextTick(B,!1,l);var e,n=(l.dropdownItems||i)*t,s=T.wrap.getBoundingClientRect(),a=T.snap.getBoundingClientRect(),h=T.root.getBoundingClientRect(),d=a.bottom-h.top,f=h.bottom-a.top,p=s.left-h.left,m=s.width,v=function(){var t=0,e=c.find("md-input-container");if(e.length){var n=e.find("input");t=e.prop("offsetHeight"),t-=n.prop("offsetTop"),t-=n.prop("offsetHeight"),t+=e.prop("offsetTop")}return t}(),y=l.dropdownPosition,b=h.bottom-a.bottom-r+u.getViewportTop(),_=a.top-r;y||(y=b>n?"bottom":_>n?"top":_>b?"top":"bottom"),g.mdFloatingLabel&&(p+=o,m-=2*o),e={left:p+"px",minWidth:m+"px",maxWidth:Math.max(s.right-h.left,h.right-s.left)-r+"px"},"top"===y?(e.top="auto",e.bottom=f+"px",e.maxHeight=Math.min(n,_)+"px"):(b=h.bottom-s.bottom-r+u.getViewportTop(),e.top=d-v+"px",e.bottom="auto",e.maxHeight=Math.min(n,b)+"px"),T.$.scrollContainer.css(e),u.nextTick(function(){var t=T.scrollContainer.getBoundingClientRect(),e={};t.right>h.right&&(e.left=s.right-t.width+"px");T.$.scrollContainer.css(e)},!1,l)}function F(){T.input.focus()}function Y(){if(x.hidden||u.enableScrolling(),e.element(f).off("resize",P),T){e.forEach(["ul","scroller","scrollContainer","input"],function(t){T.$[t].remove()})}}function H(t){x.hidden=!0}function W(){I||x.hidden||T.input.focus(),E=!1,x.hidden=K()}function z(t,n){R(),t?G(t).then(function(e){l.searchText=e,function(t,e){A.forEach(function(n){n(t,e)})}(t,n)}):n&&l.searchText&&G(n).then(function(t){e.isString(l.searchText)&&t.toString().toLowerCase()===l.searchText.toLowerCase()&&(l.searchText="")}),t!==n&&e.isFunction(l.itemChange)&&l.itemChange(q(l.selectedItem))}function U(t,n){x.index=l.autoselect?0:-1,t!==n&&(R(),G(l.selectedItem).then(function(i){t!==i&&(l.selectedItem=null,t!==n&&e.isFunction(l.textChange)&&l.textChange(),nt()?ut():(x.matches=[],X(!1),st(!0,j.Count)))}))}function V(){return e.isNumber(l.minLength)?l.minLength:1}function G(t){return v.when(function(t){return t&&l.itemText?l.itemText(q(t)):null}(t)||t).then(function(t){return t&&!e.isString(t)&&y.warn("md-autocomplete: Could not resolve display value to a string. Please check the `md-item-text` attribute."),t})}function q(t){if(!t)return n;var e={};return x.itemName&&(e[x.itemName]=t),e}function X(t){x.loading!==t&&(x.loading=t),x.hidden=K()}function K(){return!function(){if(x.isReadonly)return!1;if(!J())return!1;return nt()&&Q()||ct()}()}function J(){return!(x.loading&&!Q())&&(!tt()&&!!I)}function Z(t){return!l.escapeOptions||-1!==l.escapeOptions.toLowerCase().indexOf(t)}function Q(){return!!x.matches.length}function tt(){return!!x.scope.selectedItem}function et(){return G(x.matches[x.index])}function nt(){return(l.searchText||"").length>=V()}function it(t){u.nextTick(function(){G(x.matches[t]).then(function(t){var e=T.$.input.controller("ngModel");b.announce(t+" "+x.selectedMessage,"assertive"),e.$setViewValue(t),e.$render()}).finally(function(){l.selectedItem=x.matches[t],X(!1)})},!1)}function rt(){x.index=0,x.matches=[]}function ot(){X(!0),l.searchText="";var t=document.createEvent("CustomEvent");t.initCustomEvent("change",!0,!0,{value:""}),T.input.dispatchEvent(t),T.input.blur(),l.searchText="",T.input.focus()}function st(t,e){var n=t?"polite":"assertive",i=[];e&j.Selected&&-1!==x.index&&i.push(et()),e&j.Count&&i.push(v.resolve(function(){switch(x.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+x.matches.length+" matches available."}}())),v.all(i).then(function(t){b.announce(t.join(" "),n)})}function at(){var t,e,n,i,r;T.li[0]&&(O===s?(t=T.li[x.index]||T.li[0],e=T.scrollContainer.offsetHeight,n=t&&t.offsetTop||0,i=n+t.clientHeight,r=T.scrollContainer.scrollTop,n<r?lt(n):i>r+e&&lt(i-e)):function(){var t=T.li[0].offsetHeight,e=t*x.index,n=e+t,i=T.scroller.clientHeight,r=T.scroller.scrollTop;e<r?lt(e):n>r+i&&lt(n-i)}())}function lt(t){O===s?T.scrollContainer.scrollTop=t:T.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(t)}function ct(){var t=(x.scope.searchText||"").length;return x.hasNotFound&&!Q()&&(!x.loading||0!==$)&&t>=V()&&(I||E)&&!tt()}function ut(){var t=l.searchText||"",n=t.toLowerCase();!l.noCache&&M[n]?ht(M[n]):function(t){var n=l.$parent.$eval(k),i=t.toLowerCase(),r=e.isArray(n),o=!!n.then;function s(e){M[i]=e,(t||"")===(l.searchText||"")&&ht(e)}r?s(n):o&&function(t){if(!t)return;t=v.when(t),$++,X(!0),u.nextTick(function(){t.then(s).finally(function(){0==--$&&X(!1)})},!0,l)}(n)}(t),x.hidden=K()}function ht(t){var e,n,i;x.matches=t,x.hidden=K(),x.loading&&X(!1),l.selectOnMatch&&(e=l.searchText,n=x.matches,i=n[0],1===n.length&&G(i).then(function(t){var n=e===t;l.matchInsensitive&&!n&&(n=e.toLowerCase()===t.toLowerCase()),n&&it(0)})),B(),st(!0,j.Count)}function dt(t,e){g[t]&&l.$parent.$eval(g[t],e||{})}}}(),function(){function t(t){var n="virtual",i=["standard",n];function r(t){return t?(t=t.toLowerCase(),i.indexOf(t)>-1?t:n):n}return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",inputAriaDescribedBy:"@?inputAriaDescribedby",inputAriaLabelledBy:"@?inputAriaLabelledby",inputAriaLabel:"@?inputAriaLabel",noCache:"=?mdNoCache",requireMatch:"=?mdRequireMatch",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",menuContainerClass:"@?mdMenuContainerClass",inputClass:"@?mdInputClass",inputId:"@?mdInputId",escapeOptions:"@?mdEscapeOptions",dropdownItems:"=?mdDropdownItems",dropdownPosition:"@?mdDropdownPosition",clearButton:"=?mdClearButton",selectedMessage:"@?mdSelectedMessage",mdMode:"=?mdMode"},compile:function(t,n){var i=t.find("input");return["md-select-on-focus","md-no-asterisk","ng-trim","ng-pattern"].forEach(function(t){var e=n[n.$normalize(t)];null!==e&&i.attr(t,e)}),function(t,n,i,o){o.hasNotFound=!!n.attr("md-has-not-found"),e.isDefined(i.mdClearButton)||t.floatingLabel||(t.clearButton=!0),t.mdMode=r(i.mdMode),n.on("click",function(t){t.stopPropagation()})}},template:function(e,i){var o,s,a=(o=e.find("md-not-found").detach(),(s=o.length?o.html():"")?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+s+"</li>":""),l=function(){var t=e.find("md-item-template").detach(),n=t.length?t.html():e.html();t.length||e.empty();return"<md-autocomplete-parent-scope md-autocomplete-replace>"+n+"</md-autocomplete-parent-scope>"}(),c=e.html(),u=i.tabindex;return a&&e.attr("md-has-not-found",!0),e.attr("tabindex","-1"),"        <md-autocomplete-wrap            ng-class=\"{ 'md-whiteframe-z1': !floatingLabel,                         'md-menu-showing': !$mdAutocompleteCtrl.hidden,                         'md-show-clear-button': !!clearButton }\">          "+(i.mdFloatingLabel?'            <md-input-container ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                '+(null!=u?'tabindex="'+u+'"':"")+'                id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-class="::inputClass"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-minlength="inputMinlength"                ng-maxlength="inputMaxlength"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-model-options="{ allowInvalid: true }"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur($event)"                ng-focus="$mdAutocompleteCtrl.focus($event)"                aria-label="{{floatingLabel}}"                aria-autocomplete="list"                role="combobox"                aria-haspopup="true"                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                ng-attr-aria-activedescendant="{{$mdAutocompleteCtrl.index >= 0 ? \'selected_option\' : undefined}}">              <div md-autocomplete-parent-scope md-autocomplete-replace>'+c+"</div>            </md-input-container>":'            <input type="search"              '+(null!=u?'tabindex="'+u+'"':"")+'              id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"              name="{{inputName}}"              ng-class="::inputClass"              ng-if="!floatingLabel"              autocomplete="off"              ng-required="$mdAutocompleteCtrl.isRequired"              ng-disabled="$mdAutocompleteCtrl.isDisabled"              ng-readonly="$mdAutocompleteCtrl.isReadonly"              ng-minlength="inputMinlength"              ng-maxlength="inputMaxlength"              ng-model="$mdAutocompleteCtrl.scope.searchText"              ng-keydown="$mdAutocompleteCtrl.keydown($event)"              ng-blur="$mdAutocompleteCtrl.blur($event)"              ng-focus="$mdAutocompleteCtrl.focus($event)"              placeholder="{{placeholder}}"              aria-label="{{placeholder}}"              aria-autocomplete="list"              role="combobox"              aria-haspopup="true"              aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"              aria-owns="ul-{{$mdAutocompleteCtrl.id}}"              ng-attr-aria-activedescendant="{{$mdAutocompleteCtrl.index >= 0 ? \'selected_option\' : undefined}}">')+'          <button type="button" aria-label="Clear Input" tabindex="-1" ng-if="clearButton && $mdAutocompleteCtrl.scope.searchText" ng-click="$mdAutocompleteCtrl.clear($event)"><md-icon md-svg-src="'+t.mdClose+'"></md-icon></button>          <md-progress-linear              class="'+(i.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          '+function(t,e){if(t=t?" "+t:"",h(e))return'            <div                 ng-hide="$mdAutocompleteCtrl.hidden"                class="md-standard-list-container md-autocomplete-suggestions-container md-whiteframe-z1'+t+'"                ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"                role="presentation">              <div class="md-standard-list-scroller" role="presentation">';return'          <md-virtual-repeat-container              md-auto-shrink              md-auto-shrink-min="1"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-virtual-repeat-container md-autocomplete-suggestions-container md-whiteframe-z1'+t+'"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">'}(i.mdMenuContainerClass,i.mdMode)+'            <ul class="md-autocomplete-suggestions"                ng-class="::menuClass"                id="ul-{{$mdAutocompleteCtrl.id}}"                ng-mouseenter="$mdAutocompleteCtrl.listEnter()"                ng-mouseleave="$mdAutocompleteCtrl.listLeave()"                ng-mouseup="$mdAutocompleteCtrl.mouseUp()"                role="listbox">              <li '+(h(i.mdMode)?"ng-repeat":"md-virtual-repeat")+' ="item in $mdAutocompleteCtrl.matches"                  ng-class="{ selected: $index === $mdAutocompleteCtrl.index }"                  ng-attr-id="{{$index === $mdAutocompleteCtrl.index ? \'selected_option\' : undefined}}"                  ng-click="$mdAutocompleteCtrl.select($index)"                  role="option"                  aria-setsize="{{$mdAutocompleteCtrl.matches.length}}"                  aria-posinset="{{$index+1}}"                  aria-selected="{{$index === $mdAutocompleteCtrl.index ? true : false}}"                   md-extra-name="$mdAutocompleteCtrl.itemName">                  '+l+"                  </li>"+a+"            </ul>          "+function(t){return h(t)?"   </div>              </div>            </div>":"</md-virtual-repeat-container>"}(i.mdMode)+"        </md-autocomplete-wrap>";function h(t){return r(t)!==n}}}}t.$inject=["$$mdSvgRegistry"],e.module("material.components.autocomplete").directive("mdAutocomplete",t)}(),function(){function t(t,e){return{restrict:"AE",compile:function(t,n,i){return function(t,n,r){var o,s,a=t.$mdAutocompleteCtrl,l=a.parent.$new(),c=a.itemName;function u(n,i){l[i]=t[n],t.$watch(n,function(t){e.nextTick(function(){l[i]=t})})}u("$index","$index"),u("item",c),o=!1,s=!1,t.$watch(function(){s||o||(o=!0,t.$$postDigest(function(){s||l.$digest(),o=s=!1}))}),l.$watch(function(){s=!0}),i(l,function(t){n.after(t)})}},terminal:!0,transclude:"element"}}t.$inject=["$compile","$mdUtil"],e.module("material.components.autocomplete").directive("mdAutocompleteParentScope",t)}(),function(){function t(t,e,n){this.$scope=t,this.$element=e,this.$attrs=n,this.regex=null}t.$inject=["$scope","$element","$attrs"],e.module("material.components.autocomplete").controller("MdHighlightCtrl",t),t.prototype.init=function(t,e){this.flags=this.$attrs.mdHighlightFlags||"",this.unregisterFn=this.$scope.$watch(function(n){return{term:t(n),contentText:e(n)}}.bind(this),this.onRender.bind(this),!0),this.$element.on("$destroy",this.unregisterFn)},t.prototype.onRender=function(t,e){var n=t.contentText;null!==this.regex&&t.term===e.term||(this.regex=this.createRegex(t.term,this.flags)),t.term?this.applyRegex(n):this.$element.text(n)},t.prototype.applyRegex=function(t){var n=this.resolveTokens(t);this.$element.empty(),n.forEach(function(t){if(t.isMatch){var n=e.element('<span class="highlight">').text(t.text);this.$element.append(n)}else this.$element.append(document.createTextNode(t))}.bind(this))},t.prototype.resolveTokens=function(t){var e=[],n=0;return t.replace(this.regex,function(t,r){i(n,r),e.push({text:t,isMatch:!0}),n=r+t.length}),i(n),e;function i(n,i){var r=t.slice(n,i);r&&e.push(r)}},t.prototype.createRegex=function(t,e){var n="",i="",r=this.sanitizeRegex(t);return e.indexOf("^")>=0&&(n="^"),e.indexOf("$")>=0&&(i="$"),new RegExp(n+r+i,e.replace(/[$^]/g,""))},t.prototype.sanitizeRegex=function(t){return t&&t.toString().replace(/[\\^$*+?.()|{}[\]]/g,"\\$&")}}(),function(){function t(t,e){return{terminal:!0,controller:"MdHighlightCtrl",compile:function(n,i){var r=e(i.mdHighlightText),o=t(n.html());return function(t,e,n,i){i.init(r,o)}}}}t.$inject=["$interpolate","$parse"],e.module("material.components.autocomplete").directive("mdHighlightText",t)}(),e.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",["$mdTheming","$mdUtil","$animate","$rootElement","$window","$log","$$rAF","$document",function(t,n,i,r,o,s,a,l){var c="<md-backdrop> may not work properly in a scrolled, static-positioned parent container.";return{restrict:"E",link:function(u,h,d){var f;function p(){var t=parseInt(f.height,10)+Math.abs(parseInt(f.top,10));h.css("height",t+"px")}i.pin&&i.pin(h,r),a(function(){if("fixed"===(f=o.getComputedStyle(l[0].body)).position){var i=n.debounce(function(){f=o.getComputedStyle(l[0].body),p()},60,null,!1);p(),e.element(o).on("resize",i),u.$on("$destroy",function(){e.element(o).off("resize",i)})}var r=h.parent();r.length&&("BODY"===r[0].nodeName&&h.css("position","fixed"),"static"===o.getComputedStyle(r[0]).position&&s.warn(c),t.inherit(h,r))})}}}]),function(){function t(t){return{restrict:"E",link:function(e,n){n.addClass("_md"),e.$on("$destroy",function(){t.destroy()})}}}function n(t){r.$inject=["$animate","$mdConstant","$mdUtil","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture","$log"];var n=.5,i=80;return t("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","clickOutsideToClose"],options:r});function r(t,r,o,s,a,l,c,u){var h;return{themable:!0,onShow:function(d,f,p,m){if((f=o.extractElementByName(f,"md-bottom-sheet")).attr("tabindex","-1"),f.hasClass("ng-cloak")){u.warn("$mdBottomSheet: using `<md-bottom-sheet ng-cloak>` will affect the bottom-sheet opening animations.",f[0])}p.isLockedOpen?(p.clickOutsideToClose=!1,p.escapeToClose=!1):p.cleanupGestures=function(t,e){var s=c.register(e,"drag",{horizontal:!1});return e.on("$md.dragstart",l).on("$md.drag",u).on("$md.dragend",h),function(){s(),e.off("$md.dragstart",l),e.off("$md.drag",u),e.off("$md.dragend",h)};function l(){t.css(r.CSS.TRANSITION_DURATION,"0ms")}function u(e){var n=e.pointer.distanceY;n<5&&(n=Math.max(-i,n/2)),t.css(r.CSS.TRANSFORM,"translate3d(0,"+(i+n)+"px,0)")}function h(e){if(e.pointer.distanceY>0&&(e.pointer.distanceY>20||Math.abs(e.pointer.velocityY)>n)){var i=t.prop("offsetHeight")-e.pointer.distanceY,s=Math.min(i/e.pointer.velocityY*.75,500);t.css(r.CSS.TRANSITION_DURATION,s+"ms"),o.nextTick(a.cancel,!0)}else t.css(r.CSS.TRANSITION_DURATION,""),t.css(r.CSS.TRANSFORM,"")}}(f,p.parent);p.disableBackdrop||((h=o.createBackdrop(d,"md-bottom-sheet-backdrop md-opaque"))[0].tabIndex=-1,p.clickOutsideToClose&&h.on("click",function(){o.nextTick(a.cancel,!0)}),s.inherit(h,p.parent),t.enter(h,p.parent,null));s.inherit(f,p.parent),p.disableParentScroll&&(p.restoreScroll=o.disableScrollAround(f,p.parent));return t.enter(f,p.parent,h).then(function(){var t=o.findFocusTarget(f)||e.element(f[0].querySelector("button")||f[0].querySelector("a")||f[0].querySelector(o.prefixer("ng-click",!0)))||h;p.escapeToClose&&(p.rootElementKeyupCallback=function(t){t.keyCode===r.KEY_CODE.ESCAPE&&o.nextTick(a.cancel,!0)},l.on("keyup",p.rootElementKeyupCallback),t&&t.focus())})},onRemove:function(e,n,i){i.disableBackdrop||t.leave(h);return t.leave(n).then(function(){i.disableParentScroll&&(i.restoreScroll(),delete i.restoreScroll),i.cleanupGestures&&i.cleanupGestures()})},disableBackdrop:!1,escapeToClose:!0,clickOutsideToClose:!0,disableParentScroll:!0,isLockedOpen:!1}}}t.$inject=["$mdBottomSheet"],n.$inject=["$$interimElementProvider"],e.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",t).provider("$mdBottomSheet",n)}(),function(){function t(t){return{restrict:"E",link:function(e,n){t(n)}}}function n(t,n,i,r){return{restrict:"EA",replace:!0,transclude:!0,template:function(t,e){return o(e)?'<a class="md-button" ng-transclude></a>':'<button class="md-button" type="'+(void 0===e.type?"button":e.type)+'" ng-transclude></button>'},link:function(s,a,l){n(a),t.attach(s,a),i.expectWithoutText(a,"aria-label"),o(l)&&e.isDefined(l.ngDisabled)&&!a.hasClass("_md-nav-button")&&s.$watch(l.ngDisabled,function(t){a.attr("tabindex",t?-1:0)});a.on("click",function(t){!0===l.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),a.hasClass("md-no-focus")||(a.on("focus",function(){r.isUserInvoked()&&"keyboard"!==r.getLastInteractionType()||a.addClass("md-focused")}),a.on("blur",function(){a.removeClass("md-focused")}))}};function o(t){return e.isDefined(t.href)||e.isDefined(t.ngHref)||e.isDefined(t.ngLink)||e.isDefined(t.uiSref)}}n.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$mdInteraction"],t.$inject=["$mdTheming"],e.module("material.components.button",["material.core"]).directive("mdButton",n).directive("a",t)}(),function(){function t(t){return{restrict:"E",link:function(e,n,i){n.addClass("_md"),t(n)}}}t.$inject=["$mdTheming"],e.module("material.components.card",["material.core"]).directive("mdCard",t)}(),function(){function t(t,n,i,r,o,s){return t=t[0],{restrict:"E",transclude:!0,require:["^?mdInputContainer","?ngModel","?^form"],priority:i.BEFORE_NG_ARIA,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-icon"></div></div><div ng-transclude class="md-label"></div>',compile:function(a,l){return l.$set("tabindex",l.tabindex||"0"),l.$set("type","checkbox"),l.$set("role",l.type),{pre:function(t,e){e.on("click",function(t){this.hasAttribute("disabled")&&t.stopImmediatePropagation()})},post:function(a,l,c,u){var h,d=u[0],f=u[1]||o.fakeNgModel(),p=u[2];if(d){var m=d.isErrorGetter||function(){return f.$invalid&&(f.$touched||p&&p.$submitted)};d.input=l,a.$watch(m,d.setInvalid)}r(l),l.children().on("focus",function(){l.focus()}),o.parseAttributeBoolean(c.mdIndeterminate)&&(v(),a.$watch(c.mdIndeterminate,v));c.ngChecked&&a.$watch(a.$eval.bind(a,c.ngChecked),function(t){f.$setViewValue(t),f.$render()});function g(t){l[0].hasAttribute("disabled")||a.skipToggle||a.$apply(function(){var e=c.ngChecked&&c.ngClick?c.checked:!f.$viewValue;f.$setViewValue(e,t&&t.type),f.$render()})}function v(t){(h=!1!==t)&&l.attr("aria-checked","mixed"),l.toggleClass("md-indeterminate",h)}y="ngDisabled",b="tabindex",_={true:"-1",false:c.tabindex},c[y]&&a.$watch(c[y],function(t){_[t]&&l.attr(b,_[t])}),n.expectWithText(l,"aria-label"),t.link.pre(a,{on:e.noop,0:{}},c,[f]),l.on("click",g).on("keypress",function(t){var e,n,r=t.which||t.keyCode;switch(t.preventDefault(),r){case i.KEY_CODE.SPACE:l.addClass("md-focused"),g(t);break;case i.KEY_CODE.ENTER:(n=o.getClosest(t.target,"form"))&&(e=n.querySelector('button[type="submit"]:enabled, input[type="submit"]:enabled'))&&e.click()}}).on("focus",function(){"keyboard"===s.getLastInteractionType()&&l.addClass("md-focused")}).on("blur",function(){l.removeClass("md-focused")}),f.$render=function(){l.toggleClass("md-checked",!!f.$viewValue&&!h)};var y,b,_}}}}}t.$inject=["inputDirective","$mdAria","$mdConstant","$mdTheming","$mdUtil","$mdInteraction"],e.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",t)}(),e.module("material.components.chips",["material.core","material.components.autocomplete"]),function(){function i(t,e,i,r,o){this.$scope=t,this.$element=e,this.$mdConstant=i,this.$timeout=r,this.$mdUtil=o,this.isEditing=!1,this.parentController=n,this.enableChipEdit=!1}i.$inject=["$scope","$element","$mdConstant","$timeout","$mdUtil"],e.module("material.components.chips").controller("MdChipCtrl",i),i.prototype.init=function(t){this.parentController=t,this.enableChipEdit=this.parentController.enableChipEdit,this.enableChipEdit&&(this.$element.on("keydown",this.chipKeyDown.bind(this)),this.$element.on("dblclick",this.chipMouseDoubleClick.bind(this)),this.getChipContent().addClass("_md-chip-content-edit-is-enabled"))},i.prototype.getChipContent=function(){var t=this.$element[0].getElementsByClassName("md-chip-content");return e.element(t[0])},i.prototype.getContentElement=function(){var t=e.element(this.getChipContent().children()[0]);return t&&0!==t.length||(t=e.element(this.getChipContent().contents()[0])),t},i.prototype.getChipIndex=function(){return parseInt(this.$element.attr("index"))},i.prototype.goOutOfEditMode=function(){if(this.isEditing){this.isEditing=!1,this.$element.removeClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="false";var t=this.getChipIndex(),e=this.getContentElement().text();e?(this.parentController.updateChipContents(t,e),this.$mdUtil.nextTick(function(){this.parentController.selectedChip===t&&this.parentController.focusChip(t)}.bind(this))):this.parentController.removeChipAndFocusInput(t)}},i.prototype.selectNodeContents=function(e){var n,i;document.body.createTextRange?((n=document.body.createTextRange()).moveToElementText(e),n.select()):t.getSelection&&(i=t.getSelection(),(n=document.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(n))},i.prototype.goInEditMode=function(){this.isEditing=!0,this.$element.addClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="true",this.getChipContent().on("blur",function(){this.goOutOfEditMode()}.bind(this)),this.selectNodeContents(this.getChipContent()[0])},i.prototype.chipKeyDown=function(t){this.isEditing||t.keyCode!==this.$mdConstant.KEY_CODE.ENTER&&t.keyCode!==this.$mdConstant.KEY_CODE.SPACE?this.isEditing&&t.keyCode===this.$mdConstant.KEY_CODE.ENTER&&(t.preventDefault(),this.goOutOfEditMode()):(t.preventDefault(),this.goInEditMode())},i.prototype.chipMouseDoubleClick=function(){this.enableChipEdit&&!this.isEditing&&this.goInEditMode()}}(),function(){function t(t,n,i,r){return{restrict:"E",require:["^?mdChips","mdChip"],link:function(n,i,o,s){var a=s.shift(),l=s.shift(),c=e.element(i[0].querySelector(".md-chip-content"));t(i),a&&(l.init(a),c.on("blur",function(){a.resetSelectedChip(),a.$scope.$applyAsync()}));r(function(){a&&a.shouldFocusLastChip&&a.focusLastChipThenInput()})},controller:"MdChipCtrl"}}t.$inject=["$mdTheming","$mdUtil","$compile","$timeout"],e.module("material.components.chips").directive("mdChip",t)}(),function(){function t(t){return{restrict:"A",require:"^mdChips",scope:!1,link:function(e,n,i,r){n.on("click",function(t){e.$apply(function(){r.removeChip(e.$$replacedScope.$index)})}),t(function(){n.attr({tabindex:"-1","aria-hidden":"true"}),n.find("button").attr("tabindex","-1")})}}}t.$inject=["$timeout"],e.module("material.components.chips").directive("mdChipRemove",t)}(),function(){function t(t){return{restrict:"EA",terminal:!0,link:function(e,n,i){var r=e.$parent.$mdChipsCtrl,o=r.parent.$new(!1,r.parent);o.$$replacedScope=e,o.$chip=e.$chip,o.$index=e.$index,o.$mdChipsCtrl=r;var s=r.$scope.$eval(i.mdChipTransclude);n.html(s),t(n.contents())(o)},scope:!1}}t.$inject=["$compile"],e.module("material.components.chips").directive("mdChipTransclude",t)}(),function(){n.$inject=["$scope","$attrs","$mdConstant","$log","$element","$timeout","$mdUtil","$mdLiveAnnouncer","$exceptionHandler"];var t=300;function n(e,n,i,r,o,s,a,l,c){this.$timeout=s,this.$mdConstant=i,this.$scope=e,this.parent=e.$parent,this.$mdUtil=a,this.$log=r,this.$mdLiveAnnouncer=l,this.$exceptionHandler=c,this.$element=o,this.$attrs=n,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.autocompleteCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.enableChipEdit=a.parseAttributeBoolean(n.mdEnableChipEdit),this.addOnBlur=a.parseAttributeBoolean(n.mdAddOnBlur),this.inputAriaLabel="Chips input.",this.containerHint="Chips container. Use arrow keys to select chips.",this.containerEmptyHint="Chips container. Enter the text area, then type text, and press enter to add a chip.",this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useTransformChip=!1,this.useOnAdd=!1,this.useOnRemove=!1,this.wrapperId="",this.contentIds=[],this.ariaTabIndex=null,this.chipAppendDelay=t,this.deRegister=[],this.addedMessage="added",this.removedMessage="removed",this.init()}e.module("material.components.chips").controller("MdChipsCtrl",n),n.prototype.init=function(){var e=this;this.wrapperId="_md-chips-wrapper-"+this.$mdUtil.nextUid(),this.$element.attr("ng-model")||this.setupStaticChips(),this.deRegister.push(this.$scope.$watchCollection("$mdChipsCtrl.items",function(){e.setupInputAria(),e.setupWrapperAria()})),this.deRegister.push(this.$attrs.$observe("mdChipAppendDelay",function(n){e.chipAppendDelay=parseInt(n)||t}))},n.prototype.$onDestroy=function(){for(var t;t=this.deRegister.pop();)t.call(this)},n.prototype.setupInputAria=function(){var t=this.$element.find("input");t&&(t.attr("role","textbox"),t.attr("aria-multiline",!0),this.inputAriaDescribedBy&&t.attr("aria-describedby",this.inputAriaDescribedBy),this.inputAriaLabelledBy?(t.attr("aria-labelledby",this.inputAriaLabelledBy),t.removeAttr("aria-label")):t.attr("aria-label",this.inputAriaLabel))},n.prototype.setupWrapperAria=function(){var t=this,e=this.$element.find("md-chips-wrap");this.items&&this.items.length?(e.attr("role","listbox"),this.contentIds=this.items.map(function(){return t.wrapperId+"-chip-"+t.$mdUtil.nextUid()}),e.attr("aria-owns",this.contentIds.join(" ")),e.attr("aria-label",this.containerHint)):(e.removeAttr("role"),e.removeAttr("aria-owns"),e.attr("aria-label",this.containerEmptyHint))},n.prototype.setupStaticChips=function(){var t,e,n=this,i=this.$element.find("md-chips-wrap");this.$timeout(function(){for(i.attr("role","list"),e=i[0].children,t=0;t<e.length;t++)e[t].setAttribute("role","listitem"),e[t].setAttribute("aria-setsize",e.length);n.inputAriaDescribedBy&&i.attr("aria-describedby",n.inputAriaDescribedBy),n.inputAriaLabelledBy?(i.attr("aria-labelledby",n.inputAriaLabelledBy),i.removeAttr("aria-label")):i.attr("aria-label",n.inputAriaLabel)},10)},n.prototype.inputKeydown=function(t){var e=this.getChipBuffer();if(!(this.autocompleteCtrl&&t.isDefaultPrevented&&t.isDefaultPrevented())){if(t.keyCode===this.$mdConstant.KEY_CODE.BACKSPACE){if(0!==this.getCursorPosition(t.target))return;return t.preventDefault(),t.stopPropagation(),void(this.items.length&&this.selectAndFocusChipSafe(this.items.length-1))}if((!this.separatorKeys||this.separatorKeys.length<1)&&(this.separatorKeys=[this.$mdConstant.KEY_CODE.ENTER]),-1!==this.separatorKeys.indexOf(t.keyCode)){if(this.autocompleteCtrl&&this.requireMatch||!e)return;if(t.preventDefault(),this.hasMaxChipsReached())return;return this.appendChip(e.trim()),this.resetChipBuffer(),!1}}},n.prototype.getCursorPosition=function(t){try{if(t.selectionStart===t.selectionEnd)return t.selectionStart}catch(e){if(!t.value)return 0}},n.prototype.updateChipContents=function(t,e){t>=0&&t<this.items.length&&(this.items[t]=e,this.updateNgModel(!0))},n.prototype.isEditingChip=function(){return!!this.$element[0].querySelector("._md-chip-editing")},n.prototype._isChipObject=function(t){return e.isObject(t)},n.prototype.isRemovable=function(){return!!this.ngModelCtrl&&(this.readonly?this.removable:!e.isDefined(this.removable)||this.removable)},n.prototype.chipKeydown=function(t){if(!this.getChipBuffer()&&!this.isEditingChip())switch(t.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;if(t.preventDefault(),!this.isRemovable())return;this.removeAndSelectAdjacentChip(this.selectedChip,t);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:t.preventDefault(),(this.selectedChip<0||this.readonly&&0===this.selectedChip)&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:t.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;t.preventDefault(),this.onFocus()}},n.prototype.getPlaceholder=function(){return this.items&&this.items.length&&(""===this.secondaryPlaceholder||this.secondaryPlaceholder)?this.secondaryPlaceholder:this.placeholder},n.prototype.removeAndSelectAdjacentChip=function(t,e){var n=this,i=n.getAdjacentChipIndex(t);this.$element[0].querySelector("md-chips-wrap"),this.$element[0].querySelector('md-chip[index="'+t+'"]');n.removeChip(t,e),n.$timeout(function(){n.$timeout(function(){n.selectAndFocusChipSafe(i)})})},n.prototype.resetSelectedChip=function(){this.selectedChip=-1,this.ariaTabIndex=null},n.prototype.getAdjacentChipIndex=function(t){var e=this.items.length-1;return 0===e?-1:t===e?t-1:t},n.prototype.appendChip=function(t){if(this.shouldFocusLastChip=!this.addOnBlur,this.useTransformChip&&this.transformChip){var n=this.transformChip({$chip:t});e.isDefined(n)&&(t=n)}if(e.isObject(t)&&this.items.some(function(n){return e.equals(t,n)}))return;if(!(null==t||this.items.indexOf(t)+1)){var i=this.items.push(t)-1;this.updateNgModel();var r=e.isObject(t)?"":t;this.$mdLiveAnnouncer.announce(r+" "+this.addedMessage,"assertive"),this.useOnAdd&&this.onAdd&&this.onAdd({$chip:t,$index:i})}},n.prototype.useTransformChipExpression=function(){this.useTransformChip=!0},n.prototype.useOnAddExpression=function(){this.useOnAdd=!0},n.prototype.useOnRemoveExpression=function(){this.useOnRemove=!0},n.prototype.useOnSelectExpression=function(){this.useOnSelect=!0},n.prototype.getChipBuffer=function(){var t=this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer;return e.isString(t)?t:""},n.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},n.prototype.hasMaxChipsReached=function(){return e.isString(this.maxChips)&&(this.maxChips=parseInt(this.maxChips,10)||0),this.maxChips>0&&this.items.length>=this.maxChips},n.prototype.validateModel=function(){this.ngModelCtrl.$setValidity("md-max-chips",!this.hasMaxChipsReached()),this.ngModelCtrl.$validate()},n.prototype.updateNgModel=function(t){t||this.validateModel(),e.forEach(this.ngModelCtrl.$viewChangeListeners,function(t){try{t()}catch(t){this.$exceptionHandler(t)}})},n.prototype.removeChip=function(t,n){var i=this.items.splice(t,1);this.updateNgModel(),this.ngModelCtrl.$setDirty();var r=e.isObject(i[0])?"":i[0];this.$mdLiveAnnouncer.announce(r+" "+this.removedMessage,"assertive"),i&&i.length&&this.useOnRemove&&this.onRemove&&this.onRemove({$chip:i[0],$index:t,$event:n})},n.prototype.removeChipAndFocusInput=function(t,e){this.removeChip(t,e),this.autocompleteCtrl?(this.autocompleteCtrl.hidden=!0,this.$mdUtil.nextTick(this.onFocus.bind(this))):this.onFocus()},n.prototype.selectAndFocusChipSafe=function(t){if(!this.items.length||-1===t)return this.focusInput();if(t>=this.items.length){if(!this.readonly)return this.onFocus();t=0}t=Math.max(t,0),t=Math.min(t,this.items.length-1),this.selectChip(t),this.focusChip(t)},n.prototype.focusLastChipThenInput=function(){var t=this;t.shouldFocusLastChip=!1,t.focusChip(this.items.length-1),t.$timeout(function(){t.focusInput()},t.chipAppendDelay)},n.prototype.focusInput=function(){this.selectChip(-1),this.onFocus()},n.prototype.selectChip=function(t){t>=-1&&t<=this.items.length?(this.selectedChip=t,this.useOnSelect&&this.onSelect&&this.onSelect({$chip:this.items[t]})):this.$log.warn("Selected Chip index out of bounds; ignoring.")},n.prototype.selectAndFocusChip=function(t){this.selectChip(t),-1!==t&&this.focusChip(t)},n.prototype.focusChip=function(t){var e=this.$element[0].querySelector('md-chip[index="'+t+'"] .md-chip-content');this.ariaTabIndex=t,e.focus()},n.prototype.configureNgModel=function(t){this.ngModelCtrl=t;var e=this;t.$isEmpty=function(t){return!t||0===t.length},t.$render=function(){e.items=e.ngModelCtrl.$viewValue}},n.prototype.onFocus=function(){var t=this.$element[0].querySelector("input");t&&t.focus(),this.resetSelectedChip()},n.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.setupInputAria(),this.resetSelectedChip()},n.prototype.onInputBlur=function(){this.inputHasFocus=!1,this.shouldAddOnBlur()&&(this.appendChip(this.getChipBuffer().trim()),this.resetChipBuffer())},n.prototype.configureInput=function(t){var e=t.controller("ngModel"),n=this;e&&(this.deRegister.push(this.$scope.$watch(function(){return e.$touched},function(t){t&&n.ngModelCtrl.$setTouched()})),this.deRegister.push(this.$scope.$watch(function(){return e.$dirty},function(t){t&&n.ngModelCtrl.$setDirty()})))},n.prototype.configureUserInput=function(t){this.userInputElement=t;var n=t.controller("ngModel");n!==this.ngModelCtrl&&(this.userInputNgModelCtrl=n);var i=this.$scope,r=this,o=function(t,n){i.$evalAsync(e.bind(r,n,t))};t.attr({tabindex:0}).on("keydown",function(t){o(t,r.inputKeydown)}).on("focus",function(t){o(t,r.onInputFocus)}).on("blur",function(t){o(t,r.onInputBlur)})},n.prototype.configureAutocomplete=function(t){t&&(this.autocompleteCtrl=t,this.$element.attr("container-empty-hint")||(this.containerEmptyHint="Chips container with autocompletion. Enter the text area, type text to search, and then use the up and down arrow keys to select an option. Press enter to add the selected option as a chip.",this.setupWrapperAria()),t.registerSelectedItemWatcher(e.bind(this,function(t){if(t){if(this.hasMaxChipsReached())return;this.appendChip(t),this.resetChipBuffer()}})),this.$element.find("input").on("focus",e.bind(this,this.onInputFocus)).on("blur",e.bind(this,this.onInputBlur)))},n.prototype.shouldAddOnBlur=function(){this.validateModel();var t=this.getChipBuffer().trim(),e=this.ngModelCtrl.$isEmpty(this.ngModelCtrl.$modelValue)||this.ngModelCtrl.$valid,n=this.autocompleteCtrl&&!this.autocompleteCtrl.hidden;return this.userInputNgModelCtrl&&(e=e&&this.userInputNgModelCtrl.$valid),this.addOnBlur&&!this.requireMatch&&t&&e&&!n},n.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0},n.prototype.contentIdFor=function(t){return this.contentIds[t]}}(),function(){o.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout","$$mdSvgRegistry"],e.module("material.components.chips").directive("mdChips",o);var t='      <md-chips-wrap          id="{{$mdChipsCtrl.wrapperId}}"          tabindex="{{$mdChipsCtrl.readonly ? 0 : -1}}"          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus(),                       \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly,                      \'md-removable\': $mdChipsCtrl.isRemovable() }"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"             ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index, \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}">          <div class="md-chip-content"              tabindex="{{$mdChipsCtrl.ariaTabIndex === $index ? 0 : -1}}"              id="{{$mdChipsCtrl.contentIdFor($index)}}"              role="option"              aria-selected="{{$mdChipsCtrl.selectedChip === $index}}"              aria-setsize="{{$mdChipsCtrl.items.length}}"              aria-posinset="{{$index+1}}"              ng-click="!$mdChipsCtrl.readonly && $mdChipsCtrl.focusChip($index)"              aria-label="{{$mdChipsCtrl._isChipObject($chip) ? \'\' : $chip + \'. \'}}{{$mdChipsCtrl.isRemovable() ? \'\' + $mdChipsCtrl.deleteHint : \'\'}}"               ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div ng-if="$mdChipsCtrl.isRemovable()"               class="md-chip-remove-container"               tabindex="-1"               md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div class="md-chip-input-container" ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl">          <div md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',n='        <input            class="md-input"            tabindex="0"            aria-label="{{$mdChipsCtrl.inputAriaLabel}}"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',i="      <span>{{$chip}}</span>",r='      <button          class="md-chip-remove"          ng-if="$mdChipsCtrl.isRemovable()"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index, $event)"          type="button"          tabindex="-1"          aria-label="{{$mdChipsCtrl.deleteButtonLabel}}{{$mdChipsCtrl._isChipObject($chip) ? \'\' : \' \' + $chip}}">        <md-icon md-svg-src="{{$mdChipsCtrl.mdCloseIcon}}" aria-hidden="true"></md-icon>      </button>';function o(e,o,s,a,l,c){var u={chips:o.processTemplate(t),input:o.processTemplate(n),default:o.processTemplate(i),remove:o.processTemplate(r)};return{template:function(t,e){return e.$mdUserTemplate=t.clone(),u.chips},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:function(t,n){var i=n.$mdUserTemplate;n.$mdUserTemplate=null;var r=m("md-chips>md-chip-template"),h=m(o.prefixer().buildList("md-chip-remove").map(function(t){return"md-chips>*["+t+"]"}).join(","))||u.remove,d=r||u.default,f=m("md-chips>md-autocomplete")||m("md-chips>input")||u.input,p=i.find("md-chip");i[0].querySelector("md-chip-template>*[md-chip-remove]")&&a.warn("invalid placement of md-chip-remove within md-chip-template.");function m(t){if(n.ngModel){var e=i[0].querySelector(t);return e&&e.outerHTML}}return function(t,i,a,m){o.initOptionalProperties(t,n),e(i);var g=m[0];if(r&&(g.enableChipEdit=!1),g.chipContentsTemplate=d,g.chipRemoveTemplate=h,g.chipInputTemplate=f,g.mdCloseIcon=c.mdClose,i.attr({tabindex:-1}).on("focus",function(){g.onFocus()}).on("click",function(){g.readonly||-1!==g.selectedChip||g.onFocus()}),n.ngModel&&(g.configureNgModel(i.controller("ngModel")),a.mdTransformChip&&g.useTransformChipExpression(),a.mdOnAppend&&g.useOnAppendExpression(),a.mdOnAdd&&g.useOnAddExpression(),a.mdOnRemove&&g.useOnRemoveExpression(),a.mdOnSelect&&g.useOnSelectExpression(),f!==u.input&&t.$watch("$mdChipsCtrl.readonly",function(t){t||o.nextTick(function(){if(0===f.indexOf("<md-autocomplete")){var t=i.find("md-autocomplete");g.configureAutocomplete(t.controller("mdAutocomplete"))}g.configureUserInput(i.find("input"))})}),o.nextTick(function(){var t=i.find("input");t&&(g.configureInput(t),t.toggleClass("md-input",!0))})),p.length>0){var v=s(p.clone())(t.$parent);l(function(){i.find("md-chips-wrap").prepend(v)})}}},scope:{readonly:"=?readonly",removable:"=?mdRemovable",placeholder:"@?",secondaryPlaceholder:"@?",maxChips:"@?mdMaxChips",transformChip:"&mdTransformChip",onAppend:"&?mdOnAppend",onAdd:"&?mdOnAdd",onRemove:"&?mdOnRemove",addedMessage:"@?mdAddedMessage",removedMessage:"@?mdRemovedMessage",onSelect:"&?mdOnSelect",inputAriaDescribedBy:"@?inputAriaDescribedby",inputAriaLabelledBy:"@?inputAriaLabelledby",inputAriaLabel:"@?",containerHint:"@?",containerEmptyHint:"@?",deleteHint:"@?",deleteButtonLabel:"@?",separatorKeys:"=?mdSeparatorKeys",requireMatch:"=?mdRequireMatch",chipAppendDelayString:"@?mdChipAppendDelay",ngChange:"&?"}}}}(),function(){function t(t,e,n){this.$element=e,this.$attrs=t,this.$timeout=n,this.selectedItem=null,this.searchText="",this.deRegister=[],this.init()}t.$inject=["$attrs","$element","$timeout"],e.module("material.components.chips").controller("MdContactChipsCtrl",t),t.prototype.init=function(){var t=this,e=this.deRegister,n=this.$element;this.$timeout(function(){e.push(n.find("md-chips").scope().$watchCollection("$mdChipsCtrl.items",function(){t.setupChipsAria(),t.setupAutocompleteAria()}))})},t.prototype.setupChipsAria=function(){var t=this.$element.find("md-chips"),e=t.controller("mdChips");this.removedMessage&&(e.removedMessage=this.removedMessage),this.containerHint&&(e.containerHint=this.containerHint),this.containerEmptyHint&&(t.attr("container-empty-hint",this.containerEmptyHint),e.containerEmptyHint=this.containerEmptyHint),this.deleteHint&&(e.deleteHint=this.deleteHint),this.inputAriaLabel&&(e.inputAriaLabel=this.inputAriaLabel)},t.prototype.setupAutocompleteAria=function(){var t=this.$element.find("md-chips-wrap").find("md-autocomplete").find("input");this.inputAriaDescribedBy&&t.attr("aria-describedby",this.inputAriaDescribedBy),this.inputAriaLabelledBy&&(t.removeAttr("aria-label"),t.attr("aria-labelledby",this.inputAriaLabelledBy))},t.prototype.queryContact=function(t){return this.contactQuery({$query:t})},t.prototype.inputKeydown=function(t){if(this.separatorKeys&&!(this.separatorKeys.indexOf(t.keyCode)<0)){t.stopPropagation(),t.preventDefault();var n=e.element(t.target).controller("mdAutocomplete");n.select(n.index)}},t.prototype.itemName=function(t){return t[this.contactName]},t.prototype.$onDestroy=function(){for(var t;t=this.deRegister.pop();)t.call(this)}}(),function(){n.$inject=["$mdTheming","$mdUtil"],e.module("material.components.chips").directive("mdContactChips",n);var t='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          ng-change="$mdContactChipsCtrl.ngChange($mdContactChipsCtrl.contacts)"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-chip-append-delay="{{$mdContactChipsCtrl.chipAppendDelay}}"          md-separator-keys="$mdContactChipsCtrl.separatorKeys"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.itemName(item)"              md-no-cache="true"              md-min-length="$mdContactChipsCtrl.minLength"              md-autoselect              ng-keydown="$mdContactChipsCtrl.inputKeydown($event)"              placeholder="{{$mdContactChipsCtrl.contacts.length === 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}"                  ng-if="item[$mdContactChipsCtrl.contactImage]" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText"                    md-highlight-flags="{{$mdContactChipsCtrl.highlightFlags}}">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}"                  ng-if="$chip[$mdContactChipsCtrl.contactImage]" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';function n(e,n){return{template:function(e,n){return t},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:function(t,i){return function(t,r,o,s){var a=s;n.initOptionalProperties(t,i),e(r),r.attr("tabindex","-1"),o.$observe("mdChipAppendDelay",function(t){a.chipAppendDelay=t})}},scope:{contactQuery:"&mdContacts",placeholder:"@?",secondaryPlaceholder:"@?",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",ngChange:"&?",requireMatch:"=?mdRequireMatch",minLength:"=?mdMinLength",highlightFlags:"@?mdHighlightFlags",chipAppendDelay:"@?mdChipAppendDelay",separatorKeys:"=?mdSeparatorKeys",removedMessage:"@?mdRemovedMessage",inputAriaDescribedBy:"@?inputAriaDescribedby",inputAriaLabelledBy:"@?inputAriaLabelledby",inputAriaLabel:"@?",containerHint:"@?",containerEmptyHint:"@?",deleteHint:"@?"}}}}(),function(){r.$inject=["$mdColors","$mdUtil","$log","$parse"],i.$inject=["$mdTheming","$mdUtil","$log"];var t=/^{((\s|,)*?["'a-zA-Z-]+?\s*?:\s*?('|")[a-zA-Z0-9-.]*('|"))+\s*}$/,n=null;function i(t,i,r){return n=n||Object.keys(t.PALETTES),{applyThemeColors:function(t,n){try{n&&t.css((a={},l=(i=n).hasOwnProperty("color"),e.forEach(i,function(t,e){var n=s(t),i=e.indexOf("background")>-1;a[e]=o(n),i&&!l&&(a.color=o(n,!0))}),a))}catch(t){r.error(t.message)}var i,a,l},getThemeColor:function(t){return o(s(t))},hasTheme:function(n){return e.isDefined(t.THEMES[n.split("-")[0]])}};function o(e,n){n=n||!1;var r=t.PALETTES[e.palette][e.hue];return r=n?r.contrast:r.value,i.supplant("rgba({0}, {1}, {2}, {3})",[r[0],r[1],r[2],r[3]||e.opacity])}function s(n){var i=n.split("-"),r=e.isDefined(t.THEMES[i[0]])?i.splice(0,1)[0]:t.defaultTheme();return{theme:r,palette:a(i,r),hue:l(i,r),opacity:i[2]||1}}function a(e,r){var o=e.length>1&&-1!==n.indexOf(e[1]),s=e[0].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(o&&(s=e[0]+"-"+e.splice(1,1)),-1===n.indexOf(s)){var a=t.THEMES[r].colors[s];if(!a)throw new Error(i.supplant("mdColors: couldn't find '{palette}' in the palettes.",{palette:s}));s=a.name}return s}function l(e,n){var r=t.THEMES[n].colors;if("hue"===e[1]){var o=parseInt(e.splice(2,1)[0],10);if(o<1||o>3)throw new Error(i.supplant("mdColors: 'hue-{hueNumber}' is not a valid hue, can be only 'hue-1', 'hue-2' and 'hue-3'",{hueNumber:o}));if(e[1]="hue-"+o,!(e[0]in r))throw new Error(i.supplant("mdColors: 'hue-x' can only be used with [{availableThemes}], but was used with '{usedTheme}'",{availableThemes:Object.keys(r).join(", "),usedTheme:e[0]}));return r[e[0]].hues[e[1]]}return e[1]||r[e[0]in r?e[0]:"primary"].hues.default}}function r(n,i,r,o){return{restrict:"A",require:["^?mdTheme"],compile:function(s,a){var l=function(){var n=a.mdColors,r=n.indexOf("::")>-1,o=!!r||t.test(a.mdColors);a.mdColors=n.replace("::","");var s=e.isDefined(a.mdColorsWatch);return!r&&!o&&(!s||i.parseAttributeBoolean(a.mdColorsWatch))}();return function(t,i,s,a){var c=a[0],u={},h=function(e){"string"!=typeof e&&(e=""),s.mdColors||(s.mdColors="{}");var i=o(s.mdColors)(t);return c&&Object.keys(i).forEach(function(t){var r=i[t];n.hasTheme(r)||(i[t]=(e||c.$mdTheme)+"-"+r)}),d(i),i},d=function(t){if(!e.equals(t,u)){var n=Object.keys(u);u.background&&!n.color&&n.push("color"),n.forEach(function(t){i.css(t,"")})}u=t},f=e.noop;c&&(f=c.registerChanges(function(t){n.applyThemeColors(i,h(t))})),t.$on("$destroy",function(){f()});try{l?t.$watch(h,e.bind(this,n.applyThemeColors,i),!0):n.applyThemeColors(i,h())}catch(t){r.error(t.message)}}}}}e.module("material.components.colors",["material.core"]).directive("mdColors",r).service("$mdColors",i)}(),function(){function t(t){return{restrict:"E",controller:["$scope","$element",function(t,e){this.$scope=t,this.$element=e}],link:function(n,i){var r;i.addClass("_md"),t(i),n.$broadcast("$mdContentLoaded",i),r=i[0],e.element(r).on("$md.pressdown",function(t){"t"===t.pointer.type&&(t.$materialScrollFixed||(t.$materialScrollFixed=!0,0===r.scrollTop?r.scrollTop=1:r.scrollHeight===r.scrollTop+r.offsetHeight&&(r.scrollTop-=1)))})}}}t.$inject=["$mdTheming"],e.module("material.components.content",["material.core"]).directive("mdContent",t)}(),e.module("material.components.datepicker",["material.core","material.components.icon","material.components.virtualRepeat"]),function(){r.$inject=["$element","$scope","$$mdDateUtil","$mdUtil","$mdConstant","$mdTheming","$$rAF","$attrs","$mdDateLocale"],e.module("material.components.datepicker").directive("mdCalendar",function(){return{template:function(t,e){return'<div ng-switch="calendarCtrl.currentView" '+(e.hasOwnProperty("ngIf")?"":'ng-if="calendarCtrl.isInitialized"')+'><md-calendar-year ng-switch-when="year"></md-calendar-year><md-calendar-month ng-switch-default></md-calendar-month></div>'},scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",dateFilter:"=mdDateFilter",_mode:"@mdMode",_currentView:"@mdCurrentView"},require:["ngModel","mdCalendar"],controller:r,controllerAs:"calendarCtrl",bindToController:!0,link:function(t,e,n,i){var r=i[0];i[1].configureNgModel(r)}}});var t=340,n=0,i={day:"month",month:"year"};function r(t,i,r,o,s,a,l,c,u){a(t),this.$element=t,this.$scope=i,this.dateUtil=r,this.$mdUtil=o,this.keyCode=s.KEY_CODE,this.$$rAF=l,this.$mdDateLocale=u,this.today=this.dateUtil.createDateAtMidnight(),this.ngModelCtrl=null,this.SELECTED_DATE_CLASS="md-calendar-selected-date",this.TODAY_CLASS="md-calendar-date-today",this.FOCUSED_DATE_CLASS="md-focus",this.id=n++,this.displayDate=null,this.selectedDate=null,this.firstRenderableDate=null,this.lastRenderableDate=null,this.isInitialized=!1,this.width=0,this.scrollbarWidth=0,c.tabindex||t.attr("tabindex","-1");var h,d=e.bind(this,this.handleKeyEvent);(h=t.parent().hasClass("md-datepicker-calendar")?e.element(document.body):t).on("keydown",d),i.$on("$destroy",function(){h.off("keydown",d)}),1===e.version.major&&e.version.minor<=4&&this.$onInit()}r.prototype.$onInit=function(){this._mode&&i.hasOwnProperty(this._mode)?(this.currentView=i[this._mode],this.mode=this._mode):(this.currentView=this._currentView||"month",this.mode=null);var t=this.$mdDateLocale;this.minDate&&this.minDate>t.firstRenderableDate?this.firstRenderableDate=this.minDate:this.firstRenderableDate=t.firstRenderableDate,this.maxDate&&this.maxDate<t.lastRenderableDate?this.lastRenderableDate=this.maxDate:this.lastRenderableDate=t.lastRenderableDate},r.prototype.configureNgModel=function(t){var e=this;e.ngModelCtrl=t,e.$mdUtil.nextTick(function(){e.isInitialized=!0}),t.$render=function(){var t=this.$viewValue;e.$scope.$broadcast("md-calendar-parent-changed",t),e.selectedDate||(e.selectedDate=t),e.displayDate||(e.displayDate=e.selectedDate||e.today)}},r.prototype.setNgModelValue=function(t){var e=this.dateUtil.createDateAtMidnight(t);return this.focus(e),this.$scope.$emit("md-calendar-change",e),this.ngModelCtrl.$setViewValue(e),this.ngModelCtrl.$render(),e},r.prototype.setCurrentView=function(t,n){var i=this;i.$mdUtil.nextTick(function(){i.currentView=t,n&&(i.displayDate=e.isDate(n)?n:new Date(n))})},r.prototype.focus=function(t){if(this.dateUtil.isValidDate(t)){var e=this.$element[0].querySelector("."+this.FOCUSED_DATE_CLASS);e&&e.classList.remove(this.FOCUSED_DATE_CLASS);var n=this.getDateId(t,this.currentView),i=document.getElementById(n);i&&(i.classList.add(this.FOCUSED_DATE_CLASS),i.focus(),this.displayDate=t)}else{var r=this.$element[0].querySelector("[ng-switch]");r&&r.focus()}},r.prototype.changeSelectedDate=function(t){var e=this.SELECTED_DATE_CLASS,n=this.$element[0].querySelector("."+e);if(n&&(n.classList.remove(e),n.setAttribute("aria-selected","false")),t){var i=document.getElementById(this.getDateId(t,this.currentView));i&&(i.classList.add(e),i.setAttribute("aria-selected","true"))}this.selectedDate=t},r.prototype.getActionFromKeyEvent=function(t){var e=this.keyCode;switch(t.which){case e.ENTER:return"select";case e.RIGHT_ARROW:return"move-right";case e.LEFT_ARROW:return"move-left";case e.DOWN_ARROW:return t.metaKey?"move-page-down":"move-row-down";case e.UP_ARROW:return t.metaKey?"move-page-up":"move-row-up";case e.PAGE_DOWN:return"move-page-down";case e.PAGE_UP:return"move-page-up";case e.HOME:return"start";case e.END:return"end";default:return null}},r.prototype.handleKeyEvent=function(t){var e=this;this.$scope.$apply(function(){if(t.which==e.keyCode.ESCAPE||t.which==e.keyCode.TAB)return e.$scope.$emit("md-calendar-close"),void(t.which==e.keyCode.TAB&&t.preventDefault());var n=e.getActionFromKeyEvent(t);n&&(t.preventDefault(),t.stopPropagation(),e.$scope.$broadcast("md-calendar-parent-action",n))})},r.prototype.hideVerticalScrollbar=function(e){var n=this,i=e.$element[0],r=i.querySelector(".md-calendar-scroll-mask");function o(){var i=n.width||t,o=n.scrollbarWidth,s=e.calendarScroller;r.style.width=i+"px",s.style.width=i+o+"px",s.style.paddingRight=o+"px"}n.width>0?o():n.$$rAF(function(){var t=e.calendarScroller;n.scrollbarWidth=t.offsetWidth-t.clientWidth,n.width=i.querySelector("table").offsetWidth,o()})},r.prototype.getDateId=function(t,e){if(!e)throw new Error("A namespace for the date id has to be specified.");return["md",this.id,e,t.getFullYear(),t.getMonth(),t.getDate()].join("-")},r.prototype.updateVirtualRepeat=function(){var t=this.$scope,e=t.$on("$md-resize-enable",function(){t.$$phase||t.$apply(),e()})}}(),function(){i.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$mdDateLocale"],e.module("material.components.datepicker").directive("mdCalendarMonth",function(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table><div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container" md-offset-size="'+(n-t)+'"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-month-body role="rowgroup" md-virtual-repeat="i in monthCtrl.items" md-month-offset="$index" class="md-calendar-month" md-start-index="monthCtrl.getSelectedMonthIndex()" md-item-size="'+t+'"><tr aria-hidden="true" md-force-height="\''+t+"px'\"></tr></tbody></table></md-virtual-repeat-container></div>",require:["^^mdCalendar","mdCalendarMonth"],controller:i,controllerAs:"monthCtrl",bindToController:!0,link:function(t,e,n,i){var r=i[0];i[1].initialize(r)}}});var t=265,n=45;function i(t,e,n,i,r,o){this.$element=t,this.$scope=e,this.$animate=n,this.$q=i,this.dateUtil=r,this.dateLocale=o,this.calendarScroller=t[0].querySelector(".md-virtual-repeat-scroller"),this.isInitialized=!1,this.isMonthTransitionInProgress=!1;var s=this;this.cellClickHandler=function(){var t=r.getTimestampFromNode(this);s.$scope.$apply(function(){s.calendarCtrl.setNgModelValue(t)})},this.headerClickHandler=function(){s.calendarCtrl.setCurrentView("year",r.getTimestampFromNode(this))}}i.prototype.initialize=function(t){this.items={length:this.dateUtil.getMonthDistance(t.firstRenderableDate,t.lastRenderableDate)+2},this.calendarCtrl=t,this.attachScopeListeners(),t.updateVirtualRepeat(),t.ngModelCtrl&&t.ngModelCtrl.$render()},i.prototype.getSelectedMonthIndex=function(){var t=this.calendarCtrl;return this.dateUtil.getMonthDistance(t.firstRenderableDate,t.displayDate||t.selectedDate||t.today)},i.prototype.changeDisplayDate=function(t){if(!this.isInitialized)return this.buildWeekHeader(),this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(!this.dateUtil.isValidDate(t)||this.isMonthTransitionInProgress)return this.$q.when();this.isMonthTransitionInProgress=!0;var e=this.animateDateChange(t);this.calendarCtrl.displayDate=t;var n=this;return e.then(function(){n.isMonthTransitionInProgress=!1}),e},i.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var n=this.dateUtil.getMonthDistance(this.calendarCtrl.firstRenderableDate,e);this.calendarScroller.scrollTop=n*t}return this.$q.when()},i.prototype.buildWeekHeader=function(){for(var t=this.dateLocale.firstDayOfWeek,e=this.dateLocale.shortDays,n=document.createElement("tr"),i=0;i<7;i++){var r=document.createElement("th");r.textContent=e[(i+t)%7],n.appendChild(r)}this.$element.find("thead").append(n)},i.prototype.attachScopeListeners=function(){var t=this;t.$scope.$on("md-calendar-parent-changed",function(e,n){t.calendarCtrl.changeSelectedDate(n),t.changeDisplayDate(n)}),t.$scope.$on("md-calendar-parent-action",e.bind(this,this.handleKeyEvent))},i.prototype.handleKeyEvent=function(t,e){var n=this.calendarCtrl,i=n.displayDate;if("select"===e)n.setNgModelValue(i);else{var r=null,o=this.dateUtil;switch(e){case"move-right":r=o.incrementDays(i,1);break;case"move-left":r=o.incrementDays(i,-1);break;case"move-page-down":r=o.incrementMonths(i,1);break;case"move-page-up":r=o.incrementMonths(i,-1);break;case"move-row-down":r=o.incrementDays(i,7);break;case"move-row-up":r=o.incrementDays(i,-7);break;case"start":r=o.getFirstDateOfMonth(i);break;case"end":r=o.getLastDateOfMonth(i)}r&&(r=this.dateUtil.clampDate(r,n.minDate,n.maxDate),this.changeDisplayDate(r).then(function(){n.focus(r)}))}}}(),function(){function t(t,i){var r=t('<md-icon md-svg-src="'+i.mdTabsArrow+'"></md-icon>')({})[0];return{require:["^^mdCalendar","^^mdCalendarMonth","mdCalendarMonthBody"],scope:{offset:"=mdMonthOffset"},controller:n,controllerAs:"mdMonthBodyCtrl",bindToController:!0,link:function(t,n,i,o){var s=o[0],a=o[1],l=o[2];l.calendarCtrl=s,l.monthCtrl=a,l.arrowIcon=r.cloneNode(!0),t.$watch(function(){return l.offset},function(t){e.isNumber(t)&&l.generateContent()})}}}function n(t,e,n){this.$element=t,this.dateUtil=e,this.dateLocale=n,this.monthCtrl=null,this.calendarCtrl=null,this.offset=null,this.focusAfterAppend=null}t.$inject=["$compile","$$mdSvgRegistry"],n.$inject=["$element","$$mdDateUtil","$mdDateLocale"],e.module("material.components.datepicker").directive("mdCalendarMonthBody",t),n.prototype.generateContent=function(){var t=this.dateUtil.incrementMonths(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForMonth(t)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},n.prototype.buildDateCell=function(t){var e=this.monthCtrl,n=this.calendarCtrl,i=document.createElement("td");if(i.tabIndex=-1,i.classList.add("md-calendar-date"),i.setAttribute("role","gridcell"),t){i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",this.dateLocale.longDateFormatter(t)),i.id=n.getDateId(t,"month"),i.setAttribute("data-timestamp",t.getTime()),this.dateUtil.isSameDay(t,n.today)&&i.classList.add(n.TODAY_CLASS),this.dateUtil.isValidDate(n.selectedDate)&&this.dateUtil.isSameDay(t,n.selectedDate)&&(i.classList.add(n.SELECTED_DATE_CLASS),i.setAttribute("aria-selected","true"));var r=this.dateLocale.dates[t.getDate()];if(this.isDateEnabled(t)){var o=document.createElement("span");o.classList.add("md-calendar-date-selection-indicator"),o.textContent=r,i.appendChild(o),i.addEventListener("click",e.cellClickHandler),n.displayDate&&this.dateUtil.isSameDay(t,n.displayDate)&&(this.focusAfterAppend=i)}else i.classList.add("md-calendar-date-disabled"),i.textContent=r}return i},n.prototype.isDateEnabled=function(t){return this.dateUtil.isDateWithinRange(t,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!e.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(t))},n.prototype.buildDateRow=function(t){var e=document.createElement("tr");return e.setAttribute("role","row"),e.setAttribute("aria-label",this.dateLocale.weekNumberFormatter(t)),e},n.prototype.buildCalendarForMonth=function(t){var e=this.dateUtil.isValidDate(t)?t:new Date,n=this.dateUtil.getFirstDateOfMonth(e),i=this.getLocaleDay_(n),r=this.dateUtil.getNumberOfDaysInMonth(e),o=document.createDocumentFragment(),s=1,a=this.buildDateRow(s);o.appendChild(a);var l=this.offset===this.monthCtrl.items.length-1,c=0,u=document.createElement("td"),h=document.createElement("span"),d=this.calendarCtrl;if(h.textContent=this.dateLocale.monthHeaderFormatter(e),u.appendChild(h),u.classList.add("md-calendar-month-label"),d.maxDate&&n>d.maxDate?u.classList.add("md-calendar-month-label-disabled"):d.mode||(u.addEventListener("click",this.monthCtrl.headerClickHandler),u.setAttribute("data-timestamp",n.getTime()),u.setAttribute("aria-label",this.dateLocale.monthFormatter(e)),u.classList.add("md-calendar-label-clickable"),u.appendChild(this.arrowIcon.cloneNode(!0))),i<=2){u.setAttribute("colspan","7");var f=this.buildDateRow();if(f.appendChild(u),o.insertBefore(f,a),l)return o}else c=3,u.setAttribute("colspan","3"),a.appendChild(u);for(var p=c;p<i;p++)a.appendChild(this.buildDateCell());for(var m=i,g=n,v=1;v<=r;v++){if(7===m){if(l)return o;m=0,s++,a=this.buildDateRow(s),o.appendChild(a)}g.setDate(v);var y=this.buildDateCell(g);a.appendChild(y),m++}for(;a.childNodes.length<7;)a.appendChild(this.buildDateCell());for(;o.childNodes.length<6;){for(var b=this.buildDateRow(),_=0;_<7;_++)b.appendChild(this.buildDateCell());o.appendChild(b)}return o},n.prototype.getLocaleDay_=function(t){return(t.getDay()+(7-this.dateLocale.firstDayOfWeek))%7}}(),function(){n.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$mdUtil"],e.module("material.components.datepicker").directive("mdCalendarYear",function(){return{template:'<div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-year-body role="rowgroup" md-virtual-repeat="i in yearCtrl.items" md-year-offset="$index" class="md-calendar-year" md-start-index="yearCtrl.getFocusedYearIndex()" md-item-size="'+t+'"><tr aria-hidden="true" md-force-height="\''+t+"px'\"></tr></tbody></table></md-virtual-repeat-container></div>",require:["^^mdCalendar","mdCalendarYear"],controller:n,controllerAs:"yearCtrl",bindToController:!0,link:function(t,e,n,i){var r=i[0];i[1].initialize(r)}}});var t=88;function n(t,e,n,i,r,o){this.$element=t,this.$scope=e,this.$animate=n,this.$q=i,this.dateUtil=r,this.calendarScroller=t[0].querySelector(".md-virtual-repeat-scroller"),this.isInitialized=!1,this.isMonthTransitionInProgress=!1,this.$mdUtil=o;var s=this;this.cellClickHandler=function(){s.onTimestampSelected(r.getTimestampFromNode(this))}}n.prototype.initialize=function(t){this.items={length:this.dateUtil.getYearDistance(t.firstRenderableDate,t.lastRenderableDate)+1},this.calendarCtrl=t,this.attachScopeListeners(),t.updateVirtualRepeat(),t.ngModelCtrl&&t.ngModelCtrl.$render()},n.prototype.getFocusedYearIndex=function(){var t=this.calendarCtrl;return this.dateUtil.getYearDistance(t.firstRenderableDate,t.displayDate||t.selectedDate||t.today)},n.prototype.changeDate=function(t){if(!this.isInitialized)return this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(this.dateUtil.isValidDate(t)&&!this.isMonthTransitionInProgress){var e=this,n=this.animateDateChange(t);return e.isMonthTransitionInProgress=!0,e.calendarCtrl.displayDate=t,n.then(function(){e.isMonthTransitionInProgress=!1})}},n.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var n=this.dateUtil.getYearDistance(this.calendarCtrl.firstRenderableDate,e);this.calendarScroller.scrollTop=n*t}return this.$q.when()},n.prototype.handleKeyEvent=function(t,e){var n=this,i=n.calendarCtrl,r=i.displayDate;if("select"===e)n.changeDate(r).then(function(){n.onTimestampSelected(r)});else{var o=null,s=n.dateUtil;switch(e){case"move-right":o=s.incrementMonths(r,1);break;case"move-left":o=s.incrementMonths(r,-1);break;case"move-row-down":o=s.incrementMonths(r,6);break;case"move-row-up":o=s.incrementMonths(r,-6)}if(o){var a=i.minDate?s.getFirstDateOfMonth(i.minDate):null,l=i.maxDate?s.getFirstDateOfMonth(i.maxDate):null;o=s.getFirstDateOfMonth(n.dateUtil.clampDate(o,a,l)),n.changeDate(o).then(function(){i.focus(o)})}}},n.prototype.attachScopeListeners=function(){var t=this;t.$scope.$on("md-calendar-parent-changed",function(e,n){t.calendarCtrl.changeSelectedDate(n?t.dateUtil.getFirstDateOfMonth(n):n),t.changeDate(n)}),t.$scope.$on("md-calendar-parent-action",e.bind(t,t.handleKeyEvent))},n.prototype.onTimestampSelected=function(t){var e=this.calendarCtrl;e.mode?this.$mdUtil.nextTick(function(){e.setNgModelValue(t)}):e.setCurrentView("month",t)}}(),function(){function t(t,e,n){this.$element=t,this.dateUtil=e,this.dateLocale=n,this.calendarCtrl=null,this.yearCtrl=null,this.offset=null,this.focusAfterAppend=null}t.$inject=["$element","$$mdDateUtil","$mdDateLocale"],e.module("material.components.datepicker").directive("mdCalendarYearBody",function(){return{require:["^^mdCalendar","^^mdCalendarYear","mdCalendarYearBody"],scope:{offset:"=mdYearOffset"},controller:t,controllerAs:"mdYearBodyCtrl",bindToController:!0,link:function(t,n,i,r){var o=r[0],s=r[1],a=r[2];a.calendarCtrl=o,a.yearCtrl=s,t.$watch(function(){return a.offset},function(t){e.isNumber(t)&&a.generateContent()})}}}),t.prototype.generateContent=function(){var t=this.dateUtil.incrementYears(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForYear(t)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},t.prototype.buildMonthCell=function(t,n){var i=this.calendarCtrl,r=this.yearCtrl,o=this.buildBlankCell(),s=new Date(t,n,1);o.setAttribute("aria-label",this.dateLocale.monthFormatter(s)),o.id=i.getDateId(s,"year"),o.setAttribute("data-timestamp",String(s.getTime())),this.dateUtil.isSameMonthAndYear(s,i.today)&&o.classList.add(i.TODAY_CLASS),this.dateUtil.isValidDate(i.selectedDate)&&this.dateUtil.isSameMonthAndYear(s,i.selectedDate)&&(o.classList.add(i.SELECTED_DATE_CLASS),o.setAttribute("aria-selected","true"));var a=this.dateLocale.shortMonths[n];if(!this.dateUtil.isMonthWithinRange(s,i.minDate,i.maxDate)||e.isFunction(this.calendarCtrl.dateFilter)&&!this.calendarCtrl.dateFilter(s))o.classList.add("md-calendar-date-disabled"),o.textContent=a;else{var l=document.createElement("span");l.classList.add("md-calendar-date-selection-indicator"),l.textContent=a,o.appendChild(l),o.addEventListener("click",r.cellClickHandler),i.displayDate&&this.dateUtil.isSameMonthAndYear(s,i.displayDate)&&(this.focusAfterAppend=o)}return o},t.prototype.buildBlankCell=function(){var t=document.createElement("td");return t.tabIndex=-1,t.classList.add("md-calendar-date"),t.setAttribute("role","gridcell"),t.setAttribute("tabindex","-1"),t},t.prototype.buildCalendarForYear=function(t){var e,n=t.getFullYear(),i=document.createDocumentFragment(),r=document.createElement("tr"),o=document.createElement("td");for(o.className="md-calendar-month-label",o.textContent=n,r.appendChild(o),e=0;e<6;e++)r.appendChild(this.buildMonthCell(n,e));i.appendChild(r);var s=document.createElement("tr");for(s.appendChild(this.buildBlankCell()),e=6;e<12;e++)s.appendChild(this.buildMonthCell(n,e));return i.appendChild(s),i}}(),e.module("material.components.datepicker").config(["$provide",function(t){function e(){this.months=null,this.shortMonths=null,this.days=null,this.shortDays=null,this.dates=null,this.firstDayOfWeek=0,this.formatDate=null,this.parseDate=null,this.monthHeaderFormatter=null,this.weekNumberFormatter=null,this.longDateFormatter=null,this.isDateComplete=null,this.msgCalendar="",this.msgOpenCalendar=""}e.prototype.$get=function(t,e){for(var n=t.DATETIME_FORMATS.SHORTDAY.map(function(t){return t.substring(0,1)}),i=Array(32),r=1;r<=31;r++)i[r]=r;var o=new Date(1880,0,1),s=new Date(o.getFullYear()+250,0,1),a={months:this.months||t.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||t.DATETIME_FORMATS.SHORTMONTH,days:this.days||t.DATETIME_FORMATS.DAY,shortDays:this.shortDays||n,dates:this.dates||i,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||function(t,n){if(!t)return"";var i=t.toLocaleTimeString(),r=t;return 0!==t.getHours()||-1===i.indexOf("11:")&&-1===i.indexOf("23:")||(r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),1,0,0)),e("date")(r,"M/d/yyyy",n)},parseDate:this.parseDate||function(t){return new Date(t)},isDateComplete:this.isDateComplete||function(t){return t=t.trim(),/^(([a-zA-Z]{3,}|[0-9]{1,4})([ .,]+|[\/-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/.test(t)},monthHeaderFormatter:this.monthHeaderFormatter||function(t){return a.shortMonths[t.getMonth()]+" "+t.getFullYear()},monthFormatter:this.monthFormatter||function(t){return a.months[t.getMonth()]+" "+t.getFullYear()},weekNumberFormatter:this.weekNumberFormatter||function(t){return"Week "+t},longDateFormatter:this.longDateFormatter||function(t){return[a.days[t.getDay()],a.months[t.getMonth()],a.dates[t.getDate()],t.getFullYear()].join(" ")},msgCalendar:this.msgCalendar||"Calendar",msgOpenCalendar:this.msgOpenCalendar||"Open calendar",firstRenderableDate:this.firstRenderableDate||o,lastRenderableDate:this.lastRenderableDate||s};return a},e.prototype.$get.$inject=["$locale","$filter"],t.provider("$mdDateLocale",new e)}]),e.module("material.components.datepicker").factory("$$mdDateUtil",function(){return{getFirstDateOfMonth:t,getNumberOfDaysInMonth:n,getDateInNextMonth:i,getDateInPreviousMonth:r,isInNextMonth:function(t,e){return o(i(t),e)},isInPreviousMonth:function(t,e){var n=r(t);return o(e,n)},getDateMidpoint:function(t,e){return c((t.getTime()+e.getTime())/2)},isSameMonthAndYear:o,getWeekOfMonth:function(e){var n=t(e);return Math.floor((n.getDay()+e.getDate()-1)/7)},incrementDays:function(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+e)},incrementMonths:s,getLastDateOfMonth:function(t){return new Date(t.getFullYear(),t.getMonth(),n(t))},isSameDay:function(t,e){return t.getDate()==e.getDate()&&o(t,e)},getMonthDistance:function(t,e){return 12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth())},isValidDate:a,setDateTimeToMidnight:l,createDateAtMidnight:c,isDateWithinRange:function(t,e,n){var i=c(t),r=a(e)?c(e):null,o=a(n)?c(n):null;return(!r||r<=i)&&(!o||o>=i)},incrementYears:function(t,e){return s(t,12*e)},getYearDistance:function(t,e){return e.getFullYear()-t.getFullYear()},clampDate:function(t,e,n){var i=t;return e&&t<e&&(i=new Date(e.getTime())),n&&t>n&&(i=new Date(n.getTime())),i},getTimestampFromNode:function(t){if(t&&t.hasAttribute("data-timestamp"))return Number(t.getAttribute("data-timestamp"))},isMonthWithinRange:function(t,e,n){var i=t.getMonth(),r=t.getFullYear();return(!e||e.getFullYear()<r||e.getMonth()<=i)&&(!n||n.getFullYear()>r||n.getMonth()>=i)}};function t(t){return new Date(t.getFullYear(),t.getMonth(),1)}function n(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function i(t){return new Date(t.getFullYear(),t.getMonth()+1,1)}function r(t){return new Date(t.getFullYear(),t.getMonth()-1,1)}function o(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()}function s(t,e){var i=new Date(t.getFullYear(),t.getMonth()+e,1),r=n(i);return r<t.getDate()?i.setDate(r):i.setDate(t.getDate()),i}function a(t){return t&&t.getTime&&!isNaN(t.getTime())}function l(t){a(t)&&t.setHours(0,0,0,0)}function c(t){var n;return l(n=e.isUndefined(t)?new Date:new Date(t)),n}}),function(){function i(t,n,i,r){return{template:function(e,n){var i=n.mdHideIcons,r=n.ariaLabel||n.mdPlaceholder,o="all"===i||"calendar"===i?"":'<md-button class="md-datepicker-button md-icon-button" type="button" tabindex="-1" aria-hidden="true" ng-click="ctrl.openCalendarPane($event)"><md-icon class="md-datepicker-calendar-icon" aria-label="md-calendar" md-svg-src="'+t.mdCalendar+'"></md-icon></md-button>',s="";return"all"!==i&&"triangle"!==i&&(s='<md-button type="button" md-no-ink class="md-datepicker-triangle-button md-icon-button" ng-click="ctrl.openCalendarPane($event)" aria-label="{{::ctrl.locale.msgOpenCalendar}}"><div class="md-datepicker-expand-triangle"></div></md-button>',e.addClass(a)),o+'<div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}"><input '+(r?'aria-label="'+r+'" ':"")+'class="md-datepicker-input" aria-haspopup="dialog" ng-focus="ctrl.setFocused(true)" ng-blur="ctrl.setFocused(false)"> '+s+'</div><div class="md-datepicker-calendar-pane md-whiteframe-z1" id="{{::ctrl.calendarPaneId}}"><div class="md-datepicker-input-mask"><div class="md-datepicker-input-mask-opaque"></div></div><div class="md-datepicker-calendar"><md-calendar role="dialog" aria-label="{{::ctrl.locale.msgCalendar}}" md-current-view="{{::ctrl.currentView}}" md-mode="{{::ctrl.mode}}" md-min-date="ctrl.minDate" md-max-date="ctrl.maxDate" md-date-filter="ctrl.dateFilter" ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen"></md-calendar></div></div>'},require:["ngModel","mdDatepicker","?^mdInputContainer","?^form"],scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",placeholder:"@mdPlaceholder",currentView:"@mdCurrentView",mode:"@mdMode",dateFilter:"=mdDateFilter",isOpen:"=?mdIsOpen",debounceInterval:"=mdDebounceInterval",dateLocale:"=mdDateLocale"},controller:c,controllerAs:"ctrl",bindToController:!0,link:function(t,a,l,c){var u=c[0],h=c[1],d=c[2],f=c[3],p=n.parseAttributeBoolean(l.mdNoAsterisk);if(h.configureNgModel(u,d,r),d){var m=a[0].querySelector(".md-errors-spacer");m&&a.after(e.element("<div>").append(m)),d.setHasPlaceholder(l.mdPlaceholder),d.input=a,d.element.addClass(o).toggleClass(s,"calendar"!==l.mdHideIcons&&"all"!==l.mdHideIcons),d.label?p||l.$observe("required",function(t){d.label.toggleClass("md-required",!!t)}):i.expect(a,"aria-label",l.mdPlaceholder),t.$watch(d.isErrorGetter||function(){return u.$invalid&&(u.$touched||f&&f.$submitted)},d.setInvalid)}else if(f)var g=t.$watch(function(){return f.$submitted},function(t){t&&(h.updateErrorState(),g())})}}}c.$inject=["$scope","$element","$attrs","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF","$filter","$timeout"],i.$inject=["$$mdSvgRegistry","$mdUtil","$mdAria","inputDirective"],e.module("material.components.datepicker").directive("mdDatepicker",i);var r="md-datepicker-open",o="_md-datepicker-floating-label",s="_md-datepicker-has-calendar-icon",a="_md-datepicker-has-triangle-icon",l=/ipad|iphone|ipod|android/i;function c(i,r,o,s,a,c,u,h,d,f,p,m){this.$window=s,this.dateUtil=d,this.$mdConstant=a,this.$mdUtil=u,this.$$rAF=f,this.$mdDateLocale=h,this.$timeout=m,this.documentElement=e.element(document.documentElement),this.ngModelCtrl=null,this.inputElement=r[0].querySelector("input"),this.ngInputElement=e.element(this.inputElement),this.inputContainer=r[0].querySelector(".md-datepicker-input-container"),this.calendarPane=r[0].querySelector(".md-datepicker-calendar-pane"),this.calendarButton=r[0].querySelector(".md-datepicker-button"),this.inputMask=e.element(r[0].querySelector(".md-datepicker-input-mask-opaque")),this.$element=r,this.$attrs=o,this.$scope=i,this.date=null,this.isFocused=!1,this.isDisabled=n,this.setDisabled(r[0].disabled||e.isString(o.disabled)),this.isCalendarOpen=!1,this.openOnFocus=o.hasOwnProperty("mdOpenOnFocus"),this.mdInputContainer=null,this.calendarPaneOpenedFrom=null,this.calendarPaneId="md-date-pane-"+u.nextUid(),this.bodyClickHandler=e.bind(this,this.handleBodyClick),this.windowEventName=l.test(navigator.userAgent||navigator.vendor||t.opera)?"orientationchange":"resize",this.windowEventHandler=u.debounce(e.bind(this,this.closeCalendarPane),100),this.windowBlurHandler=e.bind(this,this.handleWindowBlur),this.ngDateFilter=p("date"),this.leftMargin=20,this.topMargin=null,o.tabindex?(this.ngInputElement.attr("tabindex",o.tabindex),o.$set("tabindex",null)):o.$set("tabindex","-1"),o.$set("aria-owns",this.calendarPaneId),c(r),c(e.element(this.calendarPane));var g=this;i.$on("$destroy",function(){g.detachCalendarPane()}),o.mdIsOpen&&i.$watch("ctrl.isOpen",function(t){t?g.openCalendarPane({target:g.inputElement}):g.closeCalendarPane()}),1===e.version.major&&e.version.minor<=4&&this.$onInit()}c.prototype.$onInit=function(){this.locale=this.dateLocale?e.extend({},this.$mdDateLocale,this.dateLocale):this.$mdDateLocale,this.installPropertyInterceptors(),this.attachChangeListeners(),this.attachInteractionListeners()},c.prototype.configureNgModel=function(t,n,i){this.ngModelCtrl=t,this.mdInputContainer=n,this.$attrs.$set("type","date"),i[0].link.pre(this.$scope,{on:e.noop,val:e.noop,0:{}},this.$attrs,[t]);var r=this;r.ngModelCtrl.$formatters.push(function(t){var n=e.isDefined(t)?t:null;if(!(t instanceof Date)&&(n=Date.parse(t),!isNaN(n)&&e.isNumber(n)&&(t=new Date(n)),t&&!(t instanceof Date)))throw Error("The ng-model for md-datepicker must be a Date instance or a value that can be parsed into a date. Currently the model is of type: "+typeof t);return r.onExternalChange(t),t}),t.$viewChangeListeners.unshift(e.bind(this,this.updateErrorState));var o=r.$mdUtil.getModelOption(t,"updateOn");o&&this.ngInputElement.on(o,e.bind(this.$element,this.$element.triggerHandler,o))},c.prototype.attachChangeListeners=function(){var t=this;t.$scope.$on("md-calendar-change",function(e,n){t.setModelValue(n),t.onExternalChange(n),t.closeCalendarPane()}),t.ngInputElement.on("input",e.bind(t,t.resizeInputElement));var n=e.isDefined(this.debounceInterval)?this.debounceInterval:500;t.ngInputElement.on("input",t.$mdUtil.debounce(t.handleInputEvent,n,t))},c.prototype.attachInteractionListeners=function(){var t=this,n=this.$scope,i=this.$mdConstant.KEY_CODE;t.ngInputElement.on("keydown",function(e){e.altKey&&e.keyCode===i.DOWN_ARROW&&(t.openCalendarPane(e),n.$digest())}),t.openOnFocus&&(t.ngInputElement.on("focus",e.bind(t,t.openCalendarPane)),t.ngInputElement.on("click",function(t){t.stopPropagation()}),t.ngInputElement.on("pointerdown",function(t){t.target&&t.target.setPointerCapture&&t.target.setPointerCapture(t.pointerId)}),e.element(t.$window).on("blur",t.windowBlurHandler),n.$on("$destroy",function(){e.element(t.$window).off("blur",t.windowBlurHandler)})),n.$on("md-calendar-close",function(){t.closeCalendarPane()})},c.prototype.installPropertyInterceptors=function(){var t=this;if(this.$attrs.ngDisabled){var e=this.$scope.$parent;e&&e.$watch(this.$attrs.ngDisabled,function(e){t.setDisabled(e)})}Object.defineProperty(this,"placeholder",{get:function(){return t.inputElement.placeholder},set:function(e){t.inputElement.placeholder=e||""}})},c.prototype.setDisabled=function(t){this.isDisabled=t,this.inputElement.disabled=t,this.calendarButton&&(this.calendarButton.disabled=t)},c.prototype.updateErrorState=function(t){var n=t||this.date;if(this.clearErrorState(),this.dateUtil.isValidDate(n)){if(n=this.dateUtil.createDateAtMidnight(n),this.dateUtil.isValidDate(this.minDate)){var i=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity("mindate",n>=i)}if(this.dateUtil.isValidDate(this.maxDate)){var r=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity("maxdate",n<=r)}e.isFunction(this.dateFilter)&&this.ngModelCtrl.$setValidity("filtered",this.dateFilter(n))}else this.ngModelCtrl.$setValidity("valid",null==n);var o=this.inputElement.value,s=this.locale.parseDate(o);!this.isInputValid(o,s)&&this.ngModelCtrl.$valid&&this.ngModelCtrl.$setValidity("valid",null==n),e.element(this.inputContainer).toggleClass("md-datepicker-invalid",!this.ngModelCtrl.$valid)},c.prototype.isInputValid=function(t,e){return""===t||this.dateUtil.isValidDate(e)&&this.locale.isDateComplete(t)&&this.isDateEnabled(e)},c.prototype.clearErrorState=function(){this.inputContainer.classList.remove("md-datepicker-invalid"),["mindate","maxdate","filtered","valid"].forEach(function(t){this.ngModelCtrl.$setValidity(t,!0)},this)},c.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+3},c.prototype.handleInputEvent=function(){var t=this.inputElement.value,e=t?this.locale.parseDate(t):null;this.dateUtil.setDateTimeToMidnight(e),this.isInputValid(t,e)&&(this.setModelValue(e),this.date=e),this.updateErrorState(e)},c.prototype.isDateEnabled=function(t){return this.dateUtil.isDateWithinRange(t,this.minDate,this.maxDate)&&(!e.isFunction(this.dateFilter)||this.dateFilter(t))},c.prototype.attachCalendarPane=function(){var t=this.calendarPane,n=document.body;t.style.transform="",this.$element.addClass(r),this.mdInputContainer&&this.mdInputContainer.element.addClass(r),e.element(n).addClass("md-datepicker-is-showing");var i=this.inputContainer.getBoundingClientRect(),o=n.getBoundingClientRect();(!this.topMargin||this.topMargin<0)&&(this.topMargin=(this.inputMask.parent().prop("clientHeight")-this.ngInputElement.prop("clientHeight"))/2);var s=i.top-o.top-this.topMargin,a=i.left-o.left-this.leftMargin,l=o.top<0&&0==document.body.scrollTop?-o.top:document.body.scrollTop,c=o.left<0&&0==document.body.scrollLeft?-o.left:document.body.scrollLeft,u=l+this.$window.innerHeight,h=c+this.$window.innerWidth;if(this.inputMask.css({position:"absolute",left:this.leftMargin+"px",top:this.topMargin+"px",width:i.width-1+"px",height:i.height-2+"px"}),a+360>h){if(h-360>0)a=h-360;else{a=c;var d=this.$window.innerWidth/360;t.style.transform="scale("+d+")"}t.classList.add("md-datepicker-pos-adjusted")}s+368>u&&u-368>l&&(s=u-368,t.classList.add("md-datepicker-pos-adjusted")),t.style.left=a+"px",t.style.top=s+"px",document.body.appendChild(t),this.$$rAF(function(){t.classList.add("md-pane-open")})},c.prototype.detachCalendarPane=function(){this.$element.removeClass(r),this.mdInputContainer&&this.mdInputContainer.element.removeClass(r),e.element(document.body).removeClass("md-datepicker-is-showing"),this.calendarPane.classList.remove("md-pane-open"),this.calendarPane.classList.remove("md-datepicker-pos-adjusted"),this.isCalendarOpen&&this.$mdUtil.enableScrolling(),this.calendarPane.parentNode&&this.calendarPane.parentNode.removeChild(this.calendarPane)},c.prototype.openCalendarPane=function(e){if(!this.isCalendarOpen&&!this.isDisabled&&!this.inputFocusedOnWindowBlur){this.isCalendarOpen=this.isOpen=!0,this.calendarPaneOpenedFrom=e.target,this.$mdUtil.disableScrollAround(this.calendarPane),this.attachCalendarPane(),this.focusCalendar(),this.evalAttr("ngFocus");var n=this;this.$mdUtil.nextTick(function(){n.documentElement.on("click touchstart",n.bodyClickHandler)},!1),t.addEventListener(this.windowEventName,this.windowEventHandler)}},c.prototype.closeCalendarPane=function(){if(this.isCalendarOpen){var e=this;e.detachCalendarPane(),e.ngModelCtrl.$setTouched(),e.evalAttr("ngBlur"),e.documentElement.off("click touchstart",e.bodyClickHandler),t.removeEventListener(e.windowEventName,e.windowEventHandler),e.calendarPaneOpenedFrom.focus(),e.calendarPaneOpenedFrom=null,e.openOnFocus?e.$timeout(n):n()}function n(){e.isCalendarOpen=e.isOpen=!1}},c.prototype.getCalendarCtrl=function(){return e.element(this.calendarPane.querySelector("md-calendar")).controller("mdCalendar")},c.prototype.focusCalendar=function(){var t=this;this.$mdUtil.nextTick(function(){t.getCalendarCtrl().focus()},!1)},c.prototype.setFocused=function(t){t||this.ngModelCtrl.$setTouched(),this.openOnFocus||this.evalAttr(t?"ngFocus":"ngBlur"),this.isFocused=t},c.prototype.handleBodyClick=function(t){this.isCalendarOpen&&(this.$mdUtil.getClosest(t.target,"md-calendar")||this.closeCalendarPane(),this.$scope.$digest())},c.prototype.handleWindowBlur=function(){this.inputFocusedOnWindowBlur=document.activeElement===this.inputElement},c.prototype.evalAttr=function(t){this.$attrs[t]&&this.$scope.$parent.$eval(this.$attrs[t])},c.prototype.setModelValue=function(t){var e=this.$mdUtil.getModelOption(this.ngModelCtrl,"timezone");this.ngModelCtrl.$setViewValue(this.ngDateFilter(t,"yyyy-MM-dd",e))},c.prototype.onExternalChange=function(t){var e=this.$mdUtil.getModelOption(this.ngModelCtrl,"timezone");this.date=t,this.inputElement.value=this.locale.formatDate(t,e),this.mdInputContainer&&this.mdInputContainer.setHasValue(!!t),this.resizeInputElement(),this.updateErrorState()}}(),function(){function t(t,n,i){return{restrict:"E",link:function(r,o){o.addClass("_md"),n(o),t(function(){var t,n=o[0].querySelector("md-dialog-content");function s(){o.toggleClass("md-content-overflow",n.scrollHeight>n.clientHeight)}n&&(t=n.getElementsByTagName("img"),s(),e.element(t).on("load",s)),r.$on("$destroy",function(){i.destroy(o)})})}}}function i(t){var i,r;return s.$inject=["$mdDialog","$mdConstant"],a.$inject=["$mdDialog","$mdAria","$mdUtil","$mdConstant","$animate","$document","$window","$rootElement","$log","$injector","$mdTheming","$interpolate","$mdInteraction"],t("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","closeTo","openFrom","parent","fullscreen","multiple"],options:a}).addPreset("alert",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","theme","css"],options:o}).addPreset("confirm",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","cancel","theme","css"],options:o}).addPreset("prompt",{methods:["title","htmlContent","textContent","initialValue","content","placeholder","ariaLabel","ok","cancel","theme","css","required"],options:o});function o(){return{template:['<md-dialog md-theme="{{ dialog.theme || dialog.defaultTheme }}" aria-label="{{ dialog.ariaLabel }}" ng-class="dialog.css">','  <md-dialog-content class="md-dialog-content" role="document" tabIndex="-1">','    <h2 class="md-title">{{ dialog.title }}</h2>','    <div ng-if="::dialog.mdHtmlContent" class="md-dialog-content-body" ','        ng-bind-html="::dialog.mdHtmlContent"></div>','    <div ng-if="::!dialog.mdHtmlContent" class="md-dialog-content-body">',"      <p>{{::dialog.mdTextContent}}</p>","    </div>",'    <md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container">','      <input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result"              placeholder="{{::dialog.placeholder}}" ng-required="dialog.required">',"    </md-input-container>","  </md-dialog-content>","  <md-dialog-actions>",'    <md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"               ng-click="dialog.abort()" class="md-primary md-cancel-button">',"      {{ dialog.cancel }}","    </md-button>",'    <md-button ng-click="dialog.hide()" class="md-primary md-confirm-button" md-autofocus="dialog.$type===\'alert\'"               ng-disabled="dialog.required && !dialog.result">',"      {{ dialog.ok }}","    </md-button>","  </md-dialog-actions>","</md-dialog>"].join("").replace(/\s\s+/g,""),controller:s,controllerAs:"dialog",bindToController:!0}}function s(t,n){this.$onInit=function(){var i="prompt"==this.$type;i&&this.initialValue&&(this.result=this.initialValue),this.hide=function(){t.hide(!i||this.result)},this.abort=function(){t.cancel()},this.keypress=function(r){var o=i&&this.required&&!e.isDefined(this.result);r.keyCode!==n.KEY_CODE.ENTER||o||t.hide(this.result)}}}function a(t,o,s,a,l,c,u,h,d,f,p,m,g){return{hasBackdrop:!0,isolateScope:!0,onCompiling:function(t){t.defaultTheme=p.defaultTheme(),function(t){var n;t.targetEvent&&t.targetEvent.target&&(n=e.element(t.targetEvent.target));var i=n&&n.controller("mdTheme");if(t.hasTheme=!!i,!t.hasTheme)return;t.themeWatch=i.$shouldWatch;var r=t.theme||i.$mdTheme;r&&(t.scope.theme=r);var o=i.registerChanges(function(e){t.scope.theme=e,t.themeWatch||o()})}(t)},onShow:function(t,n,i,r){e.element(c[0].body).addClass("md-dialog-is-showing");var o=n.find("md-dialog");if(o.hasClass("ng-cloak")){d.warn("$mdDialog: using `<md-dialog ng-cloak>` will affect the dialog opening animations.",n[0])}return v(i),_(o,i),b(t,n,i),y(n,i),S(n,i).then(function(){!function(t,e){var n=!0;function i(t){for(var e=function(t){for(var e=[];t.parentNode;){if(t===document.body)return e;for(var n=t.parentNode.children,i=0;i<n.length;i++)t===n[i]||x(n[i],["SCRIPT","STYLE"])||n[i].hasAttribute("aria-live")||e.push(n[i]);t=t.parentNode}return e}(t),i=0;i<e.length;i++)e[i].setAttribute("aria-hidden",n)}i(t[0]),e.unlockScreenReader=function(){n=!1,i(t[0]),e.unlockScreenReader=null}}(n,i),n[0].querySelector(".md-actions")&&d.warn("Using a class of md-actions is deprecated, please use <md-dialog-actions>."),function(){if(i.focusOnOpen){(s.findFocusTarget(n)||n[0].querySelector(".dialog-close, md-dialog-actions button:last-child")||o).focus()}}()})},onShowing:function(t,e,n,i){if(i){var r=i.htmlContent||n.htmlContent||"",o=i.textContent||n.textContent||i.content||n.content||"";if(r&&!f.has("$sanitize"))throw Error("The ngSanitize module must be loaded in order to use htmlContent.");if(r&&o)throw Error("md-dialog cannot have both `htmlContent` and `textContent`");i.mdHtmlContent=r,i.mdTextContent=o}},onRemove:function(t,n,o){o.deactivateListeners(),o.unlockScreenReader(),o.hideBackdrop(o.$destroy),i&&i.parentNode&&i.parentNode.removeChild(i);r&&r.parentNode&&r.parentNode.removeChild(r);return o.$destroy?s():function(t,e){return e.reverseAnimate().then(function(){e.contentElement&&e.clearAnimate()})}(0,o).then(s);function s(){e.element(c[0].body).removeClass("md-dialog-is-showing"),o.contentElement&&o.reverseContainerStretch(),o.cleanupElement(),o.$destroy||"keyboard"!==o.originInteraction||o.origin.focus()}},clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,closeTo:null,openFrom:null,focusOnOpen:!0,disableParentScroll:!0,autoWrap:!0,fullscreen:!1,transformTemplate:function(t,e){var n=m.startSymbol(),i=m.endSymbol(),r=n+(e.themeWatch?"":"::")+"theme"+i;return'<div class="md-dialog-container" tabindex="-1" '+(e.hasTheme?'md-theme="'+r+'"':"")+">"+function(t){return e.autoWrap&&!/<\/md-dialog>/g.test(t)?"<md-dialog>"+(t||"")+"</md-dialog>":t||""}(t)+"</div>"}};function v(t){function i(t,i){var r=e.element(t||{});if(r&&r.length){var o=e.isFunction(r[0].getBoundingClientRect);return e.extend(i||{},{element:o?r:n,bounds:o?r[0].getBoundingClientRect():e.extend({},{top:0,left:0,height:0,width:0},r[0]),focus:e.bind(r,r.focus)})}}function r(t,n){return e.isString(t)&&(t=c[0].querySelector(t)),e.element(t||n)}t.origin=e.extend({element:null,bounds:null,focus:e.noop},t.origin||{}),t.parent=r(t.parent,h),t.closeTo=i(r(t.closeTo)),t.openFrom=i(r(t.openFrom)),t.targetEvent&&(t.origin=i(t.targetEvent.target,t.origin),t.originInteraction=g.getLastInteractionType())}function y(n,i){var r=e.element(u),o=s.debounce(function(){w(n,i)},60),l=[],c=function(){var e="alert"==i.$type?t.hide:t.cancel;s.nextTick(e,!0)};if(i.escapeToClose){var h=i.parent,d=function(t){t.keyCode===a.KEY_CODE.ESCAPE&&(t.stopImmediatePropagation(),t.preventDefault(),c())};n.on("keydown",d),h.on("keydown",d),l.push(function(){n.off("keydown",d),h.off("keydown",d)})}if(r.on("resize",o),l.push(function(){r.off("resize",o)}),i.clickOutsideToClose){var f,p=n,m=function(t){f=t.target},g=function(t){f===p[0]&&t.target===p[0]&&(t.stopPropagation(),t.preventDefault(),c())};p.on("mousedown",m),p.on("mouseup",g),l.push(function(){p.off("mousedown",m),p.off("mouseup",g)})}i.deactivateListeners=function(){l.forEach(function(t){t()}),i.deactivateListeners=null}}function b(t,e,n){n.disableParentScroll&&(n.restoreScroll=s.disableScrollAround(e,n.parent)),n.hasBackdrop&&(n.backdrop=s.createBackdrop(t,"md-dialog-backdrop md-opaque"),l.enter(n.backdrop,n.parent)),n.hideBackdrop=function(t){n.backdrop&&(t?n.backdrop.remove():l.leave(n.backdrop)),n.disableParentScroll&&(n.restoreScroll&&n.restoreScroll(),delete n.restoreScroll),n.hideBackdrop=null}}function _(t,e){var n="alert"===e.$type?"alertdialog":"dialog",a=t.find("md-dialog-content"),l=t.attr("id"),c="dialogContent_"+(l||s.nextUid());t.attr({role:n,tabIndex:"-1"}),0===a.length&&(a=t,l&&(c=l)),a.attr("id",c),t.attr("aria-describedby",c),e.ariaLabel?o.expect(t,"aria-label",e.ariaLabel):o.expectAsync(t,"aria-label",function(){if(e.title)return e.title;var t=a.text().split(/\s+/);return t.length>3&&(t=t.slice(0,3).concat("...")),t.join(" ")}),(i=document.createElement("div")).classList.add("md-dialog-focus-trap"),i.tabIndex=0,r=i.cloneNode(!1);var u=function(){t.focus()};i.addEventListener("focus",u),r.addEventListener("focus",u),t[0].parentNode.insertBefore(i,t[0]),t.after(r)}function w(t,e){var n="fixed"==u.getComputedStyle(c[0].body).position,i=e.backdrop?u.getComputedStyle(e.backdrop[0]):null,r=i?Math.min(c[0].body.clientHeight,Math.ceil(Math.abs(parseInt(i.height,10)))):0,o={top:t.css("top"),height:t.css("height")},s=Math.abs(e.parent[0].getBoundingClientRect().top);return t.css({top:(n?s:0)+"px",height:r?r+"px":"100%"}),function(){t.css(o)}}function S(t,e){e.parent.append(t),e.reverseContainerStretch=w(t,e);var n=t.find("md-dialog"),i=s.dom.animator,r=i.calculateZoomToOrigin,o={transitionInClass:"md-transition-in",transitionOutClass:"md-transition-out"},a=i.toTransformCss(r(n,e.openFrom||e.origin)),l=i.toTransformCss("");return n.toggleClass("md-dialog-fullscreen",!!e.fullscreen),i.translate3d(n,a,l,o).then(function(t){return e.reverseAnimate=function(){return delete e.reverseAnimate,e.closeTo?(o={transitionInClass:"md-transition-out",transitionOutClass:"md-transition-in"},a=l,l=i.toTransformCss(r(n,e.closeTo)),i.translate3d(n,a,l,o)):t(l=i.toTransformCss(r(n,e.origin)))},e.clearAnimate=function(){return delete e.clearAnimate,n.removeClass([o.transitionOutClass,o.transitionInClass].join(" ")),i.translate3d(n,l,i.toTransformCss(""),{})},!0})}function x(t,e){if(-1!==e.indexOf(t.nodeName))return!0}}}t.$inject=["$$rAF","$mdTheming","$mdDialog"],i.$inject=["$$interimElementProvider"],e.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",t).provider("$mdDialog",i)}(),function(){function t(t){return{restrict:"E",link:t}}t.$inject=["$mdTheming"],e.module("material.components.divider",["material.core"]).directive("mdDivider",t)}(),function(){function t(t){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],compile:function(e,n){var i=e.children();t.prefixer().hasAttribute(i,"ng-repeat")?i.addClass("md-fab-action-item"):i.wrap('<div class="md-fab-action-item">')}}}t.$inject=["$mdUtil"],e.module("material.components.fabActions",["material.core"]).directive("mdFabActions",t)}(),function(){function t(t,n,i,r,o,s){var a,l=this,c=0;function u(t){"click"==t.type&&function(t){var e;e=t.target,r.getClosest(e,"md-fab-trigger")&&l.toggle(),function(t){return r.getClosest(t,"md-fab-actions")}(t.target)&&l.close()}(t),"focusout"!=t.type||a||(a=s(function(){l.close()},100,!1)),"focusin"==t.type&&a&&(s.cancel(a),a=null)}function h(){l.currentActionIndex=-1}function d(){n[0].scrollHeight>0?i.addClass(n,"_md-animations-ready").then(function(){n.removeClass("md-animations-waiting")}):c<10&&(s(d,100),c+=1)}function f(){n.off("keydown",m),e.element(document).off("click touchend",p)}function p(t){if(t.target){var e=r.getClosest(t.target,"md-fab-trigger"),n=r.getClosest(t.target,"md-fab-actions");e||n||l.close()}}function m(t){switch(t.which){case o.KEY_CODE.ESCAPE:return l.close(),t.preventDefault(),!1;case o.KEY_CODE.LEFT_ARROW:return function(t){"left"===l.direction?v(t):g(t)}(t),!1;case o.KEY_CODE.UP_ARROW:return function(t){"down"===l.direction?g(t):v(t)}(t),!1;case o.KEY_CODE.RIGHT_ARROW:return function(t){"left"===l.direction?g(t):v(t)}(t),!1;case o.KEY_CODE.DOWN_ARROW:return function(t){"up"===l.direction?g(t):v(t)}(t),!1}}function g(t){y(t,-1)}function v(t){y(t,1)}function y(t,n){var i=function(){var t=b()[0].querySelectorAll(".md-fab-action-item");return e.forEach(t,function(t){e.element(e.element(t).children()[0]).attr("tabindex",-1)}),t}();l.currentActionIndex=l.currentActionIndex+n,l.currentActionIndex=Math.min(i.length-1,l.currentActionIndex),l.currentActionIndex=Math.max(0,l.currentActionIndex);var r=e.element(i[l.currentActionIndex]).children()[0];e.element(r).attr("tabindex",0),r.focus(),t.preventDefault(),t.stopImmediatePropagation()}function b(){return n.find("md-fab-actions")}l.open=function(){t.$evalAsync("vm.isOpen = true")},l.close=function(){t.$evalAsync("vm.isOpen = false"),n.find("md-fab-trigger")[0].focus()},l.toggle=function(){t.$evalAsync("vm.isOpen = !vm.isOpen")},l.$onInit=function(){var o,s,a;l.direction=l.direction||"down",l.isOpen=l.isOpen||!1,h(),n.addClass("md-animations-waiting"),o=["click","focusin","focusout"],e.forEach(o,function(t){n.on(t,u)}),t.$on("$destroy",function(){e.forEach(o,function(t){n.off(t,u)}),f()}),t.$watch("vm.direction",function(t,e){i.removeClass(n,"md-"+e),i.addClass(n,"md-"+t),h()}),t.$watch("vm.isOpen",function(t){h(),s&&a||(s=n.find("md-fab-trigger"),a=b()),t?(n.on("keydown",m),r.nextTick(function(){e.element(document).on("click touchend",p)})):f();var o=t?"md-is-open":"",l=t?"":"md-is-open";s.attr("aria-haspopup",!0),s.attr("aria-expanded",t),a.attr("aria-hidden",!t),i.setClass(n,o,l)}),d()},1===e.version.major&&e.version.minor<=4&&this.$onInit()}t.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"],e.module("material.components.fabShared",["material.core"]).controller("MdFabController",t)}(),function(){i.$inject=["$timeout"],r.$inject=["$timeout"];var n=300;function i(i){function r(t){i(t,n,!1)}function o(n){if(!n.hasClass("md-animations-waiting")||n.hasClass("_md-animations-ready")){var i=n[0],r=n.controller("mdFabSpeedDial"),o=i.querySelectorAll(".md-fab-action-item"),s=i.querySelector("md-fab-trigger"),a=i.querySelector("._md-css-variables"),l=parseInt(t.getComputedStyle(a).zIndex);e.forEach(o,function(t,e){var n=t.style;n.transform=n.webkitTransform="",n.transitionDelay="",n.opacity=1,n.zIndex=o.length-e+l}),s.style.zIndex=l+o.length+1,r.isOpen||e.forEach(o,function(t,e){var n,i,o=t.style,a=(s.clientHeight-t.clientHeight)/2,l=(s.clientWidth-t.clientWidth)/2;switch(r.direction){case"up":n=t.scrollHeight*(e+1)+a,i="Y";break;case"down":n=-(t.scrollHeight*(e+1)+a),i="Y";break;case"left":n=t.scrollWidth*(e+1)+l,i="X";break;case"right":n=-(t.scrollWidth*(e+1)+l),i="X"}var c="translate"+i+"("+n+"px)";o.transform=o.webkitTransform=c})}}return{addClass:function(t,e,n){t.hasClass("md-fling")?(o(t),r(n)):n()},removeClass:function(t,e,n){o(t),r(n)}}}function r(i){function r(t){i(t,n,!1)}var o=65;function s(n){var i=n[0],r=n.controller("mdFabSpeedDial"),s=i.querySelectorAll(".md-fab-action-item"),a=i.querySelector("._md-css-variables"),l=parseInt(t.getComputedStyle(a).zIndex);e.forEach(s,function(t,e){var n=t.style,i=e*o;n.opacity=r.isOpen?1:0,n.transform=n.webkitTransform=r.isOpen?"scale(1)":"scale(0)",n.transitionDelay=(r.isOpen?i:s.length-i)+"ms",n.zIndex=s.length-e+l})}return{addClass:function(t,e,n){s(t),r(n)},removeClass:function(t,e,n){s(t),r(n)}}}e.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabActions"]).directive("mdFabSpeedDial",function(){return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:function(t,e){e.prepend('<div class="_md-css-variables"></div>')}}}).animation(".md-fling",i).animation(".md-scale",r).service("mdFabSpeedDialFlingAnimation",i).service("mdFabSpeedDialScaleAnimation",r)}(),function(){function n(){function n(n,i,r){if(i){var o=n[0],s=n.controller("mdFabToolbar"),a=o.querySelector(".md-fab-toolbar-background"),l=o.querySelector("md-fab-trigger button"),c=o.querySelector("md-toolbar"),u=o.querySelector("md-fab-trigger button md-icon"),h=n.find("md-fab-actions").children();if(l&&a){var d=t.getComputedStyle(l).getPropertyValue("background-color"),f=o.offsetWidth,p=(o.offsetHeight,f/l.offsetWidth*2);a.style.backgroundColor=d,a.style.borderRadius=f+"px",s.isOpen?(c.style.pointerEvents="inherit",a.style.width=l.offsetWidth+"px",a.style.height=l.offsetHeight+"px",a.style.transform="scale("+p+")",a.style.transitionDelay="0ms",u&&(u.style.transitionDelay=".3s"),e.forEach(h,function(t,e){t.style.transitionDelay=25*(h.length-e)+"ms"})):(c.style.pointerEvents="none",a.style.transform="scale(1)",a.style.top="0",n.hasClass("md-right")&&(a.style.left="0",a.style.right=null),n.hasClass("md-left")&&(a.style.right="0",a.style.left=null),a.style.transitionDelay="200ms",u&&(u.style.transitionDelay="0ms"),e.forEach(h,function(t,e){t.style.transitionDelay=200+25*e+"ms"}))}}}return{addClass:function(t,e,i){n(t,e),i()},removeClass:function(t,e,i){n(t,e),i()}}}e.module("material.components.fabToolbar",["material.core","material.components.fabShared","material.components.fabActions"]).directive("mdFabToolbar",function(){return{restrict:"E",transclude:!0,template:'<div class="md-fab-toolbar-wrapper">  <div class="md-fab-toolbar-content" ng-transclude></div></div>',scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:function(t,e,n){e.addClass("md-fab-toolbar"),e.find("md-fab-trigger").find("button").prepend('<div class="md-fab-toolbar-background"></div>')}}}).animation(".md-fab-toolbar",n).service("mdFabToolbarAnimation",n)}(),function(){function t(t,i,r,o,s){return{restrict:"E",controller:n,scope:{mdOnLayout:"&"},link:function(n,a,l,c){a.addClass("_md"),a.attr("role","list"),c.layoutDelegate=function(t){var i=[].filter.call(a.children(),function(t){return"MD-GRID-TILE"==t.tagName&&!t.$$mdDestroyed}),s={tileSpans:(c=i,[].map.call(c,function(t){var n=e.element(t).controller("mdGridTile");return{row:parseInt(o.getResponsiveAttribute(n.$attrs,"md-rowspan"),10)||1,col:parseInt(o.getResponsiveAttribute(n.$attrs,"md-colspan"),10)||1}})),colCount:S(),rowMode:C(),rowHeight:x(),gutter:k(o.getResponsiveAttribute(l,"md-gutter")||1)};var c;if(!t&&e.equals(s,u))return;var h=r(s.colCount,s.tileSpans,i).map(function(t,n){return{grid:{element:a,style:w(s.colCount,n,s.gutter,s.rowMode,s.rowHeight)},tiles:t.map(function(t,r){return{element:e.element(i[r]),style:_(t.position,t.spans,s.colCount,n,s.gutter,s.rowMode,s.rowHeight)}})}}).reflow().performance();n.mdOnLayout({$event:{performance:h}}),u=s};var u,h=e.bind(c,c.invalidateLayout),d=function(){for(var t in i.MEDIA)o(t),o.getQuery(i.MEDIA[t]).addListener(h);return o.watchResponsiveAttributes(["md-cols","md-row-height","md-gutter"],l,f)}();function f(t){null==t?c.invalidateLayout():o(t)&&c.invalidateLayout()}n.$on("$destroy",function(){for(var t in c.layoutDelegate=e.noop,d(),i.MEDIA)o.getQuery(i.MEDIA[t]).removeListener(h)});var p=t.startSymbol(),m=t.endSymbol();function g(t){return p+t+m}var v=t(g("share")+"% - ("+g("gutter")+" * "+g("gutterShare")+")"),y=t("calc(("+g("unit")+" + "+g("gutter")+") * "+g("offset")+")"),b=t("calc(("+g("unit")+") * "+g("span")+" + ("+g("span")+" - 1) * "+g("gutter")+")");function _(t,e,n,i,r,o,a){var c=1/n*100,u=(n-1)/n,h=v({share:c,gutterShare:u,gutter:r}),d=s.isRtl(l)?{right:y({unit:h,offset:t.col,gutter:r}),width:b({unit:h,span:e.col,gutter:r}),paddingTop:"",marginTop:"",top:"",height:""}:{left:y({unit:h,offset:t.col,gutter:r}),width:b({unit:h,span:e.col,gutter:r}),paddingTop:"",marginTop:"",top:"",height:""};switch(o){case"fixed":d.top=y({unit:a,offset:t.row,gutter:r}),d.height=b({unit:a,span:e.row,gutter:r});break;case"ratio":var f=c/a,p=v({share:f,gutterShare:u,gutter:r});d.paddingTop=b({unit:p,span:e.row,gutter:r}),d.marginTop=y({unit:p,offset:t.row,gutter:r});break;case"fit":p=v({share:f=1/i*100,gutterShare:(i-1)/i,gutter:r}),d.top=y({unit:p,offset:t.row,gutter:r}),d.height=b({unit:p,span:e.row,gutter:r})}return d}function w(t,e,n,i,r){var o={};switch(i){case"fixed":o.height=b({unit:r,span:e,gutter:n}),o.paddingBottom="";break;case"ratio":var s=v({share:1/t*100*(1/r),gutterShare:1===t?0:(t-1)/t,gutter:n});o.height="",o.paddingBottom=b({unit:s,span:e,gutter:n})}return o}function S(){var t=parseInt(o.getResponsiveAttribute(l,"md-cols"),10);if(isNaN(t))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return t}function x(){var t=o.getResponsiveAttribute(l,"md-row-height");if(!t)throw"md-grid-list: md-row-height attribute was not found";switch(C()){case"fixed":return k(t);case"ratio":var e=t.split(":");return parseFloat(e[0])/parseFloat(e[1]);case"fit":return 0}}function C(){var t=o.getResponsiveAttribute(l,"md-row-height");if(!t)throw"md-grid-list: md-row-height attribute was not found";return"fit"==t?"fit":-1!==t.indexOf(":")?"ratio":"fixed"}function k(t){return/\D$/.test(t)?t:t+"px"}}}}function n(t){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=t.nextTick,this.layoutDelegate=e.noop}function i(t){var n=r;return i.animateWith=function(t){n=e.isFunction(t)?t:r},i;function i(e,i){var r,o,s,a,l,c;return a=t.time(function(){o=function(t,e){var n=0,i=0,r=function(){for(var e=[],n=0;n<t;n++)e.push(0);return e}();return{positioning:e.map(function(t,e){return{spans:t,position:o(t,e)}}),rowCount:i+Math.max.apply(Math,r)};function o(e,o){if(e.col>t)throw"md-grid-list: Tile at position "+o+" has a colspan ("+e.col+") that exceeds the column count ("+t+")";for(var c=0,u=0;u-c<e.col;)n>=t?s():-1!==(c=r.indexOf(0,n))&&-1!==(u=l(c+1))?n=u+1:(c=u=0,s());return a(c,e.col,e.row),n=c+e.col,{col:c,row:i}}function s(){n=0,i++,a(0,t,-1)}function a(t,e,n){for(var i=t;i<t+e;i++)r[i]=Math.max(r[i]+n,0)}function l(t){var e;for(e=t;e<r.length;e++)if(0!==r[e])return e;if(e===r.length)return e}}(e,i)}),r={layoutInfo:function(){return o},map:function(e){return l=t.time(function(){var t=r.layoutInfo();s=e(t.positioning,t.rowCount)}),r},reflow:function(e){return c=t.time(function(){(e||n)(s.grid,s.tiles)}),r},performance:function(){return{tileCount:i.length,layoutTime:a,mapTime:l,reflowTime:c,totalTime:a+l+c}}}}function r(t,e){t.element.css(t.style),e.forEach(function(t){t.element.css(t.style)})}}function r(t){return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(t){this.$attrs=t}],link:function(n,i,r,o){i.attr("role","listitem");var s=t.watchResponsiveAttributes(["md-colspan","md-rowspan"],r,e.bind(o,o.invalidateLayout));o.invalidateTiles(),n.$on("$destroy",function(){i[0].$$mdDestroyed=!0,s(),o.invalidateLayout()}),e.isDefined(n.$parent.$index)&&n.$watch(function(){return n.$parent.$index},function(t,e){t!==e&&o.invalidateTiles()})}}}function o(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}n.$inject=["$mdUtil"],i.$inject=["$mdUtil"],t.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia","$mdUtil"],r.$inject=["$mdMedia"],e.module("material.components.gridList",["material.core"]).directive("mdGridList",t).directive("mdGridTile",r).directive("mdGridTileFooter",o).directive("mdGridTileHeader",o).factory("$mdGridLayout",i),n.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(e.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}}}(),e.module("material.components.icon",["material.core"]),e.module("material.components.icon").directive("mdIcon",["$mdIcon","$mdTheming","$mdAria","$sce",function(t,e,n,i){return{restrict:"E",link:function(i,r,o){e(r);var s=o.mdFontIcon,a=t.fontSet(o.mdFontSet);o.mdSvgIcon||o.mdSvgSrc||(o.mdFontIcon&&r.addClass("md-font "+o.mdFontIcon),r.addClass(a)),o.$observe("mdFontIcon",u),o.$observe("mdFontSet",u),r[0].getAttribute(o.$attr.mdSvgSrc);var l,c=o.$normalize(o.$attr.mdSvgIcon||o.$attr.mdSvgSrc||"");function u(){if(!o.mdSvgIcon&&!o.mdSvgSrc){o.mdFontIcon&&(r.removeClass(s),r.addClass(o.mdFontIcon),s=o.mdFontIcon);var e=t.fontSet(o.mdFontSet);a!==e&&(r.removeClass(a),r.addClass(e),a=e)}}o.role||(n.expect(r,"role","img"),o.role="img"),"img"!==o.role||o.ariaHidden||n.hasAriaLabel(r)||(o.alt?n.expect(r,"aria-label",o.alt):n.parentHasAriaLabel(r,2)?n.expect(r,"aria-hidden","true"):(l=o.mdFontIcon||o.mdSvgIcon||r.text())?n.expect(r,"aria-label",l):n.expect(r,"aria-hidden","true")),c&&o.$observe(c,function(e){r.empty(),e&&t(e).then(function(t){r.empty(),r.append(t)})})}}}]),function(){s.$inject=["config","$templateRequest","$q","$log","$mdUtil","$sce"],e.module("material.components.icon").constant("$$mdSvgRegistry",{mdTabsArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4=",mdClose:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xOSA2LjQxbC0xLjQxLTEuNDEtNS41OSA1LjU5LTUuNTktNS41OS0xLjQxIDEuNDEgNS41OSA1LjU5LTUuNTkgNS41OSAxLjQxIDEuNDEgNS41OS01LjU5IDUuNTkgNS41OSAxLjQxLTEuNDEtNS41OS01LjU5eiIvPjwvZz48L3N2Zz4=",mdCancel:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xMiAyYy01LjUzIDAtMTAgNC40Ny0xMCAxMHM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTAtNC40Ny0xMC0xMC0xMHptNSAxMy41OWwtMS40MSAxLjQxLTMuNTktMy41OS0zLjU5IDMuNTktMS40MS0xLjQxIDMuNTktMy41OS0zLjU5LTMuNTkgMS40MS0xLjQxIDMuNTkgMy41OSAzLjU5LTMuNTkgMS40MSAxLjQxLTMuNTkgMy41OSAzLjU5IDMuNTl6Ii8+PC9nPjwvc3ZnPg==",mdMenu:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0zLDZIMjFWOEgzVjZNMywxMUgyMVYxM0gzVjExTTMsMTZIMjFWMThIM1YxNloiIC8+PC9zdmc+",mdToggleArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGQ9Ik0yNCAxNmwtMTIgMTIgMi44MyAyLjgzIDkuMTctOS4xNyA5LjE3IDkuMTcgMi44My0yLjgzeiIvPjxwYXRoIGQ9Ik0wIDBoNDh2NDhoLTQ4eiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==",mdCalendar:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgM2gtMVYxaC0ydjJIOFYxSDZ2Mkg1Yy0xLjExIDAtMS45OS45LTEuOTkgMkwzIDE5YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bTAgMTZINVY4aDE0djExek03IDEwaDV2NUg3eiIvPjwvc3ZnPg==",mdChecked:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz48L2c+PC9zdmc+"}).provider("$mdIcon",r);var i={defaultViewBoxSize:24,defaultFontSet:"material-icons",fontSets:[]};function r(){}function o(t,e){this.url=t,this.viewBoxSize=e||i.defaultViewBoxSize}function s(i,r,o,s,a,l){var c={},u={},h=/[-\w@:%+.~#?&\/\/=]{2,}\.[a-z]{2,4}\b(\/[-\w@:%+.~#?&\/\/=]*)?/i,d=/^data:image\/svg\+xml[\s*;\w\-=]*?(base64)?,(.*)$/i;return _.prototype={clone:function(){return this.element.cloneNode(!0)},prepare:function(){var t=this.config?this.config.viewBoxSize:i.defaultViewBoxSize;e.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+t+" "+t,focusable:!1},function(t,e){this.element.setAttribute(e,t)},this)}},f.fontSet=function(t){if(e.isUndefined(t)||!t||!t.length)return i.defaultFontSet;var n=t;return e.forEach(i.fontSets,function(e){e.alias===t&&(n=e.fontSet||n)}),n},f;function f(t){return t=t||"",e.isString(t)||(t=l.getTrustedUrl(t)),c[t]?o.when(p(c[t])):h.test(t)||d.test(t)?b(t).then(g(t)):(-1===t.indexOf(":")&&(t="$default:"+t),(i[t]?v:y)(t).then(g(t)))}function p(t){var i,r,o,s,l=t.clone(),c=a.nextUid(),u=["clip-path","color-profile","cursor","fill","filter","href","marker-start","marker-mid","marker-end","mask","stroke","style","vector-effect"],h=l.innerHTML===n;if(!isFinite(Number(c)))throw new Error("Unsafe and unexpected non-number result from $mdUtil.nextUid().");return i="_cache"+c,l.id&&(l.id+=i),e.forEach(l.querySelectorAll("[id]"),function(t){for(r="",o=0;o<u.length;o++)r+="["+u[o]+'="url(#'+t.id+')"]',o+1<u.length&&(r+=", ");e.forEach(l.querySelectorAll(r),function(e){m(t,e,h,c)}),e.forEach(l.querySelectorAll("style"),function(e){m(t,e,h,c)}),e.forEach(l.querySelectorAll("[*|href]:not([href])"),function(e){(s=e.getAttribute("xlink:href"))&&(s=s.replace("#"+t.id,"#"+t.id+i),e.setAttribute("xlink:href",s))}),t.id+=i}),l}function m(t,n,i,r){var o,s;if(!isFinite(Number(r)))throw new Error("Unsafe and unexpected non-number result for newUid.");s="_cache"+r,i?(o=(o=a.getOuterHTML(n)).replace("url(#"+t.id+")","url(#"+t.id+s+")"),n.textContent=e.element(o)[0].innerHTML):n.outerHTML=n.outerHTML.replace("url(#"+t.id+")","url(#"+t.id+s+")")}function g(t){return function(n){var r;return c[t]=(r=n,e.isDefined(r.element)&&e.isDefined(r.config)?n:new _(n,i[t])),p(c[t])}}function v(t){var e=i[t];return b(e.url).then(function(t){return new _(t,e)})}function y(t){var e=t.substring(0,t.lastIndexOf(":"))||"$default",n=i[e];return n?b(n.url).then(function(e){var i=t.slice(t.lastIndexOf(":")+1),o=e.querySelector("#"+i);return o?new _(o,n):r(t)}):r(t);function r(t){var e="icon "+t+" not found";return s.warn(e),o.reject(e||t)}}function b(n){return d.test(n)?function(n){var i=d.exec(n),r=/base64/i.test(n)?t.atob(i[2]):i[2];return o.when(e.element(r)[0])}(n):function(t){return o(function(n,i){r(t,!0).then(function(i){u[t]||(u[t]=e.element("<div>").append(i)[0].querySelector("svg")),n(u[t])},function(t){var n=e.isString(t)?t:t.message||t.data||t.statusText;s.warn(n),i(t)})})}(n)}function _(t,n){if(t&&"symbol"===t.tagName.toLowerCase()){var i=t.getAttribute("viewBox");t=t.innerHTML?e.element('<svg xmlns="http://www.w3.org/2000/svg">').html(t.innerHTML)[0]:e.element('<svg xmlns="http://www.w3.org/2000/svg">').append(a.getInnerHTML(t))[0],i&&t.setAttribute("viewBox",i)}t&&"svg"!==t.tagName.toLowerCase()&&(t=e.element('<svg xmlns="http://www.w3.org/2000/svg">').append(t.cloneNode(!0))[0]),t.getAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=t,this.config=n,this.prepare()}}r.prototype={icon:function(t,e,n){return-1==t.indexOf(":")&&(t="$default:"+t),i[t]=new o(e,n),this},iconSet:function(t,e,n){return i[t]=new o(e,n),this},defaultIconSet:function(t,e){return i.$default||(i.$default=new o(t,e)),i.$default.viewBoxSize=e||i.defaultViewBoxSize,this},defaultViewBoxSize:function(t){return i.defaultViewBoxSize=t,this},fontSet:function(t,e){return i.fontSets.push({alias:t,fontSet:e||t}),this},defaultFontSet:function(t){return i.defaultFontSet=t||"",this},defaultIconSize:function(t){return i.defaultIconSize=t,this},$get:["$templateRequest","$q","$log","$mdUtil","$sce",function(t,e,n,r,o){return s(i,t,e,n,r,o)}]}}(),function(){r.$inject=["$mdTheming","$parse","$$rAF"],o.$inject=["$mdUtil","$window","$mdAria","$timeout","$mdGesture"],s.$inject=["$animate","$mdUtil"],a.$inject=["$compile"],f.$inject=["$mdUtil"],l.$inject=["$document","$timeout"],p.$inject=["$$AnimateRunner","$animateCss","$mdUtil"],m.$inject=["$$AnimateRunner","$animateCss","$mdUtil"],g.$inject=["$$AnimateRunner","$animateCss","$mdUtil","$log"];var i=e.module("material.components.input",["material.core"]).directive("mdInputContainer",r).directive("label",function(){return{restrict:"E",require:"^?mdInputContainer",link:function(t,e,n,i){!i||n.mdNoFloat||e.hasClass("md-container-ignore")||(i.label=e,t.$on("$destroy",function(){i.label=null}))}}}).directive("input",o).directive("textarea",o).directive("mdMaxlength",s).directive("placeholder",a).directive("ngMessages",function(){return{restrict:"EA",link:function(e,n,i,r){if(!r)return;n.toggleClass("md-input-messages-animation",!0),n.toggleClass("md-auto-hide",!0),("false"==i.mdAutoHide||t(i))&&n.toggleClass("md-auto-hide",!1)},require:"^^?mdInputContainer"};function t(t){return d.some(function(e){return t[e]})}}).directive("ngMessage",f).directive("ngMessageExp",f).directive("mdSelectOnFocus",l).animation(".md-input-invalid",p).animation(".md-input-messages-animation",m).animation(".md-input-message-animation",g);function r(t,e,n){s.$inject=["$scope","$element","$attrs","$animate"];var i=["INPUT","TEXTAREA","SELECT","MD-SELECT"],r=i.reduce(function(t,e){return t.concat(["md-icon ~ "+e,".md-icon ~ "+e])},[]).join(","),o=i.reduce(function(t,e){return t.concat([e+" ~ md-icon",e+" ~ .md-icon"])},[]).join(",");return{restrict:"E",compile:function(e){var i=e[0].querySelector(r),s=e[0].querySelector(o);return function(e,r){t(r),(i||s)&&n(function(){var t=r[0].querySelector("md-icon")||r[0].querySelector(".md-icon");i&&t&&r.addClass("md-icon-left"),s&&t&&r.addClass("md-icon-right")})}},controller:s};function s(t,n,i,r){var o=this;o.isErrorGetter=i.mdIsError&&e(i.mdIsError),o.delegateClick=function(){o.input.focus()},o.element=n,o.setFocused=function(t){n.toggleClass("md-input-focused",!!t)},o.setHasValue=function(t){n.toggleClass("md-input-has-value",!!t)},o.setHasPlaceholder=function(t){n.toggleClass("md-input-has-placeholder",!!t)},o.setInvalid=function(t){t?r.addClass(n,"md-input-invalid"):r.removeClass(n,"md-input-invalid")},t.$watch(function(){return o.label&&o.input},function(t){t&&!o.label.attr("for")&&o.label.attr("for",o.input.attr("id"))})}}function o(t,n,i,r,o){return{restrict:"E",require:["^?mdInputContainer","?ngModel","?^form"],link:function(s,a,l,c){var u=c[0],h=!!c[1],d=c[1]||t.fakeNgModel(),f=c[2],p=e.isDefined(l.readonly),m=t.parseAttributeBoolean(l.mdNoAsterisk),g=a[0].tagName.toLowerCase();if(!u)return;if("hidden"===l.type)return void a.attr("aria-hidden","true");if(u.input){if(u.input[0].contains(a[0]))return;throw new Error("<md-input-container> can only have *one* <input>, <textarea> or <md-select> child element!")}u.input=a,u.label&&l.$observe("required",function(t){u.label.toggleClass("md-required",t&&!m)});var v=e.element('<div class="md-errors-spacer">');a.after(v);var y=e.isString(l.placeholder)?l.placeholder.trim():"";u.label||y.length||i.expect(a,"aria-label");a.addClass("md-input"),a.attr("id")||a.attr("id","input_"+t.nextUid());"input"===g&&"number"===l.type&&l.min&&l.max&&!l.step?a.attr("step","any"):"textarea"===g&&function(){var i=!l.hasOwnProperty("mdNoAutogrow");if(function(){if(l.hasOwnProperty("mdNoResize"))return;var t=e.element('<div class="md-resize-handle"></div>'),n=!1,i=0,r=u.element,c=o.register(t,"drag",{horizontal:!1});function h(t){t.preventDefault(),n=!0,t.clientY,i=parseFloat(a.css("height"))||a.prop("offsetHeight")}function d(t){n&&(t.preventDefault(),b(),r.addClass("md-input-resized"))}function f(t){n&&a.css("height",i+t.pointer.distanceY+"px")}function p(t){n&&(n=!1,r.removeClass("md-input-resized"))}a.wrap('<div class="md-resize-wrapper">').after(t),t.on("mousedown",h),r.on("$md.dragstart",d).on("$md.drag",f).on("$md.dragend",p),s.$on("$destroy",function(){t.off("mousedown",h).remove(),r.off("$md.dragstart",d).off("$md.drag",f).off("$md.dragend",p),c(),t=null,r=null,c=null})}(),!i)return;var c=l.hasOwnProperty("rows")?parseInt(l.rows):NaN,f=l.hasOwnProperty("maxRows")?parseInt(l.maxRows):NaN,p=s.$on("md-resize-textarea",v),m=null,g=a[0];r(function(){t.nextTick(v)},10,!1),a.on("input",v),h&&d.$formatters.push(y);c||a.attr("rows",1);function v(){a.attr("rows",1).css("height","auto").addClass("md-no-flex");var t,e,n=(t=g.offsetHeight,e=g.scrollHeight-t,t+Math.max(e,0));if(!m){var i=a[0].style.padding||"";m=a.css("padding",0).prop("offsetHeight"),a[0].style.padding=i}if(c&&m&&(n=Math.max(n,m*c)),f&&m){var r=m*f;r<n?(a.attr("md-no-autogrow",""),n=r):a.removeAttr("md-no-autogrow")}m&&a.attr("rows",Math.round(n/m)),a.css("height",n+"px").removeClass("md-no-flex")}function y(e){return t.nextTick(v),e}function b(){if(i&&(i=!1,e.element(n).off("resize",v),p&&p(),a.attr("md-no-autogrow","").off("input",v),h)){var t=d.$formatters.indexOf(y);t>-1&&d.$formatters.splice(t,1)}}if(e.element(n).on("resize",v),s.$on("$destroy",b),l.hasOwnProperty("mdDetectHidden")){var _=(w=!1,function(){var t=0===g.offsetHeight;!1===t&&!0===w&&v(),w=t});s.$watch(function(){return t.nextTick(_,!1),!0})}var w}();h||w();var b=u.isErrorGetter||function(){return d.$invalid&&(d.$touched||f&&f.$submitted)};s.$watch(b,u.setInvalid),l.ngValue&&l.$observe("value",w);d.$parsers.push(_),d.$formatters.push(_),a.on("input",w),p||a.on("focus",function(e){t.nextTick(function(){u.setFocused(!0)})}).on("blur",function(e){t.nextTick(function(){u.setFocused(!1),w()})});function _(t){return u.setHasValue(!d.$isEmpty(t)),t}function w(){u.setHasValue(a.val().length>0||(a[0].validity||{}).badInput)}s.$on("$destroy",function(){u.setFocused(!1),u.setHasValue(!1),u.input=null})}}}function s(t,i){return{restrict:"A",require:["ngModel","^mdInputContainer"],link:function(r,o,s,a){var l=parseInt(s.mdMaxlength);isNaN(l)&&(l=-1);var c,u,h=a[0],d=a[1],f=!e.isDefined(s.ngTrim)||i.parseAttributeBoolean(s.ngTrim),p="password"===s.type;function m(t){return(t=f&&!p&&e.isString(t)?t.trim():t)!==n&&null!==t||(t=""),String(t).length}function g(){c&&c.parent()&&c.text(m(o.val())+" / "+l)}r.$watch(s.mdMaxlength,function(t){l=t}),h.$validators["md-maxlength"]=function(t,i){if(!e.isNumber(l)||l<0)return!0;g();var r=o.val()||i;return r!==n&&null!==r||(r=""),r=f&&!p&&e.isString(r)?r.trim():r,String(r).length<=l},h.$isEmpty=function(t){return 0===m(t)},i.nextTick(function(){u=e.element(d.element[0].querySelector(".md-errors-spacer")),c=e.element('<div class="md-char-counter">'),u.append(c),s.$observe("ngTrim",function(t){f=!e.isDefined(t)||i.parseAttributeBoolean(t)}),r.$watch(s.mdMaxlength,function(n){e.isNumber(n)&&n>0?(c.parent().length||t.enter(c,u),g()):t.leave(c)})})}}}function a(t){return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:{pre:function(n,i,r,o){if(!o)return;var s=o.element.find("label"),a=o.element.attr("md-no-float");if(s&&s.length||""===a||n.$eval(a))return void o.setHasPlaceholder(!0);if("MD-SELECT"!==i[0].nodeName){var l=e.element('<label ng-click="delegateClick()" tabindex="-1" aria-hidden="true">'+r.placeholder+"</label>");r.$set("placeholder",null),o.element.addClass("md-icon-float").prepend(l),t(l)(n)}}}}}function l(t,e){return{restrict:"A",link:function(n,i,r){if("INPUT"!==i[0].nodeName&&"TEXTAREA"!==i[0].nodeName)return;var o=!1;function s(){o=!0,e(function(){t[0].activeElement===i[0]&&i[0].select(),o=!1},1,!1)}function a(t){o&&t.preventDefault()}i.on("focus",s).on("mouseup",a),n.$on("$destroy",function(){i.off("focus",s).off("mouseup",a)})}}}t._mdMocksIncluded&&i.service("$$mdInput",function(){return{messages:{getElement:w}}}).service("mdInputInvalidAnimation",p).service("mdInputMessagesAnimation",m).service("mdInputMessageAnimation",g);var c,u,h,d=["ngIf","ngShow","ngHide","ngSwitchWhen","ngSwitchDefault"];function f(t){return{restrict:"EA",compile:function(e){if(n(e))i(e);else if(function(){var t=e[0];for(;t=t.parentNode;)if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return!0;return!1}())return function(t,r){n(r)&&i(e)};function n(e){return!!t.getClosest(e,"md-input-container")}function i(t){t.toggleClass("md-input-message-animation",!0)}},priority:100}}function p(t,e,n){return S(t,e,n),{addClass:function(t,e,n){v(t,n)}}}function m(t,e,n){return S(t,e,n),{enter:function(t,e){v(t,e)},leave:function(t,e){y(t,e)},addClass:function(t,e,n){"ng-hide"==e?y(t,n):n()},removeClass:function(t,e,n){"ng-hide"==e?v(t,n):n()}}}function g(t,e,n,i){return S(t,e,n),{enter:function(t,e){b(t).start().done(e)},leave:function(t,e){_(t).start().done(e)}}}function v(t,n){var i,r=[],o=w(t),s=o.children();0!=o.length&&0!=s.length?(e.forEach(s,function(t){i=b(e.element(t)),r.push(i.start())}),c.all(r,n)):n()}function y(t,n){var i,r=[],o=w(t),s=o.children();0!=o.length&&0!=s.length?(e.forEach(s,function(t){i=_(e.element(t)),r.push(i.start())}),c.all(r,n)):n()}function b(e){var n=parseInt(t.getComputedStyle(e[0]).height),i=parseInt(t.getComputedStyle(e[0]).marginTop),r=w(e),o=function(t){return t.controller("mdInputContainer").element}(e);return i>-n||r.hasClass("md-auto-hide")&&!o.hasClass("md-input-invalid")?u(e,{}):u(e,{event:"enter",structural:!0,from:{opacity:0,"margin-top":-n+"px"},to:{opacity:1,"margin-top":"0"},duration:.3})}function _(e){var n=e[0].offsetHeight,i=t.getComputedStyle(e[0]);return 0===parseInt(i.opacity)?u(e,{}):u(e,{event:"leave",structural:!0,from:{opacity:1,"margin-top":0},to:{opacity:0,"margin-top":-n+"px"},duration:.3})}function w(t){return t.hasClass("md-input-messages-animation")?t:t.hasClass("md-input-message-animation")?e.element(h.getClosest(t,function(t){return t.classList.contains("md-input-messages-animation")})):e.element(t[0].querySelector(".md-input-messages-animation"))}function S(t,e,n){c=t,u=e,h=n}}(),function(){function t(t){return{restrict:"E",compile:function(e){return e[0].setAttribute("role","list"),t}}}function n(t,n,i,r){var o=["md-checkbox","md-switch","md-menu"];return{restrict:"E",controller:"MdListController",compile:function(s,a){var l,c,u,h=s[0].querySelectorAll(".md-secondary"),d=s;if(s[0].setAttribute("role","listitem"),a.ngClick||a.ngDblclick||a.ngHref||a.href||a.uiSref||a.ngAttrUiSref)m("button");else if(!s.hasClass("md-no-proxy")){for(var f,p=0;f=o[p];++p)if(c=s[0].querySelector(f)){l=!0;break}l?m("div"):s.addClass("md-no-proxy")}function m(n){if("div"==n)(d=e.element('<div class="md-no-style md-list-item-inner">')).append(s.contents()),s.addClass("md-proxy-focus");else{d=e.element('<div class="md-button md-no-style">   <div class="md-list-item-inner"></div></div>');var i=e.element('<md-button class="md-no-style"></md-button>');g(s[0],i[0]),i.attr("aria-label")||i.attr("aria-label",t.getText(s)),s.hasClass("md-no-focus")&&i.addClass("md-no-focus"),d.prepend(i),d.children().eq(1).append(s.contents()),s.addClass("_md-button-wrap")}s[0].setAttribute("tabindex","-1"),s.append(d)}function g(t,n,r){var o=i.prefixer(["ng-if","ng-click","ng-dblclick","aria-label","ng-disabled","ui-sref","href","ng-href","rel","target","ng-attr-ui-sref","ui-sref-opts","download"]);r&&(o=o.concat(i.prefixer(r))),e.forEach(o,function(e){t.hasAttribute(e)&&(n.setAttribute(e,t.getAttribute(e)),t.removeAttribute(e))})}function v(t){for(var e=t.attributes,n=0;n<e.length;n++)if("ngClick"===a.$normalize(e[n].name))return!0;return!1}return u=e.element('<div class="md-secondary-container">'),e.forEach(h,function(n){!function(n,i){if(n&&("MD-BUTTON"!=(l=n.nodeName.toUpperCase())&&"BUTTON"!=l)&&n.hasAttribute("ng-click")){t.expect(n,"aria-label");var r=e.element('<md-button class="md-secondary md-icon-button">');g(n,r[0],["ng-if","ng-hide","ng-show"]),n.setAttribute("tabindex","-1"),r.append(n),n=r[0]}var l;n&&(!v(n)||!a.ngClick&&function(t){return-1!=o.indexOf(t.nodeName.toLowerCase())}(n))&&e.element(n).removeClass("md-secondary"),s.addClass("md-with-secondary"),i.append(n)}(n,u)}),d.append(u),function(){for(var t,e,n=["md-switch","md-checkbox"],i=0;e=n[i];++i)if((t=s.find(e)[0])&&!t.hasAttribute("aria-label")){var r=s.find("p")[0];if(!r)return;t.setAttribute("aria-label","Toggle "+r.textContent)}}(),l&&"MD-MENU"===c.nodeName&&function(){var t=e.element(c),n=t.parent().hasClass("md-secondary-container")||c.parentNode.firstElementChild!==c,i="left";n&&(i="right");t.attr("md-position-mode")||t.attr("md-position-mode",i+" target");var r=t.children().eq(0);v(r[0])||r.attr("ng-click","$mdMenu.open($event)");r.attr("aria-label")||r.attr("aria-label","Open List Menu")}(),function(t,s,a,l){s.addClass("_md");var c=[],u=s[0].firstElementChild,h=s.hasClass("_md-button-wrap")?u.firstElementChild:u,d=h&&v(h),f=s.hasClass("md-no-proxy");void(u&&u.children&&!d&&!f&&e.forEach(o,function(t){e.forEach(u.querySelectorAll(t+":not(.md-secondary)"),function(t){c.push(t)})})),void((1==c.length||d)&&(s.addClass("md-clickable"),d||l.attachRipple(t,e.element(s[0].querySelector(".md-no-style"))))),c.length&&e.forEach(c,function(n){n=e.element(n),t.mouseActive=!1,n.on("mousedown",function(){t.mouseActive=!0,r(function(){t.mouseActive=!1},100)}).on("focus",function(){!1===t.mouseActive&&s.addClass("md-focused"),n.on("blur",function t(){s.removeClass("md-focused"),n.off("blur",t)})})});var p=function(t){"INPUT"==t.target.nodeName||"TEXTAREA"==t.target.nodeName||t.target.isContentEditable||(t.which||t.keyCode)==n.KEY_CODE.SPACE&&h&&(h.click(),t.preventDefault(),t.stopPropagation())};d||c.length||h&&h.addEventListener("keypress",p);s.off("click"),s.off("keypress"),1==c.length&&h&&s.children().eq(0).on("click",function(t){(function(t){var e=["md-slider"];if(!t.path)return-1!==e.indexOf(t.target.tagName.toLowerCase());for(var n=t.path.indexOf(s.children()[0]),i=0;i<n;i++)if(-1!==e.indexOf(t.path[i].tagName.toLowerCase()))return!0})(t)||!i.getClosest(t.target,"BUTTON")&&h.contains(t.target)&&e.forEach(c,function(n){t.target===n||n.contains(t.target)||("MD-MENU"===n.nodeName&&(n=n.children[0]),e.element(n).triggerHandler("click"))})});t.$on("$destroy",function(){h&&h.removeEventListener("keypress",p)})}}}}function i(t,e,n){this.attachRipple=function(t,e){n.attach(t,e,{})}}i.$inject=["$scope","$element","$mdListInkRipple"],t.$inject=["$mdTheming"],n.$inject=["$mdAria","$mdConstant","$mdUtil","$timeout"],e.module("material.components.list",["material.core"]).controller("MdListController",i).directive("mdList",t).directive("mdListItem",n)}(),e.module("material.components.menu",["material.core","material.components.backdrop"]),function(){function t(t,i,r,o,s,a,l,c,u){var h,d,f=s.prefixer(),p=this;this.nestLevel=parseInt(i.mdNestLevel,10)||0,this.init=function(n,i){i=i||{},h=n,(d=r[0].querySelector(f.buildSelector(["ng-click","ng-mouseenter"]))).setAttribute("aria-expanded","false"),this.isInMenuBar=i.isInMenuBar,this.nestedMenus=s.nodesToArray(h[0].querySelectorAll(".md-nested-menu")),h.on("$mdInterimElementRemove",function(){p.isOpen=!1,s.nextTick(function(){p.onIsOpenChanged(p.isOpen)})}),s.nextTick(function(){p.onIsOpenChanged(p.isOpen)});var a="menu_container_"+s.nextUid();h.attr("id",a),e.element(d).attr({"aria-owns":a,"aria-haspopup":"true"}),o.$on("$destroy",e.bind(this,function(){this.disableHoverListener(),t.destroy()})),h.on("$destroy",function(){t.destroy()})};var m,g,v=[];this.enableHoverListener=function(){v.push(l.$on("$mdMenuOpen",function(t,e){h[0].contains(e[0])&&(p.currentlyOpenMenu=e.controller("mdMenu"),p.isAlreadyOpening=!1,p.currentlyOpenMenu.registerContainerProxy(p.triggerContainerProxy.bind(p)))})),v.push(l.$on("$mdMenuClose",function(t,e){h[0].contains(e[0])&&(p.currentlyOpenMenu=n)})),(g=e.element(s.nodesToArray(h[0].children[0].children))).on("mouseenter",p.handleMenuItemHover),g.on("mouseleave",p.handleMenuItemMouseLeave)},this.disableHoverListener=function(){for(;v.length;)v.shift()();g&&g.off("mouseenter",p.handleMenuItemHover),g&&g.off("mouseleave",p.handleMenuItemMouseLeave)},this.handleMenuItemHover=function(t){if(!p.isAlreadyOpening){var n=t.target.querySelector("md-menu")||s.getClosest(t.target,"MD-MENU");m=a(function(){if(n&&(n=e.element(n).controller("mdMenu")),p.currentlyOpenMenu&&p.currentlyOpenMenu!=n){var t=p.nestLevel+1;p.currentlyOpenMenu.close(!0,{closeTo:t}),p.isAlreadyOpening=!!n,n&&n.open()}else n&&!n.isOpen&&n.open&&(p.isAlreadyOpening=!!n,n&&n.open())},n?100:250);var i=t.currentTarget.querySelector(".md-button:not([disabled])");i&&i.focus()}},this.handleMenuItemMouseLeave=function(){m&&(a.cancel(m),m=n)},this.open=function(e){e&&e.stopPropagation(),e&&e.preventDefault(),p.isOpen||(p.enableHoverListener(),p.isOpen=!0,s.nextTick(function(){p.onIsOpenChanged(p.isOpen)}),(d=d||(e?e.target:r[0])).setAttribute("aria-expanded","true"),o.$emit("$mdMenuOpen",r),t.show({scope:o,mdMenuCtrl:p,nestLevel:p.nestLevel,element:h,target:d,preserveElement:!0,parent:"body"}).finally(function(){d.setAttribute("aria-expanded","false"),p.disableHoverListener()}))},this.onIsOpenChanged=function(t){t?(h.attr("aria-hidden","false"),r[0].classList.add("md-open"),e.forEach(p.nestedMenus,function(t){t.classList.remove("md-open")})):(h.attr("aria-hidden","true"),r[0].classList.remove("md-open")),o.$mdMenuIsOpen=p.isOpen},this.focusMenuContainer=function(){var t=h[0].querySelector(f.buildSelector(["md-menu-focus-target","md-autofocus"]));t||(t=h[0].querySelector(".md-button:not([disabled])")),t.focus()},this.registerContainerProxy=function(t){this.containerProxy=t},this.triggerContainerProxy=function(t){this.containerProxy&&this.containerProxy(t)},this.destroy=function(){return p.isOpen?t.destroy():c.when(!1)},this.close=function(n,i){if(p.isOpen){p.isOpen=!1,s.nextTick(function(){p.onIsOpenChanged(p.isOpen)});var a=e.extend({},i,{skipFocus:n});if(o.$emit("$mdMenuClose",r,a),t.hide(null,i),!n){var l=p.restoreFocusTo||r.find("button")[0];l instanceof e.element&&(l=l[0]),l&&l.focus()}}},this.positionMode=function(){var t=(i.mdPositionMode||"target").split(" ");return 1===t.length&&t.push(t[0]),{left:t[0],top:t[1]}},this.offsets=function(){var t=(i.mdOffset||"0 0").split(" ").map(parseFloat);if(2===t.length)return{left:t[0],top:t[1]};if(1===t.length)return{top:t[0],left:t[0]};throw Error("Invalid offsets specified. Please follow format <x, y> or <n>")},o.$mdMenu={open:this.open,close:this.close},o.$mdOpenMenu=e.bind(this,function(){return u.warn("mdMenu: The $mdOpenMenu method is deprecated. Please use `$mdMenu.open`."),this.open.apply(this,arguments)})}t.$inject=["$mdMenu","$attrs","$element","$scope","$mdUtil","$timeout","$rootScope","$q","$log"],e.module("material.components.menu").controller("mdMenuCtrl",t)}(),function(){function t(t){var n="Invalid HTML for md-menu: ";return{restrict:"E",require:["mdMenu","?^mdMenuBar"],controller:"mdMenuCtrl",scope:!0,compile:function(r){r.addClass("md-menu");var o=r.children()[0],s=t.prefixer();s.hasAttribute(o,"ng-click")||(o=o.querySelector(s.buildSelector(["ng-click","ng-mouseenter"]))||o);var a="MD-BUTTON"===o.nodeName||"BUTTON"===o.nodeName;o&&a&&!o.hasAttribute("type")&&o.setAttribute("type","button");if(!o)throw Error(n+"Expected the menu to have a trigger element.");if(2!==r.children().length)throw Error(n+"Expected two children elements. The second element must have a `md-menu-content` element.");o&&o.setAttribute("aria-haspopup","true");var l=r[0].querySelectorAll("md-menu"),c=parseInt(r[0].getAttribute("md-nest-level"),10)||0;l&&e.forEach(t.nodesToArray(l),function(t){t.hasAttribute("md-position-mode")||t.setAttribute("md-position-mode","cascade"),t.classList.add("_md-nested-menu"),t.setAttribute("md-nest-level",c+1)});return i}};function i(t,n,i,r){var o=r[0],s=!!r[1],a=e.element('<div class="_md md-open-menu-container md-whiteframe-z2"></div>'),l=n.children()[1];n.addClass("_md"),l.hasAttribute("role")||l.setAttribute("role","menu"),a.append(l),n.on("$destroy",function(){a.remove()}),n.append(a),a[0].style.display="none",o.init(a,{isInMenuBar:s})}}t.$inject=["$mdUtil"],e.module("material.components.menu").directive("mdMenu",t)}(),function(){function t(t){r.$inject=["$mdUtil","$mdTheming","$mdConstant","$document","$window","$q","$$rAF","$animateCss","$animate","$log"];var i=8;return t("$mdMenu").setDefaults({methods:["target"],options:r});function r(t,r,s,a,l,c,u,h,d,f){var p=t.prefixer(),m=t.dom.animator;return{parent:"body",onShow:function(n,i,o){(function(){if(!o.target)throw Error("$mdMenu.show() expected a target to animate from in options.target");e.extend(o,{alreadyOpen:!1,isRemoved:!1,target:e.element(o.target),parent:e.element(o.parent),menuContentEl:e.element(i[0].querySelector("md-menu-content"))})})(),o.menuContentEl[0]?r.inherit(o.menuContentEl,o.target):f.warn("$mdMenu: Menu elements should always contain a `md-menu-content` element,otherwise interactivity features will not work properly.",i);return o.cleanupResizing=function(){var t=(e=i,n=o,u.throttle(function(){if(!o.isRemoved){var t=b(e,n);e.css(m.toCss(t))}}));var e,n;return l.addEventListener("resize",t),l.addEventListener("orientationchange",t),function(){l.removeEventListener("resize",t),l.removeEventListener("orientationchange",t)}}(),o.hideBackdrop=g(n,i,o),function(){return o.parent.append(i),i[0].style.display="",c(function(t){var e=b(i,o);i.removeClass("md-leave"),h(i,{addClass:"md-active",from:m.toCss(e),to:m.toCss({transform:""})}).start().then(t)})}().then(function(r){return o.alreadyOpen=!0,o.cleanupInteraction=function(){if(!o.menuContentEl[0])return e.noop;o.menuContentEl.on("keydown",c),o.menuContentEl[0].addEventListener("click",u,!0);var i=o.menuContentEl[0].querySelector(p.buildSelector(["md-menu-focus-target","md-autofocus"]));if(!i)for(var r=o.menuContentEl[0].children.length,a=0;a<r;a++){var l=o.menuContentEl[0].children[a];if(i=l.querySelector(".md-button:not([disabled])"))break;if(l.firstElementChild&&!l.firstElementChild.disabled){i=l.firstElementChild;break}}return i&&i.focus(),function(){o.menuContentEl.off("keydown",c),o.menuContentEl[0].removeEventListener("click",u,!0)};function c(e){var n;switch(e.keyCode){case s.KEY_CODE.ESCAPE:o.mdMenuCtrl.close(!1,{closeAll:!0}),n=!0;break;case s.KEY_CODE.TAB:o.mdMenuCtrl.close(!1,{closeAll:!0}),n=!1;break;case s.KEY_CODE.UP_ARROW:v(e,o.menuContentEl,o,-1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(e),n=!0;break;case s.KEY_CODE.DOWN_ARROW:v(e,o.menuContentEl,o,1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(e),n=!0;break;case s.KEY_CODE.LEFT_ARROW:o.nestLevel?o.mdMenuCtrl.close():o.mdMenuCtrl.triggerContainerProxy(e),n=!0;break;case s.KEY_CODE.RIGHT_ARROW:var i=t.getClosest(e.target,"MD-MENU");i&&i!=o.parent[0]?e.target.click():o.mdMenuCtrl.triggerContainerProxy(e),n=!0}n&&(e.preventDefault(),e.stopImmediatePropagation())}function u(e){var i=e.target;do{if(i==o.menuContentEl[0])return;if((s(i,["ng-click","ng-href","ui-sref"])||"BUTTON"==i.nodeName||"MD-BUTTON"==i.nodeName)&&!s(i,["md-prevent-menu-close"])){var r=t.getClosest(i,"MD-MENU");i.hasAttribute("disabled")||r&&r!=o.parent[0]||n.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})});break}}while(i=i.parentNode);function s(t,e){if(!t)return!1;for(var n,i=0;n=e[i];++i)if(p.hasAttribute(t,n))return!0;return!1}}}(),o.cleanupBackdrop=o.backdrop?(o.backdrop.on("click",a),function(){o.backdrop.off("click",a)}):e.noop,i.addClass("md-clickable"),r});function a(t){t.preventDefault(),t.stopPropagation(),n.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})})}},onRemove:function(t,e,n){return n.cleanupInteraction(),n.cleanupBackdrop(),n.cleanupResizing(),n.hideBackdrop(),e.removeClass("md-clickable"),!0===n.$destroy?i():function(){return h(e,{addClass:"md-leave"}).start()}().then(i);function i(){e.removeClass("md-active"),function(t,e){e.preserveElement?o(t).style.display="none":o(t).parentNode===o(e.parent)&&o(e.parent).removeChild(o(t))}(e,n),n.alreadyOpen=!1}},hasBackdrop:!0,disableParentScroll:!0,skipCompile:!0,preserveScope:!0,multiple:!0,themable:!0};function g(n,i,r){return r.nestLevel?e.noop:(r.disableParentScroll&&!t.getClosest(r.target,"MD-DIALOG")?r.restoreScroll=t.disableScrollAround(r.element,r.parent):r.disableParentScroll=!1,r.hasBackdrop&&(r.backdrop=t.createBackdrop(n,"md-menu-backdrop md-click-catcher"),d.enter(r.backdrop,a[0].body)),function(){r.backdrop&&r.backdrop.remove(),r.disableParentScroll&&r.restoreScroll()})}function v(e,n,i,r){for(var o,s=t.getClosest(e.target,"MD-MENU-ITEM"),a=t.nodesToArray(n[0].children),l=a.indexOf(s)+r;l>=0&&l<a.length;l+=r){if(o=y(a[l].querySelector(".md-button")))break}return o}function y(t){if(t&&-1!=t.getAttribute("tabindex"))return t.focus(),a[0].activeElement==t}function b(e,r){var o,s=e[0],c=e[0].firstElementChild,u=c.getBoundingClientRect(),h=a[0].body.getBoundingClientRect(),d=l.getComputedStyle(c),f=r.target[0].querySelector(p.buildSelector("md-menu-origin"))||r.target[0],m=f.getBoundingClientRect(),g={left:h.left+i,top:Math.max(h.top,0)+i,bottom:Math.max(h.bottom,Math.max(h.top,0)+h.height)-i,right:h.right-i},v={top:0,left:0,right:0,bottom:0},y={top:0,left:0,right:0,bottom:0},b=r.mdMenuCtrl.positionMode();"target"!==b.top&&"target"!==b.left&&"target-right"!==b.left||(o=function(){for(var t=0;t<c.children.length;++t)if("none"!=l.getComputedStyle(c.children[t]).display)return c.children[t]}())&&(v=(o=(o=o.firstElementChild||o).querySelector(p.buildSelector("md-menu-align-target"))||o).getBoundingClientRect(),y={top:parseFloat(s.style.top||0),left:parseFloat(s.style.left||0)});var _={},w="top ";switch(b.top){case"target":_.top=y.top+m.top-v.top;break;case"cascade":_.top=m.top-parseFloat(d.paddingTop)-f.style.top;break;case"bottom":_.top=m.top+m.height;break;default:throw new Error('Invalid target mode "'+b.top+'" specified for md-menu on Y axis.')}var S=t.isRtl(e);switch(b.left){case"target":_.left=y.left+m.left-v.left,w+=S?"right":"left";break;case"target-left":_.left=m.left,w+="left";break;case"target-right":_.left=m.right-u.width+(u.right-v.right),w+="right";break;case"cascade":var x=S?m.left-u.width<g.left:m.right+u.width<g.right;_.left=x?m.right-f.style.left:m.left-f.style.left-u.width,w+=x?"left":"right";break;case"right":S?(_.left=m.right-m.width,w+="left"):(_.left=m.right-u.width,w+="right");break;case"left":S?(_.left=m.right-u.width,w+="right"):(_.left=m.left,w+="left");break;default:throw new Error('Invalid target mode "'+b.left+'" specified for md-menu on X axis.')}var C,k=r.mdMenuCtrl.offsets();_.top+=k.top,_.left+=k.left,(C=_).top=Math.max(Math.min(C.top,g.bottom-s.offsetHeight),g.top),C.left=Math.max(Math.min(C.left,g.right-s.offsetWidth),g.left);var T=Math.round(100*Math.min(m.width/s.offsetWidth,1))/100,M=Math.round(100*Math.min(m.height/s.offsetHeight,1))/100;return{top:Math.round(_.top),left:Math.round(_.left),transform:r.alreadyOpen?n:t.supplant("scale({0},{1})",[T,M]),transformOrigin:w}}}function o(t){return t instanceof e.element&&(t=t[0]),t}}t.$inject=["$$interimElementProvider"],e.module("material.components.menu").provider("$mdMenu",t)}(),e.module("material.components.menuBar",["material.core","material.components.icon","material.components.menu"]),function(){i.$inject=["$scope","$rootScope","$element","$attrs","$mdConstant","$document","$mdUtil","$timeout"],e.module("material.components.menuBar").controller("MenuBarController",i);var t=["handleKeyDown","handleMenuHover","scheduleOpenHoveredMenu","cancelScheduledOpen"];function i(n,i,r,o,s,a,l,c){this.$element=r,this.$attrs=o,this.$mdConstant=s,this.$mdUtil=l,this.$document=a,this.$scope=n,this.$rootScope=i,this.$timeout=c;var u=this;e.forEach(t,function(t){u[t]=e.bind(u,u[t])})}i.prototype.init=function(){var t=this.$element,e=this.$mdUtil,i=this.$scope,r=this,o=[];t.on("keydown",this.handleKeyDown),this.parentToolbar=e.getClosest(t,"MD-TOOLBAR"),o.push(this.$rootScope.$on("$mdMenuOpen",function(e,n){-1!=r.getMenus().indexOf(n[0])&&(t[0].classList.add("md-open"),n[0].classList.add("md-open"),r.currentlyOpenMenu=n.controller("mdMenu"),r.currentlyOpenMenu.registerContainerProxy(r.handleKeyDown),r.enableOpenOnHover())})),o.push(this.$rootScope.$on("$mdMenuClose",function(i,o,s){var a=r.getMenus();if(-1!=a.indexOf(o[0])&&(t[0].classList.remove("md-open"),o[0].classList.remove("md-open")),t[0].contains(o[0])){for(var l=o[0];l&&-1==a.indexOf(l);)l=e.getClosest(l,"MD-MENU",!0);l&&(s.skipFocus||l.querySelector("button:not([disabled])").focus(),r.currentlyOpenMenu=n,r.disableOpenOnHover(),r.setKeyboardMode(!0))}})),i.$on("$destroy",function(){for(r.disableOpenOnHover();o.length;)o.shift()()}),this.setKeyboardMode(!0)},i.prototype.setKeyboardMode=function(t){t?this.$element[0].classList.add("md-keyboard-mode"):this.$element[0].classList.remove("md-keyboard-mode")},i.prototype.enableOpenOnHover=function(){if(!this.openOnHoverEnabled){var t=this;t.openOnHoverEnabled=!0,t.parentToolbar&&(t.parentToolbar.classList.add("md-has-open-menu"),t.$mdUtil.nextTick(function(){e.element(t.parentToolbar).on("click",t.handleParentClick)},!1)),e.element(t.getMenus()).on("mouseenter",t.handleMenuHover)}},i.prototype.handleMenuHover=function(t){this.setKeyboardMode(!1),this.openOnHoverEnabled&&this.scheduleOpenHoveredMenu(t)},i.prototype.disableOpenOnHover=function(){this.openOnHoverEnabled&&(this.openOnHoverEnabled=!1,this.parentToolbar&&(this.parentToolbar.classList.remove("md-has-open-menu"),e.element(this.parentToolbar).off("click",this.handleParentClick)),e.element(this.getMenus()).off("mouseenter",this.handleMenuHover))},i.prototype.scheduleOpenHoveredMenu=function(t){var n=e.element(t.currentTarget).controller("mdMenu");this.setKeyboardMode(!1),this.scheduleOpenMenu(n)},i.prototype.scheduleOpenMenu=function(t){var e=this,i=this.$timeout;t!=e.currentlyOpenMenu&&(i.cancel(e.pendingMenuOpen),e.pendingMenuOpen=i(function(){e.pendingMenuOpen=n,e.currentlyOpenMenu&&e.currentlyOpenMenu.close(!0,{closeAll:!0}),t.open()},200,!1))},i.prototype.handleKeyDown=function(t){var n,i,r,o=this.$mdConstant.KEY_CODE,s=this.currentlyOpenMenu,a=s&&s.isOpen;switch(this.setKeyboardMode(!0),t.keyCode){case o.DOWN_ARROW:s?s.focusMenuContainer():this.openFocusedMenu(),n=!0;break;case o.UP_ARROW:s&&s.close(),n=!0;break;case o.LEFT_ARROW:i=this.focusMenu(-1),a&&(r=e.element(i).controller("mdMenu"),this.scheduleOpenMenu(r)),n=!0;break;case o.RIGHT_ARROW:i=this.focusMenu(1),a&&(r=e.element(i).controller("mdMenu"),this.scheduleOpenMenu(r)),n=!0}n&&(t&&t.preventDefault&&t.preventDefault(),t&&t.stopImmediatePropagation&&t.stopImmediatePropagation())},i.prototype.focusMenu=function(t){var e=this.getMenus(),n=this.getFocusedMenuIndex();-1==n&&(n=this.getOpenMenuIndex());var i=!1;if(-1==n?(n=0,i=!0):(t<0&&n>0||t>0&&n<e.length-t)&&(n+=t,i=!0),i)return e[n].querySelector("button").focus(),e[n]},i.prototype.openFocusedMenu=function(){var t=this.getFocusedMenu();t&&e.element(t).controller("mdMenu").open()},i.prototype.getMenus=function(){var t=this.$element;return this.$mdUtil.nodesToArray(t[0].children).filter(function(t){return"MD-MENU"==t.nodeName})},i.prototype.getFocusedMenu=function(){return this.getMenus()[this.getFocusedMenuIndex()]},i.prototype.getFocusedMenuIndex=function(){var t=this.$mdUtil.getClosest(this.$document[0].activeElement,"MD-MENU");return t?this.getMenus().indexOf(t):-1},i.prototype.getOpenMenuIndex=function(){for(var t=this.getMenus(),e=0;e<t.length;++e)if(t[e].classList.contains("md-open"))return e;return-1},i.prototype.handleParentClick=function(t){var n=this.querySelector("md-menu.md-open");n&&!n.contains(t.target)&&e.element(n).controller("mdMenu").close(!0,{closeAll:!0})}}(),function(){function t(t,n){return{restrict:"E",require:"mdMenuBar",controller:"MenuBarController",compile:function(i,r){return r.ariaRole||i[0].setAttribute("role","menubar"),e.forEach(i[0].children,function(n){if("MD-MENU"==n.nodeName){n.hasAttribute("md-position-mode")||(n.setAttribute("md-position-mode","left bottom"),n.querySelector("button, a, md-button").setAttribute("role","menuitem"));var i=t.nodesToArray(n.querySelectorAll("md-menu-content"));e.forEach(i,function(t){t.classList.add("md-menu-bar-menu"),t.classList.add("md-dense"),t.hasAttribute("width")||t.setAttribute("width",5)})}}),i.find("md-menu-item").addClass("md-in-menu-bar"),function(t,e,i,r){e.addClass("_md"),n(t,e),r.init()}}}}t.$inject=["$mdUtil","$mdTheming"],e.module("material.components.menuBar").directive("mdMenuBar",t)}(),e.module("material.components.menuBar").directive("mdMenuDivider",function(){return{restrict:"E",compile:function(t,e){e.role||t[0].setAttribute("role","separator")}}}),function(){function t(t,e,n){this.$element=e,this.$attrs=n,this.$scope=t}t.$inject=["$scope","$element","$attrs"],e.module("material.components.menuBar").controller("MenuItemController",t),t.prototype.init=function(t){var e=this.$element,n=this.$attrs;this.ngModel=t,"checkbox"!=n.type&&"radio"!=n.type||(this.mode=n.type,this.iconEl=e[0].children[0],this.buttonEl=e[0].children[1],t&&this.initClickListeners())},t.prototype.clearNgAria=function(){var t=this.$element[0];e.forEach(["role","tabindex","aria-invalid","aria-checked"],function(e){t.removeAttribute(e)})},t.prototype.initClickListeners=function(){var t=this,n=this.ngModel,i=this.$scope,r=this.$attrs,o=(this.$element,this.mode);this.handleClick=e.bind(this,this.handleClick);var s=this.iconEl,a=e.element(this.buttonEl),l=this.handleClick;function c(t){t?a.off("click",l):a.on("click",l)}r.$observe("disabled",c),c(r.disabled),n.$render=function(){t.clearNgAria(),!function(){if("radio"==o){var t=r.ngValue?i.$eval(r.ngValue):r.value;return n.$modelValue==t}return n.$modelValue}()?(s.style.display="none",a.attr("aria-checked","false")):(s.style.display="",a.attr("aria-checked","true"))},i.$$postDigest(n.$render)},t.prototype.handleClick=function(t){var e,n=this.mode,i=this.ngModel,r=this.$attrs;"checkbox"==n?e=!i.$modelValue:"radio"==n&&(e=r.ngValue?this.$scope.$eval(r.ngValue):r.value),i.$setViewValue(e),i.$render()}}(),function(){function t(t,n,i){return{controller:"MenuItemController",require:["mdMenuItem","?ngModel"],priority:n.BEFORE_NG_ARIA,compile:function(n,r){var o,s,a=r.type;if("checkbox"!==a&&"radio"!==a||!n.hasClass("md-in-menu-bar"))h("role","menuitem",n[0].querySelector("md-button, button, a"));else{var l=n[0].textContent,c=e.element('<md-button type="button"></md-button>'),u='<md-icon md-svg-src="'+i.mdChecked+'"></md-icon>';c.html(l),c.attr("tabindex","0"),e.isDefined(r.mdPreventMenuClose)&&c.attr("md-prevent-menu-close",r.mdPreventMenuClose),n.html(""),n.append(e.element(u)),n.append(c),n.addClass("md-indent").removeClass("md-in-menu-bar"),h("role","checkbox"===a?"menuitemcheckbox":"menuitemradio",c),o="ng-disabled",s=t.prefixer(o),e.forEach(s,function(t){if(n[0].hasAttribute(t)){var e=n[0].getAttribute(t);c[0].setAttribute(t,e),n[0].removeAttribute(t)}})}return function(t,e,n,i){var r=i[0],o=i[1];r.init(o)};function h(t,i,r){(r=r||n)instanceof e.element&&(r=r[0]),r.hasAttribute(t)||r.setAttribute(t,i)}}}}t.$inject=["$mdUtil","$mdConstant","$$mdSvgRegistry"],e.module("material.components.menuBar").directive("mdMenuItem",t)}(),function(){function t(t,n){return{restrict:"E",transclude:!0,controller:i,controllerAs:"ctrl",bindToController:!0,scope:{mdSelectedNavItem:"=?",mdNoInkBar:"=?",navBarAriaLabel:"@?"},template:'<div class="md-nav-bar"><nav role="navigation"><ul class="_md-nav-bar-list" ng-transclude role="tablist" ng-focus="ctrl.onFocus()" aria-label="{{ctrl.navBarAriaLabel}}"></ul></nav><md-nav-ink-bar ng-hide="ctrl.mdNoInkBar"></md-nav-ink-bar></div>',link:function(i,r,o,s){n(r),s.navBarAriaLabel||t.expectAsync(r,"aria-label",e.noop)}}}function i(t,e,n,i){this._$timeout=n,this._$scope=e,this._$mdConstant=i,this.mdSelectedNavItem,this.navBarAriaLabel,this._navBarEl=t[0],this._inkbar;var r=this,o=this._$scope.$watch(function(){return r._navBarEl.querySelectorAll("._md-nav-button").length},function(t){t>0&&(r._initTabs(),o())})}function r(t,i,r,s){return{restrict:"E",require:["mdNavItem","^mdNavBar"],controller:o,bindToController:!0,controllerAs:"ctrl",replace:!0,transclude:!0,template:function(t,e){var i,r,o=e.mdNavClick,s=e.mdNavHref,a=e.mdNavSref,l=e.srefOpts;if((o?1:0)+(s?1:0)+(a?1:0)>1)throw Error("Please do not specify more than one of the md-nav-click, md-nav-href, or md-nav-sref attributes per nav-item directive.");if(o!==n&&null!==o)i='ng-click="ctrl.mdNavClick()"';else if(s!==n&&null!==s)i='ng-href="{{ctrl.mdNavHref}}"';else{if(a===n||null===a)throw Error("Please specify at least one of the md-nav-click, md-nav-href, or md-nav-sref attributes per nav-item directive.");i='ui-sref="{{ctrl.mdNavSref}}"'}return i&&(r='<md-button class="_md-nav-button md-accent" ng-class="ctrl.getNgClassMap()" ng-blur="ctrl.setFocused(false)" ng-disabled="ctrl.disabled" tabindex="-1" role="tab" ng-attr-aria-label="{{ctrl.navItemAriaLabel ? ctrl.navItemAriaLabel : undefined}}" aria-selected="{{ctrl.isSelected()}}" '+(l?'ui-sref-opts="{{ctrl.srefOpts}}" ':"")+i+'><span ng-transclude class="_md-nav-button-text"></span></md-button>'),'<li class="md-nav-item" role="presentation">'+(r||"")+"</li>"},scope:{mdNavClick:"&?",mdNavHref:"@?",mdNavSref:"@?",srefOpts:"=?",name:"@",navItemAriaLabel:"@?"},link:function(n,o,a,l){var c,u,h,d;i(function(){if(u=l[0],h=l[1],d=e.element(o[0].querySelector("._md-nav-button")),u.name||(u.name=e.element(o[0].querySelector("._md-nav-button-text")).text().trim()),d.on("keydown",function(t){h.onKeydown(t)}),d.on("focus",function(){h.getFocusedTab()||h.onFocus()}),d.on("click",function(){h.mdSelectedNavItem=u.name,n.$apply()}),u.disabled=r.parseAttributeBoolean(a.disabled,!1),"MutationObserver"in s){var i=o[0],f=new MutationObserver(function(t){r.nextTick(function(){u.disabled=r.parseAttributeBoolean(a[t[0].attributeName],!1)})});f.observe(i,{attributes:!0,attributeFilter:["disabled"]}),c=f.disconnect.bind(f)}else a.$observe("disabled",function(t){u.disabled=r.parseAttributeBoolean(t,!1)});u.navItemAriaLabel||t.expectWithText(d,"aria-label")}),n.$on("destroy",function(){d.off("keydown"),d.off("focus"),d.off("click"),c()})}}}function o(t){this._$element=t,this.mdNavClick,this.mdNavHref,this.mdNavSref,this.srefOpts,this.name,this.navItemAriaLabel,this._selected=!1,this._focused=!1}t.$inject=["$mdAria","$mdTheming"],i.$inject=["$element","$scope","$timeout","$mdConstant"],r.$inject=["$mdAria","$$rAF","$mdUtil","$window"],o.$inject=["$element"],e.module("material.components.navBar",["material.core"]).controller("MdNavBarController",i).directive("mdNavBar",t).controller("MdNavItemController",o).directive("mdNavItem",r),i.prototype._initTabs=function(){this._inkbar=e.element(this._navBarEl.querySelector("md-nav-ink-bar"));var t=this;this._$timeout(function(){t._updateTabs(t.mdSelectedNavItem,n)}),this._$scope.$watch("ctrl.mdSelectedNavItem",function(e,n){t._$timeout(function(){t._updateTabs(e,n)})})},i.prototype._updateTabs=function(t,e){var n=this,i=this._getTabs(),r=t===e;if(i){var o=-1,s=-1,a=this._getTabByName(t),l=this._getTabByName(e);l&&(l.setSelected(!1),o=i.indexOf(l)),a&&(a.setSelected(!0),s=i.indexOf(a)),this._$timeout(function(){n._updateInkBarStyles(a,s,o),a&&l&&!r&&n._moveFocus(l,a)})}},i.prototype._updateInkBarStyles=function(t,e,n){if(this._inkbar.toggleClass("_md-left",e<n).toggleClass("_md-right",e>n),this._inkbar.css({display:e<0?"none":""}),t){var i=t.getButtonEl(),r=i.offsetLeft;this._inkbar.css({left:r+"px",width:i.offsetWidth+"px"})}},i.prototype._getTabs=function(){var t=Array.prototype.slice.call(this._navBarEl.querySelectorAll(".md-nav-item")).map(function(t){return e.element(t).controller("mdNavItem")});return t.indexOf(n)?t:null},i.prototype._getTabByName=function(t){return this._findTab(function(e){return e.getName()===t})},i.prototype._getSelectedTab=function(){return this._findTab(function(t){return t.isSelected()})},i.prototype.getFocusedTab=function(){return this._findTab(function(t){return t.hasFocus()})},i.prototype._findTab=function(t,e){var i=this._getTabs();e!==n&&null!==e||(e=0);for(var r=e;r<i.length;r++)if(t(i[r]))return i[r];return null},i.prototype._findTabReverse=function(t,e){var i=this._getTabs();e!==n&&null!==e||(e=i.length-1);for(var r=e;r>=0;r--)if(t(i[r]))return i[r];return null},i.prototype.onFocus=function(){var t=this._getSelectedTab();t&&t.setFocused(!0)},i.prototype._moveFocus=function(t,e){t.setFocused(!1),e.setFocused(!0)},i.prototype._focusFirstTab=function(){if(this._getTabs()){var t=this._findTab(function(t){return t._isEnabled()});t&&this._moveFocus(this.getFocusedTab(),t)}},i.prototype._focusLastTab=function(){if(this._getTabs()){var t=this._findTabReverse(function(t){return t._isEnabled()});t&&this._moveFocus(this.getFocusedTab(),t)}},i.prototype._focusNextTab=function(t){if(this._getTabs()){var e=this._findTab(function(t){return t._isEnabled()},t+1);e?this._moveFocus(this.getFocusedTab(),e):this._focusFirstTab()}},i.prototype._focusPreviousTab=function(t){if(this._getTabs()){var e=this._findTabReverse(function(t){return t._isEnabled()},t-1);e?this._moveFocus(this.getFocusedTab(),e):this._focusLastTab()}},i.prototype.onKeydown=function(t){var e=this._$mdConstant.KEY_CODE,n=this._getTabs(),i=this.getFocusedTab();if(i&&n){var r=n.indexOf(i);switch(t.keyCode){case e.UP_ARROW:case e.LEFT_ARROW:t.preventDefault(),this._focusPreviousTab(r);break;case e.DOWN_ARROW:case e.RIGHT_ARROW:t.preventDefault(),this._focusNextTab(r);break;case e.SPACE:case e.ENTER:this._$timeout(function(){i.getButtonEl().click()});break;case e.HOME:t.preventDefault(),this._focusFirstTab();break;case e.END:t.preventDefault(),this._focusLastTab()}}},o.prototype.getNgClassMap=function(){return{"md-active":this._selected,"md-primary":this._selected,"md-unselected":!this._selected,"md-focused":this._focused}},o.prototype.getName=function(){return this.name},o.prototype.getButtonEl=function(){return this._$element[0].querySelector("._md-nav-button")},o.prototype.setSelected=function(t){this._selected=t,t?this.getButtonEl().setAttribute("tabindex","0"):this.getButtonEl().setAttribute("tabindex","-1")},o.prototype.isSelected=function(){return this._selected},o.prototype.setFocused=function(t){this._focused=t,t&&this.getButtonEl().focus()},o.prototype.hasFocus=function(){return this._focused},o.prototype._isEnabled=function(){return!this._$element.attr("disabled")}}(),function(){l.$inject=["presets","$rootElement","$rootScope","$injector","$window"],e.module("material.components.panel",["material.core","material.components.backdrop"]).provider("$mdPanel",function(){return{definePreset:o,getAllPresets:s,clearPresets:a,$get:["$rootElement","$rootScope","$injector","$window",function(t,e,n,i){return new l(r,t,e,n,i)}]}});var t=80,i=e.element('<div class="_md-panel-focus-trap" tabindex="0"></div>'),r={};function o(t,e){if(!t||!e)throw new Error("mdPanelProvider: The panel preset definition is malformed. The name and preset object are required.");if(r.hasOwnProperty(t))throw new Error("mdPanelProvider: The panel preset you have requested has already been defined.");delete e.id,delete e.position,delete e.animation,r[t]=e}function s(){return e.copy(r)}function a(){r={}}function l(n,i,r,o,s){this._defaultConfigOptions={bindToController:!0,clickOutsideToClose:!1,disableParentScroll:!1,escapeToClose:!1,focusOnOpen:!0,fullscreen:!1,hasBackdrop:!1,propagateContainerEvents:!1,transformTemplate:e.bind(this,this._wrapTemplate),trapFocus:!1,zIndex:t},this._config={},this._presets=n,this._$rootElement=i,this._$rootScope=r,this._$injector=o,this._$window=s,this._$mdUtil=this._$injector.get("$mdUtil"),this._trackedPanels={},this._groups=Object.create(null),this.animation=h.animation,this.xPosition=u.xPosition,this.yPosition=u.yPosition,this.interceptorTypes=c.interceptorTypes,this.closeReasons=c.closeReasons,this.absPosition=u.absPosition}function c(t,e){this._$q=e.get("$q"),this._$mdCompiler=e.get("$mdCompiler"),this._$mdConstant=e.get("$mdConstant"),this._$mdUtil=e.get("$mdUtil"),this._$mdTheming=e.get("$mdTheming"),this._$rootScope=e.get("$rootScope"),this._$animate=e.get("$animate"),this._$mdPanel=e.get("$mdPanel"),this._$log=e.get("$log"),this._$window=e.get("$window"),this._$$rAF=e.get("$$rAF"),this.id=t.id,this.config=t,this.panelContainer,this.panelEl,this.isAttached=!1,this._removeListeners=[],this._topFocusTrap,this._bottomFocusTrap,this._backdropRef,this._restoreScroll=null,this._interceptors=Object.create(null),this._compilerCleanup=null,this._restoreCache={styles:"",classes:""}}function u(t){this._$window=t.get("$window"),this._isRTL=t.get("$mdUtil").isRtl(),this._$mdConstant=t.get("$mdConstant"),this._absolute=!1,this._relativeToEl,this._top="",this._bottom="",this._left="",this._right="",this._translateX=[],this._translateY=[],this._positions=[],this._actualPosition}function h(t){this._$mdUtil=t.get("$mdUtil"),this._openFrom,this._closeTo,this._animationClass="",this._openDuration,this._closeDuration,this._rawDuration}function d(t){var n=e.isString(t)?document.querySelector(t):t;return e.element(n)}function f(t){return e.isNumber(t)?t+"px":t}l.prototype.create=function(t,n){if("string"==typeof t?t=this._getPresetByName(t):"object"!=typeof t||!e.isUndefined(n)&&n||(n=t,t={}),t=t||{},n=n||{},e.isDefined(n.id)&&this._trackedPanels[n.id]){var i=this._trackedPanels[n.id];return e.extend(i.config,n),i}this._config=e.extend({id:n.id||"panel_"+this._$mdUtil.nextUid(),scope:this._$rootScope.$new(!0),attachTo:this._$rootElement},this._defaultConfigOptions,n,t);var r=new c(this._config,this._$injector);return this._trackedPanels[this._config.id]=r,this._config.groupName&&(e.isString(this._config.groupName)&&(this._config.groupName=[this._config.groupName]),e.forEach(this._config.groupName,function(t){r.addToGroup(t)})),this._config.scope.$on("$destroy",e.bind(r,r.detach)),r},l.prototype.open=function(t,e){var n=this.create(t,e);return n.open().then(function(){return n})},l.prototype._getPresetByName=function(t){if(!this._presets[t])throw new Error("mdPanel: The panel preset configuration that you requested does not exist. Use the $mdPanelProvider to create a preset before requesting one.");return this._presets[t]},l.prototype.newPanelPosition=function(){return new u(this._$injector)},l.prototype.newPanelAnimation=function(){return new h(this._$injector)},l.prototype.newPanelGroup=function(t,e){if(!this._groups[t]){var n={panels:[],openPanels:[],maxOpen:(e=e||{}).maxOpen>0?e.maxOpen:1/0};this._groups[t]=n}return this._groups[t]},l.prototype.setGroupMaxOpen=function(t,e){if(!this._groups[t])throw new Error("mdPanel: Group does not exist yet. Call newPanelGroup().");this._groups[t].maxOpen=e},l.prototype._openCountExceedsMaxOpen=function(t){if(this._groups[t]){var e=this._groups[t];return e.maxOpen>0&&e.openPanels.length>e.maxOpen}return!1},l.prototype._closeFirstOpenedPanel=function(t){this._groups[t].openPanels[0].close()},l.prototype._wrapTemplate=function(t){return'<div class="md-panel-outer-wrapper">  <div class="md-panel _md-panel-offscreen">'+(t||"")+"</div></div>"},l.prototype._wrapContentElement=function(t){var n=e.element('<div class="md-panel-outer-wrapper">');return t.addClass("md-panel _md-panel-offscreen"),n.append(t),n},c.interceptorTypes={CLOSE:"onClose"},c.prototype.open=function(){var t=this;return this._$q(function(n,i){var r=t._done(n,t),o=t._simpleBind(t.show,t);t.attach().then(o).then(function(){t.config.groupName&&e.forEach(t.config.groupName,function(e){t._$mdPanel._openCountExceedsMaxOpen(e)&&t._$mdPanel._closeFirstOpenedPanel(e)})}).then(r).catch(i)})},c.prototype.close=function(t){var n=this;return this._$q(function(i,r){n._callInterceptors(c.interceptorTypes.CLOSE).then(function(){var o=n._done(i,n),s=n._simpleBind(n.detach,n),a=n.config.onCloseSuccess||e.noop;a=e.bind(n,a,n,t),n.hide().then(s).then(o).then(a).catch(r)},r)})},c.prototype.attach=function(){if(this.isAttached&&this.panelEl)return this._$q.when(this);var t=this;return this._$q(function(n,i){var r=t._done(n,t),o=t.config.onDomAdded||e.noop;t._$q.all([t._createBackdrop(),t._createPanel().then(function(e){return t.isAttached=!0,t._addEventListeners(),e}).catch(i)]).then(o).then(r).catch(i)})},c.prototype.detach=function(){if(!this.isAttached)return this._$q.when(this);var t=this,n=t.config.onDomRemoved||e.noop;return this._restoreScroll&&(this._restoreScroll(),this._restoreScroll=null),this._$q(function(e,i){var r=t._done(e,t);t._$q.all([(t._removeEventListeners(),t._topFocusTrap&&t._topFocusTrap.parentNode&&t._topFocusTrap.parentNode.removeChild(t._topFocusTrap),t._bottomFocusTrap&&t._bottomFocusTrap.parentNode&&t._bottomFocusTrap.parentNode.removeChild(t._bottomFocusTrap),t._restoreCache.classes&&(t.panelEl[0].className=t._restoreCache.classes),t.panelEl[0].style.cssText=t._restoreCache.styles||"",t._compilerCleanup(),t.panelContainer.remove(),t.isAttached=!1,t._$q.when(t)),!t._backdropRef||t._backdropRef.detach()]).then(n).then(r).catch(i)})},c.prototype.destroy=function(){var t=this;this.config.groupName&&e.forEach(this.config.groupName,function(e){t.removeFromGroup(e)}),this.config.scope.$destroy(),this.config.locals=null,this.config.onDomAdded=null,this.config.onDomRemoved=null,this.config.onRemoving=null,this.config.onOpenComplete=null,this._interceptors=null},c.prototype.show=function(){if(!this.panelContainer)return this._$q(function(t,e){e("mdPanel: Panel does not exist yet. Call open() or attach().")});if(!this.panelContainer.hasClass("_md-panel-hidden"))return this._$q.when(this);var t=this;return this._$q(function(n,i){var r=t._done(n,t),o=t.config.onOpenComplete||e.noop;t._$q.all([t._backdropRef?t._backdropRef.show():t,(t.panelContainer.removeClass("_md-panel-hidden"),t._animateOpen()).then(function(){t._focusOnOpen()},i)]).then(o).then(function(){t.config.groupName&&e.forEach(t.config.groupName,function(e){t._$mdPanel._groups[e].openPanels.push(t)})}).then(r).catch(i)})},c.prototype.hide=function(){if(!this.panelContainer)return this._$q(function(t,e){e("mdPanel: Panel does not exist yet. Call open() or attach().")});if(this.panelContainer.hasClass("_md-panel-hidden"))return this._$q.when(this);var t=this;return this._$q(function(n,i){var r=t._done(n,t),o=t.config.onRemoving||e.noop;t._$q.all([t._backdropRef?t._backdropRef.hide():t,t._animateClose().then(o).then(function(){t.panelContainer.addClass("_md-panel-hidden")}).then(function(){var n;t.config.groupName&&e.forEach(t.config.groupName,function(e){e=t._$mdPanel._groups[e],(n=e.openPanels.indexOf(t))>-1&&e.openPanels.splice(n,1)})}).then(function(){var e=t.config.origin;e&&d(e).focus()}).catch(i)]).then(r,i)})},c.prototype.addClass=function(t,e){if(this._$log.warn("mdPanel: The addClass method is in the process of being deprecated. Full deprecation is scheduled for the AngularJS Material 1.2 release. To achieve the same results, use the panelContainer or panelEl JQLite elements that are referenced in MdPanelRef."),!this.panelContainer)throw new Error("mdPanel: Panel does not exist yet. Call open() or attach().");e||this.panelContainer.hasClass(t)?e&&!this.panelEl.hasClass(t)&&this.panelEl.addClass(t):this.panelContainer.addClass(t)},c.prototype.removeClass=function(t,e){if(this._$log.warn("mdPanel: The removeClass method is in the process of being deprecated. Full deprecation is scheduled for the AngularJS Material 1.2 release. To achieve the same results, use the panelContainer or panelEl JQLite elements that are referenced in MdPanelRef."),!this.panelContainer)throw new Error("mdPanel: Panel does not exist yet. Call open() or attach().");!e&&this.panelContainer.hasClass(t)?this.panelContainer.removeClass(t):e&&this.panelEl.hasClass(t)&&this.panelEl.removeClass(t)},c.prototype.toggleClass=function(t,e){if(this._$log.warn("mdPanel: The toggleClass method is in the process of being deprecated. Full deprecation is scheduled for the AngularJS Material 1.2 release. To achieve the same results, use the panelContainer or panelEl JQLite elements that are referenced in MdPanelRef."),!this.panelContainer)throw new Error("mdPanel: Panel does not exist yet. Call open() or attach().");e?this.panelEl.toggleClass(t):this.panelContainer.toggleClass(t)},c.prototype._compile=function(){var t=this;return t._$mdCompiler.compile(t.config).then(function(n){var i=t.config;if(i.contentElement){var r=n.element;t._restoreCache.styles=r[0].style.cssText,t._restoreCache.classes=r[0].className,t.panelContainer=t._$mdPanel._wrapContentElement(r),t.panelEl=r}else t.panelContainer=n.link(i.scope),t.panelEl=e.element(t.panelContainer[0].querySelector(".md-panel"));return t._compilerCleanup=n.cleanup,d(t.config.attachTo).append(t.panelContainer),t})},c.prototype._createPanel=function(){var t=this;return this._$q(function(e,n){t.config.locals||(t.config.locals={}),t.config.locals.mdPanelRef=t,t._compile().then(function(){t.config.disableParentScroll&&(t._restoreScroll=t._$mdUtil.disableScrollAround(null,t.panelContainer,{disableScrollMask:!0})),t.config.panelClass&&t.panelEl.addClass(t.config.panelClass),t.config.propagateContainerEvents&&(t.panelContainer.css("pointer-events","none"),t.panelEl.css("pointer-events","all")),t._$animate.pin&&t._$animate.pin(t.panelContainer,d(t.config.attachTo)),t._configureTrapFocus(),t._addStyles().then(function(){e(t)},n)},n)})},c.prototype._addStyles=function(){var t=this;return this._$q(function(e){t.panelContainer.css("z-index",t.config.zIndex),t.panelEl.css("z-index",t.config.zIndex+1);var n=function(){t._setTheming(),t.panelEl.removeClass("_md-panel-offscreen"),t.panelContainer.addClass("_md-panel-hidden"),e(t)};if(t.config.fullscreen)return t.panelEl.addClass("_md-panel-fullscreen"),void n();t.config.position?t._$rootScope.$$postDigest(function(){t._updatePosition(!0),t._setTheming(),e(t)}):n()})},c.prototype._setTheming=function(){this._$mdTheming(this.panelEl),this._$mdTheming(this.panelContainer)},c.prototype.updatePosition=function(t){if(!this.panelContainer)throw new Error("mdPanel: Panel does not exist yet. Call open() or attach().");this.config.position=t,this._updatePosition()},c.prototype._updatePosition=function(t){var e=this.config.position;e&&(e._setPanelPosition(this.panelEl),t&&(this.panelEl.removeClass("_md-panel-offscreen"),this.panelContainer.addClass("_md-panel-hidden")),this.panelEl.css(u.absPosition.TOP,e.getTop()),this.panelEl.css(u.absPosition.BOTTOM,e.getBottom()),this.panelEl.css(u.absPosition.LEFT,e.getLeft()),this.panelEl.css(u.absPosition.RIGHT,e.getRight()))},c.prototype._focusOnOpen=function(){if(this.config.focusOnOpen){var t=this;this._$rootScope.$$postDigest(function(){(t._$mdUtil.findFocusTarget(t.panelEl)||t.panelEl).focus()})}},c.prototype._createBackdrop=function(){if(this.config.hasBackdrop){if(!this._backdropRef){var t=this._$mdPanel.newPanelAnimation().openFrom(this.config.attachTo).withAnimation({open:"_md-opaque-enter",close:"_md-opaque-leave"});this.config.animation&&t.duration(this.config.animation._rawDuration);var e={animation:t,attachTo:this.config.attachTo,focusOnOpen:!1,panelClass:"_md-panel-backdrop",zIndex:this.config.zIndex-1};this._backdropRef=this._$mdPanel.create(e)}if(!this._backdropRef.isAttached)return this._backdropRef.attach()}},c.prototype._addEventListeners=function(){this._configureEscapeToClose(),this._configureClickOutsideToClose(),this._configureScrollListener()},c.prototype._removeEventListeners=function(){this._removeListeners&&this._removeListeners.forEach(function(t){t()}),this._removeListeners=[]},c.prototype._configureEscapeToClose=function(){if(this.config.escapeToClose){var t=d(this.config.attachTo),e=this,n=function(t){t.keyCode===e._$mdConstant.KEY_CODE.ESCAPE&&(t.stopPropagation(),t.preventDefault(),e.close(c.closeReasons.ESCAPE))};this.panelContainer.on("keydown",n),t.on("keydown",n),this._removeListeners.push(function(){e.panelContainer.off("keydown",n),t.off("keydown",n)})}},c.prototype._configureClickOutsideToClose=function(){if(this.config.clickOutsideToClose){var t,n=this.config.propagateContainerEvents?e.element(document.body):this.panelContainer,i=function(e){t=e.target},r=this,o=function(e){r.config.propagateContainerEvents?t===r.panelEl[0]||r.panelEl[0].contains(t)||r.close():t===n[0]&&e.target===n[0]&&(e.stopPropagation(),e.preventDefault(),r.close(c.closeReasons.CLICK_OUTSIDE))};n.on("mousedown",i),n.on("mouseup",o),this._removeListeners.push(function(){n.off("mousedown",i),n.off("mouseup",o)})}},c.prototype._configureScrollListener=function(){if(!this.config.disableParentScroll){var t=e.bind(this,this._updatePosition),n=this._$$rAF.throttle(t),i=this,r=function(){n()};this._$window.addEventListener("scroll",r,!0),this._removeListeners.push(function(){i._$window.removeEventListener("scroll",r,!0)})}},c.prototype._configureTrapFocus=function(){if(this.panelEl.attr("tabIndex","-1"),this.config.trapFocus){var t=this.panelEl;this._topFocusTrap=i.clone()[0],this._bottomFocusTrap=i.clone()[0];var e=function(){t.focus()};this._topFocusTrap.addEventListener("focus",e),this._bottomFocusTrap.addEventListener("focus",e),this._removeListeners.push(this._simpleBind(function(){this._topFocusTrap.removeEventListener("focus",e),this._bottomFocusTrap.removeEventListener("focus",e)},this)),t[0].parentNode.insertBefore(this._topFocusTrap,t[0]),t.after(this._bottomFocusTrap)}},c.prototype.updateAnimation=function(t){this.config.animation=t,this._backdropRef&&this._backdropRef.config.animation.duration(t._rawDuration)},c.prototype._animateOpen=function(){this.panelContainer.addClass("md-panel-is-showing");var t=this.config.animation;if(!t)return this.panelContainer.addClass("_md-panel-shown"),this._$q.when(this);var e=this;return this._$q(function(n){var i=e._done(n,e);t.animateOpen(e.panelEl).then(i,function(){e._$log.warn("mdPanel: MdPanel Animations failed. Showing panel without animating."),i()})})},c.prototype._animateClose=function(){var t=this.config.animation;if(!t)return this.panelContainer.removeClass("md-panel-is-showing"),this.panelContainer.removeClass("_md-panel-shown"),this._$q.when(this);var e=this;return this._$q(function(n){var i=function(){e.panelContainer.removeClass("md-panel-is-showing"),n(e)};t.animateClose(e.panelEl).then(i,function(){e._$log.warn("mdPanel: MdPanel Animations failed. Hiding panel without animating."),i()})})},c.prototype.registerInterceptor=function(t,n){var i=null;if(e.isString(t)?e.isFunction(n)||(i="Interceptor callback must be a function, instead got "+typeof n):i="Interceptor type must be a string, instead got "+typeof t,i)throw new Error("MdPanel: "+i);var r=this._interceptors[t]=this._interceptors[t]||[];return-1===r.indexOf(n)&&r.push(n),this},c.prototype.removeInterceptor=function(t,e){var n=this._interceptors[t]?this._interceptors[t].indexOf(e):-1;return n>-1&&this._interceptors[t].splice(n,1),this},c.prototype.removeAllInterceptors=function(t){return t?this._interceptors[t]=[]:this._interceptors=Object.create(null),this},c.prototype._callInterceptors=function(t){var n=this,i=n._$q;return(n._interceptors&&n._interceptors[t]||[]).reduceRight(function(t,r){var o=r&&e.isFunction(r.then)?r:null;return t.then(function(){if(!o)try{o=r(n)}catch(t){o=i.reject(t)}return o})},i.resolve(n))},c.prototype._simpleBind=function(t,e){return function(n){return t.apply(e,n)}},c.prototype._done=function(t,e){return function(){t(e)}},c.prototype.addToGroup=function(t){this._$mdPanel._groups[t]||this._$mdPanel.newPanelGroup(t);var e=this._$mdPanel._groups[t];e.panels.indexOf(this)<0&&e.panels.push(this)},c.prototype.removeFromGroup=function(t){if(!this._$mdPanel._groups[t])throw new Error("mdPanel: The group "+t+" does not exist.");var e=this._$mdPanel._groups[t],n=e.panels.indexOf(this);n>-1&&e.panels.splice(n,1)},c.closeReasons={CLICK_OUTSIDE:"clickOutsideToClose",ESCAPE:"escapeToClose"},u.xPosition={CENTER:"center",ALIGN_START:"align-start",ALIGN_END:"align-end",OFFSET_START:"offset-start",OFFSET_END:"offset-end"},u.yPosition={CENTER:"center",ALIGN_TOPS:"align-tops",ALIGN_BOTTOMS:"align-bottoms",ABOVE:"above",BELOW:"below"},u.absPosition={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},u.viewportMargin=8,u.prototype.absolute=function(){return this._absolute=!0,this},u.prototype._setPosition=function(t,n){if(t===u.absPosition.RIGHT||t===u.absPosition.LEFT)this._left=this._right="";else{if(t!==u.absPosition.BOTTOM&&t!==u.absPosition.TOP){var i=Object.keys(u.absPosition).join().toLowerCase();throw new Error("mdPanel: Position must be one of "+i+".")}this._top=this._bottom=""}return this["_"+t]=e.isString(n)?n:"0",this},u.prototype.top=function(t){return this._setPosition(u.absPosition.TOP,t)},u.prototype.bottom=function(t){return this._setPosition(u.absPosition.BOTTOM,t)},u.prototype.start=function(t){var e=this._isRTL?u.absPosition.RIGHT:u.absPosition.LEFT;return this._setPosition(e,t)},u.prototype.end=function(t){var e=this._isRTL?u.absPosition.LEFT:u.absPosition.RIGHT;return this._setPosition(e,t)},u.prototype.left=function(t){return this._setPosition(u.absPosition.LEFT,t)},u.prototype.right=function(t){return this._setPosition(u.absPosition.RIGHT,t)},u.prototype.centerHorizontally=function(){return this._left="50%",this._right="",this._translateX=["-50%"],this},u.prototype.centerVertically=function(){return this._top="50%",this._bottom="",this._translateY=["-50%"],this},u.prototype.center=function(){return this.centerHorizontally().centerVertically()},u.prototype.relativeTo=function(t){return this._absolute=!1,this._relativeToEl=d(t),this},u.prototype.addPanelPosition=function(t,e){if(!this._relativeToEl)throw new Error("mdPanel: addPanelPosition can only be used with relative positioning. Set relativeTo first.");return this._validateXPosition(t),this._validateYPosition(e),this._positions.push({x:t,y:e}),this},u.prototype._validateYPosition=function(t){if(null!=t){for(var e,n=Object.keys(u.yPosition),i=[],r=0;e=n[r];r++){var o=u.yPosition[e];if(i.push(o),o===t)return}throw new Error("mdPanel: Panel y position only accepts the following values:\n"+i.join(" | "))}},u.prototype._validateXPosition=function(t){if(null!=t){for(var e,n=Object.keys(u.xPosition),i=[],r=0;e=n[r];r++){var o=u.xPosition[e];if(i.push(o),o===t)return}throw new Error("mdPanel: Panel x Position only accepts the following values:\n"+i.join(" | "))}},u.prototype.withOffsetX=function(t){return this._translateX.push(f(t)),this},u.prototype.withOffsetY=function(t){return this._translateY.push(f(t)),this},u.prototype.getTop=function(){return this._top},u.prototype.getBottom=function(){return this._bottom},u.prototype.getLeft=function(){return this._left},u.prototype.getRight=function(){return this._right},u.prototype.getTransform=function(){return(this._reduceTranslateValues("translateX",this._translateX)+" "+this._reduceTranslateValues("translateY",this._translateY)).trim()},u.prototype._setTransform=function(t){return t.css(this._$mdConstant.CSS.TRANSFORM,this.getTransform())},u.prototype._isOnscreen=function(t){var e=parseInt(this.getLeft()),n=parseInt(this.getTop());if(this._translateX.length||this._translateY.length){var i=function(t,e){var n=getComputedStyle(t[0]||t)[e],i=n.indexOf("("),r=n.lastIndexOf(")"),o={x:0,y:0};if(i>-1&&r>-1){var s=n.substring(i+1,r).split(", ").slice(-2);o.x=parseInt(s[0]),o.y=parseInt(s[1])}return o}(t,this._$mdConstant.CSS.TRANSFORM);e+=i.x,n+=i.y}var r=e+t[0].offsetWidth,o=n+t[0].offsetHeight;return e>=0&&n>=0&&o<=this._$window.innerHeight&&r<=this._$window.innerWidth},u.prototype.getActualPosition=function(){return this._actualPosition},u.prototype._reduceTranslateValues=function(t,n){return n.map(function(n){var i=e.isFunction(n)?f(n(this)):n;return t+"("+i+")"},this).join(" ")},u.prototype._setPanelPosition=function(t){if(t.removeClass("_md-panel-position-adjusted"),this._absolute)this._setTransform(t);else{if(this._actualPosition)return this._calculatePanelPosition(t,this._actualPosition),this._setTransform(t),void this._constrainToViewport(t);for(var e=0;e<this._positions.length;e++)if(this._actualPosition=this._positions[e],this._calculatePanelPosition(t,this._actualPosition),this._setTransform(t),this._isOnscreen(t))return;this._constrainToViewport(t)}},u.prototype._constrainToViewport=function(t){var e=u.viewportMargin,n=this._top,i=this._left;if(this.getTop()){var r=parseInt(this.getTop()),o=t[0].offsetHeight+r,s=this._$window.innerHeight;r<e?this._top=e+"px":o>s&&(this._top=r-(o-s+e)+"px")}if(this.getLeft()){var a=parseInt(this.getLeft()),l=t[0].offsetWidth+a,c=this._$window.innerWidth;a<e?this._left=e+"px":l>c&&(this._left=a-(l-c+e)+"px")}t.toggleClass("_md-panel-position-adjusted",this._top!==n||this._left!==i)},u.prototype._reverseXPosition=function(t){if(t===u.xPosition.CENTER)return t;return t.indexOf("start")>-1?t.replace("start","end"):t.replace("end","start")},u.prototype._bidi=function(t){return this._isRTL?this._reverseXPosition(t):t},u.prototype._calculatePanelPosition=function(t,e){var n=t[0].getBoundingClientRect(),i=Math.max(n.width,t[0].clientWidth),r=Math.max(n.height,t[0].clientHeight),o=this._relativeToEl[0].getBoundingClientRect(),s=o.left,a=o.right,l=o.width;switch(this._bidi(e.x)){case u.xPosition.OFFSET_START:this._left=s-i+"px";break;case u.xPosition.ALIGN_END:this._left=a-i+"px";break;case u.xPosition.CENTER:var c=s+.5*l-.5*i;this._left=c+"px";break;case u.xPosition.ALIGN_START:this._left=s+"px";break;case u.xPosition.OFFSET_END:this._left=a+"px"}var h=o.top,d=o.bottom,f=o.height;switch(e.y){case u.yPosition.ABOVE:this._top=h-r+"px";break;case u.yPosition.ALIGN_BOTTOMS:this._top=d-r+"px";break;case u.yPosition.CENTER:var p=h+.5*f-.5*r;this._top=p+"px";break;case u.yPosition.ALIGN_TOPS:this._top=h+"px";break;case u.yPosition.BELOW:this._top=d+"px"}},h.animation={SLIDE:"md-panel-animate-slide",SCALE:"md-panel-animate-scale",FADE:"md-panel-animate-fade"},h.prototype.openFrom=function(t){return t=t.target?t.target:t,this._openFrom=this._getPanelAnimationTarget(t),this._closeTo||(this._closeTo=this._openFrom),this},h.prototype.closeTo=function(t){return this._closeTo=this._getPanelAnimationTarget(t),this},h.prototype.duration=function(t){return t&&(e.isNumber(t)?this._openDuration=this._closeDuration=n(t):e.isObject(t)&&(this._openDuration=n(t.open),this._closeDuration=n(t.close))),this._rawDuration=t,this;function n(t){if(e.isNumber(t))return t/1e3}},h.prototype._getPanelAnimationTarget=function(t){return e.isDefined(t.top)||e.isDefined(t.left)?{element:n,bounds:{top:t.top||0,left:t.left||0}}:this._getBoundingClientRect(d(t))},h.prototype.withAnimation=function(t){return this._animationClass=t,this},h.prototype.animateOpen=function(t){var n=this._$mdUtil.dom.animator;this._fixBounds(t);var i={},r=t[0].style.transform||"",o=n.toTransformCss(r),s=n.toTransformCss(r);switch(this._animationClass){case h.animation.SLIDE:t.css("opacity","1"),i={transitionInClass:"_md-panel-animate-enter"};var a=n.calculateSlideToOrigin(t,this._openFrom)||"";o=n.toTransformCss(a+" "+r);break;case h.animation.SCALE:i={transitionInClass:"_md-panel-animate-enter"};var l=n.calculateZoomToOrigin(t,this._openFrom)||"";o=n.toTransformCss(r+" "+l);break;case h.animation.FADE:i={transitionInClass:"_md-panel-animate-enter"};break;default:i=e.isString(this._animationClass)?{transitionInClass:this._animationClass}:{transitionInClass:this._animationClass.open,transitionOutClass:this._animationClass.close}}return i.duration=this._openDuration,n.translate3d(t,o,s,i)},h.prototype.animateClose=function(t){var n=this._$mdUtil.dom.animator,i={},r=t[0].style.transform||"",o=n.toTransformCss(r),s=n.toTransformCss(r);switch(this._animationClass){case h.animation.SLIDE:t.css("opacity","1"),i={transitionInClass:"_md-panel-animate-leave"};var a=n.calculateSlideToOrigin(t,this._closeTo)||"";s=n.toTransformCss(a+" "+r);break;case h.animation.SCALE:i={transitionInClass:"_md-panel-animate-scale-out _md-panel-animate-leave"};var l=n.calculateZoomToOrigin(t,this._closeTo)||"";s=n.toTransformCss(r+" "+l);break;case h.animation.FADE:i={transitionInClass:"_md-panel-animate-fade-out _md-panel-animate-leave"};break;default:i=e.isString(this._animationClass)?{transitionOutClass:this._animationClass}:{transitionInClass:this._animationClass.close,transitionOutClass:this._animationClass.open}}return i.duration=this._closeDuration,n.translate3d(t,o,s,i)},h.prototype._fixBounds=function(t){var e=t[0].offsetWidth,n=t[0].offsetHeight;this._openFrom&&null==this._openFrom.bounds.height&&(this._openFrom.bounds.height=n),this._openFrom&&null==this._openFrom.bounds.width&&(this._openFrom.bounds.width=e),this._closeTo&&null==this._closeTo.bounds.height&&(this._closeTo.bounds.height=n),this._closeTo&&null==this._closeTo.bounds.width&&(this._closeTo.bounds.width=e)},h.prototype._getBoundingClientRect=function(t){if(t instanceof e.element)return{element:t,bounds:t[0].getBoundingClientRect()}}}(),e.module("material.components.progressCircular",["material.core"]),function(){function t(t,n,i,r,o,s){var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||e.noop,l=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||e.noop,c="determinate",u="indeterminate",h="_md-progress-circular-disabled",d="md-mode-indeterminate";return{restrict:"E",scope:{value:"@",mdDiameter:"@",mdMode:"@"},template:'<svg xmlns="http://www.w3.org/2000/svg"><path fill="none"/></svg>',compile:function(t,n){if(t.attr({"aria-valuemin":0,"aria-valuemax":100,role:"progressbar"}),e.isUndefined(n.mdMode)){var i=n.hasOwnProperty("value")?c:u;n.$set("mdMode",i)}else n.$set("mdMode",n.mdMode.trim());return f}};function f(s,f,b){var _,w,S=f[0],x=e.element(S.querySelector("svg")),C=e.element(S.querySelector("path")),k=n.startIndeterminate,T=n.endIndeterminate,M=0,E=0;function A(e,i,o,l,c,u){var h=++E,d=r.now(),f=i-e,p=v(s.mdDiameter),g=y(p),b=o||n.easeFn,w=l||n.duration,S=-90*(c||0),x=u||100;function k(t){C.attr("stroke-dashoffset",m(p,g,t,x)),C.attr("transform","rotate("+S+" "+p/2+" "+p/2+")")}i===e?k(i):_=a(function n(){var i=t.Math.max(0,t.Math.min(r.now()-d,w));k(b(i,e,f,w)),h===E&&i<w&&(_=a(n))})}function I(){A(k,T,n.easeFnIndeterminate,n.durationIndeterminate,M,75),M=++M%4}function $(){w||(w=o(I,n.durationIndeterminate,0,!1),I(),f.addClass(d).removeAttr("aria-valuenow"))}function D(){w&&(o.cancel(w),w=null,f.removeClass(d))}i(f),f.toggleClass(h,b.hasOwnProperty("disabled")),s.mdMode===u&&$(),s.$on("$destroy",function(){D(),_&&l(_)}),s.$watchGroup(["value","mdMode",function(){var t=S.disabled;return!0===t||!1===t?t:e.isDefined(f.attr("disabled"))}],function(e,n){var i=e[1],r=e[2],o=0,a=0;if(r!==n[2]&&f.toggleClass(h,!!r),r)D();else if(i!==c&&i!==u&&(i=u,b.$set("mdMode",i)),i===u)n[1]===c&&(a=y(o=v(s.mdDiameter)),C.attr("d",p(o,a,!0)),C.attr("stroke-dasharray",(o-a)*t.Math.PI*.75)),$();else{var l=g(e[0]),d=g(n[0]);D(),n[1]===u&&(a=y(o=v(s.mdDiameter)),C.attr("d",p(o,a,!1)),C.attr("stroke-dasharray",(o-a)*t.Math.PI)),f.attr("aria-valuenow",l),A(d,l)}}),s.$watch("mdDiameter",function(e){var n=v(e),i=y(n),r=g(s.value),o=n/2+"px",a={width:n+"px",height:n+"px"};x[0].setAttribute("viewBox","0 0 "+n+" "+n),x.css(a).css("transform-origin",o+" "+o+" "+o),f.css(a),C.attr("stroke-width",i),C.attr("stroke-linecap","square"),s.mdMode==u?(C.attr("d",p(n,i,!0)),C.attr("stroke-dasharray",(n-i)*t.Math.PI*.75),C.attr("stroke-dashoffset",m(n,i,1,75))):(C.attr("d",p(n,i,!1)),C.attr("stroke-dasharray",(n-i)*t.Math.PI),C.attr("stroke-dashoffset",m(n,i,0,100)),A(r,r))})}function p(t,e,n){var i=t/2,r=e/2,o=i+","+r,s=i-r;return"M"+o+"A"+s+","+s+" 0 1 1 "+(r+","+i)+(n?"":"A"+s+","+s+" 0 0 1 "+o)}function m(e,n,i,r){return(e-n)*t.Math.PI*(3*(r||100)/100-i/100)}function g(e){return t.Math.max(0,t.Math.min(e||0,100))}function v(t){var e=n.progressSize;if(t){var i=parseFloat(t);return t.lastIndexOf("%")===t.length-1&&(i=i/100*e),i}return e}function y(t){return n.strokeWidth/100*t}}t.$inject=["$window","$mdProgressCircular","$mdTheming","$mdUtil","$interval","$log"],e.module("material.components.progressCircular").directive("mdProgressCircular",t)}(),e.module("material.components.progressCircular").provider("$mdProgressCircular",function(){var t={progressSize:50,strokeWidth:10,duration:100,easeFn:n,durationIndeterminate:1333,startIndeterminate:1,endIndeterminate:149,easeFnIndeterminate:i,easingPresets:{linearEase:n,materialEase:i}};return{configure:function(n){return t=e.extend(t,n||{})},$get:function(){return t}};function n(t,e,n,i){return n*t/i+e}function i(t,e,n,i){var r=(t/=i)*t,o=r*t;return e+n*(6*o*r+-15*r*r+10*o)}}),function(){function t(t,n,i){var r="determinate",o="indeterminate",s="buffer",a="query",l="_md-progress-linear-disabled";return{restrict:"E",template:'<div class="md-container"><div class="md-dashed"></div><div class="md-bar md-bar1"></div><div class="md-bar md-bar2"></div></div>',compile:function(t,e,n){return t.attr("aria-valuemin",0),t.attr("aria-valuemax",100),t.attr("role","progressbar"),c}};function c(i,c,h){var d;t(c);var f=h.hasOwnProperty("disabled"),p=n.dom.animator.toCss,m=e.element(c[0].querySelector(".md-bar1")),g=e.element(c[0].querySelector(".md-bar2")),v=e.element(c[0].querySelector(".md-container"));function y(){var t=(h.mdMode||"").trim();if(t)switch(t){case r:case o:case s:case a:break;default:t=o}return t}function b(t,i){if(!f&&y()){var r=n.supplant("translateX({0}%) scale({1},1)",[(i-100)/2,i/100]),o=p({transform:r});e.element(t).css(o)}}c.attr("md-mode",y()).toggleClass(l,f),function(){if(e.isUndefined(h.mdMode)){var t=e.isDefined(h.value)?r:o;c.attr("md-mode",t),h.mdMode=t}}(),h.$observe("value",function(t){var e=u(t);c.attr("aria-valuenow",e),y()!=a&&b(g,e)}),h.$observe("mdBufferValue",function(t){b(m,u(t))}),h.$observe("disabled",function(t){f=!0===t||!1===t?!!t:e.isDefined(t),c.toggleClass(l,f),v.toggleClass(d,!f)}),h.$observe("mdMode",function(t){switch(d&&v.removeClass(d),t){case a:case s:case r:case o:v.addClass(d="md-mode-"+t);break;default:v.addClass(d="md-mode-"+o)}})}function u(t){return Math.max(0,Math.min(t||0,100))}}t.$inject=["$mdTheming","$mdUtil","$log"],e.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",t)}(),function(){function t(t,n,i,r){return o.prototype={init:function(t){this._ngModelCtrl=t,this._ngModelCtrl.$render=e.bind(this,this.render)},add:function(t){this._radioButtonRenderFns.push(t)},remove:function(t){var e=this._radioButtonRenderFns.indexOf(t);-1!==e&&this._radioButtonRenderFns.splice(e,1)},render:function(){this._radioButtonRenderFns.forEach(function(t){t()})},setViewValue:function(t,e){this._ngModelCtrl.$setViewValue(t,e),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return s(this.$element,1)},selectPrevious:function(){return s(this.$element,-1)},setActiveDescendant:function(t){this.$element.attr("aria-activedescendant",t)},isDisabled:function(){return this.$element[0].hasAttribute("disabled")}},{restrict:"E",controller:["$element",o],require:["mdRadioGroup","?ngModel"],link:{pre:function(o,s,a,l){s.addClass("_md"),i(s);var c=l[0],u=l[1]||t.fakeNgModel();function h(){s.hasClass("md-focused")||s.addClass("md-focused")}c.init(u),o.mouseActive=!1,s.attr({role:"radiogroup",tabIndex:s.attr("tabindex")||"0"}).on("keydown",function(i){var r=i.which||i.keyCode;if(r==n.KEY_CODE.ENTER||i.currentTarget==i.target)switch(r){case n.KEY_CODE.LEFT_ARROW:case n.KEY_CODE.UP_ARROW:i.preventDefault(),c.selectPrevious(),h();break;case n.KEY_CODE.RIGHT_ARROW:case n.KEY_CODE.DOWN_ARROW:i.preventDefault(),c.selectNext(),h();break;case n.KEY_CODE.ENTER:var o=e.element(t.getClosest(s[0],"form"));o.length>0&&o.triggerHandler("submit")}}).on("mousedown",function(t){o.mouseActive=!0,r(function(){o.mouseActive=!1},100)}).on("focus",function(){!1===o.mouseActive&&c.$element.addClass("md-focused")}).on("blur",function(){c.$element.removeClass("md-focused")})}}};function o(t){this._radioButtonRenderFns=[],this.$element=t}function s(n,i){var r=t.iterator(n[0].querySelectorAll("md-radio-button"),!0);if(r.count()){var o=n[0].querySelector("md-radio-button.md-checked"),s=r[i<0?"previous":"next"](o,function(t){return!e.element(t).attr("disabled")})||r.first();e.element(s).triggerHandler("click")}}}function n(t,e,n){var i="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-off"></div><div class="md-on"></div></div><div ng-transclude class="md-label"></div>',link:function(r,o,s,a){var l;n(o),function(n,i){n.attr({id:s.id||"radio_"+e.nextUid(),role:"radio","aria-checked":"false"}),t.expectWithText(n,"aria-label")}(o),s.ngValue?e.nextTick(c,!1):c();function c(){if(!a)throw"RadioButton: No RadioGroupController could be found.";a.add(h),s.$observe("value",h),o.on("click",u).on("$destroy",function(){a.remove(h)})}function u(t){o[0].hasAttribute("disabled")||a.isDisabled()||r.$apply(function(){a.setViewValue(s.value,t&&t.type)})}function h(){var t=a.getViewValue()==s.value;t!==l&&("md-radio-group"!==o[0].parentNode.nodeName.toLowerCase()&&o.parent().toggleClass(i,t),t&&a.setActiveDescendant(o.attr("id")),l=t,o.attr("aria-checked",t).toggleClass(i,t))}}}}t.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],n.$inject=["$mdAria","$mdUtil","$mdTheming"],e.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",t).directive("mdRadioButton",n)}(),function(){s.$inject=["$mdSelect","$mdUtil","$mdConstant","$mdTheming","$mdAria","$parse","$sce","$injector"],a.$inject=["$parse","$mdUtil","$mdConstant","$mdTheming"],l.$inject=["$mdButtonInkRipple","$mdUtil","$mdTheming"],c.$inject=["$$interimElementProvider"];var i=8,r=0,o=e.element('<div class="md-container"><div class="md-icon"></div></div>');function s(t,i,r,o,s,a,l,c){var h=r.KEY_CODE;h.SPACE,h.ENTER,h.UP_ARROW,h.DOWN_ARROW;return{restrict:"E",require:["^?mdInputContainer","mdSelect","ngModel","?^form"],compile:function(c,h){var d=e.element("<md-select-value><span></span></md-select-value>");d.append('<span class="md-select-icon" aria-hidden="true"></span>'),d.addClass("md-select-value"),d[0].hasAttribute("id")||d.attr("id","select_value_label_"+i.nextUid());var f=c.find("md-content");f.length||c.append(e.element("<md-content>").append(c.contents()));f.attr("role","presentation"),h.mdOnOpen&&(c.find("md-content").prepend(e.element('<div> <md-progress-circular md-mode="indeterminate" ng-if="$$loadingAsyncDone === false" md-diameter="25px"></md-progress-circular></div>')),c.find("md-option").attr("ng-show","$$loadingAsyncDone"));if(h.name){var p=e.element('<select class="md-visually-hidden"></select>');p.attr({name:h.name,"aria-hidden":"true",tabindex:"-1"});var m=c.find("md-option");e.forEach(m,function(t){var n=e.element("<option>"+t.innerHTML+"</option>");t.hasAttribute("ng-value")?n.attr("ng-value",t.getAttribute("ng-value")):t.hasAttribute("value")&&n.attr("value",t.getAttribute("value")),p.append(n)}),p.append('<option ng-value="'+h.ngModel+'" selected></option>'),c.parent().append(p)}var g=i.parseAttributeBoolean(h.multiple),v=g?"multiple":"",y='<div class="md-select-menu-container" aria-hidden="true" role="presentation"><md-select-menu role="presentation" {0}>{1}</md-select-menu></div>';y=i.supplant(y,[v,c.html()]),c.empty().append(d),c.append(y),h.tabindex||h.$set("tabindex",0);return function(c,h,d,f){var p,m,v,y,b,_=!0,w=f[0],S=f[1],x=f[2],C=f[3],k=h.find("md-select-value"),T=e.isDefined(d.readonly),M=i.parseAttributeBoolean(d.mdNoAsterisk);if(M&&h.addClass("md-no-asterisk"),w){var E=w.isErrorGetter||function(){return x.$invalid&&(x.$touched||C&&C.$submitted)};if(w.input&&h.find("md-select-header").find("input")[0]!==w.input[0])throw new Error("<md-input-container> can only have *one* child <input>, <textarea> or <select> element!");w.input=h,w.label||s.expect(h,"aria-label",h.attr("placeholder")),c.$watch(E,w.setInvalid)}!function(){if(v=e.element(h[0].querySelector(".md-select-menu-container")),y=c,d.mdContainerClass){var t=v[0].getAttribute("class")+" "+d.mdContainerClass;v[0].setAttribute("class",t)}(b=v.find("md-select-menu").controller("mdSelectMenu")).init(x,d.ngModel),h.on("$destroy",function(){v.remove()})}(),o(h);var A,I=x.$render;if(x.$render=function(){I(),$(),D(),O()},d.$observe("placeholder",x.$render),w&&w.label&&d.$observe("required",function(t){w.label.toggleClass("md-required",t&&!M)}),S.setLabelText=function(t){S.setIsPlaceholder(!t);var e=!1;if(d.mdSelectedText&&d.mdSelectedHtml)throw Error("md-select cannot have both `md-selected-text` and `md-selected-html`");if(d.mdSelectedText||d.mdSelectedHtml)t=a(d.mdSelectedText||d.mdSelectedHtml)(c),e=!0;else if(!t){t=d.placeholder||(w&&w.label?w.label.text():"")||"",e=!0}var n=k.children().eq(0);d.mdSelectedHtml?n.html(l.getTrustedHtml(t)):e?n.text(t):n.html(t)},S.setIsPlaceholder=function(t){t?(k.addClass("md-select-placeholder"),w&&w.label&&w.label.addClass("md-placeholder")):(k.removeClass("md-select-placeholder"),w&&w.label&&w.label.removeClass("md-placeholder"))},!T){h.on("focus",function(t){w&&w.setFocused(!0)}),h.on("blur",function(t){_&&(_=!1,y._mdSelectIsOpen&&t.stopImmediatePropagation()),w&&w.setFocused(!1),O()})}function $(){v&&(b=b||v.find("md-select-menu").controller("mdSelectMenu"),S.setLabelText(b.selectedLabels()))}function D(){if(m){var t=b.selectedLabels({mode:"aria"});h.attr("aria-label",t.length?m+": "+t:m)}}S.triggerClose=function(){a(d.mdOnClose)(c)},c.$$postDigest(function(){!function(){var t=h.attr("aria-label")||h.attr("placeholder");!t&&w&&w.label&&(t=w.label.text());m=t,s.expect(h,"aria-label",t)}(),$(),D()}),c.$watch(function(){return b.selectedLabels()},$),d.$observe("ngMultiple",function(t){A&&A();var e=a(t);A=c.$watch(function(){return e(c)},function(t,e){t===n&&e===n||(t?h.attr("multiple","multiple"):h.removeAttr("multiple"),h.attr("aria-multiselectable",t?"true":"false"),v&&(b.setMultiple(t),I=x.$render,x.$render=function(){I(),$(),D(),O()},x.$render()))})}),d.$observe("disabled",function(t){e.isString(t)&&(t=!0),p!==n&&p===t||(p=t,t?h.attr({"aria-disabled":"true"}).removeAttr("tabindex").off("click",j).off("keydown",N):h.attr({tabindex:d.tabindex,"aria-disabled":"false"}).on("click",j).on("keydown",N))}),d.hasOwnProperty("disabled")||d.hasOwnProperty("ngDisabled")||(h.attr({"aria-disabled":"false"}),h.on("click",j),h.on("keydown",N));var L={role:"listbox","aria-expanded":"false","aria-multiselectable":g&&!d.ngMultiple?"true":"false"};h[0].hasAttribute("id")||(L.id="select_"+i.nextUid());var P="select_container_"+i.nextUid();function O(){i.nextTick(function(){w&&w.setHasValue(b.selectedLabels().length>0||(h[0].validity||{}).badInput)})}function N(t){if(r.isNavigationKey(t))t.preventDefault(),j();else if(u(t,r)){t.preventDefault();var n=b.optNodeForKeyboardSearch(t);if(!n||n.hasAttribute("disabled"))return;var i=e.element(n).controller("mdOption");b.isMultiple||b.deselect(Object.keys(b.selected)[0]),b.select(i.hashKey,i.value),b.refreshViewValue()}}function j(){y._mdSelectIsOpen=!0,h.attr("aria-expanded","true"),t.show({scope:y,preserveScope:!0,skipCompile:!0,element:v,target:h[0],selectCtrl:S,preserveElement:!0,hasBackdrop:!0,loadingAsync:!!d.mdOnOpen&&(c.$eval(d.mdOnOpen)||!0)}).finally(function(){y._mdSelectIsOpen=!1,h.attr("aria-expanded","false"),x.$setTouched()})}v.attr("id",P),h.find("md-select-menu").length||(L["aria-owns"]=P),h.attr(L),c.$on("$destroy",function(){t.destroy().finally(function(){w&&(w.setFocused(!1),w.setHasValue(!1),w.input=null),x.$setTouched()})})}},controller:function(){}}}function a(t,i,o,s){return a.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu"],scope:!1,controller:a,link:{pre:function(t,n,r,o){var a=o[0];function l(n){var r=i.getClosest(n.target,"md-option"),o=r&&e.element(r).data("$mdOptionController");if(r&&o){if(r.hasAttribute("disabled"))return n.stopImmediatePropagation(),!1;var s=a.hashGetter(o.value),l=e.isDefined(a.selected[s]);t.$apply(function(){a.isMultiple?l?a.deselect(s):a.select(s,o.value):l||(a.deselect(Object.keys(a.selected)[0]),a.select(s,o.value)),a.refreshViewValue()})}}n.addClass("_md"),s(n),n.on("click",l),n.on("keypress",function(t){13!=t.keyCode&&32!=t.keyCode||l(t)})}}};function a(o,s,a){var l,c=this;c.isMultiple=e.isDefined(s.multiple),c.selected={},c.options={},o.$watchCollection(function(){return c.options},function(){c.ngModel.$render()}),c.setMultiple=function(t){var n=c.ngModel;if(l=l||n.$isEmpty,c.isMultiple=t,c.isMultiple){var r=!1,s=function(t){r?p():i.nextTick(function(){p(),r=!0})};n.$validators["md-multiple"]=a,n.$render=s,o.$watchCollection(c.modelBinding,function(t){a(t)&&s()}),n.$isEmpty=function(t){return!t||0===t.length}}else delete n.$validators["md-multiple"],n.$render=m;function a(t,n){return e.isArray(t||n||[])}};var u,h,d,f="";function p(){var t=c.ngModel.$modelValue||c.ngModel.$viewValue||[];if(e.isArray(t)){var n=Object.keys(c.selected),i=t.map(c.hashGetter);n.filter(function(t){return-1===i.indexOf(t)}).forEach(c.deselect),i.forEach(function(e,n){c.select(e,t[n])})}}function m(){var t=c.ngModel.$viewValue||c.ngModel.$modelValue;Object.keys(c.selected).forEach(c.deselect),c.select(c.hashGetter(t),t)}c.optNodeForKeyboardSearch=function(t){u&&clearTimeout(u),u=setTimeout(function(){u=n,f="",d=n,h=n},300),f+=t.key;var i=new RegExp("^"+f,"i");h||(h=a.find("md-option"),d=new Array(h.length),e.forEach(h,function(t,e){d[e]=t.textContent.trim()}));for(var r=0;r<d.length;++r)if(i.test(d[r]))return h[r]},c.init=function(n,s){c.ngModel=n,c.modelBinding=s,c.ngModel.$isEmpty=function(t){return!c.options[c.hashGetter(t)]};var a=i.getModelOption(n,"trackBy");if(a){var l={},u=t(a);c.hashGetter=function(t,e){return l.$value=t,u(e||o,l)}}else c.hashGetter=function(t){return e.isObject(t)?"object_"+(t.$$mdSelectId||(t.$$mdSelectId=++r)):t};c.setMultiple(c.isMultiple)},c.selectedLabels=function(t){var e,n=(t=t||{}).mode||"html",r=i.nodesToArray(a[0].querySelectorAll("md-option[selected]"));return r.length?("html"==n?e=function(t){if(t.hasAttribute("md-option-empty"))return"";var e=t.innerHTML,n=t.querySelector(".md-ripple-container");n&&(e=e.replace(n.outerHTML,""));var i=t.querySelector(".md-container");return i&&(e=e.replace(i.outerHTML,"")),e}:"aria"==n&&(e=function(t){return t.hasAttribute("aria-label")?t.getAttribute("aria-label"):t.textContent}),i.uniq(r.map(e)).join(", ")):""},c.select=function(t,e){var n=c.options[t];n&&n.setSelected(!0),c.selected[t]=e},c.deselect=function(t){var e=c.options[t];e&&e.setSelected(!1),delete c.selected[t]},c.addOption=function(t,n){if(e.isDefined(c.options[t]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+n.value+'" found.');c.options[t]=n,e.isDefined(c.selected[t])&&(c.select(t,n.value),e.isDefined(c.ngModel.$$rawModelValue)&&c.hashGetter(c.ngModel.$$rawModelValue)===t&&c.ngModel.$validate(),c.refreshViewValue())},c.removeOption=function(t){delete c.options[t]},c.refreshViewValue=function(){var t,n=[];for(var r in c.selected)(t=c.options[r])?n.push(t.value):n.push(c.selected[r]);var o=i.getModelOption(c.ngModel,"trackBy"),s=c.isMultiple?n:n[0],a=c.ngModel.$modelValue;(o?e.equals(a,s):a+""===s)||(c.ngModel.$setViewValue(s),c.ngModel.$render())}}}function l(t,n,i){return a.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:a,compile:function(t,n){t.append(e.element('<div class="md-text">').append(t.contents())),t.attr("tabindex",n.tabindex||"0"),r(n)||t.attr("md-option-empty","");return s}};function r(t){var e=t.value,n=t.ngValue;return e||n}function s(r,s,a,l){var c=l[0],u=l[1];function h(t,e,n){if(u.hashGetter){var i=u.hashGetter(e,r),o=u.hashGetter(t,r);c.hashKey=o,c.value=t,u.removeOption(i,c),u.addOption(o,c)}else n||r.$$postDigest(function(){h(t,e,!0)})}i(s),u.isMultiple&&(s.addClass("md-checkbox-enabled"),s.prepend(o.clone())),e.isDefined(a.ngValue)?r.$watch(a.ngValue,h):e.isDefined(a.value)?h(a.value):r.$watch(function(){return s.text().trim()},h),a.$observe("disabled",function(t){t?s.attr("tabindex","-1"):s.attr("tabindex","0")}),r.$$postDigest(function(){a.$observe("selected",function(t){e.isDefined(t)&&("string"==typeof t&&(t=!0),t?(u.isMultiple||u.deselect(Object.keys(u.selected)[0]),u.select(c.hashKey,c.value)):u.deselect(c.hashKey),u.refreshViewValue())})}),t.attach(r,s),function(){var t={role:"option","aria-selected":"false"};s[0].hasAttribute("id")||(t.id="select_option_"+n.nextUid());s.attr(t)}(),r.$on("$destroy",function(){u.removeOption(c.hashKey,c)})}function a(t){this.selected=!1,this.setSelected=function(e){e&&!this.selected?t.attr({selected:"selected","aria-selected":"true"}):!e&&this.selected&&(t.removeAttr("selected"),t.attr("aria-selected","false")),this.selected=e}}}function c(r){return o.$inject=["$mdSelect","$mdConstant","$mdUtil","$window","$q","$$rAF","$animateCss","$animate","$document"],r("$mdSelect").setDefaults({methods:["target"],options:o});function o(r,o,a,l,c,h,d,f,p){var m="$mdSelect.show() expected a target element in options.target but got '{0}'!",g=a.dom.animator,v=o.KEY_CODE;return{parent:"body",themable:!0,onShow:function(t,i,s){return function(){s.loadingAsync&&!s.isRemoved&&(t.$$loadingAsyncDone=!1,c.when(s.loadingAsync).then(function(){t.$$loadingAsyncDone=!0,delete s.loadingAsync}).then(function(){h(b)}))}(),function(t,n){var r=i.find("md-select-menu");if(!n.target)throw new Error(a.supplant(m,[n.target]));e.extend(n,{isRemoved:!1,target:e.element(n.target),parent:e.element(n.parent),selectEl:r,contentEl:i.find("md-content"),optionNodes:r[0].getElementsByTagName("md-option")})}(0,s),s.hideBackdrop=function(t,e,n){n.disableParentScroll&&!a.getClosest(n.target,"MD-DIALOG")?n.restoreScroll=a.disableScrollAround(n.element,n.parent):n.disableParentScroll=!1;n.hasBackdrop&&(n.backdrop=a.createBackdrop(t,"md-select-backdrop md-click-catcher"),f.enter(n.backdrop,p[0].body,null,{duration:0}));return function(){n.backdrop&&n.backdrop.remove(),n.disableParentScroll&&n.restoreScroll(),delete n.restoreScroll}}(t,0,s),function(t,e,n){n.parent!==e.parent()&&e.parent().attr("aria-owns",e.attr("id"));return e.parent().find("md-select-value").attr("aria-hidden","true"),n.parent.append(e),c(function(t,n){try{d(e,{removeClass:"md-leave",duration:0}).start().then(b).then(t)}catch(t){n(t)}})}(0,i,s).then(function(c){return i.attr("aria-hidden","false"),s.alreadyOpen=!0,s.cleanupInteraction=function(){if(s.isRemoved)return;var t=s.selectEl,e=t.controller("mdSelectMenu")||{};return i.addClass("md-clickable"),s.backdrop&&s.backdrop.on("click",l),t.on("keydown",c),t.on("click",d),function(){s.backdrop&&s.backdrop.off("click",l),t.off("keydown",c),t.off("click",d),i.removeClass("md-clickable"),s.isRemoved=!0};function l(t){t.preventDefault(),t.stopPropagation(),s.restoreFocus=!1,a.nextTick(r.hide,!0)}function c(e){switch(e.preventDefault(),e.stopPropagation(),e.keyCode){case v.UP_ARROW:return void h("prev");case v.DOWN_ARROW:return void h("next");case v.SPACE:case v.ENTER:var n=a.getClosest(e.target,"md-option");n&&(t.triggerHandler({type:"click",target:n}),e.preventDefault()),d(e);break;case v.TAB:case v.ESCAPE:e.stopPropagation(),e.preventDefault(),s.restoreFocus=!0,a.nextTick(r.hide,!0);break;default:if(u(e,o)){var i=t.controller("mdSelectMenu").optNodeForKeyboardSearch(e);s.focusedNode=i||s.focusedNode,i&&i.focus()}}}function h(t){var e,i=a.nodesToArray(s.optionNodes),r=i.indexOf(s.focusedNode);do{-1===r?r=0:"next"===t&&r<i.length-1?r++:"prev"===t&&r>0&&r--,(e=i[r]).hasAttribute("disabled")&&(e=n)}while(!e&&r<i.length-1&&r>0);e&&e.focus(),s.focusedNode=e}function d(n){if(!(n&&"click"==n.type&&n.currentTarget!=t[0]||function(){var t=!1;if(n&&n.currentTarget.children.length>0){var e=n.currentTarget.children[0];if(e.scrollHeight>e.clientHeight&&e.children.length>0)n.pageX-n.currentTarget.getBoundingClientRect().left>e.querySelector("md-option").offsetWidth&&(t=!0)}return t}())){var i=a.getClosest(n.target,"md-option");i&&i.hasAttribute&&!i.hasAttribute("disabled")&&(n.preventDefault(),n.stopPropagation(),e.isMultiple||(s.restoreFocus=!0,a.nextTick(function(){r.hide(e.ngModel.$viewValue)},!0)))}}}(),s.cleanupResizing=function(){var n=function(t,e,n){return function(){if(!n.isRemoved){var i=y(t,e,n),r=i.container,o=i.dropDown;r.element.css(g.toCss(r.styles)),o.element.css(g.toCss(o.styles))}}}(t,i,s),r=e.element(l);return r.on("resize",n),r.on("orientationchange",n),function(){r.off("resize",n),r.off("orientationchange",n)}}(),_(s.focusedNode),c},s.hideBackdrop);function b(){return c(function(e){if(s.isRemoved)return c.reject(!1);var n=y(t,i,s);n.container.element.css(g.toCss(n.container.styles)),n.dropDown.element.css(g.toCss(n.dropDown.styles)),h(function(){i.addClass("md-active"),n.dropDown.element.css(g.toCss({transform:""})),_(s.focusedNode),e()})})}function _(t){t&&!t.hasAttribute("disabled")&&t.focus()}},onRemove:function(t,e,n){var i=null,r=t.$on("$destroy",function(){i.end()});return(n=n||{}).cleanupInteraction(),n.cleanupResizing(),n.hideBackdrop(),!0===n.$destroy?o():function(){return(i=d(e,{addClass:"md-leave"})).start()}().then(o);function o(){r(),e.removeClass("md-active").attr("aria-hidden","true").css({display:"none",top:"",right:"",bottom:"",left:"","font-size":"","min-width":""}),e.parent().find("md-select-value").removeAttr("aria-hidden"),function(t){var e=t.selectCtrl;if(e){var n=t.selectEl.controller("mdSelectMenu");e.setLabelText(n?n.selectedLabels():""),e.triggerClose()}}(n),!n.$destroy&&n.restoreFocus&&n.target.focus()}},hasBackdrop:!0,disableParentScroll:!0};function y(n,r,o){var c,u,h=r[0],d=o.target[0].children[0],f=p[0].body,m=o.selectEl[0],g=o.contentEl[0],v=f.getBoundingClientRect(),y=d.getBoundingClientRect(),b={left:v.left+i,top:i,bottom:v.height-i,right:v.width-i-(a.floatingScrollbars()?16:0)},_=y.top-b.top,w=(y.left,y.left,y.width,b.bottom-(y.top+y.height)),S=v.width-2*i,x=m.querySelector("md-option[selected]"),C=m.getElementsByTagName("md-option"),k=m.getElementsByTagName("md-optgroup"),T=function(t,e){var n=!1;try{var i=t[0].style.display;t[0].style.display="block",n=e.scrollHeight>e.offsetHeight,t[0].style.display=i}finally{}return n}(r,g);c=(u=o.loadingAsync)&&e.isFunction(u.then)?g.firstElementChild||g:x||(k.length?k[0]:C.length?C[0]:g.firstElementChild||g),g.offsetWidth>S?g.style["max-width"]=S+"px":g.style.maxWidth=null,T&&m.classList.add("md-overflow");var M=c;"MD-OPTGROUP"===(M.tagName||"").toUpperCase()&&(c=M=C[0]||g.firstElementChild||g),o.focusedNode=M,h.style.display="block";var E,A,I,$,D,L,P=m.getBoundingClientRect(),O=(E=c)?{left:E.offsetLeft,top:E.offsetTop,width:E.offsetWidth,height:E.offsetHeight}:{left:0,top:0,width:0,height:0};if(c){var N=l.getComputedStyle(c);O.paddingLeft=parseInt(N.paddingLeft,10)||0,O.paddingRight=parseInt(N.paddingRight,10)||0}if(T){var j=g.offsetHeight/2;g.scrollTop=O.top+O.height/2-j,_<j?g.scrollTop=Math.min(O.top,g.scrollTop+j-_):w<j&&(g.scrollTop=Math.max(O.top+O.height-P.height,g.scrollTop-j+w))}A=y.left+O.left-O.paddingLeft+2,I=Math.floor(y.top+y.height/2-O.height/2-O.top+g.scrollTop)+2,$=O.left+y.width/2+"px "+(O.top+O.height/2-g.scrollTop)+"px 0px",D=Math.min(y.width+O.paddingLeft+O.paddingRight,S),L=t.getComputedStyle(d)["font-size"];var R=h.getBoundingClientRect(),B=Math.round(100*Math.min(y.width/P.width,1))/100,F=Math.round(100*Math.min(y.height/P.height,1))/100;return{container:{element:e.element(h),styles:{left:Math.floor(s(b.left,A,b.right-R.width)),top:Math.floor(s(b.top,I,b.bottom-R.height)),"min-width":D,"font-size":L}},dropDown:{element:e.element(m),styles:{transformOrigin:$,transform:o.alreadyOpen?"":a.supplant("scale({0},{1})",[B,F])}}}}}function s(t,e,n){return Math.max(t,Math.min(e,n))}}function u(t,e){var n=String.fromCharCode(t.keyCode),i=t.keyCode<=31;return n&&n.length&&!i&&!e.isMetaKey(t)&&!e.isFnLockKey(t)&&!e.hasModifierKey(t)}e.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",s).directive("mdSelectMenu",a).directive("mdOption",l).directive("mdOptgroup",function(){return{restrict:"E",compile:function(t,n){t.parent().find("md-select-header").length||function(){var i=t.find("label");i.length||(i=e.element("<label>"),t.prepend(i));i.addClass("md-container-ignore"),i.attr("aria-hidden","true"),n.label&&i.text(n.label)}()}}}).directive("mdSelectHeader",function(){return{restrict:"E"}}).provider("$mdSelect",c)}(),function(){function t(t,e){return["$mdUtil","$window",function(n,i){return{restrict:"A",multiElement:!0,link:function(r,o,s){var a=r.$on("$md-resize-enable",function(){a();var l=o[0],c=l.nodeType===i.Node.ELEMENT_NODE?i.getComputedStyle(l):{};r.$watch(s[t],function(t){if(!!t===e){n.nextTick(function(){r.$broadcast("$md-resize")});var i={cachedTransitionStyles:c};n.dom.animator.waitTransitionEnd(o,i).then(function(){r.$broadcast("$md-resize")})}})})}}}]}e.module("material.components.showHide",["material.core"]).directive("ngShow",t("ngShow",!0)).directive("ngHide",t("ngHide",!1))}(),function(){function t(t,i,r,o){var s="SideNav '{0}' is not available! Did you use md-component-id='{0}'?",a={find:function(e,r){var a=t.get(e);if(!a&&!r)return o.error(i.supplant(s,[e||""])),n;return a},waitFor:l};return function(t,n){if(e.isUndefined(t))return a;var o=!0===n,c=a.find(t,o);return!c&&o?a.waitFor(t):!c&&e.isUndefined(n)?function(t,n){var o=function(){return!1},a=function(){return r.when(i.supplant(s,[n||""]))};return e.extend({isLockedOpen:o,isOpen:o,toggle:a,open:a,close:a,onClose:e.noop,then:function(t){return l(n).then(t||e.noop)}},t)}(a,t):c};function l(e){return t.when(e).catch(o.error)}}function i(t,i,r,o,s,a,l,c,u,h,d,f,p){return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(t){return t.addClass("md-closed").attr("tabIndex","-1"),m}};function m(l,m,g,v){var y,b,_,w,S,x=null,C=null,k=h.when(!0),T=c(g.mdIsLockedOpen),M=e.element(f);function E(t){return t.keyCode===r.KEY_CODE.ESCAPE?A(t):h.when(!0)}function A(t){return t.preventDefault(),v.close()}g.mdDisableScrollTarget&&((x=d[0].querySelector(g.mdDisableScrollTarget))?x=e.element(x):u.warn(i.supplant('mdSidenav: couldn\'t find element matching selector "{selector}". Falling back to parent.',{selector:g.mdDisableScrollTarget}))),x||(x=m.parent()),g.hasOwnProperty("mdDisableBackdrop")||(b=i.createBackdrop(l,"md-sidenav-backdrop md-opaque ng-enter")),g.hasOwnProperty("mdDisableCloseEvents")&&(_=!0),m.addClass("_md"),o(m),b&&o.inherit(b,m),m.on("$destroy",function(){b&&b.remove(),v.destroy()}),l.$on("$destroy",function(){b&&b.remove()}),l.$watch(function(){return T(l.$parent,{$media:function(e){return u.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),t(e)},$mdMedia:t})},function(t,e){l.isLockedOpen=t,t===e?m.toggleClass("md-locked-open",!!t):a[t?"addClass":"removeClass"](m,"md-locked-open");b&&b.toggleClass("md-locked-open",!!t)}),l.$watch("isOpen",function(t){var r,o=i.findFocusTarget(m)||i.findFocusTarget(m,"[md-sidenav-focus]")||m,c=m.parent();_||(c[t?"on":"off"]("keydown",E),b&&b[t?"on":"off"]("click",A));r=function(t,e){var n=m[0],i=t[0].scrollTop;if(e&&i){S={top:n.style.top,bottom:n.style.bottom,height:n.style.height};var r={top:i+"px",bottom:"auto",height:t[0].clientHeight+"px"};m.css(r),b.css(r)}if(!e&&S)return function(){n.style.top=S.top,n.style.bottom=S.bottom,n.style.height=S.height,b[0].style.top=null,b[0].style.bottom=null,b[0].style.height=null,S=null}}(c,t),t&&(C=d[0].activeElement,w=s.getLastInteractionType());return function(t){t&&!y?(y=x.css("overflow"),x.css("overflow","hidden")):e.isDefined(y)&&(x.css("overflow",y),y=n)}(t),k=h.all([t&&b?a.enter(b,c):b?a.leave(b):h.when(!0),a[t?"removeClass":"addClass"](m,"md-closed")]).then(function(){l.isOpen&&(p(function(){M.triggerHandler("resize")}),o&&o.focus()),r&&r()})}),v.$toggleOpen=function(t){return l.isOpen===t?h.when(!0):(l.isOpen&&v.onCloseCb&&v.onCloseCb(),h(function(e){l.isOpen=t,i.nextTick(function(){k.then(function(t){!l.isOpen&&C&&"keyboard"===w&&(C.focus(),C=null),e(t)})})}))}}}function r(t,e,n,i,r){var o=this;o.isOpen=function(){return!!t.isOpen},o.isLockedOpen=function(){return!!t.isLockedOpen},o.onClose=function(t){return o.onCloseCb=t,o},o.open=function(){return o.$toggleOpen(!0)},o.close=function(){return o.$toggleOpen(!1)},o.toggle=function(){return o.$toggleOpen(!t.isOpen)},o.$toggleOpen=function(e){return i.when(t.isOpen=e)};var s=e.mdComponentId,a=s&&s.indexOf(r.startSymbol())>-1,l=a?r(s)(t.$parent):s;o.destroy=n.register(o,l),a&&e.$observe("mdComponentId",function(t){t&&t!==o.$$mdHandle&&(o.destroy(),o.destroy=n.register(o,t))})}t.$inject=["$mdComponentRegistry","$mdUtil","$q","$log"],i.$inject=["$mdMedia","$mdUtil","$mdConstant","$mdTheming","$mdInteraction","$animate","$compile","$parse","$log","$q","$document","$window","$$rAF"],r.$inject=["$scope","$attrs","$mdComponentRegistry","$q","$interpolate"],e.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",t).directive("mdSidenav",i).directive("mdSidenavFocus",function(){return{restrict:"A",require:"^mdSidenav",link:function(t,e,n,i){}}}).controller("$mdSidenavController",r)}(),function(){r.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse","$log","$timeout"],e.module("material.components.slider",["material.core"]).directive("mdSlider",r).directive("mdSliderContainer",function(){return{controller:function(){},compile:function(t){var i=t.find("md-slider");if(i)return i.attr("md-vertical")!==n&&t.attr("md-vertical",""),i.attr("flex")||i.attr("flex",""),function(t,n,i,r){function o(t){n.children().attr("disabled",t),n.find("input").attr("disabled",t)}n.addClass("_md");var s,a=e.noop;i.disabled?o(!0):i.ngDisabled&&(a=t.$watch(i.ngDisabled,function(t){o(t)})),t.$on("$destroy",function(){a()}),r.fitInputWidthToTextLength=function(t){var e=n[0].querySelector("md-input-container");if(e){var i=getComputedStyle(e),r=parseInt(i.minWidth),o=parseInt(i.paddingLeft)+parseInt(i.paddingRight);s=s||parseInt(i.maxWidth);var a=Math.max(s,r+o+r/2*t);e.style.maxWidth=a+"px"}}}}}});var t=10,i=4;function r(n,r,o,s,a,l,c,u,h,d){return{scope:{},require:["?ngModel","?^mdSliderContainer"],template:'<div class="md-slider-wrapper"><div class="md-slider-content"><div class="md-track-container"><div class="md-track"></div><div class="md-track md-track-fill"></div><div class="md-track-ticks"></div></div><div class="md-thumb-container"><div class="md-thumb"></div><div class="md-focus-thumb"></div><div class="md-focus-ring"></div><div class="md-sign"><span class="md-thumb-text"></span></div><div class="md-disabled-thumb"></div></div></div></div>',compile:function(t,n){var i=e.element(t[0].getElementsByClassName("md-slider-wrapper")),r=n.tabindex||0;i.attr("tabindex",r),(n.disabled||n.ngDisabled)&&i.attr("tabindex",-1);return i.attr("role","slider"),o.expect(t,"aria-label"),f}};function f(o,f,p,m){l(f);var g=m[0]||{$setViewValue:function(t){this.$viewValue=t,this.$viewChangeListeners.forEach(function(t){t()})},$parsers:[],$formatters:[],$viewChangeListeners:[]},v=m[1],y=(e.element(s.getClosest(f,"_md-slider-container",!0)),p.ngDisabled?e.bind(null,u(p.ngDisabled),o.$parent):function(){return f[0].hasAttribute("disabled")}),b=e.element(f[0].querySelector(".md-thumb")),_=e.element(f[0].querySelector(".md-thumb-text")),w=b.parent(),S=e.element(f[0].querySelector(".md-track-container")),x=e.element(f[0].querySelector(".md-track-fill")),C=e.element(f[0].querySelector(".md-track-ticks")),k=e.element(f[0].getElementsByClassName("md-slider-wrapper")),T=(e.element(f[0].getElementsByClassName("md-slider-content")),s.throttle(W,5e3)),M=e.isDefined(p.mdVertical),E=e.isDefined(p.mdDiscrete),A=e.isDefined(p.mdInvert);e.isDefined(p.min)?p.$observe("min",R):R(0),e.isDefined(p.max)?p.$observe("max",B):B(100),e.isDefined(p.step)?p.$observe("step",F):F(1),e.isDefined(p.round)?p.$observe("round",Y):Y(3);e.noop;function I(){W(),G()}p.ngDisabled&&o.$parent.$watch(p.ngDisabled,function(){f.attr("aria-disabled",!!y())}),c.register(k,"drag",{horizontal:!M}),o.mouseActive=!1,k.on("keydown",function(e){if(y())return;var n,r=a.KEY_CODE;switch(e.keyCode){case r.DOWN_ARROW:case r.LEFT_ARROW:e.preventDefault(),n=-L;break;case r.UP_ARROW:case r.RIGHT_ARROW:e.preventDefault(),n=L;break;case r.PAGE_DOWN:e.preventDefault(),n=-L*t;break;case r.PAGE_UP:e.preventDefault(),n=L*t;break;case r.HOME:e.preventDefault(),e.stopPropagation(),U($);break;case r.END:e.preventDefault(),e.stopPropagation(),U(D)}n&&(n=A?-n:n,(e.metaKey||e.ctrlKey||e.altKey)&&(n*=i),e.preventDefault(),e.stopPropagation(),U(g.$viewValue+n))}).on("mousedown",function(){(function(){if(!E||y())return;if(e.isUndefined(L))return;if(L<=0){var t="Slider step value must be greater than zero when in discrete mode";throw h.error(t),new Error(t)}var n=Math.floor((D-$)/L);O||(O=e.element("<canvas>").css("position","absolute"),C.append(O),N=O[0].getContext("2d"));var i,o=z();!o||o.height||o.width||(W(),o=H);O[0].width=o.width,O[0].height=o.height;for(var s=0;s<=n;s++){var a=r.getComputedStyle(C[0]);N.fillStyle=a.color||"black",i=Math.floor((M?o.height:o.width)*(s/n)),N.fillRect(M?0:i-1,M?i-1:0,M?o.width:2,M?2:o.height)}})(),o.mouseActive=!0,k.removeClass("md-focused"),d(function(){o.mouseActive=!1},100)}).on("focus",function(){!1===o.mouseActive&&k.addClass("md-focused")}).on("blur",function(){k.removeClass("md-focused"),f.removeClass("md-active"),function(){if(O&&N){var t=z();N.clearRect(0,0,t.width,t.height)}}()}).on("$md.pressdown",function(t){if(y())return;f.addClass("md-active"),f[0].focus(),W();var e=q(X(tt(Q(M?t.pointer.y:t.pointer.x))));o.$apply(function(){V(e),K(et(e))})}).on("$md.pressup",function(t){if(y())return;f.removeClass("md-dragging");var e=q(X(tt(Q(M?t.pointer.y:t.pointer.x))));o.$apply(function(){V(e),G()})}).on("$md.dragstart",function(t){if(y())return;J=!0,t.stopPropagation(),f.addClass("md-dragging"),Z(t)}).on("$md.drag",function(t){if(!J)return;t.stopPropagation(),Z(t)}).on("$md.dragend",function(t){if(!J)return;t.stopPropagation(),J=!1}),setTimeout(I,0);var $,D,L,P,O,N,j=n.throttle(I);function R(t){$=parseFloat(t),g.$viewValue=q(g.$modelValue,$,D),k.attr("aria-valuemin",t),I()}function B(t){D=parseFloat(t),g.$viewValue=q(g.$modelValue,$,D),k.attr("aria-valuemax",t),I()}function F(t){L=parseFloat(t)}function Y(t){P=q(parseInt(t),0,6)}e.element(r).on("resize",j),o.$on("$destroy",function(){e.element(r).off("resize",j)}),g.$render=G,g.$viewChangeListeners.push(G),g.$formatters.push(q),g.$formatters.push(X);var H={};function W(){H=S[0].getBoundingClientRect()}function z(){return T(),H}function U(t){o.$evalAsync(function(){V(t)})}function V(t){g.$setViewValue(q(X(t)))}function G(){isNaN(g.$viewValue)&&(g.$viewValue=g.$modelValue),g.$viewValue=q(g.$viewValue);var t=et(g.$viewValue);o.modelValue=g.$viewValue,k.attr("aria-valuenow",g.$viewValue),K(t),_.text(g.$viewValue)}function q(t,n,i){if(e.isNumber(t))return n=e.isNumber(n)?n:$,i=e.isNumber(i)?i:D,Math.max(n,Math.min(i,t))}function X(t){if(e.isNumber(t)){var n=Math.round((t-$)/L)*L+$;return n=Math.round(n*Math.pow(10,P))/Math.pow(10,P),v&&v.fitInputWidthToTextLength&&s.debounce(function(){v.fitInputWidthToTextLength(n.toString().length)},100)(),n}}function K(t){var e;e=t;var n=100*(t=Math.max(0,Math.min(e||0,1)))+"%",i=A?100*(1-t)+"%":n;M?w.css("bottom",n):s.bidiProperty(w,"left","right",n),x.css(M?"height":"width",i),f.toggleClass(A?"md-max":"md-min",0===t),f.toggleClass(A?"md-min":"md-max",1===t)}W();var J=!1;function Z(t){var e,n;E?(e=M?t.pointer.y:t.pointer.x,n=q(X(tt(Q(e)))),K(Q(e)),_.text(n)):function(t){o.$evalAsync(function(){V(tt(Q(t)))})}(M?t.pointer.y:t.pointer.x)}function Q(t){var e=(t-(M?H.top:H.left))/(M?H.height:H.width);return!M&&s.isRtl(p)&&(e=1-e),Math.max(0,Math.min(1,M?1-e:e))}function tt(t){return $+(A?1-t:t)*(D-$)}function et(t){var e=(t-$)/(D-$);return A?1-e:e}}}}(),function(){function t(t,e,i,r){var o=i.checkStickySupport();return function(s,a,l){var c=a.controller("mdContent");if(c)if(o)a.css({position:o,top:0,"z-index":2});else{var u=c.$element.data("$$sticky");u||(u=function(r){var o,s=r.$element,a=e.throttle(l);return function(t){var n,r,o=200;function s(){+i.now()-r>o?(n=!1,t.triggerHandler("$scrollend")):(t.triggerHandler("$scroll"),e.throttle(s))}t.on("scroll touchmove",function(){n||(n=!0,e.throttle(s),t.triggerHandler("$scrollstart")),t.triggerHandler("$scroll"),r=+i.now()})}(s),s.on("$scrollstart",a),s.on("$scroll",function t(){var e=s.prop("scrollTop");var n=e>(t.prevScrollTop||0);t.prevScrollTop=e;if(0===e)return void u(null);if(n){if(o.next&&o.next.top<=e)return void u(o.next);if(o.current&&o.next&&o.next.top-e<=o.next.height)return void d(o.current,e+(o.next.top-o.next.height-e))}if(!n){if(o.current&&o.prev&&e<o.current.top)return void u(o.prev);if(o.next&&o.current&&e>=o.next.top-o.current.height)return void d(o.current,e+(o.next.top-e-o.current.height))}o.current&&d(o.current,e)}),o={prev:null,current:null,next:null,items:[],add:function(t,e){e.addClass("md-sticky-clone");var n={element:t,clone:e};return o.items.push(n),i.nextTick(function(){s.prepend(n.clone)}),a(),function(){o.items.forEach(function(e,n){e.element[0]===t[0]&&(o.items.splice(n,1),e.clone.remove())}),a()}},refreshElements:l};function l(){var t;o.items.forEach(c),o.items=o.items.sort(function(t,e){return t.top<e.top?-1:1});for(var e=s.prop("scrollTop"),n=o.items.length-1;n>=0;n--)if(e>o.items[n].top){t=o.items[n];break}u(t)}function c(t){var e=t.element[0];for(t.top=0,t.left=0,t.right=0;e&&e!==s[0];)t.top+=e.offsetTop,t.left+=e.offsetLeft,e.offsetParent&&(t.right+=e.offsetParent.offsetWidth-e.offsetWidth-e.offsetLeft),e=e.offsetParent;t.height=t.element.prop("offsetHeight");var r=i.floatingScrollbars()?"0":n;i.bidi(t.clone,"margin-left",t.left,r),i.bidi(t.clone,"margin-right",r,t.right)}function u(t){if(o.current!==t){o.current&&(d(o.current,null),h(o.current,null)),t&&h(t,"active"),o.current=t;var e=o.items.indexOf(t);o.next=o.items[e+1],o.prev=o.items[e-1],h(o.next,"next"),h(o.prev,"prev")}}function h(t,e){t&&t.state!==e&&(t.state&&(t.clone.attr("sticky-prev-state",t.state),t.element.attr("sticky-prev-state",t.state)),t.clone.attr("sticky-state",e),t.element.attr("sticky-state",e),t.state=e)}function d(e,r){e&&(null===r||r===n?e.translateY&&(e.translateY=null,e.clone.css(t.CSS.TRANSFORM,"")):(e.translateY=r,i.bidi(e.clone,t.CSS.TRANSFORM,"translate3d("+e.left+"px,"+r+"px,0)","translateY("+r+"px)")))}}(c),c.$element.data("$$sticky",u));var h=l||r(a.clone())(s),d=u.add(a,h);s.$on("$destroy",d)}}}t.$inject=["$mdConstant","$$rAF","$mdUtil","$compile"],e.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",t)}(),function(){function t(t,n,i,r,o){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="md-subheader _md">  <div class="md-subheader-inner">    <div class="md-subheader-content"></div>  </div></div>',link:function(s,a,l,c,u){i(a),a.addClass("_md"),r.prefixer().removeAttribute(a,"ng-repeat");var h=a[0].outerHTML;function d(t){return e.element(t[0].querySelector(".md-subheader-content"))}l.$set("role","heading"),o.expect(a,"aria-level","2"),u(s,function(t){d(a).append(t)}),a.hasClass("md-no-sticky")||u(s,function(e){var i=n('<div class="md-subheader-wrapper" aria-hidden="true">'+h+"</div>")(s);r.nextTick(function(){d(i).append(e)}),t(s,a,i)})}}}t.$inject=["$mdSticky","$compile","$mdTheming","$mdUtil","$mdAria"],e.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",t)}(),function(){function t(t){i.$inject=["$parse"];var e="md"+t,n="$md."+t.toLowerCase();return i;function i(t){return{restrict:"A",link:function(i,r,o){var s=t(o[e]);r.on(n,function(t){var e=t.currentTarget;i.$applyAsync(function(){s(i,{$event:t,$target:{current:e}})})})}}}}e.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",t("SwipeLeft")).directive("mdSwipeRight",t("SwipeRight")).directive("mdSwipeUp",t("SwipeUp")).directive("mdSwipeDown",t("SwipeDown"))}(),function(){function t(t,n,i,r,o,s,a){var l=t[0];return{restrict:"E",priority:i.BEFORE_NG_ARIA,transclude:!0,template:'<div class="md-container"><div class="md-bar"></div><div class="md-thumb-container"><div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="md-label"></div>',require:["^?mdInputContainer","?ngModel","?^form"],compile:function(t,c){var u=l.compile(t,c).post;return t.addClass("md-dragging"),function(t,l,c,h){h[0];var d=h[1]||n.fakeNgModel(),f=(h[2],null);null!=c.disabled?f=function(){return!0}:c.ngDisabled&&(f=r(c.ngDisabled));var p,m=e.element(l[0].querySelector(".md-thumb-container")),g=e.element(l[0].querySelector(".md-container")),v=e.element(l[0].querySelector(".md-label"));o(function(){l.removeClass("md-dragging")}),u(t,l,c,h),f&&t.$watch(f,function(t){l.attr("tabindex",t?-1:0)}),c.$observe("mdInvert",function(t){var e=n.parseAttributeBoolean(t);e?l.prepend(v):l.prepend(g),l.toggleClass("md-inverted",e)}),s.register(g,"drag"),g.on("$md.dragstart",function(e){if(f&&f(t))return;e.stopPropagation(),l.addClass("md-dragging"),p={width:m.prop("offsetWidth")}}).on("$md.drag",function(t){if(!p)return;t.stopPropagation(),t.srcEvent&&t.srcEvent.preventDefault();var e=t.pointer.distanceX/p.width,n=d.$viewValue?1+e:e;n=Math.max(0,Math.min(1,n)),m.css(i.CSS.TRANSFORM,"translate3d("+100*n+"%,0,0)"),p.translate=n}).on("$md.dragend",function(e){if(!p)return;e.stopPropagation(),l.removeClass("md-dragging"),m.css(i.CSS.TRANSFORM,""),(d.$viewValue?p.translate<.5:p.translate>.5)&&(n=!d.$viewValue,t.$apply(function(){d.$setViewValue(n),d.$render()}));var n;p=null,t.skipToggle=!0,a(function(){t.skipToggle=!1},1)})}}}}t.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture","$timeout"],e.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",t)}(),e.module("material.components.tabs",["material.core","material.components.icon"]),e.module("material.components.tabs").service("MdTabsPaginationService",function(){return{decreasePageOffset:function(e,n){var i,r,o=e.canvas,s=t(e);for(i=0;i<s.length;i++)if(s[i]>=n){r=s[i];break}return Math.max(0,r-o.clientWidth)},increasePageOffset:function(n,i){var r,o,s=n.canvas,a=e(n)-s.clientWidth,l=t(n);for(r=0;l.length,l[r]<=i+s.clientWidth;r++)o=l[r];return Math.min(a,o)},getTabOffsets:t,getTotalTabsWidth:e};function t(t){var e,n,i=0,r=[];for(e=0;e<t.tabs.length;e++)n=t.tabs[e],r.push(i),i+=n.offsetWidth;return r}function e(t){var e,n=0;for(e=0;e<t.tabs.length;e++)n+=t.tabs[e].offsetWidth;return n}}),e.module("material.components.tabs").directive("mdTab",function(){return{require:"^?mdTabs",terminal:!0,compile:function(i,r){var o=n(i,"md-tab-label"),s=n(i,"md-tab-body");if(0===o.length&&(o=e.element("<md-tab-label></md-tab-label>"),r.label?o.text(r.label):o.append(i.contents()),0===s.length)){var a=i.contents().detach();(s=e.element("<md-tab-body></md-tab-body>")).append(a)}return i.append(o),s.html()&&i.append(s),t},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect",tabClass:"@mdTabClass"}};function t(t,i,r,o){if(o){var s=o.getTabElementIndex(i),a=n(i,"md-tab-body").remove(),l=n(i,"md-tab-label").remove(),c=o.insertTab({scope:t,parent:t.$parent,index:s,element:i,template:a.html(),label:l.html()},s);t.select=t.select||e.noop,t.deselect=t.deselect||e.noop,t.$watch("active",function(t){t&&o.select(c.getIndex(),!0)}),t.$watch("disabled",function(){o.refreshIndex()}),t.$watch(function(){return o.getTabElementIndex(i)},function(t){c.index=t,o.updateTabOrder()}),t.$on("$destroy",function(){o.removeTab(c)})}}function n(t,n){for(var i=t[0].children,r=0,o=i.length;r<o;r++){var s=i[r];if(s.tagName===n.toUpperCase())return e.element(s)}return e.element()}}),e.module("material.components.tabs").directive("mdTabItem",function(){return{require:"^?mdTabs",link:function(t,e,n,i){i&&i.attachRipple(t,e)}}}),e.module("material.components.tabs").directive("mdTabLabel",function(){return{terminal:!0}}),function(){function t(t){return{restrict:"A",compile:function(e,n){var i=t(n.mdTabScroll,null,!0);return function(t,e){e.on("wheel",function(e){t.$apply(function(){i(t,{$event:e})})})}}}}t.$inject=["$parse"],e.module("material.components.tabs").directive("mdTabScroll",t)}(),function(){function t(t,i,r,o,s,a,l,c,u,h,d,f,p){var m=this,g=!1,v=[],y=!1,b=!1;function _(t,e){var n=c.$normalize("md-"+t);function i(e){m[t]="false"!==e}e&&j(t,e),c.hasOwnProperty(n)&&i(c[n]),c.$observe(n,i)}function w(){y=!0,e.element(r).off("resize",$)}function S(){var t=P();e.element(t.wrapper).toggleClass("md-stretch-tabs",function(){switch(m.stretchTabs){case"always":return!0;case"never":return!1;default:return!m.shouldPaginate&&r.matchMedia("(max-width: 600px)").matches}}()),V()}function x(){m.shouldCenterTabs=O()}function C(t,n){if(t!==n){var i=P();e.forEach(i.tabs,function(e){e.style.maxWidth=t+"px"}),e.forEach(i.dummies,function(e){e.style.maxWidth=t+"px"}),a.nextTick(m.updateInkBarStyles)}}function k(t,e){t!==e&&(m.maxTabWidth=F(),m.shouldCenterTabs=O(),a.nextTick(function(){m.maxTabWidth=F(),W(m.selectedIndex)}))}function T(t){i[t?"removeClass":"addClass"]("md-no-tab-content")}function M(n){var i=(m.shouldCenterTabs||q()?"":"-")+n+"px";i=i.replace("--",""),e.element(P().paging).css(o.CSS.TRANSFORM,"translate("+i+", 0)"),t.$broadcast("$mdTabsPaginationChanged")}function E(t,e){t!==e&&P().tabs[t]&&(W(),H())}function A(e,n){e!==n&&(m.selectedIndex=N(e),m.lastSelectedIndex=n,m.updateInkBarStyles(),U(),W(e),t.$broadcast("$mdTabsChanged"),m.tabs[n]&&m.tabs[n].scope.deselect(),m.tabs[e]&&m.tabs[e].scope.select())}function I(t,e){g||(m.focusIndex=m.selectedIndex=t),e&&m.noSelectClick||a.nextTick(function(){m.tabs[t].element.triggerHandler("click")},!1)}function $(){m.lastSelectedIndex=m.selectedIndex,m.offsetLeft=G(m.offsetLeft),a.nextTick(function(){m.updateInkBarStyles(),R()})}function D(t){e.element(P().inkBar).toggleClass("ng-hide",t)}function L(t){i.toggleClass("md-dynamic-height",t)}function P(){var t={},e=i[0];return t.wrapper=e.querySelector("md-tabs-wrapper"),t.canvas=t.wrapper.querySelector("md-tabs-canvas"),t.paging=t.canvas.querySelector("md-pagination-wrapper"),t.inkBar=t.paging.querySelector("md-ink-bar"),t.nextButton=e.querySelector("md-next-button"),t.prevButton=e.querySelector("md-prev-button"),t.contents=e.querySelectorAll("md-tabs-content-wrapper > md-tab-content"),t.tabs=t.paging.querySelectorAll("md-tab-item"),t.dummies=t.canvas.querySelectorAll("md-dummy-tab"),t}function O(){return m.centerTabs&&!m.shouldPaginate}function N(t){if(-1===t)return-1;var e,n,i=Math.max(m.tabs.length-t,t);for(e=0;e<=i;e++){if((n=m.tabs[t+e])&&!0!==n.scope.disabled)return n.getIndex();if((n=m.tabs[t-e])&&!0!==n.scope.disabled)return n.getIndex()}return t}function j(t,e,n){Object.defineProperty(m,t,{get:function(){return n},set:function(t){var i=n;n=t,e&&e(t,i)}})}function R(){m.maxTabWidth=F(),m.shouldPaginate=function(){var t;if(m.noPagination||!b)return!1;var r=i.prop("clientWidth");return e.forEach(P().tabs,function(t){r-=t.offsetWidth}),t=r<0,a.msie&&(P().paging.style.width=t?"999999px":n),t}()}function B(t){var n=0;return e.forEach(t,function(t){n+=Math.max(t.offsetWidth,t.getBoundingClientRect().width)}),Math.ceil(n)}function F(){var t=P().canvas.clientWidth;return Math.max(0,Math.min(t-1,264))}function Y(t,e){var n,i=e?"focusIndex":"selectedIndex",r=m[i];for(n=r+t;m.tabs[n]&&m.tabs[n].scope.disabled;n+=t);n=(r+t+m.tabs.length)%m.tabs.length,m.tabs[n]&&(m[i]=n)}function H(){m.styleTabItemFocus="keyboard"===d.getLastInteractionType();var t=P().tabs[m.focusIndex];t&&t.focus()}function W(t){var n=P();if(e.isNumber(t)||(t=m.focusIndex),n.tabs[t]&&!m.shouldCenterTabs){var i=n.tabs[t],r=i.offsetLeft,o=i.offsetWidth+r;if(0!==t)if(q()){var s=B(Array.prototype.slice.call(n.tabs,0,t)),a=B(Array.prototype.slice.call(n.tabs,0,t+1));m.offsetLeft=Math.min(m.offsetLeft,G(s)),m.offsetLeft=Math.max(m.offsetLeft,G(a-n.canvas.clientWidth))}else m.offsetLeft=Math.max(m.offsetLeft,G(o-n.canvas.clientWidth+32)),m.offsetLeft=Math.min(m.offsetLeft,G(r));else m.offsetLeft=0}}function z(){m.selectedIndex=N(m.selectedIndex),m.focusIndex=N(m.focusIndex)}function U(){if(!m.dynamicHeight)return i.css("height","");if(!m.tabs.length)return v.push(U);var t=P(),e=t.contents[m.selectedIndex],r=e?e.offsetHeight:0,o=t.wrapper.offsetHeight,s=r+o,c=i.prop("clientHeight");if(c!==s){"bottom"===i.attr("md-align-tabs")&&(c-=o,s-=o,i.attr("md-border-bottom")!==n&&++c),g=!0;var u={height:c+"px"},h={height:s+"px"};i.css(u),l(i,{from:u,to:h,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){i.css({transition:"none",height:""}),a.nextTick(function(){i.css("transition","")}),g=!1})}}function V(n,r){if(!m.noInkBar){var o=P();if(o.tabs[m.selectedIndex])if(m.tabs.length)if(i.prop("offsetParent")){var s=m.selectedIndex,l=o.paging.offsetWidth,c=o.tabs[s],u=c.offsetLeft,h=l-u-c.offsetWidth;if(m.shouldCenterTabs){var d=B(o.tabs);l>d&&n!==l&&r!==d&&f(V,0,!0,l,d)}!function(){var t=P(),n=m.selectedIndex,i=m.lastSelectedIndex,r=e.element(t.inkBar);if(!e.isNumber(i))return;r.toggleClass("md-left",n<i).toggleClass("md-right",n>i)}(),e.element(o.inkBar).css({left:u+"px",right:h+"px"})}else(function e(){e.watcher||(e.watcher=t.$watch(function(){a.nextTick(function(){e.watcher&&i.prop("offsetParent")&&(e.watcher(),e.watcher=null,$())},!1)}))})();else v.push(m.updateInkBarStyles);else e.element(o.inkBar).css({left:"auto",right:"auto"})}}function G(t){var e=P();if(!e.tabs.length||!m.shouldPaginate)return 0;var n=e.tabs[e.tabs.length-1],i=n.offsetLeft+n.offsetWidth;return q()?(t=Math.min(e.paging.offsetWidth-e.canvas.clientWidth,t),t=Math.max(0,t)):(t=Math.max(0,t),t=Math.min(i-e.canvas.clientWidth,t)),t}function q(){return a.isRtl(c)}m.$onInit=function(){(function(t,e){var n=c.$normalize("md-"+t);e&&j(t,e);c.$observe(n,function(e){m[t]=e})})("stretchTabs",S),j("focusIndex",E,m.selectedIndex||0),j("offsetLeft",M,0),j("hasContent",T,!1),j("maxTabWidth",C,F()),j("shouldPaginate",k,!1),_("noInkBar",D),_("dynamicHeight",L),_("noPagination"),_("swipeContent"),_("noDisconnect"),_("autoselect"),_("noSelectClick"),_("centerTabs",x),_("enableDisconnect"),m.scope=t,m.parent=t.$parent,m.tabs=[],m.lastSelectedIndex=null,m.hasFocus=!1,m.styleTabItemFocus=!1,m.shouldCenterTabs=O(),m.tabContentPrefix="tab-content-",m.navigationHint="Use the left and right arrow keys to navigate between tabs",m.selectedIndex=m.selectedIndex||0,n=c.$mdTabsTemplate,o=e.element(i[0].querySelector("md-tab-data")),o.html(n),u(o.contents())(m.parent),delete c.$mdTabsTemplate,t.$watch("$mdTabsCtrl.selectedIndex",A),e.element(r).on("resize",$),t.$on("$destroy",w),h(i),a.nextTick(function(){U(),W(),V(),m.tabs[m.selectedIndex]&&m.tabs[m.selectedIndex].scope.select(),b=!0,R()});var n,o},m.updatePagination=a.debounce(R,100),m.redirectFocus=H,m.attachRipple=function(t,n){var i=P(),r={colorElement:e.element(i.inkBar)};s.attach(t,n,r)},m.insertTab=function(t,n){var r=b,o={getIndex:function(){return m.tabs.indexOf(s)},isActive:function(){return this.getIndex()===m.selectedIndex},isLeft:function(){return this.getIndex()<m.selectedIndex},isRight:function(){return this.getIndex()>m.selectedIndex},shouldRender:function(){return!m.noDisconnect||this.isActive()},hasFocus:function(){return m.styleTabItemFocus&&m.hasFocus&&this.getIndex()===m.focusIndex},id:a.nextUid(),hasContent:!(!t.template||!t.template.trim())},s=e.extend(o,t);e.isDefined(n)?m.tabs.splice(n,0,s):m.tabs.push(s);return function(){v.forEach(function(t){a.nextTick(t)}),v=[]}(),function(){var t,e=!1;for(t=0;t<m.tabs.length;t++)if(m.tabs[t].hasContent){e=!0;break}m.hasContent=e}(),a.nextTick(function(){R(),function(t){if(t.hasContent){var n=i[0].querySelectorAll('[md-tab-id="'+t.id+'"]');e.element(n).attr("aria-controls",m.tabContentPrefix+t.id)}}(s),r&&m.autoselect&&a.nextTick(function(){a.nextTick(function(){I(m.tabs.indexOf(s))})})}),s},m.removeTab=function(t){if(y)return;var e=m.selectedIndex,n=m.tabs.splice(t.getIndex(),1)[0];z(),m.selectedIndex===e&&(n.scope.deselect(),m.tabs[m.selectedIndex]&&m.tabs[m.selectedIndex].scope.select());a.nextTick(function(){R(),m.offsetLeft=G(m.offsetLeft)})},m.select=I,m.scroll=function(t){if(!m.shouldPaginate)return;t.preventDefault(),t.deltaY?m.offsetLeft=G(m.offsetLeft+t.deltaY):t.deltaX&&(m.offsetLeft=G(m.offsetLeft+t.deltaX))},m.nextPage=function(){if(!m.canPageForward())return;var t=p.increasePageOffset(P(),m.offsetLeft);m.offsetLeft=G(t)},m.previousPage=function(){if(!m.canPageBack())return;var t=p.decreasePageOffset(P(),m.offsetLeft);m.offsetLeft=G(t)},m.keydown=function(t){switch(t.keyCode){case o.KEY_CODE.LEFT_ARROW:t.preventDefault(),Y(-1,!0);break;case o.KEY_CODE.RIGHT_ARROW:t.preventDefault(),Y(1,!0);break;case o.KEY_CODE.SPACE:case o.KEY_CODE.ENTER:t.preventDefault(),g||I(m.focusIndex);break;case o.KEY_CODE.TAB:m.focusIndex!==m.selectedIndex&&(m.focusIndex=m.selectedIndex)}},m.canPageForward=function(){var t=P(),e=t.tabs[t.tabs.length-1];if(q())return m.offsetLeft<t.paging.offsetWidth-t.canvas.offsetWidth;return e&&e.offsetLeft+e.offsetWidth>t.canvas.clientWidth+m.offsetLeft},m.canPageBack=function(){return m.offsetLeft>0},m.refreshIndex=z,m.incrementIndex=Y,m.getTabElementIndex=function(t){var e=i[0].getElementsByTagName("md-tab");return Array.prototype.indexOf.call(e,t[0])},m.updateInkBarStyles=a.debounce(V,100),m.updateTabOrder=a.debounce(function(){var t=m.tabs[m.selectedIndex],e=m.tabs[m.focusIndex];m.tabs=m.tabs.sort(function(t,e){return t.index-e.index}),m.selectedIndex=m.tabs.indexOf(t),m.focusIndex=m.tabs.indexOf(e)},100),m.getFocusedTabId=function(){var t=m.tabs[m.focusIndex];if(!t||!t.id)return null;return"tab-item-"+t.id},1===e.version.major&&e.version.minor<=4&&this.$onInit()}t.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming","$mdInteraction","$timeout","MdTabsPaginationService"],e.module("material.components.tabs").controller("MdTabsController",t)}(),function(){function t(t){return{scope:{navigationHint:"@?mdNavigationHint",selectedIndex:"=?mdSelected"},template:function(e,n){return n.$mdTabsTemplate=e.html(),'<md-tabs-wrapper> <md-tab-data></md-tab-data> <md-prev-button tabindex="-1" role="button" aria-label="Previous Page" aria-disabled="{{!$mdTabsCtrl.canPageBack()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.previousPage()"> <md-icon md-svg-src="'+t.mdTabsArrow+'"></md-icon> </md-prev-button> <md-next-button tabindex="-1" role="button" aria-label="Next Page" aria-disabled="{{!$mdTabsCtrl.canPageForward()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.nextPage()"> <md-icon md-svg-src="'+t.mdTabsArrow+'"></md-icon> </md-next-button> <md-tabs-canvas tabindex="{{ $mdTabsCtrl.hasFocus ? -1 : 0 }}" ng-focus="$mdTabsCtrl.redirectFocus()" ng-class="{ \'md-paginated\': $mdTabsCtrl.shouldPaginate, \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" ng-keydown="$mdTabsCtrl.keydown($event)"> <md-pagination-wrapper ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" md-tab-scroll="$mdTabsCtrl.scroll($event)" role="tablist" aria-label="{{::$mdTabsCtrl.navigationHint}}"><md-tab-item tabindex="{{ tab.isActive() ? 0 : -1 }}" class="md-tab {{::tab.scope.tabClass}}" ng-repeat="tab in $mdTabsCtrl.tabs" role="tab" id="tab-item-{{::tab.id}}" md-tab-id="{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-click="$mdTabsCtrl.select(tab.getIndex())" ng-focus="$mdTabsCtrl.hasFocus = true" ng-blur="$mdTabsCtrl.hasFocus = false" ng-class="{ \'md-active\':    tab.isActive(), \'md-focused\':   tab.hasFocus(), \'md-disabled\':  tab.scope.disabled }" ng-disabled="tab.scope.disabled" md-swipe-left="$mdTabsCtrl.nextPage()" md-swipe-right="$mdTabsCtrl.previousPage()" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-tab-item> <md-ink-bar></md-ink-bar> </md-pagination-wrapper> <md-tabs-dummy-wrapper aria-hidden="true" class="md-visually-hidden md-dummy-wrapper"> <md-dummy-tab class="md-tab" tabindex="-1" ng-focus="$mdTabsCtrl.hasFocus = true" ng-blur="$mdTabsCtrl.hasFocus = false" ng-repeat="tab in $mdTabsCtrl.tabs" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-dummy-tab> </md-tabs-dummy-wrapper> </md-tabs-canvas> </md-tabs-wrapper> <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent && $mdTabsCtrl.selectedIndex >= 0" class="_md"> <md-tab-content id="{{:: $mdTabsCtrl.tabContentPrefix + tab.id}}" class="_md" role="tabpanel" aria-labelledby="tab-item-{{::tab.id}}" md-swipe-left="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(1)" md-swipe-right="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(-1)" ng-if="tab.hasContent" ng-repeat="(index, tab) in $mdTabsCtrl.tabs" ng-class="{ \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null, \'md-active\':        tab.isActive(), \'md-left\':          tab.isLeft(), \'md-right\':         tab.isRight(), \'md-no-scroll\':     $mdTabsCtrl.dynamicHeight }"> <div md-tabs-template="::tab.template" md-connected-if="tab.isActive()" md-scope="::tab.parent" ng-if="$mdTabsCtrl.enableDisconnect || tab.shouldRender()"></div> </md-tab-content> </md-tabs-content-wrapper>'},controller:"MdTabsController",controllerAs:"$mdTabsCtrl",bindToController:!0}}t.$inject=["$$mdSvgRegistry"],e.module("material.components.tabs").directive("mdTabs",t)}(),function(){function t(t,e){return{require:"^?mdTabs",link:function(n,i,r,o){if(o){var s,a,l=function(){o.updatePagination(),o.updateInkBarStyles()};if("MutationObserver"in e){(s=new MutationObserver(l)).observe(i[0],{childList:!0,subtree:!0,characterData:!0}),a=s.disconnect.bind(s)}else{var c=t.debounce(l,15,null,!1);i.on("DOMSubtreeModified",c),a=i.off.bind(i,"DOMSubtreeModified",c)}n.$on("$destroy",function(){a()})}}}}t.$inject=["$mdUtil","$window"],e.module("material.components.tabs").directive("mdTabsDummyWrapper",t)}(),function(){function t(t,e){return{restrict:"A",link:function(n,i,r,o){if(!o)return;var s=o.enableDisconnect?n.compileScope.$new():n.compileScope;return i.html(n.template),t(i.contents())(s),e.nextTick(function(){n.$watch("connected",function(t){!1===t?o.enableDisconnect&&e.disconnectScope(s):a()}),n.$on("$destroy",a)});function a(){o.enableDisconnect&&e.reconnectScope(s)}},scope:{template:"=mdTabsTemplate",connected:"=?mdConnectedIf",compileScope:"=mdScope"},require:"^?mdTabs"}}t.$inject=["$compile","$mdUtil"],e.module("material.components.tabs").directive("mdTabsTemplate",t)}(),function(){function t(t){return{restrict:"E",link:function(e,n){n.addClass("_md"),e.$on("$destroy",function(){t.destroy()})}}}function i(t){s.$inject=["$mdToast","$scope","$log"],a.$inject=["$animate","$mdToast","$mdUtil","$mdMedia","$document"];var i,r="ok";function o(t){i=t}return t("$mdToast").setDefaults({methods:["position","hideDelay","capsule","parent","position","toastClass"],options:a}).addPreset("simple",{argOption:"textContent",methods:["textContent","content","action","actionKey","actionHint","highlightAction","highlightClass","theme","parent","dismissHint"],options:["$mdToast","$mdTheming",function(t,e){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">  <div class="md-toast-content" aria-live="polite" aria-relevant="all">    <span class="md-toast-text">      {{ toast.content }}    </span>    <span class="md-visually-hidden">{{ toast.dismissHint }}</span>    <span class="md-visually-hidden" ng-if="toast.action && toast.actionKey">      {{ toast.actionHint }}    </span>    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()"                ng-class="highlightClasses">      {{ toast.action }}    </md-button>  </div></md-toast>',controller:s,theme:e.defaultTheme(),controllerAs:"toast",bindToController:!0}}]}).addMethod("updateTextContent",o).addMethod("updateContent",o);function s(t,e,n){this.$onInit=function(){var o=this;o.highlightAction&&(e.highlightClasses=["md-highlight",o.highlightClass]),o.action&&!o.actionKey&&n.warn("Toasts with actions should define an actionKey for accessibility.","Details: https://material.angularjs.org/latest/api/service/$mdToast#mdtoast-simple"),o.actionKey&&!o.actionHint&&(o.actionHint='Press Control-"'+o.actionKey+'" to '),o.dismissHint||(o.dismissHint="Press Escape to dismiss."),e.$watch(function(){return i},function(){o.content=i}),this.resolve=function(){t.hide(r)}}}function a(t,o,s,a,l){var c="$md.swipeleft $md.swiperight $md.swipeup $md.swipedown";return{onShow:function(e,r,l){i=l.textContent||l.content;var d=!a("gt-sm");r=s.extractElementByName(r,"md-toast",!0),l.element=r,l.onSwipe=function(t,e){var n=t.type.replace("$md.",""),i=n.replace("swipe","");"down"===i&&-1!==l.position.indexOf("top")&&!d||"up"===i&&(-1!==l.position.indexOf("bottom")||d)||("left"!==i&&"right"!==i||!d)&&(r.addClass("md-"+n),s.nextTick(o.cancel))},l.openClass=u(l.position),r.addClass(l.toastClass),l.parent.addClass(l.openClass),s.hasComputedStyle(l.parent,"position","static")&&l.parent.css("position","relative");h(e.toast&&e.toast.actionKey?e.toast.actionKey:n),r.on(c,l.onSwipe),r.addClass(d?"md-bottom":l.position.split(" ").map(function(t){return"md-"+t}).join(" ")),l.parent&&l.parent.addClass("md-toast-animating");return t.enter(r,l.parent).then(function(){l.parent&&l.parent.removeClass("md-toast-animating")})},onRemove:function(e,n,i){e.toast&&e.toast.actionKey&&l.off("keydown");n.off(c,i.onSwipe),i.parent&&i.parent.addClass("md-toast-animating");i.openClass&&i.parent.removeClass(i.openClass);return(!0===i.$destroy?n.remove():t.leave(n)).then(function(){i.parent&&i.parent.removeClass("md-toast-animating"),s.hasComputedStyle(i.parent,"position","static")&&i.parent.css("position","")})},toastClass:"",position:"bottom left",themable:!0,hideDelay:3e3,autoWrap:!0,transformTemplate:function(t,n){if(n.autoWrap&&t&&!/md-toast-content/g.test(t)){var i=document.createElement("md-template");i.innerHTML=t;for(var r=0;r<i.children.length;r++)if("MD-TOAST"===i.children[r].nodeName){var o=e.element('<div class="md-toast-content">');o.append(e.element(i.children[r].childNodes)),i.children[r].appendChild(o[0])}return i.innerHTML}return t||""}};function u(t){return a("gt-xs")?"md-toast-open-"+(t.indexOf("top")>-1?"top":"bottom"):"md-toast-open-bottom"}function h(t){l.on("keydown",function(e){"Escape"===e.key&&o.hide(!1),t&&e.key===t&&e.ctrlKey&&o.hide(r)})}}}t.$inject=["$mdToast"],i.$inject=["$$interimElementProvider"],e.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",t).provider("$mdToast",i)}(),function(){function t(t,n,i,r,o){var s=e.bind(null,i.supplant,"translate3d(0,{0}px,0)");return{template:"",restrict:"E",link:function(a,l,c){l.addClass("_md"),r(l),i.nextTick(function(){l.addClass("_md-toolbar-transitions")},!1),e.isDefined(c.mdScrollShrink)&&function(){var r,u,h=e.noop,d=0,f=0,p=c.mdShrinkSpeedFactor||.5,m=t.throttle(y),g=i.debounce(_,5e3);a.$on("$mdContentLoaded",v),c.$observe("mdScrollShrink",function(t){var e=l.parent().find("md-content");!u&&e.length&&v(null,e);!1===(t=a.$eval(t))?h():h=b()}),c.ngShow&&a.$watch(c.ngShow,_);c.ngHide&&a.$watch(c.ngHide,_);function v(t,e){e&&l.parent()[0]===e.parent()[0]&&(u&&u.off("scroll",m),u=e,h=b())}function y(t){var e=t?t.target.scrollTop:f;g(),d=Math.min(r/p,Math.max(0,d+e-f)),l.css(n.CSS.TRANSFORM,s([-d*p])),u.css(n.CSS.TRANSFORM,s([(r-d)*p])),f=e,i.nextTick(function(){var t=l.hasClass("md-whiteframe-z1");t&&!d?o.removeClass(l,"md-whiteframe-z1"):!t&&d&&o.addClass(l,"md-whiteframe-z1")})}function b(){return u?(u.on("scroll",m),u.attr("scroll-shrink","true"),i.nextTick(_,!1),function(){u.off("scroll",m),u.attr("scroll-shrink","false"),_()}):e.noop}function _(){var t=-(r=l.prop("offsetHeight"))*p+"px";u.css({"margin-top":t,"margin-bottom":t}),y()}a.$on("$destroy",h)}()}}}t.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate"],e.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",t)}(),function(){function n(t,n,i,r,o,s,a,l){var c="focus touchstart mouseenter",u="blur touchcancel mouseleave",h=100,d=0,f="bottom",p={top:{x:a.xPosition.CENTER,y:a.yPosition.ABOVE},right:{x:a.xPosition.OFFSET_END,y:a.yPosition.CENTER},bottom:{x:a.xPosition.CENTER,y:a.yPosition.BELOW},left:{x:a.xPosition.OFFSET_START,y:a.yPosition.CENTER}};return{restrict:"E",priority:210,scope:{mdZIndex:"=?mdZIndex",mdDelay:"=?mdDelay",mdVisible:"=?mdVisible",mdAutohide:"=?mdAutohide",mdDirection:"@?mdDirection"},link:function(m,g,v){var y,b,_,w,S,x="md-tooltip-"+s.nextUid(),C=s.getParentWithPointerEvents(g),k=i.throttle(I),T=!1,M=null;function E(){m.mdZIndex=m.mdZIndex||h,m.mdDelay=m.mdDelay||d,p[m.mdDirection]||(m.mdDirection=f)}function A(t){var e=t||o(g.text().trim())(m.$parent);(!C.attr("aria-label")&&!C.attr("aria-labelledby")||C.attr("md-labeled-by-tooltip"))&&(C.attr("aria-label",e),C.attr("md-labeled-by-tooltip")||C.attr("md-labeled-by-tooltip",x))}function I(){E(),w&&w.panelEl&&w.panelEl.removeClass(y),y="md-origin-"+m.mdDirection,b=p[m.mdDirection],_=a.newPanelPosition().relativeTo(C).addPanelPosition(b.x,b.y),w&&w.panelEl&&(w.panelEl.addClass(y),w.updatePosition(_))}function $(e){$.queued&&$.value===!!e||!$.queued&&m.mdVisible===!!e||($.value=!!e,$.queued||(e?($.queued=!0,S=t(function(){m.mdVisible=$.value,$.queued=!1,S=null,m.visibleWatcher||D(m.mdVisible)},m.mdDelay)):s.nextTick(function(){m.mdVisible=!1,m.visibleWatcher||D(!1)})))}function D(t){t?function(){if(!g[0].textContent.trim())throw new Error("Text for the tooltip has not been provided. Please include text within the mdTooltip element.");if(!w){var t=e.element(document.body),n=a.newPanelAnimation().openFrom(C).closeTo(C).withAnimation({open:"md-show",close:"md-hide"}),i={id:x,attachTo:t,contentElement:g,propagateContainerEvents:!0,panelClass:"md-tooltip",animation:n,position:_,zIndex:m.mdZIndex,focusOnOpen:!1,onDomAdded:function(){w.panelEl.addClass(y)}};w=a.create(i)}w.open().then(function(){w.panelEl.attr("role","tooltip")})}():w&&w.close()}E(),A(),g.detach(),I(),function(){if(C[0]&&"MutationObserver"in n){var e=new MutationObserver(function(t){(function(t){return t.some(function(t){return"disabled"===t.attributeName&&C[0].disabled}),!1})(t)&&s.nextTick(function(){$(!1)})});e.observe(C[0],{attributes:!0})}function i(){$(!1)}function o(){M=document.activeElement===C[0]}function a(t){"focus"===t.type&&M?M=!1:m.mdVisible||(C.on(u,h),$(!0),"touchstart"===t.type&&C.one("touchend",function(){s.nextTick(function(){r.one("touchend",h)},!1)}))}function h(){((m.hasOwnProperty("mdAutohide")?m.mdAutohide:v.hasOwnProperty("mdAutohide"))||T||r[0].activeElement!==C[0])&&(S&&(t.cancel(S),$.queued=!1,S=null),C.off(u,h),C.triggerHandler("blur"),$(!1)),T=!1}function d(){T=!0}M=!1,l.register("scroll",i,!0),l.register("blur",o),l.register("resize",k),m.$on("$destroy",function(){l.deregister("scroll",i,!0),l.deregister("blur",o),l.deregister("resize",k),C.off(c,a).off(u,h).off("mousedown",d),h(),e&&e.disconnect()}),C.on("mousedown",d),C.on(c,a)}(),function(){if(g[0]&&"MutationObserver"in n){var t=new MutationObserver(function(t){t.forEach(function(t){"md-visible"!==t.attributeName||m.visibleWatcher||(m.visibleWatcher=m.$watch("mdVisible",D))})});t.observe(g[0],{attributes:!0}),v.hasOwnProperty("mdVisible")&&(m.visibleWatcher=m.$watch("mdVisible",D))}else m.visibleWatcher=m.$watch("mdVisible",D);function e(){m.$destroy()}m.$watch("mdDirection",I),g.one("$destroy",e),C.one("$destroy",e),m.$on("$destroy",function(){$(!1),w&&w.destroy(),t&&t.disconnect(),g.remove()}),g.text().indexOf(o.startSymbol())>-1&&m.$watch(function(){return g.text().trim()},A)}()}}}n.$inject=["$timeout","$window","$$rAF","$document","$interpolate","$mdUtil","$mdPanel","$$mdTooltipRegistry"],e.module("material.components.tooltip",["material.core","material.components.panel"]).directive("mdTooltip",n).service("$$mdTooltipRegistry",function(){var n={},i=e.element(t);return{register:function(e,o,s){var a=n[e]=n[e]||[];a.length||(s?t.addEventListener(e,r,!0):i.on(e,r));-1===a.indexOf(o)&&a.push(o)},deregister:function(e,o,s){var a=n[e],l=a?a.indexOf(o):-1;l>-1&&(a.splice(l,1),0===a.length&&(s?t.removeEventListener(e,r,!0):i.off(e,r)))}};function r(t){n[t.type]&&n[t.type].forEach(function(e){e.call(this,t)},this)}})}(),function(){function t(t){t.addClass("md-truncate")}t.$inject=["$element"],e.module("material.components.truncate",["material.core"]).directive("mdTruncate",function(){return{restrict:"AE",controller:t}})}(),function(){function t(t){return'<div class="md-virtual-repeat-scroller" role="presentation"><div class="md-virtual-repeat-sizer" role="presentation"></div><div class="md-virtual-repeat-offsetter" role="presentation">'+t[0].innerHTML+"</div></div>"}n.$inject=["$$rAF","$mdUtil","$mdConstant","$parse","$rootScope","$window","$scope","$element","$attrs"],r.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],i.$inject=["$parse"],e.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",function(){return{controller:n,template:t,compile:function(t,e){t.addClass("md-virtual-repeat-container").addClass(e.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}).directive("mdVirtualRepeat",i).directive("mdForceHeight",s);function n(t,n,i,r,o,s,a,l,c){this.$rootScope=o,this.$scope=a,this.$element=l,this.$attrs=c,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.maxElementPixels=i.ELEMENT_MAX_PIXELS,this.ltr=!n.isRtl(this.$attrs),this.$attrs.mdTopIndex?(this.bindTopIndex=r(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),e.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,e.bind(this,function(t){t!==this.topIndex&&this.scrollToIndex(t)}))):this.topIndex=0,this.scroller=l[0].querySelector(".md-virtual-repeat-scroller"),this.sizer=this.scroller.querySelector(".md-virtual-repeat-sizer"),this.offsetter=this.scroller.querySelector(".md-virtual-repeat-offsetter");var u=e.bind(this,this.updateSize);t(e.bind(this,function(){u();var t=n.debounce(u,10,null,!1),i=e.element(s);this.size||t(),i.on("resize",t),a.$on("$destroy",function(){i.off("resize",t)}),a.$emit("$md-resize-enable"),a.$on("$md-resize",u)}))}function i(t){return{controller:r,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(e,n){var i=n.mdVirtualRepeat.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),r=i[1],o=t(i[2]),s=n.mdExtraName&&t(n.mdExtraName);return function(t,e,n,i,a){i[0].link_(i[1],a,r,o,s)}}}}function r(t,n,i,r,o,s,a,l){this.$scope=t,this.$element=n,this.$attrs=i,this.$browser=r,this.$document=o,this.$mdUtil=l,this.$rootScope=s,this.$$rAF=a,this.onDemand=l.parseAttributeBoolean(i.mdOnDemand),this.browserCheckUrlChange=r.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=t.$eval(i.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=e.noop,this.blocks={},this.pooledBlocks=[],t.$on("$destroy",e.bind(this,this.cleanupBlocks_))}function o(t){if(!e.isFunction(t.getItemAtIndex)||!e.isFunction(t.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength().");this.model=t}function s(t){return{restrict:"A",link:function(t,e,n){var i=t.$eval(n.mdForceHeight)||null;i&&e&&(e[0].style.height=i)}}}n.prototype.register=function(t){this.repeater=t,e.element(this.scroller).on("scroll wheel touchmove touchend",e.bind(this,this.handleScroll_))},n.prototype.isHorizontal=function(){return this.horizontal},n.prototype.getSize=function(){return this.size},n.prototype.setSize_=function(t){var e=this.getDimensionName_();this.size=t,this.$element[0].style[e]=t+"px"},n.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},n.prototype.updateSize=function(){if(!this.originalSize){var t=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight;t&&(this.size=t),this.handleScroll_(),this.repeater&&this.repeater.containerUpdated()}},n.prototype.getScrollSize=function(){return this.scrollSize},n.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},n.prototype.sizeScroller_=function(t){var e=this.getDimensionName_(),n=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",t<this.maxElementPixels)this.sizer.style[e]=t+"px";else{this.sizer.style[e]="auto",this.sizer.style[n]="auto";var i=Math.floor(t/this.maxElementPixels),r=document.createElement("div");r.style[e]=this.maxElementPixels+"px",r.style[n]="1px";for(var o=0;o<i;o++)this.sizer.appendChild(r.cloneNode(!1));r.style[e]=t-i*this.maxElementPixels+"px",this.sizer.appendChild(r)}},n.prototype.autoShrink_=function(t){var e=Math.max(t,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&e!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var n=this.originalSize||this.size;if(!n||e<n)this.originalSize||(this.originalSize=this.size),this.setSize_(e);else if(null!==this.originalSize){this.unsetSize_();var i=this.originalSize;this.originalSize=null,i||this.updateSize(),this.setSize_(i||this.size)}this.repeater.containerUpdated()}},n.prototype.setScrollSize=function(t){var e=t+this.offsetSize;this.scrollSize!==e&&(this.sizeScroller_(e),this.autoShrink_(e),this.scrollSize=e)},n.prototype.getScrollOffset=function(){return this.scrollOffset},n.prototype.scrollTo=function(t){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=t,this.handleScroll_()},n.prototype.scrollToIndex=function(t){var e=this.repeater.getItemSize(),n=this.repeater.itemsLength;t>n&&(t=n-1),this.scrollTo(e*t)},n.prototype.resetScroll=function(){this.scrollTo(0)},n.prototype.handleScroll_=function(){this.ltr||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var t=this.isHorizontal()?this.ltr?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(this.scrollSize<this.size)&&(t>this.scrollSize-this.size&&(t=this.scrollSize-this.size),t!==this.scrollOffset)){var e=this.repeater.getItemSize();if(e){var n=Math.max(0,Math.floor(t/e)-3),i=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||this.ltr?n*e:-n*e)+"px)";if(this.scrollOffset=t,this.offsetter.style.webkitTransform=i,this.offsetter.style.transform=i,this.bindTopIndex){var r=Math.floor(t/e);r!==this.topIndex&&r<this.repeater.getItemCount()&&(this.topIndex=r,this.bindTopIndex.assign(this.$scope,r),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},r.Block,r.prototype.link_=function(t,n,i,r,o){this.container=t,this.transclude=n,this.repeatName=i,this.rawRepeatListExpression=r,this.extraName=o,this.sized=!1,this.repeatListExpression=e.bind(this,this.repeatListExpression_),this.container.register(this)},r.prototype.cleanupBlocks_=function(){e.forEach(this.pooledBlocks,function(t){t.element.remove()})},r.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var t=this.getBlock_(0);t.element[0].parentNode||this.parentNode.appendChild(t.element[0]),this.itemSize=t.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=t,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},r.prototype.repeatListExpression_=function(t){var e=this.rawRepeatListExpression(t);if(this.onDemand&&e){var n=new o(e);return n.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),n}return e},r.prototype.containerUpdated=function(){if(!this.itemSize)return this.unwatchItemSize_&&this.unwatchItemSize_!==e.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,e.bind(this,function(t){t&&t.length&&this.readItemSize_()})),void(this.$rootScope.$$phase||this.$scope.$digest());this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,e.bind(this,function(t,e){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(t,e)}))),this.updateIndexes_(),(this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof o&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items))},r.prototype.getItemSize=function(){return this.itemSize},r.prototype.getItemCount=function(){return this.itemsLength},r.prototype.virtualRepeatUpdate_=function(t,n){this.isVirtualRepeatUpdating_=!0;var i=t&&t.length||0,r=!1;if(this.items&&i<this.items.length&&0!==this.container.getScrollOffset()){this.items=t;var o=this.container.getScrollOffset();this.container.resetScroll(),this.container.scrollTo(o)}i!==this.itemsLength&&(r=!0,this.itemsLength=i),this.items=t,(t!==n||r)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,r&&this.container.setScrollSize(i*this.itemSize),Object.keys(this.blocks).forEach(function(t){var e=parseInt(t,10);(e<this.newStartIndex||e>=this.newEndIndex)&&this.poolBlock_(e)},this),this.$browser.$$checkUrlChange=e.noop;var s,a,l=[],c=[];for(s=this.newStartIndex;s<this.newEndIndex&&null==this.blocks[s];s++)a=this.getBlock_(s),this.updateBlock_(a,s),l.push(a);for(;null!=this.blocks[s];s++)this.updateBlock_(this.blocks[s],s);for(var u=s-1;s<this.newEndIndex;s++)a=this.getBlock_(s),this.updateBlock_(a,s),c.push(a);if(l.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(l),this.$element[0].nextSibling),c.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(c),this.blocks[u]&&this.blocks[u].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isFirstRender){this.isFirstRender=!1;var h=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.$mdUtil.nextTick(function(){this.container.scrollToIndex(h)}.bind(this))}this.isVirtualRepeatUpdating_=!1},r.prototype.getBlock_=function(t){return this.pooledBlocks.length?this.pooledBlocks.pop():(this.transclude(e.bind(this,function(e,i){n={element:e,new:!0,scope:i},this.updateScope_(i,t),this.parentNode.appendChild(e[0])})),n);var n},r.prototype.updateBlock_=function(t,e){this.blocks[e]=t,(t.new||t.scope.$index!==e||t.scope[this.repeatName]!==this.items[e])&&(t.new=!1,this.updateScope_(t.scope,e),this.$rootScope.$$phase||t.scope.$digest())},r.prototype.updateScope_=function(t,e){t.$index=e,t[this.repeatName]=this.items&&this.items[e],this.extraName&&(t[this.extraName(this.$scope)]=this.items[e])},r.prototype.poolBlock_=function(t){this.pooledBlocks.push(this.blocks[t]),this.parentNode.removeChild(this.blocks[t].element[0]),delete this.blocks[t]},r.prototype.domFragmentFromBlocks_=function(t){var e=this.$document[0].createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element[0])}),e},r.prototype.updateIndexes_=function(){var t=this.items?this.items.length:0,e=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(t-e,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+e+3,this.newEndIndex=Math.min(t,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-3)},o.prototype.$$includeIndexes=function(t,e){for(var n=t;n<e;n++)this.hasOwnProperty(n)||(this[n]=this.model.getItemAtIndex(n));this.length=this.model.getLength()},s.$inject=["$mdUtil"]}(),function(){function t(t){var e=-1,n=1,i=24,r=4;return{link:function(o,s,a){var l="";a.$observe("mdWhiteframe",function(o){(o=parseInt(o,10)||r)!=e&&(o>i||o<n)&&(t.warn("md-whiteframe attribute value is invalid. It should be a number between "+n+" and "+i,s[0]),o=r);var c=o==e?"":"md-whiteframe-"+o+"dp";a.$updateClass(c,l),l=c})}}}t.$inject=["$log"],e.module("material.components.whiteframe",["material.core"]).directive("mdWhiteframe",t)}(),e.module("material.core").constant("$MD_THEME_CSS",'md-autocomplete.md-THEME_NAME-theme{background:"{{background-hue-1}}"}md-autocomplete.md-THEME_NAME-theme[disabled]:not([md-floating-label]){background:"{{background-hue-2}}"}md-autocomplete.md-THEME_NAME-theme button md-icon path{fill:"{{background-600}}"}md-autocomplete.md-THEME_NAME-theme button:after{background:"{{background-600-0.3}}"}md-autocomplete.md-THEME_NAME-theme input{color:"{{foreground-1}}"}md-autocomplete.md-THEME_NAME-theme.md-accent md-input-container.md-input-focused .md-input{border-color:"{{accent-color}}"}md-autocomplete.md-THEME_NAME-theme.md-accent md-input-container.md-input-focused label,md-autocomplete.md-THEME_NAME-theme.md-accent md-input-container.md-input-focused md-icon{color:"{{accent-color}}"}md-autocomplete.md-THEME_NAME-theme.md-accent md-progress-linear .md-container{background-color:"{{accent-100}}"}md-autocomplete.md-THEME_NAME-theme.md-accent md-progress-linear .md-bar{background-color:"{{accent-color}}"}md-autocomplete.md-THEME_NAME-theme.md-warn md-input-container.md-input-focused .md-input{border-color:"{{warn-A700}}"}md-autocomplete.md-THEME_NAME-theme.md-warn md-input-container.md-input-focused label,md-autocomplete.md-THEME_NAME-theme.md-warn md-input-container.md-input-focused md-icon{color:"{{warn-A700}}"}md-autocomplete.md-THEME_NAME-theme.md-warn md-progress-linear .md-container{background-color:"{{warn-100}}"}md-autocomplete.md-THEME_NAME-theme.md-warn md-progress-linear .md-bar{background-color:"{{warn-color}}"}.md-autocomplete-standard-list-container.md-THEME_NAME-theme,.md-autocomplete-suggestions-container.md-THEME_NAME-theme{background:"{{background-hue-1}}"}.md-autocomplete-standard-list-container.md-THEME_NAME-theme li,.md-autocomplete-suggestions-container.md-THEME_NAME-theme li{color:"{{foreground-1}}"}.md-autocomplete-standard-list-container.md-THEME_NAME-theme li#selected_option,.md-autocomplete-standard-list-container.md-THEME_NAME-theme li:hover,.md-autocomplete-suggestions-container.md-THEME_NAME-theme li#selected_option,.md-autocomplete-suggestions-container.md-THEME_NAME-theme li:hover{background:"{{background-500-0.18}}"}md-backdrop{background-color:"{{background-900-0.0}}"}md-backdrop.md-opaque.md-THEME_NAME-theme{background-color:"{{background-900-1.0}}"}md-bottom-sheet.md-THEME_NAME-theme{background-color:"{{background-color}}";border-top-color:"{{background-hue-3}}"}md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item{color:"{{foreground-1}}"}md-bottom-sheet.md-THEME_NAME-theme .md-subheader{background-color:"{{background-color}}";color:"{{foreground-1}}"}.md-button.md-THEME_NAME-theme:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme:not([disabled]):hover{background-color:"{{background-500-0.2}}"}.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover{background-color:transparent}.md-button.md-THEME_NAME-theme.md-fab md-icon{color:"{{accent-contrast}}"}.md-button.md-THEME_NAME-theme.md-primary{color:"{{primary-color}}"}.md-button.md-THEME_NAME-theme.md-primary.md-fab,.md-button.md-THEME_NAME-theme.md-primary.md-raised{color:"{{primary-contrast}}";background-color:"{{primary-color}}"}.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon{color:"{{primary-contrast}}"}.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover{background-color:"{{primary-600}}"}.md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon{color:"{{primary-color}}"}.md-button.md-THEME_NAME-theme.md-fab{background-color:"{{accent-color}}";color:"{{accent-contrast}}"}.md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon{color:"{{accent-contrast}}"}.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover{background-color:"{{accent-A700}}"}.md-button.md-THEME_NAME-theme.md-raised{color:"{{background-900}}";background-color:"{{background-50}}"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]) md-icon{color:"{{background-900}}"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover{background-color:"{{background-50}}"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused{background-color:"{{background-200}}"}.md-button.md-THEME_NAME-theme.md-warn{color:"{{warn-color}}"}.md-button.md-THEME_NAME-theme.md-warn.md-fab,.md-button.md-THEME_NAME-theme.md-warn.md-raised{color:"{{warn-contrast}}";background-color:"{{warn-color}}"}.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon{color:"{{warn-contrast}}"}.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover{background-color:"{{warn-600}}"}.md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon{color:"{{warn-color}}"}.md-button.md-THEME_NAME-theme.md-accent{color:"{{accent-color}}"}.md-button.md-THEME_NAME-theme.md-accent.md-fab,.md-button.md-THEME_NAME-theme.md-accent.md-raised{color:"{{accent-contrast}}";background-color:"{{accent-color}}"}.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon{color:"{{accent-contrast}}"}.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover{background-color:"{{accent-A700}}"}.md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon{color:"{{accent-color}}"}.md-button.md-THEME_NAME-theme.md-accent[disabled],.md-button.md-THEME_NAME-theme.md-fab[disabled],.md-button.md-THEME_NAME-theme.md-raised[disabled],.md-button.md-THEME_NAME-theme.md-warn[disabled],.md-button.md-THEME_NAME-theme[disabled]{color:"{{foreground-3}}";cursor:default}.md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon,.md-button.md-THEME_NAME-theme[disabled] md-icon{color:"{{foreground-3}}"}.md-button.md-THEME_NAME-theme.md-fab[disabled],.md-button.md-THEME_NAME-theme.md-raised[disabled]{background-color:"{{foreground-4}}"}.md-button.md-THEME_NAME-theme[disabled]{background-color:transparent}._md a.md-THEME_NAME-theme:not(.md-button).md-primary{color:"{{primary-color}}"}._md a.md-THEME_NAME-theme:not(.md-button).md-primary:hover{color:"{{primary-700}}"}._md a.md-THEME_NAME-theme:not(.md-button).md-accent{color:"{{accent-color}}"}._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover{color:"{{accent-A700}}"}._md a.md-THEME_NAME-theme:not(.md-button).md-warn{color:"{{warn-color}}"}._md a.md-THEME_NAME-theme:not(.md-button).md-warn:hover{color:"{{warn-700}}"}md-card.md-THEME_NAME-theme{color:"{{foreground-1}}";background-color:"{{background-hue-1}}";border-radius:2px}md-card.md-THEME_NAME-theme .md-card-image{border-radius:2px 2px 0 0}md-card.md-THEME_NAME-theme md-card-header md-card-avatar md-icon{color:"{{background-color}}";background-color:"{{foreground-3}}"}md-card.md-THEME_NAME-theme md-card-header md-card-header-text .md-subhead,md-card.md-THEME_NAME-theme md-card-title md-card-title-text:not(:only-child) .md-subhead{color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme .md-ripple{color:"{{accent-A700}}"}md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple{color:"{{background-600}}"}md-checkbox.md-THEME_NAME-theme.md-checked.md-focused .md-container:before{background-color:"{{accent-color-0.26}}"}md-checkbox.md-THEME_NAME-theme .md-ink-ripple{color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme.md-checked .md-ink-ripple{color:"{{accent-color-0.87}}"}md-checkbox.md-THEME_NAME-theme:not(.md-checked) .md-icon{border-color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme.md-checked .md-icon{background-color:"{{accent-color-0.87}}"}md-checkbox.md-THEME_NAME-theme.md-checked .md-icon:after{border-color:"{{accent-contrast-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple{color:"{{primary-600}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple{color:"{{background-600}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ink-ripple{color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple{color:"{{primary-color-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary:not(.md-checked) .md-icon{border-color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon{background-color:"{{primary-color-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused .md-container:before{background-color:"{{primary-color-0.26}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon:after{border-color:"{{primary-contrast-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-indeterminate[disabled] .md-container{color:"{{foreground-3}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple{color:"{{warn-600}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ink-ripple{color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple{color:"{{warn-color-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn:not(.md-checked) .md-icon{border-color:"{{foreground-2}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon{background-color:"{{warn-color-0.87}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) .md-container:before{background-color:"{{warn-color-0.26}}"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon:after{border-color:"{{background-200}}"}md-checkbox.md-THEME_NAME-theme[disabled]:not(.md-checked) .md-icon{border-color:"{{foreground-3}}"}md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon{background-color:"{{foreground-3}}"}md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon:after{border-color:"{{background-200}}"}md-checkbox.md-THEME_NAME-theme[disabled] .md-icon:after{border-color:"{{foreground-3}}"}md-checkbox.md-THEME_NAME-theme[disabled] .md-label{color:"{{foreground-3}}"}md-chips.md-THEME_NAME-theme .md-chips{box-shadow:0 1px "{{foreground-4}}"}md-chips.md-THEME_NAME-theme .md-chips.md-focused{box-shadow:0 2px "{{primary-color}}"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input{color:"{{foreground-1}}"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::-webkit-input-placeholder{color:"{{foreground-3}}"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input:-ms-input-placeholder,md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::-ms-input-placeholder{color:"{{foreground-3}}"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::placeholder{color:"{{foreground-3}}"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input:-moz-placeholder,md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::-moz-placeholder{color:"{{foreground-3}}";opacity:1}md-chips.md-THEME_NAME-theme md-chip{background:"{{background-300}}";color:"{{background-800}}"}md-chips.md-THEME_NAME-theme md-chip md-icon{color:"{{background-700}}"}md-chips.md-THEME_NAME-theme md-chip.md-focused{background:"{{primary-color}}";color:"{{primary-contrast}}"}md-chips.md-THEME_NAME-theme md-chip.md-focused md-icon{color:"{{primary-contrast}}"}md-chips.md-THEME_NAME-theme md-chip._md-chip-editing{background:transparent;color:"{{background-800}}"}md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path{fill:"{{background-500}}"}.md-contact-suggestion span.md-contact-email{color:"{{background-400}}"}md-content.md-THEME_NAME-theme{color:"{{foreground-1}}";background-color:"{{background-default}}"}.md-THEME_NAME-theme .md-calendar{background:"{{background-hue-1}}";color:"{{foreground-1-0.87}}"}.md-THEME_NAME-theme .md-calendar tr:last-child td{border-bottom-color:"{{background-hue-2}}"}.md-THEME_NAME-theme .md-calendar-day-header{background:"{{background-500-0.32}}";color:"{{foreground-1-0.87}}"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today .md-calendar-date-selection-indicator{border:1px solid "{{primary-500}}"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today.md-calendar-date-disabled{color:"{{primary-500-0.6}}"}.md-calendar-date.md-focus .md-THEME_NAME-theme .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date-selection-indicator:hover{background:"{{background-500-0.32}}"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-selected-date .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date.md-focus.md-calendar-selected-date .md-calendar-date-selection-indicator{background:"{{primary-500}}";color:"{{primary-500-contrast}}";border-color:transparent}.md-THEME_NAME-theme .md-calendar-date-disabled,.md-THEME_NAME-theme .md-calendar-month-label-disabled{color:"{{foreground-3}}"}.md-THEME_NAME-theme .md-calendar-month-label md-icon,.md-THEME_NAME-theme .md-datepicker-input{color:"{{foreground-1}}"}.md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder{color:"{{foreground-3}}"}.md-THEME_NAME-theme .md-datepicker-input:-ms-input-placeholder,.md-THEME_NAME-theme .md-datepicker-input::-ms-input-placeholder{color:"{{foreground-3}}"}.md-THEME_NAME-theme .md-datepicker-input::placeholder{color:"{{foreground-3}}"}.md-THEME_NAME-theme .md-datepicker-input:-moz-placeholder,.md-THEME_NAME-theme .md-datepicker-input::-moz-placeholder{color:"{{foreground-3}}";opacity:1}.md-THEME_NAME-theme .md-datepicker-input-container{border-bottom-color:"{{foreground-4}}"}.md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:"{{primary-color}}"}.md-accent .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:"{{accent-color}}"}.md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-invalid,.md-warn .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:"{{warn-A700}}"}.md-THEME_NAME-theme .md-datepicker-calendar-pane{border-color:"{{background-hue-1}}"}.md-THEME_NAME-theme .md-datepicker-triangle-button .md-datepicker-expand-triangle{border-top-color:"{{foreground-2}}"}.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon{color:"{{primary-color}}"}.md-accent .md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon,.md-THEME_NAME-theme .md-datepicker-open.md-accent .md-datepicker-calendar-icon{color:"{{accent-color}}"}.md-THEME_NAME-theme .md-datepicker-open.md-warn .md-datepicker-calendar-icon,.md-warn .md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon{color:"{{warn-A700}}"}.md-THEME_NAME-theme .md-datepicker-calendar{background:"{{background-hue-1}}"}.md-THEME_NAME-theme .md-datepicker-input-mask-opaque{box-shadow:0 0 0 9999px "{{background-hue-1}}"}.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-input-container{background:"{{background-hue-1}}"}md-dialog.md-THEME_NAME-theme{border-radius:4px;background-color:"{{background-hue-1}}";color:"{{foreground-1}}"}md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions,md-dialog.md-THEME_NAME-theme.md-content-overflow md-dialog-actions,md-divider.md-THEME_NAME-theme{border-top-color:"{{foreground-4}}"}.layout-gt-lg-row>md-divider.md-THEME_NAME-theme,.layout-gt-md-row>md-divider.md-THEME_NAME-theme,.layout-gt-sm-row>md-divider.md-THEME_NAME-theme,.layout-gt-xs-row>md-divider.md-THEME_NAME-theme,.layout-lg-row>md-divider.md-THEME_NAME-theme,.layout-md-row>md-divider.md-THEME_NAME-theme,.layout-row>md-divider.md-THEME_NAME-theme,.layout-sm-row>md-divider.md-THEME_NAME-theme,.layout-xl-row>md-divider.md-THEME_NAME-theme,.layout-xs-row>md-divider.md-THEME_NAME-theme{border-right-color:"{{foreground-4}}"}md-icon.md-THEME_NAME-theme{color:"{{foreground-2}}"}md-icon.md-THEME_NAME-theme.md-primary{color:"{{primary-color}}"}md-icon.md-THEME_NAME-theme.md-accent{color:"{{accent-color}}"}md-icon.md-THEME_NAME-theme.md-warn{color:"{{warn-color}}"}md-input-container.md-THEME_NAME-theme .md-input{color:"{{foreground-1}}";border-color:"{{foreground-4}}"}md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder,md-input-container.md-THEME_NAME-theme .md-input::-ms-input-placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme .md-input::placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder,md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder{color:"{{foreground-2}}";opacity:1}md-input-container.md-THEME_NAME-theme>md-icon{color:"{{foreground-1}}"}md-input-container.md-THEME_NAME-theme .md-placeholder,md-input-container.md-THEME_NAME-theme label{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme label.md-required:after{color:"{{warn-A700}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-focused):not(.md-input-invalid) label.md-required:after{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme .md-input-message-animation,md-input-container.md-THEME_NAME-theme .md-input-messages-animation{color:"{{warn-A700}}"}md-input-container.md-THEME_NAME-theme .md-input-message-animation .md-char-counter,md-input-container.md-THEME_NAME-theme .md-input-messages-animation .md-char-counter{color:"{{foreground-1}}"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::-webkit-input-placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input:-ms-input-placeholder,md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::-ms-input-placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::placeholder{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input:-moz-placeholder,md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::-moz-placeholder{color:"{{foreground-2}}";opacity:1}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label{color:"{{foreground-2}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-resized .md-input{border-color:"{{primary-color}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon{color:"{{primary-color}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input{border-color:"{{accent-color}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent md-icon{color:"{{accent-color}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input{border-color:"{{warn-A700}}"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn md-icon{color:"{{warn-A700}}"}md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input{border-color:"{{warn-A700}}"}md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter,md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input-message-animation,md-input-container.md-THEME_NAME-theme.md-input-invalid label{color:"{{warn-A700}}"}[disabled] md-input-container.md-THEME_NAME-theme .md-input,md-input-container.md-THEME_NAME-theme .md-input[disabled]{border-bottom-color:transparent;color:"{{foreground-3}}";background-image:linear-gradient(90deg,"{{foreground-3}}" 0,"{{foreground-3}}" 33%,transparent 0);background-image:-ms-linear-gradient(left,transparent 0,"{{foreground-3}}" 100%)}md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4{color:"{{foreground-1}}"}md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p{color:"{{foreground-2}}"}md-list.md-THEME_NAME-theme .md-proxy-focus.md-focused div.md-no-style{background-color:"{{background-100}}"}md-list.md-THEME_NAME-theme md-list-item .md-avatar-icon{background-color:"{{foreground-3}}";color:"{{background-color}}"}md-list.md-THEME_NAME-theme md-list-item>md-icon{color:"{{foreground-2}}"}md-list.md-THEME_NAME-theme md-list-item>md-icon.md-highlight{color:"{{primary-color}}"}md-list.md-THEME_NAME-theme md-list-item>md-icon.md-highlight.md-accent{color:"{{accent-color}}"}md-menu-content.md-THEME_NAME-theme{background-color:"{{background-hue-1}}"}md-menu-content.md-THEME_NAME-theme md-menu-item{color:"{{foreground-1}}"}md-menu-content.md-THEME_NAME-theme md-menu-item md-icon{color:"{{foreground-2}}"}md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled],md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] md-icon{color:"{{foreground-3}}"}md-menu-content.md-THEME_NAME-theme md-menu-divider{background-color:"{{foreground-4}}"}md-menu-bar.md-THEME_NAME-theme>button.md-button{color:"{{foreground-1}}";border-radius:2px}md-menu-bar.md-THEME_NAME-theme md-menu>button{color:"{{foreground-1}}"}md-menu-bar.md-THEME_NAME-theme md-menu.md-open>button,md-menu-bar.md-THEME_NAME-theme md-menu>button:focus{outline:none;background-color:"{{ background-500-0.18}}"}md-menu-bar.md-THEME_NAME-theme.md-open:not(.md-keyboard-mode) md-menu:hover>button{background-color:"{{ background-500-0.18}}"}md-menu-bar.md-THEME_NAME-theme:not(.md-keyboard-mode):not(.md-open) md-menu button:focus,md-menu-bar.md-THEME_NAME-theme:not(.md-keyboard-mode):not(.md-open) md-menu button:hover{background:transparent}md-menu-content.md-THEME_NAME-theme .md-menu>.md-button:after{color:"{{foreground-2}}"}md-menu-content.md-THEME_NAME-theme .md-menu.md-open>.md-button{background-color:"{{ background-500-0.18}}"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar{background-color:"{{background-hue-1}}";color:"{{foreground-1}}"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler{background-color:"{{primary-color}}";color:"{{primary-contrast}}"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler md-icon{color:"{{primary-contrast}}"}md-nav-bar.md-THEME_NAME-theme .md-nav-bar{background-color:transparent;border-color:"{{foreground-4}}"}md-nav-bar.md-THEME_NAME-theme .md-button._md-nav-button.md-unselected{color:"{{foreground-2}}"}md-nav-bar.md-THEME_NAME-theme .md-button._md-nav-button[disabled]{color:"{{foreground-3}}"}md-nav-bar.md-THEME_NAME-theme md-nav-ink-bar{color:"{{accent-color}}";background:"{{accent-color}}"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar{background-color:"{{accent-color}}"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button{color:"{{accent-A100}}"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{accent-contrast}}"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{accent-contrast-0.1}}"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar md-nav-ink-bar{color:"{{primary-600-1}}";background:"{{primary-600-1}}"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar{background-color:"{{warn-color}}"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button{color:"{{warn-100}}"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{warn-contrast}}"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{warn-contrast-0.1}}"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar{background-color:"{{primary-color}}"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button{color:"{{primary-100}}"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{primary-contrast}}"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{primary-contrast-0.1}}"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:"{{primary-color}}"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:"{{primary-100}}"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{primary-contrast}}"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{primary-contrast-0.1}}"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:"{{accent-color}}"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:"{{accent-A100}}"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{accent-contrast}}"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{accent-contrast-0.1}}"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar md-nav-ink-bar{color:"{{primary-600-1}}";background:"{{primary-600-1}}"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:"{{warn-color}}"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:"{{warn-100}}"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:"{{warn-contrast}}"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:"{{warn-contrast-0.1}}"}._md-panel-backdrop.md-THEME_NAME-theme{background-color:"{{background-900-1.0}}"}md-progress-circular.md-THEME_NAME-theme path{stroke:"{{primary-color}}"}md-progress-circular.md-THEME_NAME-theme.md-warn path{stroke:"{{warn-color}}"}md-progress-circular.md-THEME_NAME-theme.md-accent path{stroke:"{{accent-color}}"}md-progress-linear.md-THEME_NAME-theme .md-container{background-color:"{{primary-100}}"}md-progress-linear.md-THEME_NAME-theme .md-bar{background-color:"{{primary-color}}"}md-progress-linear.md-THEME_NAME-theme.md-warn .md-container{background-color:"{{warn-100}}"}md-progress-linear.md-THEME_NAME-theme.md-warn .md-bar{background-color:"{{warn-color}}"}md-progress-linear.md-THEME_NAME-theme.md-accent .md-container{background-color:"{{accent-100}}"}md-progress-linear.md-THEME_NAME-theme.md-accent .md-bar{background-color:"{{accent-color}}"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-primary .md-bar1{background-color:"{{primary-100}}"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-primary .md-dashed:before{background:radial-gradient("{{primary-100}}" 0,"{{primary-100}}" 16%,transparent 42%)}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-bar1{background-color:"{{warn-100}}"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-dashed:before{background:radial-gradient("{{warn-100}}" 0,"{{warn-100}}" 16%,transparent 42%)}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-bar1{background-color:"{{accent-100}}"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-dashed:before{background:radial-gradient("{{accent-100}}" 0,"{{accent-100}}" 16%,transparent 42%)}md-radio-button.md-THEME_NAME-theme .md-off{border-color:"{{foreground-2}}"}md-radio-button.md-THEME_NAME-theme .md-on{background-color:"{{accent-color-0.87}}"}md-radio-button.md-THEME_NAME-theme.md-checked .md-off{border-color:"{{accent-color-0.87}}"}md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple{color:"{{accent-color-0.87}}"}md-radio-button.md-THEME_NAME-theme .md-container .md-ripple{color:"{{accent-A700}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on{background-color:"{{primary-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off{border-color:"{{primary-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple{color:"{{primary-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple{color:"{{primary-600}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on{background-color:"{{warn-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off{border-color:"{{warn-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple{color:"{{warn-color-0.87}}"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple{color:"{{warn-600}}"}md-radio-button.md-THEME_NAME-theme[disabled],md-radio-group.md-THEME_NAME-theme[disabled]{color:"{{foreground-3}}"}md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-off,md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-on,md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-off,md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-on{border-color:"{{foreground-3}}"}md-radio-group.md-THEME_NAME-theme .md-checked .md-ink-ripple{color:"{{accent-color-0.26}}"}md-radio-group.md-THEME_NAME-theme .md-checked:not([disabled]).md-primary .md-ink-ripple,md-radio-group.md-THEME_NAME-theme.md-primary .md-checked:not([disabled]) .md-ink-ripple{color:"{{primary-color-0.26}}"}md-radio-group.md-THEME_NAME-theme.md-focused.ng-empty>md-radio-button:first-child .md-container:before{background-color:"{{foreground-3-0.26}}"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked .md-container:before{background-color:"{{accent-color-0.26}}"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary .md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-primary .md-checked .md-container:before{background-color:"{{primary-color-0.26}}"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-warn .md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-warn .md-checked .md-container:before{background-color:"{{warn-color-0.26}}"}md-input-container md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:"{{warn-A700}}"}md-input-container:not(.md-input-focused):not(.md-input-invalid) md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:"{{foreground-3}}"}md-input-container.md-input-focused:not(.md-input-has-value) md-select.md-THEME_NAME-theme .md-select-value,md-input-container.md-input-focused:not(.md-input-has-value) md-select.md-THEME_NAME-theme .md-select-value.md-select-placeholder{color:"{{primary-color}}"}md-input-container.md-input-invalid md-select.md-THEME_NAME-theme .md-select-value{color:"{{warn-A700}}"!important;border-bottom-color:"{{warn-A700}}"!important}md-input-container.md-input-invalid md-select.md-THEME_NAME-theme.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-input-container:not(.md-input-invalid).md-input-focused.md-accent .md-select-value{border-color:"{{accent-color}}"}md-input-container:not(.md-input-invalid).md-input-focused.md-accent .md-select-value span{color:"{{accent-color}}"}md-input-container:not(.md-input-invalid).md-input-focused.md-warn .md-select-value{border-color:"{{warn-A700}}"}md-input-container:not(.md-input-invalid).md-input-focused.md-warn .md-select-value span{color:"{{warn-A700}}"}md-select.md-THEME_NAME-theme[disabled] .md-select-value{border-bottom-color:transparent;background-image:linear-gradient(90deg,"{{foreground-3}}" 0,"{{foreground-3}}" 33%,transparent 0);background-image:-ms-linear-gradient(left,transparent 0,"{{foreground-3}}" 100%)}md-select.md-THEME_NAME-theme .md-select-value{border-bottom-color:"{{foreground-4}}"}md-select.md-THEME_NAME-theme .md-select-value.md-select-placeholder{color:"{{foreground-3}}"}md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:"{{warn-A700}}"}md-select.md-THEME_NAME-theme.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme.ng-invalid.ng-touched .md-select-value{color:"{{warn-A700}}"!important;border-bottom-color:"{{warn-A700}}"!important}md-select.md-THEME_NAME-theme.ng-invalid.ng-touched.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-value{border-bottom-color:"{{primary-color}}";color:"{{ foreground-1 }}"}md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-value.md-select-placeholder{color:"{{ foreground-1 }}"}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent .md-select-value{border-bottom-color:"{{accent-color}}"}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn .md-select-value{border-bottom-color:"{{warn-color}}"}md-select.md-THEME_NAME-theme[disabled] .md-select-icon,md-select.md-THEME_NAME-theme[disabled] .md-select-value,md-select.md-THEME_NAME-theme[disabled] .md-select-value.md-select-placeholder{color:"{{foreground-3}}"}md-select.md-THEME_NAME-theme .md-select-icon{color:"{{foreground-2}}"}md-select-menu.md-THEME_NAME-theme md-content{background-color:"{{background-hue-1}}"}md-select-menu.md-THEME_NAME-theme md-content md-optgroup{color:"{{foreground-2}}"}md-select-menu.md-THEME_NAME-theme md-content md-option{color:"{{foreground-1}}"}md-select-menu.md-THEME_NAME-theme md-content md-option[disabled] .md-text{color:"{{foreground-3}}"}md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):focus,md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):hover{background-color:"{{background-500-0.18}}"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected]{color:"{{primary-500}}"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected]:focus{color:"{{primary-600}}"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent{color:"{{accent-color}}"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent:focus{color:"{{accent-A700}}"}.md-checkbox-enabled.md-THEME_NAME-theme .md-ripple{color:"{{primary-600}}"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ripple{color:"{{background-600}}"}.md-checkbox-enabled.md-THEME_NAME-theme .md-ink-ripple{color:"{{foreground-2}}"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ink-ripple{color:"{{primary-color-0.87}}"}.md-checkbox-enabled.md-THEME_NAME-theme:not(.md-checked) .md-icon{border-color:"{{foreground-2}}"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-icon{background-color:"{{primary-color-0.87}}"}.md-checkbox-enabled.md-THEME_NAME-theme[selected].md-focused .md-container:before{background-color:"{{primary-color-0.26}}"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-icon:after{border-color:"{{primary-contrast-0.87}}"}.md-checkbox-enabled.md-THEME_NAME-theme .md-indeterminate[disabled] .md-container{color:"{{foreground-3}}"}.md-checkbox-enabled.md-THEME_NAME-theme md-option .md-text{color:"{{foreground-1}}"}md-sidenav.md-THEME_NAME-theme,md-sidenav.md-THEME_NAME-theme md-content{background-color:"{{background-hue-1}}"}md-slider.md-THEME_NAME-theme .md-track{background-color:"{{foreground-3}}"}md-slider.md-THEME_NAME-theme .md-track-ticks{color:"{{background-contrast}}"}md-slider.md-THEME_NAME-theme .md-focus-ring{background-color:"{{accent-A200-0.2}}"}md-slider.md-THEME_NAME-theme .md-disabled-thumb{border-color:"{{background-color}}";background-color:"{{background-color}}"}md-slider.md-THEME_NAME-theme.md-min .md-thumb:after{background-color:"{{background-color}}";border-color:"{{foreground-3}}"}md-slider.md-THEME_NAME-theme.md-min .md-focus-ring{background-color:"{{foreground-3-0.38}}"}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-thumb:after{background-color:"{{background-contrast}}";border-color:transparent}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-sign{background-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-sign:after{border-top-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme.md-min[md-discrete][md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme .md-track.md-track-fill{background-color:"{{accent-color}}"}md-slider.md-THEME_NAME-theme .md-thumb:after{border-color:"{{accent-color}}";background-color:"{{accent-color}}"}md-slider.md-THEME_NAME-theme .md-sign{background-color:"{{accent-color}}"}md-slider.md-THEME_NAME-theme .md-sign:after{border-top-color:"{{accent-color}}"}md-slider.md-THEME_NAME-theme[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:"{{accent-color}}"}md-slider.md-THEME_NAME-theme .md-thumb-text{color:"{{accent-contrast}}"}md-slider.md-THEME_NAME-theme.md-warn .md-focus-ring{background-color:"{{warn-200-0.38}}"}md-slider.md-THEME_NAME-theme.md-warn .md-track.md-track-fill{background-color:"{{warn-color}}"}md-slider.md-THEME_NAME-theme.md-warn .md-thumb:after{border-color:"{{warn-color}}";background-color:"{{warn-color}}"}md-slider.md-THEME_NAME-theme.md-warn .md-sign{background-color:"{{warn-color}}"}md-slider.md-THEME_NAME-theme.md-warn .md-sign:after{border-top-color:"{{warn-color}}"}md-slider.md-THEME_NAME-theme.md-warn[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:"{{warn-color}}"}md-slider.md-THEME_NAME-theme.md-warn .md-thumb-text{color:"{{warn-contrast}}"}md-slider.md-THEME_NAME-theme.md-primary .md-focus-ring{background-color:"{{primary-200-0.38}}"}md-slider.md-THEME_NAME-theme.md-primary .md-track.md-track-fill{background-color:"{{primary-color}}"}md-slider.md-THEME_NAME-theme.md-primary .md-thumb:after{border-color:"{{primary-color}}";background-color:"{{primary-color}}"}md-slider.md-THEME_NAME-theme.md-primary .md-sign{background-color:"{{primary-color}}"}md-slider.md-THEME_NAME-theme.md-primary .md-sign:after{border-top-color:"{{primary-color}}"}md-slider.md-THEME_NAME-theme.md-primary[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:"{{primary-color}}"}md-slider.md-THEME_NAME-theme.md-primary .md-thumb-text{color:"{{primary-contrast}}"}md-slider.md-THEME_NAME-theme[disabled] .md-thumb:after{border-color:transparent}md-slider.md-THEME_NAME-theme[disabled]:not(.md-min) .md-thumb:after,md-slider.md-THEME_NAME-theme[disabled][md-discrete] .md-thumb:after{background-color:"{{foreground-3}}";border-color:transparent}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-sign{background-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-sign:after{border-top-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme[disabled][readonly][md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:"{{background-400}}"}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-disabled-thumb{border-color:transparent;background-color:transparent}md-slider-container[disabled]>:first-child:not(md-slider),md-slider-container[disabled]>:last-child:not(md-slider){color:"{{foreground-3}}"}.md-subheader.md-THEME_NAME-theme{color:"{{ foreground-2-0.23 }}";background-color:"{{background-default}}"}.md-subheader.md-THEME_NAME-theme.md-primary{color:"{{primary-color}}"}.md-subheader.md-THEME_NAME-theme.md-accent{color:"{{accent-color}}"}.md-subheader.md-THEME_NAME-theme.md-warn{color:"{{warn-color}}"}md-switch.md-THEME_NAME-theme .md-ink-ripple{color:"{{background-500}}"}md-switch.md-THEME_NAME-theme .md-thumb{background-color:"{{background-50}}"}md-switch.md-THEME_NAME-theme .md-bar{background-color:"{{background-500}}"}md-switch.md-THEME_NAME-theme.md-focused:not(.md-checked) .md-thumb:before,md-switch.md-THEME_NAME-theme.md-focused[disabled] .md-thumb:before{background-color:"{{foreground-4}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]) .md-ink-ripple{color:"{{accent-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]) .md-thumb{background-color:"{{accent-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]) .md-bar{background-color:"{{accent-color-0.5}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-focused .md-thumb:before{background-color:"{{accent-color-0.26}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-primary .md-ink-ripple{color:"{{primary-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-primary .md-thumb{background-color:"{{primary-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-primary .md-bar{background-color:"{{primary-color-0.5}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-primary.md-focused .md-thumb:before{background-color:"{{primary-color-0.26}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-warn .md-ink-ripple{color:"{{warn-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-warn .md-thumb{background-color:"{{warn-color}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-warn .md-bar{background-color:"{{warn-color-0.5}}"}md-switch.md-THEME_NAME-theme.md-checked:not([disabled]).md-warn.md-focused .md-thumb:before{background-color:"{{warn-color-0.26}}"}md-switch.md-THEME_NAME-theme[disabled] .md-thumb{background-color:"{{background-400}}"}md-switch.md-THEME_NAME-theme[disabled] .md-bar{background-color:"{{foreground-4}}"}md-tabs.md-THEME_NAME-theme md-tabs-wrapper{background-color:transparent;border-color:"{{foreground-4}}"}md-tabs.md-THEME_NAME-theme .md-paginator md-icon{color:"{{primary-color}}"}md-tabs.md-THEME_NAME-theme md-ink-bar{color:"{{accent-color}}";background:"{{accent-color}}"}md-tabs.md-THEME_NAME-theme .md-tab{color:"{{foreground-2}}"}md-tabs.md-THEME_NAME-theme .md-tab[disabled],md-tabs.md-THEME_NAME-theme .md-tab[disabled] md-icon{color:"{{foreground-3}}"}md-tabs.md-THEME_NAME-theme .md-tab.md-active,md-tabs.md-THEME_NAME-theme .md-tab.md-active md-icon,md-tabs.md-THEME_NAME-theme .md-tab.md-focused,md-tabs.md-THEME_NAME-theme .md-tab.md-focused md-icon{color:"{{primary-color}}"}md-tabs.md-THEME_NAME-theme .md-tab.md-focused{background:"{{primary-color-0.1}}"}md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container{color:"{{accent-A100}}"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper{background-color:"{{accent-color}}"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{accent-A100}}"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{accent-contrast}}"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{accent-contrast-0.1}}"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-ink-bar{color:"{{primary-600-1}}";background:"{{primary-600-1}}"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper{background-color:"{{primary-color}}"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{primary-100}}"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{primary-contrast}}"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{primary-contrast-0.1}}"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper{background-color:"{{warn-color}}"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{warn-100}}"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{warn-contrast}}"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{warn-contrast-0.1}}"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:"{{primary-color}}"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{primary-100}}"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{primary-contrast}}"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{primary-contrast-0.1}}"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:"{{accent-color}}"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{accent-A100}}"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{accent-contrast}}"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{accent-contrast-0.1}}"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-ink-bar{color:"{{primary-600-1}}";background:"{{primary-600-1}}"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:"{{warn-color}}"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:"{{warn-100}}"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:"{{warn-contrast}}"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:"{{warn-contrast-0.1}}"}md-toast.md-THEME_NAME-theme .md-toast-content{background-color:#323232;color:"{{background-50}}"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button{color:"{{background-50}}"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight{color:"{{accent-color}}"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-primary{color:"{{primary-color}}"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-warn{color:"{{warn-color}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar){background-color:"{{primary-color}}";color:"{{primary-contrast}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) md-icon{color:"{{primary-contrast}}";fill:"{{primary-contrast}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) .md-button[disabled] md-icon{color:"{{primary-contrast-0.26}}";fill:"{{primary-contrast-0.26}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent{background-color:"{{accent-color}}";color:"{{accent-contrast}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-ink-ripple{color:"{{accent-contrast}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent md-icon{color:"{{accent-contrast}}";fill:"{{accent-contrast}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-button[disabled] md-icon{color:"{{accent-contrast-0.26}}";fill:"{{accent-contrast-0.26}}"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-warn{background-color:"{{warn-color}}";color:"{{warn-contrast}}"}.md-panel.md-tooltip.md-THEME_NAME-theme{color:"{{background-700-contrast}}";background-color:"{{background-700}}"}body.md-THEME_NAME-theme,html.md-THEME_NAME-theme{color:"{{foreground-1}}";background-color:"{{background-color}}"}')}(window,window.angular),window.ngMaterial={version:{full:"1.1.20"}}},function(t,e,n){var i,r,o;!function(){"use strict";function s(t){return angular.isUndefined(t)||null===t}window&&window.process&&window.process.type;r=[n(16),n(0)],void 0===(o="function"==typeof(i=function(t,e){return void 0===e&&(e=function(){try{return n(0)}catch(t){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}()),t.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",e).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null,fullDateThresholdUnit:"day"}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(e,n,i,r){return function(o,a,l){var c,u,h=null,d=r.withoutSuffix,f=r.titleFormat,p=r.fullDateThreshold,m=r.fullDateFormat,g=r.fullDateThresholdUnit,v=(new Date).getTime(),y=l.amTimeAgo,b="TIME"===a[0].nodeName.toUpperCase(),_=!a.attr("title");function w(){var t;if(u)t=u;else if(r.serverTime){var e=(new Date).getTime()-v+r.serverTime;t=n(e)}else t=n();return t}function S(){h&&(e.clearTimeout(h),h=null)}function x(t){b&&a.attr("datetime",t)}function C(){if(S(),c){var t=i.preprocessDate(c);!function t(n){var i=w().diff(n,g),r=p&&i>=p;if(r?a.text(n.format(m)):a.text(n.from(w(),d)),f&&_&&a.attr("title",n.format(f)),!r){var o=Math.abs(w().diff(n,"minute")),s=3600;o<1?s=1:o<60?s=30:o<180&&(s=300),h=e.setTimeout(function(){t(n)},1e3*s)}}(t),x(t.toISOString())}}o.$watch(y,function(t){if(s(t)||""===t)return S(),void(c&&(a.text(""),x(""),c=null));c=t,C()}),t.isDefined(l.amFrom)&&o.$watch(l.amFrom,function(t){u=s(t)||""===t?null:n(t),C()}),t.isDefined(l.amWithoutSuffix)&&o.$watch(l.amWithoutSuffix,function(t){"boolean"==typeof t?(d=t,C()):d=r.withoutSuffix}),l.$observe("amFullDateThreshold",function(t){p=t,C()}),l.$observe("amFullDateFormat",function(t){m=t,C()}),l.$observe("amFullDateThresholdUnit",function(t){g=t,C()}),o.$on("$destroy",function(){S()}),o.$on("amMoment:localeChanged",function(){C()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(e,n,i,r){var o=null;this.changeLocale=function(i,r){var o=e.locale(i,r);return t.isDefined(i)&&n.$broadcast("amMoment:localeChanged"),o},this.changeTimezone=function(t){e.tz&&e.tz.setDefault?(e.tz.setDefault(t),n.$broadcast("amMoment:timezoneChanged")):i.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),r.timezone=t,o=t},this.preprocessDate=function(t){return o!==r.timezone&&this.changeTimezone(r.timezone),r.preprocess?r.preprocess(t):!isNaN(parseFloat(t))&&isFinite(t)?e(parseInt(t,10)):e(t)}}]).filter("amParse",["moment",function(t){return function(e,n){return t(e,n)}}]).filter("amFromUnix",["moment",function(t){return function(e){return t.unix(e)}}]).filter("amUtc",["moment",function(t){return function(e){return t.utc(e)}}]).filter("amUtcOffset",["amMoment",function(t){return function(e,n){return t.preprocessDate(e).utcOffset(n)}}]).filter("amLocal",["moment",function(t){return function(e){return t.isMoment(e)?e.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(t,e,n){return function(e,i){var r=t.preprocessDate(e);return i?r.tz?r.tz(i):(n.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),r):r}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(t,n,i){if(s(t))return"";var r=e.preprocessDate(t);return r.isValid()?r.calendar(n,i):""}return i.$stateful=n.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(n,i,r,o){if(s(n))return"";var a=e.preprocessDate(n),l=s(i)?t():e.preprocessDate(i);return a.isValid()&&l.isValid()?a.diff(l,r,o):""}return i.$stateful=n.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(t,n){if(s(t))return"";var i=e.preprocessDate(t);return i.isValid()?i.format(n):""}return i.$stateful=n.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return s(e)?"":t.duration(e,n).humanize(i)}return n.$stateful=e.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(t,e,n){function i(n,i,r){var o,a;return s(n)?"":(n=e.preprocessDate(n),(o=t(n)).isValid()?(a=t(r),!s(r)&&a.isValid()?o.from(a,i):o.fromNow(i)):"")}return i.$stateful=n.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return s(e)?"":t(e).subtract(parseInt(n,10),i)}return n.$stateful=e.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(t,e){function n(e,n,i){return s(e)?"":t(e).add(parseInt(n,10),i)}return n.$stateful=e.statefulFilters,n}]).filter("amStartOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return s(e)?"":t(e).startOf(n)}return n.$stateful=e.statefulFilters,n}]).filter("amEndOf",["moment","angularMomentConfig",function(t,e){function n(e,n){return s(e)?"":t(e).endOf(n)}return n.$stateful=e.statefulFilters,n}]),"angularMoment"})?i.apply(e,r):i)||(t.exports=o)}()},function(t,e,n){var i={"./af":60,"./af.js":60,"./ar":61,"./ar-dz":62,"./ar-dz.js":62,"./ar-kw":63,"./ar-kw.js":63,"./ar-ly":64,"./ar-ly.js":64,"./ar-ma":65,"./ar-ma.js":65,"./ar-sa":66,"./ar-sa.js":66,"./ar-tn":67,"./ar-tn.js":67,"./ar.js":61,"./az":68,"./az.js":68,"./be":69,"./be.js":69,"./bg":70,"./bg.js":70,"./bm":71,"./bm.js":71,"./bn":72,"./bn.js":72,"./bo":73,"./bo.js":73,"./br":74,"./br.js":74,"./bs":75,"./bs.js":75,"./ca":76,"./ca.js":76,"./cs":77,"./cs.js":77,"./cv":78,"./cv.js":78,"./cy":79,"./cy.js":79,"./da":80,"./da.js":80,"./de":81,"./de-at":82,"./de-at.js":82,"./de-ch":83,"./de-ch.js":83,"./de.js":81,"./dv":84,"./dv.js":84,"./el":85,"./el.js":85,"./en-SG":86,"./en-SG.js":86,"./en-au":87,"./en-au.js":87,"./en-ca":88,"./en-ca.js":88,"./en-gb":89,"./en-gb.js":89,"./en-ie":90,"./en-ie.js":90,"./en-il":91,"./en-il.js":91,"./en-nz":92,"./en-nz.js":92,"./eo":93,"./eo.js":93,"./es":94,"./es-do":95,"./es-do.js":95,"./es-us":96,"./es-us.js":96,"./es.js":94,"./et":97,"./et.js":97,"./eu":98,"./eu.js":98,"./fa":99,"./fa.js":99,"./fi":100,"./fi.js":100,"./fo":101,"./fo.js":101,"./fr":102,"./fr-ca":103,"./fr-ca.js":103,"./fr-ch":104,"./fr-ch.js":104,"./fr.js":102,"./fy":105,"./fy.js":105,"./ga":106,"./ga.js":106,"./gd":107,"./gd.js":107,"./gl":108,"./gl.js":108,"./gom-latn":109,"./gom-latn.js":109,"./gu":110,"./gu.js":110,"./he":111,"./he.js":111,"./hi":112,"./hi.js":112,"./hr":113,"./hr.js":113,"./hu":114,"./hu.js":114,"./hy-am":115,"./hy-am.js":115,"./id":116,"./id.js":116,"./is":117,"./is.js":117,"./it":118,"./it-ch":119,"./it-ch.js":119,"./it.js":118,"./ja":120,"./ja.js":120,"./jv":121,"./jv.js":121,"./ka":122,"./ka.js":122,"./kk":123,"./kk.js":123,"./km":124,"./km.js":124,"./kn":125,"./kn.js":125,"./ko":126,"./ko.js":126,"./ku":127,"./ku.js":127,"./ky":128,"./ky.js":128,"./lb":129,"./lb.js":129,"./lo":130,"./lo.js":130,"./lt":131,"./lt.js":131,"./lv":132,"./lv.js":132,"./me":133,"./me.js":133,"./mi":134,"./mi.js":134,"./mk":135,"./mk.js":135,"./ml":136,"./ml.js":136,"./mn":137,"./mn.js":137,"./mr":138,"./mr.js":138,"./ms":139,"./ms-my":140,"./ms-my.js":140,"./ms.js":139,"./mt":141,"./mt.js":141,"./my":142,"./my.js":142,"./nb":143,"./nb.js":143,"./ne":144,"./ne.js":144,"./nl":145,"./nl-be":146,"./nl-be.js":146,"./nl.js":145,"./nn":147,"./nn.js":147,"./pa-in":148,"./pa-in.js":148,"./pl":149,"./pl.js":149,"./pt":150,"./pt-br":151,"./pt-br.js":151,"./pt.js":150,"./ro":152,"./ro.js":152,"./ru":153,"./ru.js":153,"./sd":154,"./sd.js":154,"./se":155,"./se.js":155,"./si":156,"./si.js":156,"./sk":157,"./sk.js":157,"./sl":158,"./sl.js":158,"./sq":159,"./sq.js":159,"./sr":160,"./sr-cyrl":161,"./sr-cyrl.js":161,"./sr.js":160,"./ss":162,"./ss.js":162,"./sv":163,"./sv.js":163,"./sw":164,"./sw.js":164,"./ta":165,"./ta.js":165,"./te":166,"./te.js":166,"./tet":167,"./tet.js":167,"./tg":168,"./tg.js":168,"./th":169,"./th.js":169,"./tl-ph":170,"./tl-ph.js":170,"./tlh":171,"./tlh.js":171,"./tr":172,"./tr.js":172,"./tzl":173,"./tzl.js":173,"./tzm":174,"./tzm-latn":175,"./tzm-latn.js":175,"./tzm.js":174,"./ug-cn":176,"./ug-cn.js":176,"./uk":177,"./uk.js":177,"./ur":178,"./ur.js":178,"./uz":179,"./uz-latn":180,"./uz-latn.js":180,"./uz.js":179,"./vi":181,"./vi.js":181,"./x-pseudo":182,"./x-pseudo.js":182,"./yo":183,"./yo.js":183,"./zh-cn":184,"./zh-cn.js":184,"./zh-hk":185,"./zh-hk.js":185,"./zh-tw":186,"./zh-tw.js":186};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=289},function(t,e,n){"use strict";var i;(i=function(){return{restrict:"A",scope:{callback:"&ngOnload"},link:function(t,e,n){e.one("load",function(n){var i=e.length>0&&e[0].contentWindow?e[0].contentWindow.location:void 0;t.callback({contentLocation:i})})}}}).$inject=[],i.directiveName="ngOnload",angular.module("ngOnload",[]).directive(i.directiveName,i)},function(t,e,n){n(292),t.exports="ngSanitize"},function(t,e){
/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t,e){"use strict";var n,i,r,o,s,a,l,c,u=e.$$minErr("$sanitize");e.module("ngSanitize",[]).provider("$sanitize",function(){var h=!1;this.$get=["$$sanitizeUri",function(t){return h&&i(x,w),function(e){var n=[];return l(e,c(n,function(e,n){return!/^unsafe:/.test(t(e,n))})),n.join("")}}],this.enableSvg=function(t){return o(t)?(h=t,this):h},n=e.bind,i=e.extend,r=e.forEach,o=e.isDefined,s=e.lowercase,a=e.noop,l=function(e,n){null==e?e="":"string"!=typeof e&&(e=""+e);d.innerHTML=e;var i=5;do{if(0===i)throw u("uinput","Failed to sanitize html because the input is unstable");i--,t.document.documentMode&&$(d),e=d.innerHTML,d.innerHTML=e}while(e!==d.innerHTML);var r=d.firstChild;for(;r;){switch(r.nodeType){case 1:n.start(r.nodeName.toLowerCase(),A(r.attributes));break;case 3:n.chars(r.textContent)}var o;if(!((o=r.firstChild)||(1===r.nodeType&&n.end(r.nodeName.toLowerCase()),o=r.nextSibling)))for(;null==o&&(r=r.parentNode)!==d;)o=r.nextSibling,1===r.nodeType&&n.end(r.nodeName.toLowerCase());r=o}for(;r=d.firstChild;)d.removeChild(r)},c=function(t,e){var i=!1,o=n(t,t.push);return{start:function(t,n){t=s(t),!i&&S[t]&&(i=t),i||!0!==x[t]||(o("<"),o(t),r(n,function(n,i){var r=s(i),a="img"===t&&"src"===r||"background"===r;!0!==M[r]||!0===C[r]&&!e(n,a)||(o(" "),o(i),o('="'),o(I(n)),o('"'))}),o(">"))},end:function(t){t=s(t),i||!0!==x[t]||!0===m[t]||(o("</"),o(t),o(">")),t==i&&(i=!1)},chars:function(t){i||o(I(t))}}};var d,f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/([^#-~ |!])/g,m=E("area,br,col,hr,img,wbr"),g=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=E("rp,rt"),y=i({},v,g),b=i({},g,E("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),_=i({},v,E("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=E("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),S=E("script,style"),x=i({},m,b,_,y),C=E("background,cite,href,longdesc,src,xlink:href"),k=E("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),T=E("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=i({},C,T,k);function E(t,e){var n,i={},r=t.split(",");for(n=0;n<r.length;n++)i[e?s(r[n]):r[n]]=!0;return i}function A(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n];e[r.name]=r.value}return e}function I(t){return t.replace(/&/g,"&amp;").replace(f,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(p,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $(e){for(;e;){if(e.nodeType===t.Node.ELEMENT_NODE)for(var n=e.attributes,i=0,r=n.length;i<r;i++){var o=n[i],s=o.name.toLowerCase();"xmlns:ns1"!==s&&0!==s.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),i--,r--)}var a=e.firstChild;a&&$(a),e=e.nextSibling}}!function(t){var e;if(!t.document||!t.document.implementation)throw u("noinert","Can't create an inert html document");var n=((e=t.document.implementation.createHTMLDocument("inert")).documentElement||e.getDocumentElement()).getElementsByTagName("body");if(1===n.length)d=n[0];else{var i=e.createElement("html");d=e.createElement("body"),i.appendChild(d),e.appendChild(i)}}(t)}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,r=e.$$minErr("linky"),o=e.isDefined,s=e.isFunction,l=e.isObject,u=e.isString;return function(e,h,d){if(null==e||""===e)return e;if(!u(e))throw r("notstring","Expected string but received: {0}",e);for(var f,p,m,g=s(d)?d:l(d)?function(){return d}:function(){return{}},v=e,y=[];f=v.match(n);)p=f[0],f[2]||f[4]||(p=(f[3]?"http://":"mailto:")+p),m=f.index,b(v.substr(0,m)),_(p,f[0].replace(i,"")),v=v.substring(m+f[0].length);return b(v),t(y.join(""));function b(t){var e,n;t&&y.push((e=t,c(n=[],a).chars(e),n.join("")))}function _(t,e){var n,i=g(t);for(n in y.push("<a "),i)y.push(n+'="'+i[n]+'" ');!o(h)||"target"in i||y.push('target="',h,'" '),y.push('href="',t.replace(/"/g,"&quot;"),'">'),b(e),y.push("</a>")}}}])}(window,window.angular)},function(t,e,n){(function(n){var i;t.exports=function t(e,n,r){function o(a,l){if(!n[a]){if(!e[a]){if(!l&&"function"==typeof i&&i)return i(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof i&&i,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e){(function(n){"use strict";var i=t("./transport-list");e.exports=t("./main")(i),"_sockjs_onload"in n&&setTimeout(n._sockjs_onload,1)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(t,e){"use strict";function n(){r.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var i=t("inherits"),r=t("./event");i(n,r),e.exports=n},{"./event":4,inherits:54}],3:[function(t,e){"use strict";function n(){r.call(this)}var i=t("inherits"),r=t("./eventtarget");i(n,r),n.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},n.prototype.once=function(t,e){var n=this,i=!1;this.on(t,function r(){n.removeListener(t,r),i||(i=!0,e.apply(this,arguments))})},n.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,i=new Array(n-1),r=1;n>r;r++)i[r-1]=arguments[r];for(var o=0;o<e.length;o++)e[o].apply(this,i)}},n.prototype.on=n.prototype.addListener=r.prototype.addEventListener,n.prototype.removeListener=r.prototype.removeEventListener,e.exports.EventEmitter=n},{"./eventtarget":5,inherits:54}],4:[function(t,e){"use strict";function n(t){this.type=t}n.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,e.exports=n},{}],5:[function(t,e){"use strict";function n(){this._listeners={}}n.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},n.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var i=n.indexOf(e);return-1!==i?void(n.length>1?this._listeners[t]=n.slice(0,i).concat(n.slice(i+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,n),e in this._listeners)for(var i=this._listeners[e],r=0;r<i.length;r++)i[r].apply(this,n)},e.exports=n},{}],6:[function(t,e){"use strict";function n(t){r.call(this),this.initEvent("message",!1,!1),this.data=t}var i=t("inherits"),r=t("./event");i(n,r),e.exports=n},{"./event":4,inherits:54}],7:[function(t,e){"use strict";function n(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}var i=t("json3"),r=t("./utils/iframe");n.prototype._transportClose=function(t,e){r.postMessage("c",i.stringify([t,e]))},n.prototype._transportMessage=function(t){r.postMessage("t",t)},n.prototype._send=function(t){this._transport.send(t)},n.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=n},{"./utils/iframe":47,json3:55}],8:[function(t,e){"use strict";var n=t("./utils/url"),i=t("./utils/event"),r=t("json3"),o=t("./facade"),s=t("./info-iframe-receiver"),a=t("./utils/iframe"),l=t("./location");e.exports=function(t,e){var c,u={};e.forEach(function(t){t.facadeTransport&&(u[t.facadeTransport.transportName]=t.facadeTransport)}),u[s.transportName]=s,t.bootstrap_iframe=function(){var e;a.currentWindowId=l.hash.slice(1),i.attachEvent("message",function(i){if(i.source===parent&&(void 0===c&&(c=i.origin),i.origin===c)){var s;try{s=r.parse(i.data)}catch(t){return}if(s.windowId===a.currentWindowId)switch(s.type){case"s":var h;try{h=r.parse(s.data)}catch(t){break}var d=h[0],f=h[1],p=h[2],m=h[3];if(d!==t.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+t.version+'".');if(!n.isOriginEqual(p,l.href)||!n.isOriginEqual(m,l.href))throw new Error("Can't connect to different domain from within an iframe. ("+l.href+", "+p+", "+m+")");e=new o(new u[f](p,m));break;case"m":e._send(s.data);break;case"c":e&&e._close(),e=null}}}),a.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0,json3:55}],9:[function(t,e){"use strict";function n(t,e){i.call(this);var n=this,r=+new Date;this.xo=new e("GET",t),this.xo.once("finish",function(t,e){var i,a;if(200===t){if(a=+new Date-r,e)try{i=o.parse(e)}catch(t){}s.isObject(i)||(i={})}n.emit("finish",i,a),n.removeAllListeners()})}var i=t("events").EventEmitter,r=t("inherits"),o=t("json3"),s=t("./utils/object");r(n,i),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=n},{"./utils/object":49,debug:void 0,events:3,inherits:54,json3:55}],10:[function(t,e){"use strict";function n(t){var e=this;r.call(this),this.ir=new a(t,s),this.ir.once("finish",function(t,n){e.ir=null,e.emit("message",o.stringify([t,n]))})}var i=t("inherits"),r=t("events").EventEmitter,o=t("json3"),s=t("./transport/sender/xhr-local"),a=t("./info-ajax");i(n,r),n.transportName="iframe-info-receiver",n.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=n},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54,json3:55}],11:[function(t,e){(function(n){"use strict";function i(t,e){var i=this;r.call(this);var o=function(){var n=i.ifr=new l(c.transportName,e,t);n.once("message",function(t){if(t){var e;try{e=s.parse(t)}catch(t){return i.emit("finish"),void i.close()}var n=e[0],r=e[1];i.emit("finish",n,r)}i.close()}),n.once("close",function(){i.emit("finish"),i.close()})};n.document.body?o():a.attachEvent("load",o)}var r=t("events").EventEmitter,o=t("inherits"),s=t("json3"),a=t("./utils/event"),l=t("./transport/iframe"),c=t("./info-iframe-receiver");o(i,r),i.enabled=function(){return l.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54,json3:55}],12:[function(t,e){"use strict";function n(t,e){var n=this;i.call(this),setTimeout(function(){n.doXhr(t,e)},0)}var i=t("events").EventEmitter,r=t("inherits"),o=t("./utils/url"),s=t("./transport/sender/xdr"),a=t("./transport/sender/xhr-cors"),l=t("./transport/sender/xhr-local"),c=t("./transport/sender/xhr-fake"),u=t("./info-iframe"),h=t("./info-ajax");r(n,i),n._getReceiver=function(t,e,n){return n.sameOrigin?new h(e,l):a.enabled?new h(e,a):s.enabled&&n.sameScheme?new h(e,s):u.enabled()?new u(t,e):new h(e,c)},n.prototype.doXhr=function(t,e){var i=this,r=o.addPath(t,"/info");this.xo=n._getReceiver(t,r,e),this.timeoutRef=setTimeout(function(){i._cleanup(!1),i.emit("finish")},n.timeout),this.xo.once("finish",function(t,e){i._cleanup(!0),i.emit("finish",t,e)})},n.prototype._cleanup=function(t){clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},n.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},n.timeout=8e3,e.exports=n},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(t,e){(function(t){"use strict";e.exports=t.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,e){(function(n){"use strict";function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");y.call(this),this.readyState=i.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return c.string(r)}}this._server=n.server||c.numberString(1e3);var o=new s(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https"===b.protocol&&!a)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var l=e.sort();l.forEach(function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<l.length-1&&t===l[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")});var u=h.getOrigin(b.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:h.isOriginEqual(this.url,b.href),sameScheme:h.isSchemeEqual(this.url,b.href)},this._ir=new S(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function r(t){return 1e3===t||t>=3e3&&4999>=t}t("./shims");var o,s=t("url-parse"),a=t("inherits"),l=t("json3"),c=t("./utils/random"),u=t("./utils/escape"),h=t("./utils/url"),d=t("./utils/event"),f=t("./utils/transport"),p=t("./utils/object"),m=t("./utils/browser"),g=t("./utils/log"),v=t("./event/event"),y=t("./event/eventtarget"),b=t("./location"),_=t("./event/close"),w=t("./event/trans-message"),S=t("./info-receiver");a(i,y),i.prototype.close=function(t,e){if(t&&!r(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==i.CLOSING&&this.readyState!==i.CLOSED&&this._close(t||1e3,e||"Normal closure",!0)},i.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===i.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===i.OPEN&&this._transport.send(u.quote(t))},i.version=t("./version"),i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,i.prototype._receiveInfo=function(t,e){if(this._ir=null,t){this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=p.extend(t,this._urlInfo);var n=o.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,this._connect()}else this._close(1002,"Cannot connect to server")},i.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(t.needBody&&(!n.document.body||void 0!==n.document.readyState&&"complete"!==n.document.readyState&&"interactive"!==n.document.readyState))return this._transports.unshift(t),void d.attachEvent("load",this._connect.bind(this));var e=this._rto*t.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e);var i=h.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[t.transportName],o=new t(i,this._transUrl,r);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=t.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},i.prototype._transportTimeout=function(){this.readyState===i.CONNECTING&&this._transportClose(2007,"Transport timed out")},i.prototype._transportMessage=function(t){var e,n=this,i=t.slice(0,1),r=t.slice(1);switch(i){case"o":return void this._open();case"h":return void this.dispatchEvent(new v("heartbeat"))}if(r)try{e=l.parse(r)}catch(t){}if(void 0!==e)switch(i){case"a":Array.isArray(e)&&e.forEach(function(t){n.dispatchEvent(new w(t))});break;case"m":this.dispatchEvent(new w(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},i.prototype._transportClose=function(t,e){return this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),r(t)||2e3===t||this.readyState!==i.CONNECTING?void this._close(t,e):void this._connect()},i.prototype._open=function(){this.readyState===i.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=i.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open"))):this._close(1006,"Server lost session")},i.prototype._close=function(t,e,n){var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===i.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=i.CLOSING,setTimeout(function(){this.readyState=i.CLOSED,r&&this.dispatchEvent(new v("error"));var o=new _("close");o.wasClean=n||!1,o.code=t||1e3,o.reason=e,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},i.prototype.countRTO=function(t){return t>100?4*t:300+t},e.exports=function(e){return o=f(e),t("./iframe-bootstrap")(i,e),i}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,json3:55,"url-parse":56}],15:[function(){"use strict";function t(t){var e=+t;return e!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function e(){}var n,i=Array.prototype,r=Object.prototype,o=Function.prototype,s=String.prototype,a=i.slice,l=r.toString,c=function(t){return"[object Function]"===r.toString.call(t)},u=function(t){return"[object String]"===l.call(t)},h=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();n=h?function(t,e,n,i){!i&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,i){!i&&e in t||(t[e]=n)};var d=function(t,e,i){for(var o in e)r.hasOwnProperty.call(e,o)&&n(t,o,e[o],i)},f=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};d(o,{bind:function(t){var n=this;if(!c(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i=a.call(arguments,1),r=function(){if(this instanceof u){var e=n.apply(this,i.concat(a.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(a.call(arguments)))},o=Math.max(0,n.length-i.length),s=[],l=0;o>l;l++)s.push("$"+l);var u=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(r);return n.prototype&&(e.prototype=n.prototype,u.prototype=new e,e.prototype=null),u}}),d(Array,{isArray:function(t){return"[object Array]"===l.call(t)}});var p=Object("a"),m="a"!==p[0]||!(0 in p);d(i,{forEach:function(t){var e=f(this),n=m&&u(this)?this.split(""):e,i=arguments[1],r=-1,o=n.length>>>0;if(!c(t))throw new TypeError;for(;++r<o;)r in n&&t.call(i,n[r],r,e)}},!function(t){var e=!0,n=!0;return t&&(t.call("foo",function(t,n,i){"object"!=typeof i&&(e=!1)}),t.call([1],function(){n="string"==typeof this},"x")),!!t&&e&&n}(i.forEach));var g=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(i,{indexOf:function(e){var n=m&&u(this)?this.split(""):f(this),i=n.length>>>0;if(!i)return-1;var r=0;for(arguments.length>1&&(r=t(arguments[1])),r=r>=0?r:Math.max(0,i+r);i>r;r++)if(r in n&&n[r]===e)return r;return-1}},g);var v=s.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var t=void 0===/()??/.exec("")[1];s.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==l.call(e))return v.call(this,e,n);var o,s,a,c,u=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,h+"g"),r+="",t||(o=new RegExp("^"+e.source+"$(?!\\s)",h)),n=void 0===n?-1>>>0:function(t){return t>>>0}(n);(s=e.exec(r))&&!((a=s.index+s[0].length)>d&&(u.push(r.slice(d,s.index)),!t&&s.length>1&&s[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<r.length&&i.push.apply(u,s.slice(1)),c=s[0].length,d=a,u.length>=n));)e.lastIndex===s.index&&e.lastIndex++;return d===r.length?(c||!e.test(""))&&u.push(""):u.push(r.slice(d)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(s.split=function(t,e){return void 0===t&&0===e?[]:v.call(this,t,e)});var y="\t\n\v\f\r \u2028\u2029\ufeff",b="["+y+"]",_=new RegExp("^"+b+b+"*"),w=new RegExp(b+b+"*$"),S=s.trim&&(y.trim()||!"".trim());d(s,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(_,"").replace(w,"")}},S);var x=s.substr,C="".substr&&"b"!=="0b".substr(-1);d(s,{substr:function(t,e){return x.call(this,0>t&&(t=this.length+t)<0?0:t,e)}},C)},{}],16:[function(t,e){"use strict";e.exports=[t("./transport/websocket"),t("./transport/xhr-streaming"),t("./transport/xdr-streaming"),t("./transport/eventsource"),t("./transport/lib/iframe-wrap")(t("./transport/eventsource")),t("./transport/htmlfile"),t("./transport/lib/iframe-wrap")(t("./transport/htmlfile")),t("./transport/xhr-polling"),t("./transport/xdr-polling"),t("./transport/lib/iframe-wrap")(t("./transport/xhr-polling")),t("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(t,e){(function(n){"use strict";function i(t,e,n,i){var o=this;r.call(this),setTimeout(function(){o._start(t,e,n,i)},0)}var r=t("events").EventEmitter,o=t("inherits"),s=t("../../utils/event"),a=t("../../utils/url"),l=n.XMLHttpRequest;o(i,r),i.prototype._start=function(t,e,n,r){var o=this;try{this.xhr=new l}catch(t){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();e=a.addQuery(e,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){o._cleanup(!0)});try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(t){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!i.supportsCORS||(this.xhr.withCredentials="true"),r&&r.headers)for(var c in r.headers)this.xhr.setRequestHeader(c,r.headers[c]);this.xhr.onreadystatechange=function(){if(o.xhr){var t,e,n=o.xhr;switch(n.readyState){case 3:try{e=n.status,t=n.responseText}catch(t){}1223===e&&(e=204),200===e&&t&&t.length>0&&o.emit("chunk",e,t);break;case 4:1223===(e=n.status)&&(e=204),(12005===e||12029===e)&&(e=0),o.emit("finish",e,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(t){o.emit("finish",0,""),o._cleanup(!1)}},i.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!!l;var c=["Active"].concat("Object").join("X");!i.enabled&&c in n&&(l=function(){try{return new n[c]("Microsoft.XMLHTTP")}catch(t){return null}},i.enabled=!!new l);var u=!1;try{u="withCredentials"in new l}catch(t){}i.supportsCORS=u,e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(t,e){(function(t){e.exports=t.EventSource}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e){(function(t){"use strict";var n=t.WebSocket||t.MozWebSocket;n&&(e.exports=function(t){return new n(t)})}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e){"use strict";function n(t){if(!n.enabled())throw new Error("Transport created when disabled");r.call(this,t,"/eventsource",o,s)}var i=t("inherits"),r=t("./lib/ajax-based"),o=t("./receiver/eventsource"),s=t("./sender/xhr-cors"),a=t("eventsource");i(n,r),n.enabled=function(){return!!a},n.transportName="eventsource",n.roundTrips=2,e.exports=n},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(t,e){"use strict";function n(t){if(!r.enabled)throw new Error("Transport created when disabled");s.call(this,t,"/htmlfile",r,o)}var i=t("inherits"),r=t("./receiver/htmlfile"),o=t("./sender/xhr-local"),s=t("./lib/ajax-based");i(n,s),n.enabled=function(t){return r.enabled&&t.sameOrigin},n.transportName="htmlfile",n.roundTrips=2,e.exports=n},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(t,e){"use strict";function n(t,e,i){if(!n.enabled())throw new Error("Transport created when disabled");o.call(this);var r=this;this.origin=a.getOrigin(i),this.baseUrl=i,this.transUrl=e,this.transport=t,this.windowId=u.string(8);var s=a.addPath(i,"/iframe.html")+"#"+this.windowId;this.iframeObj=l.createIframe(s,function(t){r.emit("close",1006,"Unable to load an iframe ("+t+")"),r.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}var i=t("inherits"),r=t("json3"),o=t("events").EventEmitter,s=t("../version"),a=t("../utils/url"),l=t("../utils/iframe"),c=t("../utils/event"),u=t("../utils/random");i(n,o),n.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},n.prototype._message=function(t){if(a.isOriginEqual(t.origin,this.origin)){var e;try{e=r.parse(t.data)}catch(t){return}if(e.windowId===this.windowId)switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",r.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var n;try{n=r.parse(e.data)}catch(t){return}this.emit("close",n[0],n[1]),this.close()}}},n.prototype.postMessage=function(t,e){this.iframeObj.post(r.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)},n.prototype.send=function(t){this.postMessage("m",t)},n.enabled=function(){return l.iframeEnabled},n.transportName="iframe",n.roundTrips=2,e.exports=n},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54,json3:55}],23:[function(t,e){(function(n){"use strict";function i(t){if(!i.enabled())throw new Error("Transport created when disabled");o.call(this,t,"/jsonp",a,s)}var r=t("inherits"),o=t("./lib/sender-receiver"),s=t("./receiver/jsonp"),a=t("./sender/jsonp");r(i,o),i.enabled=function(){return!!n.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(t,e){"use strict";function n(t,e,n,i){o.call(this,t,e,function(t){return function(e,n,i){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var s=r.addPath(e,"/xhr_send"),a=new t("POST",s,n,o);return a.once("finish",function(t){return a=null,200!==t&&204!==t?i(new Error("http status "+t)):void i()}),function(){a.close(),a=null;var t=new Error("Aborted");t.code=1e3,i(t)}}}(i),n,i)}var i=t("inherits"),r=t("../../utils/url"),o=t("./sender-receiver");i(n,o),e.exports=n},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(t,e){"use strict";function n(t,e){r.call(this),this.sendBuffer=[],this.sender=e,this.url=t}var i=t("inherits"),r=t("events").EventEmitter;i(n,r),n.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var t,e=this;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)},n.prototype.sendSchedule=function(){var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(e){t.sendStop=null,e?(t.emit("close",e.code||1006,"Sending error: "+e),t._cleanup()):t.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.stop=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=n},{debug:void 0,events:3,inherits:54}],26:[function(t,e){(function(n){"use strict";var i=t("inherits"),r=t("../iframe"),o=t("../../utils/object");e.exports=function(t){function e(e,n){r.call(this,t.transportName,e,n)}return i(e,r),e.enabled=function(e,i){if(!n.document)return!1;var s=o.extend({},i);return s.sameOrigin=!0,t.enabled(s)&&r.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=r.roundTrips+t.roundTrips-1,e.facadeTransport=t,e}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(t,e){"use strict";function n(t,e,n){r.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}var i=t("inherits"),r=t("events").EventEmitter;i(n,r),n.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(e){t.emit("message",e)}),e.once("close",function(n,i){t.poll=e=null,t.pollIsClosing||("network"===i?t._scheduleReceiver():(t.emit("close",n||1006,i),t.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=n},{debug:void 0,events:3,inherits:54}],28:[function(t,e){"use strict";function n(t,e,n,i,a){var l=r.addPath(t,e),c=this;o.call(this,t,n),this.poll=new s(i,l,a),this.poll.on("message",function(t){c.emit("message",t)}),this.poll.once("close",function(t,e){c.poll=null,c.emit("close",t,e),c.close()})}var i=t("inherits"),r=t("../../utils/url"),o=t("./buffered-sender"),s=t("./polling");i(n,o),n.prototype.close=function(){this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},e.exports=n},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(t,e){"use strict";function n(t){r.call(this);var e=this,n=this.es=new o(t);n.onmessage=function(t){e.emit("message",decodeURI(t.data))},n.onerror=function(t){var i=2!==n.readyState?"network":"permanent";e._cleanup(),e._close(i)}}var i=t("inherits"),r=t("events").EventEmitter,o=t("eventsource");i(n,r),n.prototype.abort=function(){this._cleanup(),this._close("user")},n.prototype._cleanup=function(){var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},n.prototype._close=function(t){var e=this;setTimeout(function(){e.emit("close",null,t),e.removeAllListeners()},200)},e.exports=n},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(t,e){(function(n){"use strict";function i(t){a.call(this);var e=this;o.polluteGlobalNamespace(),this.id="a"+l.string(6),t=s.addQuery(t,"c="+decodeURIComponent(o.WPrefix+"."+this.id));var r=i.htmlfileEnabled?o.createHtmlfile:o.createIframe;n[o.WPrefix][this.id]={start:function(){e.iframeObj.loaded()},message:function(t){e.emit("message",t)},stop:function(){e._cleanup(),e._close("network")}},this.iframeObj=r(t,function(){e._cleanup(),e._close("permanent")})}var r=t("inherits"),o=t("../../utils/iframe"),s=t("../../utils/url"),a=t("events").EventEmitter,l=t("../../utils/random");r(i,a),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n[o.WPrefix][this.id]},i.prototype._close=function(t){this.emit("close",null,t),this.removeAllListeners()},i.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in n)try{i.htmlfileEnabled=!!new n[c]("htmlfile")}catch(t){}i.enabled=i.htmlfileEnabled||o.iframeEnabled,e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(t,e){(function(n){"use strict";function i(t){var e=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+o.string(6);var s=a.addQuery(t,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout(function(){e._abort(new Error("JSONP script loaded abnormally (timeout)"))},i.timeout)}var r=t("../../utils/iframe"),o=t("../../utils/random"),s=t("../../utils/browser"),a=t("../../utils/url"),l=t("inherits"),c=t("events").EventEmitter;l(i,c),i.prototype.abort=function(){if(n[r.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},i.timeout=35e3,i.scriptErrorTimeout=1e3,i.prototype._callback=function(t){this._cleanup(),this.aborting||(t&&this.emit("message",t),this.emit("close",null,"network"),this.removeAllListeners())},i.prototype._abort=function(t){this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()},i.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete n[r.WPrefix][this.id]},i.prototype._scriptError=function(){var t=this;this.errorTimer||(this.errorTimer=setTimeout(function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))},i.scriptErrorTimeout))},i.prototype._createScript=function(t){var e,i=this,r=this.script=n.document.createElement("script");if(r.id="a"+o.string(8),r.src=t,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){i._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){i.loadedOkay=!0;try{r.onclick()}catch(t){}}r&&i._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===r.async&&n.document.attachEvent)if(s.isOpera())(e=this.script2=n.document.createElement("script")).text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=e.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(t){}r.async=!0}void 0!==r.async&&(r.async=!0);var a=n.document.getElementsByTagName("head")[0];a.insertBefore(r,a.firstChild),e&&a.insertBefore(e,a.firstChild)},e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(t,e){"use strict";function n(t,e){r.call(this);var n=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(t,e){n._chunkHandler(t,e),n.xo=null;var i=200===t?"network":"permanent";n.emit("close",null,i),n._cleanup()})}var i=t("inherits"),r=t("events").EventEmitter;i(n,r),n.prototype._chunkHandler=function(t,e){if(200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var i=e.slice(this.bufferPosition);if(-1===(n=i.indexOf("\n")))break;var r=i.slice(0,n);r&&this.emit("message",r)}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=n},{debug:void 0,events:3,inherits:54}],33:[function(t,e){(function(n){"use strict";function i(t){try{return n.document.createElement('<iframe name="'+t+'">')}catch(i){var e=n.document.createElement("iframe");return e.name=t,e}}function r(){(o=n.document.createElement("form")).style.display="none",o.style.position="absolute",o.method="POST",o.enctype="application/x-www-form-urlencoded",o.acceptCharset="UTF-8",(s=n.document.createElement("textarea")).name="d",o.appendChild(s),n.document.body.appendChild(o)}var o,s,a=t("../../utils/random"),l=t("../../utils/url");e.exports=function(t,e,n){o||r();var c="a"+a.string(8);o.target=c,o.action=l.addQuery(l.addPath(t,"/jsonp_send"),"i="+c);var u=i(c);u.id=c,u.style.display="none",o.appendChild(u);try{s.value=e}catch(t){}o.submit();var h=function(t){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout(function(){u.parentNode.removeChild(u),u=null},500),s.value="",n(t))};return u.onerror=function(){h()},u.onload=function(){h()},u.onreadystatechange=function(t){"complete"===u.readyState&&h()},function(){h(new Error("Aborted"))}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(t,e){(function(n){"use strict";function i(t,e,n){var i=this;r.call(this),setTimeout(function(){i._start(t,e,n)},0)}var r=t("events").EventEmitter,o=t("inherits"),s=t("../../utils/event"),a=t("../../utils/browser"),l=t("../../utils/url");o(i,r),i.prototype._start=function(t,e,i){var r=this,o=new n.XDomainRequest;e=l.addQuery(e,"t="+ +new Date),o.onerror=function(){r._error()},o.ontimeout=function(){r._error()},o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},this.xdr=o,this.unloadRef=s.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch(t){this._error()}},i.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},i.prototype._cleanup=function(t){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!(!n.XDomainRequest||!a.hasDomain()),e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(t,e){"use strict";function n(t,e,n,i){r.call(this,t,e,n,i)}var i=t("inherits"),r=t("../driver/xhr");i(n,r),n.enabled=r.enabled&&r.supportsCORS,e.exports=n},{"../driver/xhr":17,inherits:54}],36:[function(t,e){"use strict";function n(){var t=this;i.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},n.timeout)}var i=t("events").EventEmitter;t("inherits")(n,i),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,e.exports=n},{events:3,inherits:54}],37:[function(t,e){"use strict";function n(t,e,n){r.call(this,t,e,n,{noCredentials:!0})}var i=t("inherits"),r=t("../driver/xhr");i(n,r),n.enabled=r.enabled,e.exports=n},{"../driver/xhr":17,inherits:54}],38:[function(t,e){"use strict";function n(t,e,o){if(!n.enabled())throw new Error("Transport created when disabled");s.call(this);var l=this,c=r.addPath(t,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new a(this.url,[],o),this.ws.onmessage=function(t){l.emit("message",t.data)},this.unloadRef=i.unloadAdd(function(){l.ws.close()}),this.ws.onclose=function(t){l.emit("close",t.code,t.reason),l._cleanup()},this.ws.onerror=function(t){l.emit("close",1006,"WebSocket connection broken"),l._cleanup()}}var i=t("../utils/event"),r=t("../utils/url"),o=t("inherits"),s=t("events").EventEmitter,a=t("./driver/websocket");o(n,s),n.prototype.send=function(t){var e="["+t+"]";this.ws.send(e)},n.prototype.close=function(){this.ws&&this.ws.close(),this._cleanup()},n.prototype._cleanup=function(){var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),i.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},n.enabled=function(){return!!a},n.transportName="websocket",n.roundTrips=2,e.exports=n},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(t,e){"use strict";function n(t){if(!a.enabled)throw new Error("Transport created when disabled");r.call(this,t,"/xhr",s,a)}var i=t("inherits"),r=t("./lib/ajax-based"),o=t("./xdr-streaming"),s=t("./receiver/xhr"),a=t("./sender/xdr");i(n,r),n.enabled=o.enabled,n.transportName="xdr-polling",n.roundTrips=2,e.exports=n},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(t,e){"use strict";function n(t){if(!s.enabled)throw new Error("Transport created when disabled");r.call(this,t,"/xhr_streaming",o,s)}var i=t("inherits"),r=t("./lib/ajax-based"),o=t("./receiver/xhr"),s=t("./sender/xdr");i(n,r),n.enabled=function(t){return!t.cookie_needed&&!t.nullOrigin&&s.enabled&&t.sameScheme},n.transportName="xdr-streaming",n.roundTrips=2,e.exports=n},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(t,e){"use strict";function n(t){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");r.call(this,t,"/xhr",o,s)}var i=t("inherits"),r=t("./lib/ajax-based"),o=t("./receiver/xhr"),s=t("./sender/xhr-cors"),a=t("./sender/xhr-local");i(n,r),n.enabled=function(t){return!t.nullOrigin&&(!(!a.enabled||!t.sameOrigin)||s.enabled)},n.transportName="xhr-polling",n.roundTrips=2,e.exports=n},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(t,e){(function(n){"use strict";function i(t){if(!l.enabled&&!a.enabled)throw new Error("Transport created when disabled");o.call(this,t,"/xhr_streaming",s,a)}var r=t("inherits"),o=t("./lib/ajax-based"),s=t("./receiver/xhr"),a=t("./sender/xhr-cors"),l=t("./sender/xhr-local"),c=t("../utils/browser");r(i,o),i.enabled=function(t){return!t.nullOrigin&&!c.isOpera()&&a.enabled},i.transportName="xhr-streaming",i.roundTrips=2,i.needBody=!!n.document,e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(t,e){(function(t){"use strict";e.exports.randomBytes=t.crypto&&t.crypto.getRandomValues?function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:function(t){for(var e=new Array(t),n=0;t>n;n++)e[n]=Math.floor(256*Math.random());return e}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,e){(function(t){"use strict";e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(t){return!1}}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(t,e){"use strict";var n,i=t("json3"),r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(t){var e=i.stringify(t);return r.lastIndex=0,r.test(e)?(n||(n=function(t){var e,n={},i=[];for(e=0;65536>e;e++)i.push(String.fromCharCode(e));return t.lastIndex=0,i.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n}(r)),e.replace(r,function(t){return n[t]})):e}}},{json3:55}],46:[function(t,e){(function(n){"use strict";var i=t("./random"),r={},o=!1,s=n.chrome&&n.chrome.app&&n.chrome.app.runtime;e.exports={attachEvent:function(t,e){void 0!==n.addEventListener?n.addEventListener(t,e,!1):n.document&&n.attachEvent&&(n.document.attachEvent("on"+t,e),n.attachEvent("on"+t,e))},detachEvent:function(t,e){void 0!==n.addEventListener?n.removeEventListener(t,e,!1):n.document&&n.detachEvent&&(n.document.detachEvent("on"+t,e),n.detachEvent("on"+t,e))},unloadAdd:function(t){if(s)return null;var e=i.string(8);return r[e]=t,o&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(t){t in r&&delete r[t]},triggerUnloadCallbacks:function(){for(var t in r)r[t](),delete r[t]}},s||e.exports.attachEvent("unload",function(){o||(o=!0,e.exports.triggerUnloadCallbacks())})}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(t,e){(function(n){"use strict";var i=t("./event"),r=t("json3"),o=t("./browser");e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n||(n[e.exports.WPrefix]={})},postMessage:function(t,i){n.parent!==n&&n.parent.postMessage(r.stringify({windowId:e.exports.currentWindowId,type:t,data:i||""}),"*")},createIframe:function(t,e){var r,o,s=n.document.createElement("iframe"),a=function(){clearTimeout(r);try{s.onload=null}catch(t){}s.onerror=null},l=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),i.unloadDel(o))},c=function(t){s&&(l(),e(t))};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){clearTimeout(r),r=setTimeout(function(){c("onload timeout")},2e3)},n.document.body.appendChild(s),r=setTimeout(function(){c("timeout")},15e3),o=i.unloadAdd(l),{post:function(t,e){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(t,e)},0)}catch(t){}},cleanup:l,loaded:a}},createHtmlfile:function(t,r){var o,s,a,l=["Active"].concat("Object").join("X"),c=new n[l]("htmlfile"),u=function(){clearTimeout(o),a.onerror=null},h=function(){c&&(u(),i.unloadDel(s),a.parentNode.removeChild(a),a=c=null,CollectGarbage())},d=function(t){c&&(h(),r(t))};c.open(),c.write('<html><script>document.domain="'+n.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[e.exports.WPrefix]=n[e.exports.WPrefix];var f=c.createElement("div");return c.body.appendChild(f),a=c.createElement("iframe"),f.appendChild(a),a.src=t,a.onerror=function(){d("onerror")},o=setTimeout(function(){d("timeout")},15e3),s=i.unloadAdd(h),{post:function(t,e){try{setTimeout(function(){a&&a.contentWindow&&a.contentWindow.postMessage(t,e)},0)}catch(t){}},cleanup:h,loaded:u}}},e.exports.iframeEnabled=!1,n.document&&(e.exports.iframeEnabled=("function"==typeof n.postMessage||"object"==typeof n.postMessage)&&!o.isKonqueror())}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:void 0,json3:55}],48:[function(t,e){(function(t){"use strict";var n={};["log","debug","warn"].forEach(function(e){var i;try{i=t.console&&t.console[e]&&t.console[e].apply}catch(t){}n[e]=i?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log}),e.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(t,e){"use strict";e.exports={isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}},{}],50:[function(t,e){"use strict";var n=t("crypto"),i="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(t){for(var e=i.length,r=n.randomBytes(t),o=[],s=0;t>s;s++)o.push(i.substr(r[s]%e,1));return o.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length;return(new Array(e+1).join("0")+this.number(t)).slice(-e)}}},{crypto:43}],51:[function(t,e){"use strict";e.exports=function(t){return{filterToEnabled:function(e,n){var i={main:[],facade:[]};return e?"string"==typeof e&&(e=[e]):e=[],t.forEach(function(t){t&&("websocket"!==t.transportName||!1!==n.websocket)&&(e.length&&-1===e.indexOf(t.transportName)||t.enabled(n)&&(i.main.push(t),t.facadeTransport&&i.facade.push(t.facadeTransport)))}),i}}}},{debug:void 0}],52:[function(t,e){"use strict";var n=t("url-parse");e.exports={getOrigin:function(t){if(!t)return null;var e=new n(t);if("file:"===e.protocol)return null;var i=e.port;return i||(i="https:"===e.protocol?"443":"80"),e.protocol+"//"+e.hostname+":"+i},isOriginEqual:function(t,e){return this.getOrigin(t)===this.getOrigin(e)},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var n=t.split("?");return n[0]+e+(n[1]?"?"+n[1]:"")},addQuery:function(t,e){return t+(-1===t.indexOf("?")?"?"+e:"&"+e)}}},{debug:void 0,"url-parse":56}],53:[function(t,e){e.exports="1.1.1"},{}],54:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],55:[function(t,e,i){(function(t){(function(){function n(t,e){function i(t){if(i[t]!==g)return i[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=i("json-stringify")&&i("json-parse");else{var r,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var l=e.stringify,u="function"==typeof l&&b;if(u){(r=function(){return 1}).toJSON=r;try{u="0"===l(0)&&"0"===l(new o)&&'""'==l(new a)&&l(y)===g&&l(g)===g&&l()===g&&"1"===l(r)&&"[1]"==l([r])&&"[null]"==l([g])&&"null"==l(null)&&"[null,null,null]"==l([g,y,null])&&l({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===l(null,r)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(t){u=!1}}n=u}if("json-parse"==t){var h=e.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){var d=5==(r=h(s)).a.length&&1===r.a[0];if(d){try{d=!h('"\t"')}catch(t){}if(d)try{d=1!==h("01")}catch(t){}if(d)try{d=1!==h("1.")}catch(t){}}}}catch(t){d=!1}n=d}}return i[t]=!!n}t||(t=s.Object()),e||(e=s.Object());var o=t.Number||s.Number,a=t.String||s.String,l=t.Object||s.Object,c=t.Date||s.Date,u=t.SyntaxError||s.SyntaxError,h=t.TypeError||s.TypeError,d=t.Math||s.Math,f=t.JSON||s.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var p,m,g,v=l.prototype,y=v.toString,b=new c(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!i("json")){var _="[object Function]",w="[object Number]",S="[object String]",x="[object Array]",C=i("bug-string-char-index");if(!b)var k=d.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],M=function(t,e){return T[e]+365*(t-1970)+k((t-1969+(e=+(e>1)))/4)-k((t-1901+e)/100)+k((t-1601+e)/400)};if((p=v.hasOwnProperty)||(p=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,p=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,p.call(this,t)}),m=function(t,e){var n,i,o,s=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n)p.call(i,o)&&s++;return n=i=null,s?m=2==s?function(t,e){var n,i={},r=y.call(t)==_;for(n in t)r&&"prototype"==n||p.call(i,n)||!(i[n]=1)||!p.call(t,n)||e(n)}:function(t,e){var n,i,r=y.call(t)==_;for(n in t)r&&"prototype"==n||!p.call(t,n)||(i="constructor"===n)||e(n);(i||p.call(t,n="constructor"))&&e(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var n,o,s=y.call(t)==_,a=!s&&"function"!=typeof t.constructor&&r[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(n in t)s&&"prototype"==n||!a.call(t,n)||e(n);for(o=i.length;n=i[--o];a.call(t,n)&&e(n));}),m(t,e)},!i("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A=function(t,e){return("000000"+(e||0)).slice(-t)},I=function(t){for(var e='"',n=0,i=t.length,r=!C||i>10,o=r&&(C?t.split(""):t);i>n;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=E[s];break;default:if(32>s){e+="\\u00"+A(2,s.toString(16));break}e+=r?o[n]:t.charAt(n)}}return e+'"'},$=function(t,e,n,i,r,o,s){var a,l,c,u,d,f,v,b,_,C,T,E,D,L,P,O;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(l=y.call(a))||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=w&&l!=S&&l!=x||p.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(M){for(d=k(a/864e5),c=k(d/365.2425)+1970-1;M(c+1,0)<=d;c++);for(u=k((d-M(c,0))/30.42);M(c,u+1)<=d;u++);d=1+d-M(c,u),v=k((f=(a%864e5+864e5)%864e5)/36e5)%24,b=k(f/6e4)%60,_=k(f/1e3)%60,C=f%1e3}else c=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),v=a.getUTCHours(),b=a.getUTCMinutes(),_=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(0>=c||c>=1e4?(0>c?"-":"+")+A(6,0>c?-c:c):A(4,c))+"-"+A(2,u+1)+"-"+A(2,d)+"T"+A(2,v)+":"+A(2,b)+":"+A(2,_)+"."+A(3,C)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(l=y.call(a)))return""+a;if(l==w)return a>-1/0&&1/0>a?""+a:"null";if(l==S)return I(""+a);if("object"==typeof a){for(L=s.length;L--;)if(s[L]===a)throw h();if(s.push(a),T=[],P=o,o+=r,l==x){for(D=0,L=a.length;L>D;D++)E=$(D,a,n,i,r,o,s),T.push(E===g?"null":E);O=T.length?r?"[\n"+o+T.join(",\n"+o)+"\n"+P+"]":"["+T.join(",")+"]":"[]"}else m(i||a,function(t){var e=$(t,a,n,i,r,o,s);e!==g&&T.push(I(t)+":"+(r?" ":"")+e)}),O=T.length?r?"{\n"+o+T.join(",\n"+o)+"\n"+P+"}":"{"+T.join(",")+"}":"{}";return s.pop(),O}};e.stringify=function(t,e,n){var i,o,s,a;if(r[typeof e]&&e)if((a=y.call(e))==_)o=e;else if(a==x){s={};for(var l,c=0,u=e.length;u>c;l=e[c++],((a=y.call(l))==S||a==w)&&(s[l]=1));}if(n)if((a=y.call(n))==w){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==S&&(i=n.length<=10?n:n.slice(0,10));return $("",((l={})[""]=t,l),o,s,i,"",[])}}if(!i("json-parse")){var D,L,P=a.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},N=function(){throw D=L=null,u()},j=function(){for(var t,e,n,i,r,o=L,s=o.length;s>D;)switch(r=o.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=C?o.charAt(D):o[D],D++,t;case 34:for(t="@",D++;s>D;)if(32>(r=o.charCodeAt(D)))N();else if(92==r)switch(r=o.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=O[r],D++;break;case 117:for(e=++D,n=D+4;n>D;D++)(r=o.charCodeAt(D))>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||N();t+=P("0x"+o.slice(e,D));break;default:N()}else{if(34==r)break;for(r=o.charCodeAt(D),e=D;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++D);t+=o.slice(e,D)}if(34==o.charCodeAt(D))return D++,t;N();default:if(e=D,45==r&&(i=!0,r=o.charCodeAt(++D)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(D+1))>=48&&57>=r&&N(),i=!1;s>D&&(r=o.charCodeAt(D))>=48&&57>=r;D++);if(46==o.charCodeAt(D)){for(n=++D;s>n&&(r=o.charCodeAt(n))>=48&&57>=r;n++);n==D&&N(),D=n}if(101==(r=o.charCodeAt(D))||69==r){for((43==(r=o.charCodeAt(++D))||45==r)&&D++,n=D;s>n&&(r=o.charCodeAt(n))>=48&&57>=r;n++);n==D&&N(),D=n}return+o.slice(e,D)}if(i&&N(),"true"==o.slice(D,D+4))return D+=4,!0;if("false"==o.slice(D,D+5))return D+=5,!1;if("null"==o.slice(D,D+4))return D+=4,null;N()}return"$"},R=function(t){var e,n;if("$"==t&&N(),"string"==typeof t){if("@"==(C?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=j());n||(n=!0))n&&(","==t?"]"==(t=j())&&N():N()),","==t&&N(),e.push(R(t));return e}if("{"==t){for(e={};"}"!=(t=j());n||(n=!0))n&&(","==t?"}"==(t=j())&&N():N()),(","==t||"string"!=typeof t||"@"!=(C?t.charAt(0):t[0])||":"!=j())&&N(),e[t.slice(1)]=R(j());return e}N()}return t},B=function(t,e,n){var i=F(t,e,n);i===g?delete t[e]:t[e]=i},F=function(t,e,n){var i,r=t[e];if("object"==typeof r&&r)if(y.call(r)==x)for(i=r.length;i--;)B(r,i,n);else m(r,function(t){B(r,t,n)});return n.call(t,e,r)};e.parse=function(t,e){var n,i;return D=0,L=""+t,n=R(j()),"$"!=j()&&N(),D=L=null,e&&y.call(e)==_?F(((i={})[""]=n,i),"",e):n}}}return e.runInContext=n,e}var r={function:!0,object:!0},o=r[typeof i]&&i&&!i.nodeType&&i,s=r[typeof window]&&window||this,a=o&&r[typeof e]&&e&&!e.nodeType&&"object"==typeof t&&t;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),o)n(s,o);else{var l=s.JSON,c=s.JSON3,u=!1,h=n(s,s.JSON3={noConflict:function(){return u||(u=!0,s.JSON=l,s.JSON3=c,l=c=null),h}});s.JSON={parse:h.parse,stringify:h.stringify}}}).call(this)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(t,e){"use strict";function n(t){var e=l.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]?e[3]:""}}function i(t,e,l){if(!(this instanceof i))return new i(t,e,l);var u,h,d,f,p=a.test(t),m=typeof e,g=this,v=0;"object"!==m&&"string"!==m&&(l=e,e=null),l&&"function"!=typeof l&&(l=s.parse),e=o(e);var y=n(t);for(g.protocol=y.protocol||e.protocol||"",g.slashes=y.slashes||e.slashes,t=y.rest;v<c.length;v++)u=(h=c[v])[0],f=h[1],u!=u?g[f]=t:"string"==typeof u?~(d=t.indexOf(u))&&("number"==typeof h[2]?(g[f]=t.slice(0,d),t=t.slice(d+h[2])):(g[f]=t.slice(d),t=t.slice(0,d))):(d=u.exec(t))&&(g[f]=d[1],t=t.slice(0,t.length-d[0].length)),g[f]=g[f]||(h[3]||"port"===f&&p)&&e[f]||"",h[4]&&(g[f]=g[f].toLowerCase());l&&(g.query=l(g.query)),r(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(h=g.auth.split(":"),g.username=h[0]||"",g.password=h[1]||""),g.href=g.toString()}var r=t("requires-port"),o=t("./lolcation"),s=t("querystringify"),a=/^\/(?!\/)/,l=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i,c=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];i.prototype.set=function(t,e,n){var i=this;return"query"===t?("string"==typeof e&&e.length&&(e=(n||s.parse)(e)),i[t]=e):"port"===t?(i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="")):"hostname"===t?(i[t]=e,i.port&&(e+=":"+i.port),i.host=e):"host"===t?(i[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),i.hostname=e[0],i.port=e[1])):"protocol"===t?(i.protocol=e,i.slashes=!n):i[t]=e,i.href=i.toString(),i},i.prototype.toString=function(t){t&&"function"==typeof t||(t=s.stringify);var e,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var r=i+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r},i.qs=s,i.location=o,e.exports=i},{"./lolcation":57,querystringify:58,"requires-port":59}],57:[function(t,e){(function(n){"use strict";var i,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o={hash:1,query:1};e.exports=function(e){e=e||n.location||{},i=i||t("./");var s,a={},l=typeof e;if("blob:"===e.protocol)a=new i(unescape(e.pathname),{});else if("string"===l)for(s in a=new i(e,{}),o)delete a[s];else if("object"===l){for(s in e)s in o||(a[s]=e[s]);void 0===a.slashes&&(a.slashes=r.test(e.href))}return a}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":56}],58:[function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;n.stringify=function(t,e){e=e||"";var n=[];for(var r in"string"!=typeof e&&(e="?"),t)i.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""},n.parse=function(t){for(var e,n=/([^=?&]+)=([^&]*)/g,i={};e=n.exec(t);i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return i}},{}],59:[function(t,e){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}]},{},[1])(1),function(){var t,n,i,r,o={}.hasOwnProperty,s=[].slice;t={LF:"\n",NULL:"\0"},i=function(){function e(t,e,n){this.command=t,this.headers=null!=e?e:{},this.body=null!=n?n:""}var n;return e.prototype.toString=function(){var n,i,r,s,a;for(i in n=[this.command],(r=!1===this.headers["content-length"])&&delete this.headers["content-length"],a=this.headers)o.call(a,i)&&(s=a[i],n.push(i+":"+s));return this.body&&!r&&n.push("content-length:"+e.sizeOfUTF8(this.body)),n.push(t.LF+this.body),n.join(t.LF)},e.sizeOfUTF8=function(t){return t?encodeURI(t).match(/%..|./g).length:0},n=function(n){var i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b;for(s=n.search(RegExp(""+t.LF+t.LF)),o=(a=n.substring(0,s).split(t.LF)).shift(),l={},p=function(t){return t.replace(/^\s+|\s+$/g,"")},m=0,v=(y=a.reverse()).length;m<v;m++)u=(d=y[m]).indexOf(":"),l[p(d.substring(0,u))]=p(d.substring(u+1));if(i="",f=s+2,l["content-length"])h=parseInt(l["content-length"]),i=(""+n).substring(f,f+h);else for(r=null,c=g=f,b=n.length;(f<=b?g<b:g>b)&&(r=n.charAt(c))!==t.NULL;c=f<=b?++g:--g)i+=r;return new e(o,l,i)},e.unmarshall=function(e){var i,r,o,s;return r=e.split(RegExp(""+t.NULL+t.LF+"*")),(s={frames:[],partial:""}).frames=function(){var t,e,o,s;for(s=[],t=0,e=(o=r.slice(0,-1)).length;t<e;t++)i=o[t],s.push(n(i));return s}(),(o=r.slice(-1)[0])===t.LF||-1!==o.search(RegExp(""+t.NULL+t.LF+"*$"))?s.frames.push(n(o)):s.partial=o,s},e.marshall=function(n,i,r){return new e(n,i,r).toString()+t.NULL},e}(),n=function(){function e(t){this.ws=t,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}var n;return e.prototype.debug=function(t){var e;return"undefined"!=typeof window&&null!==window&&null!=(e=window.console)?e.log(t):void 0},n=function(){return Date.now?Date.now():(new Date).valueOf},e.prototype._transmit=function(t,e,n){var r;for(r=i.marshall(t,e,n),"function"==typeof this.debug&&this.debug(">>> "+r);;){if(!(r.length>this.maxWebSocketFrameSize))return this.ws.send(r);this.ws.send(r.substring(0,this.maxWebSocketFrameSize)),r=r.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+r.length)}},e.prototype._setupHeartbeat=function(e){var i,o,s,a,l,c;if((l=e.version)===r.VERSIONS.V1_1||l===r.VERSIONS.V1_2)return o=(c=function(){var t,n,i,r;for(r=[],t=0,n=(i=e["heart-beat"].split(",")).length;t<n;t++)a=i[t],r.push(parseInt(a));return r}())[0],i=c[1],0!==this.heartbeat.outgoing&&0!==i&&(s=Math.max(this.heartbeat.outgoing,i),"function"==typeof this.debug&&this.debug("send PING every "+s+"ms"),this.pinger=r.setInterval(s,function(e){return function(){return e.ws.send(t.LF),"function"==typeof e.debug?e.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==o?(s=Math.max(this.heartbeat.incoming,o),"function"==typeof this.debug&&this.debug("check PONG every "+s+"ms"),this.ponger=r.setInterval(s,function(t){return function(){var e;if((e=n()-t.serverActivity)>2*s)return"function"==typeof t.debug&&t.debug("did not receive server activity for the last "+e+"ms"),t.ws.close()}}(this))):void 0},e.prototype._parseConnect=function(){var t,e,n,i;switch(i={},(t=1<=arguments.length?s.call(arguments,0):[]).length){case 2:i=t[0],e=t[1];break;case 3:t[1]instanceof Function?(i=t[0],e=t[1],n=t[2]):(i.login=t[0],i.passcode=t[1],e=t[2]);break;case 4:i.login=t[0],i.passcode=t[1],e=t[2],n=t[3];break;default:i.login=t[0],i.passcode=t[1],e=t[2],n=t[3],i.host=t[4]}return[i,e,n]},e.prototype.connect=function(){var e,o,a,l;return e=1<=arguments.length?s.call(arguments,0):[],l=this._parseConnect.apply(this,e),a=l[0],this.connectCallback=l[1],o=l[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(e){return function(r){var s,a,l,c,u,h,d,f,p,m,g,v,y;if(c="undefined"!=typeof ArrayBuffer&&r.data instanceof ArrayBuffer?(s=new Uint8Array(r.data),"function"==typeof e.debug&&e.debug("--- got data length: "+s.length),function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)a=s[t],n.push(String.fromCharCode(a));return n}().join("")):r.data,e.serverActivity=n(),c!==t.LF){for("function"==typeof e.debug&&e.debug("<<< "+c),p=i.unmarshall(e.partialData+c),e.partialData=p.partial,y=[],m=0,g=(v=p.frames).length;m<g;m++)switch(u=v[m],u.command){case"CONNECTED":"function"==typeof e.debug&&e.debug("connected to server "+u.headers.server),e.connected=!0,e._setupHeartbeat(u.headers),y.push("function"==typeof e.connectCallback?e.connectCallback(u):void 0);break;case"MESSAGE":f=u.headers.subscription,(d=e.subscriptions[f]||e.onreceive)?(l=e,h=u.headers["message-id"],u.ack=function(t){return null==t&&(t={}),l.ack(h,f,t)},u.nack=function(t){return null==t&&(t={}),l.nack(h,f,t)},y.push(d(u))):y.push("function"==typeof e.debug?e.debug("Unhandled received MESSAGE: "+u):void 0);break;case"RECEIPT":y.push("function"==typeof e.onreceipt?e.onreceipt(u):void 0);break;case"ERROR":y.push("function"==typeof o?o(u):void 0);break;default:y.push("function"==typeof e.debug?e.debug("Unhandled frame: "+u):void 0)}return y}"function"==typeof e.debug&&e.debug("<<< PONG")}}(this),this.ws.onclose=function(t){return function(){var e;return e="Whoops! Lost connection to "+t.ws.url,"function"==typeof t.debug&&t.debug(e),t._cleanUp(),"function"==typeof o?o(e):void 0}}(this),this.ws.onopen=function(t){return function(){return"function"==typeof t.debug&&t.debug("Web Socket Opened..."),a["accept-version"]=r.VERSIONS.supportedVersions(),a["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(","),t._transmit("CONNECT",a)}}(this)},e.prototype.disconnect=function(t,e){return null==e&&(e={}),this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof t?t():void 0},e.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&r.clearInterval(this.pinger),this.ponger)return r.clearInterval(this.ponger)},e.prototype.send=function(t,e,n){return null==e&&(e={}),null==n&&(n=""),e.destination=t,this._transmit("SEND",e,n)},e.prototype.subscribe=function(t,e,n){var i;return null==n&&(n={}),n.id||(n.id="sub-"+this.counter++),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),i=this,{id:n.id,unsubscribe:function(){return i.unsubscribe(n.id)}}},e.prototype.unsubscribe=function(t){return delete this.subscriptions[t],this._transmit("UNSUBSCRIBE",{id:t})},e.prototype.begin=function(t){var e,n;return n=t||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:n}),e=this,{id:n,commit:function(){return e.commit(n)},abort:function(){return e.abort(n)}}},e.prototype.commit=function(t){return this._transmit("COMMIT",{transaction:t})},e.prototype.abort=function(t){return this._transmit("ABORT",{transaction:t})},e.prototype.ack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("ACK",n)},e.prototype.nack=function(t,e,n){return null==n&&(n={}),n["message-id"]=t,n.subscription=e,this._transmit("NACK",n)},e}(),r={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(t,e){var i;return null==e&&(e=["v10.stomp","v11.stomp"]),i=new(r.WebSocketClass||WebSocket)(t,e),new n(i)},over:function(t){return new n(t)},Frame:i},null!==e&&(e.Stomp=r),"undefined"!=typeof window&&null!==window?(r.setInterval=function(t,e){return window.setInterval(e,t)},r.clearInterval=function(t){return window.clearInterval(t)},window.Stomp=r):e||(self.Stomp=r)}.call(this),angular.module("ngStomp",[]).service("$stomp",["$rootScope","$q",function(t,e){this.sock=null,this.stomp=null,this.debug=null,this.setDebug=function(t){this.debug=t},this.connect=function(t,n,i,r){n=n||{},r=r||{};var o=e.defer();return this.sock=new SockJS(t,null,r),this.sock.onclose=function(){angular.isFunction(i)&&i(new Error("Connection broken"))},this.stomp=Stomp.over(this.sock),this.stomp.debug=this.debug,this.stomp.connect(n,function(t){o.resolve(t)},function(t){o.reject(t),angular.isFunction(i)&&i(t)}),o.promise},this.disconnect=function(){var t=e.defer();return this.stomp.disconnect(t.resolve),t.promise},this.subscribe=this.on=function(t,e,n){return n=n||{},this.stomp.subscribe(t,function(t){var n=null;try{n=JSON.parse(t.body)}finally{e&&e(n,t.headers,t)}},n)},this.unsubscribe=this.off=function(t){t.unsubscribe()},this.send=function(t,n,i){var r=e.defer();try{var o=JSON.stringify(n);i=i||{},this.stomp.send(t,i,o),r.resolve()}catch(t){r.reject(t)}return r.promise}}])}).call(this,n(7))},function(t,e){angular.module("angular-toArrayFilter",[]).filter("toArray",function(){return function(t,e){return angular.isObject(t)?!1===e?Object.keys(t).map(function(e){return t[e]}):Object.keys(t).map(function(e){var n=t[e];return angular.isObject(n)?Object.defineProperty(n,"$key",{enumerable:!1,value:e}):{$key:e,$value:n}}):t}})},function(t,e,n){var i;
/*!
 * angular-translate - v2.18.1 - 2018-05-19
 * 
 * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(i=function(){return function(){function t(t){"use strict";var e=t.storageKey(),n=t.storage(),i=function(){var i=t.preferredLanguage();angular.isString(i)?t.use(i):n.put(e,t.use())};i.displayName="fallbackFromIncorrectStorageValue",n?n.get(e)?t.use(n.get(e)).catch(i):i():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}function e(t,e,n,i){"use strict";var r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,_={},w=[],S=t,x=[],C="translate-cloak",k=!1,T=!1,M=".",E=!1,A=!1,I=0,$=!0,D="default",L={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return e}return n.join("-")},"iso639-1":function(t){return(t||"").split("_").join("-").split("-")[0].toLowerCase()}},P=function(){if(angular.isFunction(i.getLocale))return i.getLocale();var t,n,r=e.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(r.languages))for(t=0;t<r.languages.length;t++)if((n=r.languages[t])&&n.length)return n;for(t=0;t<o.length;t++)if((n=r[o[t]])&&n.length)return n;return null};P.displayName="angular-translate/service: getFirstBrowserLanguage";var O=function(){var t=P()||"";return L[D]&&(t=L[D](t)),t};O.displayName="angular-translate/service: getLocale";var N=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j=function(){return this.toString().replace(/^\s+|\s+$/g,"")},R=function(t){return angular.isString(t)?t.toLowerCase():t},B=function(t){if(t){for(var e,n=[],i=R(t),r=0,s=w.length;r<s;r++)n.push(R(w[r]));if((r=N(n,i))>-1)return w[r];if(o)for(var a in o)if(o.hasOwnProperty(a)){var l=!1,c=Object.prototype.hasOwnProperty.call(o,a)&&R(a)===R(t);if("*"===a.slice(-1)&&(l=R(a.slice(0,-1))===R(t.slice(0,a.length-1))),(c||l)&&(e=o[a],N(n,R(e))>-1))return e}var u=t.split("_");return u.length>1&&N(n,R(u[0]))>-1?u[0]:void 0}},F=function(t,e){if(!t&&!e)return _;if(t&&!e){if(angular.isString(t))return _[t]}else angular.isObject(_[t])||(_[t]={}),angular.extend(_[t],Y(e));return this};this.translations=F,this.cloakClassName=function(t){return t?(C=t,this):C},this.nestedObjectDelimeter=function(t){return t?(M=t,this):M};var Y=function(t,e,n,i){var r,o,s;for(r in e||(e=[]),n||(n={}),t)Object.prototype.hasOwnProperty.call(t,r)&&(s=t[r],angular.isObject(s)?Y(s,e.concat(r),n,r):(o=e.length?""+e.join(M)+M+r:r,e.length&&r===i&&(n[""+e.join(M)]="@:"+o),n[o]=s));return n};Y.displayName="flatObject",this.addInterpolation=function(t){return x.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return f=t,this},this.useSanitizeValueStrategy=function(t){return n.useStrategy(t),this},this.preferredLanguage=function(t){return t?(H(t),this):r};var H=function(t){return t&&(r=t),r};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(g=t,this):g},this.translationNotFoundIndicatorRight=function(t){return t?(v=t,this):v},this.fallbackLanguage=function(t){return W(t),this};var W=function(t){return t?(angular.isString(t)?(a=!0,s=[t]):angular.isArray(t)&&(a=!1,s=t),angular.isString(r)&&N(s,r)<0&&s.push(r),this):a?s[0]:s};this.use=function(t){if(t){if(!_[t]&&!p)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return l=t,this}return l},this.resolveClientLocale=function(){return O()};var z=function(t){return t?(S=t,this):h?h+S:S};this.storageKey=z,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return p=t,m=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return u=t,this},this.storagePrefix=function(t){return t?(h=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return d=t,this},this.usePostCompiling=function(t){return k=!!t,this},this.forceAsyncReload=function(t){return T=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},D=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():O();return r=w.length&&B(e)||e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(w=t,e&&(o=e),this):w},this.useLoaderCache=function(t){return!1===t?y=void 0:!0===t?y=!0:void 0===t?y="$translationCache":t&&(y=t),this},this.directivePriority=function(t){return void 0===t?I:(I=t,this)},this.statefulFilter=function(t){return void 0===t?$:($=t,this)},this.postProcess=function(t){return b=t||void 0,this},this.keepContent=function(t){return A=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,e,n,i){var o,h,D,L=e.get(f||"$translateDefaultInterpolation"),P=!1,R={},U={},V=function(t,e,n,a,c,d){!l&&r&&(l=r);var f=c&&c!==l?B(c)||c:l;if(c&&ot(c),angular.isArray(t))return function(t){for(var r={},o=[],s=function(t){var o=i.defer(),s=function(e){r[t]=e,o.resolve([t,e])};return V(t,e,n,a,c,d).then(s,s),o.promise},l=0,u=t.length;l<u;l++)o.push(s(t[l]));return i.all(o).then(function(){return r})}(t);var p=i.defer();t&&(t=j.apply(t));var m=function(){var t=U[f]||U[r];if(h=0,u&&!t){var e=o.get(S);if(t=U[e],s&&s.length){var n=N(s,e);h=0===n?1:0,N(s,r)<0&&s.push(r)}}return t}();if(m){var g=function(){c||(f=l),nt(t,e,n,a,f,d).then(p.resolve,p.reject)};g.displayName="promiseResolved",m.finally(g).catch(angular.noop)}else nt(t,e,n,a,f,d).then(p.resolve,p.reject);return p.promise},G=function(t){return g&&(t=[g,t].join(" ")),v&&(t=[t,v].join(" ")),t},q=function(t){l=t,u&&o.put(V.storageKey(),l),n.$emit("$translateChangeSuccess",{language:t}),L.setLocale(l);var e=function(t,e){R[e].setLocale(l)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(R,e),n.$emit("$translateChangeEnd",{language:t})},X=function(t){if(!t)throw"No language key specified for loading.";var r=i.defer();n.$emit("$translateLoadingStart",{language:t}),P=!0;var o=y;"string"==typeof o&&(o=e.get(o));var s=angular.extend({},m,{key:t,$http:angular.extend({},{cache:o},m.$http)}),a=function(e){var i={};n.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(e)?angular.forEach(e,function(t){angular.extend(i,Y(t))}):angular.extend(i,Y(e)),P=!1,r.resolve({key:t,table:i}),n.$emit("$translateLoadingEnd",{language:t})};a.displayName="onLoaderSuccess";var l=function(t){n.$emit("$translateLoadingError",{language:t}),r.reject(t),n.$emit("$translateLoadingEnd",{language:t})};return l.displayName="onLoaderError",e.get(p)(s).then(a,l),r.promise};if(u&&(!(o=e.get(u)).get||!o.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if(x.length){var K=function(t){var n=e.get(t);n.setLocale(r||l),R[n.getInterpolationIdentifier()]=n};K.displayName="interpolationFactoryAdder",angular.forEach(x,K)}var J=function(t,e,n,r,o){var s=i.defer(),a=function(i){if(Object.prototype.hasOwnProperty.call(i,e)&&null!==i[e]){r.setLocale(t);var a=i[e];if("@:"===a.substr(0,2))J(t,a.substr(2),n,r,o).then(s.resolve,s.reject);else{var c=r.interpolate(i[e],n,"service",o,e);c=rt(e,i[e],c,n,t),s.resolve(c)}r.setLocale(l)}else s.reject()};return a.displayName="fallbackTranslationResolver",function(t){var e=i.defer();if(Object.prototype.hasOwnProperty.call(_,t))e.resolve(_[t]);else if(U[t]){var n=function(t){F(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",U[t].then(n,e.reject)}else e.reject();return e.promise}(t).then(a,s.reject),s.promise},Z=function(t,e,n,i,r){var o,s=_[t];if(s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){if(i.setLocale(t),o=i.interpolate(s[e],n,"filter",r,e),o=rt(e,s[e],o,n,t,r),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var a=o.$$unwrapTrustedValue();if("@:"===a.substr(0,2))return Z(t,a.substr(2),n,i,r)}else if("@:"===o.substr(0,2))return Z(t,o.substr(2),n,i,r);i.setLocale(l)}return o},Q=function(t,n,i,r){return d?e.get(d)(t,l,n,i,r):t},tt=function(t,e,n,r,o,a){var l=i.defer();if(t<s.length){var c=s[t];J(c,e,n,r,a).then(function(t){l.resolve(t)},function(){return tt(t+1,e,n,r,o,a).then(l.resolve,l.reject)})}else if(o)l.resolve(o);else{var u=Q(e,n,o);d&&u?l.resolve(u):l.reject(G(e))}return l.promise},et=function(t,e,n,i,r){var o;if(t<s.length){var a=s[t];(o=Z(a,e,n,i,r))||""===o||(o=et(t+1,e,n,i))}return o},nt=function(t,e,n,r,o,a){var l=i.defer(),c=o?_[o]:_,u=n?R[n]:L;if(c&&Object.prototype.hasOwnProperty.call(c,t)&&null!==c[t]){var f=c[t];if("@:"===f.substr(0,2))V(f.substr(2),e,n,r,o,a).then(l.resolve,l.reject);else{var p=u.interpolate(f,e,"service",a,t);p=rt(t,f,p,e,o),l.resolve(p)}}else{var m;d&&!P&&(m=Q(t,e,r)),o&&s&&s.length?function(t,e,n,i,r){return tt(D>0?D:h,t,e,n,i,r)}(t,e,u,r,a).then(function(t){l.resolve(t)},function(t){l.reject(G(t))}):d&&!P&&m?r?l.resolve(r):l.resolve(m):r?l.resolve(r):l.reject(G(t))}return l.promise},it=function(t,e,n,i,r){var o,a=i?_[i]:_,l=L;if(R&&Object.prototype.hasOwnProperty.call(R,n)&&(l=R[n]),a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){var c=a[t];"@:"===c.substr(0,2)?o=it(c.substr(2),e,n,i,r):(o=l.interpolate(c,e,"filter",r,t),o=rt(t,c,o,e,i,r))}else{var u;d&&!P&&(u=Q(t,e,r)),i&&s&&s.length?(h=0,o=function(t,e,n,i){return et(D>0?D:h,t,e,n,i)}(t,e,l,r)):o=d&&!P&&u?u:G(t)}return o},rt=function(t,n,i,r,o,s){var a=b;return a&&("string"==typeof a&&(a=e.get(a)),a)?a(t,n,i,r,o,s):i},ot=function(t){_[t]||!p||U[t]||(U[t]=X(t).then(function(t){return F(t.key,t.table),t}))};V.preferredLanguage=function(t){return t&&H(t),r},V.cloakClassName=function(){return C},V.nestedObjectDelimeter=function(){return M},V.fallbackLanguage=function(t){if(null!=t){if(W(t),p&&s&&s.length)for(var e=0,n=s.length;e<n;e++)U[s[e]]||(U[s[e]]=X(s[e]));V.use(V.use())}return a?s[0]:s},V.useFallbackLanguage=function(t){if(null!=t)if(t){var e=N(s,t);e>-1&&(D=e)}else D=0},V.proposedLanguage=function(){return c},V.storage=function(){return o},V.negotiateLocale=B,V.use=function(t){if(!t)return l;var e=i.defer();e.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:t});var r=B(t);return w.length>0&&!r?i.reject(t):(r&&(t=r),c=t,!T&&_[t]||!p||U[t]?U[t]?U[t].then(function(t){return c===t.key&&q(t.key),e.resolve(t.key),t},function(t){return!l&&s&&s.length>0&&s[0]!==t?V.use(s[0]).then(e.resolve,e.reject):e.reject(t)}):(e.resolve(t),q(t)):(U[t]=X(t).then(function(n){return F(n.key,n.table),e.resolve(n.key),c===t&&q(n.key),n},function(t){return n.$emit("$translateChangeError",{language:t}),e.reject(t),n.$emit("$translateChangeEnd",{language:t}),i.reject(t)}),U[t].finally(function(){!function(t){c===t&&(c=void 0),U[t]=void 0}(t)}).catch(angular.noop)),e.promise)},V.resolveClientLocale=function(){return O()},V.storageKey=function(){return z()},V.isPostCompilingEnabled=function(){return k},V.isForceAsyncReloadEnabled=function(){return T},V.isKeepContent=function(){return A},V.refresh=function(t){if(!p)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:t});var e=i.defer(),r={};function o(t){var e=X(t);return U[t]=e,e.then(function(e){_[t]={},F(t,e.table),r[t]=!0},angular.noop),e}if(e.promise.then(function(){for(var t in _)_.hasOwnProperty(t)&&(t in r||delete _[t]);l&&q(l)},angular.noop).finally(function(){n.$emit("$translateRefreshEnd",{language:t})}),t)_[t]?o(t).then(e.resolve,e.reject):e.reject();else{var a=s&&s.slice()||[];l&&-1===a.indexOf(l)&&a.push(l),i.all(a.map(o)).then(e.resolve,e.reject)}return e.promise},V.instant=function(t,e,n,i,o){var a=i&&i!==l?B(i)||i:l;if(null===t||angular.isUndefined(t))return t;if(i&&ot(i),angular.isArray(t)){for(var c={},u=0,h=t.length;u<h;u++)c[t[u]]=V.instant(t[u],e,n,i,o);return c}if(angular.isString(t)&&t.length<1)return t;t&&(t=j.apply(t));var f,p,m=[];r&&m.push(r),a&&m.push(a),s&&s.length&&(m=m.concat(s));for(var y=0,b=m.length;y<b;y++){var w=m[y];if(_[w]&&void 0!==_[w][t]&&(f=it(t,e,n,a,o)),void 0!==f)break}return f||""===f||(g||v?f=G(t):(f=L.interpolate(t,e,"filter",o),d&&!P&&(p=Q(t,e,o)),d&&!P&&p&&(f=p))),f},V.versionInfo=function(){return"2.18.1"},V.loaderCache=function(){return y},V.directivePriority=function(){return I},V.statefulFilter=function(){return $},V.isReady=function(){return E};var st=i.defer();st.promise.then(function(){E=!0}),V.onReady=function(t){var e=i.defer();return angular.isFunction(t)&&e.promise.then(t),E?e.resolve():st.promise.then(e.resolve),e.promise},V.getAvailableLanguageKeys=function(){return w.length>0?w:null},V.getTranslationTable=function(t){return(t=t||V.use())&&_[t]?angular.copy(_[t]):null};var at=n.$on("$translateReady",function(){st.resolve(),at(),at=null}),lt=n.$on("$translateChangeEnd",function(){st.resolve(),lt(),lt=null});if(p){if(angular.equals(_,{})&&V.use()&&V.use(V.use()),s&&s.length)for(var ct=function(t){return F(t.key,t.table),n.$emit("$translateChangeEnd",{language:t.key}),t},ut=0,ht=s.length;ut<ht;ut++){var dt=s[ut];!T&&_[dt]||(U[dt]=X(dt).then(ct))}}else n.$emit("$translateReady",{language:V.use()});return V}]}function n(t,e){"use strict";var n={setLocale:function(t){},getInterpolationIdentifier:function(){return"default"},useSanitizeValueStrategy:function(t){return e.useStrategy(t),this},interpolate:function(n,i,r,o,s){var a;return i=i||{},i=e.sanitize(i,"params",o,r),angular.isNumber(n)?a=""+n:angular.isString(n)?(a=t(n)(i),a=e.sanitize(a,"text",o,r)):a="",a}};return n}function i(t,e,n,i,r){"use strict";var o=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:t.directivePriority(),compile:function(s,a){var l=a.translateValues?a.translateValues:void 0,c=a.translateInterpolation?a.translateInterpolation:void 0,u=a.translateSanitizeStrategy?a.translateSanitizeStrategy:void 0,h=s[0].outerHTML.match(/translate-value-+/i),d="^(.*)("+e.startSymbol()+".*"+e.endSymbol()+")(.*)",f="^(.*)"+e.startSymbol()+"(.*)"+e.endSymbol()+"(.*)";return function(s,p,m){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(s);var g={},v=function(t){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var n=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(p.text()),i=n.match(d);if(angular.isArray(i)){s.preText=i[1],s.postText=i[3],g.translate=e(i[2])(s.$parent);var r=n.match(f);angular.isArray(r)&&r[2]&&r[2].length&&(v._unwatchOld=s.$watch(r[2],function(t){g.translate=t,x()}))}else g.translate=n||void 0}else g.translate=t;x()},y=function(t){m.$observe(t,function(e){g[t]=e,x()})};!function(t,e,n){if(e.translateValues&&angular.extend(t,i(e.translateValues)(s.$parent)),h)for(var r in n)Object.prototype.hasOwnProperty.call(e,r)&&"translateValue"===r.substr(0,14)&&"translateValues"!==r&&(t[o(r.substr(14,1))+r.substr(15)]=n[r])}(s.interpolateParams,m,a);var b=!0;for(var _ in m.$observe("translate",function(t){void 0===t?v(""):""===t&&b||(g.translate=t,x()),b=!1}),m)m.hasOwnProperty(_)&&"translateAttr"===_.substr(0,13)&&_.length>13&&y(_);if(m.$observe("translateDefault",function(t){s.defaultText=t,x()}),u&&m.$observe("translateSanitizeStrategy",function(t){s.sanitizeStrategy=i(t)(s.$parent),x()}),l&&m.$observe("translateValues",function(t){t&&s.$parent.$watch(function(){angular.extend(s.interpolateParams,i(t)(s.$parent))})}),h){var w=function(t){m.$observe(t,function(e){var n=o(t.substr(14,1))+t.substr(15);s.interpolateParams[n]=e})};for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&"translateValue"===S.substr(0,14)&&"translateValues"!==S&&w(S)}var x=function(){for(var t in g)g.hasOwnProperty(t)&&void 0!==g[t]&&C(t,g[t],s,s.interpolateParams,s.defaultText,s.translateNamespace)},C=function(e,n,i,r,o,s){n?(s&&"."===n.charAt(0)&&(n=s+n),t(n,r,c,o,i.translateLanguage,i.sanitizeStrategy).then(function(t){k(t,i,!0,e)},function(t){k(t,i,!1,e)})):k(n,i,!1,e)},k=function(e,i,r,o){if(r||void 0!==i.defaultText&&(e=i.defaultText),"translate"===o){(r||!r&&!t.isKeepContent()&&void 0===m.translateKeepContent)&&p.empty().append(i.preText+e+i.postText);var s=t.isPostCompilingEnabled(),l=void 0!==a.translateCompile,c=l&&"false"!==a.translateCompile;(s&&!l||c)&&n(p.contents())(i)}else{var u=m.$attr[o];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),p.attr(u,e)}};(l||h||m.translateDefault)&&s.$watch("interpolateParams",x,!0),s.$on("translateLanguageChanged",x);var T=r.$on("$translateChangeSuccess",x);p.text().length?m.translate?v(m.translate):v(""):m.translate&&v(m.translate),x(),s.$on("$destroy",T)}}}}function r(t,e){"use strict";return{restrict:"A",priority:t.directivePriority(),link:function(n,i,r){var s,a,l,c={},u=function(){angular.forEach(s,function(e,o){e&&(c[o]=!0,n.translateNamespace&&"."===e.charAt(0)&&(e=n.translateNamespace+e),t(e,a,r.translateInterpolation,void 0,n.translateLanguage,l).then(function(t){i.attr(o,t)},function(t){i.attr(o,t)}))}),angular.forEach(c,function(t,e){s[e]||(i.removeAttr(e),delete c[e])})};o(n,r.translateAttr,function(t){s=t},u),o(n,r.translateValues,function(t){a=t},u),o(n,r.translateSanitizeStrategy,function(t){l=t},u),r.translateValues&&n.$watch(r.translateValues,u,!0),n.$on("translateLanguageChanged",u);var h=e.$on("$translateChangeSuccess",u);u(),n.$on("$destroy",h)}}}function o(t,e,n,i){"use strict";e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,function(t){n(t),i()},!0),n(t.$eval(e)))}function s(t,e){"use strict";return{compile:function(n){var i=function(e){e.addClass(t.cloakClassName())};return i(n),function(n,r,o){var s=function(e){e.removeClass(t.cloakClassName())}.bind(this,r),a=i.bind(this,r);o.translateCloak&&o.translateCloak.length?(o.$observe("translateCloak",function(e){t(e).then(s,a)}),e.$on("$translateChangeSuccess",function(){t(o.translateCloak).then(s,a)})):t.onReady(s)}}}}function a(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(t,e,n){n.$observe("translateLanguage",function(e){t.translateLanguage=e}),t.$watch("translateLanguage",function(){t.$broadcast("translateLanguageChanged")})}}}}function c(t,e){"use strict";var n=function(n,i,r,o){if(!angular.isObject(i)){var s=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};i=t(i)(s)}return e.instant(n,i,r,o)};return e.statefulFilter()&&(n.$stateful=!0),n}function u(t){"use strict";return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],r.$inject=["$translate","$rootScope"],s.$inject=["$translate","$rootScope"],c.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var t,e,n,i=null,r=!1,o=!1;(n={sanitize:function(t,e){return"text"===e&&(t=a(t)),t},escape:function(t,e){return"text"===e&&(t=s(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=c(t,a)),t},escapeParameters:function(t,e){return"params"===e&&(t=c(t,s)),t},sce:function(t,e,n){return"text"===e?t=l(t):"params"===e&&"filter"!==n&&(t=c(t,s)),t},sceParameters:function(t,e){return"params"===e&&(t=c(t,l)),t}}).escaped=n.escapeParameters,this.addStrategy=function(t,e){return n[t]=e,this},this.removeStrategy=function(t){return delete n[t],this},this.useStrategy=function(t){return r=!0,i=t,this},this.$get=["$injector","$log",function(s,a){var l={};return s.has("$sanitize")&&(t=s.get("$sanitize")),s.has("$sce")&&(e=s.get("$sce")),{useStrategy:function(t){return function(e){t.useStrategy(e)}}(this),sanitize:function(t,e,c,u){return i||r||o||(a.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0),c||null===c||(c=i),c?(u||(u="service"),function(t,e,i,r){return angular.forEach(r,function(r){if(angular.isFunction(r))t=r(t,e,i);else if(angular.isFunction(n[r]))t=n[r](t,e,i);else{if(!angular.isString(n[r]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'");if(!l[n[r]])try{l[n[r]]=s.get(n[r])}catch(t){throw l[n[r]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'")}t=l[n[r]](t,e,i)}}),t}(t,e,u,angular.isArray(c)?c:[c])):t}}}];var s=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},a=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return t(e)},l=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return e.trustAsHtml(t)},c=function(t,e,n){if(angular.isDate(t))return t;if(angular.isObject(t)){var i=angular.isArray(t)?[]:{};if(n){if(n.indexOf(t)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(t),angular.forEach(t,function(t,r){angular.isFunction(t)||(i[r]=c(t,e,n))}),n.splice(-1,1),i}return angular.isNumber(t)?t:!0===t||!1===t?t:angular.isUndefined(t)||null===t?t:e(t)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",r),r.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",s),s.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",a),a.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",c),c.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"}()}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;
/*!
 * angular-translate - v2.18.1 - 2018-05-19
 * 
 * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(i=function(){return function(){function t(){"use strict";function t(t,e,n){this.name=t,this.isActive=!0,this.tables={},this.priority=e||0,this.langPromises={},this.urlTemplate=n}t.prototype.parseUrl=function(t,e){return angular.isFunction(t)?t(this.name,e):t.replace(/\{part\}/g,this.name).replace(/\{lang\}/g,e)},t.prototype.getTable=function(t,e,n,i,r,o){var s=this,a=this.langPromises[t],l=e.defer(),c=function(e){s.tables[t]=e,l.resolve(e)},u=function(){l.reject(s.name)},h=function(){n(angular.extend({method:"GET",url:s.parseUrl(s.urlTemplate||r,t)},i)).then(function(t){c(t.data)},function(e){o?o(s.name,t,e).then(c,u):u()})};return this.tables[t]?l.resolve(this.tables[t]):(a?a.then(l.resolve,h):h(),this.langPromises[t]=l.promise),l.promise};var e={};function n(t){return Object.prototype.hasOwnProperty.call(e,t)}function i(t){return angular.isString(t)&&""!==t}function r(t){if(!i(t))throw new TypeError("Invalid type of a first argument, a non-empty string expected.");return n(t)&&e[t].isActive}function o(){var t=[];for(var n in e)e[n].isActive&&t.push(e[n]);return t.sort(function(t,e){return t.priority-e.priority}),t}this.addPart=function(r,o,s){if(!i(r))throw new TypeError("Couldn't add part, part name has to be a string!");return n(r)||(e[r]=new t(r,o,s)),e[r].isActive=!0,this},this.setPart=function(r,o,s){if(!i(r))throw new TypeError("Couldn't set part.`lang` parameter has to be a string!");if(!i(o))throw new TypeError("Couldn't set part.`part` parameter has to be a string!");if("object"!=typeof s||null===s)throw new TypeError("Couldn't set part. `table` parameter has to be an object!");return n(o)||(e[o]=new t(o),e[o].isActive=!1),e[o].tables[r]=s,this},this.deletePart=function(t){if(!i(t))throw new TypeError("Couldn't delete part, first arg has to be string.");return n(t)&&(e[t].isActive=!1),this},this.isPartAvailable=r,this.$get=["$rootScope","$injector","$q","$http","$log",function(s,a,l,c,u){var h=function(t){if(!i(t.key))throw new TypeError("Unable to load data, a key is not a non-empty string.");if(!i(t.urlTemplate)&&!angular.isFunction(t.urlTemplate))throw new TypeError("Unable to load data, a urlTemplate is not a non-empty string or not a function.");var e=t.loadFailureHandler;if(void 0!==e){if(!angular.isString(e))throw new Error("Unable to load data, a loadFailureHandler is not a string.");e=a.get(e)}var n=[],r=o();angular.forEach(r,function(i){n.push(i.getTable(t.key,l,c,t.$http,t.urlTemplate,e)),i.urlTemplate=i.urlTemplate||t.urlTemplate});var d=!1,f=s.$on("$translatePartialLoaderStructureChanged",function(){d=!0});return l.all(n).then(function(){if(f(),d){if(!t.__retries)return t.__retries=(t.__retries||0)+1,h(t);u.warn("The partial loader has detected a multiple structure change (with addPort/removePart) while loading translations. You should consider using promises of $translate.use(lang) and $translate.refresh(). Also parts should be added/removed right before an explicit refresh if possible.")}var e={};return r=o(),angular.forEach(r,function(n){!function t(e,n){for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?(e[i]=e[i]||{},t(e[i],n[i])):e[i]=n[i];return e}(e,n.tables[t.key])}),e},function(){return f(),l.reject(t.key)})};return h.addPart=function(r,o,a){if(!i(r))throw new TypeError("Couldn't add part, first arg has to be a string");return n(r)?e[r].isActive||(e[r].isActive=!0,s.$emit("$translatePartialLoaderStructureChanged",r)):(e[r]=new t(r,o,a),s.$emit("$translatePartialLoaderStructureChanged",r)),h},h.deletePart=function(t,r){if(!i(t))throw new TypeError("Couldn't delete part, first arg has to be string");if(void 0===r)r=!1;else if("boolean"!=typeof r)throw new TypeError("Invalid type of a second argument, a boolean expected.");if(n(t)){var o=e[t].isActive;if(r){var l=a.get("$translate").loaderCache();"string"==typeof l&&(l=a.get(l)),"object"==typeof l&&angular.forEach(e[t].tables,function(n,i){l.remove(e[t].parseUrl(e[t].urlTemplate,i))}),delete e[t]}else e[t].isActive=!1;o&&s.$emit("$translatePartialLoaderStructureChanged",t)}return h},h.isPartLoaded=function(t,n){return angular.isDefined(e[t])&&angular.isDefined(e[t].tables[n])},h.getRegisteredParts=function(){var t=[];return angular.forEach(e,function(e){e.isActive&&t.push(e.name)}),t},h.isPartAvailable=r,h}]}return angular.module("pascalprecht.translate").provider("$translatePartialLoader",t),t.displayName="$translatePartialLoader","pascalprecht.translate"}()}.apply(e,[]))||(t.exports=i)},function(t,e,n){
/**
 * State-based routing for AngularJS
 * @version v0.3.2
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
t.exports===e&&(t.exports="ui.router"),function(t,e,n){"use strict";var i,r=e.isDefined,o=e.isFunction,s=e.isString,a=e.isObject,l=e.isArray,c=e.forEach,u=e.extend,h=e.copy,d=e.toJson;function f(t,e){return u(new(u(function(){},{prototype:t})),e)}function p(t){return c(arguments,function(e){e!==t&&c(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function m(t){if(Object.keys)return Object.keys(t);var e=[];return c(t,function(t,n){e.push(n)}),e}function g(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,i=Number(arguments[2])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=n);i<n;i++)if(i in t&&t[i]===e)return i;return-1}function v(t,e,n,i){var r,o=function(t,e){var n=[];for(var i in t.path){if(t.path[i]!==e.path[i])break;n.push(t.path[i])}return n}(n,i),s={},a=[];for(var l in o)if(o[l]&&o[l].params&&(r=m(o[l].params)).length)for(var c in r)g(a,r[c])>=0||(a.push(r[c]),s[r[c]]=t[r[c]]);return u({},s,e)}function y(t,e,n){if(!n)for(var i in n=[],t)n.push(i);for(var r=0;r<n.length;r++){var o=n[r];if(t[o]!=e[o])return!1}return!0}function b(t,e){var n={};return c(t,function(t){n[t]=e[t]}),n}function _(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return c(n,function(n){n in t&&(e[n]=t[n])}),e}function w(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in t)-1==g(n,i)&&(e[i]=t[i]);return e}function S(t,e){var n=l(t),i=n?[]:{};return c(t,function(t,r){e(t,r)&&(i[n?i.length:r]=t)}),i}function x(t,e){var n=l(t)?[]:{};return c(t,function(t,i){n[i]=e(t,i)}),n}function C(t){return t.then(n,function(){})&&t}function k(t,e){var i=1,o=2,l={},h=[],d=l,f=u(t.when(l),{$$promises:l,$$values:l});this.study=function(l){if(!a(l))throw new Error("'invocables' must be an object");var v=m(l||{}),y=[],b=[],_={};function S(t){return a(t)&&t.then&&t.$$promises}return c(l,function t(n,r){if(_[r]!==o){if(b.push(r),_[r]===i)throw b.splice(0,g(b,r)),new Error("Cyclic dependency: "+b.join(" -> "));if(_[r]=i,s(n))y.push(r,[function(){return e.get(n)}],h);else{var a=e.annotate(n);c(a,function(e){e!==r&&l.hasOwnProperty(e)&&t(l[e],e)}),y.push(r,n,a)}b.pop(),_[r]=o}}),l=b=_=null,function(i,o,s){if(S(i)&&s===n&&(s=o,o=i,i=null),i){if(!a(i))throw new Error("'locals' must be an object")}else i=d;if(o){if(!S(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var l=t.defer(),h=l.promise,m=h.$$promises={},g=u({},i),b=1+y.length/3,_=!1;function x(){--b||(_||p(g,o.$$values),h.$$values=g,h.$$promises=h.$$promises||!0,delete h.$$inheritedValues,l.resolve(g))}function C(t){h.$$failure=t,l.reject(t)}if(r(o.$$failure))return C(o.$$failure),h;o.$$inheritedValues&&p(g,w(o.$$inheritedValues,v)),u(m,o.$$promises),o.$$values?(_=p(g,w(o.$$values,v)),h.$$inheritedValues=w(o.$$values,v),x()):(o.$$inheritedValues&&(h.$$inheritedValues=w(o.$$inheritedValues,v)),o.then(x,C));for(var k=0,T=y.length;k<T;k+=3)i.hasOwnProperty(y[k])?x():M(y[k],y[k+1],y[k+2]);function M(n,o,a){var l=t.defer(),u=0;function d(t){l.reject(t),C(t)}function f(){if(!r(h.$$failure))try{l.resolve(e.invoke(o,s,g)),l.promise.then(function(t){g[n]=t,x()},d)}catch(t){d(t)}}c(a,function(t){m.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(u++,m[t].then(function(e){g[t]=e,--u||f()},d))}),u||f(),m[n]=l.promise}return h}},this.resolve=function(t,e,n,i){return this.study(t)(e,n,i)}}function T(t,e,n){this.fromConfig=function(t,e,n){return r(t.template)?this.fromString(t.template,e):r(t.templateUrl)?this.fromUrl(t.templateUrl,e):r(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return o(t)?t(e):t},this.fromUrl=function(n,i){return o(n)&&(n=n(i)),null==n?null:t.get(n,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,i){return n.invoke(t,null,i||{params:e})}}function M(t,e,r){e=u({params:{}},a(e)?e:{});var o,s,l,c,h=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p="^",m=0,g=this.segments=[],v=r?r.params:{},y=this.params=r?r.params.$$new():new i.ParamSet,b=[];function _(e,n,r,o){if(b.push(e),v[e])return v[e];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(y[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return y[e]=new i.Param(e,n,r,o),y[e]}function w(t,e,n,i){var r=["",""],o=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return o;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:o=o.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+n+"|",")?"]}return o+r[0]+e+r[1]}function S(r,o){var s,a,l,c,u;return s=r[2]||r[3],u=e.params[s],l=t.substring(m,r.index),(a=o?r[4]:r[4]||("*"==r[1]?".*":null))&&(c=i.type(a)||f(i.type("string"),{pattern:new RegExp(a,e.caseInsensitive?"i":n)})),{id:s,regexp:a,segment:l,type:c,cfg:u}}for(this.source=t;(o=h.exec(t))&&!((s=S(o,!1)).segment.indexOf("?")>=0);)l=_(s.id,s.type,s.cfg,"path"),p+=w(s.segment,l.type.pattern.source,l.squash,l.isOptional),g.push(s.segment),m=h.lastIndex;var x=(c=t.substring(m)).indexOf("?");if(x>=0){var C=this.sourceSearch=c.substring(x);if(c=c.substring(0,x),this.sourcePath=t.substring(0,m+x),C.length>0)for(m=0;o=d.exec(C);)l=_((s=S(o,!0)).id,s.type,s.cfg,"search"),m=h.lastIndex}else this.sourcePath=t,this.sourceSearch="";p+=w(c)+(!1===e.strict?"/?":"")+"$",g.push(c),this.regexp=new RegExp(p,e.caseInsensitive?"i":n),this.prefix=g[0],this.$$paramNames=b}function E(t){u(this,t)}function A(t,i){var a,c=[],h=null,d=!1;function f(t,e,n){if(!n)return!1;var i=t.invoke(e,e,{$match:n});return!r(i)||i}function p(i,r,o,l,u){var f,p=l.baseHref(),m=i.url();function g(t){if(!t||!t.defaultPrevented){f&&i.url();f=n;var e,r=c.length;for(e=0;e<r;e++)if(a(c[e]))return;h&&a(h)}function a(t){var e=t(o,i);return!!e&&(s(e)&&i.replace().url(e),!0)}}function v(){return a=a||r.$on("$locationChangeSuccess",g)}return d||v(),{sync:function(){g()},listen:function(){return v()},update:function(t){t?m=i.url():i.url()!==m&&(i.url(m),i.replace())},push:function(t,e,r){var o=t.format(e||{});null!==o&&e&&e["#"]&&(o+="#"+e["#"]),i.url(o),f=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var s=t.html5Mode();e.isObject(s)&&(s=s.enabled),s=s&&u.history;var a=n.format(r);if(o=o||{},s||null===a||(a="#"+t.hashPrefix()+a),null!==a&&r&&r["#"]&&(a+="#"+r["#"]),a=function(t,e,n){return"/"===p?t:e?p.slice(0,-1)+t:n?p.slice(1)+t:t}(a,s,o.absolute),!o.absolute||!a)return a;var l=!s&&a?"/":"",c=i.port();return c=80===c||443===c?"":":"+c,[i.protocol(),"://",i.host(),c,l,a].join("")}}}this.rule=function(t){if(!o(t))throw new Error("'rule' must be a function");return c.push(t),this},this.otherwise=function(t){if(s(t)){var e=t;t=function(){return e}}else if(!o(t))throw new Error("'rule' must be a function");return h=t,this},this.when=function(t,e){var n,r=s(e);if(s(t)&&(t=i.compile(t)),!r&&!o(e)&&!l(e))throw new Error("invalid 'handler' in when()");var a={matcher:function(t,e){return r&&(n=i.compile(e),e=["$match",function(t){return n.format(t)}]),u(function(n,i){return f(n,e,t.exec(i.path(),i.search()))},{prefix:s(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return r&&(n=e,e=["$match",function(t){return e=t,n.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]});var e}]),u(function(n,i){return f(n,e,t.exec(i.path()))},{prefix:(i=t,o=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(i.source),null!=o?o[1].replace(/\\(.)/g,"$1"):"")});var i,o}},c={matcher:i.isMatcher(t),regex:t instanceof RegExp};for(var h in c)if(c[h])return this.rule(a[h](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===n&&(t=!0),d=t},this.$get=p,p.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function I(t,d){var p,w,S={},k={},T="abstract",M={parent:function(t){if(r(t.parent)&&t.parent)return E(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?E(e[1]):p},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=f(t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(s(e))return"^"==e.charAt(0)?d.compile(e.substring(1),n):(t.parent.navigable||p).url.concat(e,n);if(!e||d.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new i.ParamSet;return c(t.params||{},function(t,n){e[n]||(e[n]=new i.Param(n,null,t,"config"))}),e},params:function(t){var e=_(t.ownParams,t.ownParams.$$keys());return t.parent&&t.parent.params?u(t.parent.params.$$new(),e):new i.ParamSet},views:function(t){var e={};return c(r(t.views)?t.views:{"":t},function(n,i){i.indexOf("@")<0&&(i+="@"+t.parent.name),n.resolveAs=n.resolveAs||t.resolveAs||"$resolve",e[i]=n}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?u({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};function E(t,e){if(!t)return n;var i,r=s(t),o=r?t:t.name;if(0===(i=o).indexOf(".")||0===i.indexOf("^")){if(!e)throw new Error("No reference point given for path '"+o+"'");e=E(e);for(var a=o.split("."),l=0,c=a.length,u=e;l<c;l++)if(""!==a[l]||0!==l){if("^"!==a[l])break;if(!u.parent)throw new Error("Path '"+o+"' not valid for state '"+e.name+"'");u=u.parent}else u=e;a=a.slice(l).join("."),o=u.name+(u.name&&a?".":"")+a}var h=S[o];return!h||!r&&(r||h!==t&&h.self!==t)?n:h}function A(e){var n=(e=f(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}})).name;if(!s(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(S.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):s(e.parent)?e.parent:a(e.parent)&&s(e.parent.name)?e.parent.name:"";if(i&&!S[i])return function(t,e){k[t]||(k[t]=[]),k[t].push(e)}(i,e.self);for(var r in M)o(M[r])&&(e[r]=M[r](e,M.$delegates[r]));return S[n]=e,!e[T]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){w.$current.navigable==e&&y(t,n)||w.transitionTo(e,t,{inherit:!0,location:!1})}]),function(t){for(var e=k[t]||[];e.length;)A(e.shift())}(n),e}function I(t,d,k,M,A,I,$,D,L){var P=new Error("transition superseded"),O=C(d.reject(P)),N=C(d.reject(new Error("transition prevented"))),j=C(d.reject(new Error("transition aborted"))),R=C(d.reject(new Error("transition failed")));function B(t,n,i,r,s,a){var u=i?n:b(t.params.$$keys(),n),h={$stateParams:u};s.resolve=A.resolve(t.resolve,h,s.resolve,t);var f=[s.resolve.then(function(t){s.globals=t})];return r&&f.push(r),d.all(f).then(function(){var n=[];return c(t.views,function(i,r){var c=i.resolve&&i.resolve!==t.resolve?i.resolve:{};c.$template=[function(){return k.load(r,{view:i,locals:s.globals,params:u,notify:a.notify})||""}],n.push(A.resolve(c,s.globals,s.resolve,t).then(function(n){if(o(i.controllerProvider)||l(i.controllerProvider)){var a=e.extend({},c,s.globals);n.$$controller=M.invoke(i.controllerProvider,null,a)}else n.$$controller=i.controller;n.$$state=t,n.$$controllerAs=i.controllerAs,n.$$resolveAs=i.resolveAs,s[r]=n}))}),d.all(n).then(function(){return s.globals})}).then(function(t){return s})}return p.locals={resolve:null,globals:{$stateParams:{}}},(w={params:{},current:p.self,$current:p,transition:null}).reload=function(t){return w.transitionTo(w.current,I,{reload:t||!0,inherit:!1,notify:!0})},w.go=function(t,e,n){return w.transitionTo(t,e,u({inherit:!0,relative:w.$current},n))},w.transitionTo=function(e,n,o){n=n||{},o=u({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var l=w.$current,c=w.params,m=l.path,g=E(e,o.relative),y=n["#"];if(!r(g)){var S={to:e,toParams:n,options:o},x=function(e,n,i,r){var o=t.$broadcast("$stateNotFound",e,n,i);if(o.defaultPrevented)return $.update(),j;if(!o.retry)return null;if(r.$retry)return $.update(),R;var s=w.transition=d.when(o.retry);return s.then(function(){return s!==w.transition?(t.$broadcast("$stateChangeCancel",e.to,e.toParams,n,i),O):(e.options.$retry=!0,w.transitionTo(e.to,e.toParams,e.options))},function(){return j}),$.update(),s}(S,l.self,c,o);if(x)return x;if(n=S.toParams,g=E(e=S.to,(o=S.options).relative),!r(g)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(g[T])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(n=v(I,n||{},w.$current,g)),!g.params.$$validates(n))return R;n=g.params.$$values(n);var C=(e=g).path,k=0,A=C[k],D=p.locals,L=[];if(o.reload){if(s(o.reload)||a(o.reload)){if(a(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var F=!0===o.reload?m[0]:E(o.reload);if(o.reload&&!F)throw new Error("No such reload state '"+(s(o.reload)?o.reload:o.reload.name)+"'");for(;A&&A===m[k]&&A!==F;)D=L[k]=A.locals,A=C[++k]}}else for(;A&&A===m[k]&&A.ownParams.$$equals(n,c);)D=L[k]=A.locals,A=C[++k];if(function(t,e,n,r,o,s){if(!s.reload&&t===n&&(o===n.locals||!1===t.self.reloadOnSearch&&function(t,e,n){var r=t.params.$$keys().filter(function(e){return"search"!=t.params[e].location}),o=_.apply({},[t.params].concat(r));return new i.ParamSet(o).$$equals(e,n)}(n,r,e)))return!0}(e,n,l,c,D,o))return y&&(n["#"]=y),w.params=n,h(w.params,I),h(b(e.params.$$keys(),I),e.locals.globals.$stateParams),o.location&&e.navigable&&e.navigable.url&&($.push(e.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),$.update(!0)),w.transition=null,d.when(w.current);if(n=b(e.params.$$keys(),n||{}),y&&(n["#"]=y),o.notify&&t.$broadcast("$stateChangeStart",e.self,n,l.self,c,o).defaultPrevented)return t.$broadcast("$stateChangeCancel",e.self,n,l.self,c),null==w.transition&&$.update(),N;for(var Y=d.when(D),H=k;H<C.length;A=C[++H])D=L[H]=f(D),Y=B(A,n,A===e,Y,D,o);var W=w.transition=Y.then(function(){var i,r,s;if(w.transition!==W)return t.$broadcast("$stateChangeCancel",e.self,n,l.self,c),O;for(i=m.length-1;i>=k;i--)(s=m[i]).self.onExit&&M.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(i=k;i<C.length;i++)(r=C[i]).locals=L[i],r.self.onEnter&&M.invoke(r.self.onEnter,r.self,r.locals.globals);return w.transition!==W?(t.$broadcast("$stateChangeCancel",e.self,n,l.self,c),O):(w.$current=e,w.current=e.self,w.params=n,h(w.params,I),w.transition=null,o.location&&e.navigable&&$.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,l.self,c),$.update(!0),w.current)}).then(null,function(i){return i===P?O:w.transition!==W?(t.$broadcast("$stateChangeCancel",e.self,n,l.self,c),O):(w.transition=null,t.$broadcast("$stateChangeError",e.self,n,l.self,c,i).defaultPrevented||$.update(),d.reject(i))});return W},w.is=function(t,e,i){var o=E(t,(i=u({relative:w.$current},i||{})).relative);return r(o)?w.$current===o&&(!e||y(o.params.$$values(e),I)):n},w.includes=function(t,e,i){if(i=u({relative:w.$current},i||{}),s(t)&&t.indexOf("*")>-1){if(!function(t){for(var e=t.split("."),n=w.$current.name.split("."),i=0,r=e.length;i<r;i++)"*"===e[i]&&(n[i]="*");return"**"===e[0]&&(n=n.slice(g(n,e[1]))).unshift("**"),"**"===e[e.length-1]&&(n.splice(g(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length==n.length&&n.join("")===e.join("")}(t))return!1;t=w.$current.name}var o=E(t,i.relative);if(!r(o))return n;if(!r(w.$current.includes[o.name]))return!1;if(!e)return!0;for(var a=m(e),l=0;l<a.length;l++){var c=a[l],h=o.params[c];if(h&&!h.type.equals(I[c],e[c]))return!1}return!0},w.href=function(t,e,i){var o=E(t,(i=u({lossy:!0,inherit:!0,absolute:!1,relative:w.$current},i||{})).relative);if(!r(o))return null;i.inherit&&(e=v(I,e||{},w.$current,o));var s=o&&i.lossy?o.navigable:o;return s&&s.url!==n&&null!==s.url?$.href(s.url,b(o.params.$$keys().concat("#"),e||{}),{absolute:i.absolute}):null},w.get=function(t,e){if(0===arguments.length)return x(m(S),function(t){return S[t].self});var n=E(t,e||w.$current);return n&&n.self?n.self:null},w}(p=A({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=function(t,e){if(s(t)&&!r(e))return M[t];if(!o(e)||!s(t))return this;M[t]&&!M.$delegates[t]&&(M.$delegates[t]=M[t]);return M[t]=e,this},this.state=function(t,e){a(t)?e=t:e.name=t;return A(e),this},this.$get=I,I.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $(){function t(t,e){return{load:function(t,n){var i;return(n=u({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},n)).view&&(i=e.fromConfig(n.view,n.params,n.locals)),i}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function D(t,n,i,r,o){var s=n.has?function(t){return n.has(t)?n.get(t):null}:function(t){try{return n.get(t)}catch(t){return null}},a=s("$animator"),l=s("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,s,c){return function(n,s,u){var h,d,f,p,m=u.onload||"",g=u.autoscroll,v=function(t,n){if(l)return{enter:function(t,n,i){e.version.minor>2?l.enter(t,null,n).then(i):l.enter(t,null,n,i)},leave:function(t,n){e.version.minor>2?l.leave(t).then(n):l.leave(t,n)}};if(a){var i=a&&a(n,t);return{enter:function(t,e,n){i.enter(t,null,e),n()},leave:function(t,e){i.leave(t),e()}}}return{enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}}}(u,n);s.inheritedData("$uiView");function y(a){var l,y=P(n,u,s,r),b=y&&t.$current&&t.$current.locals[y];if(a||b!==p){l=n.$new(),p=t.$current.locals[y],l.$emit("$viewContentLoading",y);var _=c(l,function(t){var r=o.defer(),a=o.defer(),l={$animEnter:r.promise,$animLeave:a.promise,$$animLeave:a};t.data("$uiViewAnim",l),v.enter(t,s,function(){r.resolve(),f&&f.$emit("$viewContentAnimationEnded"),(e.isDefined(g)&&!g||n.$eval(g))&&i(t)}),function(){if(h&&(h.remove(),h=null),f&&(f.$destroy(),f=null),d){var t=d.data("$uiViewAnim");v.leave(d,function(){t.$$animLeave.resolve(),h=null}),h=d,d=null}}()});d=_,(f=l).$emit("$viewContentLoaded",y),f.$eval(m)}}n.$on("$stateChangeSuccess",function(){y(!1)}),y(!0)}}}}function L(t,n,i,r){return{restrict:"ECA",priority:-400,compile:function(s){var a=s.html();return function(s,l,c){var u=i.$current,h=P(s,c,l,r),d=u&&u.locals[h];if(d){l.data("$uiView",{name:h,state:d.$$state}),l.html(d.$template?d.$template:a);var f=e.extend({},d);s[d.$$resolveAs]=f;var p=t(l.contents());if(d.$$controller){d.$scope=s,d.$element=l;var m=n(d.$$controller,d);d.$$controllerAs&&(s[d.$$controllerAs]=m,s[d.$$controllerAs][d.$$resolveAs]=f),o(m.$onInit)&&m.$onInit(),l.data("$ngControllerController",m),l.children().data("$ngControllerController",m)}p(s)}}}}}function P(t,e,n,i){var r=i(e.uiView||e.name||"")(t),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function O(t,e){var n,i=t.match(/^\s*({[^}]*})\s*$/);if(i&&(t=e+"("+i[1]+")"),!(n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function N(t){var e=t.parent().inheritedData("$uiView");if(e&&e.state&&e.state.name)return e.state}function j(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function R(t,e,n,i,r){return function(o){var s=o.which||o.button,a=r();if(!(s>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var l=n(function(){e.go(a.state,a.params,a.options)});o.preventDefault();var c=i.isAnchor&&!a.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(l)}}}}function B(t,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,o,s){var a,l=O(o.uiSref,t.current.name),c={state:l.state,href:null,params:null},h=j(r),d=s[1]||s[0],f=null;c.options=u(function(t,e){return{relative:N(t)||e.$current,inherit:!0}}(r,t),o.uiSrefOpts?i.$eval(o.uiSrefOpts):{});var p=function(n){n&&(c.params=e.copy(n)),c.href=t.href(l.state,c.params,c.options),f&&f(),d&&(f=d.$$addStateInfo(l.state,c.params)),null!==c.href&&o.$set(h.attr,c.href)};l.paramExpr&&(i.$watch(l.paramExpr,function(t){t!==c.params&&p(t)},!0),c.params=e.copy(i.$eval(l.paramExpr))),p(),h.clickable&&(a=R(r,t,n,h,function(){return c}),r[r.on?"on":"bind"]("click",a),i.$on("$destroy",function(){r[r.off?"off":"unbind"]("click",a)}))}}}function F(t,e){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,r,o){var s,a=j(i),l=o[1]||o[0],c="["+[r.uiState,r.uiStateParams||null,r.uiStateOpts||null].map(function(t){return t||"null"}).join(", ")+"]",u={state:null,params:null,options:null,href:null},h=null;function d(e){u.state=e[0],u.params=e[1],u.options=e[2],u.href=t.href(u.state,u.params,u.options),h&&h(),l&&(h=l.$$addStateInfo(u.state,u.params)),u.href&&r.$set(a.attr,u.href)}n.$watch(c,d,!0),d(n.$eval(c)),a.clickable&&(s=R(i,t,e,a,function(){return u}),i[i.on?"on":"bind"]("click",s),n.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function Y(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(e,i,r,o){var l,u,h=[],f={};l=n(r.uiSrefActiveEq||"",!1)(e);try{u=e.$eval(r.uiSrefActive)}catch(t){}function p(n,r,o){var l=t.get(n,N(i)),c=function(t,n){if(!s(t))throw new Error("state should be a string");if(a(n))return t+d(n);if(n=e.$eval(n),a(n))return t+d(n);return t}(n,r),u={state:l||{name:n},params:r,hash:c};return h.push(u),f[c]=o,function(){var t=h.indexOf(u);-1!==t&&h.splice(t,1)}}function m(){for(var e=0;e<h.length;e++)n=h[e].state,r=h[e].params,t.includes(n.name,r)?g(i,f[h[e].hash]):v(i,f[h[e].hash]),y(h[e].state,h[e].params)?g(i,l):v(i,l);var n,r}function g(t,e){o(function(){t.addClass(e)})}function v(t,e){t.removeClass(e)}function y(e,n){return t.is(e.name,n)}u=u||n(r.uiSrefActive||"",!1)(e),a(u)&&c(u,function(n,i){if(s(n)){var r=O(n,t.current.name);p(r.state,e.$eval(r.paramExpr),i)}}),this.$$addStateInfo=function(t,e){if(!(a(u)&&h.length>0)){var n=p(t,e,u);return m(),n}},e.$on("$stateChangeSuccess",m),m()}]}}function H(t){var e=function(e,n){return t.is(e,n)};return e.$stateful=!0,e}function W(t){var e=function(e,n,i){return t.includes(e,n,i)};return e.$stateful=!0,e}e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),k.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",k),T.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",T),M.prototype.concat=function(t,e){var n={caseInsensitive:i.caseInsensitive(),strict:i.strictMode(),squash:i.defaultSquashPolicy()};return new M(this.sourcePath+t+this.sourceSearch,u(n,e),this)},M.prototype.toString=function(){return this.source},M.prototype.exec=function(t,e){var n=this.regexp.exec(t);if(!n)return null;e=e||{};var i,o,s,a,l,c=this.parameters(),u=c.length,h=this.segments.length-1,d={};if(h!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function f(t){function e(t){return t.split("").reverse().join("")}var n=x(e(t).split(/-(?!\\)/),e);return x(n,function(t){return t.replace(/\\-/g,"-")}).reverse()}for(i=0;i<h;i++){for(s=c[i],a=this.params[s],l=n[i+1],o=0;o<a.replace.length;o++)a.replace[o].from===l&&(l=a.replace[o].to);l&&!0===a.array&&(l=f(l)),r(l)&&(l=a.type.decode(l)),d[s]=a.value(l)}for(;i<u;i++){for(d[s=c[i]]=this.params[s].value(e[s]),a=this.params[s],l=e[s],o=0;o<a.replace.length;o++)a.replace[o].from===l&&(l=a.replace[o].to);r(l)&&(l=a.type.decode(l)),d[s]=a.value(l)}return d},M.prototype.parameters=function(t){return r(t)?this.params[t]||null:this.$$paramNames},M.prototype.validates=function(t){return this.params.$$validates(t)},M.prototype.format=function(t){t=t||{};var e=this.segments,n=this.parameters(),i=this.params;if(!this.validates(t))return null;var r,o=!1,a=e.length-1,c=n.length,u=e[0];function h(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}for(r=0;r<c;r++){var d=r<a,f=n[r],p=i[f],m=p.value(t[f]),g=p.isOptional&&p.type.equals(p.value(),m),v=!!g&&p.squash,y=p.type.encode(m);if(d){var b=e[r+1],_=r+1===a;if(!1===v)null!=y&&(l(y)?u+=x(y,h).join("-"):u+=encodeURIComponent(y)),u+=b;else if(!0===v){var w=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=b.match(w)[1]}else s(v)&&(u+=v+b);_&&!0===p.squash&&"/"===u.slice(-1)&&(u=u.slice(0,-1))}else{if(null==y||g&&!1!==v)continue;if(l(y)||(y=[y]),0===y.length)continue;u+=(o?"&":"?")+f+"="+(y=x(y,encodeURIComponent).join("&"+f+"=")),o=!0}}return u},E.prototype.is=function(t,e){return!0},E.prototype.encode=function(t,e){return t},E.prototype.decode=function(t,e){return t},E.prototype.equals=function(t,e){return t==e},E.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},E.prototype.pattern=/.*/,E.prototype.toString=function(){return"{Type:"+this.name+"}"},E.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},E.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,e){function i(t,e){return function(){return t[e].apply(t,arguments)}}function o(t){return l(t)?t:r(t)?[t]:[]}function s(t){return!t}function a(t,i){return function(r){if(l(r)&&0===r.length)return r;var a=x(r=o(r),t);return!0===i?0===S(a,s).length:function(t){switch(t.length){case 0:return n;case 1:return"auto"===e?t[0]:t;default:return t}}(a)}}var c;this.encode=a(i(t,"encode")),this.decode=a(i(t,"decode")),this.is=a(i(t,"is"),!0),this.equals=(c=i(t,"equals"),function(t,e){var n=o(t),i=o(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!c(n[r],i[r]))return!1;return!0}),this.pattern=t.pattern,this.$normalize=a(i(t,"$normalize")),this.name=t.name,this.$arrayMode=e}(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",function t(){i=this;var h=!1,d=!0,p=!1;function v(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t}var y,b={},_=!0,w=[],C={string:{encode:v,decode:function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t},is:function(t){return null==t||!r(t)||"string"==typeof t},pattern:/[^\/]*/},int:{encode:v,decode:function(t){return parseInt(t,10)},is:function(t){return r(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return!0===t||!1===t},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):n},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):n},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^\/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};function k(t){return o(t)||l(t)&&o(t[t.length-1])}function T(){for(;w.length;){var t=w.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(b[t.name],y.invoke(t.def))}}function A(t){u(this,t||{})}t.$$getDefaultValue=function(t){if(!k(t.value))return t.value;if(!y)throw new Error("Injectable functions cannot be called at configuration time");return y.invoke(t.value)},this.caseInsensitive=function(t){return r(t)&&(h=t),h},this.strictMode=function(t){return r(t)&&(d=t),d},this.defaultSquashPolicy=function(t){if(!r(t))return p;if(!0!==t&&!1!==t&&!s(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return p=t,t},this.compile=function(t,e){return new M(t,u({strict:d,caseInsensitive:h},e))},this.isMatcher=function(t){if(!a(t))return!1;var e=!0;return c(M.prototype,function(n,i){o(n)&&(e=e&&r(t[i])&&o(t[i]))}),e},this.type=function(t,e,n){if(!r(e))return b[t];if(b.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return b[t]=new E(u({name:t},e)),n&&(w.push({name:t,def:n}),_||T()),this},c(C,function(t,e){b[e]=new E(u({name:e},t))}),b=f(b,{}),this.$get=["$injector",function(t){return y=t,_=!1,T(),c(C,function(t,e){b[e]||(b[e]=new E(t))}),this}],this.Param=function(t,i,o,c){var h=this;o=function(t){var e=a(t)?m(t):[];return-1===g(e,"value")&&-1===g(e,"type")&&-1===g(e,"squash")&&-1===g(e,"array")&&(t={value:t}),t.$$fn=k(t.value)?t.value:function(){return t.value},t}(o),i=function(n,i,r){if(n.type&&i)throw new Error("Param '"+t+"' has two type configurations.");return i||(n.type?e.isString(n.type)?b[n.type]:n.type instanceof E?n.type:new E(n.type):"config"===r?b.any:b.string)}(o,i,c);var d,f,v=(d={array:"search"===c&&"auto"},f=t.match(/\[\]$/)?{array:!0}:{},u(d,f,o).array);"string"!==(i=v?i.$asArray(v,"search"===c):i).name||v||"path"!==c||o.value!==n||(o.value="");var _=o.value!==n,w=function(t,e){var n=t.squash;if(!e||!1===n)return!1;if(!r(n)||null==n)return p;if(!0===n||s(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(o,_),C=function(t,e,i,r){var o,a,c=[{from:"",to:i||e?n:""},{from:null,to:i||e?n:""}];return o=l(t.replace)?t.replace:[],s(r)&&o.push({from:r,to:n}),a=x(o,function(t){return t.from}),S(c,function(t){return-1===g(a,t.from)}).concat(o)}(o,v,_,w);u(this,{id:t,type:i,location:c,array:v,squash:w,replace:C,isOptional:_,value:function(t){return t=function(t){var e,n=x(S(h.replace,(e=t,function(t){return t.from===e})),function(t){return t.to});return n.length?n[0]:t}(t),r(t)?h.type.$normalize(t):function(){if(!y)throw new Error("Injectable functions cannot be called at configuration time");var t=y.invoke(o.$$fn);if(null!==t&&t!==n&&!h.type.is(t))throw new Error("Default value ("+t+") for parameter '"+h.id+"' is not an instance of Type ("+h.type.name+")");return t}()},dynamic:n,config:o,toString:function(){return"{Param:"+t+" "+i+" squash: '"+w+"' optional: "+_+"}"}})},A.prototype={$$new:function(){return f(this,u(new A,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,i=m(A.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),c(e,function(e){c(m(e),function(e){-1===g(t,e)&&-1===g(i,e)&&t.push(e)})}),t},$$values:function(t){var e={},n=this;return c(n.$$keys(),function(i){e[i]=n[i].value(t&&t[i])}),e},$$equals:function(t,e){var n=!0,i=this;return c(i.$$keys(),function(r){var o=t&&t[r],s=e&&e[r];i[r].type.equals(o,s)||(n=!1)}),n},$$validates:function(t){var i,r,o,s,a,l=this.$$keys();for(i=0;i<l.length&&(r=this[l[i]],(o=t[l[i]])!==n&&null!==o||!r.isOptional);i++){if(s=r.type.$normalize(o),!r.type.is(s))return!1;if(a=r.type.encode(s),e.isString(a)&&!r.type.pattern.exec(a))return!1}return!0},$$parent:n},this.ParamSet=A}),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),A.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",A),I.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",I).run(["$injector",function(t){t.get("$state.runtime").autoinject&&t.get("$state")}]),$.$inject=[],e.module("ui.router.state").provider("$view",$),e.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]}),D.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],L.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",D),e.module("ui.router.state").directive("uiView",L),B.$inject=["$state","$timeout"],F.$inject=["$state","$timeout"],Y.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",B).directive("uiSrefActive",Y).directive("uiSrefActiveEq",Y).directive("uiState",F),H.$inject=["$state"],W.$inject=["$state"],e.module("ui.router.state").filter("isState",H).filter("includedByState",W)}(window,window.angular)},function(t,e){
/*!
 * angular-ui-scrollpoint
 * https://github.com/angular-ui/ui-scrollpoint
 * Version: 2.1.1 - 2016-02-22T01:37:49.997Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.scrollpoint",[]).directive("uiScrollpoint",["$window","$timeout",function(t,e){function n(e){return e?t.document.body.clientHeight:t.innerHeight}return{require:["uiScrollpoint","^?uiScrollpointTarget"],controller:function(){var i=this;function r(t){var e={shift:0,absolute:!1,percent:!1};if(t&&angular.isString(t))if(e.percent="%"==t.charAt(t.length-1),e.percent&&(t=t.substr(0,t.length-1)),"-"===t.charAt(0))e.absolute=e.percent,e.shift=-parseFloat(t.substr(1));else if("+"===t.charAt(0))e.absolute=e.percent,e.shift=parseFloat(t.substr(1));else{var n=parseFloat(t);!isNaN(n)&&isFinite(n)&&(e.absolute=!0,e.shift=n)}else if(angular.isNumber(t))return r(t.toString());return e}this.$element=void 0,this.$target=void 0,this.hasTarget=!1,this.hit=void 0,this.edges={top:{top:!0}},this.hitEdge=void 0,this.default_edge={absolute:!1,percent:!1,shift:0},this.posCache={},this.ready=!1,this.enabled=!0,this.scrollpointClass="ui-scrollpoint",this.actions=void 0,this.addEdge=function(t,e){if(angular.isString(t))if(angular.isUndefined(e)&&(e=!0),"view"==t)this.addEdge("top","bottom"),this.addEdge("bottom","top");else{var n,i;if(angular.isObject(e))for(n in e)!0===e[n]?e[n]=!0:e[n]=r(e[n]);else"top"==e||"bottom"==e?(n=e,i=r(),(e={})[n]=i):!0===e?(e={})[t]=!0:(i=r(e),(e={})[t]=i);this.edges[t]=e}},this.addAction=function(t){t&&angular.isFunction(t)&&(angular.isUndefined(this.actions)?this.actions=[t]:-1==this.actions.indexOf(t)&&this.actions.push(t))},this.setScrollpoint=function(t){this.default_edge=r(t)},this.setClass=function(t){t||(t="ui-scrollpoint"),this.scrollpointClass=t},this.setEdges=function(t){if(angular.isString(t))this.edges={},this.addEdge(t);else if(angular.isArray(t)){this.edges={};for(var e=0;e<t.length;e++)this.addEdge(t[e])}else if(angular.isObject(t))for(var n in this.edges={},t)this.addEdge(n,t[n]);else this.edges={},this.addEdge("top")},this.setElement=function(t){this.$element=t},this.setTarget=function(e){e?(this.$target=e,this.hasTarget=!0):(this.$target=angular.element(t),this.hasTarget=!1)},this.getEdge=function(t,e){if(t&&e){if(this.edges[t]&&this.edges[t][e]&&!0!==this.edges[t][e])return this.edges[t][e]}else if(t&&!e)return this.edges[t]?this.edges[t]:void 0;return this.default_edge},this.checkOffset=function(t,e,n){var i;n||(n=this.default_edge);var r,o="bottom"==t,s="top"==e,a="bottom"==e,l=this.getScrollOffset();return o&&(l+=this.getTargetHeight()),n.absolute?(r=n.percent?n.shift/100*this.getTargetScrollHeight():n.shift,o&&(r=this.getTargetContentHeight()-r,this.hasTarget&&(r+=this.getTargetHeight()))):(s?r=this.getElementTop():a&&(r=this.getElementBottom()),r+=n.shift),i=l-r,o&&(i*=-1),i},this.scrollEdgeHit=function(){var t,e,n,i,r,o,s;for(o in n=0,i={},this.edges)for(s in this.edges[o]){r=this.getEdge(o,s);var a=this.checkOffset(o,s,r);r.absolute?(angular.isUndefined(i)&&(i={}),angular.isUndefined(i[o])&&(i[o]={}),i[o][s]=a,n++):(angular.isUndefined(t)||a>t)&&(t=a,e={scroll:o,element:s})}if(n&&!e){var l=!0;for(o in t=void 0,i)for(s in i[o])n>1&&i[o][s]<0?l=!1:(angular.isUndefined(t)||i[o][s]>t)&&(t=i[o][s],e={scroll:o,element:s});l||(e=void 0,t=void 0)}return this.hitEdge=t>=0?e:void 0,t},this.getScrollOffset=function(){return this.hasTarget?this.$target[0].scrollTop:angular.isDefined(t.pageYOffset)?t.pageYOffset:(document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body).scrollTop},this.getTargetHeight=function(){return this.hasTarget?this.$target[0].offsetHeight:n()},this.getTargetContentHeight=function(){return this.hasTarget?this.$target[0].scrollHeight-this.$target[0].clientHeight:n(!0)},this.getTargetScrollHeight=function(){return this.hasTarget?this.$target[0].scrollHeight-this.$target[0].clientHeight:t.document.body.scrollHeight-t.innerHeight},this.getElementTop=function(t){if(!t&&angular.isDefined(this.posCache.top))return this.posCache.top;var e=this.$element[0].getBoundingClientRect().top+this.getScrollOffset();this.hasTarget&&(e-=this.$target[0].getBoundingClientRect().top);return e},this.getElementBottom=function(t){return this.getElementTop(t)+this.$element[0].offsetHeight},this.cachePosition=function(){this.posCache.top=this.getElementTop(!0)},this.onScroll=function(){if(i.ready&&i.enabled){var t=i.scrollEdgeHit(),e=!1;if(t>=0?i.hit||(i.$element.hasClass(i.scrollpointClass)||i.$element.addClass(i.scrollpointClass),e=!0,i.hit=!0):((i.hit||angular.isUndefined(i.hit))&&(i.$element.hasClass(i.scrollpointClass)&&i.$element.removeClass(i.scrollpointClass),e=!0,i.hit=!1),i.cachePosition()),e&&i.actions)for(var n=0;n<i.actions.length;n++)i.actions[n](t,i.$element,i.hitEdge?i.hitEdge.scroll:void 0,i.hitEdge?i.hitEdge.element:void 0)}},this.reset=function(){e(function(){i.$element.removeClass(i.scrollpointClass),i.hit=void 0,i.hitEdge=void 0,i.cachePosition(),i.onScroll()})}},link:function(t,e,n,i){var r=i[0],o=i[1],s=!1;function a(){r.$target.on("scroll",r.onScroll),t.$on("$destroy",function(){r.$target.off("scroll",r.onScroll)})}r.setElement(e),r.setTarget(o?o.$element:null),n.$observe("uiScrollpoint",function(t){r.setScrollpoint(t),r.reset()}),n.$observe("uiScrollpointEnabled",function(e){(e=t.$eval(e))!=r.enabled&&r.reset(),r.enabled=e}),n.$observe("uiScrollpointAbsolute",function(e){(e=t.$eval(e))!=s&&(r.$target&&r.$target.off("scroll",r.onScroll),r.setTarget(!e&&o?o.$element:null),a(),r.reset()),s=e}),n.$observe("uiScrollpointAction",function(e){var n=t.$eval(e);n&&angular.isFunction(n)&&r.addAction(n)}),n.$observe("uiScrollpointClass",function(t){e.removeClass(r.scrollpointClass),r.setClass(t),r.reset()}),n.$observe("uiScrollpointEdge",function(e){if(e){-1==["top","bottom","view"].indexOf(e)&&(e=t.$eval(e)),r.setEdges(e),r.reset()}}),a(),e.ready(function(){r.ready=!0,r.onScroll()}),t.$on("scrollpointShouldReset",r.reset)}}}]).directive("uiScrollpointTarget",[function(){return{controller:["$element",function(t){this.$element=t}]}}])}()},function(t,e,n){!function(){"use strict";function t(t,e,n,i){function f(e,n,i){i||!c(n)||u(n)||(i=n,n=void 0),this.protocols=n,this.url=e||"Missing URL",this.ssl=/(wss)/i.test(this.url),this.scope=i&&i.scope||t,this.rootScopeFailover=i&&i.rootScopeFailover&&!0,this.useApplyAsync=i&&i.useApplyAsync||!1,this.initialTimeout=i&&i.initialTimeout||500,this.maxTimeout=i&&i.maxTimeout||3e5,this.reconnectIfNotNormalClose=i&&i.reconnectIfNotNormalClose||!1,this._reconnectAttempts=0,this.sendQueue=[],this.onOpenCallbacks=[],this.onMessageCallbacks=[],this.onErrorCallbacks=[],this.onCloseCallbacks=[],r(this._readyStateConstants),e?this._connect():this._setInternalState(0)}return f.prototype._readyStateConstants={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,RECONNECT_ABORTED:4},f.prototype._normalCloseCode=1e3,f.prototype._reconnectableStatusCodes=[4e3],f.prototype.safeDigest=function(t){t&&!this.scope.$$phase&&this.scope.$digest()},f.prototype.bindToScope=function(e){var n=this;return e&&(this.scope=e,this.rootScopeFailover&&this.scope.$on("$destroy",function(){n.scope=t})),n},f.prototype._connect=function(t){(t||!this.socket||this.socket.readyState!==this._readyStateConstants.OPEN)&&(this.socket=i.create(this.url,this.protocols),this.socket.onmessage=angular.bind(this,this._onMessageHandler),this.socket.onopen=angular.bind(this,this._onOpenHandler),this.socket.onerror=angular.bind(this,this._onErrorHandler),this.socket.onclose=angular.bind(this,this._onCloseHandler))},f.prototype.fireQueue=function(){for(;this.sendQueue.length&&this.socket.readyState===this._readyStateConstants.OPEN;){var t=this.sendQueue.shift();this.socket.send(s(t.message)?t.message:JSON.stringify(t.message)),t.deferred.resolve()}},f.prototype.notifyOpenCallbacks=function(t){for(var e=0;e<this.onOpenCallbacks.length;e++)this.onOpenCallbacks[e].call(this,t)},f.prototype.notifyCloseCallbacks=function(t){for(var e=0;e<this.onCloseCallbacks.length;e++)this.onCloseCallbacks[e].call(this,t)},f.prototype.notifyErrorCallbacks=function(t){for(var e=0;e<this.onErrorCallbacks.length;e++)this.onErrorCallbacks[e].call(this,t)},f.prototype.onOpen=function(t){return this.onOpenCallbacks.push(t),this},f.prototype.onClose=function(t){return this.onCloseCallbacks.push(t),this},f.prototype.onError=function(t){return this.onErrorCallbacks.push(t),this},f.prototype.onMessage=function(t,e){if(!a(t))throw new Error("Callback must be a function");if(e&&l(e.filter)&&!s(e.filter)&&!(e.filter instanceof RegExp))throw new Error("Pattern must be a string or regular expression");return this.onMessageCallbacks.push({fn:t,pattern:e?e.filter:void 0,autoApply:!e||e.autoApply}),this},f.prototype._onOpenHandler=function(t){this._reconnectAttempts=0,this.notifyOpenCallbacks(t),this.fireQueue()},f.prototype._onCloseHandler=function(t){var e=this;e.useApplyAsync?e.scope.$applyAsync(function(){e.notifyCloseCallbacks(t)}):(e.notifyCloseCallbacks(t),e.safeDigest(autoApply)),(this.reconnectIfNotNormalClose&&t.code!==this._normalCloseCode||this._reconnectableStatusCodes.indexOf(t.code)>-1)&&this.reconnect()},f.prototype._onErrorHandler=function(t){var e=this;e.useApplyAsync?e.scope.$applyAsync(function(){e.notifyErrorCallbacks(t)}):(e.notifyErrorCallbacks(t),e.safeDigest(autoApply))},f.prototype._onMessageHandler=function(t){function e(t,e,n){n=d.call(arguments,2),r.useApplyAsync?r.scope.$applyAsync(function(){t.apply(r,n)}):(t.apply(r,n),r.safeDigest(e))}for(var n,i,r=this,o=0;o<r.onMessageCallbacks.length;o++)(n=(i=r.onMessageCallbacks[o]).pattern)?s(n)&&t.data===n?e(i.fn,i.autoApply,t):n instanceof RegExp&&n.exec(t.data)&&e(i.fn,i.autoApply,t):e(i.fn,i.autoApply,t)},f.prototype.close=function(t){return(t||!this.socket.bufferedAmount)&&this.socket.close(),this},f.prototype.send=function(t){function n(e){return o.sendQueue.splice(o.sendQueue.indexOf(t),1),r.reject(e),o}var r=e.defer(),o=this,s=function t(e){e.cancel=n;var i=e.then;return e.then=function(){var e=i.apply(this,arguments);return t(e)},e}(r.promise);return o.readyState===o._readyStateConstants.RECONNECT_ABORTED?r.reject("Socket connection has been closed"):(o.sendQueue.push({message:t,deferred:r}),o.fireQueue()),i.isMocked&&i.isMocked()&&i.isConnected(this.url)&&this._onMessageHandler(i.mockSend()),s},f.prototype.reconnect=function(){this.close();var t=this._getBackoffDelay(++this._reconnectAttempts),e=t/1e3;return console.log("Reconnecting in "+e+" seconds"),n(angular.bind(this,this._connect),t),this},f.prototype._getBackoffDelay=function(t){var e=Math.random()+1,n=this.initialTimeout,i=t,r=this.maxTimeout;return Math.floor(Math.min(e*n*Math.pow(2,i),r))},f.prototype._setInternalState=function(t){if(Math.floor(t)!==t||0>t||t>4)throw new Error("state must be an integer between 0 and 4, got: "+t);o||(this.readyState=t||this.socket.readyState),this._internalConnectionState=t,h(this.sendQueue,function(t){t.deferred.reject("Message cancelled due to closed socket connection")})},o&&o(f.prototype,"readyState",{get:function(){return this._internalConnectionState||this.socket.readyState},set:function(){throw new Error("The readyState property is read-only")}}),function(t,e,n){return new f(t,e,n)}}function e(t,e){this.create=function(e,i){var r,o;if(!/wss?:\/\//.exec(e))throw new Error("Invalid url provided");try{r=(o=n(300)).Client||o.client||o}catch(t){}return r=r||t.WebSocket||t.MozWebSocket,i?new r(e,i):new r(e)},this.createWebSocketBackend=function(t,n){return e.warn("Deprecated: Please use .create(url, protocols)"),this.create(t,n)}}var i=angular.noop,r=Object.freeze?Object.freeze:i,o=Object.defineProperty,s=angular.isString,a=angular.isFunction,l=angular.isDefined,c=angular.isObject,u=angular.isArray,h=angular.forEach,d=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(0>(n=0>n?Math.ceil(n):Math.floor(n))&&(n+=e);e>n;n++)if(n in this&&this[n]===t)return n;return-1}),angular.module("ngWebSocket",[]).factory("$websocket",["$rootScope","$q","$timeout","$websocketBackend",t]).factory("WebSocket",["$rootScope","$q","$timeout","WebsocketBackend",t]).service("$websocketBackend",["$window","$log",e]).service("WebSocketBackend",["$window","$log",e]),angular.module("angular-websocket",["ngWebSocket"])}()},function(t,e,n){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */var i=t.exports=n(187);i.Server=n(409),i.Sender=n(227),i.Receiver=n(233),i.createServer=function(t,e){var n=new i.Server(t);return"function"==typeof e&&n.on("connection",e),n},i.connect=i.createConnection=function(t,e){var n=new i(t);return"function"==typeof e&&n.on("open",e),n}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=c(t),s=i[0],a=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(u(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=c}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*m}},function(t,e,n){(function(t,i){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,c=36,u=1,h=26,d=38,f=700,p=72,m=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-u,S=Math.floor,x=String.fromCharCode;function C(t){throw new RangeError(_[t])}function k(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function T(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+k((t=t.replace(b,".")).split("."),e).join(".")}function M(t){for(var e,n,i=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function E(t){return k(t,function(t){var e="";return t>65535&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,n){var i=0;for(t=n?S(t/f):t>>1,t+=S(t/e);t>w*h>>1;i+=c)t=S(t/w);return S(i+(w+1)*t/(t+d))}function $(t){var e,n,i,r,o,s,a,d,f,v,y,b=[],_=t.length,w=0,x=m,k=p;for((n=t.lastIndexOf(g))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&C("not-basic"),b.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<_;){for(o=w,s=1,a=c;r>=_&&C("invalid-input"),((d=(y=t.charCodeAt(r++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||d>S((l-w)/s))&&C("overflow"),w+=d*s,!(d<(f=a<=k?u:a>=k+h?h:a-k));a+=c)s>S(l/(v=c-f))&&C("overflow"),s*=v;k=I(w-o,e=b.length+1,0==o),S(w/e)>l-x&&C("overflow"),x+=S(w/e),w%=e,b.splice(w++,0,x)}return E(b)}function D(t){var e,n,i,r,o,s,a,d,f,v,y,b,_,w,k,T=[];for(b=(t=M(t)).length,e=m,n=0,o=p,s=0;s<b;++s)(y=t[s])<128&&T.push(x(y));for(i=r=T.length,r&&T.push(g);i<b;){for(a=l,s=0;s<b;++s)(y=t[s])>=e&&y<a&&(a=y);for(a-e>S((l-n)/(_=i+1))&&C("overflow"),n+=(a-e)*_,e=a,s=0;s<b;++s)if((y=t[s])<e&&++n>l&&C("overflow"),y==e){for(d=n,f=c;!(d<(v=f<=o?u:f>=o+h?h:f-o));f+=c)k=d-v,w=c-v,T.push(x(A(v+k%w,0))),d=S(k/w);T.push(x(A(d,0))),o=I(n,_,i==r),n=0,++i}++n,++e}return T.join("")}a={version:"1.4.1",ucs2:{decode:M,encode:E},decode:$,encode:D,toASCII:function(t){return T(t,function(t){return y.test(t)?"xn--"+D(t):t})},toUnicode:function(t){return T(t,function(t){return v.test(t)?$(t.slice(4).toLowerCase()):t})}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(38)(t),n(7))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(306),e.encode=e.stringify=n(307)},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,f,p,m=t[u].replace(a,"%20"),g=m.indexOf(n);g>=0?(h=m.substr(0,g),d=m.substr(g+1)):(h=m,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),i(s,f)?r(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(i(s))+n;return r(t[s])?o(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(e,i,r){var o=n(189),s=n(2),a=n(190),l=n(21),c=n(315),u=a.IncomingMessage,h=a.readyStates;var d=t.exports=function(t){var n,i=this;l.Writable.call(i),i._opts=t,i._body=[],i._headers={},t.auth&&i.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){i.setHeader(e,t.headers[e])});var r=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)r=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}i._mode=function(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}(n,r),i._fetchTimer=null,i.on("finish",function(){i._onFinish()})};s(d,l.Writable),d.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===f.indexOf(n)&&(this._headers[n]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,s=t._headers,a=null;"GET"!==n.method&&"HEAD"!==n.method&&(a=o.arraybuffer?c(e.concat(t._body)):o.blobConstructor?new i.Blob(t._body.map(function(t){return c(t)}),{type:(s["content-type"]||{}).value||""}):e.concat(t._body).toString());var l=[];if(Object.keys(s).forEach(function(t){var e=s[t].name,n=s[t].value;Array.isArray(n)?n.forEach(function(t){l.push([e,t])}):l.push([e,n])}),"fetch"===t._mode){var u=null;if(o.abortController){var d=new AbortController;u=d.signal,t._fetchAbortController=d,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=i.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},n.requestTimeout))}i.fetch(t._opts.url,{method:t._opts.method,headers:l,body:a||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:u}).then(function(e){t._fetchResponse=e,t._connect()},function(e){i.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var f=t._xhr=new i.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(e){return void r.nextTick(function(){t.emit("error",e)})}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(f.timeout=n.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),l.forEach(function(t){f.setRequestHeader(t[0],t[1])}),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(a)}catch(e){return void r.nextTick(function(){t.emit("error",e)})}}}},d.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new u(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},d.prototype._write=function(t,e,n){this._body.push(t),n()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,i.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),l.Writable.prototype.end.call(this,t,e,n)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(4).Buffer,n(7),n(9))},function(t,e){},function(t,e,n){"use strict";var i=n(3).Buffer,r=n(312);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,o=i.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,r=a,e.copy(n,r),a+=s.data.length,s=s.next;return o},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,n(7))},function(t,e,n){"use strict";t.exports=o;var i=n(194),r=n(22);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(2),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var i=n(4).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(i.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,r=0;r<n;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)n.call(i,r)&&(t[r]=i[r])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){var i=n(39),r=n(30),o=t.exports;for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);function a(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=a(t),i.request.call(this,t,e)},o.get=function(t,e){return t=a(t),i.get.call(this,t,e)}},function(t,e,n){t.exports=n(40)},function(t,e,n){t.exports=n(18)},function(t,e,n){t.exports=n(21).Transform},function(t,e,n){t.exports=n(21).PassThrough},function(t,e,n){var i=n(2),r=n(20),o=n(3).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,r.call(this,64,56)}function c(t){return t<<30|t>>>2}function u(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(l,r),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,h=0;h<16;++h)n[h]=t.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var d=0;d<80;++d){var f=~~(d/20),p=0|((e=i)<<5|e>>>27)+u(f,r,o,a)+l+n[d]+s[f];l=a,a=o,o=c(r),r=i,i=p}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},function(t,e,n){var i=n(2),r=n(20),o=n(3).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,r.call(this,64,56)}function c(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function h(t,e,n,i){return 0===t?e&n|~e&i:2===t?e&n|e&i|n&i:e^n^i}i(l,r),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,d=0;d<16;++d)n[d]=t.readInt32BE(4*d);for(;d<80;++d)n[d]=(e=n[d-3]^n[d-8]^n[d-14]^n[d-16])<<1|e>>>31;for(var f=0;f<80;++f){var p=~~(f/20),m=c(i)+h(p,r,o,a)+l+n[f]+s[p]|0;l=a,a=o,o=u(r),r=i,i=m}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},function(t,e,n){var i=n(2),r=n(196),o=n(20),s=n(3).Buffer,a=new Array(64);function l(){this.init(),this._w=a,o.call(this,64,56)}i(l,r),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=l},function(t,e,n){var i=n(2),r=n(197),o=n(20),s=n(3).Buffer,a=new Array(160);function l(){this.init(),this._w=a,o.call(this,128,112)}i(l,r),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=l},function(t,e,n){"use strict";var i=n(2),r=n(3).Buffer,o=n(15),s=r.alloc(128),a=64;function l(t,e){o.call(this,"digest"),"string"==typeof e&&(e=r.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=r.concat([e,s],a));for(var n=this._ipad=r.allocUnsafe(a),i=this._opad=r.allocUnsafe(a),l=0;l<a;l++)n[l]=54^e[l],i[l]=92^e[l];this._hash=[n]}i(l,o),l.prototype._update=function(t){this._hash.push(t)},l.prototype._final=function(){var t=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,t]))},t.exports=l},function(t,e,n){t.exports=n(200)},function(t,e,n){(function(e,i){var r,o=n(202),s=n(203),a=n(204),l=n(3).Buffer,c=e.crypto&&e.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function d(t,e,n,i,r){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:r}},t,i<<3)}).then(function(t){return l.from(t)})}t.exports=function(t,n,f,p,m,g){"function"==typeof m&&(g=m,m=void 0);var v=u[(m=m||"sha1").toLowerCase()];if(!v||"function"!=typeof e.Promise)return i.nextTick(function(){var e;try{e=a(t,n,f,p,m)}catch(t){return g(t)}g(null,e)});if(o(t,n,f,p),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");l.isBuffer(t)||(t=l.from(t,s)),l.isBuffer(n)||(n=l.from(n,s)),function(t,e){t.then(function(t){i.nextTick(function(){e(null,t)})},function(t){i.nextTick(function(){e(t)})})}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==h[t])return h[t];var n=d(r=r||l.alloc(8),r,10,128,t).then(function(){return!0}).catch(function(){return!1});return h[t]=n,n}(v).then(function(e){return e?d(t,n,f,p,v):a(t,n,f,p,m)}),g)}}).call(this,n(7),n(9))},function(t,e,n){var i=n(331),r=n(47),o=n(48),s=n(346),a=n(33);function l(t,e,n){if(t=t.toLowerCase(),o[t])return r.createCipheriv(t,e,n);if(s[t])return new i({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function c(t,e,n){if(t=t.toLowerCase(),o[t])return r.createDecipheriv(t,e,n);if(s[t])return new i({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var n,i;if(t=t.toLowerCase(),o[t])n=o[t].key,i=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,i=s[t].iv}var r=a(e,!1,n,i);return l(t,r.key,r.iv)},e.createCipheriv=e.Cipheriv=l,e.createDecipher=e.Decipher=function(t,e){var n,i;if(t=t.toLowerCase(),o[t])n=o[t].key,i=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,i=s[t].iv}var r=a(e,!1,n,i);return c(t,r.key,r.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(s).concat(r.getCiphers())}},function(t,e,n){var i=n(15),r=n(46),o=n(2),s=n(3).Buffer,a={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function l(t){i.call(this);var e,n=t.mode.toLowerCase(),r=a[n];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=s.concat([o,o.slice(0,8)]));var l=t.iv;s.isBuffer(l)||(l=s.from(l)),this._des=r.create({key:o,iv:l,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=l,o(l,i),l.prototype._update=function(t){return s.from(this._des.update(t))},l.prototype._final=function(){return s.from(this._des.final())}},function(t,e,n){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,n){t[0+n]=e>>>24,t[1+n]=e>>>16&255,t[2+n]=e>>>8&255,t[3+n]=255&e},e.ip=function(t,e,n,i){for(var r=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)r<<=1,r|=e>>>a+s&1;for(a=0;a<=24;a+=8)r<<=1,r|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}n[i+0]=r>>>0,n[i+1]=o>>>0},e.rip=function(t,e,n,i){for(var r=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)r<<=1,r|=e>>>a+s&1,r<<=1,r|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},e.pc1=function(t,e,n,i){for(var r=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)r<<=1,r|=e>>a+s&1;for(a=0;a<=24;a+=8)r<<=1,r|=t>>a+s&1}for(a=0;a<=24;a+=8)r<<=1,r|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,r){for(var o=0,s=0,a=i.length>>>1,l=0;l<a;l++)o<<=1,o|=t>>>i[l]&1;for(l=a;l<i.length;l++)s<<=1,s|=e>>>i[l]&1;n[r+0]=o>>>0,n[r+1]=s>>>0},e.expand=function(t,e,n){var i=0,r=0;i=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=t>>>o&63;for(o=11;o>=3;o-=4)r|=t>>>o&63,r<<=6;r|=(31&t)<<1|t>>>31,e[n+0]=i>>>0,e[n+1]=r>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var n=0,i=0;i<4;i++){n<<=4,n|=r[64*i+(t>>>18-6*i&63)]}for(i=0;i<4;i++){n<<=4,n|=r[256+64*i+(e>>>18-6*i&63)]}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,n=0;n<o.length;n++)e<<=1,e|=t>>>o[n]&1;return e>>>0},e.padSplit=function(t,e,n){for(var i=t.toString(2);i.length<e;)i="0"+i;for(var r=[],o=0;o<e;o+=n)r.push(i.slice(o,o+n));return r.join(" ")}},function(t,e,n){"use strict";var i=n(11);function r(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=r,r.prototype._init=function(){},r.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},r.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),i=0;i<n;i++)this.buffer[this.bufferOff+i]=t[e+i];return this.bufferOff+=n,n},r.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(t){var e=0,n=0,i=(this.bufferOff+t.length)/this.blockSize|0,r=new Array(i*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(r,n)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,r,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return r},r.prototype._updateDecrypt=function(t){for(var e=0,n=0,i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,r=new Array(i*this.blockSize);i>0;i--)e+=this._buffer(t,e),n+=this._flushBuffer(r,n);return e+=this._buffer(t,e),r},r.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},r.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},r.prototype._unpad=function(t){return t},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,n){"use strict";var i=n(11),r=n(2),o=n(46),s=o.utils,a=o.Cipher;function l(){this.tmp=new Array(2),this.keys=null}function c(t){a.call(this,t);var e=new l;this._desState=e,this.deriveKeys(e,t.key)}r(c,a),t.exports=c,c.create=function(t){return new c(t)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(t,e){t.keys=new Array(32),i.equal(e.length,this.blockSize,"Invalid key length");var n=s.readUInt32BE(e,0),r=s.readUInt32BE(e,4);s.pc1(n,r,t.tmp,0),n=t.tmp[0],r=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var a=u[o>>>1];n=s.r28shl(n,a),r=s.r28shl(r,a),s.pc2(n,r,t.keys,o)}},c.prototype._update=function(t,e,n,i){var r=this._desState,o=s.readUInt32BE(t,e),a=s.readUInt32BE(t,e+4);s.ip(o,a,r.tmp,0),o=r.tmp[0],a=r.tmp[1],"encrypt"===this.type?this._encrypt(r,o,a,r.tmp,0):this._decrypt(r,o,a,r.tmp,0),o=r.tmp[0],a=r.tmp[1],s.writeUInt32BE(n,o,i),s.writeUInt32BE(n,a,i+4)},c.prototype._pad=function(t,e){for(var n=t.length-e,i=e;i<t.length;i++)t[i]=n;return!0},c.prototype._unpad=function(t){for(var e=t[t.length-1],n=t.length-e;n<t.length;n++)i.equal(t[n],e);return t.slice(0,t.length-e)},c.prototype._encrypt=function(t,e,n,i,r){for(var o=e,a=n,l=0;l<t.keys.length;l+=2){var c=t.keys[l],u=t.keys[l+1];s.expand(a,t.tmp,0),c^=t.tmp[0],u^=t.tmp[1];var h=s.substitute(c,u),d=a;a=(o^s.permute(h))>>>0,o=d}s.rip(a,o,i,r)},c.prototype._decrypt=function(t,e,n,i,r){for(var o=n,a=e,l=t.keys.length-2;l>=0;l-=2){var c=t.keys[l],u=t.keys[l+1];s.expand(o,t.tmp,0),c^=t.tmp[0],u^=t.tmp[1];var h=s.substitute(c,u),d=o;o=(a^s.permute(h))>>>0,a=d}s.rip(o,a,i,r)}},function(t,e,n){"use strict";var i=n(11),r=n(2),o={};function s(t){i.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}r(e,t);for(var n=Object.keys(o),i=0;i<n.length;i++){var s=n[i];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new s(this.options.iv);this._cbcState=t},o._update=function(t,e,n,i){var r=this._cbcState,o=this.constructor.super_.prototype,s=r.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,n,i);for(a=0;a<this.blockSize;a++)s[a]=n[i+a]}else{o._update.call(this,t,e,n,i);for(a=0;a<this.blockSize;a++)n[i+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},function(t,e,n){"use strict";var i=n(11),r=n(2),o=n(46),s=o.Cipher,a=o.DES;function l(t,e){i.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),r=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:r}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:n})]}function c(t){s.call(this,t);var e=new l(this.type,this.options.key);this._edeState=e}r(c,s),t.exports=c,c.create=function(t){return new c(t)},c.prototype._update=function(t,e,n,i){var r=this._edeState;r.ciphers[0]._update(t,e,n,i),r.ciphers[1]._update(n,i,n,i),r.ciphers[2]._update(n,i,n,i)},c.prototype._pad=a.prototype._pad,c.prototype._unpad=a.prototype._unpad},function(t,e,n){var i=n(48),r=n(208),o=n(3).Buffer,s=n(209),a=n(15),l=n(32),c=n(33);function u(t,e,n){a.call(this),this._cache=new d,this._cipher=new l.AES(e),this._prev=o.from(n),this._mode=t,this._autopadding=!0}n(2)(u,a),u.prototype._update=function(t){var e,n;this._cache.add(t);for(var i=[];e=this._cache.get();)n=this._mode.encrypt(this,e),i.push(n);return o.concat(i)};var h=o.alloc(16,16);function d(){this.cache=o.allocUnsafe(0)}function f(t,e,n){var a=i[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===a.type?new s(a.module,e,n):"auth"===a.type?new r(a.module,e,n):new u(a.module,e,n)}u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=o.concat([this.cache,t])},d.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},d.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return o.concat([this.cache,e])},e.createCipheriv=f,e.createCipher=function(t,e){var n=i[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(e,!1,n.key,n.iv);return f(t,r.key,r.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,n){var i=n(25);e.encrypt=function(t,e){var n=i(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var r=t._cipher.decryptBlock(e);return i(r,n)}},function(t,e,n){var i=n(3).Buffer,r=n(25);function o(t,e,n){var o=e.length,s=r(e,t._cache);return t._cache=t._cache.slice(o),t._prev=i.concat([t._prev,n?e:s]),s}e.encrypt=function(t,e,n){for(var r,s=i.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=i.allocUnsafe(0)),!(t._cache.length<=e.length)){s=i.concat([s,o(t,e,n)]);break}r=t._cache.length,s=i.concat([s,o(t,e.slice(0,r),n)]),e=e.slice(r)}return s}},function(t,e,n){var i=n(3).Buffer;function r(t,e,n){var r=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=i.concat([t._prev.slice(1),i.from([n?e:r])]),r}e.encrypt=function(t,e,n){for(var o=e.length,s=i.allocUnsafe(o),a=-1;++a<o;)s[a]=r(t,e[a],n);return s}},function(t,e,n){var i=n(3).Buffer;function r(t,e,n){for(var i,r,s=-1,a=0;++s<8;)i=e&1<<7-s?128:0,a+=(128&(r=t._cipher.encryptBlock(t._prev)[0]^i))>>s%8,t._prev=o(t._prev,n?i:r);return a}function o(t,e){var n=t.length,r=-1,o=i.allocUnsafe(t.length);for(t=i.concat([t,i.from([e])]);++r<n;)o[r]=t[r]<<1|t[r+1]>>7;return o}e.encrypt=function(t,e,n){for(var o=e.length,s=i.allocUnsafe(o),a=-1;++a<o;)s[a]=r(t,e[a],n);return s}},function(t,e,n){(function(t){var i=n(25);function r(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,r(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),i(n,o)}}).call(this,n(4).Buffer)},function(t,e,n){var i=n(3).Buffer,r=i.alloc(16,0);function o(t){var e=i.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function s(t){this.h=t,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}s.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},s.prototype._multiply=function(){for(var t,e,n,i=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],r=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),n=0!=(1&i[3]),e=3;e>0;e--)i[e]=i[e]>>>1|(1&i[e-1])<<31;i[0]=i[0]>>>1,n&&(i[0]=i[0]^225<<24)}this.state=o(r)},s.prototype.update=function(t){var e;for(this.cache=i.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},s.prototype.final=function(t,e){return this.cache.length&&this.ghash(i.concat([this.cache,r],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=s},function(t,e,n){var i=n(208),r=n(3).Buffer,o=n(48),s=n(209),a=n(15),l=n(32),c=n(33);function u(t,e,n){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new l.AES(e),this._prev=r.from(n),this._mode=t,this._autopadding=!0}function h(){this.cache=r.allocUnsafe(0)}function d(t,e,n){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=r.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof e&&(e=r.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,n,!0):"auth"===a.type?new i(a.module,e,n,!0):new u(a.module,e,n)}n(2)(u,a),u.prototype._update=function(t){var e,n;this._cache.add(t);for(var i=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),i.push(n);return r.concat(i)},u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=r.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var n=o[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(e,!1,n.key,n.iv);return d(t,i.key,i.iv)},e.createDecipheriv=d},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,n){(function(t){var i=n(210),r=n(350),o=n(351);var s={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var n=new t(r[e].prime,"hex"),i=new t(r[e].gen,"hex");return new o(n,i)},e.createDiffieHellman=e.DiffieHellman=function e(n,r,a,l){return t.isBuffer(r)||void 0===s[r]?e(n,"binary",r,a):(r=r||"binary",l=l||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,l)),"number"==typeof n?new o(i(n,a),a,!0):(t.isBuffer(n)||(n=new t(n,r)),new o(n,a,!0)))}}).call(this,n(4).Buffer)},function(t,e){},function(t,e){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,n){(function(e){var i=n(8),r=new(n(211)),o=new i(24),s=new i(11),a=new i(10),l=new i(3),c=new i(7),u=n(210),h=n(19);function d(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._pub=new i(t),this}function f(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._priv=new i(t),this}t.exports=m;var p={};function m(t,e,n){this.setGenerator(e),this.__prime=new i(t),this._prime=i.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=d,this.setPrivateKey=f):this._primeCode=8}function g(t,n){var i=new e(t.toArray());return n?i.toString(n):i}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var n=e.toString("hex"),i=[n,t.toString(16)].join("_");if(i in p)return p[i];var h,d=0;if(t.isEven()||!u.simpleSieve||!u.fermatTest(t)||!r.test(t))return d+=1,d+="02"===n||"05"===n?8:4,p[i]=d,d;switch(r.test(t.shrn(1))||(d+=2),n){case"02":t.mod(o).cmp(s)&&(d+=8);break;case"05":(h=t.mod(a)).cmp(l)&&h.cmp(c)&&(d+=8);break;default:d+=4}return p[i]=d,d}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new i(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var n=(t=(t=new i(t)).toRed(this._prime)).redPow(this._priv).fromRed(),r=new e(n.toArray()),o=this.getPrime();if(r.length<o.length){var s=new e(o.length-r.length);s.fill(0),r=e.concat([s,r])}return r},m.prototype.getPublicKey=function(t){return g(this._pub,t)},m.prototype.getPrivateKey=function(t){return g(this._priv,t)},m.prototype.getPrime=function(t){return g(this.__prime,t)},m.prototype.getGenerator=function(t){return g(this._gen,t)},m.prototype.setGenerator=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.__gen=t,this._gen=new i(t),this}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){var i=n(23),r=n(24),o=n(2),s=n(353),a=n(385),l=n(200);function c(t){r.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function u(t){r.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){return new c(t)}function d(t){return new u(t)}Object.keys(l).forEach(function(t){l[t].id=new e(l[t].id,"hex"),l[t.toLowerCase()]=l[t]}),o(c,r.Writable),c.prototype._write=function(t,e,n){this._hash.update(t),n()},c.prototype.update=function(t,n){return"string"==typeof t&&(t=new e(t,n)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),i=s(n,t,this._hashType,this._signType,this._tag);return e?i.toString(e):i},o(u,r.Writable),u.prototype._write=function(t,e,n){this._hash.update(t),n()},u.prototype.update=function(t,n){return"string"==typeof t&&(t=new e(t,n)),this._hash.update(t),this},u.prototype.verify=function(t,n,i){"string"==typeof n&&(n=new e(n,i)),this.end();var r=this._hash.digest();return a(n,r,t,this._signType,this._tag)},t.exports={Sign:h,Verify:d,createSign:h,createVerify:d}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){var i=n(198),r=n(50),o=n(51).ec,s=n(8),a=n(35),l=n(221);function c(t,n,r,o){if((t=new e(t.toArray())).length<n.byteLength()){var s=new e(n.byteLength()-t.length);s.fill(0),t=e.concat([s,t])}var a=r.length,l=function(t,n){t=(t=u(t,n)).mod(n);var i=new e(t.toArray());if(i.length<n.byteLength()){var r=new e(n.byteLength()-i.length);r.fill(0),i=e.concat([r,i])}return i}(r,n),c=new e(a);c.fill(1);var h=new e(a);return h.fill(0),h=i(o,h).update(c).update(new e([0])).update(t).update(l).digest(),c=i(o,h).update(c).digest(),{k:h=i(o,h).update(c).update(new e([1])).update(t).update(l).digest(),v:c=i(o,h).update(c).digest()}}function u(t,e){var n=new s(t),i=(t.length<<3)-e.bitLength();return i>0&&n.ishrn(i),n}function h(t,n,r){var o,s;do{for(o=new e(0);8*o.length<t.bitLength();)n.v=i(r,n.k).update(n.v).digest(),o=e.concat([o,n.v]);s=u(o,t),n.k=i(r,n.k).update(n.v).update(new e([0])).digest(),n.v=i(r,n.k).update(n.v).digest()}while(-1!==s.cmp(t));return s}function d(t,e,n,i){return t.toRed(s.mont(n)).redPow(e).fromRed().mod(i)}t.exports=function(t,n,i,f,p){var m=a(n);if(m.curve){if("ecdsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");return function(t,n){var i=l[n.curve.join(".")];if(!i)throw new Error("unknown curve "+n.curve.join("."));var r=new o(i).keyFromPrivate(n.privateKey).sign(t);return new e(r.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==f)throw new Error("wrong private key type");return function(t,n,i){var r,o=n.params.priv_key,a=n.params.p,l=n.params.q,f=n.params.g,p=new s(0),m=u(t,l).mod(l),g=!1,v=c(o,l,t,i);for(;!1===g;)r=h(l,v,i),p=d(f,r,a,l),0===(g=r.invm(l).imul(m.add(o.mul(p))).mod(l)).cmpn(0)&&(g=!1,p=new s(0));return function(t,n){t=t.toArray(),n=n.toArray(),128&t[0]&&(t=[0].concat(t));128&n[0]&&(n=[0].concat(n));var i=[48,t.length+n.length+4,2,t.length];return i=i.concat(t,[2,n.length],n),new e(i)}(p,g)}(t,m,i)}if("rsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");t=e.concat([p,t]);for(var g=m.modulus.byteLength(),v=[0,1];t.length+v.length+1<g;)v.push(255);v.push(0);for(var y=-1;++y<t.length;)v.push(t[y]);return r(v,m)},t.exports.getKey=c,t.exports.makeKey=h}).call(this,n(4).Buffer)},function(t){t.exports=JSON.parse('{"_args":[["elliptic@6.5.0","/Users/hirokiterashima/Dropbox/dev/WISE"]],"_from":"elliptic@6.5.0","_id":"elliptic@6.5.0","_inBundle":false,"_integrity":"sha512-eFOJTMyCYb7xtE/caJ6JJu+bhi67WCYNbkGSknu20pmM8Ke/bqOfdnZWxyoGN26JgfxTbXrsCkEw4KheCT/KGg==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"elliptic@6.5.0","name":"elliptic","escapedName":"elliptic","rawSpec":"6.5.0","saveSpec":null,"fetchSpec":"6.5.0"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.0.tgz","_spec":"6.5.0","_where":"/Users/hirokiterashima/Dropbox/dev/WISE","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^2.11.3","grunt":"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2","istanbul":"^0.4.2","jscs":"^2.9.0","jshint":"^2.6.0","mocha":"^2.1.0"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.0"}')},function(t,e,n){"use strict";var i=n(12),r=n(8),o=n(2),s=n(34),a=i.assert;function l(t){s.call(this,"short",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,i){s.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(e,16),this.y=new r(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(t,e,n,i){s.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(e,16),this.y=new r(n,16),this.z=new r(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(l,s),t.exports=l,l.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new r(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=(e=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(t.lambda)n=new r(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map(function(t){return{a:new r(t.a,16),b:new r(t.b,16)}}):this._getEndoBasis(n)}}},l.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:r.mont(t),n=new r(2).toRed(e).redInvm(),i=n.redNeg(),o=new r(3).toRed(e).redNeg().redSqrt().redMul(n);return[i.redAdd(o).fromRed(),i.redSub(o).fromRed()]},l.prototype._getEndoBasis=function(t){for(var e,n,i,o,s,a,l,c,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,f=this.n.clone(),p=new r(1),m=new r(0),g=new r(0),v=new r(1),y=0;0!==d.cmpn(0);){var b=f.div(d);c=f.sub(b.mul(d)),u=g.sub(b.mul(p));var _=v.sub(b.mul(m));if(!i&&c.cmp(h)<0)e=l.neg(),n=p,i=c.neg(),o=u;else if(i&&2==++y)break;l=c,f=d,d=c,g=p,p=u,v=m,m=_}s=c.neg(),a=u;var w=i.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(w)>=0&&(s=e,a=n),i.negative&&(i=i.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:i,b:o},{a:s,b:a}]},l.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],i=e[1],r=i.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),s=r.mul(n.a),a=o.mul(i.a),l=r.mul(n.b),c=o.mul(i.b);return{k1:t.sub(s).sub(a),k2:l.add(c).neg()}},l.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=i.fromRed().isOdd();return(e&&!o||!e&&o)&&(i=i.redNeg()),this.point(t,i)},l.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,i=this.a.redMul(e),r=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},l.prototype._endoWnafMulAdd=function(t,e,n){for(var i=this._endoWnafT1,r=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],l=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),i[2*o]=a,i[2*o+1]=l,r[2*o]=s.k1,r[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,i,r,2*o,n),u=0;u<2*o;u++)i[u]=null,r[u]=null;return c},o(c,s.BasePoint),l.prototype.point=function(t,e,n){return new c(this,t,e,n)},l.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],n);if(!e[2])return i;function r(e){return t.point(e[0],e[1],n)}var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(r))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(r))}},i},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),i=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(i),o=r.redSqr().redISub(this.x.redAdd(this.x)),s=r.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new r(t,16),this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var i=[this,e],r=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},c.prototype.jmulAdd=function(t,e,n){var i=[this,e],r=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r,!0):this.curve._wnafMulAdd(1,i,r,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(u,s.BasePoint),l.prototype.jpoint=function(t,e,n){return new u(this,t,e,n)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),i=this.y.redMul(e).redMul(t);return this.curve.point(n,i)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(e),r=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(n.redMul(this.z)),a=i.redSub(r),l=o.redSub(s);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),h=i.redMul(c),d=l.redSqr().redIAdd(u).redISub(h).redISub(h),f=l.redMul(h.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,p)},u.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,i=t.x.redMul(e),r=this.y,o=t.y.redMul(e).redMul(this.z),s=n.redSub(i),a=r.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),u=n.redMul(l),h=a.redSqr().redIAdd(c).redISub(u).redISub(u),d=a.redMul(u.redISub(h)).redISub(r.redMul(c)),f=this.z.redMul(s);return this.curve.jpoint(h,d,f)},u.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var i=this.curve.a,r=this.curve.tinv,o=this.x,s=this.y,a=this.z,l=a.redSqr().redSqr(),c=s.redAdd(s);for(n=0;n<t;n++){var u=o.redSqr(),h=c.redSqr(),d=h.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),p=o.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=f.redMul(g);v=v.redIAdd(v).redISub(d);var y=c.redMul(a);n+1<t&&(l=l.redMul(d)),o=m,a=y,c=v}return this.curve.jpoint(o,c.redMul(r),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i),l=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=l,e=a.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},u.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=a.redSqr().redISub(s).redISub(s);t=l;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=a.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(u);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=f.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},u.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),o=e.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(r)),l=e.redAdd(e),c=(l=l.redIAdd(l)).redMul(s),u=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(u),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=n.redAdd(n).redMul(i);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),i=e.redSqr(),r=t.redAdd(t).redIAdd(t),o=r.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(i),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),l=i.redIAdd(i);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=r.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(l),u=e.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var h=this.x.redMul(a).redISub(u);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(c.redMul(l.redISub(c)).redISub(s.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(h,d,f)},u.prototype.mul=function(t,e){return t=new r(t,e),this.curve._wnafMul(this,t)},u.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var i=e.redMul(this.z),r=n.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(i)).cmpn(0)},u.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(r),0===this.x.cmp(n))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,n){"use strict";var i=n(8),r=n(2),o=n(34),s=n(12);function a(t){o.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(t,e,n){o.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),i=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},r(l,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new l(this,t,e)},a.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(t,e){return new l(t,e[0],e[1]||t.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),n=t.redSub(e),i=t.redMul(e),r=n.redMul(e.redAdd(this.curve.a24.redMul(n)));return this.curve.point(i,r)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),r=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(n),s=r.redMul(i),a=e.z.redMul(o.redAdd(s).redSqr()),l=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,l)},l.prototype.mul=function(t){for(var e=t.clone(),n=this,i=this.curve.point(null,null),r=[];0!==e.cmpn(0);e.iushrn(1))r.push(e.andln(1));for(var o=r.length-1;o>=0;o--)0===r[o]?(n=n.diffAdd(i,this),i=i.dbl()):(i=n.diffAdd(i,this),n=n.dbl());return i},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,n){"use strict";var i=n(12),r=n(8),o=n(2),s=n(34),a=i.assert;function l(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new r(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,n,i,o){s.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(e,16),this.y=new r(n,16),this.z=i?new r(i,16):this.curve.one,this.t=o&&new r(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(l,s),t.exports=l,l.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},l.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},l.prototype.jpoint=function(t,e,n,i){return this.point(t,e,n,i)},l.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(t,a)},l.prototype.pointFromY=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},l.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),i=e.redMul(this.a).redAdd(n),r=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===i.cmp(r)},o(c,s.BasePoint),l.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},l.prototype.point=function(t,e,n,i){return new c(this,t,e,n,i)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t),r=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=i.redAdd(e),s=o.redSub(n),a=i.redSub(e),l=r.redMul(s),c=o.redMul(a),u=r.redMul(a),h=s.redMul(o);return this.curve.point(l,c,h,u)},c.prototype._projDbl=function(){var t,e,n,i=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=(c=this.curve._mulA(r)).redAdd(o);if(this.zOne)t=i.redSub(r).redSub(o).redMul(s.redSub(this.curve.two)),e=s.redMul(c.redSub(o)),n=s.redSqr().redSub(s).redSub(s);else{var a=this.z.redSqr(),l=s.redSub(a).redISub(a);t=i.redSub(r).redISub(o).redMul(l),e=s.redMul(c.redSub(o)),n=s.redMul(l)}}else{var c=r.redAdd(o);a=this.curve._mulC(this.z).redSqr(),l=c.redSub(a).redSub(a);t=this.curve._mulC(i.redISub(c)).redMul(l),e=this.curve._mulC(c).redMul(r.redISub(o)),n=c.redMul(l)}return this.curve.point(t,e,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),r=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(e),s=r.redSub(i),a=r.redAdd(i),l=n.redAdd(e),c=o.redMul(s),u=a.redMul(l),h=o.redMul(l),d=s.redMul(a);return this.curve.point(c,u,d,h)},c.prototype._projAdd=function(t){var e,n,i=this.z.redMul(t.z),r=i.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),l=r.redSub(a),c=r.redAdd(a),u=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),h=i.redMul(l).redMul(u);return this.curve.twisted?(e=i.redMul(c).redMul(s.redSub(this.curve._mulA(o))),n=l.redMul(c)):(e=i.redMul(c).redMul(s.redSub(o)),n=this.curve._mulC(l).redMul(c)),this.curve.point(h,e,n)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!1)},c.prototype.jmulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(t,e,n){"use strict";e.sha1=n(359),e.sha224=n(360),e.sha256=n(215),e.sha384=n(361),e.sha512=n(216)},function(t,e,n){"use strict";var i=n(14),r=n(26),o=n(214),s=i.rotl32,a=i.sum32,l=i.sum32_5,c=o.ft_1,u=r.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(d,u),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var n=this.W,i=0;i<16;i++)n[i]=t[e+i];for(;i<n.length;i++)n[i]=s(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var r=this.h[0],o=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),m=l(s(r,5),c(p,o,u,d),f,n[i],h[p]);f=d,d=u,u=s(o,30),o=r,r=m}this.h[0]=a(this.h[0],r),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,e,n){"use strict";var i=n(14),r=n(215);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,r),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},function(t,e,n){"use strict";var i=n(14),r=n(216);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,r),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},function(t,e,n){"use strict";var i=n(14),r=n(26),o=i.rotl32,s=i.sum32,a=i.sum32_3,l=i.sum32_4,c=r.BlockHash;function u(){if(!(this instanceof u))return new u;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,n,i){return t<=15?e^n^i:t<=31?e&n|~e&i:t<=47?(e|~n)^i:t<=63?e&i|n&~i:e^(n|~i)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}i.inherits(u,c),e.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var n=this.h[0],i=this.h[1],r=this.h[2],c=this.h[3],u=this.h[4],y=n,b=i,_=r,w=c,S=u,x=0;x<80;x++){var C=s(o(l(n,h(x,i,r,c),t[p[x]+e],d(x)),g[x]),u);n=u,u=c,c=o(r,10),r=i,i=C,C=s(o(l(y,h(79-x,b,_,w),t[m[x]+e],f(x)),v[x]),S),y=S,S=w,w=o(_,10),_=b,b=C}C=a(this.h[1],r,w),this.h[1]=a(this.h[2],c,S),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],n,b),this.h[4]=a(this.h[0],i,_),this.h[0]=C},u.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,n){"use strict";var i=n(14),r=n(11);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(e,n))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,n){"use strict";var i=n(8),r=n(366),o=n(12),s=n(52),a=n(49),l=o.assert,c=n(367),u=n(368);function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(l(s.hasOwnProperty(t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=h,h.prototype.keyPair=function(t){return new c(this,t)},h.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new r({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new i(2));;){var s=new i(e.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},h.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new i(t,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),l=t.toArray("be",s),c=new r({hash:this.hash,entropy:a,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new i(1)),d=0;;d++){var f=o.k?o.k(d):new i(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=f.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new u({r:g,s:v,recoveryParam:y})}}}}}},h.prototype.verify=function(t,e,n,r){t=this._truncateToN(new i(t,16)),n=this.keyFromPublic(n,r);var o=(e=new u(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,l=s.invm(this.n),c=l.mul(t).umod(this.n),h=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,n,r){l((3&n)===n,"The recovery param is more than two bits"),e=new u(e,r);var o=this.n,s=new i(t),a=e.r,c=e.s,h=1&n,d=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var f=e.r.invm(o),p=o.sub(s).mul(f).umod(o),m=c.mul(f).umod(o);return this.g.mulAdd(p,a,m)},h.prototype.getKeyRecoveryParam=function(t,e,n,i){if(null!==(e=new u(e,i)).recoveryParam)return e.recoveryParam;for(var r=0;r<4;r++){var o;try{o=this.recoverPubKey(t,e,r)}catch(t){continue}if(o.eq(n))return r}throw new Error("Unable to find valid recovery factor")}},function(t,e,n){"use strict";var i=n(53),r=n(212),o=n(11);function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=r.toArray(t.entropy,t.entropyEnc||"hex"),n=r.toArray(t.nonce,t.nonceEnc||"hex"),i=r.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,i)}t.exports=s,s.prototype._init=function(t,e,n){var i=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,n,i){"string"!=typeof e&&(i=n,n=e,e=null),t=r.toArray(t,e),n=r.toArray(n,i),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},s.prototype.generate=function(t,e,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(i=n,n=e,e=null),n&&(n=r.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,r.encode(s,e)}},function(t,e,n){"use strict";var i=n(8),r=n(12).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new i(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?r(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,n){"use strict";var i=n(8),r=n(12),o=r.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function l(t,e){var n=t[e.place++];if(!(128&n))return n;for(var i=15&n,r=0,o=0,s=e.place;o<i;o++,s++)r<<=8,r|=t[s];return e.place=s,r}function c(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function u(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=r.toArray(t,e);var n=new a;if(48!==t[n.place++])return!1;if(l(t,n)+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var o=l(t,n),s=t.slice(n.place,o+n.place);if(n.place+=o,2!==t[n.place++])return!1;var c=l(t,n);if(t.length!==c+n.place)return!1;var u=t.slice(n.place,c+n.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===u[0]&&128&u[1]&&(u=u.slice(1)),this.r=new i(s),this.s=new i(u),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=c(e),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];u(i,e.length),(i=i.concat(e)).push(2),u(i,n.length);var o=i.concat(n),s=[48];return u(s,o.length),s=s.concat(o),r.encode(s,t)}},function(t,e,n){"use strict";var i=n(53),r=n(52),o=n(12),s=o.assert,a=o.parseBytes,l=n(370),c=n(371);function u(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof u))return new u(t);t=r[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=i.sha512}t.exports=u,u.prototype.sign=function(t,e){t=a(t);var n=this.keyFromSecret(e),i=this.hashInt(n.messagePrefix(),t),r=this.g.mul(i),o=this.encodePoint(r),s=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),l=i.add(s).umod(this.curve.n);return this.makeSignature({R:r,S:l,Rencoded:o})},u.prototype.verify=function(t,e,n){t=a(t),e=this.makeSignature(e);var i=this.keyFromPublic(n),r=this.hashInt(e.Rencoded(),i.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(i.pub().mul(r)).eq(o)},u.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(t){return l.fromPublic(this,t)},u.prototype.keyFromSecret=function(t){return l.fromSecret(this,t)},u.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},u.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},u.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,n=t.slice(0,e).concat(-129&t[e]),i=0!=(128&t[e]),r=o.intFromLE(n);return this.curve.pointFromY(r,i)},u.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(t){return o.intFromLE(t)},u.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,n){"use strict";var i=n(12),r=i.assert,o=i.parseBytes,s=i.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),s(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),s(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),n=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),s(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),s(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),s(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),t)},a.prototype.getPublic=function(t){return i.encode(this.pubBytes(),t)},t.exports=a},function(t,e,n){"use strict";var i=n(8),r=n(12),o=r.assert,s=r.cachedProperty,a=r.parseBytes;function l(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof i&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(l,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),s(l,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),s(l,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),s(l,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},function(t,e,n){"use strict";var i=n(27);e.certificate=n(382);var r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=r;var o=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=o;var s=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});e.PublicKey=s;var a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});e.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=c;var u=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=u,e.DSAparam=i.define("DSAparam",function(){this.int()});var h=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(d),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=h;var d=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(t,e,n){var i=n(27),r=n(2);function o(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new o(t,e)},o.prototype._createNamed=function(t){var e;try{e=n(374).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return r(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},o.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i.decoders[t])),this.decoders[t]},o.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i.encoders[t])),this.encoders[t]},o.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,i=n.eval,r=n.execScript;!i&&r&&(r.call(n,"null"),i=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var o=Object_keys(n),s=i.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},function(t,e,n){var i=n(2);function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=r,r.prototype.isError=function(t){return t instanceof o},r.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},r.prototype.leaveKey=function(t,e,n){var i=this._reporterState;this.exitKey(t),null!==i.obj&&(i.obj[e]=n)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},r.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},r.prototype.error=function(t){var e,n=this._reporterState,i=t instanceof o;if(e=i?t:new o(n.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!n.options.partial)throw e;return i||n.errors.push(e),e},r.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},i(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,n){var i=n(28).Reporter,r=n(28).EncoderBuffer,o=n(28).DecoderBuffer,s=n(11),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(t,e){var n={};this._baseState=n,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=c;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var t=this._baseState,e={};u.forEach(function(n){e[n]=t[n]});var n=new this.constructor(e.parent);return n._baseState=e,n},c.prototype._wrap=function(){var t=this._baseState;l.forEach(function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}},this)},c.prototype._init=function(t){var e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),s.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){var e=this._baseState,n=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==n.length&&(s(null===e.children),e.children=n,n.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(n){n==(0|n)&&(n|=0);var i=t[n];e[i]=n}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){c.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){c.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(n),this}}),c.prototype.use=function(t){s(t);var e=this._baseState;return s(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){var e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){var e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){var e=this._baseState;return s(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){var e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},c.prototype.contains=function(t){var e=this._baseState;return s(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){var n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));var i,r=n.default,s=!0,a=null;if(null!==n.key&&(a=t.enterKey(n.key)),n.optional){var l=null;if(null!==n.explicit?l=n.explicit:null!==n.implicit?l=n.implicit:null!==n.tag&&(l=n.tag),null!==l||n.any){if(s=this._peekTag(t,l,n.any),t.isError(s))return s}else{var c=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),s=!0}catch(t){s=!1}t.restore(c)}}if(n.obj&&s&&(i=t.enterObject()),s){if(null!==n.explicit){var u=this._decodeTag(t,n.explicit);if(t.isError(u))return u;t=u}var h=t.offset;if(null===n.use&&null===n.choice){if(n.any)c=t.save();var d=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(d))return d;n.any?r=t.raw(c):t=d}if(e&&e.track&&null!==n.tag&&e.track(t.path(),h,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),r=n.any?r:null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),t.isError(r))return r;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(t,e)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var f=new o(r);r=this._getUse(n.contains,t._reporterState.obj)._decode(f,e)}}return n.obj&&s&&(r=t.leaveObject(i)),null===n.key||null===r&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,n.key,r),r},c.prototype._decodeGeneric=function(t,e,n){var i=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,i.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&i.args?this._decodeObjid(e,i.args[0],i.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(t,e){var n=this._baseState,i=null,r=!1;return Object.keys(n.choice).some(function(o){var s=t.save(),a=n.choice[o];try{var l=a._decode(t,e);if(t.isError(l))return!1;i={type:o,value:l},r=!0}catch(e){return t.restore(s),!1}return!0},this),r?i:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new r(t,this.reporter)},c.prototype._encode=function(t,e,n){var i=this._baseState;if(null===i.default||i.default!==t){var r=this._encodeValue(t,e,n);if(void 0!==r&&!this._skipDefault(r,e,n))return r}},c.prototype._encodeValue=function(t,e,n){var r=this._baseState;if(null===r.parent)return r.children[0]._encode(t,e||new i);var o=null;if(this.reporter=e,r.optional&&void 0===t){if(null===r.default)return;t=r.default}var s=null,a=!1;if(r.any)o=this._createEncoderBuffer(t);else if(r.choice)o=this._encodeChoice(t,e);else if(r.contains)s=this._getUse(r.contains,n)._encode(t,e),a=!0;else if(r.children)s=r.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var i=e.enterKey(n._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var r=n._encode(t[n._baseState.key],e,t);return e.leaveKey(i),r},this).filter(function(t){return t}),s=this._createEncoderBuffer(s);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return e.error("Too many args for : "+r.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(n){var i=this._baseState;return this._getUse(i.args[0],t)._encode(n,e)},l))}else null!==r.use?o=this._getUse(r.use,n)._encode(t,e):(s=this._encodePrimitive(r.tag,t),a=!0);if(!r.any&&null===r.choice){var c=null!==r.implicit?r.implicit:r.tag,u=null===r.implicit?"universal":"context";null===c?null===r.use&&e.error("Tag could be omitted only for .use()"):null===r.use&&(o=this._encodeComposite(c,a,u,s))}return null!==r.explicit&&(o=this._encodeComposite(r.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(t,e){var n=this._baseState,i=n.choice[t.type];return i||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},function(t,e,n){var i=n(218);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i._reverse(e.tag)},function(t,e,n){var i=e;i.der=n(219),i.pem=n(379)},function(t,e,n){var i=n(2),r=n(4).Buffer,o=n(219);function s(t){o.call(this,t),this.enc="pem"}i(s,o),t.exports=s,s.prototype.decode=function(t,e){for(var n=t.toString().split(/[\r\n]+/g),i=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,l=-1,c=0;c<n.length;c++){var u=n[c].match(s);if(null!==u&&u[2]===i){if(-1!==a){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;a=c}}if(-1===a||-1===l)throw new Error("PEM section not found for: "+i);var h=n.slice(a+1,l).join("");h.replace(/[^a-z0-9\+\/=]+/gi,"");var d=new r(h,"base64");return o.prototype.decode.call(this,d,e)}},function(t,e,n){var i=e;i.der=n(220),i.pem=n(381)},function(t,e,n){var i=n(2),r=n(220);function o(t){r.call(this,t),this.enc="pem"}i(o,r),t.exports=o,o.prototype.encode=function(t,e){for(var n=r.prototype.encode.call(this,t).toString("base64"),i=["-----BEGIN "+e.label+"-----"],o=0;o<n.length;o+=64)i.push(n.slice(o,o+64));return i.push("-----END "+e.label+"-----"),i.join("\n")}},function(t,e,n){"use strict";var i=n(27),r=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}),l=i.define("RelativeDistinguishedName",function(){this.setof(o)}),c=i.define("RDNSequence",function(){this.seqof(l)}),u=i.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),h=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),d=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(u),this.key("validity").use(h),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())});t.exports=p},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,n){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,s=n(33),a=n(47),l=n(3).Buffer;t.exports=function(t,e){var n,c=t.toString(),u=c.match(i);if(u){var h="aes"+u[1],d=l.from(u[2],"hex"),f=l.from(u[3].replace(/[\r\n]/g,""),"base64"),p=s(e,d.slice(0,8),parseInt(u[1],10)).key,m=[],g=a.createDecipheriv(h,p,d);m.push(g.update(f)),m.push(g.final()),n=l.concat(m)}else{var v=c.match(o);n=new l(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(r)[1],data:n}}},function(t,e,n){(function(e){var i=n(8),r=n(51).ec,o=n(35),s=n(221);function a(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,n,l,c,u){var h=o(l);if("ec"===h.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var i=s[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var o=new r(i),a=n.data.subjectPrivateKey.data;return o.verify(e,t,a)}(t,n,h)}if("dsa"===h.type){if("dsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var r=n.data.p,s=n.data.q,l=n.data.g,c=n.data.pub_key,u=o.signature.decode(t,"der"),h=u.s,d=u.r;a(h,s),a(d,s);var f=i.mont(r),p=h.invm(s);return 0===l.toRed(f).redPow(new i(e).mul(p).mod(s)).fromRed().mul(c.toRed(f).redPow(d.mul(p).mod(s)).fromRed()).mod(r).mod(s).cmp(d)}(t,n,h)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");n=e.concat([u,n]);for(var d=h.modulus.byteLength(),f=[1],p=0;n.length+f.length+2<d;)f.push(255),p++;f.push(0);for(var m=-1;++m<n.length;)f.push(n[m]);f=new e(f);var g=i.mont(h.modulus);t=(t=new i(t).toRed(g)).redPow(new i(h.publicExponent)),t=new e(t.fromRed().toArray());var v=p<8?1:0;for(d=Math.min(t.length,f.length),t.length!==f.length&&(v=1),m=-1;++m<d;)v|=t[m]^f[m];return 0===v}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){var i=n(51),r=n(8);t.exports=function(t){return new s(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function a(t,n,i){Array.isArray(t)||(t=t.toArray());var r=new e(t);if(i&&r.length<i){var o=new e(i-r.length);o.fill(0),r=e.concat([o,r])}return n?r.toString(n):r}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},s.prototype.computeSecret=function(t,n,i){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},s.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[n.length-1]%2?n[0]=7:n[0]=6),a(n,t)},s.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},s.prototype.setPublicKey=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.keys._importPublic(t),this},s.prototype.setPrivateKey=function(t,n){n=n||"utf8",e.isBuffer(t)||(t=new e(t,n));var i=new r(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}}).call(this,n(4).Buffer)},function(t,e,n){e.publicEncrypt=n(388),e.privateDecrypt=n(389),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},function(t,e,n){var i=n(35),r=n(19),o=n(23),s=n(222),a=n(223),l=n(8),c=n(224),u=n(50),h=n(3).Buffer;t.exports=function(t,e,n){var d;d=t.padding?t.padding:n?1:4;var f,p=i(t);if(4===d)f=function(t,e){var n=t.modulus.byteLength(),i=e.length,c=o("sha1").update(h.alloc(0)).digest(),u=c.length,d=2*u;if(i>n-d-2)throw new Error("message too long");var f=h.alloc(n-i-d-2),p=n-u-1,m=r(u),g=a(h.concat([c,f,h.alloc(1,1),e],p),s(m,p)),v=a(m,s(g,u));return new l(h.concat([h.alloc(1),v,g],n))}(p,e);else if(1===d)f=function(t,e,n){var i,o=e.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");i=n?h.alloc(s-o-3,255):function(t){var e,n=h.allocUnsafe(t),i=0,o=r(2*t),s=0;for(;i<t;)s===o.length&&(o=r(2*t),s=0),(e=o[s++])&&(n[i++]=e);return n}(s-o-3);return new l(h.concat([h.from([0,n?1:2]),i,h.alloc(1),e],s))}(p,e,n);else{if(3!==d)throw new Error("unknown padding");if((f=new l(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?u(f,p):c(f,p)}},function(t,e,n){var i=n(35),r=n(222),o=n(223),s=n(8),a=n(50),l=n(23),c=n(224),u=n(3).Buffer;t.exports=function(t,e,n){var h;h=t.padding?t.padding:n?1:4;var d,f=i(t),p=f.modulus.byteLength();if(e.length>p||new s(e).cmp(f.modulus)>=0)throw new Error("decryption error");d=n?c(new s(e),f):a(e,f);var m=u.alloc(p-d.length);if(d=u.concat([m,d],p),4===h)return function(t,e){var n=t.modulus.byteLength(),i=l("sha1").update(u.alloc(0)).digest(),s=i.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),c=e.slice(s+1),h=o(a,r(c,s)),d=o(c,r(h,n-s-1));if(function(t,e){t=u.from(t),e=u.from(e);var n=0,i=t.length;t.length!==e.length&&(n++,i=Math.min(t.length,e.length));var r=-1;for(;++r<i;)n+=t[r]^e[r];return n}(i,d.slice(0,s)))throw new Error("decryption error");var f=s;for(;0===d[f];)f++;if(1!==d[f++])throw new Error("decryption error");return d.slice(f)}(f,d);if(1===h)return function(t,e,n){var i=e.slice(0,2),r=2,o=0;for(;0!==e[r++];)if(r>=e.length){o++;break}var s=e.slice(2,r-1);("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(r)}(0,d,n);if(3===h)return d;throw new Error("unknown padding")}},function(t,e,n){"use strict";(function(t,i){function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(3),s=n(19),a=o.Buffer,l=o.kMaxLength,c=t.crypto||t.msCrypto,u=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>u||t<0)throw new TypeError("offset must be a uint32");if(t>l||t>e)throw new RangeError("offset out of range")}function d(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>u||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>l)throw new RangeError("buffer too small")}function f(t,e,n,r){if(i.browser){var o=t.buffer,a=new Uint8Array(o,e,n);return c.getRandomValues(a),r?void i.nextTick(function(){r(null,t)}):t}if(!r)return s(n).copy(t,e),t;s(n,function(n,i){if(n)return r(n);i.copy(t,e),r(null,t)})}c&&c.getRandomValues||!i.browser?(e.randomFill=function(e,n,i,r){if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)r=n,n=0,i=e.length;else if("function"==typeof i)r=i,i=e.length-n;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return h(n,e.length),d(i,n,e.length),f(e,n,i,r)},e.randomFillSync=function(e,n,i){void 0===n&&(n=0);if(!(a.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(n,e.length),void 0===i&&(i=e.length-n);return d(i,n,e.length),f(e,n,i)}):(e.randomFill=r,e.randomFillSync=r)}).call(this,n(7),n(9))},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=0;function o(t){if(!(this instanceof o))return new o(t);this.id=r++,this.ee=t}o.prototype.on=function(t,e,n){return e.__ultron=this.id,this.ee.on(t,e,n),this},o.prototype.once=function(t,e,n){return e.__ultron=this.id,this.ee.once(t,e,n),this},o.prototype.remove=function(){var t,e=arguments;if(1===e.length&&"string"==typeof e[0])e=e[0].split(/[, ]+/);else if(!e.length)for(t in e=[],this.ee._events)i.call(this.ee._events,t)&&e.push(t);for(var n=0;n<e.length;n++)for(var r=this.ee.listeners(e[n]),o=0;o<r.length;o++){if((t=r[o]).listener){if(t.listener.__ultron!==this.id)continue;delete t.listener.__ultron}else{if(t.__ultron!==this.id)continue;delete t.__ultron}this.ee.removeListener(e[n],t)}return this},o.prototype.destroy=function(){return!!this.ee&&(this.remove(),this.ee=null,!0)},t.exports=o},function(t,e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.BufferUtil={merge:function(t,e){for(var n=0,i=0,r=e.length;i<r;++i){var o=e[i];o.copy(t,n),n+=o.length}},mask:function(t,e,n,i,r){for(var o=e.readUInt32LE(0,!0),s=0;s<r-3;s+=4){var a=o^t.readUInt32LE(s,!0);a<0&&(a=4294967296+a),n.writeUInt32LE(a,i+s,!0)}switch(r%4){case 3:n[i+s+2]=t[s+2]^e[2];case 2:n[i+s+1]=t[s+1]^e[1];case 1:n[i+s]=t[s]^e[0]}},unmask:function(t,e){for(var n=e.readUInt32LE(0,!0),i=t.length,r=0;r<i-3;r+=4){var o=n^t.readUInt32LE(r,!0);o<0&&(o=4294967296+o),t.writeUInt32LE(o,r,!0)}switch(i%4){case 3:t[r+2]=t[r+2]^e[2];case 2:t[r+1]=t[r+1]^e[1];case 1:t[r]=t[r]^e[0]}}}},function(t,e,n){"use strict";(function(t){var i=n(4).Buffer,r=n(24).Transform,o=n(394),s=n(13),a=n(230).ok,l=n(4).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(o),h=0;h<u.length;h++){var d=u[h];d.match(/^Z/)&&Object.defineProperty(e,d,{enumerable:!0,value:o[d],writable:!1})}for(var f={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},p=Object.keys(f),m=0;m<p.length;m++){var g=p[m];f[f[g]]=g}function v(t,e,n){var r=[],o=0;function s(){for(var e;null!==(e=t.read());)r.push(e),o+=e.length;t.once("readable",s)}function a(){var e,s=null;o>=l?s=new RangeError(c):e=i.concat(r,o),r=[],t.close(),n(s,e)}t.on("error",function(e){t.removeListener("end",a),t.removeListener("readable",s),n(e)}),t.on("end",a),t.end(e),s()}function y(t,e){if("string"==typeof e&&(e=i.from(e)),!i.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function b(t){if(!(this instanceof b))return new b(t);M.call(this,t,o.DEFLATE)}function _(t){if(!(this instanceof _))return new _(t);M.call(this,t,o.INFLATE)}function w(t){if(!(this instanceof w))return new w(t);M.call(this,t,o.GZIP)}function S(t){if(!(this instanceof S))return new S(t);M.call(this,t,o.GUNZIP)}function x(t){if(!(this instanceof x))return new x(t);M.call(this,t,o.DEFLATERAW)}function C(t){if(!(this instanceof C))return new C(t);M.call(this,t,o.INFLATERAW)}function k(t){if(!(this instanceof k))return new k(t);M.call(this,t,o.UNZIP)}function T(t){return t===o.Z_NO_FLUSH||t===o.Z_PARTIAL_FLUSH||t===o.Z_SYNC_FLUSH||t===o.Z_FULL_FLUSH||t===o.Z_FINISH||t===o.Z_BLOCK}function M(t,n){var s=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,t),t.flush&&!T(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!T(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||o.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:o.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!i.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var a=this;this._hadError=!1,this._handle.onerror=function(t,n){E(a),a._hadError=!0;var i=new Error(t);i.errno=n,i.code=e.codes[n],a.emit("error",i)};var l=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(l=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,l,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function E(e,n){n&&t.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function A(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),e.Deflate=b,e.Inflate=_,e.Gzip=w,e.Gunzip=S,e.DeflateRaw=x,e.InflateRaw=C,e.Unzip=k,e.createDeflate=function(t){return new b(t)},e.createInflate=function(t){return new _(t)},e.createDeflateRaw=function(t){return new x(t)},e.createInflateRaw=function(t){return new C(t)},e.createGzip=function(t){return new w(t)},e.createGunzip=function(t){return new S(t)},e.createUnzip=function(t){return new k(t)},e.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new b(e),t,n)},e.deflateSync=function(t,e){return y(new b(e),t)},e.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new w(e),t,n)},e.gzipSync=function(t,e){return y(new w(e),t)},e.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new x(e),t,n)},e.deflateRawSync=function(t,e){return y(new x(e),t)},e.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new k(e),t,n)},e.unzipSync=function(t,e){return y(new k(e),t)},e.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new _(e),t,n)},e.inflateSync=function(t,e){return y(new _(e),t)},e.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new S(e),t,n)},e.gunzipSync=function(t,e){return y(new S(e),t)},e.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new C(e),t,n)},e.inflateRawSync=function(t,e){return y(new C(e),t)},s.inherits(M,r),M.prototype.params=function(n,i,r){if(n<e.Z_MIN_LEVEL||n>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(i!=e.Z_FILTERED&&i!=e.Z_HUFFMAN_ONLY&&i!=e.Z_RLE&&i!=e.Z_FIXED&&i!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==n||this._strategy!==i){var s=this;this.flush(o.Z_SYNC_FLUSH,function(){a(s._handle,"zlib binding closed"),s._handle.params(n,i),s._hadError||(s._level=n,s._strategy=i,r&&r())})}else t.nextTick(r)},M.prototype.reset=function(){return a(this._handle,"zlib binding closed"),this._handle.reset()},M.prototype._flush=function(t){this._transform(i.alloc(0),"",t)},M.prototype.flush=function(e,n){var r=this,s=this._writableState;("function"==typeof e||void 0===e&&!n)&&(n=e,e=o.Z_FULL_FLUSH),s.ended?n&&t.nextTick(n):s.ending?n&&this.once("end",n):s.needDrain?n&&this.once("drain",function(){return r.flush(e,n)}):(this._flushFlag=e,this.write(i.alloc(0),"",n))},M.prototype.close=function(e){E(this,e),t.nextTick(A,this)},M.prototype._transform=function(t,e,n){var r,s=this._writableState,a=(s.ending||s.ended)&&(!t||s.length===t.length);return null===t||i.isBuffer(t)?this._handle?(a?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=s.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(t,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},M.prototype._processChunk=function(t,e,n){var r=t&&t.length,o=this._chunkSize-this._offset,s=0,u=this,h="function"==typeof n;if(!h){var d,f=[],p=0;this.on("error",function(t){d=t}),a(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(e,t,s,r,this._buffer,this._offset,o)}while(!this._hadError&&y(m[0],m[1]));if(this._hadError)throw d;if(p>=l)throw E(this),new RangeError(c);var g=i.concat(f,p);return E(this),g}a(this._handle,"zlib binding closed");var v=this._handle.write(e,t,s,r,this._buffer,this._offset,o);function y(l,c){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var d=o-c;if(a(d>=0,"have should not go down"),d>0){var m=u._buffer.slice(u._offset,u._offset+d);u._offset+=d,h?u.push(m):(f.push(m),p+=m.length)}if((0===c||u._offset>=u._chunkSize)&&(o=u._chunkSize,u._offset=0,u._buffer=i.allocUnsafe(u._chunkSize)),0===c){if(s+=r-l,r=l,!h)return!0;var g=u._handle.write(e,t,s,r,u._buffer,u._offset,u._chunkSize);return g.callback=y,void(g.buffer=t)}if(!h)return!1;n()}}v.buffer=t,v.callback=y},s.inherits(b,M),s.inherits(_,M),s.inherits(w,M),s.inherits(S,M),s.inherits(x,M),s.inherits(C,M),s.inherits(k,M)}).call(this,n(9))},function(t,e,n){"use strict";(function(t,i){var r=n(230),o=n(396),s=n(397),a=n(400),l=n(403);for(var c in l)e[c]=l[c];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7;function u(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||a.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},u.prototype.write=function(t,e,n,i,r,o,s){return this._write(!0,t,e,n,i,r,o,s)},u.prototype.writeSync=function(t,e,n,i,r,o,s){return this._write(!1,t,e,n,i,r,o,s)},u.prototype._write=function(n,o,s,a,l,c,u,h){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==e.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=t.alloc(0),l=0,a=0),this.strm.avail_in=l,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=u,this.flush=o,!n)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return i.nextTick(function(){d._process(),d._after()}),this},u.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},u.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},u.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(t,n,i,o,s){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(t>=8&&t<=15,"invalid windowBits"),r(n>=-1&&n<=9,"invalid compression level"),r(i>=1&&i<=9,"invalid memlevel"),r(o===e.Z_FILTERED||o===e.Z_HUFFMAN_ONLY||o===e.Z_RLE||o===e.Z_FIXED||o===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,t,i,o,s),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(t,n,i,r,l){switch(this.level=t,this.windowBits=n,this.memLevel=i,this.strategy=r,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=s.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=a.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=u}).call(this,n(4).Buffer,n(9))},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";var i,r=n(37),o=n(398),s=n(231),a=n(232),l=n(399),c=0,u=1,h=3,d=4,f=5,p=0,m=1,g=-2,v=-3,y=-5,b=-1,_=1,w=2,S=3,x=4,C=0,k=2,T=8,M=9,E=15,A=8,I=286,$=30,D=19,L=2*I+1,P=15,O=3,N=258,j=N+O+1,R=32,B=42,F=69,Y=73,H=91,W=103,z=113,U=666,V=1,G=2,q=3,X=4,K=3;function J(t,e){return t.msg=l[e],e}function Z(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function it(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-j?t.strstart-(t.w_size-j):0,c=t.window,u=t.w_mask,h=t.prev,d=t.strstart+N,f=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(n=e)+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(i=N-(d-o),o=d-N,i>s){if(t.match_start=e,s=i,i>=a)break;f=c[o+s-1],p=c[o+s]}}}while((e=h[e&u])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function ot(t){var e,n,i,o,l,c,u,h,d,f,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-j)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=p?i-p:0}while(--n);e=n=p;do{i=t.prev[--e],t.prev[e]=i>=p?i-p:0}while(--n);o+=p}if(0===t.strm.avail_in)break;if(c=t.strm,u=t.window,h=t.strstart+t.lookahead,d=o,f=void 0,(f=c.avail_in)>d&&(f=d),n=0===f?0:(c.avail_in-=f,r.arraySet(u,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=s(c.adler,u,f,h):2===c.state.wrap&&(c.adler=a(c.adler,u,f,h)),c.next_in+=f,c.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=O)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+O-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<j&&0!==t.strm.avail_in)}function st(t,e){for(var n,i;;){if(t.lookahead<j){if(ot(t),t.lookahead<j&&e===c)return V;if(0===t.lookahead)break}if(n=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-j&&(t.match_length=rt(t,n)),t.match_length>=O)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=t.strstart<O-1?t.strstart:O-1,e===d?(et(t,!0),0===t.strm.avail_out?q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function at(t,e){for(var n,i,r;;){if(t.lookahead<j){if(ot(t),t.lookahead<j&&e===c)return V;if(0===t.lookahead)break}if(n=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-j&&(t.match_length=rt(t,n),t.match_length<=5&&(t.strategy===_||t.match_length===O&&t.strstart-t.match_start>4096)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-O,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=O-1,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return V}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return V}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,e===d?(et(t,!0),0===t.strm.avail_out?q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function lt(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*L),this.dyn_dtree=new r.Buf16(2*(2*$+1)),this.bl_tree=new r.Buf16(2*(2*D+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(P+1),this.heap=new r.Buf16(2*I+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*I+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=k,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?B:z,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),p):J(t,g)}function ht(t){var e,n=ut(t);return n===p&&((e=t.state).window_size=2*e.w_size,Q(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=O-1,e.match_available=0,e.ins_h=0),n}function dt(t,e,n,i,o,s){if(!t)return g;var a=1;if(e===b&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>M||n!==T||i<8||i>15||e<0||e>9||s<0||s>x)return J(t,g);8===i&&(i=9);var l=new ct;return t.state=l,l.strm=t,l.wrap=a,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+O-1)/O),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,ht(t)}i=[new lt(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ot(t),0===t.lookahead&&e===c)return V;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,et(t,!1),0===t.strm.avail_out))return V;if(t.strstart-t.block_start>=t.w_size-j&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?q:X):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),V)}),new lt(4,4,8,4,st),new lt(4,5,16,8,st),new lt(4,6,32,32,st),new lt(4,4,16,16,at),new lt(8,16,32,32,at),new lt(8,16,128,128,at),new lt(8,32,128,256,at),new lt(32,128,258,1024,at),new lt(32,258,258,4096,at)],e.deflateInit=function(t,e){return dt(t,e,T,E,A,C)},e.deflateInit2=dt,e.deflateReset=ht,e.deflateResetKeep=ut,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,p):g},e.deflate=function(t,e){var n,r,s,l;if(!t||!t.state||e>f||e<0)return t?J(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===U&&e!==d)return J(t,0===t.avail_out?y:g);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===B)if(2===r.wrap)t.adler=0,nt(r,31),nt(r,139),nt(r,8),r.gzhead?(nt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),nt(r,255&r.gzhead.time),nt(r,r.gzhead.time>>8&255),nt(r,r.gzhead.time>>16&255),nt(r,r.gzhead.time>>24&255),nt(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),nt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(nt(r,255&r.gzhead.extra.length),nt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=F):(nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),nt(r,K),r.status=z);else{var v=T+(r.w_bits-8<<4)<<8;v|=(r.strategy>=w||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(v|=R),v+=31-v%31,r.status=z,it(r,v),0!==r.strstart&&(it(r,t.adler>>>16),it(r,65535&t.adler)),t.adler=1}if(r.status===F)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending!==r.pending_buf_size));)nt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Y)}else r.status=Y;if(r.status===Y)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,nt(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=H)}else r.status=H;if(r.status===H)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,nt(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=W)}else r.status=W;if(r.status===W&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(t),r.pending+2<=r.pending_buf_size&&(nt(r,255&t.adler),nt(r,t.adler>>8&255),t.adler=0,r.status=z)):r.status=z),0!==r.pending){if(tt(t),0===t.avail_out)return r.last_flush=-1,p}else if(0===t.avail_in&&Z(e)<=Z(n)&&e!==d)return J(t,y);if(r.status===U&&0!==t.avail_in)return J(t,y);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==U){var b=r.strategy===w?function(t,e){for(var n;;){if(0===t.lookahead&&(ot(t),0===t.lookahead)){if(e===c)return V;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(r,e):r.strategy===S?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=N){if(ot(t),t.lookahead<=N&&e===c)return V;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=O&&t.strstart>0&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+N;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=N-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=O?(n=o._tr_tally(t,1,t.match_length-O),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(r,e):i[r.level].func(r,e);if(b!==q&&b!==X||(r.status=U),b===V||b===q)return 0===t.avail_out&&(r.last_flush=-1),p;if(b===G&&(e===u?o._tr_align(r):e!==f&&(o._tr_stored_block(r,0,0,!1),e===h&&(Q(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(t),0===t.avail_out))return r.last_flush=-1,p}return e!==d?p:r.wrap<=0?m:(2===r.wrap?(nt(r,255&t.adler),nt(r,t.adler>>8&255),nt(r,t.adler>>16&255),nt(r,t.adler>>24&255),nt(r,255&t.total_in),nt(r,t.total_in>>8&255),nt(r,t.total_in>>16&255),nt(r,t.total_in>>24&255)):(it(r,t.adler>>>16),it(r,65535&t.adler)),tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?p:m)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==B&&e!==F&&e!==Y&&e!==H&&e!==W&&e!==z&&e!==U?J(t,g):(t.state=null,e===z?J(t,v):p):g},e.deflateSetDictionary=function(t,e){var n,i,o,a,l,c,u,h,d=e.length;if(!t||!t.state)return g;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==B||n.lookahead)return g;for(1===a&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new r.Buf8(n.w_size),r.arraySet(h,e,d-n.w_size,n.w_size,0),e=h,d=n.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=d,t.next_in=0,t.input=e,ot(n);n.lookahead>=O;){i=n.strstart,o=n.lookahead-(O-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+O-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=O-1,ot(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=O-1,n.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,n.wrap=a,p},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(37),r=4,o=0,s=1,a=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,u=1,h=2,d=29,f=256,p=f+1+d,m=30,g=19,v=2*p+1,y=15,b=16,_=7,w=256,S=16,x=17,C=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(p+2));l(A);var I=new Array(2*m);l(I);var $=new Array(512);l($);var D=new Array(256);l(D);var L=new Array(d);l(L);var P,O,N,j=new Array(m);function R(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function F(t){return t<256?$[t]:$[256+(t>>>7)]}function Y(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function H(t,e,n){t.bi_valid>b-n?(t.bi_buf|=e<<t.bi_valid&65535,Y(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=n-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function W(t,e,n){H(t,n[2*e],n[2*e+1])}function z(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function U(t,e,n){var i,r,o=new Array(y+1),s=0;for(i=1;i<=y;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=z(o[a]++,a))}}function V(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<m;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){t.bi_valid>8?Y(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function q(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function X(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&q(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!q(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function K(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?W(t,r,e):(W(t,(o=D[r])+f+1,e),0!==(s=k[o])&&H(t,r-=L[o],s),W(t,o=F(--i),n),0!==(s=T[o])&&H(t,i-=j[o],s))}while(a<t.last_lit);W(t,w,e)}function J(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=v,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)X(t,o,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],X(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,X(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=y;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<v;n++)(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>p&&(o=p,m++),l[2*i+1]=o,i>c||(t.bl_count[o]++,s=0,i>=f&&(s=d[i-f]),a=l[2*i],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(u[2*i+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),U(o,c,t.bl_count)}function Z(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<l&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*S]++):a<=10?t.bl_tree[2*x]++:t.bl_tree[2*C]++,a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))}function Q(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<l&&r===s)){if(a<c)do{W(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(W(t,r,t.bl_tree),a--),W(t,S,t.bl_tree),H(t,a-3,2)):a<=10?(W(t,x,t.bl_tree),H(t,a-3,3)):(W(t,C,t.bl_tree),H(t,a-11,7));a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}}l(j);var tt=!1;function et(t,e,n,r){H(t,(c<<1)+(r?1:0),3),function(t,e,n,r){G(t),r&&(Y(t,n),Y(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(!function(){var t,e,n,i,r,o=new Array(y+1);for(n=0,i=0;i<d-1;i++)for(L[i]=n,t=0;t<1<<k[i];t++)D[n++]=i;for(D[n-1]=i,r=0,i=0;i<16;i++)for(j[i]=r,t=0;t<1<<T[i];t++)$[r++]=i;for(r>>=7;i<m;i++)for(j[i]=r<<7,t=0;t<1<<T[i]-7;t++)$[256+r++]=i;for(e=0;e<=y;e++)o[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,o[8]++;for(;t<=255;)A[2*t+1]=9,t++,o[9]++;for(;t<=279;)A[2*t+1]=7,t++,o[7]++;for(;t<=287;)A[2*t+1]=8,t++,o[8]++;for(U(A,p+1,o),t=0;t<m;t++)I[2*t+1]=5,I[2*t]=z(t,5);P=new R(A,k,f+1,p,y),O=new R(I,T,0,m,y),N=new R(new Array(0),M,0,g,_)}(),tt=!0),t.l_desc=new B(t.dyn_ltree,P),t.d_desc=new B(t.dyn_dtree,O),t.bl_desc=new B(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,V(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,i){var l,c,d=0;t.level>0?(t.strm.data_type===a&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return s;return o}(t)),J(t,t.l_desc),J(t,t.d_desc),d=function(t){var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),J(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==e?et(t,e,n,i):t.strategy===r||c===l?(H(t,(u<<1)+(i?1:0),3),K(t,A,I)):(H(t,(h<<1)+(i?1:0),3),function(t,e,n,i){var r;for(H(t,e-257,5),H(t,n-1,5),H(t,i-4,4),r=0;r<i;r++)H(t,t.bl_tree[2*E[r]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,d+1),K(t,t.dyn_ltree,t.dyn_dtree)),V(t),i&&G(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(D[n]+f+1)]++,t.dyn_dtree[2*F(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){H(t,u<<1,3),W(t,w,A),function(t){16===t.bi_valid?(Y(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";var i=n(37),r=n(231),o=n(232),s=n(401),a=n(402),l=0,c=1,u=2,h=4,d=5,f=6,p=0,m=1,g=2,v=-2,y=-3,b=-4,_=-5,w=8,S=1,x=2,C=3,k=4,T=5,M=6,E=7,A=8,I=9,$=10,D=11,L=12,P=13,O=14,N=15,j=16,R=17,B=18,F=19,Y=20,H=21,W=22,z=23,U=24,V=25,G=26,q=27,X=28,K=29,J=30,Z=31,Q=32,tt=852,et=592,nt=15;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function rt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=S,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(tt),e.distcode=e.distdyn=new i.Buf32(et),e.sane=1,e.back=-1,p):v}function st(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ot(t)):v}function at(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?v:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,st(t))):v}function lt(t,e){var n,i;return t?(i=new rt,t.state=i,i.window=null,(n=at(t,e))!==p&&(t.state=null),n):v}var ct,ut,ht=!0;function dt(t){if(ht){var e;for(ct=new i.Buf32(512),ut=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(c,t.lens,0,288,ct,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(u,t.lens,0,32,ut,0,t.work,{bits:5}),ht=!1}t.lencode=ct,t.lenbits=9,t.distcode=ut,t.distbits=5}function ft(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=st,e.inflateReset2=at,e.inflateResetKeep=ot,e.inflateInit=function(t){return lt(t,nt)},e.inflateInit2=lt,e.inflate=function(t,e){var n,tt,et,nt,rt,ot,st,at,lt,ct,ut,ht,pt,mt,gt,vt,yt,bt,_t,wt,St,xt,Ct,kt,Tt=0,Mt=new i.Buf8(4),Et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return v;(n=t.state).mode===L&&(n.mode=P),rt=t.next_out,et=t.output,st=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,at=n.hold,lt=n.bits,ct=ot,ut=st,xt=p;t:for(;;)switch(n.mode){case S:if(0===n.wrap){n.mode=P;break}for(;lt<16;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(2&n.wrap&&35615===at){n.check=0,Mt[0]=255&at,Mt[1]=at>>>8&255,n.check=o(n.check,Mt,2,0),at=0,lt=0,n.mode=x;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&at)<<8)+(at>>8))%31){t.msg="incorrect header check",n.mode=J;break}if((15&at)!==w){t.msg="unknown compression method",n.mode=J;break}if(lt-=4,St=8+(15&(at>>>=4)),0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=J;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&at?$:L,at=0,lt=0;break;case x:for(;lt<16;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(n.flags=at,(255&n.flags)!==w){t.msg="unknown compression method",n.mode=J;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=J;break}n.head&&(n.head.text=at>>8&1),512&n.flags&&(Mt[0]=255&at,Mt[1]=at>>>8&255,n.check=o(n.check,Mt,2,0)),at=0,lt=0,n.mode=C;case C:for(;lt<32;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.time=at),512&n.flags&&(Mt[0]=255&at,Mt[1]=at>>>8&255,Mt[2]=at>>>16&255,Mt[3]=at>>>24&255,n.check=o(n.check,Mt,4,0)),at=0,lt=0,n.mode=k;case k:for(;lt<16;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.xflags=255&at,n.head.os=at>>8),512&n.flags&&(Mt[0]=255&at,Mt[1]=at>>>8&255,n.check=o(n.check,Mt,2,0)),at=0,lt=0,n.mode=T;case T:if(1024&n.flags){for(;lt<16;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.length=at,n.head&&(n.head.extra_len=at),512&n.flags&&(Mt[0]=255&at,Mt[1]=at>>>8&255,n.check=o(n.check,Mt,2,0)),at=0,lt=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((ht=n.length)>ot&&(ht=ot),ht&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,tt,nt,ht,St)),512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,n.length-=ht),n.length))break t;n.length=0,n.mode=E;case E:if(2048&n.flags){if(0===ot)break t;ht=0;do{St=tt[nt+ht++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St))}while(St&&ht<ot);if(512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(4096&n.flags){if(0===ot)break t;ht=0;do{St=tt[nt+ht++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St))}while(St&&ht<ot);if(512&n.flags&&(n.check=o(n.check,tt,ht,nt)),ot-=ht,nt+=ht,St)break t}else n.head&&(n.head.comment=null);n.mode=I;case I:if(512&n.flags){for(;lt<16;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(at!==(65535&n.check)){t.msg="header crc mismatch",n.mode=J;break}at=0,lt=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=L;break;case $:for(;lt<32;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}t.adler=n.check=it(at),at=0,lt=0,n.mode=D;case D:if(0===n.havedict)return t.next_out=rt,t.avail_out=st,t.next_in=nt,t.avail_in=ot,n.hold=at,n.bits=lt,g;t.adler=n.check=1,n.mode=L;case L:if(e===d||e===f)break t;case P:if(n.last){at>>>=7&lt,lt-=7&lt,n.mode=q;break}for(;lt<3;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}switch(n.last=1&at,lt-=1,3&(at>>>=1)){case 0:n.mode=O;break;case 1:if(dt(n),n.mode=Y,e===f){at>>>=2,lt-=2;break t}break;case 2:n.mode=R;break;case 3:t.msg="invalid block type",n.mode=J}at>>>=2,lt-=2;break;case O:for(at>>>=7&lt,lt-=7&lt;lt<32;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if((65535&at)!=(at>>>16^65535)){t.msg="invalid stored block lengths",n.mode=J;break}if(n.length=65535&at,at=0,lt=0,n.mode=N,e===f)break t;case N:n.mode=j;case j:if(ht=n.length){if(ht>ot&&(ht=ot),ht>st&&(ht=st),0===ht)break t;i.arraySet(et,tt,nt,ht,rt),ot-=ht,nt+=ht,st-=ht,rt+=ht,n.length-=ht;break}n.mode=L;break;case R:for(;lt<14;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(n.nlen=257+(31&at),at>>>=5,lt-=5,n.ndist=1+(31&at),at>>>=5,lt-=5,n.ncode=4+(15&at),at>>>=4,lt-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=J;break}n.have=0,n.mode=B;case B:for(;n.have<n.ncode;){for(;lt<3;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.lens[Et[n.have++]]=7&at,at>>>=3,lt-=3}for(;n.have<19;)n.lens[Et[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ct={bits:n.lenbits},xt=a(l,n.lens,0,19,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits,xt){t.msg="invalid code lengths set",n.mode=J;break}n.have=0,n.mode=F;case F:for(;n.have<n.nlen+n.ndist;){for(;vt=(Tt=n.lencode[at&(1<<n.lenbits)-1])>>>16&255,yt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(yt<16)at>>>=gt,lt-=gt,n.lens[n.have++]=yt;else{if(16===yt){for(kt=gt+2;lt<kt;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(at>>>=gt,lt-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=J;break}St=n.lens[n.have-1],ht=3+(3&at),at>>>=2,lt-=2}else if(17===yt){for(kt=gt+3;lt<kt;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}lt-=gt,St=0,ht=3+(7&(at>>>=gt)),at>>>=3,lt-=3}else{for(kt=gt+7;lt<kt;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}lt-=gt,St=0,ht=11+(127&(at>>>=gt)),at>>>=7,lt-=7}if(n.have+ht>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=J;break}for(;ht--;)n.lens[n.have++]=St}}if(n.mode===J)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=J;break}if(n.lenbits=9,Ct={bits:n.lenbits},xt=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits,xt){t.msg="invalid literal/lengths set",n.mode=J;break}if(n.distbits=6,n.distcode=n.distdyn,Ct={bits:n.distbits},xt=a(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ct),n.distbits=Ct.bits,xt){t.msg="invalid distances set",n.mode=J;break}if(n.mode=Y,e===f)break t;case Y:n.mode=H;case H:if(ot>=6&&st>=258){t.next_out=rt,t.avail_out=st,t.next_in=nt,t.avail_in=ot,n.hold=at,n.bits=lt,s(t,ut),rt=t.next_out,et=t.output,st=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,at=n.hold,lt=n.bits,n.mode===L&&(n.back=-1);break}for(n.back=0;vt=(Tt=n.lencode[at&(1<<n.lenbits)-1])>>>16&255,yt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(vt&&0==(240&vt)){for(bt=gt,_t=vt,wt=yt;vt=(Tt=n.lencode[wt+((at&(1<<bt+_t)-1)>>bt)])>>>16&255,yt=65535&Tt,!(bt+(gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}at>>>=bt,lt-=bt,n.back+=bt}if(at>>>=gt,lt-=gt,n.back+=gt,n.length=yt,0===vt){n.mode=G;break}if(32&vt){n.back=-1,n.mode=L;break}if(64&vt){t.msg="invalid literal/length code",n.mode=J;break}n.extra=15&vt,n.mode=W;case W:if(n.extra){for(kt=n.extra;lt<kt;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.length+=at&(1<<n.extra)-1,at>>>=n.extra,lt-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=z;case z:for(;vt=(Tt=n.distcode[at&(1<<n.distbits)-1])>>>16&255,yt=65535&Tt,!((gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(0==(240&vt)){for(bt=gt,_t=vt,wt=yt;vt=(Tt=n.distcode[wt+((at&(1<<bt+_t)-1)>>bt)])>>>16&255,yt=65535&Tt,!(bt+(gt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}at>>>=bt,lt-=bt,n.back+=bt}if(at>>>=gt,lt-=gt,n.back+=gt,64&vt){t.msg="invalid distance code",n.mode=J;break}n.offset=yt,n.extra=15&vt,n.mode=U;case U:if(n.extra){for(kt=n.extra;lt<kt;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}n.offset+=at&(1<<n.extra)-1,at>>>=n.extra,lt-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=J;break}n.mode=V;case V:if(0===st)break t;if(ht=ut-st,n.offset>ht){if((ht=n.offset-ht)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=J;break}ht>n.wnext?(ht-=n.wnext,pt=n.wsize-ht):pt=n.wnext-ht,ht>n.length&&(ht=n.length),mt=n.window}else mt=et,pt=rt-n.offset,ht=n.length;ht>st&&(ht=st),st-=ht,n.length-=ht;do{et[rt++]=mt[pt++]}while(--ht);0===n.length&&(n.mode=H);break;case G:if(0===st)break t;et[rt++]=n.length,st--,n.mode=H;break;case q:if(n.wrap){for(;lt<32;){if(0===ot)break t;ot--,at|=tt[nt++]<<lt,lt+=8}if(ut-=st,t.total_out+=ut,n.total+=ut,ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,rt-ut):r(n.check,et,ut,rt-ut)),ut=st,(n.flags?at:it(at))!==n.check){t.msg="incorrect data check",n.mode=J;break}at=0,lt=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;lt<32;){if(0===ot)break t;ot--,at+=tt[nt++]<<lt,lt+=8}if(at!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=J;break}at=0,lt=0}n.mode=K;case K:xt=m;break t;case J:xt=y;break t;case Z:return b;case Q:default:return v}return t.next_out=rt,t.avail_out=st,t.next_in=nt,t.avail_in=ot,n.hold=at,n.bits=lt,(n.wsize||ut!==t.avail_out&&n.mode<J&&(n.mode<q||e!==h))&&ft(t,t.output,t.next_out,ut-t.avail_out)?(n.mode=Z,b):(ct-=t.avail_in,ut-=t.avail_out,t.total_in+=ct,t.total_out+=ut,n.total+=ut,n.wrap&&ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,t.next_out-ut):r(n.check,et,ut,t.next_out-ut)),t.data_type=n.bits+(n.last?64:0)+(n.mode===L?128:0)+(n.mode===Y||n.mode===N?256:0),(0===ct&&0===ut||e===h)&&xt===p&&(xt=_),xt)},e.inflateEnd=function(t){if(!t||!t.state)return v;var e=t.state;return e.window&&(e.window=null),t.state=null,p},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?v:(n.head=e,e.done=!1,p):v},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==D?v:n.mode===D&&r(1,e,i,0)!==n.check?y:ft(t,e,i,i)?(n.mode=Z,b):(n.havedict=1,p):v},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,_,w,S,x,C,k,T;n=t.state,i=t.next_in,k=t.input,r=i+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(f+=k[i++]<<p,p+=8,f+=k[i++]<<p,p+=8),b=m[f&v];e:for(;;){if(f>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))T[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(f&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(f+=k[i++]<<p,p+=8),w+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=k[i++]<<p,p+=8,f+=k[i++]<<p,p+=8),b=g[f&y];n:for(;;){if(f>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(f&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&b,p<(_&=15)&&(f+=k[i++]<<p,(p+=8)<_&&(f+=k[i++]<<p,p+=8)),(S+=f&(1<<_)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=_,p-=_,S>(_=o-s)){if((_=S-_)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,C=d,0===h){if(x+=c-_,_<w){w-=_;do{T[o++]=d[x++]}while(--_);x=o-S,C=T}}else if(h<_){if(x+=c+h-_,(_-=h)<w){w-=_;do{T[o++]=d[x++]}while(--_);if(x=0,h<w){w-=_=h;do{T[o++]=d[x++]}while(--_);x=o-S,C=T}}}else if(x+=h-_,_<w){w-=_;do{T[o++]=d[x++]}while(--_);x=o-S,C=T}for(;w>2;)T[o++]=C[x++],T[o++]=C[x++],T[o++]=C[x++],w-=3;w&&(T[o++]=C[x++],w>1&&(T[o++]=C[x++]))}else{x=o-S;do{T[o++]=T[x++],T[o++]=T[x++],T[o++]=T[x++],w-=3}while(w>2);w&&(T[o++]=T[x++],w>1&&(T[o++]=T[x++]))}break}}break}}while(i<r&&o<a);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},function(t,e,n){"use strict";var i=n(37),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,u,h,d){var f,p,m,g,v,y,b,_,w,S=d.bits,x=0,C=0,k=0,T=0,M=0,E=0,A=0,I=0,$=0,D=0,L=null,P=0,O=new i.Buf16(16),N=new i.Buf16(16),j=null,R=0;for(x=0;x<=15;x++)O[x]=0;for(C=0;C<l;C++)O[e[n+C]]++;for(M=S,T=15;T>=1&&0===O[T];T--);if(M>T&&(M=T),0===T)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(k=1;k<T&&0===O[k];k++);for(M<k&&(M=k),I=1,x=1;x<=15;x++)if(I<<=1,(I-=O[x])<0)return-1;if(I>0&&(0===t||1!==T))return-1;for(N[1]=0,x=1;x<15;x++)N[x+1]=N[x]+O[x];for(C=0;C<l;C++)0!==e[n+C]&&(h[N[e[n+C]]++]=C);if(0===t?(L=j=h,y=19):1===t?(L=r,P-=257,j=o,R-=257,y=256):(L=s,j=a,y=-1),D=0,C=0,x=k,v=u,E=M,A=0,m=-1,g=($=1<<M)-1,1===t&&$>852||2===t&&$>592)return 1;for(;;){b=x-A,h[C]<y?(_=0,w=h[C]):h[C]>y?(_=j[R+h[C]],w=L[P+h[C]]):(_=96,w=0),f=1<<x-A,k=p=1<<E;do{c[v+(D>>A)+(p-=f)]=b<<24|_<<16|w|0}while(0!==p);for(f=1<<x-1;D&f;)f>>=1;if(0!==f?(D&=f-1,D+=f):D=0,C++,0==--O[x]){if(x===T)break;x=e[n+h[C]]}if(x>M&&(D&g)!==m){for(0===A&&(A=M),v+=k,I=1<<(E=x-A);E+A<T&&!((I-=O[E+A])<=0);)E++,I<<=1;if($+=1<<E,1===t&&$>852||2===t&&$>592)return 1;c[m=D&g]=M<<24|E<<16|v-u|0}}return 0!==D&&(c[v+D]=x-A<<24|64<<16|0),d.bits=M,0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */var i;try{i=n(!function(){var t=new Error("Cannot find module 'utf-8-validate'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){i=n(405)}t.exports="object"==typeof i?i.Validation.isValidUTF8:i},function(t,e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
e.Validation={isValidUTF8:function(t){return!0}}},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
n(13);function i(t,n,r){if(this instanceof i==!1)throw new TypeError("Classes can't be function-called");"function"==typeof t?(r=n,n=t,t=0):void 0===t&&(t=0),this._growStrategy=(n||function(t,e){return t.used+e}).bind(null,this),this._shrinkStrategy=(r||function(e){return t}).bind(null,this),this._buffer=t?new e(t):null,this._offset=0,this._used=0,this._changeFactor=0,this.__defineGetter__("size",function(){return null==this._buffer?0:this._buffer.length}),this.__defineGetter__("used",function(){return this._used})}i.prototype.get=function(t){if(null==this._buffer||this._offset+t>this._buffer.length){var n=new e(this._growStrategy(t));this._buffer=n,this._offset=0}this._used+=t;var i=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,i},i.prototype.reset=function(t){var n=this._shrinkStrategy();n<this.size&&(this._changeFactor-=1),(t||this._changeFactor<-2)&&(this._changeFactor=0,this._buffer=n?new e(n):null),this._offset=0,this._used=0},t.exports=i}).call(this,n(4).Buffer)},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
var i=n(17),r=n(13);i.EventEmitter;function o(t){if(this instanceof o==!1)throw new TypeError("Classes can't be function-called");i.EventEmitter.call(this),this.socket=t,this.continuationFrame=!1,this.isClosed=!1}t.exports=o,r.inherits(o,i.EventEmitter),o.prototype.send=function(t,n,i){if(!this.isClosed){var r="string"==typeof t,o=r?e.byteLength(t):t.length,s=o>127?2:1,a=0==this.continuationFrame,l=!n||!(void 0!==n.fin&&!n.fin),c=new e((a?n&&n.binary?1+s:1:0)+o+(!l||n&&n.binary?0:1)),u=a?1:0;a&&(n&&n.binary?(c.write("","binary"),s>1&&c.write(String.fromCharCode(128+o/128),u++,"binary"),c.write(String.fromCharCode(127&o),u++,"binary")):c.write("\0","binary")),r?c.write(t,u,"utf8"):t.copy(c,u,0),l?(n&&n.binary||c.write("",u+o,"binary"),this.continuationFrame=!1):this.continuationFrame=!0;try{this.socket.write(c,"binary",i)}catch(t){this.error(t.toString())}}},o.prototype.close=function(t,n,i,r){if(!this.isClosed){this.isClosed=!0;try{this.continuationFrame&&this.socket.write(new e([255],"binary")),this.socket.write(new e([255,0]),"binary",r)}catch(t){this.error(t.toString())}}},o.prototype.ping=function(t,e){},o.prototype.pong=function(t,e){},o.prototype.error=function(t){return this.emit("error",t),this}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
n(13);var i=0,r=1,o=2,s=3;function a(){if(this instanceof a==!1)throw new TypeError("Classes can't be function-called");this.state=i,this.buffers=[],this.messageEnd=-1,this.spanLength=0,this.dead=!1,this.onerror=function(){},this.ontext=function(){},this.onbinary=function(){},this.onclose=function(){},this.onping=function(){},this.onpong=function(){}}t.exports=a,a.prototype.add=function(t){if(!this.dead)for(var e=this;t;)t=n();function n(){if(e.state===i){if(2==t.length&&255==t[0]&&0==t[1])return e.reset(),void e.onclose();if(128===t[0])e.messageEnd=0,e.state=o,t=t.slice(1);else{if(0!==t[0])return void e.error("payload must start with 0x00 byte",!0);t=t.slice(1),e.state=r}}if(e.state===o){for(var n=0;n<t.length&&128&t[n];)e.messageEnd=128*e.messageEnd+(127&t[n]),++n;n<t.length&&(e.messageEnd=128*e.messageEnd+(127&t[n]),e.state=s,++n),n>0&&(t=t.slice(n))}if(e.state===s){var a=e.messageEnd-e.spanLength;return t.length>=a?(e.buffers.push(t),e.spanLength+=a,e.messageEnd=a,e.parse()):(e.buffers.push(t),void(e.spanLength+=t.length))}if(e.buffers.push(t),-1!=(e.messageEnd=function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n]===e)return n;return-1}(t,255)))return e.spanLength+=e.messageEnd,e.parse();e.spanLength+=t.length}},a.prototype.cleanup=function(){this.dead=!0,this.state=i,this.buffers=[]},a.prototype.parse=function(){for(var t=new e(this.spanLength),n=0,i=0,o=this.buffers.length;i<o-1;++i){var s=this.buffers[i];s.copy(t,n),n+=s.length}var a=this.buffers[this.buffers.length-1];this.messageEnd>0&&a.copy(t,n,0,this.messageEnd),this.state!==r&&--this.messageEnd;var l=null;return this.messageEnd<a.length-1&&(l=a.slice(this.messageEnd+1)),this.reset(),this.ontext(t.toString("utf8")),l},a.prototype.error=function(t,e){if(!this.dead)return this.reset(),"string"==typeof t?this.onerror(new Error(t),e):t.constructor==Error?this.onerror(t,e):this.onerror(new Error("An error occured"),e),this},a.prototype.reset=function(t){this.dead||(this.state=i,this.buffers=[],this.messageEnd=-1,this.spanLength=0)}}).call(this,n(4).Buffer)},function(t,e,n){(function(e){
/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */
var i=n(13),r=n(17),o=n(39),s=n(42),a=n(225),l=n(187),c=n(234),u=n(36),h=(n(226),n(30));function d(t,n){if(this instanceof d==!1)return new d(t,n);if(r.EventEmitter.call(this),!(t=new a({host:"0.0.0.0",port:null,server:null,verifyClient:null,handleProtocols:null,path:null,noServer:!1,disableHixie:!1,clientTracking:!0,perMessageDeflate:!0,maxPayload:104857600}).merge(t)).isDefinedAndNonNull("port")&&!t.isDefinedAndNonNull("server")&&!t.value.noServer)throw new TypeError("`port` or a `server` must be provided");var i=this;if(t.isDefinedAndNonNull("port"))this._server=o.createServer(function(t,e){var n=o.STATUS_CODES[426];e.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),e.end(n)}),this._server.allowHalfOpen=!1,this._server.listen(t.value.port,t.value.host,n),this._closeServer=function(){i._server&&i._server.close()};else if(t.value.server&&(this._server=t.value.server,t.value.path)){if(this._server._webSocketPaths&&t.value.server._webSocketPaths[t.value.path])throw new Error("two instances of WebSocketServer cannot listen on the same http server path");"object"!=typeof this._server._webSocketPaths&&(this._server._webSocketPaths={}),this._server._webSocketPaths[t.value.path]=1}this._server&&(this._onceServerListening=function(){i.emit("listening")},this._server.once("listening",this._onceServerListening)),void 0!==this._server&&(this._onServerError=function(t){i.emit("error",t)},this._server.on("error",this._onServerError),this._onServerUpgrade=function(t,n,r){var o=new e(r.length);r.copy(o),i.handleUpgrade(t,n,o,function(e){i.emit("connection"+t.url,e),i.emit("connection",e)})},this._server.on("upgrade",this._onServerUpgrade)),this.options=t.value,this.path=t.value.path,this.clients=[]}function f(t,e,n,i){var r=function(){try{e.destroy()}catch(t){}};if(e.on("error",r),t.headers["sec-websocket-key"]){var a=parseInt(t.headers["sec-websocket-version"]);if(-1!==[8,13].indexOf(a)){var h=t.headers["sec-websocket-protocol"],d=a<13?t.headers["sec-websocket-origin"]:t.headers.origin,f=c.parse(t.headers["sec-websocket-extensions"]),p=this,g=function(o){var h=t.headers["sec-websocket-key"],d=s.createHash("sha1");d.update(h+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11");var g=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+(h=d.digest("base64"))];void 0!==o&&g.push("Sec-WebSocket-Protocol: "+o);var v={};try{v=function(t){var e={},n=this.options.perMessageDeflate,i=this.options.maxPayload;if(n&&t[u.extensionName]){var r=new u(!0!==n?n:{},!0,i);r.accept(t[u.extensionName]),e[u.extensionName]=r}return e}.call(p,f)}catch(t){return void m(e,400,"Bad Request")}if(Object.keys(v).length){var y={};Object.keys(v).forEach(function(t){y[t]=[v[t].params]}),g.push("Sec-WebSocket-Extensions: "+c.format(y))}p.emit("headers",g),e.setTimeout(0),e.setNoDelay(!0);try{e.write(g.concat("","").join("\r\n"))}catch(t){try{e.destroy()}catch(t){}return}var b=new l([t,e,n],{protocolVersion:a,protocol:o,extensions:v,maxPayload:p.options.maxPayload});p.options.clientTracking&&(p.clients.push(b),b.on("close",function(){var t=p.clients.indexOf(b);-1!=t&&p.clients.splice(t,1)})),e.removeListener("error",r),i(b)},v=function(){if("function"!=typeof p.options.handleProtocols)void 0!==h?g(h.split(/, */)[0]):g();else{var t=(h||"").split(/, */),n=!1;p.options.handleProtocols(t,function(t,i){n=!0,t?g(i):m(e,401,"Unauthorized")});n||m(e,501,"Could not process protocols")}};if("function"==typeof this.options.verifyClient){var y={origin:d,secure:void 0!==t.connection.authorized||void 0!==t.connection.encrypted,req:t};if(2==this.options.verifyClient.length)return void this.options.verifyClient(y,function(t,n,i){void 0===n&&(n=401),void 0===i&&(i=o.STATUS_CODES[n]),t?v():m(e,n,i)});if(!this.options.verifyClient(y))return void m(e,401,"Unauthorized")}v()}else m(e,400,"Bad Request")}else m(e,400,"Bad Request")}function p(t,n,i,r){var a=function(){try{n.destroy()}catch(t){}};if(n.on("error",a),this.options.disableHixie)m(n,401,"Hixie support disabled");else if(t.headers["sec-websocket-key2"]){var c=t.headers.origin,u=this,h=function(){var o;o=t.headers["x-forwarded-host"]?t.headers["x-forwarded-host"]:t.headers.host;var h=("https"===t.headers["x-forwarded-proto"]||n.encrypted?"wss":"ws")+"://"+o+t.url,d=t.headers["sec-websocket-protocol"],f=function(){var t=["HTTP/1.1 101 Switching Protocols","Upgrade: WebSocket","Connection: Upgrade","Sec-WebSocket-Location: "+h];return void 0!==d&&t.push("Sec-WebSocket-Protocol: "+d),void 0!==c&&t.push("Sec-WebSocket-Origin: "+c),new e(t.concat("","").join("\r\n"))},p=function(i,o,c){var h=t.headers["sec-websocket-key1"],f=t.headers["sec-websocket-key2"],p=s.createHash("md5");[h,f].forEach(function(t){var e=parseInt(t.replace(/[^\d]/g,"")),i=t.replace(/[^ ]/g,"").length;0!==i&&e%i==0?(e/=i,p.update(String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e))):m(n,400,"Bad Request")}),p.update(i.toString("binary")),n.setTimeout(0),n.setNoDelay(!0);try{var g=new e(p.digest("binary"),"binary"),v=new e(c.length+g.length);c.copy(v,0),g.copy(v,c.length),n.write(v,"binary",function(e){if(!e){var i=new l([t,n,o],{protocolVersion:"hixie-76",protocol:d});u.options.clientTracking&&(u.clients.push(i),i.on("close",function(){var t=u.clients.indexOf(i);-1!=t&&u.clients.splice(t,1)})),n.removeListener("error",a),r(i)}})}catch(t){try{n.destroy()}catch(t){}return}};if(i&&i.length>=8){var g=i.slice(0,8),v=i.length>8?i.slice(8):null;p.call(u,g,v,f())}else{g=new e(8);i.copy(g,0);var y=i.length,b=(v=null,function(t){var i=Math.min(t.length,8-y);0!==i&&(t.copy(g,y,0,i),8==(y+=i)&&(n.removeListener("data",b),i<t.length&&(v=t.slice(i)),p.call(u,g,v,new e(0))))});n.on("data",b),function(){n.setTimeout(0),n.setNoDelay(!0);var t=f();try{n.write(t,"binary",function(t){t&&n.removeListener("data",b)})}catch(t){try{n.destroy()}catch(t){}return}}()}};if("function"==typeof this.options.verifyClient){var d={origin:c,secure:void 0!==t.connection.authorized||void 0!==t.connection.encrypted,req:t};if(2==this.options.verifyClient.length){u=this;return void this.options.verifyClient(d,function(t,e,i){void 0===e&&(e=401),void 0===i&&(i=o.STATUS_CODES[e]),t?h.apply(u):m(n,e,i)})}if(!this.options.verifyClient(d))return void m(n,401,"Unauthorized")}h()}else m(n,400,"Bad Request")}function m(t,e,n){try{var i=["HTTP/1.1 "+e+" "+n,"Content-type: text/html"];t.write(i.concat("","").join("\r\n"))}catch(t){}finally{try{t.destroy()}catch(t){}}}i.inherits(d,r.EventEmitter),d.prototype.close=function(t){var e=null;try{for(var n=0,i=this.clients.length;n<i;++n)this.clients[n].terminate()}catch(t){e=t}this.path&&this._server._webSocketPaths&&(delete this._server._webSocketPaths[this.path],0==Object.keys(this._server._webSocketPaths).length&&delete this._server._webSocketPaths);try{void 0!==this._closeServer&&this._closeServer()}finally{this._server&&(this._server.removeListener("listening",this._onceServerListening),this._server.removeListener("error",this._onServerError),this._server.removeListener("upgrade",this._onServerUpgrade)),delete this._server}if(t)t(e);else if(e)throw e},d.prototype.handleUpgrade=function(t,e,n,i){if(this.options.path){var r=h.parse(t.url);if(r&&r.pathname!==this.options.path)return}void 0!==t.headers.upgrade&&"websocket"===t.headers.upgrade.toLowerCase()?t.headers["sec-websocket-key1"]?p.apply(this,arguments):f.apply(this,arguments):m(e,400,"Bad Request")},t.exports=d}).call(this,n(4).Buffer)},function(t,e,n){n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422)},function(t,e,n){(function(t){!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||t(i).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.4.1",n.TRANSITION_DURATION=150,n.prototype.close=function(e){var i=t(this),r=i.attr("data-target");r||(r=(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),r="#"===r?[]:r;var o=t(document).find(r);function s(){o.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};function n(n){return this.each(function(){var i=t(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new e(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})}e.VERSION="3.4.1",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();e+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(t.proxy(function(){i[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=n,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var i=t(e.target).closest(".btn");n.call(i,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function n(n){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new e(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})}e.VERSION="3.4.1",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},e.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(n,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(n,r),s=this.interval,a="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),"object"==typeof o&&o.length&&o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([n,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=n,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var r=function(e){var i=t(this),r=i.attr("href");r&&(r=r.replace(/.*(?=#[^\s]+$)/,""));var o=i.attr("data-target")||r,s=t(document).find(o);if(s.hasClass("carousel")){var a=t.extend({},s.data(),i.data()),l=i.attr("data-slide-to");l&&(a.interval=!1),n.call(s,a),l&&s.data("bs.carousel").to(l),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);n.call(e,e.data())})})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(document).find(i)}function i(n){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),r||i.data("bs.collapse",r=new e(this,o)),"string"==typeof n&&r[n]()})}e.VERSION="3.4.1",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(n=r.data("bs.collapse"))&&n.transitioning)){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),n||r.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[s](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=t.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return r.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,i){var r=t(i);this.addAriaAndCollapsedClass(n(r),r)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var r=t(this);r.attr("data-target")||e.preventDefault();var o=n(r),s=o.data("bs.collapse")?"toggle":r.data();i.call(o,s)})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=".dropdown-backdrop",n='[data-toggle="dropdown"]',i=function(e){t(e).on("click.bs.dropdown",this.toggle)};function r(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i="#"!==n?t(document).find(n):null;return i&&i.length?i:e.parent()}function o(i){i&&3===i.which||(t(e).remove(),t(n).each(function(){var e=t(this),n=r(e),o={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(e.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}i.VERSION="3.4.1",i.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var i=r(n),s=i.hasClass("open");if(o(),!s){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",o);var a={relatedTarget:this};if(i.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},i.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=r(i),s=o.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&o.find(n).trigger("focus"),i.trigger("click");var a=o.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new i(this)),"string"==typeof e&&r[e].call(n)})},t.fn.dropdown.Constructor=i,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new e(this,s)),"string"==typeof n?o[n](i):s.show&&o.show(i)})}e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(n){var i=this,r=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:n});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},e.prototype.hide=function(n){n&&n.preventDefault(),n=t.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(n){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else n&&n()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var n=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+n),t(this.fixedContent).each(function(e,i){var r=i.style.paddingRight,o=t(i).css("padding-right");t(i).data("padding-right",r).css("padding-right",parseFloat(o)+n+"px")}))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each(function(e,n){var i=t(n).data("padding-right");t(n).removeData("padding-right"),n.style.paddingRight=i||""})},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=n,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),r=i.attr("href"),o=i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,""),s=t(document).find(o),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},s.data(),i.data());i.is("a")&&e.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),n.call(s,a,this)})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],i={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,o=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function s(e,i){var s=e.nodeName.toLowerCase();if(-1!==t.inArray(s,i))return-1===t.inArray(s,n)||Boolean(e.nodeValue.match(r)||e.nodeValue.match(o));for(var a=t(i).filter(function(t,e){return e instanceof RegExp}),l=0,c=a.length;l<c;l++)if(s.match(a[l]))return!0;return!1}function a(e,n,i){if(0===e.length)return e;if(i&&"function"==typeof i)return i(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var r=document.implementation.createHTMLDocument("sanitization");r.body.innerHTML=e;for(var o=t.map(n,function(t,e){return e}),a=t(r.body).find("*"),l=0,c=a.length;l<c;l++){var u=a[l],h=u.nodeName.toLowerCase();if(-1!==t.inArray(h,o))for(var d=t.map(u.attributes,function(t){return t}),f=[].concat(n["*"]||[],n[h]||[]),p=0,m=d.length;p<m;p++)s(d[p],f)||u.removeAttribute(d[p].nodeName);else u.parentNode.removeChild(u)}return r.body.innerHTML}var l=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:i},l.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(n){var i=this.$element.data();for(var r in i)i.hasOwnProperty(r)&&-1!==t.inArray(r,e)&&delete i[r];return(n=t.extend({},this.getDefaults(),i,n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n.sanitize&&(n.template=a(n.template,n.whiteList,n.sanitizeFn)),n},l.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},l.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},l.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},l.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var i=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,c=a.test(s);c&&(s=s.replace(a,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(t(document).find(this.options.container)):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),h=r[0].offsetWidth,d=r[0].offsetHeight;if(c){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+d>p.bottom?"top":"top"==s&&u.top-d<p.top?"bottom":"right"==s&&u.right+h>p.width?"left":"left"==s&&u.left-h<p.left?"right":s,r.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,u,h,d);this.applyPlacement(m,s);var g=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(l.TRANSITION_DURATION):g()}},l.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(e.top=e.top+o-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var h=/top|bottom/.test(n),d=h?2*u.left-r+l:2*u.top-o+c,f=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],h)},l.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},l.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=a(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},l.prototype.hide=function(e){var n=this,i=t(this.$tip),r=t.Event("hide.bs."+this.type);function o(){"in"!=n.hoverState&&i.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}if(this.$element.trigger(r),!r.isDefaultPrevented())return i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(l.TRANSITION_DURATION):o(),this.hoverState=null,this},l.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=i?{top:0,left:0}:o?null:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,a,l,s)},l.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},l.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+i;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var c=e.left-o,u=e.left+o+n;c<s.left?r.left=s.left-c:u>s.right&&(r.left=s.left+s.width-u)}return r},l.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},l.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},l.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},l.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})},l.prototype.sanitizeHtml=function(t){return a(t,this.options.whiteList,this.options.sanitizeFn)};var c=t.fn.tooltip;t.fn.tooltip=function(e){return this.each(function(){var n=t(this),i=n.data("bs.tooltip"),r="object"==typeof e&&e;!i&&/destroy|hide/.test(e)||(i||n.data("bs.tooltip",i=new l(this,r)),"string"==typeof e&&i[e]())})},t.fn.tooltip.Constructor=l,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=c,this}}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.4.1",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();if(this.options.html){var i=typeof n;this.options.sanitize&&(e=this.sanitizeHtml(e),"string"===i&&(n=this.sanitizeHtml(n))),t.find(".popover-title").html(e),t.find(".popover-content").children().detach().end()["string"===i?"html":"append"](n)}else t.find(".popover-title").text(e),t.find(".popover-content").children().detach().end().text(n);t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof n&&n;!r&&/destroy|hide/.test(n)||(r||i.data("bs.popover",r=new e(this,o)),"string"==typeof n&&r[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(n).is(document.body)?t(window):t(n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})}e.VERSION="3.4.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(e){this.element=t(e)};function n(n){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new e(this)),"string"==typeof n&&r[n]()})}e.VERSION="3.4.1",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(document).find(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},e.prototype.activate=function(n,i,r){var o=i.find("> .active"),s=r&&t.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}o.length&&s?o.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=n,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(e){e.preventDefault(),n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(t)}).call(this,n(1))},function(t,e,n){(function(t){!function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i);var r=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=r.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var i=t(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new e(this,o)),"string"==typeof n&&r[n]()})}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+s<=t-i)&&"bottom";var a=null==this.affixed,l=a?r:o.top;return null!=n&&r<=n?"top":null!=i&&l+(a?s:e)>=t-i&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var a=this.getState(s,n,r,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-n-o})}};var i=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),n.call(e,i)})})}(t)}).call(this,n(1))},function(t,e){t.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(t);if(s){var a=o(s);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var r=n[i].example,o=0;o<r.length;o++)t[t.length]=r[o];for(var s in e)t[t.length]=s;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(i=0;i<t.length;i++)try{var l=document.createElement("li"),c=new RGBColor(t[i]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),u.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[i]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(u),l.appendChild(h),a.appendChild(l)}catch(t){}return a}}},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e),n.d(e,"BlurStack",function(){return d}),n.d(e,"image",function(){return s}),n.d(e,"canvasRGBA",function(){return l}),n.d(e,"canvasRGB",function(){return u}),n.d(e,"imageDataRGBA",function(){return c}),n.d(e,"imageDataRGB",function(){return h});var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(t,e,n,i){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var r=t.naturalWidth,o=t.naturalHeight;if("string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){e.style.width=r+"px",e.style.height=o+"px",e.width=r,e.height=o;var s=e.getContext("2d");s.clearRect(0,0,r,o),s.drawImage(t,0,0),isNaN(n)||n<1||(i?l(e,0,0,r,o,n):u(e,0,0,r,o,n))}}}function a(t,e,n,r,o){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===i(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=t.getContext("2d");try{return s.getImageData(e,n,r,o)}catch(t){throw new Error("unable to access image data: "+t)}}function l(t,e,n,i,r,o){if(!(isNaN(o)||o<1)){o|=0;var s=a(t,e,n,i,r);s=c(s,e,n,i,r,o),t.getContext("2d").putImageData(s,e,n)}}function c(t,e,n,i,s,a){var l,c,u,h,f,p,m,g,v,y,b,_,w,S,x,C,k,T,M,E,A,I,$,D,L,P=t.data,O=2*a+1,N=i-1,j=s-1,R=a+1,B=R*(R+1)/2,F=new d,Y=F;for(u=1;u<O;u++)Y=Y.next=new d,u===R&&(L=Y);Y.next=F;var H=null,W=null;m=p=0;var z=r[a],U=o[a];for(c=0;c<s;c++){for(C=k=T=M=g=v=y=b=0,_=R*(E=P[p]),w=R*(A=P[p+1]),S=R*(I=P[p+2]),x=R*($=P[p+3]),g+=B*E,v+=B*A,y+=B*I,b+=B*$,Y=F,u=0;u<R;u++)Y.r=E,Y.g=A,Y.b=I,Y.a=$,Y=Y.next;for(u=1;u<R;u++)h=p+((N<u?N:u)<<2),g+=(Y.r=E=P[h])*(D=R-u),v+=(Y.g=A=P[h+1])*D,y+=(Y.b=I=P[h+2])*D,b+=(Y.a=$=P[h+3])*D,C+=E,k+=A,T+=I,M+=$,Y=Y.next;for(H=F,W=L,l=0;l<i;l++)P[p+3]=$=b*z>>U,0!==$?($=255/$,P[p]=(g*z>>U)*$,P[p+1]=(v*z>>U)*$,P[p+2]=(y*z>>U)*$):P[p]=P[p+1]=P[p+2]=0,g-=_,v-=w,y-=S,b-=x,_-=H.r,w-=H.g,S-=H.b,x-=H.a,h=m+((h=l+a+1)<N?h:N)<<2,g+=C+=H.r=P[h],v+=k+=H.g=P[h+1],y+=T+=H.b=P[h+2],b+=M+=H.a=P[h+3],H=H.next,_+=E=W.r,w+=A=W.g,S+=I=W.b,x+=$=W.a,C-=E,k-=A,T-=I,M-=$,W=W.next,p+=4;m+=i}for(l=0;l<i;l++){for(k=T=M=C=v=y=b=g=0,_=R*(E=P[p=l<<2]),w=R*(A=P[p+1]),S=R*(I=P[p+2]),x=R*($=P[p+3]),g+=B*E,v+=B*A,y+=B*I,b+=B*$,Y=F,u=0;u<R;u++)Y.r=E,Y.g=A,Y.b=I,Y.a=$,Y=Y.next;for(f=i,u=1;u<=a;u++)p=f+l<<2,g+=(Y.r=E=P[p])*(D=R-u),v+=(Y.g=A=P[p+1])*D,y+=(Y.b=I=P[p+2])*D,b+=(Y.a=$=P[p+3])*D,C+=E,k+=A,T+=I,M+=$,Y=Y.next,u<j&&(f+=i);for(p=l,H=F,W=L,c=0;c<s;c++)P[(h=p<<2)+3]=$=b*z>>U,$>0?($=255/$,P[h]=(g*z>>U)*$,P[h+1]=(v*z>>U)*$,P[h+2]=(y*z>>U)*$):P[h]=P[h+1]=P[h+2]=0,g-=_,v-=w,y-=S,b-=x,_-=H.r,w-=H.g,S-=H.b,x-=H.a,h=l+((h=c+R)<j?h:j)*i<<2,g+=C+=H.r=P[h],v+=k+=H.g=P[h+1],y+=T+=H.b=P[h+2],b+=M+=H.a=P[h+3],H=H.next,_+=E=W.r,w+=A=W.g,S+=I=W.b,x+=$=W.a,C-=E,k-=A,T-=I,M-=$,W=W.next,p+=i}return t}function u(t,e,n,i,r,o){if(!(isNaN(o)||o<1)){o|=0;var s=a(t,e,n,i,r);s=h(s,e,n,i,r,o),t.getContext("2d").putImageData(s,e,n)}}function h(t,e,n,i,s,a){var l,c,u,h,f,p,m,g,v,y,b,_,w,S,x,C,k,T,M,E,A,I=t.data,$=2*a+1,D=i-1,L=s-1,P=a+1,O=P*(P+1)/2,N=new d,j=N;for(u=1;u<$;u++)j=j.next=new d,u===P&&(A=j);j.next=N;var R=null,B=null;m=p=0;var F=r[a],Y=o[a];for(c=0;c<s;c++){for(S=x=C=g=v=y=0,b=P*(k=I[p]),_=P*(T=I[p+1]),w=P*(M=I[p+2]),g+=O*k,v+=O*T,y+=O*M,j=N,u=0;u<P;u++)j.r=k,j.g=T,j.b=M,j=j.next;for(u=1;u<P;u++)h=p+((D<u?D:u)<<2),g+=(j.r=k=I[h])*(E=P-u),v+=(j.g=T=I[h+1])*E,y+=(j.b=M=I[h+2])*E,S+=k,x+=T,C+=M,j=j.next;for(R=N,B=A,l=0;l<i;l++)I[p]=g*F>>Y,I[p+1]=v*F>>Y,I[p+2]=y*F>>Y,g-=b,v-=_,y-=w,b-=R.r,_-=R.g,w-=R.b,h=m+((h=l+a+1)<D?h:D)<<2,g+=S+=R.r=I[h],v+=x+=R.g=I[h+1],y+=C+=R.b=I[h+2],R=R.next,b+=k=B.r,_+=T=B.g,w+=M=B.b,S-=k,x-=T,C-=M,B=B.next,p+=4;m+=i}for(l=0;l<i;l++){for(x=C=S=v=y=g=0,b=P*(k=I[p=l<<2]),_=P*(T=I[p+1]),w=P*(M=I[p+2]),g+=O*k,v+=O*T,y+=O*M,j=N,u=0;u<P;u++)j.r=k,j.g=T,j.b=M,j=j.next;for(f=i,u=1;u<=a;u++)p=f+l<<2,g+=(j.r=k=I[p])*(E=P-u),v+=(j.g=T=I[p+1])*E,y+=(j.b=M=I[p+2])*E,S+=k,x+=T,C+=M,j=j.next,u<L&&(f+=i);for(p=l,R=N,B=A,c=0;c<s;c++)I[h=p<<2]=g*F>>Y,I[h+1]=v*F>>Y,I[h+2]=y*F>>Y,g-=b,v-=_,y-=w,b-=R.r,_-=R.g,w-=R.b,h=l+((h=c+P)<L?h:L)*i<<2,g+=S+=R.r=I[h],v+=x+=R.g=I[h+1],y+=C+=R.b=I[h+2],R=R.next,b+=k=B.r,_+=T=B.g,w+=M=B.b,S-=k,x-=T,C-=M,B=B.next,p+=i}return t}var d=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},function(t,e){(function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var n=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",function(t){n.start(t)}),this.el.on("touchstart.drag",function(t){n.start(t)})},t.prototype.transformPoint=function(t,e){var n=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=n.pageX-(e||0),this.p.y=n.pageY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;this.el.fire("beforedrag",{event:t,handler:this}),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,i=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(t,n),box:i},SVG.on(window,"mousemove.drag",function(t){e.drag(t)}),SVG.on(window,"touchmove.drag",function(t){e.drag(t)}),SVG.on(window,"mouseup.drag",function(t){e.end(t)}),SVG.on(window,"touchend.drag",function(t){e.end(t)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this}),t.preventDefault(),t.stopPropagation()}},t.prototype.drag=function(t){var e=this.getBBox(),n=this.transformPoint(t),i=this.startPoints.box.x+n.x-this.startPoints.point.x,r=this.startPoints.box.y+n.y-this.startPoints.point.y,o=this.constraint,s=new CustomEvent("dragmove",{detail:{event:t,p:n,m:this.m,handler:this},cancelable:!0});if(this.el.fire(s),s.defaultPrevented)return n;if("function"==typeof o){var a=o.call(this.el,i,r,this.m);"boolean"==typeof a&&(a={x:a,y:a}),!0===a.x?this.el.x(i):!1!==a.x&&this.el.x(a.x),!0===a.y?this.el.y(r):!1!==a.y&&this.el.y(a.y)}else"object"==typeof o&&(null!=o.minX&&i<o.minX?i=o.minX:null!=o.maxX&&i>o.maxX-e.width&&(i=o.maxX-e.width),null!=o.minY&&r<o.minY?r=o.minY:null!=o.maxY&&r>o.maxY-e.height&&(r=o.maxY-e.height),this.el.move(i,r));return n},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,n){"function"!=typeof e&&"object"!=typeof e||(n=e,e=!0);var i=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?i.init(n||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(this)},function(t,e){},function(t,e){},function(t,e){},function(module,exports,__webpack_require__){(function(global,Buffer,process){var __WEBPACK_AMD_DEFINE_RESULT__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(){var t="undefined"==typeof window?global:window;if("function"!=typeof t.require2){var e={},n={},i={}.hasOwnProperty,r={},o=function(){var t=/^\.\.?(\/|$)/;return function(e,n){for(var i,r,o=[],s=0,a=(i=(t.test(n)?e+"/"+n:n).split("/")).length;s<a;s++)".."===(r=i[s])?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")}}(),s=function(e){return function(n){return n=o(e.split("/").slice(0,-1).join("/"),n),t.require2(n,e)}},a=function(t,e){var i={id:t,exports:{}};return n[t]=i,e(i.exports,s(t),i),i.exports},l=function(t,s){var l=o(t,".");null==s&&(s="/");var c=0;if((l=s)&&(l.indexOf(!1)&&(c=11),0<l.indexOf("/",c)&&(l=l.substring(c,l.indexOf("/",c)))),l=(l=r[t+"/index.js"]||r[l+"/deps/"+t+"/index.js"])?"components/"+l.substring(0,l.length-3):t,i.call(n,l))return n[l].exports;if(i.call(e,l))return a(l,e[l]);if(l=o(l,"./index"),i.call(n,l))return n[l].exports;if(i.call(e,l))return a(l,e[l]);throw Error('Cannot find module "'+t+'" from "'+s+'"')};l.alias=function(t,e){r[e]=t},l.register=l.define=function(t,n){if("object"==typeof t)for(var r in t)i.call(t,r)&&(e[r]=t[r]);else e[t]=n},l.list=function(){var t,n=[];for(t in e)i.call(e,t)&&n.push(t);return n},l.brunch=!0,t.require2=l}}(),function(t){function e(){this._events={},this._conf&&n.call(this,this._conf)}function n(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,n.call(this,t)}function r(t,e,n,i){if(!n)return[];var o,s,a,l,c=[];a=e.length,l=e[i];var u=e[i+1];if(i===a&&n._listeners){if("function"==typeof n._listeners)t&&t.push(n._listeners);else for(e=0,i=n._listeners.length;e<i;e++)t&&t.push(n._listeners[e]);return[n]}if("*"===l||"**"===l||n[l]){if("*"===l){for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&(c=c.concat(r(t,e,n[o],i+1)));return c}if("**"===l){for(o in(l=i+1===a||i+2===a&&"*"===u)&&n._listeners&&(c=c.concat(r(t,e,n,a))),n)"_listeners"!==o&&n.hasOwnProperty(o)&&("*"===o||"**"===o?(n[o]._listeners&&!l&&(c=c.concat(r(t,e,n[o],a))),c=c.concat(r(t,e,n[o],i))):c=o===u?c.concat(r(t,e,n[o],i+2)):c.concat(r(t,e,n[o],i)));return c}c=c.concat(r(t,e,n[l],i+1))}if((s=n["*"])&&r(t,e,s,i+1),n=n["**"])if(i<a)for(o in n._listeners&&r(t,e,n,a),n)"_listeners"!==o&&n.hasOwnProperty(o)&&(o===u?r(t,e,n[o],i+2):o===l?r(t,e,n[o],i+1):((a={})[o]=n[o],r(t,e,{"**":a},i+1)));else n._listeners?r(t,e,n,a):n["*"]&&n["*"]._listeners&&r(t,e,n["*"],a);return c}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};i.prototype.delimiter=".",i.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function i(){0==--e&&r.off(t,i),n.apply(this,arguments)}var r=this;if("function"!=typeof n)throw Error("many only accepts instances of Function");return i._origin=n,this.on(t,i),r},i.prototype.emit=function(){this._events||e.call(this);var t,n=arguments[0];if("newListener"===n&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,o=Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];for(s=0,i=this._all.length;s<i;s++)this.event=n,this._all[s].apply(this,o)}if("error"===n&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.")}if(this.wildcard?(t=[],i="string"==typeof n?n.split(this.delimiter):n.slice(),r.call(this,t,i,this.listenerTree,0)):t=this._events[n],"function"==typeof t){if(this.event=n,1===arguments.length)t.call(this);else if(1<arguments.length)switch(arguments.length){case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];t.apply(this,o)}return!0}if(t){for(i=arguments.length,o=Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];for(s=0,i=(t=t.slice()).length;s<i;s++)this.event=n,t[s].apply(this,o);return 0<t.length||!!this._all}return!!this._all},i.prototype.on=function(t,n){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof n)throw Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,n),this.wildcard){t:{for(var i,r=0,s=(i="string"==typeof(i=t)?i.split(this.delimiter):i.slice()).length;r+1<s;r++)if("**"===i[r]&&"**"===i[r+1])break t;for(r=this.listenerTree,s=i.shift();s;){if(r[s]||(r[s]={}),r=r[s],0===i.length){r._listeners?"function"==typeof r._listeners?r._listeners=[r._listeners,n]:o(r._listeners)&&(r._listeners.push(n),r._listeners.warned||(i=10,void 0!==this._events.maxListeners&&(i=this._events.maxListeners),0<i&&r._listeners.length>i&&(r._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",r._listeners.length),console.trace()))):r._listeners=n;break t}s=i.shift()}}return this}return this._events[t]?"function"==typeof this._events[t]?this._events[t]=[this._events[t],n]:o(this._events[t])&&(this._events[t].push(n),this._events[t].warned||(i=10,void 0!==this._events.maxListeners&&(i=this._events.maxListeners),0<i&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace()))):this._events[t]=n,this},i.prototype.onAny=function(t){if("function"!=typeof t)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard)n="string"==typeof t?t.split(this.delimiter):t.slice(),i=r.call(this,null,n,this.listenerTree,0);else{if(!this._events[t])return this;n=this._events[t],i.push({_listeners:n})}for(var s=0;s<i.length;s++){var a=i[s];if(n=a._listeners,o(n)){for(var l=-1,c=0,u=n.length;c<u;c++)if(n[c]===e||n[c].listener&&n[c].listener===e||n[c]._origin&&n[c]._origin===e){l=c;break}if(!(0>l)){this.wildcard?a._listeners.splice(l,1):this._events[t].splice(l,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[t]);break}}else(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,i=0;if(t&&this._all&&0<this._all.length){for(n=0,i=(e=this._all).length;n<i;n++)if(t===e[n]){e.splice(n,1);break}}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var n="string"==typeof t?t.split(this.delimiter):t.slice(),i=(n=r.call(this,null,n,this.listenerTree,0),0);i<n.length;i++)n[i]._listeners=null;else{if(!this._events[t])return this;this._events[t]=null}return this},i.prototype.listeners=function(t){if(this.wildcard){var n=[];return t="string"==typeof t?t.split(this.delimiter):t.slice(),r.call(this,n,t,this.listenerTree,0),n}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),o(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.prototype.listenersAny=function(){return this._all?this._all:[]},exports.EventEmitter2=i}();var fabric=fabric||{version:"1.5.0"},e,b,d,a;exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require2("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.window=fabric.document.createWindow?fabric.document.createWindow():fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode=void 0!==Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES="display transform fill fill-opacity fill-rule opacity stroke stroke-dasharray stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width".split(" "),fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(e,n){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}}function i(t,e){if(this.__eventListeners){var n=this.__eventListeners[t];if(n){for(var i=0,r=n.length;i<r;i++)n[i].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:n,fire:i,on:e,off:n,trigger:i}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,n){var i=this.getObjects();return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),n=0,i=arguments.length;n<i;n++)-1!==(t=e.indexOf(arguments[n]))&&(e.splice(t,1),this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=n.length;i--;)t.call(e,n[i],i,n);return this},getObjects:function(t){return void 0===t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return-1<this.getObjects().indexOf(t)},complexity:function(){return this.getObjects().reduce(function(t,e){return t+(e.complexity?e.complexity():0)},0)}},e=exports,b=Math.sqrt,d=Math.atan2,a=Math.PI/180,fabric.util={removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,n){var i=Math.sin(n);return n=Math.cos(n),t.subtractEquals(e),new fabric.Point(t.x*n-t.y*i,t.x*i+t.y*n).addEquals(e)},transformPoint:function(t,e,n){return n?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},invertTransform:function(t){var e=t.slice();return e=[(e=1/(t[0]*t[3]-t[1]*t[2]))*t[3],-e*t[1],-e*t[2],e*t[0],0,0],t=fabric.util.transformPoint({x:t[4],y:t[5]},e),e[4]=-t.x,e[5]=-t.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*fabric.DPI/25.4;case"cm":return i*fabric.DPI/2.54;case"in":return i*fabric.DPI;case"pt":return i*fabric.DPI/72;case"pc":return i*fabric.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(t){if(!t)return fabric;for(var n=(t=t.split(".")).length,i=e||fabric.window,r=0;r<n;++r)i=i[t[r]];return i},loadImage:function(t,e,n,i){if(t){var r=fabric.util.createImage();r.onload=function(){e&&e.call(n,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&void 0!==i&&(r.crossOrigin=i),r.src=t}else e&&e.call(n,t)},enlivenObjects:function(t,e,n,i){function r(){++s===a&&e&&e(o)}var o=[],s=0,a=(t=t||[]).length;a?t.forEach(function(t,e){if(t&&t.type){var s=fabric.util.getKlass(t.type,n);s.async?s.fromObject(t,function(n,s){s||(o[e]=n,i&&i(t,o[e])),r()}):(o[e]=s.fromObject(t),i&&i(t,o[e]),r())}else r()}):e&&e(o)},groupSVGElements:function(t,e,n){return t=new fabric.PathGroup(t,e),void 0!==n&&t.setSourcePath(n),t},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,e,n,i,r,o){r=b((i-=e)*i+(s=r-n)*s),i=d(s,i);var s=o.length,a=0,l=!0;for(t.save(),t.translate(e,n),t.moveTo(0,0),t.rotate(i),e=0;r>e;)(e+=o[a++%s])>r&&(e=r),t[l?"lineTo":"moveTo"](e,0),l=!l;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require2("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=(t=t.prototype).stateProperties.length;e--;){var n,i=t.stateProperties[e],r="set"+(n=i.charAt(0).toUpperCase()+i.slice(1));t[n="get"+n]||(t[n]=new Function('return this.get("'+i+'")')),t[r]||(t[r]=new Function("value",'return this.set("'+i+'", value)'))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,n,i){0<i&&(e=e>i?e-i:0,n=n>i?n-i:0);var r=!0;for(t=t.getImageData(e,n,2*i||1,2*i||1),e=3,n=t.data.length;e<n&&!1!=(r=0>=t.data[e]);e+=4);return r}},function(){function t(t,i,o,s,l,c,u){var h=a.call(arguments);if(r[h])return r[h];var d=Math.PI,f=u*d/180,p=Math.sin(f),m=0,g=0,v=-(f=Math.cos(f))*t*.5-p*i*.5,y=-f*i*.5+p*t*.5,b=(o=Math.abs(o))*o,_=(s=Math.abs(s))*s,w=y*y,S=v*v,x=b*_-b*w-_*S,C=0;for(0>x?(o*=b=Math.sqrt(1-x/(b*_)),s*=b):C=(l===c?-1:1)*Math.sqrt(x/(b*w+_*S)),C=f*(w=C*o*y/s)-p*(S=-C*s*v/o)+.5*t,b=p*w+f*S+.5*i,_=n(1,0,(v-w)/o,(y-S)/s),y=n((v-w)/o,(y-S)/s,(-v-w)/o,(-y-S)/s),0===c&&0<y?y-=2*d:1===c&&0>y&&(y+=2*d),v=[],y/=d=Math.ceil(Math.abs(y/d*2)),w=8/3*Math.sin(y/4)*Math.sin(y/4)/Math.sin(y/2),S=_+y,x=0;x<d;x++)v[x]=e(_,S,f,p,o,s,C,b,w,m,g),m=v[x][4],g=v[x][5],_=S,S+=y;return r[h]=v}function e(t,e,n,i,r,s,l,c,u,h,d){var f=a.call(arguments);if(o[f])return o[f];var p=Math.cos(t),m=Math.sin(t),g=Math.cos(e),v=Math.sin(e),y=n*r*g-i*s*v+l,b=i*r*g+n*s*v+c;return o[f]=[h+u*(-n*r*m-i*s*p),d+u*(-i*r*m+n*s*p),y+u*(n*r*v+i*s*g),b+u*(i*r*v-n*s*g),y,b],o[f]}function n(t,e,n,i){return t=Math.atan2(e,t),(n=Math.atan2(i,n))>=t?n-t:2*Math.PI-(t-n)}function i(t,e,n,i,r,o,l,c){var u=a.call(arguments);if(s[u])return s[u];var h,d,f,p,m,g=Math.sqrt,v=Math.min,y=Math.max,b=Math.abs,_=[],w=[[],[]];d=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*l,f=3*n-3*t;for(var S=0;2>S;++S)0<S&&(d=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*c,f=3*i-3*e),1e-12>b(h)?1e-12>b(d)||0<(p=-f/d)&&1>p&&_.push(p):0>(p=d*d-4*f*h)||(0<(p=(-d+(m=g(p)))/(2*h))&&1>p&&_.push(p),0<(p=(-d-m)/(2*h))&&1>p&&_.push(p));for(b=g=_.length;g--;)h=(d=1-(p=_[g]))*d*d*t+3*d*d*p*n+3*d*p*p*r+p*p*p*l,w[0][g]=h,h=d*d*d*e+3*d*d*p*i+3*d*p*p*o+p*p*p*c,w[1][g]=h;return w[0][b]=t,w[1][b]=e,w[0][b+1]=l,w[1][b+1]=c,v=[{x:v.apply(null,w[0]),y:v.apply(null,w[1])},{x:y.apply(null,w[0]),y:y.apply(null,w[1])}],s[u]=v}var r={},o={},s={},a=Array.prototype.join;fabric.util.drawArc=function(e,n,i,r){for(var o=[[],[],[],[]],s=0,a=(r=t(r[5]-n,r[6]-i,r[0],r[1],r[3],r[4],r[2])).length;s<a;s++)o[s][0]=r[s][0]+n,o[s][1]=r[s][1]+i,o[s][2]=r[s][2]+n,o[s][3]=r[s][3]+i,o[s][4]=r[s][4]+n,o[s][5]=r[s][5]+i,e.bezierCurveTo.apply(e,o[s])},fabric.util.getBoundsOfArc=function(e,n,r,o,s,a,l,c,u){var h=0,d=0,f=[],p=[];for(r=t(c-e,u-n,r,o,a,l,s),o=[[],[]],s=0,a=r.length;s<a;s++)f=i(h,d,r[s][0],r[s][1],r[s][2],r[s][3],r[s][4],r[s][5]),o[0].x=f[0].x+e,o[0].y=f[0].y+n,o[1].x=f[1].x+e,o[1].y=f[1].y+n,p.push(o[0]),p.push(o[1]),h=r[s][4],d=r[s][5];return p},fabric.util.getBoundsOfCurve=i}(),function(){function t(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}var e=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(0<arguments.length&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==Number.POSITIVE_INFINITY&&i!==Number.NEGATIVE_INFINITY&&(i=(0<i||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(i=0<=i?i:Math.max(n-Math.abs(i),0);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var n=[],i=0,r=this.length>>>0;i<r;i++)i in this&&(n[i]=t.call(e,this[i],i,this));return n}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var n=0,i=this.length>>>0;n<i;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length>>>0;r<o;r++)r in this&&(n=this[r],t.call(e,n,r,this)&&i.push(n));return i}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n=this.length>>>0,i=0;if(1<arguments.length)e=arguments[1];else for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t.call(null,e,this[i],i,this));return e}),fabric.util.array={invoke:function(t,n){for(var i=e.call(arguments,2),r=[],o=0,s=t.length;o<s;o++)r[o]=i.length?t[o][n].apply(t[o],i):t[o][n].call(t[o]);return r},min:function(e,n){return t(e,n,function(t,e){return t<e})},max:function(e,n){return t(e,n,function(t,e){return t>=e})}}}(),function(){function t(t,e){for(var n in e)t[n]=e[n];return t}fabric.util.object={extend:t,clone:function(e){return t({},e)}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(){var t=Array.prototype.slice,e=Function.prototype.apply,n=function(){};Function.prototype.bind||(Function.prototype.bind=function(i){var r,o=this,s=t.call(arguments,1);return r=s.length?function(){return e.call(o,this instanceof n?this:i,s.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof n?this:i,arguments)},n.prototype=this.prototype,r.prototype=new n,r})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return 1<arguments.length?e.apply(this,n.call(arguments,1)):e.call(this)}var n=Array.prototype.slice,i=function(){},r=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),o=function(t,e,n){for(var i in e)i in t.prototype&&"function"==typeof t.prototype[i]&&-1<(e[i]+"").indexOf("callSuper")?t.prototype[i]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return r}}(i):t.prototype[i]=e[i],r&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=function(){function r(){this.initialize.apply(this,arguments)}var s=null,a=n.call(arguments,0);"function"==typeof a[0]&&(s=a.shift()),r.superclass=s,r.subclasses=[],s&&(t.prototype=s.prototype,r.prototype=new t,s.subclasses.push(r));for(var l=0,c=a.length;l<c;l++)o(r,a[l],s);return r.prototype.initialize||(r.prototype.initialize=i),r.prototype.constructor=r,r.prototype.callSuper=e,r}}(),function(){function t(t){var e,n,i=Array.prototype.slice.call(arguments,1),r=i.length;for(n=0;n<r;n++)if(e=typeof t[i[n]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return function(n){e.call(i(t),n||fabric.window.event)}}function n(t,e,n){var i="touchend"===t.type?"changedTouches":"touches";return t[i]&&t[i][0]&&t[i][0][e]-(t[i][0][e]-t[i][0][n])||t[n]}var i,r,o=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};i=function(e){return t[e]},r=function(e,n){t[e]=n}}();var s=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),a=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),l={},c={};s?(s=function(t,e,n){t.addEventListener(e,n,!1)},a=function(t,e,n){t.removeEventListener(e,n,!1)}):a?(s=function(t,n,i){var s=o(t);r(s,t),l[s]||(l[s]={}),l[s][n]||(l[s][n]=[]),i={handler:i,wrappedHandler:e(s,i)},l[s][n].push(i),t.attachEvent("on"+n,i.wrappedHandler)},a=function(t,e,n){var i,r=o(t);if(l[r]&&l[r][e])for(var s=0,a=l[r][e].length;s<a;s++)(i=l[r][e][s])&&i.handler===n&&(t.detachEvent("on"+e,i.wrappedHandler),l[r][e][s]=null)}):(s=function(t,e,n){var i=o(t);if(c[i]||(c[i]={}),!c[i][e]){c[i][e]=[];var r=t["on"+e];r&&c[i][e].push(r),t["on"+e]=function(t,e){return function(n){if(c[t]&&c[t][e])for(var i=c[t][e],r=0,o=i.length;r<o;r++)i[r].call(this,n||fabric.window.event)}}(i,e)}c[i][e].push(n)},a=function(t,e,n){if(t=o(t),c[t]&&c[t][e]){e=c[t][e],t=0;for(var i=e.length;t<i;t++)e[t]===n&&e.splice(t,1)}}),fabric.util.addListener=s,fabric.util.removeListener=a;var u=function(t){return"unknown"!=typeof t.clientX?t.clientX:0},h=function(t){return"unknown"!=typeof t.clientY?t.clientY:0};fabric.isTouchSupported&&(u=function(t){return n(t,"pageX","clientX")},h=function(t){return n(t,"pageY","clientY")}),fabric.util.getPointer=function(t,e){t||(t=fabric.window.event);var n=fabric.util.getScrollLeftTop(t.target||("unknown"!=typeof t.srcElement?t.srcElement:null),e);return{x:u(t)+n.left,y:h(t)+n.top}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){var t=fabric.document.createElement("div"),e="string"==typeof t.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,i=function(t){return t};"string"==typeof t.style.opacity?i=function(t,e){return t.style.opacity=e,t}:e&&(i=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),n.test(i.filter)?i.filter=i.filter.replace(n,.9999<=e?"":"alpha(opacity="+100*e+")"):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?i(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)"opacity"===r?i(t,e[r]):n["float"===r||"cssFloat"===r?void 0===n.styleFloat?"cssFloat":"styleFloat":r]=e[r];return t}}(),function(){function t(t,e){var n,i=fabric.document.createElement(t);for(n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}var e,n,i=Array.prototype.slice,r=function(t){return i.call(t,0)};try{e=r(fabric.document.childNodes)instanceof Array}catch(t){}e||(r=function(t){for(var e=Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),n=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var n=fabric.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=fabric.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),e?t.style[e]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}}(),fabric.util.getScript=function(t,e){var n=fabric.document.getElementsByTagName("head")[0],i=fabric.document.createElement("script"),r=!0;i.onload=i.onreadystatechange=function(t){!r||"string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!1,e(t||fabric.window.event),i=i.onload=i.onreadystatechange=null)},i.src=t,n.appendChild(i)},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.makeElement=t,fabric.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(e,n,i){return"string"==typeof n&&(n=t(n,i)),e.parentNode&&e.parentNode.replaceChild(n,e),n.appendChild(e),n},fabric.util.getScrollLeftTop=function(t,e){var n,i,r=0,o=0,s=fabric.document.documentElement,a=fabric.document.body||{scrollLeft:0,scrollTop:0};for(i=t;t&&t.parentNode&&!n;)1===(t=t.parentNode).nodeType&&"fixed"===fabric.util.getElementStyle(t,"position")&&(n=t),1===t.nodeType&&i!==e&&"absolute"===fabric.util.getElementStyle(t,"position")?o=r=0:t===fabric.document?(r=a.scrollLeft||s.scrollLeft||0,o=a.scrollTop||s.scrollTop||0):(r+=t.scrollLeft||0,o+=t.scrollTop||0);return{left:r,top:o}},fabric.util.getElementOffset=function(t){var e,i={left:0,top:0},r={left:0,top:0},o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!(e=t&&t.ownerDocument))return{left:0,top:0};for(var s in o)r[o[s]]+=parseInt(n(t,s),10)||0;return e=e.documentElement,void 0!==t.getBoundingClientRect&&(i=t.getBoundingClientRect()),t=fabric.util.getScrollLeftTop(t,null),{left:i.left+t.left-(e.clientLeft||0)+r.left,top:i.top+t.top-(e.clientTop||0)+r.top}},fabric.util.getElementStyle=n}(),function(){function t(){}var e=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=function(n,i){i||(i={});var r,o=i.method?i.method.toUpperCase():"GET",s=i.onComplete||function(){},a=e();return a.onreadystatechange=function(){4===a.readyState&&(s(a),a.onreadystatechange=t)},"GET"===o&&(r=null,"string"==typeof i.parameters&&(n=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(n,i.parameters))),a.open(o,n,!0),"POST"!==o&&"PUT"!==o||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r),a}}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return e.apply(fabric.window,arguments)}var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=function(e){t(function(n){e||(e={});var i,r=n||+new Date,o=e.duration||500,s=r+o,a=e.onChange||function(){},l=e.abort||function(){return!1},c=e.easing||function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},u="startValue"in e?e.startValue:0;n="endValue"in e?e.endValue:100;var h=e.byValue||n-u;e.onStart&&e.onStart(),function n(d){d=(i=d||+new Date)>s?o:i-r,l()?e.onComplete&&e.onComplete():(a(c(d,u,h,o)),i>s?e.onComplete&&e.onComplete():t(n))}(r)})},fabric.util.requestAnimFrame=t}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*--e)*Math.sin(2*(e*n-t.s)*Math.PI/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return 1>(t/=i/2)?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:1>(t/=i/2)?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return 1>(t/=i/2)?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,o){var s=0;return 0===n?i:1===(n/=o)?i+r:(s||(s=.3*o),-e(r=t(r,r,s,1.70158),n,o)+i)},easeOutElastic:function(e,n,i,r){var o=0;return 0===e?n:1===(e/=r)?n+i:(o||(o=.3*r),(i=t(i,i,o,1.70158)).a*Math.pow(2,-10*e)*Math.sin(2*(e*r-i.s)*Math.PI/i.p)+i.c+n)},easeInOutElastic:function(n,i,r,o){var s=0;return 0===n?i:2===(n/=o/2)?i+r:(s||(s=.3*o*1.5),r=t(r,r,s,1.70158),1>n?-.5*e(r,n,o)+i:r.a*Math.pow(2,-10*--n)*Math.sin(2*(n*o-r.s)*Math.PI/r.p)*.5+r.c+i)},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),1>(t/=i/2)?n/2*t*t*((1+(r*=1.525))*t-r)+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,o){return t<o/2?.5*n(2*t,0,r,o)+e:.5*i(2*t-o,0,r,o)+.5*r+e}}}(),function(t){function e(t){return t in p?p[t]:t}function n(t,e,n,i){var r,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=n&&n.transformMatrix?f(n.transformMatrix,a.parseTransformAttribute(e)):a.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,n&&!1===n.visible&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":r=o?e.map(d):d(e,i):e="",!o&&isNaN(r)?e:r}function i(t,e){var n,i={};for(n in a.cssRules[e]){var o,s=t,l=n.split(" "),c=!0;if((o=r(s,l.pop()))&&l.length){c=l;for(var u=void 0,h=!0;s.parentNode&&1===s.parentNode.nodeType&&c.length;)h&&(u=c.pop()),h=r(s=s.parentNode,u);c=0===c.length}if(o&&c&&0===l.length)for(var d in a.cssRules[e][n])i[d]=a.cssRules[e][n][d]}return i}function r(t,e){var n=t.nodeName,i=t.getAttribute("class"),r=t.getAttribute("id");n=new RegExp("^"+n,"i");if(e=e.replace(n,""),r&&e.length&&(n=new RegExp("#"+r+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),i&&e.length)for(r=(i=i.split(" ")).length;r--;)n=new RegExp("\\."+i[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function o(t,e,n){var i,r=t.getAttribute("viewBox"),o=1,s=1,a=0,l=0;if(r&&(r=r.match(g))&&(a=-parseFloat(r[1]),l=-parseFloat(r[2]),i=parseFloat(r[3]),r=parseFloat(r[4]),e&&e!==i&&(o=e/i),n&&n!==r&&(s=n/r),s=o=o>s?s:o,1!==o||1!==s||0!==a||0!==l)){if(e=" matrix("+o+" 0 0 "+s+" "+a*o+" "+l*s+") ","svg"===t.tagName){for(n=t.ownerDocument.createElement("g");null!=t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}else e=(n=t).getAttribute("transform")+e;n.setAttribute("transform",e)}}function s(t,e,n){e[n]&&e[n].toSVG&&t.push('<pattern x="0" y="0" id="',n,'Pattern" ','width="',e[n].source.width,'" height="',e[n].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',e[n].source.width,'" height="',e[n].source.height,'" xlink:href="',e[n].source.src,'"></image></pattern>')}var a=t.fabric||(t.fabric={}),l=a.util.object.extend,c=a.util.string.capitalize,u=a.util.object.clone,h=a.util.toFixed,d=a.util.parseUnit,f=a.util.multiplyTransformMatrices,p={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},m={stroke:"strokeOpacity",fill:"fillOpacity"};a.cssRules={},a.gradientDefs={},a.parseTransformAttribute=function(){var t=[1,0,0,1,0,0],e=a.reNum,n="(?:(?:(matrix)\\s*\\(\\s*("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+e+")(?:(?:\\s+,?\\s*|,\\s*)("+e+")(?:\\s+,?\\s*|,\\s*)("+e+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+e+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+e+")\\s*\\)))",i=new RegExp("^\\s*(?:(?:"+n+"(?:(?:\\s+,?\\s*|,\\s*)"+n+")*)?)\\s*$"),r=new RegExp(n,"g");return function(e){var o=t.concat(),s=[];if(!e||e&&!i.test(e))return o;for(e.replace(r,function(e){var i=new RegExp(n).exec(e).filter(function(t){return""!==t&&null!=t});switch(e=i[1],i=i.slice(2).map(parseFloat),e){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(o,i);break;case"rotate":i[0]=a.util.degreesToRadians(i[0]),function(t,e){var n=e[0];t[0]=Math.cos(n),t[1]=Math.sin(n),t[2]=-Math.sin(n),t[3]=Math.cos(n)}(o,i);break;case"scale":!function(t,e){var n=2===e.length?e[1]:e[0];t[0]=e[0],t[3]=n}(o,i);break;case"skewX":o[2]=Math.tan(a.util.degreesToRadians(i[0]));break;case"skewY":o[1]=Math.tan(a.util.degreesToRadians(i[0]));break;case"matrix":o=i}s.push(o.concat()),o=t.concat()}),e=s[0];1<s.length;)s.shift(),e=a.util.multiplyTransformMatrices(e,s[0]);return e}}();var g=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");a.parseSVGDocument=function(){var t=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,e=/^(symbol|image|marker|pattern|view)$/;return function(n,i,r){if(n){!function(t){for(var e=t.getElementsByTagName("use");e.length;){for(var n=e[0],i=n.getAttribute("xlink:href").substr(1),r=n.getAttribute("x")||0,o=n.getAttribute("y")||0,s=(r=((i=t.getElementById(i).cloneNode(!0)).getAttribute("transform")||"")+" translate("+r+", "+o+")",o=0,n.attributes),a=s.length;o<a;o++){var l=s.item(o);"x"!==l.nodeName&&"y"!==l.nodeName&&"xlink:href"!==l.nodeName&&("transform"===l.nodeName?r=l.nodeValue+" "+r:i.setAttribute(l.nodeName,l.nodeValue))}i.setAttribute("transform",r),i.setAttribute("instantiated_by_use","1"),i.removeAttribute("id"),n.parentNode.replaceChild(i,n)}}(n);var s,l,c=new Date,h=a.Object.__uid++,f=!1;if(n.getAttribute("width")&&"100%"!==n.getAttribute("width")&&(s=d(n.getAttribute("width"))),n.getAttribute("height")&&"100%"!==n.getAttribute("height")&&(l=d(n.getAttribute("height"))),!s||!l)(p=n.getAttribute("viewBox"))&&(p=p.match(g))?(s=parseFloat(p[3]),l=parseFloat(p[4])):f=!0;if(o(n,s,l),0===(p=a.util.toArray(n.getElementsByTagName("*"))).length&&a.isLikelyNode){for(var p,m=[],v=0,y=(p=n.selectNodes('//*[name(.)!="svg"]')).length;v<y;v++)m[v]=p[v];p=m}if(!(p=p.filter(function(n){var i;if(e.test(n.tagName)&&o(n,0,0),i=t.test(n.tagName)){t:{for(i=/^(?:pattern|defs|symbol)$/;n&&(n=n.parentNode);)if(i.test(n.nodeName)&&!n.getAttribute("instantiated_by_use")){n=!0;break t}n=!1}i=!n}return i}))||p&&!p.length)i&&i([],{});else{var b={width:s,height:l,svgUid:h,toBeParsed:f};a.gradientDefs[h]=a.getGradientDefs(n),a.cssRules[h]=a.getCSSRules(n),a.parseElements(p,function(t){a.documentParsingTime=new Date-c,i&&i(t,b)},u(b),r)}}}}();var v={has:function(t,e){e(!1)},get:function(){},set:function(){}},y=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");l(a,{parseFontDeclaration:function(t,e){if(s=t.match(y)){var n=s[1],i=s[3],r=s[4],o=s[5],s=s[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),r&&(e.fontSize=d(r)),s&&(e.fontFamily=s),o&&(e.lineHeight="normal"===o?1:o)}},getGradientDefs:function(t){var e,n,i=t.getElementsByTagName("linearGradient"),r=t.getElementsByTagName("radialGradient"),o=0,s=[];t={};var a={};for(s.length=i.length+r.length,e=i.length;e--;)s[o++]=i[e];for(e=r.length;e--;)s[o++]=r[e];for(;o--;)r=(i=s[o]).getAttribute("xlink:href"),n=i.getAttribute("id"),r&&(a[n]=r.substr(1)),t[n]=i;for(n in a)for(o=t[a[n]].cloneNode(!0),i=t[n];o.firstChild;)i.appendChild(o.firstChild);return t},parseAttributes:function(t,r,o){if(t){var s,c,u={};return void 0===o&&(o=t.getAttribute("svgUid")),t.parentNode&&/^symbol|[g|a]$/i.test(t.parentNode.nodeName)&&(u=a.parseAttributes(t.parentNode,r,o)),c=u&&u.fontSize||t.getAttribute("font-size")||a.Text.DEFAULT_SVG_FONT_SIZE,r=r.reduce(function(i,r){return(s=t.getAttribute(r))&&(r=e(r),s=n(r,s,u,c),i[r]=s),i},{}),(r=l(r,l(i(t,o),a.parseStyleAttribute(t)))).font&&a.parseFontDeclaration(r.font,r),function(t){for(var e in m)if(t[e]&&void 0!==t[m[e]]&&0!==t[e].indexOf("url(")){var n=new a.Color(t[e]);t[e]=n.setAlpha(h(n.getAlpha()*t[m[e]],2)).toRgba()}return t}(l(u,r))}},parseElements:function(t,e,n,i){new a.ElementsParser(t,e,n,i).parse()},parseStyleAttribute:function(t){var i,r,o,s={};if(!(t=t.getAttribute("style")))return s;if("string"==typeof t)!function(t,i){var r,o;t.replace(/;$/,"").split(";").forEach(function(t){t=t.split(":"),r=e(t[0].trim().toLowerCase()),o=n(r,t[1].trim()),i[r]=o})}(t,s);else for(o in t)void 0!==t[o]&&(r=n(i=e(o.toLowerCase()),t[o]),s[i]=r);return s},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){t=t.getElementsByTagName("style");for(var i,r={},o=0,s=t.length;o<s;o++)""!==(i=(i=t[o].textContent).replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&(i=(i=i.match(/[^{]*\{[\s\S]*?\}/g)).map(function(t){return t.trim()})).forEach(function(t){t=t.match(/([\s\S]*?)\s*\{([^}]*)\}/);for(var i={},o=t[2].trim().replace(/;$/,"").split(/\s*;\s*/),s=0,l=o.length;s<l;s++){var c=e((u=o[s].split(/\s*:\s*/))[0]),u=n(c,u[1],u[0]);i[c]=u}(t=t[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(r[t]=a.util.object.clone(i))})});return r},loadSVGFromURL:function(t,e,n){function i(i){var r=i.responseXML;r&&!r.documentElement&&a.window.ActiveXObject&&i.responseText&&((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(i.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),r&&r.documentElement&&a.parseSVGDocument(r.documentElement,function(n,i){v.set(t,{objects:a.util.array.invoke(n,"toObject"),options:i}),e(n,i)},n)}t=t.replace(/^\n\s*/,"").trim(),v.has(t,function(n){n?v.get(t,function(t){t=function(t){var e=t.objects;return t=t.options,{objects:e=e.map(function(t){return a[c(t.type)].fromObject(t)}),options:t}}(t),e(t.objects,t.options)}):new a.util.request(t,{method:"get",onComplete:i})})},loadSVGFromString:function(t,e,n){var i;if(t=t.trim(),"undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(i=r.parseFromString(t,"text/xml"))}else a.window.ActiveXObject&&((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));a.parseSVGDocument(i.documentElement,function(t,n){e(t,n)},n)},createSVGFontFacesMarkup:function(t){for(var e="",n=0,i=t.length;n<i;n++)"text"===t[n].type&&t[n].path&&(e+=["@font-face {font-family: ",t[n].fontFamily,"; src: url('",t[n].path,"')}"].join(""));return e&&(e=['<style type="text/css"><![CDATA[',e,"]]></style>"].join("")),e},createSVGRefElementsMarkup:function(t){var e=[];return s(e,t,"backgroundColor"),s(e,t,"overlayColor"),e.join("")}})}(exports),fabric.ElementsParser=function(t,e,n,i){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var n=fabric[fabric.util.string.capitalize(t.tagName)];if(n&&n.fromElement)try{this._createObject(n,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,n){t.async?t.fromElement(e,this.createCallback(n,e),this.options):(t=t.fromElement(e,this.options),this.resolveGradient(t,"fill"),this.resolveGradient(t,"stroke"),this.reviver&&this.reviver(e,t),this.instances[n]=t,this.checkIfDone())},fabric.ElementsParser.prototype.createCallback=function(t,e){var n=this;return function(i){n.resolveGradient(i,"fill"),n.resolveGradient(i,"stroke"),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var n=t.get(e);/^url\(/.test(n)&&(n=n.slice(5,n.length-1),fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t)))},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){function e(t,e){this.x=t,this.y=e}(t=t.fabric||(t.fabric={})).Point?t.warn("fabric.Point is already defined"):(t.Point=e,e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,n){return new e(this.x+(t.x-this.x)*n,this.y+(t.y-this.y)*n)},distanceFrom:function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}})}(exports),function(t){function e(t){this.status=t,this.points=[]}var n=t.fabric||(t.fabric={});n.Intersection?n.warn("fabric.Intersection is already defined"):(n.Intersection=e,n.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},n.Intersection.intersectLineLine=function(t,i,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x);return s=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),0!==(r=(o.y-r.y)*(i.x-t.x)-(o.x-r.x)*(i.y-t.y))?(s/=r,0<=(a/=r)&&1>=a&&0<=s&&1>=s?(s=new e("Intersection")).points.push(new n.Point(t.x+a*(i.x-t.x),t.y+a*(i.y-t.y))):s=new e):s=new e(0===a||0===s?"Coincident":"Parallel"),s},n.Intersection.intersectLinePolygon=function(t,n,i){for(var r=new e,o=i.length,s=0;s<o;s++){var a=e.intersectLineLine(t,n,i[s],i[(s+1)%o]);r.appendPoints(a.points)}return 0<r.points.length&&(r.status="Intersection"),r},n.Intersection.intersectPolygonPolygon=function(t,n){for(var i=new e,r=t.length,o=0;o<r;o++){var s=e.intersectLinePolygon(t[o],t[(o+1)%r],n);i.appendPoints(s.points)}return 0<i.points.length&&(i.status="Intersection"),i},n.Intersection.intersectPolygonRectangle=function(t,i,r){var o=i.min(r),s=i.max(r);r=new n.Point(s.x,o.y);var a=new n.Point(o.x,s.y);return i=e.intersectLinePolygon(o,r,t),r=e.intersectLinePolygon(r,s,t),s=e.intersectLinePolygon(s,a,t),t=e.intersectLinePolygon(a,o,t),(o=new e).appendPoints(i.points),o.appendPoints(r.points),o.appendPoints(s.points),o.appendPoints(t.points),0<o.points.length&&(o.status="Intersection"),o})}(exports),function(t){function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function n(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var i=t.fabric||(t.fabric={});i.Color?i.warn("fabric.Color is already defined."):(i.Color=e,i.Color.prototype={_tryParsingColor:function(t){var n;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t?this.setSource([255,255,255,0]):((n=e.sourceFromHex(t))||(n=e.sourceFromRgb(t)),n||(n=e.sourceFromHsl(t)),n&&this.setSource(n))},_rgbToHsl:function(t,e,n){t/=255,e/=255,n/=255;var r,o,s,a=i.util.array.max([t,e,n]);if(s=(a+(o=i.util.array.min([t,e,n])))/2,a===o)r=o=0;else{var l=a-o;switch(o=.5<s?l/(2-a-o):l/(a+o),a){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource();return"hsl("+(t=this._rgbToHsl(t[0],t[1],t[2]))[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n=this.getSource();return t=1===(t=n[0].toString(16)).length?"0"+t:t,e=1===(e=n[1].toString(16)).length?"0"+e:e,n=1===(n=n[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=(.3*(n=this.getSource())[0]+.59*n[1]+.11*n[2]).toFixed(0),n=n[3];e=Number(e)<Number(t||127)?0:255;return this.setSource([e,e,e,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));var n=[],i=this.getAlpha(),r=this.getSource();t=t.getSource();for(var o=0;3>o;o++)n.push(Math.round(.5*r[o]+.5*t[o]));return n[3]=i,this.setSource(n),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,i.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},i.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},i.Color.sourceFromRgb=function(t){if(t=t.match(e.reRGBa)){var n=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),r=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(n,10),parseInt(i,10),parseInt(r,10),t[4]?parseFloat(t[4]):1]}},i.Color.fromRgba=e.fromRgb,i.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},i.Color.sourceFromHsl=function(t){if(t=t.match(e.reHSLa)){var i=(parseFloat(t[1])%360+360)%360/360,r=parseFloat(t[2])/(/%$/.test(t[2])?100:1),o=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===r)o=r=i=o;else{var s=.5>=o?o*(r+1):o+r-o*r,a=2*o-s;o=n(a,s,i+1/3),r=n(a,s,i),i=n(a,s,i-1/3)}return[Math.round(255*o),Math.round(255*r),Math.round(255*i),t[4]?parseFloat(t[4]):1]}},i.Color.fromHsla=e.fromHsl,i.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},i.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var n=3===(r=t.slice(t.indexOf("#")+1)).length;t=n?r.charAt(0)+r.charAt(0):r.substring(0,2);var i=n?r.charAt(1)+r.charAt(1):r.substring(2,4),r=n?r.charAt(2)+r.charAt(2):r.substring(4,6);return[parseInt(t,16),parseInt(i,16),parseInt(r,16),1]}},i.Color.fromSource=function(t){var n=new e;return n.setSource(t),n})}(exports),function(){function t(t){var e,n,i=t.getAttribute("style"),r=t.getAttribute("offset");r=0>(r=parseFloat(r)/(/%$/.test(r)?100:1))?0:1<r?1:r;if(i){""===(i=i.split(/\s*;\s*/))[i.length-1]&&i.pop();for(var o=i.length;o--;){var s=(a=i[o].split(/\s*:\s*/))[0].trim(),a=a[1].trim();"stop-color"===s?e=a:"stop-opacity"===s&&(n=a)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),t=(e=new fabric.Color(e)).getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=t,{offset:r,color:e.toRgb(),opacity:n}}function e(t,e,n){var i,r,o=0,s=1,a="";for(r in e)i=parseFloat(e[r],10),s="string"==typeof e[r]&&/^\d+%$/.test(e[r])?.01:1,"x1"===r||"x2"===r||"r2"===r?(s*="objectBoundingBox"===n?t.width:1,o="objectBoundingBox"===n&&t.left||0):"y1"!==r&&"y2"!==r||(s*="objectBoundingBox"===n?t.height:1,o="objectBoundingBox"===n&&t.top||0),e[r]=i*s+o;return"ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===n&&t.rx!==t.ry&&(a=" scale(1, "+(t=t.ry/t.rx)+")",e.y1&&(e.y1/=t),e.y2&&(e.y2/=t)),a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var n=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e,n=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var i in n)"x1"===i||"x2"===i||"r2"===i?n[i]+=this.offsetX-t.width/2:"y1"!==i&&"y2"!==i||(n[i]+=this.offsetY-t.height/2);for(t='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(t+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",t,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",t,' cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">\n']),n=0;n<this.colorStops.length;n++)e.push("<stop ",'offset="',100*this.colorStops[n].offset+"%",'" style="stop-color:',this.colorStops[n].color,null!=this.colorStops[n].opacity?";stop-opacity: "+this.colorStops[n].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var n,i,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(i in r)"x1"===i||"x2"===i?r[i]+=-this.offsetX+e.width/2:"y1"!==i&&"y2"!==i||(r[i]+=-this.offsetY+e.height/2);if("text"===e.type||"i-text"===e.type)for(i in r)"x1"===i||"x2"===i?r[i]-=e.width/2:"y1"!==i&&"y2"!==i||(r[i]-=e.height/2);for("linear"===this.type?n=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(n=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),i=0,r=this.colorStops.length;i<r;i++){var o=this.colorStops[i].color,s=this.colorStops[i].opacity,a=this.colorStops[i].offset;void 0!==s&&(o=new fabric.Color(o).setAlpha(s).toRgba()),n.addColorStop(parseFloat(a),o)}return n}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(n,i){var r=n.getElementsByTagName("stop"),o="linearGradient"===n.nodeName?"linear":"radial",s=n.getAttribute("gradientUnits")||"objectBoundingBox",a=n.getAttribute("gradientTransform"),l=[],c={};"linear"===o?c={x1:n.getAttribute("x1")||0,y1:n.getAttribute("y1")||0,x2:n.getAttribute("x2")||"100%",y2:n.getAttribute("y2")||0}:"radial"===o&&(c={x1:n.getAttribute("fx")||n.getAttribute("cx")||"50%",y1:n.getAttribute("fy")||n.getAttribute("cy")||"50%",r1:0,x2:n.getAttribute("cx")||"50%",y2:n.getAttribute("cy")||"50%",r2:n.getAttribute("r")||"50%"});for(var u=r.length;u--;)l.push(t(r[u]));return r=e(i,c,s),o=new fabric.Gradient({type:o,coords:c,colorStops:l,offsetX:-i.left,offsetY:-i.top}),(a||""!==r)&&(o.gradientTransform=fabric.parseTransformAttribute((a||"")+r)),o},forObject:function(t,n){return n||(n={}),e(t,n.coords,"userSpaceOnUse"),new fabric.Gradient(n)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,n=e.width/t.getWidth(),i=e.height/t.getHeight(),r=this.offsetX/t.getWidth();t=this.offsetY/t.getHeight();var o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+t+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;return e&&(void 0===e.src||e.complete&&0!==e.naturalWidth&&0!==e.naturalHeight)?t.createPattern(e,this.repeat):""}}),function(t){var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){for(var n in"string"==typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){t=t.trim();var n=e.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha",i=40,r=40;return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),t.width&&t.height&&(i=100*n(Math.abs(this.offsetX/t.getWidth()),2)+20,r=100*n(Math.abs(this.offsetY/t.getHeight()),2)+20),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="'+e+'" stdDeviation="'+n(this.blur?this.blur/2:0,3)+'" result="blurOut"></feGaussianBlur>\n\t<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" ></feColorMatrix >\n\t<feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset>\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var t={},n=e.Shadow.prototype;return this.color!==n.color&&(t.color=this.color),this.blur!==n.blur&&(t.blur=this.blur),this.offsetX!==n.offsetX&&(t.offsetX=this.offsetX),this.offsetY!==n.offsetY&&(t.offsetY=this.offsetY),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(exports),function(){if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var t=fabric.util.object.extend,e=fabric.util.getElementOffset,n=fabric.util.removeFromArray,i=Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,t.mozImageSmoothingEnabled=this.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.imageSmoothingEnabled,t.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,n,i){return"string"==typeof e?fabric.util.loadImage(e,function(e){this[t]=new fabric.Image(e,i),n&&n()},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,n&&n()),this},__setBgOverlayColor:function(t,e,n){if(e&&e.source){var i=this;fabric.util.loadImage(e.source,function(r){i[t]=new fabric.Pattern({source:r,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),n&&n()})}else this[t]=e,n&&n();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw i;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),void 0===t.getContext)throw i},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px"),e.backstoreOnly||this._setCssDimension(i,n);return e.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll(),t=0;for(var n=this._objects.length;t<n;t++)this._objects[t].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var n=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var i=fabric.util.transformPoint(t,this.viewportTransform);for(this.viewportTransform[4]+=n.x-i.x,this.viewportTransform[5]+=n.y-i.y,this.renderAll(),n=0,i=this._objects.length;n<i;n++)this._objects[n].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll(),t=0;for(var e=this._objects.length;t<e;t++)this._objects[t].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e){t.save();var n=this.viewportTransform;t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._shouldRenderObject(e)&&e.render(t),t.restore(),this.controlsAboveOverlay||e._renderControls(t)}},_shouldRenderObject:function(t){return!!t&&(t!==this.getActiveGroup()||!this.preserveObjectStacking)},_onObjectAdded:function(t){this.stateful&&t.setupState(),t.canvas=this,t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[!0===t&&this.interactive?"contextTop":"contextContainer"],n=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),this._renderObjects(e,n),this._renderActiveGroup(e,n),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){var n,i;if(!e||this.preserveObjectStacking)for(n=0,i=this._objects.length;n<i;++n)this._draw(t,this._objects[n]);else for(n=0,i=this._objects.length;n<i;++n)this._objects[n]&&!e.contains(this._objects[n])&&this._draw(t,this._objects[n])},_renderActiveGroup:function(t,e){if(e){var n=[];this.forEachObject(function(t){e.contains(t)&&n.push(t)}),e._set("objects",n),this._draw(t,e)}},_renderBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&&this._draw(t,this.backgroundImage)},_renderOverlay:function(t){this.overlayColor&&(t.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(t):this.overlayColor,t.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&&this._draw(t,this.overlayImage)},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this._renderOverlay(t),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top)),this.renderAll(),this},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i={objects:this._toObjects(e,n)};return t(i,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,i,n),i},_toObjects:function(t,e){return this.getObjects().map(function(n){return this._toObject(n,t,e)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=this._realizeGroupTransformOnObject(t);return e=t[e](n),this.includeDefaultValues||(t.includeDefaultValues=i),this._unwindGroupTransformOnObject(t,r),e},_realizeGroupTransformOnObject:function(t){var e="angle flipX flipY height left scaleX scaleY top width".split(" ");if(t.group&&t.group===this.getActiveGroup()){var n={};return e.forEach(function(e){n[e]=t[e]}),this.getActiveGroup().realizeTransform(t),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this._setSVGBgOverlayColor(n,"backgroundColor"),this._setSVGBgOverlayImage(n,"backgroundImage"),this._setSVGObjects(n,e),this._setSVGBgOverlayColor(n,"overlayColor"),this._setSVGBgOverlayImage(n,"overlayImage"),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,i,r;e.viewBox?(n=e.viewBox.width,i=e.viewBox.height):(n=this.width,i=this.height,this.svgViewportTransformation||(n/=(r=this.viewportTransform)[0],i/=r[3])),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,e.viewBox?'viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(t,e){for(var n=0,i=this.getObjects(),r=i.length;n<r;n++){var o=i[n],s=this._realizeGroupTransformOnObject(o);t.push(o.toSVG(e)),this._unwindGroupTransformOnObject(o,s)}},_setSVGBgOverlayImage:function(t,e){this[e]&&this[e].toSVG&&t.push(this[e].toSVG())},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>")},sendToBack:function(t){return n(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return n(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var i=this._objects.indexOf(t);return 0!==i&&(i=this._findNewLowerIndex(t,i,e),n(this._objects,t),this._objects.splice(i,0,t),this.renderAll&&this.renderAll()),this},_findNewLowerIndex:function(t,e,n){if(n){for(n=e,--e;0<=e;--e)if(t.intersectsWithObject(this._objects[e])||t.isContainedWithinObject(this._objects[e])||this._objects[e].isContainedWithinObject(t)){n=e;break}}else n=e-1;return n},bringForward:function(t,e){var i=this._objects.indexOf(t);return i!==this._objects.length-1&&(i=this._findNewUpperIndex(t,i,e),n(this._objects,t),this._objects.splice(i,0,t),this.renderAll&&this.renderAll()),this},_findNewUpperIndex:function(t,e,n){if(n){for(n=e,e+=1;e<this._objects.length;++e)if(t.intersectsWithObject(this._objects[e])||t.isContainedWithinObject(this._objects[e])||this._objects[e].isContainedWithinObject(t)){n=e;break}}else n=e+1;return n},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"getImageData":return void 0!==n.getImageData;case"setLineDash":return void 0!==n.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){t=new fabric.Point(t.x,t.y),this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){t=new fabric.Point(t.x,t.y),this._addPoint(t)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,n=this._points[0],i=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&n.x===i.x&&n.y===i.y&&(n.x-=.5,i.x+=.5),t.moveTo(n.x,n.y),e=1;for(var r=this._points.length;e<r;e++)i=n.midPointFrom(i),t.quadraticCurveTo(n.x,n.y,i.x,i.y),n=this._points[e],i=this._points[e+1];t.lineTo(n.x,n.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],n=new fabric.Point(t[0].x,t[0].y),i=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var r=1,o=t.length;r<o;r++){var s=n.midPointFrom(i);e.push("Q ",n.x," ",n.y," ",s.x," ",s.y," "),n=new fabric.Point(t[r].x,t[r].y),r+1<t.length&&(i=new fabric.Point(t[r+1].x,t[r+1].y))}return e.push("L ",n.x," ",n.y," "),e},createPath:function(t){return t=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"}),this.shadow&&(this.shadow.affectStroke=!0,t.setShadow(this.shadow)),t},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");"M 0 0 Q 0 0 0 0 L 0 0"===t?this.canvas.renderAll():(t=this.createPath(t),this.canvas.add(t),t.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:t}))}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){t=this.addPoint(t);var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill(),e.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.points.length;n<i;n++){var r=this.points[n];r=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&r.setShadow(this.shadow),e.push(r)}(e=new fabric.Group(e,{originX:"center",originY:"center"})).canvas=this.canvas,this.canvas.add(e),this.canvas.fire("path:created",{path:e}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){t=new fabric.Point(t.x,t.y);var e=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return t.radius=e,t.fill=n,this.points.push(t),t}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var r=this.sprayChunks[n],o=0,s=r.length;o<s;o++){var a=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e)),(e=new fabric.Group(e,{originX:"center",originY:"center"})).canvas=this.canvas,this.canvas.add(e),this.canvas.fire("path:created",{path:e}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,n={},i=0,r=t.length;i<r;i++)n[e=t[i].left+""+t[i].top]||(n[e]=t[i]);for(e in t=[],n)t.push(n[e]);return t},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);e=0;for(var n=this.sprayChunkPoints.length;e<n;e++){var i=this.sprayChunkPoints[e];void 0!==i.opacity&&(t.globalAlpha=i.opacity),t.fillRect(i.x,i.y,i.width,i.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,n,i,r=this.width/2,o=0;o<this.density;o++)e=fabric.util.getRandomInt(t.x-r,t.x+r),n=fabric.util.getRandomInt(t.y-r,t.y+r),i=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,(e=new fabric.Point(e,n)).width=i,this.randomOpacity&&(e.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(e);this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){return(t=this.callSuper("createPath",t)).stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),t}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,n=fabric.util.radiansToDegrees,i=Math.atan2,r=Math.abs;for(var o in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._groupSelector=this._currentTransform=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(t,e.target)?"rotate"===e.action?this._setOriginToCenter(e.target):("center"!==e.originX&&(e.mouseXSign="right"===e.originX?-1:1),"center"!==e.originY&&(e.mouseYSign="bottom"===e.originY?-1:1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var n=this.getPointer(t,!0),i=this._normalizePointer(e,n);return e.containsPoint(i)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var n=this.getActiveGroup(),i=e.x,r=e.y;return n&&"group"!==t.type&&n.contains(t)&&(n=new fabric.Point(n.left,n.top),i-=(n=fabric.util.transformPoint(n,this.viewportTransform,!0)).x,r-=n.y),{x:i,y:r}},isTargetTransparent:function(t,e,n){var i=t.hasBorders,r=t.transparentCorners;return t.hasBorders=t.transparentCorners=!1,this._draw(this.contextCache,t),t.hasBorders=i,t.transparentCorners=r,t=fabric.util.isTransparent(this.contextCache,e,n,this.targetFindTolerance),this.clearContext(this.contextCache),t},_shouldClearSelection:function(t,e){var n=this.getActiveGroup(),i=this.getActiveObject();return!e||e&&n&&!n.contains(e)&&n!==e&&!t.shiftKey||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e){if(e){var n,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?n=this.centeredScaling||e.centeredScaling:"rotate"===i.action&&(n=this.centeredRotation||e.centeredRotation),n?!t.altKey:t.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e){var n="drag";return e&&(n="ml"===e||"mr"===e?"scaleX":"mt"===e||"mb"===e?"scaleY":"mtr"===e?"rotate":"scale"),n},_setupCurrentTransform:function(t,n){if(n){var i=this.getPointer(t),r=n._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(n,r);r=this._getOriginFromCorner(n,r);this._currentTransform={target:n,action:o,scaleX:n.scaleX,scaleY:n.scaleY,offsetX:i.x-n.left,offsetY:i.y-n.top,originX:r.x,originY:r.y,ex:i.x,ey:i.y,left:n.left,top:n.top,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:n.left,top:n.top,scaleX:n.scaleX,scaleY:n.scaleY,originX:r.x,originY:r.y},this._resetCurrentTransform(t)}},_translateObject:function(t,e){var n=this._currentTransform.target;n.get("lockMovementX")||n.set("left",t-this._currentTransform.offsetX),n.get("lockMovementY")||n.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,n){var i=this._currentTransform,r=i.target,o=r.get("lockScalingX"),s=r.get("lockScalingY"),a=r.get("lockScalingFlip");if(!o||!s){var l=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY);t=r.toLocalPoint(new fabric.Point(t,e),i.originX,i.originY),this._setLocalMouse(t,i),this._setObjectScale(t,i,o,s,n,a),r.setPositionByOrigin(l,i.originX,i.originY)}},_setObjectScale:function(t,e,n,i,r,o){var s=e.target,a=!1,l=!1,c=s.stroke?s.strokeWidth:0;e.newScaleX=t.x/(s.width+c/2),e.newScaleY=t.y/(s.height+c/2),o&&0>=e.newScaleX&&e.newScaleX<s.scaleX&&(a=!0),o&&0>=e.newScaleY&&e.newScaleY<s.scaleY&&(l=!0),"equally"!==r||n||i?r?"x"!==r||s.get("lockUniScaling")?"y"!==r||s.get("lockUniScaling")||l||i||s.set("scaleY",e.newScaleY):a||n||s.set("scaleX",e.newScaleX):(a||n||s.set("scaleX",e.newScaleX),l||i||s.set("scaleY",e.newScaleY)):a||l||this._scaleObjectEqually(t,s,e),a||l||this._flipObject(e,r)},_scaleObjectEqually:function(t,e,n){t=t.y+t.x;var i=e.stroke?e.strokeWidth:0;i=(e.height+i/2)*n.original.scaleY+(e.width+i/2)*n.original.scaleX;n.newScaleX=n.original.scaleX*t/i,n.newScaleY=n.original.scaleY*t/i,e.set("scaleX",n.newScaleX),e.set("scaleY",n.newScaleY)},_flipObject:function(t,e){0>t.newScaleX&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),0>t.newScaleY&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var n=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x=2*t.x*e.mouseXSign,0>t.x&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y=2*t.y*e.mouseYSign,0>t.y&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>n.padding?t.x=0>t.x?t.x+n.padding:t.x-n.padding:t.x=0,r(t.y)>n.padding?t.y=0>t.y?t.y+n.padding:t.y-n.padding:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform;if(!r.target.get("lockRotation")){var o=i(r.ey-r.top,r.ex-r.left),s=i(e-r.top,t-r.left);0>(o=n(s-o+r.theta))&&(o=360+o),r.target.angle=o%360}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,n=e.left,i=e.top,o=r(n),s=r(i);t.fillStyle=this.selectionColor,t.fillRect(e.ex-(0<n?0:-n),e.ey-(0<i?0:-i),o,s),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length?(n=e.ex+.5-(0<n?0:o),e=e.ey+.5-(0<i?0:s),t.beginPath(),fabric.util.drawDashedLine(t,n,e,n+o,e,this.selectionDashArray),fabric.util.drawDashedLine(t,n,e+s-1,n+o,e+s-1,this.selectionDashArray),fabric.util.drawDashedLine(t,n,e,n,e+s,this.selectionDashArray),fabric.util.drawDashedLine(t,n+o-1,e,n+o-1,e+s,this.selectionDashArray),t.closePath(),t.stroke()):t.strokeRect(e.ex+.5-(0<n?0:o),e.ey+.5-(0<i?0:s),o,s)},_isLastRenderedObject:function(t){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t,!0))},findTarget:function(t,e){if(!this.skipTargetFind){if(this._isLastRenderedObject(t))return this.lastRenderedObjectWithControlsAboveOverlay;var n=this.getActiveGroup();return n&&!e&&this.containsPoint(t,n)?n:(n=this._searchPossibleTargets(t),this._fireOverOutEvents(n),n)}},_fireOverOutEvents:function(t){t?this._hoveredTarget!==t&&(this.fire("mouse:over",{target:t}),t.fire("mouseover"),this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout")),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&this.containsPoint(t,e)&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,n.x,n.y)))return!0},_searchPossibleTargets:function(t){for(var e,n=this.getPointer(t,!0),i=this._objects.length;i--;)if(!this._objects[i].group&&this._checkTarget(t,this._objects[i],n)){this.relatedTarget=this._objects[i],e=this._objects[i];break}return e},getPointer:function(e,n,i){i||(i=this.upperCanvasEl),e=t(e,i);var r=i.getBoundingClientRect(),o=r.width||0,s=r.height||0;return o&&s||("top"in r&&"bottom"in r&&(s=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(o=Math.abs(r.right-r.left))),this.calcOffset(),e.x-=this._offset.left,e.y-=this._offset.top,n||(e=fabric.util.transformPoint(e,fabric.util.invertTransform(this.viewportTransform))),0===o||0===s?i=n=1:(n=i.width/o,i=i.height/s),{x:e.x*n,y:e.y*i}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,n=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0}),t.width=e,t.height=n,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){(this._activeGroup=t)&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,n=t.length;e<n;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},drawControls:function(t){var e=this.getActiveGroup();e?this._drawGroupControls(t,e):this._drawObjectsControls(t)},_drawGroupControls:function(t,e){e._renderControls(t)},_drawObjectsControls:function(t){for(var e=0,n=this._objects.length;e<n;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[e])}}),fabric.StaticCanvas)"prototype"!==o&&(fabric.Canvas[o]=fabric.StaticCanvas[o]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,n=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:"n-resize ne-resize e-resize se-resize s-resize sw-resize w-resize nw-resize".split(" "),_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){n(fabric.window,"resize",this._onResize),n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"mousewheel",this._onMouseWheel),n(this.upperCanvasEl,"touchstart",this._onMouseDown),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?n(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp),n(fabric.document,"mousemove",this._onMouseMove),n(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var i=this;setTimeout(function(){e(i.upperCanvasEl,"mousedown",i._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var n=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==n)||!t&&n||!t&&!n&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else{this._currentTransform?(this._finalizeCurrentTransform(),e=this._currentTransform.target):e=this.findTarget(t,!0);var n=this._shouldRender(e,this.getPointer(t));this._maybeGroupObjects(t),e&&(e.isMoving=!1),n&&this.renderAll(),this._handleCursorAndEvent(t,e)}},_handleCursorAndEvent:function(t,e){this._setCursorFromEvent(t,e);var n=this;setTimeout(function(){n._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_finalizeCurrentTransform:function(){var t=this._currentTransform.target;t._scaling&&(t._scaling=!1),t.setCoords(),this.stateful&&t.hasStateChanged()&&(this.fire("object:modified",{target:t}),t.fire("modified")),this._restoreOriginXY(t)},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginY=this._previousOriginX=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform);e=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(e),this.fire("mouse:down",{e:t}),void 0!==(e=this.findTarget(t))&&e.fire("mousedown",{e:t,target:e})},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform);e=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this.fire("mouse:move",{e:t}),void 0!==(e=this.findTarget(t))&&e.fire("mousemove",{e:t,target:e})},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this.fire("mouse:up",{e:t});var e=this.findTarget(t);void 0!==e&&e.fire("mouseup",{e:t,target:e})},__onMouseDown:function(t){if(("which"in t?1===t.which:1===t.button)||fabric.isTouchSupported)if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(!this._currentTransform){var e=this.findTarget(t),n=this.getPointer(t,!0);this._previousPointer=n;var i=this._shouldRender(e,n),r=this._shouldGroup(t,e);this._shouldClearSelection(t,e)?this._clearSelection(t,e,n):r&&(this._handleGrouping(t,e),e=this.getActiveGroup()),e&&e.selectable&&!r&&(this._beforeTransform(t,e),this._setupCurrentTransform(t,e)),i&&this.renderAll(),this.fire("mouse:down",{target:e,e:t}),e&&e.fire("mousedown",{e:t})}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e),e!==this.getActiveGroup()&&e!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(e,t))},_clearSelection:function(t,e,n){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginY=this._previousOriginX=null},__onMouseMove:function(t){var e,n;if(this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(!(void 0!==t.touches&&1<t.touches.length)){var i=this._groupSelector;i?(n=this.getPointer(t,!0),i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):!(e=this.findTarget(t))||e&&!e.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(t,e),this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})}},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),this.renderAll()},_performTransformAction:function(t,e,n){var i=n.x;n=n.y;var r=e.target,o=e.action;"rotate"===o?(this._rotateObject(i,n),this._fire("rotating",r,t)):"scale"===o?(this._onScale(t,e,i,n),this._fire("scaling",r,t)):"scaleX"===o?(this._scaleObject(i,n,"x"),this._fire("scaling",r,t)):"scaleY"===o?(this._scaleObject(i,n,"y"),this._fire("scaling",r,t)):(this._translateObject(i,n),this._fire("moving",r,t),this.setCursor(this.moveCursor))},_fire:function(t,e,n){this.fire("object:"+t,{target:e,e:n}),e.fire(t,{e:n})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var n=this._shouldCenterTransform(t,e.target);(n&&("center"!==e.originX||"center"!==e.originY)||!n&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(t),e.reset=!0)}},_onScale:function(t,e,n,i){!t.shiftKey&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t,e.target),e.currentAction="scaleEqually",this._scaleObject(n,i,"equally")):(e.currentAction="scale",this._scaleObject(n,i))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var n=this.getActiveGroup();return(n=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0)))?this._setCornerCursor(n,e):this.setCursor(e.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,n){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,n));else{if("mtr"!==e||!n.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,n){var i=Math.round(n.getAngle()%360/45);return 0>i&&(i+=8),i+=t[e],this.cursorMap[i%8]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var n=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||n&&n!==e)&&this.selection},_handleGrouping:function(t,e){e===this.getActiveGroup()&&(!(e=this.findTarget(t,!0))||e.isType("group"))||(this.getActiveGroup()?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var n=this.getActiveGroup();if(n.contains(t)){if(n.removeWithUpdate(t),this._resetObjectTransform(n),t.set("active",!1),1===n.size())return this.discardActiveGroup(e),void this.setActiveObject(n.item(0))}else n.addWithUpdate(t),this._resetObjectTransform(n);this.fire("selection:created",{target:n,e:e}),n.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var n=this._createGroup(t);n.addWithUpdate(),this.setActiveGroup(n),this._activeObject=null,this.fire("selection:created",{target:n,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects();return t=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject],new fabric.Group(t,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):1<e.length&&((e=new fabric.Group(e.reverse(),{canvas:this})).addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){var n,i=[];n=this._groupSelector.ex;var r=this._groupSelector.ey,o=n+this._groupSelector.left,s=r+this._groupSelector.top,a=new fabric.Point(t(n,o),t(r,s)),l=new fabric.Point(e(n,o),e(r,s));for(r=n===o&&r===s,o=this._objects.length;o--&&!((n=this._objects[o])&&n.selectable&&n.visible&&(n.intersectsWithRect(a,l)||n.isContainedWithinRect(a,l)||n.containsPoint(a)||n.containsPoint(l))&&(n.set("active",!0),i.push(n),r)););return i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),(t=this.getActiveGroup())&&(t.setObjectsCoords().setCoords(),t.isMoving=!1,this.setCursor(this.defaultCursor)),this._currentTransform=this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=t.multiplier||1;return t={left:t.left,top:t.top,width:t.width,height:t.height},1!==i?this.__toDataURLWithMultiplier(e,n,t,i):this.__toDataURL(e,n,t)},__toDataURL:function(t,e,n){this.renderAll(!0);var i=this.upperCanvasEl||this.lowerCanvasEl;return n=this.__getCroppedCanvas(i,n),"jpg"===t&&(t="jpeg"),t=fabric.StaticCanvas.supports("toDataURLWithQuality")?(n||i).toDataURL("image/"+t,e):(n||i).toDataURL("image/"+t),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),t},__getCroppedCanvas:function(t,e){var n,i;return("left"in e||"top"in e||"width"in e||"height"in e)&&(i=(n=fabric.util.createCanvasElement()).getContext("2d"),n.width=e.width||this.width,n.height=e.height||this.height,i.drawImage(t,-e.left||0,-e.top||0)),n},__toDataURLWithMultiplier:function(t,e,n,i){var r=this.getWidth(),o=this.getHeight(),s=r*i,a=o*i,l=this.getActiveObject(),c=this.getActiveGroup(),u=this.contextTop||this.contextContainer;return 1<i&&this.setWidth(s).setHeight(a),u.scale(i,i),n.left&&(n.left*=i),n.top&&(n.top*=i),n.width?n.width*=i:1>i&&(n.width=s),n.height?n.height*=i:1>i&&(n.height=a),c?this._tempRemoveBordersControlsFromGroup(c):l&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0),t=this.__toDataURL(t,e,n),this.width=r,this.height=o,u.scale(1/i,1/i),this.setWidth(r).setHeight(o),c?this._restoreBordersControlsOnGroup(c):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),t},toDataURLWithMultiplier:function(t,e,n){return this.toDataURL({format:t,multiplier:e,quality:n})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i="string"==typeof t?JSON.parse(t):t;this.clear();var r=this;return this._enlivenObjects(i.objects,function(){r._setBgOverlay(i,e)},n),this}},_setBgOverlay:function(t,e){var n=this,i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var r=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&(n.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,r),this.__setBgOverlay("overlayImage",t.overlayImage,i,r),this.__setBgOverlay("backgroundColor",t.background,i,r),this.__setBgOverlay("overlayColor",t.overlay,i,r),r()}else e&&e()},__setBgOverlay:function(t,e,n,i){var r=this;e?"backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){r[t]=e,n[t]=!0,i&&i()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){n[t]=!0,i&&i()}):n[t]=!0},_enlivenObjects:function(t,e,n){var i=this;if(t&&0!==t.length){var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){i.insertAt(t,e,!0)}),i.renderOnAddRemove=r,e&&e()},null,n)}else e&&e()},_toDataURL:function(t,e){this.clone(function(n){e(n.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,n){this.clone(function(i){n(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(n,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var n=new fabric.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){var e=t.fabric||(t.fabric={});t=e.util.object.extend;var n=e.util.toFixed,i=e.util.string.capitalize,r=e.util.degreesToRadians,o=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){t.clipTo&&"string"==typeof t.clipTo&&(void 0!==(t=e.util.getFunctionBody(t.clipTo))&&(this.clipTo=new Function("ctx",t)))},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){var n=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(n.x,n.y),t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS;i={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,i),top:n(this.top,i),width:n(this.width,i),height:n(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,i),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,i),scaleX:n(this.scaleX,i),scaleY:n(this.scaleY,i),angle:n(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation};return this.includeDefaultValues||(i=this._removeDefaultValues(i)),e.util.populateWithProperties(this,i,t),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype;return n.stateProperties.forEach(function(e){t[e]===n[e]&&delete t[e]}),t},toString:function(){return"#<fabric."+i(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){return"scaleX"!==t&&"scaleY"!==t||(i=this._constrainScale(i)),"scaleX"===t&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&0>i?(this.flipY=!this.flipY,i*=-1):"width"===t||"height"===t?this.minScaleLimit=n(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,n){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),n||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,n),this.clipTo&&t.restore(),this._removeShadow(t),this._restoreCompositeOperation(t),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_renderControls:function(t,n){if(this.active&&!n){var i,o=this.getViewportTransform();t.save(),this.group&&(i=e.util.transformPoint(this.group.getCenterPoint(),o),t.translate(i.x,i.y),t.rotate(r(this.group.angle))),i=e.util.transformPoint(this.getCenterPoint(),o,null!=this.group),this.group&&(i.x*=this.group.scaleX,i.y*=this.group.scaleY),t.translate(i.x,i.y),t.rotate(r(this.angle)),this.drawBorders(t),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+n)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){this.fill&&(t.save(),this.fill.gradientTransform&&t.transform.apply(t,this.fill.gradientTransform),this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t))},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(t.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke()):(this.stroke.gradientTransform&&t.transform.apply(t,this.stroke.gradientTransform),this._stroke?this._stroke(t):t.stroke()),this._removeShadow(t),t.restore())},clone:function(t,n){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(n),t):new e.Object(this.toObject(n))},cloneAsImage:function(t){var n=this.toDataURL();return e.util.loadImage(n,function(n){t&&t(new e.Image(n))}),this},toDataURL:function(t){t||(t={});var n=e.util.createCanvasElement(),i=this.getBoundingRect();n.width=i.width,n.height=i.height,e.util.wrapElement(n,"div"),i=new e.StaticCanvas(n),"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(i.backgroundColor="#fff");var r={active:this.get("active"),left:this.getLeft(),top:this.getTop()};return this.set("active",!1),this.setPositionByOrigin(new e.Point(n.width/2,n.height/2),"center","center"),n=this.canvas,i.add(this),t=i.toDataURL(t),this.set(r).setCoords(),this.canvas=n,i.dispose(),t},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,n){n||(n={});var i={colorStops:[]};for(var r in i.type=n.type||(n.r1||n.r2?"radial":"linear"),i.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},(n.r1||n.r2)&&(i.coords.r1=n.r1,i.coords.r2=n.r2),n.colorStops){var o=new e.Color(n.colorStops[r]);i.colorStops.push({offset:r,color:o.toRgb(),opacity:o.getAlpha()})}return this.set(t,e.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var n=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:e.x-n.x,y:e.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(this._prevGlobalCompositeOperation=t.globalCompositeOperation,t.globalCompositeOperation=this.globalCompositeOperation)},_restoreCompositeOperation:function(t){this.globalCompositeOperation&&this._prevGlobalCompositeOperation&&(t.globalCompositeOperation=this._prevGlobalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,t(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}(exports),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,n,i){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===n?r=e.x+(this.getWidth()+s*this.scaleX)/2:"right"===n&&(r=e.x-(this.getWidth()+s*this.scaleX)/2),"top"===i?o=e.y+(this.getHeight()+s*this.scaleY)/2:"bottom"===i&&(o=e.y-(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},translateToOriginPoint:function(e,n,i){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===n?r=e.x-(this.getWidth()+s*this.scaleX)/2:"right"===n&&(r=e.x+(this.getWidth()+s*this.scaleX)/2),"top"===i?o=e.y-(this.getHeight()+s*this.scaleY)/2:"bottom"===i&&(o=e.y+(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,i){var r=this.getCenterPoint(),o=this.stroke?this.strokeWidth:0;return n&&i?(n="left"===n?r.x-(this.getWidth()+o*this.scaleX)/2:"right"===n?r.x+(this.getWidth()+o*this.scaleX)/2:r.x,i="top"===i?r.y-(this.getHeight()+o*this.scaleY)/2:"bottom"===i?r.y+(this.getHeight()+o*this.scaleY)/2:r.y):(n=this.left,i=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),r,-t(this.angle)).subtractEquals(new fabric.Point(n,i))},setPositionByOrigin:function(t,e,n){t=this.translateToCenterPoint(t,e,n),t=this.translateToOriginPoint(t,this.originX,this.originY),this.set("left",t.x),this.set("top",t.y)},adjustPosition:function(e){var n=t(this.angle),i=this.getWidth()/2,r=Math.cos(n)*i,o=(i=Math.sin(n)*i,this.getWidth()),s=Math.cos(n)*o;n=Math.sin(n)*o;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=r,this.top-=i):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=r,this.top+=i):"left"===this.originX&&"right"===e?(this.left+=s,this.top+=n):"right"===this.originX&&"left"===e&&(this.left-=s,this.top-=n),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originY=this.originX="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginY=this._originalOriginX=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","center")}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var n=this.oCoords,i=new fabric.Point(n.tl.x,n.tl.y),r=new fabric.Point(n.tr.x,n.tr.y),o=new fabric.Point(n.bl.x,n.bl.y);n=new fabric.Point(n.br.x,n.br.y);return"Intersection"===fabric.Intersection.intersectPolygonRectangle([i,r,n,o],t,e).status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var n=e(this.oCoords);return t=e(t.oCoords),"Intersection"===fabric.Intersection.intersectPolygonPolygon([n.tl,n.tr,n.br,n.bl],[t.tl,t.tr,t.br,t.bl]).status},isContainedWithinObject:function(t){var e=t.getBoundingRect();return t=new fabric.Point(e.left,e.top),e=new fabric.Point(e.left+e.width,e.top+e.height),this.isContainedWithinRect(t,e)},isContainedWithinRect:function(t,e){var n=this.getBoundingRect();return n.left>=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords);return 0!==(t=this._findCrossPoints(t,e))&&1==t%2},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o=0;for(r in e)if(!((i=e[r]).o.y<t.y&&i.d.y<t.y||i.o.y>=t.y&&i.d.y>=t.y)&&(i.o.x===i.d.x&&i.o.x>=t.x?n=i.o.x:(n=(i.d.y-i.o.y)/(i.d.x-i.o.x),n=-(t.y-0*t.x-(i=i.o.y-n*i.o.x))/(0-n)),n>=t.x&&(o+=1),2===o))break;return o},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),n=(t=fabric.util.array.max(t),t=Math.abs(e-t),[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y]),i=fabric.util.array.min(n);n=fabric.util.array.max(n);return{left:e,top:i,width:t,height:Math.abs(i-n)}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return 0>(t=this._constrainScale(t))&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleY=this.scaleX=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var e=t(this.angle),n=this.getViewportTransform(),i=function(t){return fabric.util.transformPoint(t,n)},r=(s=this._calculateCurrentDimensions(!1)).x,o=s.y;0>r&&(r=Math.abs(r));var s=Math.sqrt(Math.pow(r/2,2)+Math.pow(o/2,2)),a=Math.atan(isFinite(o/r)?o/r:0),l=Math.cos(a+e)*s,c=(a=Math.sin(a+e)*s,s=Math.sin(e),e=Math.cos(e),this.getCenterPoint()),u=(o=new fabric.Point(r,o),c=new fabric.Point(c.x-l,c.y-a),a=new fabric.Point(c.x+o.x*e,c.y+o.x*s),r=i(new fabric.Point(c.x-o.y*s,c.y+o.y*e)),l=i(new fabric.Point(a.x-o.y*s,a.y+o.y*e)),o=i(c),i=i(a),a=new fabric.Point((o.x+r.x)/2,(o.y+r.y)/2),c=new fabric.Point((i.x+o.x)/2,(i.y+o.y)/2),new fabric.Point((l.x+i.x)/2,(l.y+i.y)/2)),h=new fabric.Point((l.x+r.x)/2,(l.y+r.y)/2);s=new fabric.Point(c.x+s*this.rotatingPointOffset,c.y-e*this.rotatingPointOffset);return this.oCoords={tl:o,tr:i,br:l,bl:r,ml:a,mt:c,mr:u,mb:h,mtr:s},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.fillRule;return["stroke: ",this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none","; stroke-width: ",this.strokeWidth?this.strokeWidth:"0","; stroke-dasharray: ",this.strokeDashArray?this.strokeDashArray.join(" "):"","; stroke-linecap: ",this.strokeLineCap?this.strokeLineCap:"butt","; stroke-linejoin: ",this.strokeLineJoin?this.strokeLineJoin:"miter","; stroke-miterlimit: ",this.strokeMiterLimit?this.strokeMiterLimit:"4","; fill: ",t,"; fill-rule: ",e,"; opacity: ",void 0!==this.opacity?this.opacity:"1",";",this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":"",this.visible?"":" visibility: hidden;"].join("")},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),n=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],i=fabric.util.transformPoint(this.getCenterPoint(),n),r=fabric.Object.NUM_FRACTION_DIGITS;i="path-group"===this.type?"":"translate("+t(i.x,r)+" "+t(i.y,r)+")",e=0!==e?" rotate("+t(e,r)+")":"",t=1===this.scaleX&&1===this.scaleY&&1===n[0]&&1===n[3]?"":" scale("+t(this.scaleX*n[0],r)+" "+t(this.scaleY*n[3],r)+")",r="path-group"===this.type?this.width*n[0]:0,n="path-group"===this.type?this.height*n[3]:0;return[i,e,t,this.flipX?" matrix(-1 0 0 1 "+r+" 0) ":"",this.flipY?" matrix(1 0 0 -1 0 "+n+")":""].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,n,i=t.x;for(n in t=t.y,this.oCoords)if(this.isControlVisible(n)&&("mtr"!==n||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==n&&"mr"!==n&&"mb"!==n&&"ml"!==n)&&(e=this._getImageLines(this.oCoords[n].corner),0!==(e=this._findCrossPoints({x:i,y:t},e))&&1==e%2))return this.__corner=n;return!1},_setCornerCoords:function(){var e,n,i=this.oCoords,r=t(45-this.angle),o=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,s=o*Math.cos(r);r=o*Math.sin(r);for(n in i)o=i[n].x,e=i[n].y,i[n].corner={tl:{x:o-r,y:e-s},tr:{x:o+s,y:e-r},bl:{x:o-s,y:e+r},br:{x:o+r,y:e+s}}},_calculateCurrentDimensions:function(t){var e=this.getViewportTransform(),n=this.strokeWidth,i=this.width,r=this.height,o="round"===this.strokeLineCap||"square"===this.strokeLineCap,s="line"===this.type&&0===this.width,a="line"===this.type&&0===this.height,l=s||a;return s?i=n:a&&(r=n),(o&&a||!l)&&(i+=0>i?-n:n),(o&&s||!l)&&(r+=0>r?-n:n),i=i*this.scaleX+2*this.padding,r=r*this.scaleY+2*this.padding,t?fabric.util.transformPoint(new fabric.Point(i,r),e,!0):{x:i,y:r}},drawBorders:function(t){if(!this.hasBorders)return this;t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor;var e=(n=this._calculateCurrentDimensions(!0)).x,n=n.y;return this.group&&(e*=this.group.scaleX,n*=this.group.scaleY),t.strokeRect(~~(-e/2)-.5,~~(-n/2)-.5,1+~~e,1+~~n),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls&&(e=-n/2,t.beginPath(),t.moveTo(0,e),t.lineTo(0,e-this.rotatingPointOffset),t.closePath(),t.stroke()),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e,n=(e=this._calculateCurrentDimensions(!0)).x,i=-n/2,r=-(e=e.y)/2,o=this.cornerSize/2,s=this.transparentCorners?"strokeRect":"fillRect";return t.save(),t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this._drawControl("tl",t,s,i-o,r-o),this._drawControl("tr",t,s,i+n-o,r-o),this._drawControl("bl",t,s,i-o,r+e-o),this._drawControl("br",t,s,i+n-o,r+e-o),this.get("lockUniScaling")||(this._drawControl("mt",t,s,i+n/2-o,r-o),this._drawControl("mb",t,s,i+n/2-o,r+e-o),this._drawControl("mr",t,s,i+n-o,r+e/2-o),this._drawControl("ml",t,s,i-o,r+e/2-o)),this.hasRotatingPoint&&this._drawControl("mtr",t,s,i+n/2-o,r-this.rotatingPointOffset-o),t.restore(),this},_drawControl:function(t,e,n,i,r){this.isControlVisible(t)&&(t=this.cornerSize,"undefined"!=typeof G_vmlCanvasManager||this.transparentCorners||e.clearRect(i,r,t,t),e[n](i,r,t,t))},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),r()},onComplete:function(){o.remove(t),i()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,n=[];for(t in arguments[0])n.push(t);for(var i=0,r=n.length;i<r;i++)t=n[i],e=i!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var r,o=this;e=e.toString(),n=n?fabric.util.object.clone(n):{},~t.indexOf(".")&&(r=t.split("."));var s=r?this.get(r[0])[r[1]]:this.get(t);"from"in n||(n.from=s),e=~e.indexOf("=")?s+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(e){r?o[r[0]][r[1]]=e:o.set(t,e),i||n.onChange&&n.onChange()},onComplete:function(){i||(o.setCoords(),n.onComplete&&n.onComplete())}})}}),function(t){function e(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(n)){case s:return Math.min(this.get(i),this.get(r));case a:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}var n=t.fabric||(t.fabric={}),i=n.util.object.extend,r={x1:1,x2:1,y1:1,y2:1},o=n.StaticCanvas.supports("setLineDash");n.Line?n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var n=this.getCenterPoint();t.translate(n.x-this.strokeWidth/2,n.y-this.strokeWidth/2)}(!this.strokeDashArray||this.strokeDashArray&&o)&&(n=this.calcLinePoints(),t.moveTo(n.x1,n.y1),t.lineTo(n.x2,n.y2)),t.lineWidth=this.strokeWidth,n=t.strokeStyle,t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),n.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1;return{x1:t*this.width*.5,x2:t*this.width*-.5,y1:e*this.height*.5,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),n={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(n=this.calcLinePoints()),e.push("<line ",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["x1","y1","x2","y2"]),n.Line.fromElement=function(t,e){var r=n.parseAttributes(t,n.Line.ATTRIBUTE_NAMES);return new n.Line([r.x1||0,r.y1||0,r.x2||0,r.y2||0],i(r,e))},n.Line.fromObject=function(t){return new n.Line([t.x1,t.y1,t.x2,t.y2],t)})}(exports),function(t){var e=t.fabric||(t.fabric={}),n=Math.PI,i=e.util.object.extend;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return i(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0,o=(this.endAngle-this.startAngle)%(2*n);return 0===o?(this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,r=this.top+this.radius),e.push("<circle ",'cx="'+i+'" cy="'+r+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')):e.push('<path d="M '+Math.cos(this.startAngle)*this.radius+" "+Math.sin(this.startAngle)*this.radius," A "+this.radius+" "+this.radius," 0 ",+(o>n?1:0)+" 1"," "+Math.cos(this.endAngle)*this.radius+" "+Math.sin(this.endAngle)*this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["cx","cy","r"]),e.Circle.fromElement=function(t,n){n||(n={});var r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in r&&0<=r.radius))throw Error("value of `r` attribute is require2d and can not be negative");return r.left=r.left||0,r.top=r.top||0,(r=new e.Circle(i(r,n))).left-=r.radius,r.top-=r.radius,r},e.Circle.fromObject=function(t){return new e.Circle(t)})}(exports),function(t){var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var n=this.width/2,i=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-n,i,0,-i,this.strokeDashArray),e.util.drawDashedLine(t,0,-i,n,i,this.strokeDashArray),e.util.drawDashedLine(t,n,i,-n,i,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.width/2,i=this.height/2;n=[-n+" "+i,"0 "+-i,n+" "+i].join();return e.push("<polygon ",'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Triangle.fromObject=function(t){return new e.Triangle(t)})}(exports),function(t){var e=t.fabric||(t.fabric={}),n=2*Math.PI,i=e.util.object.extend;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return i(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=0,i=0;return this.group&&"path-group"===this.group.type&&(n=this.left+this.rx,i=this.top+this.ry),e.push("<ellipse ",'cx="',n,'" cy="',i,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,n,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["cx","cy","rx","ry"]),e.Ellipse.fromElement=function(t,n){n||(n={});var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);return r.left=r.left||0,r.top=r.top||0,(r=new e.Ellipse(i(r,n))).top-=r.ry,r.left-=r.rx,r},e.Ellipse.fromObject=function(t){return new e.Ellipse(t)})}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?console.warn("fabric.Rect is already defined"):((t=e.Object.prototype.stateProperties.concat()).push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:t,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)t.fillRect(0,0,1,1);else{var n=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,s=e?this.left:-this.width/2,a=e?this.top:-this.height/2,l=0!==n||0!==i;t.beginPath(),t.moveTo(s+n,a),t.lineTo(s+r-n,a),l&&t.bezierCurveTo(s+r-.4477152502*n,a,s+r,a+.4477152502*i,s+r,a+i),t.lineTo(s+r,a+o-i),l&&t.bezierCurveTo(s+r,a+o-.4477152502*i,s+r-.4477152502*n,a+o,s+r-n,a+o),t.lineTo(s+n,a+o),l&&t.bezierCurveTo(s+.4477152502*n,a+o,s,a+o-.4477152502*i,s,a+o-i),t.lineTo(s,a+i),l&&t.bezierCurveTo(s,a+.4477152502*i,s+.4477152502*n,a,s+n,a),t.closePath(),this._renderFill(t),this._renderStroke(t)}},_renderDashedStroke:function(t){var n=-this.width/2,i=-this.height/2,r=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,n,i,n+r,i,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i,n+r,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i+o,n,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n,i+o,n,i,this.strokeDashArray),t.closePath()},toObject:function(t){return t=n(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0}),this.includeDefaultValues||this._removeDefaultValues(t),t},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.left,i=this.top;return this.group&&"path-group"===this.group.type||(n=-this.width/2,i=-this.height/2),e.push("<rect ",'x="',n,'" y="',i,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i){if(!t)return null;i=i||{};var r=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);return r.left=r.left||0,r.top=r.top||0,(r=new e.Rect(n(i?e.util.object.clone(i):{},r))).visible=0<r.width&&0<r.height,r},e.Rect.fromObject=function(t){return new e.Rect(t)})}(exports),function(t){var e=t.fabric||(t.fabric={});e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,n){return e.Polygon.prototype.initialize.call(this,t,n)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return e.Polygon.prototype._applyPointOffset.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t){e.Polygon.prototype.commonRender.call(this,t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var n,i;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)n=this.points[r],i=this.points[r+1]||n,e.util.drawDashedLine(t,n.x,n.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,n){if(!t)return null;n||(n={});var i=e.parsePointsAttribute(t.getAttribute("points")),r=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(i,e.util.object.extend(r,n))},e.Polyline.fromObject=function(t){return new e.Polyline(t.points,t,!0)})}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX)},_calcDimensions:function(){var t=this.points,e=i(t,"x"),n=i(t,"y"),o=r(t,"x");t=r(t,"y");this.width=o-e||0,this.height=t-n||0,this.minX=e||0,this.minY=n||0},_applyPointOffset:function(){this.points.forEach(function(t){t.x-=this.minX+this.width/2,t.y-=this.minY+this.height/2},this)},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],n=this._createBaseSVGMarkup(),i=0,r=this.points.length;i<r;i++)e.push(o(this.points[i].x,2),",",o(this.points[i].y,2)," ");return n.push("<",this.type," ",'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},_render:function(t){this.commonRender(t)&&(this._renderFill(t),this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t))},commonRender:function(t){var e,n=this.points.length;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0;i<n;i++)e=this.points[i],t.lineTo(e.x,e.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(r,n(o,i))},e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)})}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,s=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw Error("`path` argument is require2d");var n="[object Array]"===o.call(t);(this.path=n?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi))&&(n||(this.path=this._parsePath()),this._setPositionDimensions(),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(){var t=this._parseDimensions();this.minX=t.left,this.minY=t.top,this.width=t.width,this.height=t.height,t.left+="center"===this.originX?this.width/2:"right"===this.originX?this.width:0,t.top+="center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0,this.top=this.top||t.top,this.left=this.left||t.left,this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,n,i,r=null,o=0,a=0,l=0,c=0,u=0,h=0,d=-this.pathOffset.x,f=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=d=0),t.beginPath();for(var p=0,m=this.path.length;p<m;++p){switch((e=this.path[p])[0]){case"l":l+=e[1],c+=e[2],t.lineTo(l+d,c+f);break;case"L":l=e[1],c=e[2],t.lineTo(l+d,c+f);break;case"h":l+=e[1],t.lineTo(l+d,c+f);break;case"H":l=e[1],t.lineTo(l+d,c+f);break;case"v":c+=e[1],t.lineTo(l+d,c+f);break;case"V":c=e[1],t.lineTo(l+d,c+f);break;case"m":o=l+=e[1],a=c+=e[2],t.moveTo(l+d,c+f);break;case"M":o=l=e[1],a=c=e[2],t.moveTo(l+d,c+f);break;case"c":n=l+e[5],i=c+e[6],u=l+e[3],h=c+e[4],t.bezierCurveTo(l+e[1]+d,c+e[2]+f,u+d,h+f,n+d,i+f),l=n,c=i;break;case"C":l=e[5],c=e[6],u=e[3],h=e[4],t.bezierCurveTo(e[1]+d,e[2]+f,u+d,h+f,l+d,c+f);break;case"s":n=l+e[3],i=c+e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,l+e[1]+d,c+e[2]+f,n+d,i+f),u=l+e[1],h=c+e[2],l=n,c=i;break;case"S":n=e[3],i=e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"q":n=l+e[3],i=c+e[4],u=l+e[1],h=c+e[2],t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"Q":n=e[3],i=e[4],t.quadraticCurveTo(e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"t":n=l+e[1],i=c+e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"T":n=e[1],i=e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"a":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+l+d,e[7]+c+f]),l+=e[6],c+=e[7];break;case"A":s(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+f]),l=e[6],c=e[7];break;case"z":case"Z":l=o,c=a,t.closePath()}r=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return t=r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset}),this.sourcePath&&(t.sourcePath=this.sourcePath),this.transformMatrix&&(t.transformMatrix=this.transformMatrix),t},toDatalessObject:function(t){return t=this.toObject(t),this.sourcePath&&(t.path=this.sourcePath),delete t.sourcePath,t},toSVG:function(t){for(var e=[],n=this._createBaseSVGMarkup(),i="",r=0,o=this.path.length;r<o;r++)e.push(this.path[r].join(" "));return e=e.join(" "),this.group&&"path-group"===this.group.type||(i=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<path ",'d="',e,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),i,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(n.join("")):n.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,n,i=[],r=[],o=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,s=0,c=this.path.length;s<c;s++){for(n=(t=this.path[s]).slice(1).trim(),r.length=0;e=o.exec(n);)r.push(e[0]);t=[t.charAt(0)],n=0;for(var u=r.length;n<u;n++)e=parseFloat(r[n]),isNaN(e)||t.push(e);if(e=t[0],n=a[e.toLowerCase()],u=l[e]||e,t.length-1>n)for(var h=1,d=t.length;h<d;h+=n)i.push([e].concat(t.slice(h,h+n))),e=u;else i.push(t)}return i},_parseDimensions:function(){for(var t,r,o,s,a=[],l=[],c=null,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=this.path.length;g<v;++g){switch((t=this.path[g])[0]){case"l":d+=t[1],f+=t[2],s=[];break;case"L":d=t[1],f=t[2],s=[];break;case"h":d+=t[1],s=[];break;case"H":d=t[1],s=[];break;case"v":f+=t[1],s=[];break;case"V":f=t[1],s=[];break;case"m":u=d+=t[1],h=f+=t[2],s=[];break;case"M":u=d=t[1],h=f=t[2],s=[];break;case"c":r=d+t[5],o=f+t[6],p=d+t[3],m=f+t[4],s=e.util.getBoundsOfCurve(d,f,d+t[1],f+t[2],p,m,r,o),d=r,f=o;break;case"C":d=t[5],f=t[6],p=t[3],m=t[4],s=e.util.getBoundsOfCurve(d,f,t[1],t[2],p,m,d,f);break;case"s":r=d+t[3],o=f+t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,d+t[1],f+t[2],r,o),p=d+t[1],m=f+t[2],d=r,f=o;break;case"S":r=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,t[1],t[2],r,o),d=r,f=o,p=t[1],m=t[2];break;case"q":r=d+t[3],o=f+t[4],p=d+t[1],m=f+t[2],s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"Q":p=t[1],m=t[2],s=e.util.getBoundsOfCurve(d,f,p,m,p,m,t[3],t[4]),d=t[3],f=t[4];break;case"t":r=d+t[1],o=f+t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"T":r=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),s=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"a":s=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+f),d+=t[6],f+=t[7];break;case"A":s=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d=t[6],f=t[7];break;case"z":case"Z":d=u,f=h}c=t,s.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(d),l.push(f)}return{left:t=n(a),top:c=n(l),width:(u=i(a))-t,height:(h=i(l))-c}}}),e.Path.fromObject=function(t,n){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(i){i=i[0];var r=t.path;delete t.path,e.util.object.extend(i,t),i.setSourcePath(r),n(i)}):n(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){t=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES),n&&n(new e.Path(t.d,r(t,i)))},e.Path.async=!0)}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.invoke,r=e.Object.prototype.toObject;e.PathGroup?e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var n=this.paths.length;n--;)this.paths[n].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var n,i,r,o=[],s=[],a=this.transformMatrix,l=this.paths.length;l--;)for(i=(n=this.paths[l]).height+n.strokeWidth,r=n.width+n.strokeWidth,n=[{x:n.left,y:n.top},{x:n.left+r,y:n.top},{x:n.left,y:n.top+i},{x:n.left+r,y:n.top+i}],r=0;r<n.length;r++)i=n[r],a&&(i=e.util.transformPoint(i,a,!1)),o.push(i.x),s.push(i.y);t.width=Math.max.apply(null,o),t.height=Math.max.apply(null,s)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var n=0,i=this.paths.length;n<i;++n)this.paths[n].render(t,!0);this.clipTo&&t.restore(),this._removeShadow(t),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var n=this.paths.length;n--;)this.paths[n]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){return t=n(r.call(this,t),{paths:i(this.getObjects(),"toObject",t)}),this.sourcePath&&(t.sourcePath=this.sourcePath),t},toDatalessObject:function(t){return t=this.toObject(t),this.sourcePath&&(t.paths=this.sourcePath),t},toSVG:function(t){for(var e=this.getObjects(),n="translate("+(n=this.getPointByOrigin("left","top")).x+" "+n.y+")",i=(n=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n"],0),r=e.length;i<r;i++)n.push(e[i].toSVG(t));return n.push("</g>\n"),t?t(n.join("")):n.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(e){return(e.get("fill")||"").toLowerCase()===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,n){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(i){var r=t.paths;delete t.paths,i=e.util.groupSVGElements(i,t,r),n(i)}):e.util.enlivenObjects(t.paths,function(i){delete t.paths,n(new e.PathGroup(i,t))})},e.PathGroup.async=!0)}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.array.invoke;if(!e.Group){var s={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",initialize:function(t,e){e=e||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},this.callSuper("initialize"),e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(t){var e=t.getLeft(),n=t.getTop(),i=this.getCenterPoint();t.set({originalLeft:e,originalTop:n,left:e-i.x,top:n-i.y}),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),t&&(this._objects.push(t),t.group=this),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._moveFlippedObject(t),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties)for(var n=this._objects.length;n--;)this._objects[n].set(t,e);this.callSuper("_set",t,e)},toObject:function(t){return n(this.callSuper("toObject",t),{objects:o(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.clipTo&&e.util.clipContext(this,t),this.transform(t);for(var n=0,i=this._objects.length;n<i;n++)this._renderObject(this._objects[n],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var n=0,i=this._objects.length;n<i;n++)this._objects[n]._renderControls(t)},_renderObject:function(t,e){var n=t.hasRotatingPoint;t.visible&&(t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=n)},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){return this._moveFlippedObject(t),this._setObjectPosition(t),t},_moveFlippedObject:function(t){var e=t.get("originX"),n=t.get("originY"),i=t.getCenterPoint();return t.set({originX:"center",originY:"center",left:i.x,top:i.y}),this._toggleFlipping(t),i=t.getPointByOrigin(e,n),t.set({originX:e,originY:n,left:i.x,top:i.y}),this},_toggleFlipping:function(t){this.flipX&&(t.toggle("flipX"),t.set("left",-t.get("left")),t.setAngle(-t.getAngle())),this.flipY&&(t.toggle("flipY"),t.set("top",-t.get("top")),t.setAngle(-t.getAngle()))},_restoreObjectState:function(t){return this._setObjectPosition(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},_setObjectPosition:function(t){var e=this.getCenterPoint(),n=this._getRotatedLeftTop(t);t.set({angle:t.getAngle()+this.getAngle(),left:e.x+n.left,top:e.y+n.top,scaleX:t.get("scaleX")*this.get("scaleX"),scaleY:t.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(t){var e=this.getAngle()*(Math.PI/180);return{left:-Math.sin(e)*t.getTop()*this.get("scaleY")+Math.cos(e)*t.getLeft()*this.get("scaleX"),top:Math.cos(e)*t.getTop()*this.get("scaleY")+Math.sin(e)*t.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,n,i=[],r=[],o=["tr","br","bl","tl"],s=0,a=this._objects.length;s<a;++s){(e=this._objects[s]).setCoords();for(var l=0;l<o.length;l++)n=o[l],i.push(e.oCoords[n].x),r.push(e.oCoords[n].y)}this.set(this._getBounds(i,r,t))},_getBounds:function(t,n,o){var s=e.util.invertTransform(this.getViewportTransform()),a=e.util.transformPoint(new e.Point(i(t),i(n)),s);return t={width:(t=e.util.transformPoint(new e.Point(r(t),r(n)),s)).x-a.x||0,height:t.y-a.y||0},o||(t.left=a.x||0,t.top=a.y||0,"center"===this.originX&&(t.left+=t.width/2),"right"===this.originX&&(t.left+=t.width),"center"===this.originY&&(t.top+=t.height/2),"bottom"===this.originY&&(t.top+=t.height)),t},toSVG:function(t){for(var e=["<g ",'transform="',this.getSvgTransform(),'">\n'],n=0,i=this._objects.length;n<i;n++)e.push(this._objects[n].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in s){if(this[t])return this[t];for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,n){e.util.enlivenObjects(t.objects,function(i){delete t.objects,n&&n(new e.Group(i,t))})},e.Group.async=!0}}(exports),function(t){var e=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e),this._initConfig(e),e.filters&&(this.filters=e.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(t,e,n){return this._originalElement=this._element=t,this._initConfig(n),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){t.save(),this._setStrokeStyles(t),t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){return e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()}),crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice})},toSVG:function(t){var e=[],n=-this.width/2,i=-this.height/2,r="none";return this.group&&"path-group"===this.group.type&&(n=this.left,i=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',n,'" y="',i,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),(this.stroke||this.strokeDashArray)&&(r=this.fill,this.fill=null,e.push("<rect ",'x="',n,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=r),e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},setSrc:function(t,e,n){fabric.util.loadImage(t,function(t){return this.setElement(t,e,n)},this,n&&n.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,n,i){if(e=e||this.filters,n=n||this._originalElement){var r=n,o=fabric.util.createCanvasElement(),s=fabric.util.createImage(),a=this;return o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),0===e.length?(this._element=n,t&&t(),o):(e.forEach(function(t){t&&t.applyTo(o,t.scaleX||a.scaleX,t.scaleY||a.scaleY),!i&&t&&"Resize"===t.type&&(a.width*=t.scaleX,a.height*=t.scaleY)}),s.width=o.width,s.height=o.height,fabric.isLikelyNode?(s.src=o.toBuffer(void 0,fabric.Image.pngCompression),a._element=s,!i&&(a._filteredEl=s),t&&t()):(s.onload=function(){a._element=s,!i&&(a._filteredEl=s),t&&t(),s.onload=o=r=null},s.src=o.toDataURL("image/png")),o)}},_render:function(t,e){var n,i,r,o=this._findMargins();n=e?this.left:-this.width/2,i=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(n,i,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,n+o.marginX,i+o.marginY,o.width,o.height),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t=this.width,e=this.height,n=0,i=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),t=this._element.width*e,e*=this._element.height,"Mid"===this.alignX&&(n=(this.width-t)/2),"Max"===this.alignX&&(n=this.width-t),"Mid"===this.alignY&&(i=(this.height-e)/2),"Max"===this.alignY&&(i=this.height-e)),{width:t,height:e,marginX:n,marginY:i}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t.filters&&t.filters.length?fabric.util.enlivenObjects(t.filters,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()&&this.getElement().width||0,this.height="height"in t?t.height:this.getElement()&&this.getElement().height||0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(n){fabric.Image.prototype._initFilters.call(t,t,function(i){t.filters=i||[],i=new fabric.Image(n,t),e&&e(i)})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,n){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,n))},null,n&&n.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,n,i){var r,o="xMidYMid",s="meet";(t=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES)).preserveAspectRatio&&(r=t.preserveAspectRatio.split(" ")),r&&r.length&&("meet"!==(s=r.pop())&&"slice"!==s?(o=s,s="meet"):r.length&&(o=r.pop())),r="none"!==o?o.slice(1,4):"none",o="none"!==o?o.slice(5,8):"none",t.alignX=r,t.alignY=o,t.meetOrSlice=s,fabric.Image.fromURL(t["xlink:href"],n,e(i?fabric.util.object.clone(i):{},t))},fabric.Image.async=!0,fabric.Image.pngCompression=1)}(exports),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),i()},onComplete:function(){r.setCoords(),n()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),n=(t=e.getImageData(0,0,t.width,t.height)).data,i=this.brightness,r=0,o=n.length;r<o;r+=4)n[r]+=i,n[r+1]+=i,n[r+2]+=i;e.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0],this.tmpCtx=e.util.createCanvasElement().getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){var e=this.matrix,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height);t=Math.round(Math.sqrt(e.length));for(var r=Math.floor(t/2),o=i.data,s=i.width,a=(i=i.height,this._createImageData(s,i)),l=a.data,c=this.opaque?1:0,u=0;u<i;u++)for(var h=0;h<s;h++){for(var d=u,f=h,p=4*(u*s+h),m=0,g=0,v=0,y=0,b=0;b<t;b++)for(var _=0;_<t;_++){var w=d+b-r,S=f+_-r;0>w||w>i||0>S||S>s||(w=4*(w*s+S),S=e[b*t+_],m+=o[w]*S,g+=o[w+1]*S,v+=o[w+2]*S,y+=o[w+3]*S)}l[p]=m,l[p+1]=g,l[p+2]=v,l[p+3]=y+c*(255-y)}n.putImageData(a,0,0)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),n=(t=e.getImageData(0,0,t.width,t.height)).data,i=this.threshold,r=n.length,o=0,s=n.length;o<s;o+=4)n[o+3]=i+255*(r-o)/r;e.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,n=t.getContext("2d"),i=(t=n.getImageData(0,0,t.width,t.height)).data,r=t.width*t.height*4,o=0;o<r;)e=(i[o]+i[o+1]+i[o+2])/3,i[o]=e,i[o+1]=e,i[o+2]=e,o+=4;n.putImageData(t,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,n=t.getContext("2d"),i=(t=n.getImageData(0,0,t.width,t.height)).data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2];n.putImageData(t,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=-1<[0,1,2,3].indexOf(t.channel)?t.channel:0},applyTo:function(t){if(this.mask){var n=t.getContext("2d"),i=(t=n.getImageData(0,0,t.width,t.height)).data,r=this.mask.getElement(),o=e.util.createCanvasElement(),s=this.channel,a=t.width*t.height*4;for(o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),o=o.getContext("2d").getImageData(0,0,r.width,r.height).data,r=0;r<a;r+=4)i[r+3]=o[r+s];n.putImageData(t,0,0)}},toObject:function(){return n(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,n){e.util.loadImage(t.mask.src,function(i){t.mask=new e.Image(i,t.mask),n&&n(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,n=t.getContext("2d"),i=(t=n.getImageData(0,0,t.width,t.height)).data,r=this.noise,o=0,s=i.length;o<s;o+=4)e=(.5-Math.random())*r,i[o]+=e,i[o+1]+=e,i[o+2]+=e;n.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,n,i,r,o,s,a,l=t.getContext("2d"),c=(t=l.getImageData(0,0,t.width,t.height)).data,u=t.height,h=t.width;for(n=0;n<u;n+=this.blocksize)for(i=0;i<h;i+=this.blocksize){r=c[e=4*n*h+4*i],o=c[e+1],s=c[e+2],a=c[e+3];for(var d=n,f=n+this.blocksize;d<f;d++)for(var p=i,m=i+this.blocksize;p<m;p++)c[e=4*d*h+4*p]=r,c[e+1]=o,c[e+2]=s,c[e+3]=a}l.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,n,i,r=t.getContext("2d"),o=(t=r.getImageData(0,0,t.width,t.height)).data,s=this.distance,a=255-this.threshold,l=Math.abs,c=0,u=o.length;c<u;c+=4)e=o[c],n=o[c+1],i=o[c+2],e>a&&n>a&&i>a&&l(e-n)<s&&l(e-i)<s&&l(n-i)<s&&(o[c+3]=1);r.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,n,i=t.getContext("2d"),r=(t=i.getImageData(0,0,t.width,t.height)).data,o=r.length;for(e=0;e<o;e+=4)n=.3*r[e]+.59*r[e+1]+.11*r[e+2],r[e]=n+100,r[e+1]=n+50,r[e+2]=n+255;i.putImageData(t,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,n,i,r,o=t.getContext("2d"),s=(t=o.getImageData(0,0,t.width,t.height)).data,a=s.length;for(e=0;e<a;e+=4)n=s[e],i=s[e+1],r=s[e+2],s[e]=(.393*n+.769*i+.189*r)/1.351,s[e+1]=(.349*n+.686*i+.168*r)/1.203,s[e+2]=(.272*n+.534*i+.131*r)/2.14;o.putImageData(t,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var n,i,r,o,s,a,l,c,u=t.getContext("2d"),h=(t=u.getImageData(0,0,t.width,t.height)).data,d=h.length;for(i=(n=new e.Color(this.color).getSource())[0]*this.opacity,r=n[1]*this.opacity,o=n[2]*this.opacity,c=1-this.opacity,n=0;n<d;n+=4)s=h[n],a=h[n+1],l=h[n+2],h[n]=i+s*c,h[n+1]=r+a*c,h[n+2]=o+l*c;u.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var n,i,r=t.getContext("2d"),o=(t=r.getImageData(0,0,t.width,t.height)).data,s=o.length;for(i=new e.Color(this.color).getSource(),n=0;n<s;n+=4)o[n]*=i[0]/255,o[n+1]*=i[1]/255,o[n+2]*=i[2]/255;r.putImageData(t,0,0)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}(exports),function(t){var e=(true?exports:undefined).fabric;e.Image.filters.Blend=e.util.createClass({type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var n,i,r,o,s,a,l,c=t.getContext("2d"),u=(t=c.getImageData(0,0,t.width,t.height)).data,h=!1;this.image?(h=!0,(l=e.util.createCanvasElement()).width=this.image.width,l.height=this.image.height,(l=new e.StaticCanvas(l)).add(this.image),l=l.getContext("2d").getImageData(0,0,l.width,l.height).data):(n=(l=new e.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha);for(var d=0,f=u.length;d<f;d+=4)switch(o=u[d],s=u[d+1],a=u[d+2],h&&(n=l[d]*this.alpha,i=l[d+1]*this.alpha,r=l[d+2]*this.alpha),this.mode){case"multiply":u[d]=o*n/255,u[d+1]=s*i/255,u[d+2]=a*r/255;break;case"screen":u[d]=1-(1-o)*(1-n),u[d+1]=1-(1-s)*(1-i),u[d+2]=1-(1-a)*(1-r);break;case"add":u[d]=Math.min(255,o+n),u[d+1]=Math.min(255,s+i),u[d+2]=Math.min(255,a+r);break;case"diff":case"difference":u[d]=Math.abs(o-n),u[d+1]=Math.abs(s-i),u[d+2]=Math.abs(a-r);break;case"subtract":o-=n,s-=i,a-=r,u[d]=0>o?0:o,u[d+1]=0>s?0:s,u[d+2]=0>a?0:a;break;case"darken":u[d]=Math.min(o,n),u[d+1]=Math.min(s,i),u[d+2]=Math.min(a,r);break;case"lighten":u[d]=Math.max(o,n),u[d+1]=Math.max(s,i),u[d+2]=Math.max(a,r)}c.putImageData(t,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}(),function(t){var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.max,a=Math.round,l=Math.sin,c=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,n){this.rcpScaleX=1/e,this.rcpScaleY=1/n;var i,r=t.width,o=t.height;e=a(r*e),n=a(o*n),"sliceHack"===this.resizeType&&(i=this.sliceByTwo(t,r,o,e,n)),"hermite"===this.resizeType&&(i=this.hermiteFastResize(t,r,o,e,n)),"bilinear"===this.resizeType&&(i=this.bilinearFiltering(t,r,o,e,n)),"lanczos"===this.resizeType&&(i=this.lanczosResize(t,r,o,e,n)),t.width=e,t.height=n,t.getContext("2d").putImageData(i,0,0)},sliceByTwo:function(t,n,r,o,a){var l,c=t.getContext("2d"),u=.5,h=.5,d=1,f=1,p=!1,m=!1,g=n,v=r,y=e.util.createCanvasElement(),b=y.getContext("2d");for(o=i(o),a=i(a),y.width=s(o,n),y.height=s(a,r),o>n&&(u=2,d=-1),a>r&&(h=2,f=-1),l=c.getImageData(0,0,n,r),t.width=s(o,n),t.height=s(a,r),c.putImageData(l,0,0);!p||!m;)n=g,r=v,o*d<i(g*u*d)?g=i(g*u):(g=o,p=!0),a*f<i(v*h*f)?v=i(v*h):(v=a,m=!0),l=c.getImageData(0,0,n,r),b.putImageData(l,0,0),c.clearRect(0,0,g,v),c.drawImage(y,0,0,n,r,0,0,g,v);return c.getImageData(0,0,o,a)},lanczosResize:function(t,e,s,a,u){var h,d,f,p;var m=(t=t.getContext("2d")).getImageData(0,0,e,s),g=t.getImageData(0,0,a,u),v=m.data,y=g.data,b=function(t){return function(e){if(e>t)return 0;if(e*=Math.PI,1e-16>o(e))return 1;var n=e/t;return l(e)*l(n)/e/n}}(this.lanczosLobes),_=this.rcpScaleX,w=this.rcpScaleY,S=2/this.rcpScaleX,x=2/this.rcpScaleY,C=c(_*this.lanczosLobes/2),k=c(w*this.lanczosLobes/2),T={};return d=h=p=f=void 0,function t(l){var c,m,M,E,A,I,$,D,L,P;for(h=i(f=(l+.5)*_),c=0;c<u;c++){for(d=i(p=(c+.5)*w),L=D=$=I=A=0,m=h-C;m<=h+C;m++)if(!(0>m||m>=e)){P=i(1e3*o(m-f)),T[P]||(T[P]={});for(var O=d-k;O<=d+k;O++)0>O||O>=s||(M=i(1e3*o(O-p)),T[P][M]||(T[P][M]=b(r(n(P*S,2)+n(M*x,2))/1e3)),0<(M=T[P][M])&&(A+=M,I+=M*v[E=4*(O*e+m)],$+=M*v[E+1],D+=M*v[E+2],L+=M*v[E+3]))}y[E=4*(c*a+l)]=I/A,y[E+1]=$/A,y[E+2]=D/A,y[E+3]=L/A}return++l<a?t(l):g}(0)},bilinearFiltering:function(t,e,n,r,o){var s,a,l,c,u,h,d,f=0,p=this.rcpScaleX,m=this.rcpScaleY;c=t.getContext("2d"),t=4*(e-1),n=c.getImageData(0,0,e,n).data;var g=c.getImageData(0,0,r,o),v=g.data;for(c=0;c<o;c++)for(u=0;u<r;u++)for(h=p*u-(a=i(p*u)),d=m*c-(l=i(m*c)),l=4*(l*e+a),a=0;4>a;a++)s=(s=n[l+a])*(1-h)*(1-d)+n[l+4+a]*h*(1-d)+n[l+t+a]*d*(1-h)+n[l+t+4+a]*h*d,v[f++]=s;return g},hermiteFastResize:function(t,e,n,s,a){var l=this.rcpScaleX,u=this.rcpScaleY,h=c(l/2),d=c(u/2);n=(t=t.getContext("2d")).getImageData(0,0,e,n).data;for(var f=(t=t.getImageData(0,0,s,a)).data,p=0;p<a;p++)for(var m=0;m<s;m++){for(var g=4*(m+p*s),v=0,y=0,b=0,_=0,w=0,S=0,x=0,C=(p+.5)*u,k=i(p*u);k<(p+1)*u;k++)for(var T=(m+.5)*l,M=(M=o(C-(k+.5))/d)*M,E=i(m*l);E<(m+1)*l;E++){var A=o(T-(E+.5))/h;1<(v=r(M+A*A))&&-1>v||0<(v=2*v*v*v-3*v*v+1)&&(x+=v*n[(A=4*(E+k*e))+3],b+=v,255>n[A+3]&&(v=v*n[A+3]/250),_+=v*n[A],w+=v*n[A+1],S+=v*n[A+2],y+=v)}f[g]=_/y,f[g+1]=w/y,f[g+2]=S/y,f[g+3]=x/b}return t},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaley:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(){return new e.Image.filters.Resize}}(exports),function(t){var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.StaticCanvas.supports("setLineDash");e.Text?e.warn("fabric.Text is already defined"):((t=e.Object.prototype.stateProperties.concat()).push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:t,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){if(!this.__skipDimension){t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this.text.split(this._reNewline),this._clearCache();var n=this.textAlign;this.textAlign="left",this.width=this._getTextWidth(t),this.textAlign=n,this.height=this._getTextHeight(t)}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){t.save(),this._translateForTextAlign(t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextFill(t),this._renderTextStroke(t),this._restoreCompositeOperation(t),this._removeShadow(t),t.restore()},_translateForTextAlign:function(t){"left"!==this.textAlign&&"justify"!==this.textAlign&&t.translate("center"===this.textAlign?this.width/2:this.width,0)},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._textLines.length*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),n=1,i=this._textLines.length;n<i;n++){var r=this._getLineWidth(t,n);r>e&&(e=r)}return e},_renderChars:function(t,e,n,i,r){e[t](n,i,r)},_renderTextLine:function(t,e,n,i,r,o){if(r-=this.fontSize*this._fontSizeFraction,"justify"!==this.textAlign)this._renderChars(t,e,n,i,r,o);else{var s=this._getLineWidth(e,o);if((a=this.width)>=s){s=n.split(/\s+/);for(var a=(a-(n=this._getWidthOfWords(e,n,o)))/(s.length-1),l=n=0,c=s.length;l<c;l++)this._renderChars(t,e,s[l],i+n,r,o),n+=e.measureText(s[l]).width+a}else this._renderChars(t,e,n,i,r,o)}},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(t){if(this.fill||this._skipFillStrokeCheck){for(var e=0,n=0,i=this._textLines.length;n<i;n++){var r=this._getHeightOfLine(t,n),o=r/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[n],this._getLeftOffset(),this._getTopOffset()+e+o,n),e+=r}this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t)}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var e=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var n=0,i=this._textLines.length;n<i;n++){var r=this._getHeightOfLine(t,n),s=r/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[n],this._getLeftOffset(),this._getTopOffset()+e+s,n),e+=r}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this._fontSizeMult*this.lineHeight},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t){var e=0,n=this._getHeightOfLine();if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var i=0,r=this._textLines.length;i<r;i++){if(""!==this._textLines[i]){var o=this._getLineWidth(t,i),s=this._getLineLeftOffset(o);t.fillRect(this._getLeftOffset()+s,this._getTopOffset()+e,o,this.fontSize*this._fontSizeMult)}e+=n}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__lineOffsets=[]},_shouldClearCache:function(){var t,e=!1;for(t in this._dimensionAffectingProps)this["__"+t]!==this[t]&&(this["__"+t]=this[t],e=!0);return e},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=t.measureText(this._textLines[e]).width,this.__lineWidths[e])},_renderTextDecoration:function(t){if(this.textDecoration){var e=this.height/2,n=[];if(-1<this.textDecoration.indexOf("underline")&&n.push(.85),-1<this.textDecoration.indexOf("line-through")&&n.push(.43),-1<this.textDecoration.indexOf("overline")&&n.push(-.12),0<n.length){var i,r,o,s,a=0;for(i=0,r=this._textLines.length;i<r;i++){var l=this._getLineWidth(t,i),c=this._getLineLeftOffset(l),u=this._getHeightOfLine(t,i);for(o=0,s=n.length;o<s;o++)t.fillRect(this._getLeftOffset()+c,a+(this._fontSizeMult-1+n[o])*this.fontSize-e,l,this.fontSize/15);a+=u}}}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),e||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},toObject:function(t){return t=n(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor}),this.includeDefaultValues||this._removeDefaultValues(t),t},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx);n=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e,n),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){return t=this._getHeightOfLine(t,0),{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:t}},_wrapSVGTextAndBg:function(t,e){t.push('\t<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" >',e.textSpans.join(""),"</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var n=[],i=[],r=0;this._setSVGBg(i);for(var o=0,s=this._textLines.length;o<s;o++)this.textBackgroundColor&&this._setSVGTextLineBg(i,o,e,t,r),this._setSVGTextLineText(o,n,r,e,t,i),r+=this._getHeightOfLine(this.ctx,o);return{textSpans:n,textBgRects:i}},_setSVGTextLineText:function(t,n,i,o,s){i=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-s+i-this.height/2,n.push('<tspan x="',r(o+this._getLineLeftOffset(this.__lineWidths[t]),4),'" ','y="',r(i,4),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>")},_setSVGTextLineBg:function(t,e,n,i,o){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',r(n+this._getLineLeftOffset(this.__lineWidths[e]),4),'" y="',r(o-this.height/2,4),'" width="',r(this.__lineWidths[e],4),'" height="',r(this._getHeightOfLine(this.ctx,e)/this.lineHeight,4),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,4),'" y="',r(-this.height/2,4),'" width="',r(this.width,4),'" height="',r(this.height,4),'"></rect>\n')},_getFillAttributes:function(t){var n=t&&"string"==typeof t?new e.Color(t):"";return n&&n.getSource()&&1!==n.getAlpha()?'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,n){if(!t)return null;var i=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);(n=e.util.object.extend(n?e.util.object.clone(n):{},i)).top=n.top||0,n.left=n.left||0,"dx"in i&&(n.left+=i.dx),"dy"in i&&(n.top+=i.dy),"fontSize"in n||(n.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),n.originX||(n.originX="left");i=t.textContent.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var r=0;return"left"===(i=new e.Text(i,n)).originX&&(r=i.getWidth()/2),"right"===i.originX&&(r=-i.getWidth()/2),i.set({left:i.getLeft()+r,top:i.getTop()-i.getHeight()/2+i.fontSize*(.18+i._fontSizeFraction)}),i},e.Text.fromObject=function(t){return new e.Text(t.text,i(t))},e.util.createAccessors(e.Text))}(exports),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_skipFillStrokeCheck:!1,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,_charWidthsCache:{},initialize:function(t,e){this.styles=e&&e.styles||{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__maxFontHeights=[],this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t,e=this.styles;for(t in e)for(var n in e[t])for(var i in e[t][n])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var n=[],i=t;i<e;i++)n.push(this.getSelectionStyles(i));return n}return n=this.get2DCursorLocation(t),this.styles[n.lineIndex]&&this.styles[n.lineIndex][n.charIndex]||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._clearCache(),this},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this.styles[n.lineIndex]||(this.styles[n.lineIndex]={}),this.styles[n.lineIndex][n.charIndex]||(this.styles[n.lineIndex][n.charIndex]={}),fabric.util.object.extend(this.styles[n.lineIndex][n.charIndex],e)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active){var t,e,n=this.text.split("");this.canvas.contextTop?((e=this.canvas.contextTop).save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e)):(e=this.ctx).save(),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(n,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(n,"selection"),this.renderSelection(n,t,e)),e.restore()}},get2DCursorLocation:function(t){return void 0===t&&(t=this.selectionStart),{lineIndex:(t=this.text.slice(0,t).split(this._reNewline)).length-1,charIndex:t[t.length-1].length}},getCurrentCharStyle:function(t,e){var n=this.styles[t]&&this.styles[t][0===e?0:e-1];return{fontSize:n&&n.fontSize||this.fontSize,fill:n&&n.fill||this.fill,textBackgroundColor:n&&n.textBackgroundColor||this.textBackgroundColor,textDecoration:n&&n.textDecoration||this.textDecoration,fontFamily:n&&n.fontFamily||this.fontFamily,fontWeight:n&&n.fontWeight||this.fontWeight,fontStyle:n&&n.fontStyle||this.fontStyle,stroke:n&&n.stroke||this.stroke,strokeWidth:n&&n.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fontSize||this.fontSize},getCurrentCharColor:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fill||this.cursorColor},_getCursorBoundaries:function(t,e){var n=Math.round(this._getLeftOffset()),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){for(var n=0,i=0,r=0,o=0,s=0,a=0;a<this.selectionStart;a++)"\n"===t[a]?(s=0,o+=this._getHeightOfLine(this.ctx,i),i++,r=0):(s+=this._getWidthOfChar(this.ctx,t[a],i,r),r++),n=this._getCachedLineOffset(i);return"cursor"===e&&(o+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,i)/this.lineHeight-this.getCurrentCharFontSize(i,r)*(1-this._fontSizeFraction)),{top:o,left:s,lineLeft:n}},_getCachedLineOffset:function(t){var e=this._getLineWidth(this.ctx,t);return this.__lineOffsets[t]||(this.__lineOffsets[t]=this._getLineLeftOffset(e))},renderCursor:function(t,e){var n=(i=this.get2DCursorLocation()).lineIndex,i=i.charIndex,r=this.getCurrentCharFontSize(n,i),o=0===n&&0===i?this._getCachedLineOffset(n):t.leftOffset;e.fillStyle=this.getCurrentCharColor(n,i),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+o,t.top+t.topOffset,this.cursorWidth/this.scaleX,r)},renderSelection:function(t,e,n){n.fillStyle=this.selectionColor,t=this.get2DCursorLocation(this.selectionStart);for(var i=this.get2DCursorLocation(this.selectionEnd),r=t.lineIndex,o=i.lineIndex,s=r;s<=o;s++){var a=this._getCachedLineOffset(s)||0,l=this._getHeightOfLine(this.ctx,s),c=0,u=this._textLines[s];if(s===r)for(var h=0,d=u.length;h<d;h++)h>=t.charIndex&&(s!==o||h<i.charIndex)&&(c+=this._getWidthOfChar(n,u[h],s,h)),h<t.charIndex&&(a+=this._getWidthOfChar(n,u[h],s,h));else if(s>r&&s<o)c+=this._getLineWidth(n,s)||5;else if(s===o)for(h=0,d=i.charIndex;h<d;h++)c+=this._getWidthOfChar(n,u[h],s,h);n.fillRect(e.left+a,e.top+e.topOffset,c,l),e.topOffset+=l}},_renderChars:function(t,e,n,i,r,o){if(this.isEmptyStyles())return this._renderCharsFast(t,e,n,i,r);this.skipTextAlign=!0,i-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var s=this._getHeightOfLine(e,o),a=this._getCachedLineOffset(o);n=n.split("");var l,c="";i+=a||0,e.save(),r-=s/this.lineHeight*this._fontSizeFraction;a=0;for(var u=n.length;a<=u;a++){l=l||this.getCurrentCharStyle(o,a);var h=this.getCurrentCharStyle(o,a+1);(this._hasStyleChanged(l,h)||a===u)&&(this._renderChar(t,e,o,a-1,c,i,r,s),c="",l=h),c+=n[a]}e.restore()},_renderCharsFast:function(t,e,n,i,r){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,n,i,r),"strokeText"===t&&(this.stroke&&0<this.strokeWidth||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,n,i,r)},_renderChar:function(t,e,n,i,r,o,s,a){var l;if(a=this._fontSizeFraction*a/this.lineHeight,this.styles&&this.styles[n]&&(l=this.styles[n][i])){var c=l.stroke||this.stroke,u=l.fill||this.fill;e.save(),t=this._applyCharStylesGetWidth(e,r,n,i,l),n=this._getHeightOfChar(e,r,n,i),u&&e.fillText(r,o,s),c&&e.strokeText(r,o,s),this._renderCharDecoration(e,l,o,s,a,t,n),e.restore(),e.translate(t,0)}else"strokeText"===t&&this.stroke&&e[t](r,o,s),"fillText"===t&&this.fill&&e[t](r,o,s),t=this._applyCharStylesGetWidth(e,r,n,i),this._renderCharDecoration(e,null,o,s,a,t,this.fontSize),e.translate(e.measureText(r).width,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,n,i,r,o,s){(e=e&&e.textDecoration||this.textDecoration)&&(-1<e.indexOf("underline")&&t.fillRect(n,i+s/10,o,s/15),-1<e.indexOf("line-through")&&t.fillRect(n,i-s*(this._fontSizeFraction+this._fontSizeMult-1)+s/15,o,s/15),-1<e.indexOf("overline")&&t.fillRect(n,i-(this._fontSizeMult-this._fontSizeFraction)*s,o,s/15))},_renderTextLine:function(t,e,n,i,r,o){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,n,i,r,o)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styles){t.save(),this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor);for(var e=0,n=0,i=this._textLines.length;n<i;n++){var r=this._getHeightOfLine(t,n);if(""!==this._textLines[n]){var o=this._getLineWidth(t,n),s=this._getCachedLineOffset(n);if(this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor,t.fillRect(this._getLeftOffset()+s,this._getTopOffset()+e,o,r/this.lineHeight)),this.styles[n]){o=0;for(var a=this._textLines[n].length;o<a;o++)if(this.styles[n]&&this.styles[n][o]&&this.styles[n][o].textBackgroundColor){var l=this._textLines[n][o];t.fillStyle=this.styles[n][o].textBackgroundColor,t.fillRect(this._getLeftOffset()+s+this._getWidthOfCharsAt(t,n,o),this._getTopOffset()+e,this._getWidthOfChar(t,l,n,o)+1,r/this.lineHeight)}}}e+=r}t.restore()}},_getCacheProp:function(t,e){return t+e.fontFamily+e.fontSize+e.fontWeight+e.fontStyle+e.shadow},_applyCharStylesGetWidth:function(e,n,i,r,o){return i=(i=o||this.styles[i]&&this.styles[i][r])?t(i):{},this._applyFontStyles(i),r=this._getCacheProp(n,i),this.isEmptyStyles()&&this._charWidthsCache[r]&&this.caching?this._charWidthsCache[r]:("string"==typeof i.shadow&&(i.shadow=new fabric.Shadow(i.shadow)),o=i.fill||this.fill,e.fillStyle=o.toLive?o.toLive(e,this):o,i.stroke&&(e.strokeStyle=i.stroke&&i.stroke.toLive?i.stroke.toLive(e,this):i.stroke),e.lineWidth=i.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(i),this._setShadow.call(i,e),this.caching?(this._charWidthsCache[r]||(this._charWidthsCache[r]=e.measureText(n).width),this._charWidthsCache[r]):e.measureText(n).width)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,n){return this.styles[e]&&this.styles[e][n]?t(this.styles[e][n]):{}},_getWidthOfChar:function(t,e,n,i){if("justify"===this.textAlign&&/\s/.test(e))return this._getWidthOfSpace(t,n);var r=this._getStyleDeclaration(n,i);return this._applyFontStyles(r),r=this._getCacheProp(e,r),this._charWidthsCache[r]&&this.caching?this._charWidthsCache[r]:t?(t.save(),e=this._applyCharStylesGetWidth(t,e,n,i),t.restore(),e):void 0},_getHeightOfChar:function(t,e,n,i){return this.styles[n]&&this.styles[n][i]&&this.styles[n][i].fontSize||this.fontSize},_getHeightOfCharAt:function(t,e,n){return this._getHeightOfChar(t,this._textLines[e][n],e,n)},_getWidthOfCharsAt:function(t,e,n){var i,r,o=0;for(i=0;i<n;i++)r=this._textLines[e][i],o+=this._getWidthOfChar(t,r,e,i);return o},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=this._getWidthOfCharsAt(t,e,this._textLines[e].length),this.__lineWidths[e])},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var n=this._textLines[e],i=this._getWidthOfWords(t,n,e);n=(i=this.width-i)/(n=n.length-n.replace(/\s+/g,"").length);return this.__widthOfSpace[e]=n},_getWidthOfWords:function(t,e,n){for(var i=0,r=0;r<e.length;r++){var o=e[r];o.match(/\s/)||(i+=this._getWidthOfChar(t,o,n,r))}return i},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],i=this._getHeightOfChar(t,n[0],e,0),r=1,o=n.length;r<o;r++){var s=this._getHeightOfChar(t,n[r],e,r);s>i&&(i=s)}return this.__maxFontHeights[e]=i,this.__lineHeights[e]=i*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=0,n=0,i=this._textLines.length;n<i;n++)e+=this._getHeightOfLine(t,n);return e},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles)})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t))})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&(t.canvas.clearContext(t.canvas.contextTop||t.ctx),t.renderCursorOrSelection())},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this;t=t?0:this.cursorDelay,this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),this._currentCursorOpacity=1,this.canvas&&(this.canvas.clearContext(this.canvas.contextTop||this.ctx),this.renderCursorOrSelection()),this._cursorTimeout2&&clearTimeout(this._cursorTimeout2),this._cursorTimeout2=setTimeout(function(){e._tick()},t)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n--;for(;/\S/.test(this.text.charAt(n))&&-1<n;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n++;for(;/\S/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this.text.charAt(n))&&-1<n;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=0,e=0,n=this.getSelectedText().split(""),i=n.length;e<i;e++)"\n"===n[e]&&t++;return t},searchWordBoundary:function(t,e){for(var n=this._reSpace.test(this.text.charAt(t))?t-1:t,i=this.text.charAt(n),r=/[ \n\.,;!\?\-]/;!r.test(i)&&0<n&&n<this.text.length;)n+=e,i=this.text.charAt(n);return r.test(i)&&"\n"!==i&&(n+=1===e?0:1),n},selectWord:function(t){var e=this.searchWordBoundary(t,-1);t=this.searchWordBoundary(t,1),this.setSelectionStart(e),this.setSelectionEnd(t)},selectLine:function(t){var e=this.findLineBoundaryLeft(t);t=this.findLineBoundaryRight(t),this.setSelectionStart(e),this.setSelectionEnd(t)},enterEditing:function(){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){var t=this;this.canvas.on("mouse:move",function(e){t.__isMousedown&&t.isEditing&&((e=t.getSelectionStartFromPointer(e.e))>=t.__selectionStartOnMouseDown?(t.setSelectionStart(t.__selectionStartOnMouseDown),t.setSelectionEnd(e)):(t.setSelectionStart(e),t.setSelectionEnd(t.__selectionStartOnMouseDown)))})},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd)},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){return this.isEditing=this.selected=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&this.canvas.fire("text:editing:exited",{target:this}),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(var n=e;n!==t;){var i=this.get2DCursorLocation(n).charIndex;n--,(i=this.get2DCursorLocation(n).charIndex>i)?this.removeStyleObject(i,n+1):this.removeStyleObject(0===this.get2DCursorLocation(n).charIndex,n)}this.text=this.text.slice(0,t)+this.text.slice(e),this._clearCache()},insertChars:function(t,e){var n="\n"===this.text.slice(this.selectionStart,this.selectionStart+1);this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this.selectionStart===this.selectionEnd&&this.insertStyleObjects(t,n,e),this.setSelectionStart(this.selectionStart+t.length),this.setSelectionEnd(this.selectionStart),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},insertNewlineStyleObject:function(e,n,i){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var r=this.styles[e][n-1],o={};if(i)o[0]=t(r);else for(var s in this.styles[e])parseInt(s,10)>=n&&(o[parseInt(s,10)-n]=this.styles[e][s],delete this.styles[e][s]);this.styles[e+1]=o,this._clearCache()},insertCharStyleObject:function(e,n,i){var r=this.styles[e],o=t(r);for(var s in 0!==n||i||(n=1),o){var a=parseInt(s,10);a>=n&&(r[a+1]=o[a])}this.styles[e][n]=i||t(r[n-1]),this._clearCache()},insertStyleObjects:function(t,e,n){var i=(r=this.get2DCursorLocation()).lineIndex,r=r.charIndex;this.styles[i]||(this.styles[i]={}),"\n"===t?this.insertNewlineStyleObject(i,r,e):n?this._insertStyles(this.copiedStyles):this.insertCharStyleObject(i,r)},_insertStyles:function(t){for(var e=0,n=t.length;e<n;e++){var i=this.get2DCursorLocation(this.selectionStart+e);this.insertCharStyleObject(i.lineIndex,i.charIndex,t[e])}},shiftLineStyles:function(e,n){var i,r=t(this.styles);for(i in this.styles){var o=parseInt(i,10);o>e&&(this.styles[o+n]=r[o])}},removeStyleObject:function(e,n){var i=(r=this.get2DCursorLocation(n)).lineIndex,r=r.charIndex;if(e){var o=(o=this._textLines[i-1])?o.length:0;for(r in this.styles[i-1]||(this.styles[i-1]={}),this.styles[i])this.styles[i-1][parseInt(r,10)+o]=this.styles[i][r];this.shiftLineStyles(i,-1)}else{(i=this.styles[i])&&delete i[r+(this.selectionStart===this.selectionEnd?-1:0)];var s=t(i);for(o in s){var a=parseInt(o,10);a>=r&&0!==a&&(i[a-1]=s[a],delete i[a])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return 500>this.__newClickTime-this.__lastClickTime&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return 500>this.__newClickTime-this.__lastClickTime&&500>this.__lastClickTime-this.__lastLastClickTime&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))})},_isObjectMoved:function(t){return t=this.canvas.getPointer(t),this.__mousedownX!==t.x||this.__mousedownY!==t.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this._isObjectMoved(t.e)||(this.__lastSelected&&(this.enterEditing(),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},_getLocalRotatedPointer:function(t){var e=this.canvas.getPointer(t),n=(e=new fabric.Point(e.x,e.y),new fabric.Point(this.left,this.top));e=fabric.util.rotatePoint(e,n,fabric.util.degreesToRadians(-this.angle));return this.getLocalPointer(t,e)},getSelectionStartFromPointer:function(t){t=this._getLocalRotatedPointer(t);for(var e,n=0,i=0,r=0,o=0,s=0,a=this._textLines.length;s<a;s++){e=this._textLines[s].split(""),r+=this._getHeightOfLine(this.ctx,s)*this.scaleY,i=this._getLineWidth(this.ctx,s),i=this._getLineLeftOffset(i)*this.scaleX,this.flipX&&(this._textLines[s]=e.reverse().join(""));for(var l=0,c=e.length;l<c;l++){var u=e[l];n=i,i=i+this._getWidthOfChar(this.ctx,u,s,this.flipX?c-l:l)*this.scaleX;if(!(r<=t.y||i<=t.x))return this._getNewSelectionStartFromOffset(t,n,i,o+s,c);o++}if(t.y<r)return this._getNewSelectionStartFromOffset(t,n,i,o+s,c)}return this.text.length},_getNewSelectionStartFromOffset:function(t,e,n,i,r){return t=i+(n-t.x>t.x-e?0:1),this.flipX&&(t=r-t),t>this.text.length&&(t=this.text.length),t}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.style.cssText="position: fixed; bottom: 20px; left: 0px; opacity: 0; width: 0px; height: 0px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keypress",this.onKeyPress.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMap:{65:"selectAll",88:"cut"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMap&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMap[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},forwardDelete:function(t){this.selectionStart===this.selectionEnd&&this.moveCursorRight(t),this.removeChars(t)},copy:function(t){var e=this.getSelectedText();(t=this._getClipboardData(t))&&t.setData("text",e),this.copiedText=e,this.copiedStyles=this.getSelectionStyles(this.selectionStart,this.selectionEnd)},paste:function(t){var e;(e=(t=this._getClipboardData(t))?t.getData("text"):this.copiedText)&&this.insertChars(e,!0)},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(),this.removeChars(t))},_getClipboardData:function(t){return t&&(t.clipboardData||fabric.window.clipboardData)},onKeyPress:function(t){!this.isEditing||t.metaKey||t.ctrlKey||(0!==t.which&&this.insertChars(String.fromCharCode(t.which)),t.stopPropagation())},getDownCursorOffset:function(t,e){var n=e?this.selectionEnd:this.selectionStart,i=this.text.slice(0,n),r=this.text.slice(n),o=i.slice(i.lastIndexOf("\n")+1),s=(i=r.match(/(.*)\n?/)[1],r=(r.match(/.*\n(.*)\n?/)||{})[1]||"",this.get2DCursorLocation(n));if(s.lineIndex===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-n;n=this._getLineWidth(this.ctx,s.lineIndex);for(var a=this._getLineLeftOffset(n),l=s.lineIndex,c=0,u=o.length;c<u;c++)n=o[c],a+=this._getWidthOfChar(this.ctx,n,l,c);return o=this._getIndexOnNextLine(s,r,a),i.length+1+o},_getIndexOnNextLine:function(t,e,n){t=t.lineIndex+1;for(var i,r=this._getLineWidth(this.ctx,t),o=(r=this._getLineLeftOffset(r),0),s=0,a=e.length;s<a;s++){var l=this._getWidthOfChar(this.ctx,e[s],t,s);if((r=r+l)>n){i=!0,o=Math.abs(r-n)<Math.abs(r-l-n)?s+1:s;break}}return i||(o=e.length),o},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var n=e?this.selectionEnd:this.selectionStart,i=this.get2DCursorLocation(n);if(0===i.lineIndex||t.metaKey||33===t.keyCode)return n;n=(o=this.text.slice(0,n)).slice(o.lastIndexOf("\n")+1);var r,o=(o.match(/\n?(.*)\n.*$/)||{})[1]||"";r=this._getLineWidth(this.ctx,i.lineIndex);for(var s=this._getLineLeftOffset(r),a=i.lineIndex,l=0,c=n.length;l<c;l++)r=n[l],s+=this._getWidthOfChar(this.ctx,r,a,l);return i=this._getIndexOnPrevLine(i,o,s),o.length-i+n.length},_getIndexOnPrevLine:function(t,e,n){t=t.lineIndex-1;for(var i,r=this._getLineWidth(this.ctx,t),o=(r=this._getLineLeftOffset(r),0),s=0,a=e.length;s<a;s++){var l=this._getWidthOfChar(this.ctx,e[s],t,s);if((r=r+l)>n){i=!0,o=Math.abs(r-n)<Math.abs(r-l-n)?s:s-1;break}}return i||(o=e.length-1),o},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,n){var i="selectionStart"===e?"setSelectionStart":"setSelectionEnd";t.altKey?this[i](this["findWordBoundary"+n](this[e])):t.metaKey||35===t.keyCode||36===t.keyCode?this[i](this["findLineBoundary"+n](this[e])):this[i](this[e]+("Left"===n?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"),"\n"===this.text.charAt(this.selectionStart)&&this.setSelectionStart(this.selectionStart-1))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"),"\n"===this.text.charAt(this.selectionEnd-1)&&this.setSelectionEnd(this.selectionEnd+1))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){0!==this.selectionStart&&(t.metaKey?(t=this.findLineBoundaryLeft(this.selectionStart),this._removeCharsFromTo(t,this.selectionStart),this.setSelectionStart(t)):t.altKey?(t=this.findWordBoundaryLeft(this.selectionStart),this._removeCharsFromTo(t,this.selectionStart),this.setSelectionStart(t)):(t="\n"===this.text.slice(this.selectionStart-1,this.selectionStart),this.removeStyleObject(t),this.setSelectionStart(this.selectionStart-1),this.text=this.text.slice(0,this.selectionStart)+this.text.slice(this.selectionStart+1)))}}),fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,n,i,r,o){this.styles[t]?this._setSVGTextLineChars(t,e,n,i,o):this.callSuper("_setSVGTextLineText",t,e,n,i,r)},_setSVGTextLineChars:function(t,e,n,i,r){n=this._textLines[t].split(""),i=0;for(var o=this._getSVGLineLeftOffset(t)-this.width/2,s=this._getSVGLineTopOffset(t),a=this._getHeightOfLine(this.ctx,t),l=0,c=n.length;l<c;l++){var u=this.styles[t][l]||{};e.push(this._createTextCharSpan(n[l],u,o,s.lineTop+s.offset,i));var h=this._getWidthOfChar(this.ctx,n[l],t,l);u.textBackgroundColor&&r.push(this._createTextCharBg(u,o,s.lineTop,a,h,i)),i+=h}},_getSVGLineLeftOffset:function(t){return fabric.util.toFixed(this._getLineLeftOffset(this.__lineWidths[t]),2)},_getSVGLineTopOffset:function(t){var e=0,n=0;for(n=0;n<t;n++)e+=this._getHeightOfLine(this.ctx,n);return n=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(t,e,n,i,r,o){return['<rect fill="',t.textBackgroundColor,'" x="',e+o,'" y="',n-this.height/2,'" width="',r,'" height="',i/this.lineHeight,'"></rect>'].join("")},_createTextCharSpan:function(t,e,n,i,r){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text"},e));return['<tspan x="',n+r,'" y="',i-this.height/2,'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(t),"</tspan>"].join("")}}),function(){function e(t,e,n){var i=a.parse(t);i.port||(i.port=0===i.protocol.indexOf("https:")?443:80),(t=(0===i.protocol.indexOf("https:")?g:c).request({hostname:i.hostname,port:i.port,path:i.path,method:"GET"},function(t){var i="";e&&t.setEncoding(e),t.on("end",function(){n(i)}),t.on("data",function(e){200===t.statusCode&&(i+=e)})})).on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+i.hostname+":"+i.port):fabric.log(t.message)}),t.end()}function b(t,e){require2("fs").readFile(t,function(t,n){if(t)throw fabric.log(t),t;e(n)})}if("undefined"==typeof document||"undefined"==typeof window){var d=require2("xmldom").DOMParser,a=require2("url"),c=require2("http"),g=require2("https"),f=require2("canvas"),k=require2("canvas").Image;fabric.util.loadImage=function(t,n,i){function r(e){o.src=new Buffer(e,"binary"),o._src=t,n&&n.call(i,o)}var o=new k;t&&(t instanceof Buffer||0===t.indexOf("data"))?(o.src=o._src=t,n&&n.call(i,o)):t&&0!==t.indexOf("http")?b(t,r):t?e(t,"binary",r):n&&n.call(i,t)},fabric.loadSVGFromURL=function(t,n,i){0!==(t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim()).indexOf("http")?b(t,function(t){fabric.loadSVGFromString(t.toString(),n,i)}):e(t,"",function(t){fabric.loadSVGFromString(t,n,i)})},fabric.loadSVGFromString=function(t,e,n){t=(new d).parseFromString(t),fabric.parseSVGDocument(t.documentElement,function(t,n){e&&e(t,n)},n)},fabric.util.getScript=function(a,b){e(a,"",function(a){eval(a),b&&b()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(n){var i=new fabric.Image(n);i._initConfig(t),i._initFilters(t,function(t){i.filters=t||[],e&&e(i)})})},fabric.createCanvasForNode=function(t,e,n,i){i=i||n;var r=fabric.document.createElement("canvas");return t=new f(t||600,e||600,i),r.style={},r.width=t.width,r.height=t.height,(n=new(fabric.Canvas||fabric.StaticCanvas)(r,n)).contextContainer=t.getContext("2d"),n.nodeCanvas=t,n.Font=f.Font,n},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var l=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return l.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var m=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return m.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}(),function(t,e,n,i){function r(t,e,n){return setTimeout(u(t,n),e)}function o(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)}function s(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function a(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t}function l(t,e){return a(t,e,!0)}function c(t,e,n){var i;e=e.prototype,(i=t.prototype=Object.create(e)).constructor=t,i._super=e,n&&a(i,n)}function u(t,e){return function(){return t.apply(e,arguments)}}function h(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function d(t,e,n){s(m(e),function(e){t.addEventListener(e,n,!1)})}function f(t,e,n){s(m(e),function(e){t.removeEventListener(e,n,!1)})}function p(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t){return t.trim().split(/\s+/g)}function g(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function v(t){return Array.prototype.slice.call(t,0)}function y(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];0>g(r,s)&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function b(t,e){for(var n,r=e[0].toUpperCase()+e.slice(1),o=0;o<q.length;){if((n=(n=q[o])?n+r:e)in t)return n;o++}return i}function _(t){return(t=t.ownerDocument).defaultView||t.parentWindow}function w(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){h(t.options.enable,[t])&&n.handler(e)},this.init()}function S(t,e,n){var r=n.pointers.length,o=n.changedPointers.length,s=1&e&&0==r-o;n.isFirst=!!s,n.isFinal=!!(12&e&&0==r-o),s&&(t.session={}),n.eventType=e,e=t.session,o=(r=n.pointers).length,e.firstInput||(e.firstInput=x(n)),1<o&&!e.firstMultiple?e.firstMultiple=x(n):1===o&&(e.firstMultiple=!1);s=e.firstInput;var a=(o=e.firstMultiple)?o.center:s.center,l=n.center=C(r);n.timeStamp=Z(),n.deltaTime=n.timeStamp-s.timeStamp,n.angle=M(a,l),n.distance=T(a,l);s=n.center,a=e.offsetDelta||{},l=e.prevDelta||{};var c=e.prevInput||{};1!==n.eventType&&4!==c.eventType||(l=e.prevDelta={x:c.deltaX||0,y:c.deltaY||0},a=e.offsetDelta={x:s.x,y:s.y}),n.deltaX=l.x+(s.x-a.x),n.deltaY=l.y+(s.y-a.y),n.offsetDirection=k(n.deltaX,n.deltaY),o?(s=o.pointers,s=T(r[0],r[1],rt)/T(s[0],s[1],rt)):s=1,n.scale=s,o?(o=o.pointers,r=M(r[1],r[0],rt)-M(o[1],o[0],rt)):r=0,n.rotation=r,a=e.lastInterval||n,r=n.timeStamp-a.timeStamp,8!=n.eventType&&(25<r||a.velocity===i)?(s=a.deltaX-n.deltaX,c=(a=a.deltaY-n.deltaY)/r||0,r=l=s/r||0,o=c,l=J(l)>J(c)?l:c,s=k(s,a),e.lastInterval=n):(l=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction),n.velocity=l,n.velocityX=r,n.velocityY=o,n.direction=s,e=t.element,p(n.srcEvent.target,e)&&(e=n.srcEvent.target),n.target=e,t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function x(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:K(t.pointers[n].clientX),clientY:K(t.pointers[n].clientY)},n++;return{timeStamp:Z(),pointers:e,center:C(e),deltaX:t.deltaX,deltaY:t.deltaY}}function C(t){var e=t.length;if(1===e)return{x:K(t[0].clientX),y:K(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:K(n/e),y:K(i/e)}}function k(t,e){return t===e?1:J(t)>=J(e)?0<t?2:4:0<e?8:16}function T(t,e,n){n||(n=it);var i=e[n[0]]-t[n[0]];return t=e[n[1]]-t[n[1]],Math.sqrt(i*i+t*t)}function M(t,e,n){return n||(n=it),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}function E(){this.evEl=st,this.evWin=at,this.allow=!0,this.pressed=!1,w.apply(this,arguments)}function A(){this.evEl=ut,this.evWin=ht,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function I(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,w.apply(this,arguments)}function $(){this.evTarget=pt,this.targetIds={},w.apply(this,arguments)}function D(){w.apply(this,arguments);var t=u(this.handler,this);this.touch=new $(this.manager,t),this.mouse=new E(this.manager,t)}function L(t,e){this.manager=t,this.set(e)}function P(t){this.id=Q++,this.manager=null,this.options=l(t||{},this.defaults),t=this.options.enable,this.options.enable=t===i||t,this.state=1,this.simultaneous={},this.require2Fail=[]}function O(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function N(t,e){var n=e.manager;return n?n.get(t):t}function j(){P.apply(this,arguments)}function R(){j.apply(this,arguments),this.pY=this.pX=null}function B(){j.apply(this,arguments)}function F(){P.apply(this,arguments),this._input=this._timer=null}function Y(){j.apply(this,arguments)}function H(){j.apply(this,arguments)}function W(){P.apply(this,arguments),this.pCenter=this.pTime=!1,this._input=this._timer=null,this.count=0}function z(t,e){var n=(e=e||{}).recognizers;return e.recognizers=n===i?z.defaults.preset:n,new U(t,e)}function U(t,e){e=e||{},this.options=l(e,z.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(et?A:nt?$:tt?D:E))(t,S)}(this),this.touchAction=new L(this,this.options.touchAction),V(this,!0),s(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.require2Failure(t[3])},this)}function V(t,e){var n=t.element;s(t.options.cssProps,function(t,i){n.style[b(n.style,i)]=e?t:""})}function G(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var q=" webkit moz MS ms o".split(" "),X=e.createElement("div"),K=Math.round,J=Math.abs,Z=Date.now,Q=1,tt="ontouchstart"in t,et=b(t,"PointerEvent")!==i,nt=tt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),it=["x","y"],rt=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(_(this.element),this.evWin,this.domHandler)}};var ot={mousedown:1,mousemove:2,mouseup:4},st="mousedown",at="mousemove mouseup";c(E,w,{handler:function(t){var e=ot[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&this.allow&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var lt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},ut="pointerdown",ht="pointermove pointerup pointercancel";t.MSPointerEvent&&(ut="MSPointerDown",ht="MSPointerMove MSPointerUp MSPointerCancel"),c(A,w,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=(i=lt[i],ct[t.pointerType]||t.pointerType),o="touch"==r,s=g(e,t.pointerId,"pointerId");1&i&&(0===t.button||o)?0>s&&(e.push(t),s=e.length-1):12&i&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(s,1))}});var dt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};c(I,w,{handler:function(t){var e=dt[t.type];if(1===e&&(this.started=!0),this.started){var n;n=v(t.touches);var i=v(t.changedTouches);12&e&&(n=y(n.concat(i),"identifier",!0)),n=[n,i],12&e&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var ft={touchstart:1,touchmove:2,touchend:4,touchcancel:8},pt="touchstart touchmove touchend touchcancel";c($,w,{handler:function(t){var e=ft[t.type],n=function(t,e){var n=v(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o=v(t.changedTouches),s=[],a=this.target;if(r=n.filter(function(t){return p(t.target,a)}),1===e)for(n=0;n<r.length;)i[r[n].identifier]=!0,n++;for(n=0;n<o.length;)i[o[n].identifier]&&s.push(o[n]),12&e&&delete i[o[n].identifier],n++;return s.length?[y(r.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),c(D,w,{handler:function(t,e,n){var i="mouse"==n.pointerType;if("touch"==n.pointerType)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;12&e&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var mt=b(X.style,"touchAction"),gt=mt!==i;L.prototype={set:function(t){"compute"==t&&(t=this.compute()),gt&&(this.manager.element.style[mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){h(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(-1<t.indexOf("none"))return"none";var e=-1<t.indexOf("pan-x"),n=-1<t.indexOf("pan-y");return e&&n?"pan-x pan-y":e||n?e?"pan-x":"pan-y":-1<t.indexOf("manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){if(!gt){var e=t.srcEvent;if(t=t.offsetDirection,this.manager.session.prevented)e.preventDefault();else{var n=-1<(r=this.actions).indexOf("none"),i=-1<r.indexOf("pan-y"),r=-1<r.indexOf("pan-x");if(n||i&&6&t||r&&24&t)return this.preventSrc(e)}}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},P.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=N(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=N(t,this),delete this.simultaneous[t.id],this)},require2Failure:function(t){if(o(t,"require2Failure",this))return this;var e=this.require2Fail;return-1===g(e,t=N(t,this))&&(e.push(t),t.require2Failure(this)),this},droprequire2Failure:function(t){return o(t,"droprequire2Failure",this)?this:(t=N(t,this),-1<(t=g(this.require2Fail,t))&&this.require2Fail.splice(t,1),this)},hasrequire2Failures:function(){return 0<this.require2Fail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?16&i?"cancel":8&i?"end":4&i?"move":2&i?"start":"":""),t)}var n=this,i=this.state;8>i&&e(!0),e(),8<=i&&e(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.require2Fail.length;){if(!(33&this.require2Fail[t].state))return!1;t++}return!0},recognize:function(t){t=a({},t),h(this.options.enable,[this,t])?(56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)):(this.reset(),this.state=32)},process:function(t){},getTouchAction:function(){},reset:function(){}},c(j,P,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e;return t=this.attrTest(t),i&&(8&n||!t)?16|e:i||t?4&n?8|e:2&e?4|e:2:32}}),c(R,j,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:0>o?2:4,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?1:0>s?8:16,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return j.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=O(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(B,j,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){this._super.emit.call(this,t),1!==t.scale&&this.manager.emit(this.options.event+(1>t.scale?"in":"out"),t)}}),c(F,P,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=r(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Z(),this.manager.emit(this.options.event,this._input)))}}),c(Y,j,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),c(H,j,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return R.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.velocity:6&n?e=t.velocityX:24&n&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&J(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=O(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(W,P,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&n){if(4!=t.eventType)return this.failTimeout();if(n=!this.pTime||t.timeStamp-this.pTime<e.interval,i=!this.pCenter||T(this.pCenter,t.center)<e.posThreshold,this.pTime=t.timeStamp,this.pCenter=t.center,this.count=i&&n?this.count+1:1,this._input=t,0==this.count%e.taps)return this.hasrequire2Failures()?(this._timer=r(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=r(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),z.VERSION="2.0.4",z.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Y,{enable:!1}],[B,{enable:!1},["rotate"]],[H,{direction:6}],[R,{direction:6},["swipe"]],[W],[W,{event:"doubletap",taps:2},["tap"]],[F]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},U.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof P)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(g(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return s(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return s(m(t),function(t){e?n[t].splice(g(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&G(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&V(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(z,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:U,Input:w,TouchAction:L,TouchInput:$,MouseInput:E,PointerEventInput:A,TouchMouseInput:D,SingleTouchInput:I,Recognizer:P,AttrRecognizer:j,Tap:W,Pan:R,Swipe:H,Pinch:B,Rotate:Y,Press:F,on:d,off:f,each:s,merge:l,extend:a,inherit:c,bindFn:u,prefixed:b}),void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return z}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document),function(t,e){"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw Error("jQuery require2s a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=V.type(t);return"function"!==n&&!V.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t))}function i(t,e,n){if(V.isFunction(e))return V.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return V.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(tt.test(e))return V.filter(e,t,n);e=V.filter(e,t)}return V.grep(t,function(t){return 0<=F.call(e,t)!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(){U.removeEventListener("DOMContentLoaded",o,!1),t.removeEventListener("load",o,!1),V.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=V.expando+s.uid++}function a(t,e,n){if(void 0===n&&1===t.nodeType)if(n="data-"+e.replace(dt,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(n))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ht.test(n)?V.parseJSON(n):n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function u(){try{return U.activeElement}catch(t){}}function h(t,e){return V.nodeName(t,"table")&&V.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Mt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function p(t,e){for(var n=0,i=t.length;n<i;n++)ct.set(t[n],"globalEval",!e||ct.get(e[n],"globalEval"))}function m(t,e){var n,i,r,o;if(1===e.nodeType){if(ct.hasData(t)&&(o=ct.access(t),n=ct.set(e,o),o=o.events))for(r in delete n.handle,n.events={},o)for(n=0,i=o[r].length;n<i;n++)V.event.add(e,r,o[r][n]);ut.hasData(t)&&(r=ut.access(t),r=V.extend({},r),ut.set(e,r))}}function g(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&V.nodeName(t,e)?V.merge([t],n):n}function v(e,n){var i,r=V(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:V.css(r[0],"display");return r.detach(),o}function y(t){var e=U,n=$t[t];return n||("none"!==(n=v(t,e))&&n||((e=(It=(It||V("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=v(t,e),It.detach()),$t[t]=n),n}function b(t,e,n){var i,r,o=t.style;return(n=n||Pt(t))&&(r=n.getPropertyValue(e)||n[e]),n&&(""!==r||V.contains(t.ownerDocument,t)||(r=V.style(t,e)),Lt.test(r)&&Dt.test(e)&&(t=o.width,e=o.minWidth,i=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=t,o.minWidth=e,o.maxWidth=i)),void 0!==r?r+"":r}function _(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function w(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,r=Ft.length;r--;)if((e=Ft[r]+n)in t)return e;return i}function S(t,e,n){return(t=Nt.exec(e))?Math.max(0,t[1]-(n||0))+(t[2]||"px"):e}function x(t,e,n,i,r){e=n===(i?"border":"content")?4:"width"===e?1:0;for(var o=0;4>e;e+=2)"margin"===n&&(o+=V.css(t,n+pt[e],!0,r)),i?("content"===n&&(o-=V.css(t,"padding"+pt[e],!0,r)),"margin"!==n&&(o-=V.css(t,"border"+pt[e]+"Width",!0,r))):(o+=V.css(t,"padding"+pt[e],!0,r),"padding"!==n&&(o+=V.css(t,"border"+pt[e]+"Width",!0,r)));return o}function C(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=Pt(t),s="border-box"===V.css(t,"boxSizing",!1,o);if(0>=r||null==r){if((0>(r=b(t,e,o))||null==r)&&(r=t.style[e]),Lt.test(r))return r;i=s&&(z.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+x(t,e,n||(s?"border":"content"),i,o)+"px"}function k(t,e){for(var n,i,r,o=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(o[s]=ct.get(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&mt(i)&&(o[s]=ct.access(i,"olddisplay",y(i.nodeName)))):(r=mt(i),"none"===n&&r||ct.set(i,"olddisplay",r?n:V.css(i,"display"))));for(s=0;s<a;s++)!(i=t[s]).style||e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none");return t}function T(t,e,n,i,r){return new T.prototype.init(t,e,n,i,r)}function M(){return setTimeout(function(){Yt=void 0}),Yt=V.now()}function E(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)r["margin"+(n=pt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function A(t,e,n){for(var i,r=(Gt[e]||[]).concat(Gt["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function I(t,e,n){var i,r=0,o=Vt.length,s=V.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var e=Yt||M(),n=1-((e=Math.max(0,l.startTime+l.duration-e))/l.duration||0),r=0,o=l.tweens.length;r<o;r++)l.tweens[r].run(n);return s.notifyWith(t,[l,n,e]),1>n&&o?e:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:V.extend({},e),opts:V.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Yt||M(),duration:n.duration,tweens:[],createTween:function(e,n){var i=V.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?s.resolveWith(t,[l,e]):s.rejectWith(t,[l,e]),this}});for(function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=V.camelCase(n)],o=t[n],V.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=V.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(n=l.props,l.opts.specialEasing);r<o;r++)if(e=Vt[r].call(l,t,n,l.opts))return e;return V.map(n,A,l),V.isFunction(l.opts.start)&&l.opts.start.call(t,l),V.fx.timer(V.extend(a,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function $(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(st)||[];if(V.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function D(t,e,n,i){function r(a){var l;return o[a]=!0,V.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===le;return r(e.dataTypes[0])||!o["*"]&&r("*")}function L(t,e){var n,i,r=V.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&V.extend(!0,t,i),t}function P(t,e,n,i){var r;if(V.isArray(e))V.each(e,function(e,r){n||fe.test(t)?i(t,r):P(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==V.type(e))i(t,e);else for(r in e)P(t+"["+r+"]",e[r],n,i)}function O(t){return V.isWindow(t)?t:9===t.nodeType&&t.defaultView}var N=[],j=N.slice,R=N.concat,B=N.push,F=N.indexOf,Y={},H=Y.toString,W=Y.hasOwnProperty,z={},U=t.document,V=function(t,e){return new V.fn.init(t,e)},G=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,q=/^-ms-/,X=/-([\da-z])/gi,K=function(t,e){return e.toUpperCase()};V.fn=V.prototype={jquery:"2.1.4",constructor:V,selector:"",length:0,toArray:function(){return j.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:j.call(this)},pushStack:function(t){return(t=V.merge(this.constructor(),t)).prevObject=this,t.context=this.context,t},each:function(t,e){return V.each(this,t,e)},map:function(t){return this.pushStack(V.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length;return t=+t+(0>t?e:0),this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:B,sort:N.sort,splice:N.splice},V.extend=V.fn.extend=function(){var t,e,n,i,r,o=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||V.isFunction(o)||(o={}),s===a&&(o=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)n=o[e],o!==(i=t[e])&&(l&&i&&(V.isPlainObject(i)||(r=V.isArray(i)))?(r?(r=!1,n=n&&V.isArray(n)?n:[]):n=n&&V.isPlainObject(n)?n:{},o[e]=V.extend(l,n,i)):void 0!==i&&(o[e]=i));return o},V.extend({expando:"jQuery"+("2.1.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isFunction:function(t){return"function"===V.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!V.isArray(t)&&0<=t-parseFloat(t)+1},isPlainObject:function(t){return!("object"!==V.type(t)||t.nodeType||V.isWindow(t)||t.constructor&&!W.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){for(var e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[H.call(t)]||"object":typeof t},globalEval:function(t){var e;e=eval,(t=V.trim(t))&&(1===t.indexOf("use strict")?((e=U.createElement("script")).text=t,U.head.appendChild(e).parentNode.removeChild(e)):e(t))},camelCase:function(t){return t.replace(q,"ms-").replace(X,K)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length;if(r=n(t),i){if(r)for(;o<s&&!1!==(r=e.apply(t[o],i));o++);else for(o in t)if(!1===(r=e.apply(t[o],i)))break}else if(r)for(;o<s&&!1!==(r=e.call(t[o],o,t[o]));o++);else for(o in t)if(!1===(r=e.call(t[o],o,t[o])))break;return t},trim:function(t){return null==t?"":(t+"").replace(G,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?V.merge(i,"string"==typeof t?[t]:t):B.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:F.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)(n=!e(t[r],r))!==s&&i.push(t[r]);return i},map:function(t,e,i){var r,o=0,s=t.length,a=[];if(n(t))for(;o<s;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return R.apply([],a)},guid:1,proxy:function(t,e){var n,i;if("string"==typeof e&&(n=t[e],e=t,t=n),V.isFunction(t))return i=j.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(j.call(arguments)))}).guid=t.guid=t.guid||V.guid++,n},now:Date.now,support:z}),V.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var J=function(t){function e(t,e,n,i){var r,o,s,a,l;if((e?e.ownerDocument||e:B)!==$&&I(e),n=n||[],a=(e=e||$).nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!i&&L){if(11!==a&&(r=ft.exec(t)))if(s=r[1]){if(9===a){if(!(o=e.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&j(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return K.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&_.getElementsByClassName)return K.apply(n,e.getElementsByClassName(s)),n}if(_.qsa&&(!P||!P.test(t))){if(o=r=R,s=e,l=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(a=C(t),(r=e.getAttribute("id"))?o=r.replace(mt,"\\$&"):e.setAttribute("id",o),o="[id='"+o+"'] ",s=a.length;s--;)a[s]=o+d(a[s]);s=pt.test(t)&&u(e.parentNode)||e,l=a.join(",")}if(l)try{return K.apply(n,s.querySelectorAll(l)),n}catch(t){}finally{r||e.removeAttribute("id")}}}return T(t.replace(it,"$1"),e,n,i)}function n(){var t=[];return function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function i(t){return t[R]=!0,t}function r(t){var e=$.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)w.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||-2147483648)-(~t.sourceIndex||-2147483648);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function u(t){return t&&void 0!==t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=Y++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,c=[F,o];if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if((a=(l=e[R]||(e[R]={}))[i])&&a[0]===F&&a[1]===o)return c[2]=a[2];if(l[i]=c,c[2]=t(e,n,s))return!0}}}function p(t){return 1<t.length?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),c&&e.push(a)));return s}function g(t,n,r,o,s,a){return o&&!o[R]&&(o=g(o)),s&&!s[R]&&(s=g(s,a)),i(function(i,a,l,c){var u,h,d,f=[],p=[],g=a.length;if(!(d=i)){d=n||"*";for(var v=l.nodeType?[l]:l,y=[],b=0,_=v.length;b<_;b++)e(d,v[b],y);d=y}if(d=!t||!i&&n?d:m(d,f,t,l,c),v=r?s||(i?t:g||o)?[]:a:d,r&&r(d,v,l,c),o)for(u=m(v,p),o(u,[],l,c),l=u.length;l--;)(h=u[l])&&(v[p[l]]=!(d[p[l]]=h));if(i){if(s||t){if(s){for(u=[],l=v.length;l--;)(h=v[l])&&u.push(d[l]=h);s(null,v=[],u,c)}for(l=v.length;l--;)(h=v[l])&&-1<(u=s?Z(i,h):f[l])&&(i[u]=!(a[u]=h))}}else v=m(v===a?v.splice(g,v.length):v),s?s(null,a,v,c):K.apply(a,v)})}function v(t){var e,n,i,r=t.length,o=w.relative[t[0].type];n=o||w.relative[" "];for(var s=o?1:0,a=f(function(t){return t===e},n,!0),l=f(function(t){return-1<Z(e,t)},n,!0),c=[function(t,n,i){return t=!o&&(i||n!==M)||((e=n).nodeType?a(t,n,i):l(t,n,i)),e=null,t}];s<r;s++)if(n=w.relative[t[s].type])c=[f(p(c),n)];else{if((n=w.filter[t[s].type].apply(null,t[s].matches))[R]){for(i=++s;i<r&&!w.relative[t[i].type];i++);return g(1<s&&p(c),1<s&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(it,"$1"),n,s<i&&v(t.slice(s,i)),i<r&&v(t=t.slice(i)),i<r&&d(t))}c.push(n)}return p(c)}function y(t,n){var r=0<n.length,o=0<t.length,s=function(i,s,a,l,c){var u,h,d,f=0,p="0",g=i&&[],v=[],y=M,b=i||o&&w.find.TAG("*",c),_=F+=null==y?1:Math.random()||.1,S=b.length;for(c&&(M=s!==$&&s);p!==S&&null!=(u=b[p]);p++){if(o&&u){for(h=0;d=t[h++];)if(d(u,s,a)){l.push(u);break}c&&(F=_)}r&&((u=!d&&u)&&f--,i&&g.push(u))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(g,v,s,a);if(i){if(0<f)for(;p--;)g[p]||v[p]||(v[p]=q.call(l));v=m(v)}K.apply(l,v),c&&!i&&0<v.length&&1<f+n.length&&e.uniqueSort(l)}return c&&(F=_,M=y),g};return r?i(s):s}var b,_,w,S,x,C,k,T,M,E,A,I,$,D,L,P,O,N,j,R="sizzle"+1*new Date,B=t.document,F=0,Y=0,H=n(),W=n(),z=n(),U=function(t,e){return t===e&&(A=!0),0},V={}.hasOwnProperty,G=[],q=G.pop,X=G.push,K=G.push,J=G.slice,Z=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),tt="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)[\\x20\\t\\r\\n\\f]*\\]",et=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+tt+")*)|.*)\\)|)",nt=RegExp("[\\x20\\t\\r\\n\\f]+","g"),it=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),rt=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ot=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,st=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),at=new RegExp(et),lt=new RegExp("^"+Q+"$"),ct={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+tt),PSEUDO:new RegExp("^"+et),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|require2d|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ut=/^(?:input|select|textarea|button)$/i,ht=/^h\d$/i,dt=/^[^{]+\{\s*\[native \w/,ft=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,pt=/[+~]/,mt=/'|\\/g,gt=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),vt=function(t,e,n){return(t="0x"+e-65536)!=t||n?e:0>t?String.fromCharCode(t+65536):String.fromCharCode(t>>10|55296,1023&t|56320)},yt=function(){I()};try{K.apply(G=J.call(B.childNodes),B.childNodes),G[B.childNodes.length].nodeType}catch(t){K={apply:G.length?function(t,e){X.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(b in _=e.support={},x=e.isXML=function(t){return!!(t=t&&(t.ownerDocument||t).documentElement)&&"HTML"!==t.nodeName},I=e.setDocument=function(t){var e=t?t.ownerDocument||t:B;return e!==$&&9===e.nodeType&&e.documentElement?($=e,D=e.documentElement,(t=e.defaultView)&&t!==t.top&&(t.addEventListener?t.addEventListener("unload",yt,!1):t.attachEvent&&t.attachEvent("onunload",yt)),L=!x(e),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=dt.test(e.getElementsByClassName),_.getById=r(function(t){return D.appendChild(t).id=R,!e.getElementsByName||!e.getElementsByName(R).length}),_.getById?(w.find.ID=function(t,e){if(void 0!==e.getElementById&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(t){var e=t.replace(gt,vt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(gt,vt);return function(t){return(t=void 0!==t.getAttributeNode&&t.getAttributeNode("id"))&&t.value===e}}),w.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},w.find.CLASS=_.getElementsByClassName&&function(t,e){if(L)return e.getElementsByClassName(t)},O=[],P=[],(_.qsa=dt.test(e.querySelectorAll))&&(r(function(t){D.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|require2d|scoped)"),t.querySelectorAll("[id~="+R+"-]").length||P.push("~="),t.querySelectorAll(":checked").length||P.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||P.push(".#.+[+~]")}),r(function(t){var n=e.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(_.matchesSelector=dt.test(N=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(t){_.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",et)}),P=P.length&&new RegExp(P.join("|")),O=O.length&&new RegExp(O.join("|")),j=(t=dt.test(D.compareDocumentPosition))||dt.test(D.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=t?function(t,n){if(t===n)return A=!0,0;var i=!t.compareDocumentPosition-!n.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(n.ownerDocument||n)?t.compareDocumentPosition(n):1)||!_.sortDetached&&n.compareDocumentPosition(t)===i?t===e||t.ownerDocument===B&&j(B,t)?-1:n===e||n.ownerDocument===B&&j(B,n)?1:E?Z(E,t)-Z(E,n):0:4&i?-1:1)}:function(t,n){if(t===n)return A=!0,0;var i,r=0;i=t.parentNode;var o=n.parentNode,a=[t],l=[n];if(!i||!o)return t===e?-1:n===e?1:i?-1:o?1:E?Z(E,t)-Z(E,n):0;if(i===o)return s(t,n);for(i=t;i=i.parentNode;)a.unshift(i);for(i=n;i=i.parentNode;)l.unshift(i);for(;a[r]===l[r];)r++;return r?s(a[r],l[r]):a[r]===B?-1:l[r]===B?1:0},e):$},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==$&&I(t),n=n.replace(st,"='$1']"),!(!_.matchesSelector||!L||O&&O.test(n)||P&&P.test(n)))try{var i=N.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<e(n,$,null,[t]).length},e.contains=function(t,e){return(t.ownerDocument||t)!==$&&I(t),j(t,e)},e.attr=function(t,e){var n;return(t.ownerDocument||t)!==$&&I(t),void 0!==(n=(n=w.attrHandle[e.toLowerCase()])&&V.call(w.attrHandle,e.toLowerCase())?n(t,e,!L):void 0)?n:_.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(A=!_.detectDuplicates,E=!_.sortStable&&t.slice(0),t.sort(U),A){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return E=null,t},S=e.getText=function(t){var e,n="",i=0;if(e=t.nodeType){if(1===e||9===e||11===e){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===e||4===e)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},(w=e.selectors={cacheLength:50,createPseudo:i,match:ct,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(gt,vt),t[3]=(t[3]||t[4]||t[5]||"").replace(gt,vt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ct.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&at.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(gt,vt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"([\\x20\\t\\r\\n\\f]|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){return null==(r=e.attr(r,t))?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&-1<r.indexOf(i):"$="===n?i&&r.slice(-i.length)===i:"~="===n?-1<(" "+r.replace(nt," ")+" ").indexOf(i):"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f;n=o!==s?"nextSibling":"previousSibling";var p=e.parentNode,m=a&&e.nodeName.toLowerCase();if(l=!l&&!a,p){if(o){for(;n;){for(u=e;u=u[n];)if(a?u.nodeName.toLowerCase()===m:1===u.nodeType)return!1;f=n="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?p.firstChild:p.lastChild],s&&l){for(d=(c=(l=p[R]||(p[R]={}))[t]||[])[0]===F&&c[1],h=c[0]===F&&c[2],u=d&&p.childNodes[d];u=++d&&u&&u[n]||(h=d=0)||f.pop();)if(1===u.nodeType&&++h&&u===e){l[t]=[F,d,h];break}}else if(l&&(c=(e[R]||(e[R]={}))[t])&&c[0]===F)h=c[1];else for(;(u=++d&&u&&u[n]||(h=d=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==m:1!==u.nodeType)||!++h||(l&&((u[R]||(u[R]={}))[t]=[F,h]),u!==e)););return(h-=r)===i||0==h%i&&0<=h/i}}},PSEUDO:function(t,n){var r,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[R]?o(n):1<o.length?(r=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),s=r.length;s--;)t[i=Z(t,r[s])]=!(e[i]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=k(t.replace(it,"$1"));return r[R]?i(function(t,e,n,i){i=r(t,null,i,[]);for(var o=t.length;o--;)(n=i[o])&&(t[o]=!(e[o]=n))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return 0<e(t,n).length}}),contains:i(function(t){return t=t.replace(gt,vt),function(e){return-1<(e.textContent||e.innerText||S(e)).indexOf(t)}}),lang:i(function(t){return lt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(gt,vt).toLowerCase(),function(e){var n;do{if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return ht.test(t.nodeName)},input:function(t){return ut.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(e=0>n?n+e:n;0<=--e;)t.push(e);return t}),gt:c(function(t,e,n){for(n=0>n?n+e:n;++n<e;)t.push(n);return t})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=l(b);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,C=e.tokenize=function(t,n){var i,r,o,s,a,l,c;if(a=W[t+" "])return n?0:a.slice(0);for(a=t,l=[],c=w.preFilter;a;){for(s in i&&!(r=rt.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ot.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(it," ")}),a=a.slice(i.length)),w.filter)!(r=ct[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},k=e.compile=function(t,e){var n,i=[],r=[],o=z[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)(o=v(e[n]))[R]?i.push(o):r.push(o);(o=z(t,y(r,i))).selector=t}return o},T=e.select=function(t,e,n,i){var r,o,s,a,l="function"==typeof t&&t,c=!i&&C(t=l.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&_.getById&&9===e.nodeType&&L&&w.relative[o[1].type]){if(!(e=(w.find.ID(s.matches[0].replace(gt,vt),e)||[])[0]))return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ct.needsContext.test(t)?0:o.length;r--&&(s=o[r],!w.relative[a=s.type]);)if((a=w.find[a])&&(i=a(s.matches[0].replace(gt,vt),pt.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&d(o)))return K.apply(n,i),n;break}}return(l||k(t,c))(i,e,!L,n,pt.test(t)&&u(e.parentNode)||e),n},_.sortStable=R.split("").sort(U).join("")===R,_.detectDuplicates=!!A,I(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition($.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|require2d|scoped",function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);V.find=J,V.expr=J.selectors,V.expr[":"]=V.expr.pseudos,V.unique=J.uniqueSort,V.text=J.getText,V.isXMLDoc=J.isXML,V.contains=J.contains;var Z=V.expr.match.needsContext,Q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,tt=/^.[^:#\[\.,]*$/;V.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?V.find.matchesSelector(i,t)?[i]:[]:V.find.matches(t,V.grep(e,function(t){return 1===t.nodeType}))},V.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(V(t).filter(function(){for(e=0;e<n;e++)if(V.contains(r[e],this))return!0}));for(e=0;e<n;e++)V.find(t,r[e],i);return(i=this.pushStack(1<n?V.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&Z.test(t)?V(t):t||[],!1).length}});var et,nt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(V.fn.init=function(t,e){var n;if(!t)return this;if("string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:nt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||et).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof V?e[0]:e,V.merge(this,V.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:U,!0)),Q.test(n[1])&&V.isPlainObject(e))for(n in e)V.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n])}else(n=U.getElementById(n[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=U,this.selector=t;return this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):V.isFunction(t)?void 0!==et.ready?et.ready(t):t(V):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),V.makeArray(t,this))}).prototype=V.fn,et=V(U);var it=/^(?:parents|prev(?:Until|All))/,rt={children:!0,contents:!0,next:!0,prev:!0};V.extend({dir:function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&V(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),V.fn.extend({has:function(t){var e=V(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(V.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=Z.test(t)||"string"!=typeof t?V(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?-1<s.index(n):1===n.nodeType&&V.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?V.unique(o):o)},index:function(t){return t?"string"==typeof t?F.call(V(t),this[0]):F.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(V.unique(V.merge(this.get(),V(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),V.each({parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},parents:function(t){return V.dir(t,"parentNode")},parentsUntil:function(t,e,n){return V.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return V.dir(t,"nextSibling")},prevAll:function(t){return V.dir(t,"previousSibling")},nextUntil:function(t,e,n){return V.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return V.dir(t,"previousSibling",n)},siblings:function(t){return V.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return V.sibling(t.firstChild)},contents:function(t){return t.contentDocument||V.merge([],t.childNodes)}},function(t,e){V.fn[t]=function(n,i){var r=V.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=V.filter(i,r)),1<this.length&&(rt[t]||V.unique(r),it.test(t)&&r.reverse()),this.pushStack(r)}});var ot,st=/\S+/g,at={};V.Callbacks=function(t){t="string"==typeof t?at[t]||function(t){var e=at[t]={};return V.each(t.match(st)||[],function(t,n){e[n]=!0}),e}(t):V.extend({},t);var e,n,i,r,o,s,a=[],l=!t.once&&[],c=function(h){for(e=t.memory&&h,n=!0,s=r||0,r=0,o=a.length,i=!0;a&&s<o;s++)if(!1===a[s].apply(h[0],h[1])&&t.stopOnFalse){e=!1;break}i=!1,a&&(l?l.length&&c(l.shift()):e?a=[]:u.disable())},u={add:function(){if(a){var n=a.length;!function e(n){V.each(n,function(n,i){var r=V.type(i);"function"===r?t.unique&&u.has(i)||a.push(i):i&&i.length&&"string"!==r&&e(i)})}(arguments),i?o=a.length:e&&(r=n,c(e))}return this},remove:function(){return a&&V.each(arguments,function(t,e){for(var n;-1<(n=V.inArray(e,a,n));)a.splice(n,1),i&&(n<=o&&o--,n<=s&&s--)}),this},has:function(t){return t?-1<V.inArray(t,a):!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=l=e=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,e||u.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!a||n&&!l||(e=[t,(e=e||[]).slice?e.slice():e],i?l.push(e):c(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},V.extend({Deferred:function(t){var e=[["resolve","done",V.Callbacks("once memory"),"resolved"],["reject","fail",V.Callbacks("once memory"),"rejected"],["notify","progress",V.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return V.Deferred(function(n){V.each(e,function(e,o){var s=V.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&V.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?V.extend(t,i):i}},r={};return i.pipe=i.then,V.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=j.call(arguments),s=o.length,a=1!==s||t&&V.isFunction(t.promise)?s:0,l=1===a?t:V.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=1<arguments.length?j.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(1<s)for(e=Array(s),n=Array(s),i=Array(s);r<s;r++)o[r]&&V.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,e)):--a;return a||l.resolveWith(i,o),l.promise()}}),V.fn.ready=function(t){return V.ready.promise().done(t),this},V.extend({isReady:!1,readyWait:1,holdReady:function(t){t?V.readyWait++:V.ready(!0)},ready:function(t){(!0===t?--V.readyWait:V.isReady)||(V.isReady=!0,!0!==t&&0<--V.readyWait||(ot.resolveWith(U,[V]),V.fn.triggerHandler&&(V(U).triggerHandler("ready"),V(U).off("ready"))))}}),V.ready.promise=function(e){return ot||(ot=V.Deferred(),"complete"===U.readyState?setTimeout(V.ready):(U.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",o,!1))),ot.promise(e)},V.ready.promise();var lt=V.access=function(t,e,n,i,r,o,s){var a=0,l=t.length,c=null==n;if("object"===V.type(n))for(a in r=!0,n)V.access(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,V.isFunction(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(V(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):o};V.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=V.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,V.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i;t=this.key(t);var r=this.cache[t];if("string"==typeof e)r[e]=n;else if(V.isEmptyObject(r))V.extend(this.cache[t],e);else for(i in e)r[i]=e[i];return r},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(n=this.get(t,e))?n:this.get(t,V.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i;n=this.key(t);var r=this.cache[n];if(void 0===e)this.cache[n]={};else for((V.isArray(e)?i=e.concat(e.map(V.camelCase)):(n=V.camelCase(e),e in r?i=[e,n]:i=(i=n)in r?[i]:i.match(st)||[]),n=i.length);n--;)delete r[i[n]]},hasData:function(t){return!V.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ct=new s,ut=new s,ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,dt=/([A-Z])/g;V.extend({hasData:function(t){return ut.hasData(t)||ct.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return ct.access(t,e,n)},_removeData:function(t,e){ct.remove(t,e)}}),V.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=ut.get(o),1===o.nodeType&&!ct.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(0===(i=s[n].name).indexOf("data-")&&(i=V.camelCase(i.slice(5)),a(o,i,r[i])));ct.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){ut.set(this,t)}):lt(this,function(e){var n,i=V.camelCase(t);if(o&&void 0===e){if(void 0!==(n=ut.get(o,t)))return n;if(void 0!==(n=ut.get(o,i)))return n;if(void 0!==(n=a(o,i,void 0)))return n}else this.each(function(){var n=ut.get(this,i);ut.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&ut.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){ut.remove(this,t)})}}),V.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=ct.get(t,e),n&&(!i||V.isArray(n)?i=ct.access(t,e,V.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=V.queue(t,e),i=n.length,r=n.shift(),o=V._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){V.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ct.get(t,n)||ct.access(t,n,{empty:V.Callbacks("once memory").add(function(){ct.remove(t,[e+"queue",n])})})}}),V.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?V.queue(this[0],t):void 0===e?this:this.each(function(){var n=V.queue(this,t,e);V._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&V.dequeue(this,t)})},dequeue:function(t){return this.each(function(){V.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=V.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=ct.get(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pt=["Top","Right","Bottom","Left"],mt=function(t,e){return t=e||t,"none"===V.css(t,"display")||!V.contains(t.ownerDocument,t)},gt=/^(?:checkbox|radio)$/i;!function(){var t=U.createDocumentFragment().appendChild(U.createElement("div")),e=U.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}(),z.focusinBubbles="onfocusin"in t;var vt=/^key/,yt=/^(?:mouse|pointer|contextmenu)|click/,bt=/^(?:focusinfocus|focusoutblur)$/,_t=/^([^.]*)(?:\.(.+)|)$/;V.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,f;if(c=ct.get(t))for(n.handler&&(n=(o=n).handler,r=o.selector),n.guid||(n.guid=V.guid++),(l=c.events)||(l=c.events={}),(s=c.handle)||(s=c.handle=function(e){return void 0!==V&&V.event.triggered!==e.type?V.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(st)||[""]).length;c--;)d=u=(a=_t.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),d&&(a=V.event.special[d]||{},d=(r?a.delegateType:a.bindType)||d,a=V.event.special[d]||{},u=V.extend({type:d,origType:u,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&V.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[d])||((h=l[d]=[]).delegateCount=0,a.setup&&!1!==a.setup.call(t,i,f,s)||t.addEventListener&&t.addEventListener(d,s,!1)),a.add&&(a.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),V.event.global[d]=!0)},remove:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,f,p,m,g=ct.hasData(t)&&ct.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(st)||[""]).length;c--;)if(f=m=(a=_t.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=V.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||V.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)V.event.remove(t,f+e[c],n,i,!0);V.isEmptyObject(l)&&(delete g.handle,ct.remove(t,"events"))}},trigger:function(e,n,i,r){var o,s,a,l,c,u,h=[i||U],d=W.call(e,"type")?e.type:e;if(u=W.call(e,"namespace")?e.namespace.split("."):[],s=o=i=i||U,3!==i.nodeType&&8!==i.nodeType&&!bt.test(d+V.event.triggered)&&(0<=d.indexOf(".")&&(u=d.split("."),d=u.shift(),u.sort()),l=0>d.indexOf(":")&&"on"+d,(e=e[V.expando]?e:new V.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=u.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:V.makeArray(n,[e]),u=V.event.special[d]||{},r||!u.trigger||!1!==u.trigger.apply(i,n))){if(!r&&!u.noBubble&&!V.isWindow(i)){for(a=u.delegateType||d,bt.test(a+d)||(s=s.parentNode);s;s=s.parentNode)h.push(s),o=s;o===(i.ownerDocument||U)&&h.push(o.defaultView||o.parentWindow||t)}for(o=0;(s=h[o++])&&!e.isPropagationStopped();)e.type=1<o?a:u.bindType||d,(c=(ct.get(s,"events")||{})[e.type]&&ct.get(s,"handle"))&&c.apply(s,n),(c=l&&s[l])&&c.apply&&V.acceptData(s)&&(e.result=c.apply(s,n),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),n)||!V.acceptData(i)||!l||!V.isFunction(i[d])||V.isWindow(i)||((o=i[l])&&(i[l]=null),V.event.triggered=d,i[d](),V.event.triggered=void 0,o&&(i[l]=o)),e.result}},dispatch:function(t){t=V.event.fix(t);var e,n,i,r,o=[],s=j.call(arguments);e=(ct.get(this,"events")||{})[t.type]||[];var a=V.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!a.preDispatch||!1!==a.preDispatch.call(this,t)){for(o=V.event.handlers.call(this,t,e),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,void 0!==(i=((V.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return a.postDispatch&&a.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(i=[],n=0;n<a;n++)void 0===i[r=(o=e[n]).selector+" "]&&(i[r]=o.needsContext?0<=V(r,this).index(l):V.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||U).documentElement,n=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[V.expando])return t;var e,n,i;e=t.type;var r=t,o=this.fixHooks[e];for(o||(this.fixHooks[e]=o=yt.test(e)?this.mouseHooks:vt.test(e)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new V.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=U),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===u()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&V.nodeName(this,"input"))return this.click(),!1},_default:function(t){return V.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){t=V.extend(new V.Event,n,{type:t,isSimulated:!0,originalEvent:{}}),i?V.event.trigger(t,null,e):V.event.dispatch.call(e,t),t.isDefaultPrevented()&&n.preventDefault()}},V.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},V.Event=function(t,e){if(!(this instanceof V.Event))return new V.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?l:c):this.type=t,e&&V.extend(this,e),this.timeStamp=t&&t.timeStamp||V.now(),this[V.expando]=!0},V.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=l,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},V.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){V.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||V.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),z.focusinBubbles||V.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){V.event.simulate(e,t.target,V.event.fix(t),!0)};V.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=ct.access(i,e);r||i.addEventListener(t,n,!0),ct.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ct.access(i,e)-1;r?ct.access(i,e,r):(i.removeEventListener(t,n,!0),ct.remove(i,e))}}}),V.fn.extend({on:function(t,e,n,i,r){var o,s;if("object"==typeof t){for(s in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(s,e,n,t[s],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),!1===i)i=c;else if(!i)return this;return 1===r&&(o=i,(i=function(t){return V().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=V.guid++)),this.each(function(){V.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,V(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=c),this.each(function(){V.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){V.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return V.event.trigger(t,e,n,!0)}});var wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,St=/<([\w:]+)/,xt=/<|&#?\w+;/,Ct=/<(?:script|style|link)/i,kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^$|\/(?:java|ecma)script/i,Mt=/^true\/(.*)/,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,V.extend({clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),l=V.contains(t.ownerDocument,t);if(!(z.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||V.isXMLDoc(t)))for(s=g(a),i=0,r=(o=g(t)).length;i<r;i++){var c=o[i],u=s[i],h=u.nodeName.toLowerCase();"input"===h&&gt.test(c.type)?u.checked=c.checked:"input"!==h&&"textarea"!==h||(u.defaultValue=c.defaultValue)}if(e)if(n)for(o=o||g(t),s=s||g(a),i=0,r=o.length;i<r;i++)m(o[i],s[i]);else m(t,a);return 0<(s=g(a,"script")).length&&p(s,!l&&g(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,o,s,a=e.createDocumentFragment(),l=[],c=0,u=t.length;c<u;c++)if((r=t[c])||0===r)if("object"===V.type(r))V.merge(l,r.nodeType?[r]:r);else if(xt.test(r)){for(o=o||a.appendChild(e.createElement("div")),s=(St.exec(r)||["",""])[1].toLowerCase(),s=At[s]||At._default,o.innerHTML=s[1]+r.replace(wt,"<$1></$2>")+s[2],s=s[0];s--;)o=o.lastChild;V.merge(l,o.childNodes),(o=a.firstChild).textContent=""}else l.push(e.createTextNode(r));for(a.textContent="",c=0;r=l[c++];)if((!i||-1===V.inArray(r,i))&&(t=V.contains(r.ownerDocument,r),o=g(a.appendChild(r),"script"),t&&p(o),n))for(s=0;r=o[s++];)Tt.test(r.type||"")&&n.push(r);return a},cleanData:function(t){for(var e,n,i,r,o=V.event.special,s=0;void 0!==(n=t[s]);s++){if(V.acceptData(n)&&(r=n[ct.expando])&&(e=ct.cache[r])){if(e.events)for(i in e.events)o[i]?V.event.remove(n,i):V.removeEvent(n,i,e.handle);ct.cache[r]&&delete ct.cache[r]}delete ut.cache[n[ut.expando]]}}}),V.fn.extend({text:function(t){return lt(this,function(t){return void 0===t?V.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||h(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?V.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||V.cleanData(g(n)),n.parentNode&&(e&&V.contains(n.ownerDocument,n)&&p(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(V.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return V.clone(this,t,e)})},html:function(t){return lt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ct.test(t)&&!At[(St.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(wt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(V.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,V.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=R.apply([],t);var n,i,r,o,s=0,a=this.length,l=this,c=a-1,u=t[0],h=V.isFunction(u);if(h||1<a&&"string"==typeof u&&!z.checkClone&&kt.test(u))return this.each(function(n){var i=l.eq(n);h&&(t[0]=u.call(this,n,i.html())),i.domManip(t,e)});if(a&&(i=(n=V.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=i),i)){for(r=(i=V.map(g(n,"script"),d)).length;s<a;s++)o=n,s!==c&&(o=V.clone(o,!0,!0),r&&V.merge(i,g(o,"script"))),e.call(this[s],o,s);if(r)for(n=i[i.length-1].ownerDocument,V.map(i,f),s=0;s<r;s++)o=i[s],Tt.test(o.type||"")&&!ct.access(o,"globalEval")&&V.contains(n,o)&&(o.src?V._evalUrl&&V._evalUrl(o.src):V.globalEval(o.textContent.replace(Et,"")))}return this}}),V.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){V.fn[t]=function(t){for(var n=[],i=V(t),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),V(i[o])[e](t),B.apply(n,t.get());return this.pushStack(n)}});var It,$t={},Dt=/^margin/,Lt=new RegExp("^("+ft+")(?!px)[a-z%]+$","i"),Pt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var e=t.getComputedStyle(s,null);n="1%"!==e.top,i="4px"===e.width,r.removeChild(o)}var n,i,r=U.documentElement,o=U.createElement("div"),s=U.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",z.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),t.getComputedStyle&&V.extend(z,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=s.appendChild(U.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),r.removeChild(o),s.removeChild(n),e}}))}(),V.swap=function(t,e,n,i){var r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=n.apply(t,i||[]),e)t.style[r]=o[r];return n};var Ot=/^(none|table(?!-c[ea]).+)/,Nt=new RegExp("^("+ft+")(.*)$","i"),jt=new RegExp("^([+-])=("+ft+")","i"),Rt={position:"absolute",visibility:"hidden",display:"block"},Bt={letterSpacing:"0",fontWeight:"400"},Ft=["Webkit","O","Moz","ms"];V.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=b(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=V.camelCase(e),l=t.style;if(e=V.cssProps[a]||(V.cssProps[a]=w(l,a)),s=V.cssHooks[e]||V.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:l[e];"string"===(o=typeof n)&&(r=jt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(V.css(t,e)),o="number"),null!=n&&n==n&&("number"!==o||V.cssNumber[a]||(n+="px"),z.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l[e]=n))}},css:function(t,e,n,i){var r,o;return o=V.camelCase(e),e=V.cssProps[o]||(V.cssProps[o]=w(t.style,o)),(o=V.cssHooks[e]||V.cssHooks[o])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=b(t,e,i)),"normal"===r&&e in Bt&&(r=Bt[e]),""===n||n?(t=parseFloat(r),!0===n||V.isNumeric(t)?t||0:r):r}}),V.each(["height","width"],function(t,e){V.cssHooks[e]={get:function(t,n,i){if(n)return Ot.test(V.css(t,"display"))&&0===t.offsetWidth?V.swap(t,Rt,function(){return C(t,e,i)}):C(t,e,i)},set:function(t,n,i){var r=i&&Pt(t);return S(t,n,i?x(t,e,i,"border-box"===V.css(t,"boxSizing",!1,r),r):0)}}}),V.cssHooks.marginRight=_(z.reliableMarginRight,function(t,e){if(e)return V.swap(t,{display:"inline-block"},b,[t,"marginRight"])}),V.each({margin:"",padding:"",border:"Width"},function(t,e){V.cssHooks[t+e]={expand:function(n){var i=0,r={};for(n="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+pt[i]+e]=n[i]||n[i-2]||n[0];return r}},Dt.test(t)||(V.cssHooks[t+e].set=S)}),V.fn.extend({css:function(t,e){return lt(this,function(t,e,n){var i,r={},o=0;if(V.isArray(e)){for(n=Pt(t),i=e.length;o<i;o++)r[e[o]]=V.css(t,e[o],!1,n);return r}return void 0!==n?V.style(t,e,n):V.css(t,e)},t,e,1<arguments.length)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){mt(this)?V(this).show():V(this).hide()})}}),V.Tween=T,T.prototype={constructor:T,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(V.cssNumber[n]?"":"px")},cur:function(){var t=T.propHooks[this.prop];return t&&t.get?t.get(this):T.propHooks._default.get(this)},run:function(t){var e,n=T.propHooks[this.prop];return this.pos=e=this.options.duration?V.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(t){return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(t=V.css(t.elem,t.prop,""))&&"auto"!==t?t:0:t.elem[t.prop]},set:function(t){V.fx.step[t.prop]?V.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[V.cssProps[t.prop]]||V.cssHooks[t.prop])?V.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},V.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},V.fx=T.prototype.init,V.fx.step={};var Yt,Ht,Wt=/^(?:toggle|show|hide)$/,zt=new RegExp("^(?:([+-])=|)("+ft+")([a-z%]*)$","i"),Ut=/queueHooks$/,Vt=[function(t,e,n){var i,r,o,s,a,l,c=this,u={},h=t.style,d=t.nodeType&&mt(t),f=ct.get(t,"fxshow");for(i in n.queue||(null==(s=V._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,V.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===(r="none"===(l=V.css(t,"display"))?ct.get(t,"olddisplay")||y(t.nodeName):l)&&"none"===V.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),e)if(r=e[i],Wt.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!f||void 0===f[i])continue;d=!0}u[i]=f&&f[i]||V.style(t,i)}else l=void 0;if(V.isEmptyObject(u))"inline"===("none"===l?y(t.nodeName):l)&&(h.display=l);else for(i in f?"hidden"in f&&(d=f.hidden):f=ct.access(t,"fxshow",{}),o&&(f.hidden=!d),d?V(t).show():c.done(function(){V(t).hide()}),c.done(function(){var e;for(e in ct.remove(t,"fxshow"),u)V.style(t,e,u[e])}),u)e=A(d?f[i]:0,i,c),i in f||(f[i]=e.start,d&&(e.end=e.start,e.start="width"===i||"height"===i?1:0))}],Gt={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=zt.exec(e),o=r&&r[3]||(V.cssNumber[t]?"":"px"),s=(V.cssNumber[t]||"px"!==o&&+i)&&zt.exec(V.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do{s/=a=a||".5",V.style(n.elem,t,s+o)}while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};V.Animation=V.extend(I,{tweener:function(t,e){V.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;i<r;i++)n=t[i],Gt[n]=Gt[n]||[],Gt[n].unshift(e)},prefilter:function(t,e){e?Vt.unshift(t):Vt.push(t)}}),V.speed=function(t,e,n){var i=t&&"object"==typeof t?V.extend({},t):{complete:n||!n&&e||V.isFunction(t)&&t,duration:t,easing:n&&e||e&&!V.isFunction(e)&&e};return i.duration=V.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in V.fx.speeds?V.fx.speeds[i.duration]:V.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){V.isFunction(i.old)&&i.old.call(this),i.queue&&V.dequeue(this,i.queue)},i},V.fn.extend({fadeTo:function(t,e,n,i){return this.filter(mt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=V.isEmptyObject(t),o=V.speed(e,n,i);return(e=function(){var e=I(this,V.extend({},t),o);(r||ct.get(this,"finish"))&&e.stop(!0)}).finish=e,r||!1===o.queue?this.each(e):this.queue(o.queue,e)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=V.timers,s=ct.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&Ut.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||V.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=ct.get(this),i=n[t+"queue"];e=n[t+"queueHooks"];var r=V.timers,o=i?i.length:0;for(n.finish=!0,V.queue(this,t,[]),e&&e.stop&&e.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),V.each(["toggle","show","hide"],function(t,e){var n=V.fn[e];V.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(E(e,!0),t,i,r)}}),V.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){V.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),V.timers=[],V.fx.tick=function(){var t,e=0,n=V.timers;for(Yt=V.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||V.fx.stop(),Yt=void 0},V.fx.timer=function(t){V.timers.push(t),t()?V.fx.start():V.timers.pop()},V.fx.interval=13,V.fx.start=function(){Ht||(Ht=setInterval(V.fx.tick,V.fx.interval))},V.fx.stop=function(){clearInterval(Ht),Ht=null},V.fx.speeds={slow:600,fast:200,_default:400},V.fn.delay=function(t,e){return t=V.fx&&V.fx.speeds[t]||t,this.queue(e||"fx",function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=U.createElement("input"),e=U.createElement("select"),n=e.appendChild(U.createElement("option"));t.type="checkbox",z.checkOn=""!==t.value,z.optSelected=n.selected,e.disabled=!0,z.optDisabled=!n.disabled,(t=U.createElement("input")).value="t",t.type="radio",z.radioValue="t"===t.value}();var qt,Xt=V.expr.attrHandle;V.fn.extend({attr:function(t,e){return lt(this,V.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){V.removeAttr(this,t)})}}),V.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o){if(void 0===t.getAttribute)return V.prop(t,e,n);if(1===o&&V.isXMLDoc(t)||(e=e.toLowerCase(),i=V.attrHooks[e]||(V.expr.match.bool.test(e)?qt:void 0)),void 0===n)return i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=V.find.attr(t,e))?void 0:r;if(null!==n)return i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n);V.removeAttr(t,e)}},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(st);if(o&&1===t.nodeType)for(;n=o[r++];)i=V.propFix[n]||n,V.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!z.radioValue&&"radio"===e&&V.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),qt={set:function(t,e,n){return!1===e?V.removeAttr(t,n):t.setAttribute(n,n),n}},V.each(V.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Xt[e]||V.find.attr;Xt[e]=function(t,e,i){var r,o;return i||(o=Xt[e],Xt[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,Xt[e]=o),r}});var Kt=/^(?:input|select|textarea|button)$/i;V.fn.extend({prop:function(t,e){return lt(this,V.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[V.propFix[t]||t]})}}),V.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,r,o;if(o=t.nodeType,t&&3!==o&&8!==o&&2!==o)return(o=1!==o||!V.isXMLDoc(t))&&(e=V.propFix[e]||e,r=V.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Kt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),z.optSelected||(V.propHooks.selected={get:function(t){return(t=t.parentNode)&&t.parentNode&&t.parentNode.selectedIndex,null}}),V.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){V.propFix[this.toLowerCase()]=this});var Jt=/[\t\r\n\f]/g;V.fn.extend({addClass:function(t){var e,n,i,r,o;e="string"==typeof t&&t;var s=0,a=this.length;if(V.isFunction(t))return this.each(function(e){V(this).addClass(t.call(this,e,this.className))});if(e)for(e=(t||"").match(st)||[];s<a;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Jt," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");i=V.trim(i),n.className!==i&&(n.className=i)}return this},removeClass:function(t){var e,n,i,r,o;e=0===arguments.length||"string"==typeof t&&t;var s=0,a=this.length;if(V.isFunction(t))return this.each(function(e){V(this).removeClass(t.call(this,e,this.className))});if(e)for(e=(t||"").match(st)||[];s<a;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Jt," "):"")){for(o=0;r=e[o++];)for(;0<=i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");i=t?V.trim(i):"",n.className!==i&&(n.className=i)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):V.isFunction(t)?this.each(function(n){V(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=V(this),o=t.match(st)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else"undefined"!==n&&"boolean"!==n||(this.className&&ct.set(this,"__className__",this.className),this.className=this.className||!1===t?"":ct.get(this,"__className__")||"")})},hasClass:function(t){t=" "+t+" ";for(var e=0,n=this.length;e<n;e++)if(1===this[e].nodeType&&0<=(" "+this[e].className+" ").replace(Jt," ").indexOf(t))return!0;return!1}});var Zt=/\r/g;V.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=V.isFunction(t),this.each(function(n){1===this.nodeType&&(null==(n=i?t.call(this,n,V(this).val()):t)?n="":"number"==typeof n?n+="":V.isArray(n)&&(n=V.map(n,function(t){return null==t?"":t+""})),(e=V.valHooks[this.type]||V.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))})):r?(e=V.valHooks[r.type]||V.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Zt,""):null==n?"":n:void 0}}),V.extend({valHooks:{option:{get:function(t){var e=V.find.attr(t,"value");return null!=e?e:V.trim(V.text(t))}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,r=(t="select-one"===t.type||0>i)?null:[],o=t?i+1:n.length,s=0>i?o:t?i:0;s<o;s++)if(!(!(e=n[s]).selected&&s!==i||(z.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&V.nodeName(e.parentNode,"optgroup"))){if(e=V(e).val(),t)return e;r.push(e)}return r},set:function(t,e){for(var n,i,r=t.options,o=V.makeArray(e),s=r.length;s--;)((i=r[s]).selected=0<=V.inArray(i.value,o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),V.each(["radio","checkbox"],function(){V.valHooks[this]={set:function(t,e){if(V.isArray(e))return t.checked=0<=V.inArray(V(t).val(),e)}},z.checkOn||(V.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),V.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){V.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}}),V.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Qt=V.now(),te=/\?/;V.parseJSON=function(t){return JSON.parse(t+"")},V.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||V.error("Invalid XML: "+t),e};var ee=/#.*$/,ne=/([?&])_=[^&]*/,ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,re=/^(?:GET|HEAD)$/,oe=/^\/\//,se=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ae={},le={},ce="*/".concat("*"),ue=t.location.href,he=se.exec(ue.toLowerCase())||[];V.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ue,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(he[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":V.parseJSON,"text xml":V.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?L(L(t,V.ajaxSettings),e):L(V.ajaxSettings,t)},ajaxPrefilter:$(ae),ajaxTransport:$(le),ajax:function(t,e){function n(t,e,n,s){var l,u,v,y;if(y=e,2!==b){if(b=2,a&&clearTimeout(a),i=void 0,o=s||"",w.readyState=0<t?4:0,s=200<=t&&300>t||304===t,n){for(var _,S,x,C,k=w,T=(v=h).contents,M=v.dataTypes;"*"===M[0];)M.shift(),void 0===_&&(_=v.mimeType||k.getResponseHeader("Content-Type"));if(_)for(S in T)if(T[S]&&T[S].test(_)){M.unshift(S);break}if(M[0]in n)x=M[0];else{for(S in n){if(!M[0]||v.converters[S+" "+M[0]]){x=S;break}C||(C=S)}x=x||C}x?(x!==M[0]&&M.unshift(x),v=n[x]):v=void 0}t:{_=v,S=w,x=s;var E,A,I;k={};if((T=(n=h).dataTypes.slice())[1])for(A in n.converters)k[A.toLowerCase()]=n.converters[A];for(C=T.shift();C;)if(n.responseFields[C]&&(S[n.responseFields[C]]=_),!I&&x&&n.dataFilter&&(_=n.dataFilter(_,n.dataType)),I=C,C=T.shift())if("*"===C)C=I;else if("*"!==I&&I!==C){if(!(A=k[I+" "+C]||k["* "+C]))for(E in k)if((v=E.split(" "))[1]===C&&(A=k[I+" "+v[0]]||k["* "+v[0]])){!0===A?A=k[E]:!0!==k[E]&&(C=v[0],T.unshift(v[1]));break}if(!0!==A)if(A&&n.throws)_=A(_);else try{_=A(_)}catch(t){v={state:"parsererror",error:A?t:"No conversion from "+I+" to "+C};break t}}v={state:"success",data:_}}s?(h.ifModified&&((y=w.getResponseHeader("Last-Modified"))&&(V.lastModified[r]=y),(y=w.getResponseHeader("etag"))&&(V.etag[r]=y)),204===t||"HEAD"===h.type?y="nocontent":304===t?y="notmodified":(y=v.state,l=v.data,s=!(u=v.error))):(u=y,(t||!y)&&(y="error",0>t&&(t=0))),w.status=t,w.statusText=(e||y)+"",s?p.resolveWith(d,[l,y,w]):p.rejectWith(d,[w,y,u]),w.statusCode(g),g=void 0,c&&f.trigger(s?"ajaxSuccess":"ajaxError",[w,h,s?l:u]),m.fireWith(d,[w,y]),c&&(f.trigger("ajaxComplete",[w,h]),--V.active||V.event.trigger("ajaxStop"))}}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,a,l,c,u,h=V.ajaxSetup({},e),d=h.context||h,f=h.context&&(d.nodeType||d.jquery)?V(d):V.event,p=V.Deferred(),m=V.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=ie.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){return t=t||_,i&&i.abort(t),n(0,t),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||ue)+"").replace(ee,"").replace(oe,he[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=V.trim(h.dataType||"*").toLowerCase().match(st)||[""],null==h.crossDomain&&(l=se.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===he[1]&&l[2]===he[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(he[3]||("http:"===he[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=V.param(h.data,h.traditional)),D(ae,h,e,w),2===b)return w;for(u in(c=V.event&&h.global)&&0==V.active++&&V.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!re.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(te.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=ne.test(r)?r.replace(ne,"$1_="+Qt++):r+(te.test(r)?"&":"?")+"_="+Qt++)),h.ifModified&&(V.lastModified[r]&&w.setRequestHeader("If-Modified-Since",V.lastModified[r]),V.etag[r]&&w.setRequestHeader("If-None-Match",V.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+ce+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(d,w,h)||2===b))return w.abort();for(u in _="abort",{success:1,error:1,complete:1})w[u](h[u]);if(i=D(le,h,e,w)){w.readyState=1,c&&f.trigger("ajaxSend",[w,h]),h.async&&0<h.timeout&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,i.send(v,n)}catch(t){if(!(2>b))throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return V.get(t,e,n,"json")},getScript:function(t,e){return V.get(t,void 0,e,"script")}}),V.each(["get","post"],function(t,e){V[e]=function(t,n,i,r){return V.isFunction(n)&&(r=r||i,i=n,n=void 0),V.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),V._evalUrl=function(t){return V.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},V.fn.extend({wrapAll:function(t){var e;return V.isFunction(t)?this.each(function(e){V(this).wrapAll(t.call(this,e))}):(this[0]&&(e=V(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return V.isFunction(t)?this.each(function(e){V(this).wrapInner(t.call(this,e))}):this.each(function(){var e=V(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=V.isFunction(t);return this.each(function(n){V(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){V.nodeName(this,"body")||V(this).replaceWith(this.childNodes)}).end()}}),V.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},V.expr.filters.visible=function(t){return!V.expr.filters.hidden(t)};var de=/%20/g,fe=/\[\]$/,pe=/\r?\n/g,me=/^(?:submit|button|image|reset|file)$/i,ge=/^(?:input|select|textarea|keygen)/i;V.param=function(t,e){var n,i=[],r=function(t,e){e=V.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=V.ajaxSettings&&V.ajaxSettings.traditional),V.isArray(t)||t.jquery&&!V.isPlainObject(t))V.each(t,function(){r(this.name,this.value)});else for(n in t)P(n,t[n],e,r);return i.join("&").replace(de,"+")},V.fn.extend({serialize:function(){return V.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=V.prop(this,"elements");return t?V.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!V(this).is(":disabled")&&ge.test(this.nodeName)&&!me.test(t)&&(this.checked||!gt.test(t))}).map(function(t,e){var n=V(this).val();return null==n?null:V.isArray(n)?V.map(n,function(t){return{name:e.name,value:t.replace(pe,"\r\n")}}):{name:e.name,value:n.replace(pe,"\r\n")}}).get()}}),V.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var ve=0,ye={},be={0:200,1223:204},_e=V.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in ye)ye[t]()}),z.cors=!!_e&&"withCredentials"in _e,z.ajax=_e=!!_e,V.ajaxTransport(function(t){var e;if(z.cors||_e&&!t.crossDomain)return{send:function(n,i){var r,o=t.xhr(),s=++ve;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];for(r in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(delete ye[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?i(o.status,o.statusText):i(be[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=ye[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),V.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return V.globalEval(t),t}}}),V.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),V.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,r){e=V("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),U.head.appendChild(e[0])},abort:function(){n&&n()}}});var we=[],Se=/(=)\?(?=&|$)|\?\?/;V.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=we.pop()||V.expando+"_"+Qt++;return this[t]=!0,t}}),V.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,s,a=!1!==e.jsonp&&(Se.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Se.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=V.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Se,"$1"+r):!1!==e.jsonp&&(e.url+=(te.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||V.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,we.push(r)),s&&V.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),V.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||U;var i=Q.exec(t);return n=!n&&[],i?[e.createElement(i[1])]:(i=V.buildFragment([t],e,n),n&&n.length&&V(n).remove(),V.merge([],i.childNodes))};var xe=V.fn.load;V.fn.load=function(t,e,n){if("string"!=typeof t&&xe)return xe.apply(this,arguments);var i,r,o,s=this,a=t.indexOf(" ");return 0<=a&&(i=V.trim(t.slice(a)),t=t.slice(0,a)),V.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<s.length&&V.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?V("<div>").append(V.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},V.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){V.fn[e]=function(t){return this.on(e,t)}}),V.expr.filters.animated=function(t){return V.grep(V.timers,function(e){return t===e.elem}).length};var Ce=t.document.documentElement;V.offset={setOffset:function(t,e,n){var i,r,o,s=V.css(t,"position"),a=V(t),l={};"static"===s&&(t.style.position="relative"),o=a.offset(),r=V.css(t,"top"),i=V.css(t,"left"),("absolute"===s||"fixed"===s)&&-1<(r+i).indexOf("auto")?(r=(i=a.position()).top,i=i.left):(r=parseFloat(r)||0,i=parseFloat(i)||0),V.isFunction(e)&&(e=e.call(t,n,o)),null!=e.top&&(l.top=e.top-o.top+r),null!=e.left&&(l.left=e.left-o.left+i),"using"in e?e.using.call(t,l):a.css(l)}},V.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){V.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=(n=this[0])&&n.ownerDocument;return r?(e=r.documentElement,V.contains(e,n)?(void 0!==n.getBoundingClientRect&&(i=n.getBoundingClientRect()),n=O(r),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===V.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),V.nodeName(t[0],"html")||(i=t.offset()),i.top+=V.css(t[0],"borderTopWidth",!0),i.left+=V.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-V.css(n,"marginTop",!0),left:e.left-i.left-V.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ce;t&&!V.nodeName(t,"html")&&"static"===V.css(t,"position");)t=t.offsetParent;return t||Ce})}}),V.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;V.fn[e]=function(r){return lt(this,function(e,r,o){var s=O(e);if(void 0===o)return s?s[n]:e[r];s?s.scrollTo(i?t.pageXOffset:o,i?o:t.pageYOffset):e[r]=o},e,r,arguments.length,null)}}),V.each(["top","left"],function(t,e){V.cssHooks[e]=_(z.pixelPosition,function(t,n){if(n)return n=b(t,e),Lt.test(n)?V(t).position()[e]+"px":n})}),V.each({Height:"height",Width:"width"},function(t,e){V.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){V.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return lt(this,function(e,n,i){return V.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===i?V.css(e,n,s):V.style(e,n,i,s)},e,o?i:void 0,o,null)}})}),V.fn.size=function(){return this.length},V.fn.andSelf=V.fn.addBack,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return V}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__=[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__);var ke=t.jQuery,Te=t.$;return V.noConflict=function(e){return t.$===V&&(t.$=Te),e&&t.jQuery===V&&(t.jQuery=ke),V},void 0===e&&(t.jQuery=t.$=V),V}),function(){var t=window.WebSocket||window.MozWebSocket,e=(e=window.brunch=window.brunch||{})["auto-reload"]=e["auto-reload"]||{};t&&!e.disabled&&(t=navigator.userAgent.toLowerCase(),e.forceRepaint||t.indexOf("chrome"))}()}).call(this,__webpack_require__(7),__webpack_require__(4).Buffer,__webpack_require__(9))},function(t,e,n){"use strict";t.exports=n(431)},function(t,e,n){e.iframeResizer=n(432),e.iframeResizerContentWindow=n(433)},function(t,e,n){var i,r,o;!function(n){"use strict";if("undefined"!=typeof window){var s,a=0,l=!1,c=!1,u="message".length,h="[iFrameSizer]",d=h.length,f=null,p=window.requestAnimationFrame,m={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},g={},v=null,y={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){M("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}},b={};window.jQuery&&((s=window.jQuery).fn?s.fn.iFrameResize||(s.fn.iFrameResize=function(t){return this.filter("iframe").each(function(e,n){Y(n,t)}).end()}):T("","Unable to bind to jQuery, it is not fully loaded.")),r=[],(o="function"==typeof(i=V)?i.apply(e,r):i)===n||(t.exports=o),window.iFrameResize=window.iFrameResize||V()}function _(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function w(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function S(t,e,n){"removeEventListener"in window?t.removeEventListener(e,n,!1):"detachEvent"in window&&t.detachEvent("on"+e,n)}function x(t){return h+"["+function(t){var e="Host page: "+t;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),e}(t)+"]"}function C(t){return g[t]?g[t].log:l}function k(t,e){E("log",t,e,C(t))}function T(t,e){E("info",t,e,C(t))}function M(t,e){E("warn",t,e,!0)}function E(t,e,n,i){!0===i&&"object"==typeof window.console&&console[t](x(e),n)}function A(t){function e(){n("Height"),n("Width"),R(function(){j(y),P(_),l("resizedCallback",y)},y,"init")}function n(t){var e=Number(g[_]["max"+t]),n=Number(g[_]["min"+t]),i=t.toLowerCase(),r=Number(y[i]);k(_,"Checking "+i+" is in range "+n+"-"+e),r<n&&(r=n,k(_,"Set "+i+" to min value")),r>e&&(r=e,k(_,"Set "+i+" to max value")),y[i]=""+r}function i(t){return v.substr(v.indexOf(":")+u+t)}function r(t,e){var n,i,r;n=function(){var n,i;B("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),i=y.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:i.height,iframeWidth:i.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(i.top-n.top,10),offsetLeft:parseInt(i.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})),t,e)},i=32,b[r=e]||(b[r]=setTimeout(function(){b[r]=null,n()},i))}function o(t){var e=t.getBoundingClientRect();return L(_),{x:Math.floor(Number(e.left)+Number(f.x)),y:Math.floor(Number(e.top)+Number(f.y))}}function s(t){var e=t?o(y.iframe):{x:0,y:0},n={x:Number(y.width)+e.x,y:Number(y.height)+e.y};k(_,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):M(_,"Unable to scroll to requested position, window.parentIFrame not found"):(f=n,a(),k(_,"--"))}function a(){!1!==l("scrollCallback",f)?P(_):O()}function l(t,e){return I(_,t,e)}var c,p,m,v=t.data,y={},_=null;"[iFrameResizerChild]Ready"===v?function(){for(var t in g)B("iFrame requested init",F(t),document.getElementById(t),t)}():h===(""+v).substr(0,d)&&v.substr(d).split(":")[0]in g?(m=v.substr(d).split(":"),y={iframe:g[m[0]]&&g[m[0]].iframe,id:m[0],height:m[1],width:m[2],type:m[3]},_=y.id,g[_]&&(g[_].loaded=!0),(p=y.type in{true:1,false:1,undefined:1})&&k(_,"Ignoring init message from meta parent page"),!p&&function(t){var e=!0;return g[t]||(e=!1,M(y.type+" No settings for "+t+". Message was: "+v)),e}(_)&&(k(_,"Received: "+v),c=!0,null===y.iframe&&(M(_,"IFrame ("+y.id+") not found"),c=!1),c&&function(){var e,n=t.origin,i=g[_]&&g[_].checkOrigin;if(i&&""+n!="null"&&!(i.constructor===Array?function(){var t=0,e=!1;for(k(_,"Checking connection is from allowed list of origins: "+i);t<i.length;t++)if(i[t]===n){e=!0;break}return e}():(e=g[_]&&g[_].remoteHost,k(_,"Checking connection is from: "+e),n===e)))throw new Error("Unexpected message received from: "+n+" for "+y.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(g[_]&&g[_].firstRun&&g[_]&&(g[_].firstRun=!1),y.type){case"close":g[_].closeRequestCallback?I(_,"closeRequestCallback",g[_].iframe):D(y.iframe);break;case"message":t=i(6),k(_,"MessageCallback passed: {iframe: "+y.iframe.id+", message: "+t+"}"),l("messageCallback",{iframe:y.iframe,message:JSON.parse(t)}),k(_,"--");break;case"scrollTo":s(!1);break;case"scrollToOffset":s(!0);break;case"pageInfo":r(g[_]&&g[_].iframe,_),function(){function t(t,i){function o(){g[n]?r(g[n].iframe,n):e()}["scroll","resize"].forEach(function(e){k(n,t+e+" listener for sendPageInfo"),i(window,e,o)})}function e(){t("Remove ",S)}var n=_;t("Add ",w),g[n]&&(g[n].stopPageInfo=e)}();break;case"pageInfoStop":g[_]&&g[_].stopPageInfo&&(g[_].stopPageInfo(),delete g[_].stopPageInfo);break;case"inPageLink":!function(t){var e,n=t.split("#")[1]||"",i=decodeURIComponent(n),r=document.getElementById(i)||document.getElementsByName(i)[0];r?(e=o(r),k(_,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),f={x:e.x,y:e.y},a(),k(_,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):k(_,"In page link #"+n+" not found and window.parentIFrame not found"):k(_,"In page link #"+n+" not found")}(i(9));break;case"reset":N(y);break;case"init":e(),l("initCallback",y.iframe);break;default:e()}var t}())):T(_,"Ignored: "+v)}function I(t,e,n){var i=null,r=null;if(g[t]){if("function"!=typeof(i=g[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");r=i(n)}return r}function $(t){var e=t.id;delete g[e]}function D(t){var e=t.id;k(e,"Removing iFrame: "+e);try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){}I(e,"closedCallback",e),k(e,"--"),$(t)}function L(t){null===f&&k(t,"Get page position: "+(f={x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop}).x+","+f.y)}function P(t){null!==f&&(window.scrollTo(f.x,f.y),k(t,"Set page position: "+f.x+","+f.y),O())}function O(){f=null}function N(t){k(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),L(t.id),R(function(){j(t),B("reset","reset",t.iframe,t.id)},t,"reset")}function j(t){function e(e){c||"0"!==t[e]||(c=!0,k(i,"Hidden iFrame detected, creating visibility listener"),function(){function t(){function t(t){function e(e){return"0px"===(g[t]&&g[t].iframe.style[e])}g[t]&&null!==g[t].iframe.offsetParent&&(e("height")||e("width"))&&B("Visibility change","resize",g[t].iframe,t)}for(var e in g)t(e)}function e(e){k("window","Mutation observed: "+e[0].target+" "+e[0].type),H(t,16)}var n=_();n&&(i=document.querySelector("body"),new n(e).observe(i,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}));var i}())}function n(n){!function(e){t.id?(t.iframe.style[e]=t[e]+"px",k(t.id,"IFrame ("+i+") "+e+" set to "+t[e]+"px")):k("undefined","messageData id not set")}(n),e(n)}var i=t.iframe.id;g[i]&&(g[i].sizeHeight&&n("height"),g[i].sizeWidth&&n("width"))}function R(t,e,n){n!==e.type&&p?(k(e.id,"Requesting animation frame"),p(t)):t()}function B(t,e,n,i,r){var o,s=!1;i=i||n.id,g[i]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(o=g[i]&&g[i].targetOrigin,k(i,"["+t+"] Sending msg to iframe["+i+"] ("+e+") targetOrigin: "+o),n.contentWindow.postMessage(h+e,o)):M(i,"["+t+"] IFrame("+i+") not found"),r&&g[i]&&g[i].warningTimeout&&(g[i].msgTimeout=setTimeout(function(){!g[i]||g[i].loaded||s||(s=!0,M(i,"IFrame has not responded within "+g[i].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},g[i].warningTimeout)))}function F(t){return t+":"+g[t].bodyMarginV1+":"+g[t].sizeWidth+":"+g[t].log+":"+g[t].interval+":"+g[t].enablePublicMethods+":"+g[t].autoResize+":"+g[t].bodyMargin+":"+g[t].heightCalculationMethod+":"+g[t].bodyBackground+":"+g[t].bodyPadding+":"+g[t].tolerance+":"+g[t].inPageLinks+":"+g[t].resizeFrom+":"+g[t].widthCalculationMethod}function Y(t,e){var i=function(n){var i;return n,""===n&&(t.id=(i=e&&e.id||y.id+a++,null!==document.getElementById(i)&&(i+=a++),n=i),l=(e||{}).log,n,k(n,"Added missing iframe ID: "+n+" ("+t.src+")")),n}(t.id);i in g&&"iFrameResizer"in t?M(i,"Ignored iFrame, already setup."):(!function(e){var n;e=e||{},g[i]={firstRun:!0,iframe:t,remoteHost:t.src.split("/").slice(0,3).join("/")},function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(e),function(t){for(var e in y)y.hasOwnProperty(e)&&(g[i][e]=t.hasOwnProperty(e)?t[e]:y[e])}(e),g[i]&&(g[i].targetOrigin=!0===g[i].checkOrigin?""===(n=g[i].remoteHost)||"file://"===n?"*":n:"*")}(e),function(){switch(k(i,"IFrame scrolling "+(g[i]&&g[i].scrolling?"enabled":"disabled")+" for "+i),t.style.overflow=!1===(g[i]&&g[i].scrolling)?"hidden":"auto",g[i]&&g[i].scrolling){case"omit":break;case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=g[i]?g[i].scrolling:"no"}}(),function(){function e(e){1/0!==g[i][e]&&0!==g[i][e]&&(t.style[e]=g[i][e]+"px",k(i,"Set "+e+" = "+g[i][e]+"px"))}function n(t){if(g[i]["min"+t]>g[i]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),"number"!=typeof(g[i]&&g[i].bodyMargin)&&"0"!==(g[i]&&g[i].bodyMargin)||(g[i].bodyMarginV1=g[i].bodyMargin,g[i].bodyMargin=g[i].bodyMargin+"px"),function(e){var r=_();r&&function(e){t.parentNode&&new e(function(e){e.forEach(function(e){Array.prototype.slice.call(e.removedNodes).forEach(function(e){e===t&&D(t)})})}).observe(t.parentNode,{childList:!0})}(r),w(t,"load",function(){var r,o;B("iFrame.onload",e,t,n,!0),r=g[i]&&g[i].firstRun,o=g[i]&&g[i].heightCalculationMethod in m,!r&&o&&N({iframe:t,height:0,width:0,type:"init"})}),B("init",e,t,n,!0)}(F(i)),Function.prototype.bind&&g[i]&&(g[i].iframe.iFrameResizer={close:D.bind(null,g[i].iframe),removeListeners:$.bind(null,g[i].iframe),resize:B.bind(null,"Window resize","resize",g[i].iframe),moveToAnchor:function(t){B("Move to anchor","moveToAnchor:"+t,g[i].iframe,i)},sendMessage:function(t){B("Send Message","message:"+(t=JSON.stringify(t)),g[i].iframe,i)}}))}function H(t,e){null===v&&(v=setTimeout(function(){v=null,t()},e))}function W(t){k("window","Trigger event: "+t),H(function(){U("Window "+t,"resize")},16)}function z(){"hidden"!==document.visibilityState&&(k("document","Trigger event: Visiblity change"),H(function(){U("Tab Visable","resize")},16))}function U(t,e){function n(t){return g[t]&&"parent"===g[t].resizeFrom&&g[t].autoResize&&!g[t].firstRun}for(var i in g)n(i)&&B(t,e,document.getElementById(i),i)}function V(){function t(t,n){n&&(!function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}(),Y(n,t),e.push(n))}var e;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!p;t+=1)p=window[e[t]+"RequestAnimationFrame"];p||k("setup","RequestAnimationFrame not supported")}(),w(window,"message",A),w(window,"resize",function(){W("resize")}),w(document,"visibilitychange",z),w(document,"-webkit-visibilitychange",z),w(window,"focusin",function(){W("focus")}),w(window,"focus",function(){W("focus")}),function(i,r){switch(e=[],function(t){t&&t.enablePublicMethods&&M("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(i),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),t.bind(n,i));break;case"object":t(i,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return e}}}()},function(t,e,n){!function(e){"use strict";if("undefined"!=typeof window){var n=!0,i=10,r="",o=0,s="",a=null,l="",c=!1,u={resize:1,click:1},h=128,d=!0,f=1,p="bodyOffset",m=p,g=!0,v="",y={},b=32,_=null,w=!1,S="[iFrameSizer]",x=S.length,C="",k={max:1,min:1,bodyScroll:1,documentElementScroll:1},T="child",M=!0,E=window.parent,A="*",I=0,$=!1,D=null,L=16,P=1,O="scroll",N=O,j=window,R=function(){lt("MessageCallback function not defined")},B=function(){},F=function(){},Y={height:function(){return lt("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return lt("Custom width calculation function not defined"),document.body.scrollWidth}},H={},W=!1;try{var z=Object.create({},{passive:{get:function(){W=!0}},once:{get:function(){!0}}});window.addEventListener("test",nt,z),window.removeEventListener("test",nt,z)}catch(t){}var U,V,G,q,X,K,J,Z=Date.now||function(){return(new Date).getTime()},Q={bodyOffset:function(){return document.body.offsetHeight+bt("marginTop")+bt("marginBottom")},offset:function(){return Q.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Y.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,wt(Q))},min:function(){return Math.min.apply(null,wt(Q))},grow:function(){return Q.max()},lowestElement:function(){return Math.max(Q.bodyOffset()||Q.documentElementOffset(),_t("bottom",xt()))},taggedElement:function(){return St("bottom","data-iframe-height")}},tt={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Y.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(tt.bodyScroll(),tt.documentElementScroll())},max:function(){return Math.max.apply(null,wt(tt))},min:function(){return Math.min.apply(null,wt(tt))},rightMostElement:function(){return _t("right",xt())},taggedElement:function(){return St("right","data-iframe-width")}},et=(U=Ct,X=null,K=0,J=function(){K=Z(),X=null,q=U.apply(V,G),X||(V=G=null)},function(){var t=Z();K||(K=t);var e=L-(t-K);return V=this,G=arguments,e<=0||e>L?(X&&(clearTimeout(X),X=null),K=t,q=U.apply(V,G),X||(V=G=null)):X||(X=setTimeout(J,e)),q});it(window,"message",It),it(window,"readystatechange",$t),$t()}function nt(){}function it(t,e,n,i){"addEventListener"in window?t.addEventListener(e,n,!!W&&(i||{})):"attachEvent"in window&&t.attachEvent("on"+e,n)}function rt(t,e,n){"removeEventListener"in window?t.removeEventListener(e,n,!1):"detachEvent"in window&&t.detachEvent("on"+e,n)}function ot(t){return t.charAt(0).toUpperCase()+t.slice(1)}function st(t){return S+"["+C+"] "+t}function at(t){w&&"object"==typeof window.console&&console.log(st(t))}function lt(t){"object"==typeof window.console&&console.warn(st(t))}function ct(){var t;!function(){function t(t){return"true"===t}var i=v.substr(x).split(":");C=i[0],o=e!==i[1]?Number(i[1]):o,c=e!==i[2]?t(i[2]):c,w=e!==i[3]?t(i[3]):w,b=e!==i[4]?Number(i[4]):b,n=e!==i[6]?t(i[6]):n,s=i[7],m=e!==i[8]?i[8]:m,r=i[9],l=i[10],I=e!==i[11]?Number(i[11]):I,y.enable=e!==i[12]&&t(i[12]),T=e!==i[13]?i[13]:T,N=e!==i[14]?i[14]:N}(),at("Initialising iFrame ("+location.href+")"),function(){function t(t,e){return"function"==typeof t&&(at("Setup custom "+e+"CalcMethod"),Y[e]=t,t="custom"),t}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(e=window.iFrameResizer,at("Reading data from page: "+JSON.stringify(e)),R="messageCallback"in e?e.messageCallback:R,B="readyCallback"in e?e.readyCallback:B,A="targetOrigin"in e?e.targetOrigin:A,m="heightCalculationMethod"in e?e.heightCalculationMethod:m,N="widthCalculationMethod"in e?e.widthCalculationMethod:N,m=t(m,"height"),N=t(N,"width"));var e;at("TargetOrigin for parent set to: "+A)}(),function(){e===s&&(s=o+"px");ut("margin",function(t,e){-1!==e.indexOf("-")&&(lt("Negative CSS value ignored for "+t),e="");return e}("margin",s))}(),ut("background",r),ut("padding",l),(t=document.createElement("div")).style.clear="both",t.style.display="block",document.body.appendChild(t),pt(),mt(),document.documentElement.style.height="",document.body.style.height="",at('HTML & body height set to "auto"'),at("Enable public methods"),j.parentIFrame={autoResize:function(t){return!0===t&&!1===n?(n=!0,gt()):!1===t&&!0===n&&(n=!1,vt()),n},close:function(){At(0,0,"close"),at("Disable outgoing messages"),M=!1,at("Remove event listener: Message"),rt(window,"message",It),!0===n&&vt()},getId:function(){return C},getPageInfo:function(t){"function"==typeof t?(F=t,At(0,0,"pageInfo")):(F=function(){},At(0,0,"pageInfoStop"))},moveToAnchor:function(t){y.findTarget(t)},reset:function(){Et("parentIFrame.reset")},scrollTo:function(t,e){At(e,t,"scrollTo")},scrollToOffset:function(t,e){At(e,t,"scrollToOffset")},sendMessage:function(t,e){At(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){m=t,pt()},setWidthCalculationMethod:function(t){N=t,mt()},setTargetOrigin:function(t){at("Set targetOrigin: "+t),A=t},size:function(t,e){kt("size","parentIFrame.size("+(t||"")+(e?","+e:"")+")",t,e)}},gt(),y=function(){function t(t){var n=t.getBoundingClientRect(),i={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop};return{x:parseInt(n.left,10)+parseInt(i.x,10),y:parseInt(n.top,10)+parseInt(i.y,10)}}function n(n){var i=n.split("#")[1]||n,r=decodeURIComponent(i),o=document.getElementById(r)||document.getElementsByName(r)[0];e!==o?function(e){var n=t(e);at("Moving to in page link (#"+i+") at x: "+n.x+" y: "+n.y),At(n.y,n.x,"scrollToOffset")}(o):(at("In page link (#"+i+") not found in iFrame, so sending to parent"),At(0,0,"inPageLink","#"+i))}function i(){""!==location.hash&&"#"!==location.hash&&n(location.href)}y.enable?Array.prototype.forEach&&document.querySelectorAll?(at("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(t){"#"!==t.getAttribute("href")&&it(t,"click",function(t){t.preventDefault(),n(this.getAttribute("href"))})}),it(window,"hashchange",i),setTimeout(i,h)):lt("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):at("In page linking not enabled");return{findTarget:n}}(),kt("init","Init message from host page"),B()}function ut(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,at("Body "+t+' set to "'+n+'"'))}function ht(t){var e={add:function(e){function n(){kt(t.eventName,t.eventType)}H[e]=n,it(window,e,n,{passive:!0})},remove:function(t){var e=H[t];delete H[t],rt(window,t,e)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(e[t.method])):e[t.method](t.eventName),at(ot(t.method)+" event listener: "+t.eventType)}function dt(t){ht({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ht({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ht({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ht({method:t,eventType:"Input",eventName:"input"}),ht({method:t,eventType:"Mouse Up",eventName:"mouseup"}),ht({method:t,eventType:"Mouse Down",eventName:"mousedown"}),ht({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),ht({method:t,eventType:"Print",eventName:["afterprint","beforeprint"]}),ht({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),ht({method:t,eventType:"Touch Start",eventName:"touchstart"}),ht({method:t,eventType:"Touch End",eventName:"touchend"}),ht({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),ht({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ht({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ht({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===T&&ht({method:t,eventType:"IFrame Resized",eventName:"resize"})}function ft(t,e,n,i){return e!==t&&(t in n||(lt(t+" is not a valid option for "+i+"CalculationMethod."),t=e),at(i+' calculation method set to "'+t+'"')),t}function pt(){m=ft(m,p,Q,"height")}function mt(){N=ft(N,O,tt,"width")}function gt(){var t;!0===n?(dt("add"),t=0>b,window.MutationObserver||window.WebKitMutationObserver?t?yt():a=function(){function t(t){function e(t){!1===t.complete&&(at("Attach listeners to "+t.src),t.addEventListener("load",r,!1),t.addEventListener("error",o,!1),a.push(t))}"attributes"===t.type&&"src"===t.attributeName?e(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),e)}function n(t){at("Remove listeners from "+t.src),t.removeEventListener("load",r,!1),t.removeEventListener("error",o,!1),function(t){a.splice(a.indexOf(t),1)}(t)}function i(t,i,r){n(t.target),kt(i,r+": "+t.target.src,e,e)}function r(t){i(t,"imageLoad","Image loaded")}function o(t){i(t,"imageLoadFailed","Image load failed")}function s(e){kt("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}var a=[],l=window.MutationObserver||window.WebKitMutationObserver,c=function(){var t=document.querySelector("body");return c=new l(s),at("Create body MutationObserver"),c.observe(t,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),c}();return{disconnect:function(){"disconnect"in c&&(at("Disconnect body MutationObserver"),c.disconnect(),a.forEach(n))}}}():(at("MutationObserver not supported in this browser!"),yt())):at("Auto Resize disabled")}function vt(){dt("remove"),null!==a&&a.disconnect(),clearInterval(_)}function yt(){0!==b&&(at("setInterval: "+b+"ms"),_=setInterval(function(){kt("interval","setInterval: "+b)},Math.abs(b)))}function bt(t,e){var n=0;return e=e||document.body,n="defaultView"in document&&"getComputedStyle"in document.defaultView?null!==(n=document.defaultView.getComputedStyle(e,null))?n[t]:0:function(t){if(/^\d+(px)?$/i.test(t))return parseInt(t,i);var n=e.style.left,r=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft,e.style.left=n,e.runtimeStyle.left=r,t}(e.currentStyle[t]),parseInt(n,i)}function _t(t,e){for(var n=e.length,i=0,r=0,o=ot(t),s=Z(),a=0;a<n;a++)(i=e[a].getBoundingClientRect()[t]+bt("margin"+o,e[a]))>r&&(r=i);return s=Z()-s,at("Parsed "+n+" HTML elements"),at("Element position calculated in "+s+"ms"),function(t){t>L/2&&at("Event throttle increased to "+(L=2*t)+"ms")}(s),r}function wt(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function St(t,e){var n=document.querySelectorAll("["+e+"]");return 0===n.length&&(lt("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),_t(t,n)}function xt(){return document.querySelectorAll("body *")}function Ct(t,n,i,r){var o,s;!function(){function t(t,e){return!(Math.abs(t-e)<=I)}return o=e!==i?i:Q[m](),s=e!==r?r:tt[N](),t(f,o)||c&&t(P,s)}()&&"init"!==t?t in{init:1,interval:1,size:1}||!(m in k||c&&N in k)?t in{interval:1}||at("No change in size detected"):Et(n):(Tt(),At(f=o,P=s,t))}function kt(t,e,n,i){$&&t in u?at("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||at("Trigger event: "+e),"init"===t?Ct(t,e,n,i):et(t,e,n,i))}function Tt(){$||($=!0,at("Trigger event lock on")),clearTimeout(D),D=setTimeout(function(){$=!1,at("Trigger event lock off"),at("--")},h)}function Mt(t){f=Q[m](),P=tt[N](),At(f,P,t)}function Et(t){var e=m;m=p,at("Reset trigger event: "+t),Tt(),Mt("reset"),m=e}function At(t,n,i,r,o){var s;!0===M&&(e===o?o=A:at("Message targetOrigin: "+o),at("Sending message to host page ("+(s=C+":"+t+":"+n+":"+i+(e!==r?":"+r:""))+")"),E.postMessage(S+s,o))}function It(e){var n={init:function(){v=e.data,E=e.source,ct(),d=!1,setTimeout(function(){g=!1},h)},reset:function(){g?at("Page reset ignored by init"):(at("Page size reset by host page"),Mt("resetPage"))},resize:function(){kt("resizeParent","Parent window requested size check")},moveToAnchor:function(){y.findTarget(r())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=r();at("PageInfoFromParent called from parent: "+t),F(JSON.parse(t)),at(" --")},message:function(){var t=r();at("MessageCallback called from parent: "+t),R(JSON.parse(t)),at(" --")}};function i(){return e.data.split("]")[1].split(":")[0]}function r(){return e.data.substr(e.data.indexOf(":")+1)}function o(){return e.data.split(":")[2]in{true:1,false:1}}function s(){var r=i();r in n?n[r]():!t.exports&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||o()||lt("Unexpected message ("+e.data+")")}S===(""+e.data).substr(0,x)&&(!1===d?s():o()?n.init():at('Ignored message of type "'+i()+'". Received before initialization.'))}function $t(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()},function(t,e,n){(function(e,n){
/**! hopscotch - v0.3.1
*
* Copyright 2017 LinkedIn Corp. All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
t.exports=function(){"use strict";var t,i,r,o,s,a,l,c,u,h,d,f,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m="bubble_default",g=window.Sizzle||null,v="undefined",y=!1,b=(void 0===e?"undefined":p(e))!==v,_=!1,w=!1,S=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,x={left:"right",right:"left"};try{p(window.sessionStorage)!==v&&(_=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),w=!0)}catch(t){}return d={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),(c={addClass:function(t,e){var n,i,r,o;if(t.className){for(i=e.split(/\s+/),n=" "+t.className+" ",r=0,o=i.length;o>r;++r)n.indexOf(" "+i[r]+" ")<0&&(n+=i[r]+" ");t.className=n.replace(/^\s+|\s+$/g,"")}else t.className=e},removeClass:function(t,e){var n,i,r,o;for(i=e.split(/\s+/),n=" "+t.className+" ",r=0,o=i.length;o>r;++r)n=n.replace(" "+i[r]+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")},hasClass:function(t,e){return!!t.className&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},getPixelValue:function(t){var e=void 0===t?"undefined":p(t);return"number"===e?t:"string"===e?parseInt(t,10):0},valOrDefault:function(t,e){return(void 0===t?"undefined":p(t))!==v?t:e},invokeCallbackArrayHelper:function(t){var e;return Array.isArray(t)&&"function"==typeof(e=h[t[0]])?e.apply(this,t.slice(1)):void 0},invokeCallbackArray:function(t){var e,n;if(Array.isArray(t)){if("string"==typeof t[0])return c.invokeCallbackArrayHelper(t);for(e=0,n=t.length;n>e;++e)c.invokeCallback(t[e])}},invokeCallback:function(t){return"function"==typeof t?t():"string"==typeof t&&h[t]?h[t]():c.invokeCallbackArray(t)},invokeEventCallbacks:function(t,e){var n,i,r=u[t];if(e)return this.invokeCallback(e);for(n=0,i=r.length;i>n;++n)this.invokeCallback(r[n].cb)},getScrollTop:function(){return p(window.pageYOffset)!==v?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return p(window.pageXOffset)!==v?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function(t,e,n){return t?t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n):void 0},removeEvtListener:function(t,e,n){return t?t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n):void 0},documentIsReady:function(){return"complete"===document.readyState},evtPreventDefault:function(t){t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)},extend:function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},getElementByIdentifier:function(t){var n=document.getElementById(t);if(n)return n;if(b)return(n=e(t)).length?n[0]:null;if(g)return(n=new g(t)).length?n[0]:null;if(document.querySelector)try{return document.querySelector(t)}catch(t){}return/^#[a-zA-Z][\w-_:.]*$/.test(t)?document.getElementById(t.substring(1)):null},getContainer:function(t){return t.container?"string"==typeof t.container?c.getElementByIdentifier(t.container)||document.body:t.container:document.body},getStepTarget:function(t){var e;if(!t||!t.target)return null;if("string"==typeof t.target)return c.getElementByIdentifier(t.target);if(Array.isArray(t.target)){var n,i;for(n=0,i=t.target.length;i>n;n++)if("string"==typeof t.target[n]&&(e=c.getElementByIdentifier(t.target[n])))return e;return null}return t.target},getI18NString:function(t){return s[t]||o[t]},setState:function(t,e,n){var i,r="";if(_&&w)try{sessionStorage.setItem(t,e)}catch(i){w=!1,this.setState(t,e,n)}else _&&sessionStorage.removeItem(t),n&&((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()),document.cookie=t+"="+e+r+"; path=/"},getState:function(t){var e,n,i,r=t+"=",o=document.cookie.split(";");if(_&&(i=sessionStorage.getItem(t)))return i;for(e=0;e<o.length;e++){for(n=o[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r)){i=n.substring(r.length,n.length);break}}return i},clearState:function(t){_?sessionStorage.removeItem(t):this.setState(t,"",-1)},normalizePlacement:function(t){!t.placement&&t.orientation&&(t.placement=t.orientation)},flipPlacement:function(t){if(t.isRtl&&!t._isFlipped){var e,n,i=["orientation","placement"];for(n in t.xOffset&&(t.xOffset=-1*this.getPixelValue(t.xOffset)),i)e=i[n],t.hasOwnProperty(e)&&x.hasOwnProperty(t[e])&&(t[e]=x[t[e]]);t._isFlipped=!0}}}).addEvtListener(window,"load",function(){y&&f.startTour()}),u={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},h={},o={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},s={},(i=function(t){this.init(t)}).prototype={isShowing:!1,currStep:void 0,setPosition:function(t){var e,n,i,r,o,s,a,l,u=(c.getContainer(this.opt),c.getStepTarget(t)),h=this.element,d=this.arrowEl,f=t.isRtl?"right":"left";if(c.flipPlacement(t),c.normalizePlacement(t),n=h.offsetWidth,e=h.offsetHeight,c.removeClass(h,"fade-in-down fade-in-up fade-in-left fade-in-right"),i=u.getBoundingClientRect(),a=t.isRtl?i.right-n:i.left,"top"===t.placement)r=i.top-e-this.opt.arrowWidth,o=a;else if("bottom"===t.placement)r=i.bottom+this.opt.arrowWidth,o=a;else if("left"===t.placement)r=i.top,o=i.left-n-this.opt.arrowWidth;else{if("right"!==t.placement)throw new Error("Bubble placement failed because step.placement is invalid or undefined!");r=i.top,o=i.right+this.opt.arrowWidth}(s="center"!==t.arrowOffset?c.getPixelValue(t.arrowOffset):t.arrowOffset)?"top"===t.placement||"bottom"===t.placement?(d.style.top="",d.style[f]="center"===s?Math.floor(n/2-d.offsetWidth/2)+"px":s+"px"):("left"===t.placement||"right"===t.placement)&&(d.style[f]="",d.style.top="center"===s?Math.floor(e/2-d.offsetHeight/2)+"px":s+"px"):(d.style.top="",d.style[f]=""),"center"===t.xOffset?o=i.left+u.offsetWidth/2-n/2:o+=c.getPixelValue(t.xOffset),"center"===t.yOffset?r=i.top+u.offsetHeight/2-e/2:r+=c.getPixelValue(t.yOffset),t.fixedElement||(r+=c.getScrollTop(),o+=c.getScrollLeft()),h.style.top="0",h.style.left="0",r-=(l=h.getBoundingClientRect()).top,o-=l.left,this.opt.fixedContainer||(r-=c.getScrollTop(),o-=c.getScrollLeft()),h.style.position=t.fixedElement?"fixed":"absolute",h.style.top=r+"px",h.style.left=o+"px"},render:function(t,e,n){var i,r,o,s,l,u,h,d,p,g,v=this.element;if(t?this.currStep=t:this.currStep&&(t=this.currStep),this.opt.isTourBubble?(s=f.getCurrTour())&&(r=s.customData,i=s.customRenderer,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:s.hasOwnProperty("isRtl")?s.isRtl:this.opt.isRtl,o=s.unsafe,Array.isArray(s.steps)&&(l=s.steps.length,u=this._getStepI18nNum(this._getStepNum(l-1)),d=this._getStepNum(e)===this._getStepNum(l-1))):(r=t.customData,i=t.customRenderer,o=t.unsafe,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:this.opt.isRtl),h=d?c.getI18NString("doneBtn"):t.showSkip?c.getI18NString("skipBtn"):c.getI18NString("nextBtn"),c.flipPlacement(t),c.normalizePlacement(t),this.placement=t.placement,g={i18n:{prevBtn:c.getI18NString("prevBtn"),nextBtn:h,closeTooltip:c.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(e)),numSteps:u},buttons:{showPrev:c.valOrDefault(t.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(e)>0,showNext:c.valOrDefault(t.showNextButton,this.opt.showNextButton),showCTA:c.valOrDefault(t.showCTAButton&&t.ctaLabel,!1),ctaLabel:t.ctaLabel,showClose:c.valOrDefault(this.opt.showCloseButton,!0)},step:{num:e,isLast:c.valOrDefault(d,!1),title:t.title||"",content:t.content||"",isRtl:t.isRtl,placement:t.placement,padding:c.valOrDefault(t.padding,this.opt.bubblePadding),width:c.getPixelValue(t.width)||this.opt.bubbleWidth,customData:t.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:l,unsafe:c.valOrDefault(o,!1),customData:r||{}}},"function"==typeof i)v.innerHTML=i(g);else if("string"==typeof i){if(!f.templates||"function"!=typeof f.templates[i])throw new Error('Bubble rendering failed - template "'+i+'" is not a function.');v.innerHTML=f.templates[i](g)}else if(a)v.innerHTML=a(g);else{if(!f.templates||"function"!=typeof f.templates[m])throw new Error('Bubble rendering failed - template "'+m+'" is not a function.');v.innerHTML=f.templates[m](g)}var y,b=v.children,_=b.length;for(p=0;_>p;p++)y=b[p],c.hasClass(y,"hopscotch-arrow")&&(this.arrowEl=y);return v.style.zIndex="number"==typeof t.zindex?t.zindex:"",this._setArrow(t.placement),this.hide(!1),this.setPosition(t),n&&n(!t.fixedElement),this},_getStepNum:function(t){var e,n=0,i=f.getSkippedStepsIndexes(),r=i.length;for(e=0;r>e;e++)t>i[e]&&n++;return t-n},_getStepI18nNum:function(t){var e=c.getI18NString("stepNums");return e&&t<e.length?t=e[t]:t+=1,t},_setArrow:function(t){c.removeClass(this.arrowEl,"down up right left"),"top"===t?c.addClass(this.arrowEl,"down"):"bottom"===t?c.addClass(this.arrowEl,"up"):"left"===t?c.addClass(this.arrowEl,"right"):"right"===t&&c.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var t=this,e="fade-in-"+this._getArrowDirection();return c.removeClass(this.element,"hide"),c.addClass(this.element,e),setTimeout(function(){c.removeClass(t.element,"invisible")},50),setTimeout(function(){c.removeClass(t.element,e)},1e3),this.isShowing=!0,this},hide:function(t){var e=this.element;return t=c.valOrDefault(t,!0),e.style.top="",e.style.left="",t?(c.addClass(e,"hide"),c.removeClass(e,"invisible")):(c.removeClass(e,"hide"),c.addClass(e,"invisible")),c.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t),c.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(t){var e;if("cta"===(e=function e(n){return n===t.currentTarget?null:c.hasClass(n,"hopscotch-cta")?"cta":c.hasClass(n,"hopscotch-next")?"next":c.hasClass(n,"hopscotch-prev")?"prev":c.hasClass(n,"hopscotch-close")?"close":e(n.parentElement)}((t=t||window.event).target||t.srcElement)))this.opt.isTourBubble||f.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&c.invokeCallback(this.currStep.onCTA);else if("next"===e)f.nextStep(!0);else if("prev"===e)f.prevStep(!0);else if("close"===e){if(this.opt.isTourBubble){var n=f.getCurrStepNum()===f.getCurrTour().steps.length-1;c.invokeEventCallbacks("close"),f.endTour(!0,n)}else this.opt.onClose&&c.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?f.getCalloutManager().removeCallout(this.opt.id):this.destroy();c.evtPreventDefault(t)}},init:function(t){var e,n,i,r,o=document.createElement("div"),s=this,a=!1;this.element=o,r={showPrevButton:d.showPrevButton,showNextButton:d.showNextButton,bubbleWidth:d.bubbleWidth,bubblePadding:d.bubblePadding,arrowWidth:d.arrowWidth,isRtl:d.isRtl,showNumber:!0,isTourBubble:!0},t=(void 0===t?"undefined":p(t))===v?{}:t,c.extend(r,t),this.opt=r,o.className="hopscotch-bubble animated",r.isTourBubble?(i=f.getCurrTour())&&c.addClass(o,"tour-"+i.id):c.addClass(o,"hopscotch-callout no-number"),e=function(){!a&&s.isShowing&&(a=!0,setTimeout(function(){s.setPosition(s.currStep),a=!1},100))},c.addEvtListener(window,"resize",e),this.clickCb=function(t){s._handleBubbleClick(t)},c.addEvtListener(o,"click",this.clickCb),this.hide(),c.documentIsReady()?c.getContainer(r).appendChild(o):(document.addEventListener?(n=function(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),c.getContainer(r).appendChild(o)},document.addEventListener("DOMContentLoaded",n,!1)):(n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),window.detachEvent("onload",n),c.getContainer(r).appendChild(o))},document.attachEvent("onreadystatechange",n)),c.addEvtListener(window,"load",n))}},r=function(){var t={},e={};this.createCallout=function(n){var r;if(!n.id)throw new Error("Must specify a callout id.");if(!S.test(n.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(t[n.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!c.getStepTarget(n))throw new Error("Must specify existing target element via 'target' option.");return n.showNextButton=n.showPrevButton=!1,n.isTourBubble=!1,r=new i(n),t[n.id]=r,e[n.id]=n,r.render(n,null,function(){r.show(),n.onShow&&c.invokeCallback(n.onShow)}),r},this.getCallout=function(e){return t[e]},this.removeAllCallouts=function(){var e;for(e in t)t.hasOwnProperty(e)&&this.removeCallout(e)},this.removeCallout=function(n){var i=t[n];t[n]=null,e[n]=null,i&&i.destroy()},this.refreshCalloutPositions=function(){var n,i,r;for(n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i=t[n],r=e[n],i&&r&&i.setPosition(r))}},t=function(t){var e,o,g,_,w,x,C,k,T=this,M={},E=[],A=function(t){return e&&e.element&&e.element.parentNode||(e=new i(g)),t&&c.extend(e.opt,{bubblePadding:$("bubblePadding"),bubbleWidth:$("bubbleWidth"),showNextButton:$("showNextButton"),showPrevButton:$("showPrevButton"),showCloseButton:$("showCloseButton"),arrowWidth:$("arrowWidth"),isRtl:$("isRtl")}),e},I=function(){e&&(e.destroy(),e=null)},$=function(t){return void 0===g?d[t]:c.valOrDefault(g[t],d[t])},D=function(){return!_||0>w||w>=_.steps.length?null:_.steps[w]},L=function(){T.nextStep()},P=function t(e,n){var i,r;w+e>=0&&w+e<_.steps.length?(w+=e,r=function(){c.getStepTarget(i)?(M[w]&&delete M[w],n(w)):(M[w]=!0,c.invokeEventCallbacks("error"),t(e,n))},(i=D()).delay?setTimeout(r,i.delay):r()):n(-1)},O=function(t,e){var n,i,r,o,s=A(),a=this;if(s.hide(),t=c.valOrDefault(t,!0),(n=D()).nextOnTargetClick&&c.removeEvtListener(c.getStepTarget(n),"click",L),i=n,r=e>0?i.multipage:w>0&&_.steps[w-1].multipage,o=function(n){var o;if(-1===n)return this.endTour(!0);if(t&&(o=e>0?c.invokeEventCallbacks("next",i.onNext):c.invokeEventCallbacks("prev",i.onPrev)),n===w){if(r)return void j();(o=c.valOrDefault(o,!0))?this.showStep(n):this.endTour(!1)}},!r&&$("skipIfNoElement"))P(e,function(t){o.call(a,t)});else if(w+e>=0&&w+e<_.steps.length){if(w+=e,n=D(),!c.getStepTarget(n)&&!r)return c.invokeEventCallbacks("error"),this.endTour(!0,!1);o.call(this,w)}else if(w+e===_.steps.length)return this.endTour();return this},N=function(t){function e(){r.show(),c.invokeEventCallbacks("show",i.onShow)}var i=_.steps[t],r=A(),o=c.getStepTarget(i);w!==t&&D().nextOnTargetClick&&c.removeEvtListener(c.getStepTarget(D()),"click",L),w=t,r.hide(!1),r.render(i,t,function(t){t?function(t){var e,i,r,o,s,a,l=A().element,u=c.getPixelValue(l.style.top),h=u+c.getPixelValue(l.offsetHeight),d=c.getContainer({container:$("container")}),f=c.getStepTarget(D()).getBoundingClientRect(),m=f.top+d.scrollTop,g=f.bottom+d.scrollHeight,y=m>u?u:m,_=h>g?h:g,w=d.scrollTop,S=w+d.scrollHeight,x=y-$("scrollTopMargin");y>=w&&(y<=w+$("scrollTopMargin")||S>=_)?t&&t():$("smoothScroll")?("undefined"==typeof YAHOO?"undefined":p(YAHOO))!==v&&p(YAHOO.env)!==v&&p(YAHOO.env.ua)!==v&&p(YAHOO.util)!==v&&p(YAHOO.util.Scroll)!==v?(e=d,r=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,(i=new YAHOO.util.Scroll(e,{scroll:{to:[0,x]}},$("scrollDuration")/1e3,r)).onComplete.subscribe(t),i.animate()):b?n(d).animate({scrollTop:x},$("scrollDuration"),t):(0>x&&(x=0),o=w>y?-1:1,s=Math.abs(w-x)/($("scrollDuration")/10),(a=function(){var e=d.scrollTop,n=e+o*s;return o>0&&n>=x||0>o&&x>=n?(n=x,t&&t(),void d.scrollTo(0,n)):(d.scrollTo(0,n),d.scrollTop===e?void(t&&t()):void setTimeout(a,10))})()):(d.scrollTo(0,x),t&&t())}(e):e(),i.nextOnTargetClick&&c.addEvtListener(o,"click",L)}),j()},j=function(){var t=_.id+":"+w,e=f.getSkippedStepsIndexes();e&&e.length>0&&(t+=":"+e.join(",")),c.setState($("cookieName"),t,1)};this.getCalloutManager=function(){return(void 0===o?"undefined":p(o))===v&&(o=new r),o},this.startTour=function(t,e){var n,i={},r=this;if(!_){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!S.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");_=t,function(t){var e,n,i,r={};for(e in t)t.hasOwnProperty(e)&&"id"!==e&&"steps"!==e&&(r[e]=t[e]);return k.call(this,r,!0),(n=c.getState($("cookieName")))&&(i=n.split(":"),x=i[0],C=i[1],i.length>2&&(E=i[2].split(",")),C=parseInt(C,10)),this}.call(this,t)}if((void 0===e?"undefined":p(e))!==v){if(e>=_.steps.length)throw new Error("Specified step number out of bounds.");n=e}if(!c.documentIsReady())return y=!0,this;if(void 0===n&&_.id===x&&(void 0===C?"undefined":p(C))!==v){if(n=C,E.length>0)for(var o=0,s=E.length;s>o;o++)i[E[o]]=!0}else n||(n=0);return function(t,e,n){var i,r;if(w=t||0,M=e||{},i=D(),r=c.getStepTarget(i))n(w);else if(!r){if(c.invokeEventCallbacks("error"),M[w]=!0,$("skipIfNoElement"))return void P(1,n);n(w=-1)}}(n,i,function(t){return-1!==t&&c.getStepTarget(_.steps[t])?(c.invokeEventCallbacks("start"),A().hide(!1),r.isActive=!0,void(c.getStepTarget(D())?r.showStep(t):(c.invokeEventCallbacks("error"),$("skipIfNoElement")&&r.nextStep(!1)))):void r.endTour(!1,!1)}),this},this.showStep=function(t){var e=_.steps[t],n=w;return c.getStepTarget(e)?(e.delay?setTimeout(function(){N(t)},e.delay):N(t),this):(w=t,c.invokeEventCallbacks("error"),void(w=n))},this.prevStep=function(t){return O.call(this,t,-1),this},this.nextStep=function(t){return O.call(this,t,1),this},this.endTour=function(t,e){var n,i=A();return t=c.valOrDefault(t,!0),e=c.valOrDefault(e,!0),_&&(n=D())&&n.nextOnTargetClick&&c.removeEvtListener(c.getStepTarget(n),"click",L),w=0,C=void 0,i.hide(),t&&c.clearState($("cookieName")),this.isActive&&(this.isActive=!1,_&&e&&c.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),I(),_=null,this},this.getCurrTour=function(){return _},this.getCurrTarget=function(){return c.getStepTarget(D())},this.getCurrStepNum=function(){return w},this.getSkippedStepsIndexes=function(){var t,e=[];for(t in M)e.push(t);return e},this.refreshBubblePosition=function(){var t=D();return t&&A().setPosition(t),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(t,e,n){return t&&u[t].push({cb:e,fromTour:n}),this},this.unlisten=function(t,e){var n,i,r=u[t];for(n=0,i=r.length;i>n;++n)r[n].cb===e&&r.splice(n,1);return this},this.removeCallbacks=function(t,e){var n,i,r,o;for(o in u)if(!t||t===o)if(e)for(i=0,r=(n=u[o]).length;r>i;++i)n[i].fromTour&&(n.splice(i--,1),--r);else u[o]=[];return this},this.registerHelper=function(t,e){"string"==typeof t&&"function"==typeof e&&(h[t]=e)},this.unregisterHelper=function(t){h[t]=null},this.invokeHelper=function(t){var e,n,i=[];for(e=1,n=arguments.length;n>e;++e)i.push(arguments[e]);h[t]&&h[t].call(null,i)},this.setCookieName=function(t){return g.cookieName=t,this},this.resetDefaultOptions=function(){return g={},this},this.resetDefaultI18N=function(){return s={},this},this.getState=function(){return c.getState($("cookieName"))},k=function(t,e){var n,i,r,o=["next","prev","start","end","show","error","close"];for(g||this.resetDefaultOptions(),c.extend(g,t),t&&c.extend(s,t.i18n),i=0,r=o.length;r>i;++i)t[n="on"+o[i].charAt(0).toUpperCase()+o[i].substring(1)]&&this.listen(o[i],t[n],e);return A(!0),this},this.configure=function(t){return k.call(this,t,!1)},this.setRenderer=function(t){var e=void 0===t?"undefined":p(t);return"string"===e?(m=t,a=void 0):"function"===e&&(a=t),this},this.setEscaper=function(t){return"function"==typeof t&&(l=t),this},function(t){t&&this.configure(t)}.call(this,t)},f=new t,function(){var t={escape:function(t){return l?l(t):null==t?"":(""+t).replace(new RegExp("[&<>\"']","g"),function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&quot;":"'"==t?"&#x27;":void 0})}};this.templates=this.templates||{},this.templates.bubble_default=function(e){function n(e,n){return n?t.escape(e):e}var i,r="";t.escape,Array.prototype.join,r+="\n";var o=e.i18n,s=e.buttons,a=e.step,l=e.tour;return r+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(i=a.width)?"":i)+"px; padding: "+(null==(i=a.padding)?"":i)+'px;">\n  ',l.isTour&&(r+='<span class="hopscotch-bubble-number">'+(null==(i=o.stepNum)?"":i)+"</span>"),r+='\n  <div class="hopscotch-bubble-content">\n    ',""!==a.title&&(r+='<h3 class="hopscotch-title">'+(null==(i=n(a.title,l.unsafe))?"":i)+"</h3>"),r+="\n    ",""!==a.content&&(r+='<div class="hopscotch-content">'+(null==(i=n(a.content,l.unsafe))?"":i)+"</div>"),r+='\n  </div>\n  <div class="hopscotch-actions">\n    ',s.showPrev&&(r+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(i=o.prevBtn)?"":i)+"</button>"),r+="\n    ",s.showCTA&&(r+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(i=s.ctaLabel)?"":i)+"</button>"),r+="\n    ",s.showNext&&(r+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(i=o.nextBtn)?"":i)+"</button>"),r+="\n  </div>\n  ",s.showClose&&(r+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(i=o.closeTooltip)?"":i)+"</button>"),r+'\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>\n'}}.call(f),f}()}).call(this,n(1),n(1))},function(t,e,n){t.exports=n(436)},function(t,e,n){
/**
 * @license Highcharts JS v4.2.1 (2015-12-21)
 *
 * (c) 2009-2014 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */
var i,r;i="undefined"!=typeof window?window:this,r=function(t){var e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y,b,_,w,S,x,C,k,T,M=t.document,E=Math,A=E.round,I=E.floor,$=E.ceil,D=E.max,L=E.min,P=E.abs,O=E.cos,N=E.sin,j=E.PI,R=2*j/360,B=t.navigator&&t.navigator.userAgent||"",F=t.opera,Y=/(msie|trident|edge)/i.test(B)&&!F,H=M&&8===M.documentMode,W=!Y&&/AppleWebKit/.test(B),z=/Firefox/.test(B),U=/(Mobile|Android|Windows Phone)/.test(B),V="http://www.w3.org/2000/svg",G=M&&M.createElementNS&&!!M.createElementNS(V,"svg").createSVGRect,q=z&&parseInt(B.split("Firefox/")[1],10)<4,X=M&&!G&&!Y&&!!M.createElement("canvas").getContext,K={},J=0,Z=function(){},Q=[],tt=0,et="div",nt="hidden",it="highcharts-",rt="px",ot="none",st="M",at="L",lt=/^[0-9]+$/,ct=["plotTop","marginRight","marginBottom","plotLeft"],ut={};function ht(e,n){var i="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(n)throw new Error(i);t.console&&console.log(i)}(T=t.Highcharts?ht(16,!0):{win:t}).seriesTypes=ut;var dt,ft,pt,mt,gt,vt,yt,bt,_t,wt,St,xt=[];function Ct(t,e,n){this.options=e,this.elem=t,this.prop=n}Ct.prototype={dSetter:function(){var t,e=this.paths[0],n=this.paths[1],i=[],r=this.now,o=e.length;if(1===r)i=this.toD;else if(o===n.length&&r<1)for(;o--;)t=parseFloat(e[o]),i[o]=isNaN(t)?e[o]:r*parseFloat(n[o]-t)+t;else i=n;this.elem.attr("d",i)},update:function(){var t=this.elem,e=this.prop,n=this.now,i=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,n):t.style[e]=n+this.unit,i&&i.call(t,n,this)},run:function(t,e,n){var i,r=this,o=function(t){return!o.stopped&&r.step(t)};this.startTime=+new c,this.start=t,this.end=e,this.unit=n,this.now=this.start,this.pos=0,o.elem=this.elem,o()&&1===xt.push(o)&&(o.timerId=setInterval(function(){for(i=0;i<xt.length;i++)xt[i]()||xt.splice(i--,1);xt.length||clearInterval(o.timerId)},13))},step:function(t){var e,n,i,r=+new c,o=this.options,s=this.elem,a=o.complete,l=o.duration,u=o.curAnim;if(s.attr&&!s.element)e=!1;else if(t||r>=l+this.startTime){for(i in this.now=this.end,this.pos=1,this.update(),u[this.prop]=!0,n=!0,u)!0!==u[i]&&(n=!1);n&&a&&a.call(s),e=!1}else this.pos=o.easing((r-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0;return e},initPath:function(t,e,n){e=e||"";var i,r,o,s,a,l=t.shift,c=e.indexOf("C")>-1,u=c?7:3,h=e.split(" "),d=[].concat(n),f=function(t){for(o=t.length;o--;)t[o]===st&&t.splice(o+1,0,t[o+1],t[o+2],t[o+1],t[o+2])};if(c&&(f(h),f(d)),t.isArea&&(s=h.splice(h.length-6,6),a=d.splice(d.length-6,6)),l<=d.length/u&&h.length===d.length)for(;l--;)d=[].concat(d).splice(0,u).concat(d);if(t.shift=0,h.length)for(i=d.length;h.length<i;)r=[].concat(h).splice(h.length-u,u),c&&(r[u-6]=r[u-2],r[u-5]=r[u-1]),h=h.concat(r);return s&&(h=h.concat(s),d=d.concat(a)),[h,d]}};var kt=T.extend=function(t,e){var n;for(n in t||(t={}),e)t[n]=e[n];return t};function Tt(){var t,e,n=arguments,i={},r=function(t,e){var n,i;for(i in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(i)&&((n=e[i])&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"renderTo"!==i&&"number"!=typeof n.nodeType?t[i]=r(t[i]||{},n):t[i]=e[i]);return t};for(!0===n[0]&&(i=n[1],n=Array.prototype.slice.call(n,2)),e=n.length,t=0;t<e;t++)i=r(i,n[t]);return i}function Mt(t,e){return parseInt(t,e||10)}function Et(t){return"string"==typeof t}function At(t){return t&&"object"==typeof t}function It(t){return"[object Array]"===Object.prototype.toString.call(t)}function $t(t){return"number"==typeof t}function Dt(t){return E.log(t)/E.LN10}function Lt(t){return E.pow(10,t)}function Pt(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}}function Ot(t){return t!==e&&null!==t}function Nt(t,e,n){var i,r;if(Et(e))Ot(n)?t.setAttribute(e,n):t&&t.getAttribute&&(r=t.getAttribute(e));else if(Ot(e)&&At(e))for(i in e)t.setAttribute(i,e[i]);return r}function jt(t){return It(t)?t:[t]}function Rt(t,e,n){if(e)return setTimeout(t,e,n);t.call(0,n)}var Bt=T.pick=function(){var t,n,i=arguments,r=i.length;for(t=0;t<r;t++)if((n=i[t])!==e&&null!==n)return n};function Ft(t,n){Y&&!G&&n&&n.opacity!==e&&(n.filter="alpha(opacity="+100*n.opacity+")"),kt(t.style,n)}function Yt(t,e,n,i,r){var o=M.createElement(t);return e&&kt(o,e),r&&Ft(o,{padding:0,border:"none",margin:0}),n&&Ft(o,n),i&&i.appendChild(o),o}function Ht(t,e){var n=function(){};return n.prototype=new t,kt(n.prototype,e),n}function Wt(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function zt(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}var Ut=T.wrap=function(t,e,n){var i=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(i),n.apply(this,t)}};function Vt(t){return 6e4*(d&&d(t)||h||0)}function Gt(t,e){var n,i=o.lang;return/f$/.test(t)?(n=(n=t.match(/\.([0-9])/))?n[1]:-1,null!==e&&(e=T.numberFormat(e,n,i.decimalPoint,t.indexOf(",")>-1?i.thousandsSep:""))):e=s(t,e),e}function qt(t,e){for(var n,i,r,o,s,a,l,c="{",u=!1,h=[];-1!==(l=t.indexOf(c));){if(n=t.slice(0,l),u){for(s=(r=(i=n.split(":")).shift().split(".")).length,a=e,o=0;o<s;o++)a=a[r[o]];i.length&&(a=Gt(i.join(":"),a)),h.push(a)}else h.push(n);t=t.slice(l+1),c=(u=!u)?"}":"{"}return h.push(t),h.join("")}function Xt(t){return E.pow(10,I(E.log(t)/E.LN10))}function Kt(t,e,n,i,r){var o,s,a=t;for(o=t/(n=Bt(n,1)),e||(e=[1,2,2.5,5,10],!1===i&&(1===n?e=[1,2,5,10]:n<=.1&&(e=[1/n]))),s=0;s<e.length&&(a=e[s],!(r&&a*n>=t||!r&&o<=(e[s]+(e[s+1]||e[s]))/2));s++);return a*=n}function Jt(t,e){var n,i,r=t.length;for(i=0;i<r;i++)t[i].safeI=i;for(t.sort(function(t,i){return 0===(n=e(t,i))?t.safeI-i.safeI:n}),i=0;i<r;i++)delete t[i].safeI}function Zt(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n}function Qt(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n}function te(t,e){var n;for(n in t)t[n]&&t[n]!==e&&t[n].destroy&&t[n].destroy(),delete t[n]}function ee(t){r||(r=Yt(et)),t&&r.appendChild(t),r.innerHTML=""}function ne(t,e){return parseFloat(t.toPrecision(e||14))}function ie(t,e){e.renderer.globalAnimation=Bt(t,e.animation)}function re(){var e=o.global,n=e.useUTC,i=n?"getUTC":"get",r=n?"setUTC":"set";c=e.Date||t.Date,h=n&&e.timezoneOffset,d=n&&e.getTimezoneOffset,u=function(t,e,i,r,o,s){var a;return n?(a=c.UTC.apply(0,arguments),a+=Vt(a)):a=new c(t,e,Bt(i,1),Bt(r,0),Bt(o,0),Bt(s,0)).getTime(),a},f=i+"Minutes",p=i+"Hours",m=i+"Day",g=i+"Date",v=i+"Month",y=i+"FullYear",b=r+"Milliseconds",_=r+"Seconds",w=r+"Minutes",S=r+"Hours",x=r+"Date",C=r+"Month",k=r+"FullYear"}s=function(t,e,n){if(!Ot(e)||isNaN(e))return o.lang.invalidDate||"";t=Bt(t,"%Y-%m-%d %H:%M:%S");var i,r=new c(e-Vt(e)),s=r[p](),a=r[m](),l=r[g](),u=r[v](),h=r[y](),d=o.lang,b=d.weekdays,_=kt({a:b[a].substr(0,3),A:b[a],d:Wt(l),e:l,w:a,b:d.shortMonths[u],B:d.months[u],m:Wt(u+1),y:h.toString().substr(2,2),Y:h,H:Wt(s),k:s,I:Wt(s%12||12),l:s%12||12,M:Wt(r[f]()),p:s<12?"AM":"PM",P:s<12?"am":"pm",S:Wt(r.getSeconds()),L:Wt(A(e%1e3),3)},T.dateFormats);for(i in _)for(;-1!==t.indexOf("%"+i);)t=t.replace("%"+i,"function"==typeof _[i]?_[i](e):_[i]);return n?t.substr(0,1).toUpperCase()+t.substr(1):t},a={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},T.numberFormat=function(t,e,n,i){var r=o.lang,s=+t||0,a=-1===e?Math.min((s.toString().split(".")[1]||"").length,20):isNaN(e=Math.abs(e))?2:e,l=void 0===n?r.decimalPoint:n,c=void 0===i?r.thousandsSep:i,u=s<0?"-":"",h=String(Mt(s=P(s).toFixed(a))),d=h.length>3?h.length%3:0;return u+(d?h.substr(0,d)+c:"")+h.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?l+P(s-h).toFixed(a).slice(2):"")},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},dt=function(e,n){var i=t.getComputedStyle(e,void 0);return i&&Mt(i.getPropertyValue(n))},ft=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)},mt=function(t,e){return[].filter.call(t,e)},vt=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n[i]=e.call(t[i],t[i],i,t);return n},gt=function(e){var n=M.documentElement,i=e.getBoundingClientRect();return{top:i.top+(t.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(t.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}},St=function(t){for(var e=xt.length;e--;)xt[e].elem===t&&(xt[e].stopped=!0)},pt=function(t,e){return Array.prototype.forEach.call(t,e)},yt=function(e,n,i){var r=e.hcEvents=e.hcEvents||{};function o(n){n.target=n.srcElement||t,i.call(e,n)}e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&(e.hcEventsIE||(e.hcEventsIE={}),e.hcEventsIE[i.toString()]=o,e.attachEvent("on"+n,o)),r[n]||(r[n]=[]),r[n].push(i)},bt=function(t,e,n){var i,r,o=t.hcEvents;function s(e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.attachEvent&&(n=t.hcEventsIE[n.toString()],t.detachEvent("on"+e,n))}function a(){var n,i,r;if(t.nodeName)for(r in e?(n={})[e]=!0:n=o,n)if(o[r])for(i=o[r].length;i--;)s(r,o[r][i])}o&&(e?(i=o[e]||[],n?((r=ft(n,i))>-1&&(i.splice(r,1),o[e]=i),s(e,n)):(a(),o[e]=[])):(a(),t.hcEvents={}))},_t=function(t,e,n,i){var r,o,s,a,l,c,u=t.hcEvents;if(n=n||{},M.createEvent&&(t.dispatchEvent||t.fireEvent))(r=M.createEvent("Events")).initEvent(e,!0,!0),r.target=t,kt(r,n),t.dispatchEvent?t.dispatchEvent(r):t.fireEvent(e,r);else if(u)for(s=(o=u[e]||[]).length,l=function(){n.defaultPrevented=!0},a=0;a<s;a++){if(c=o[a],n.stopped)return;n.preventDefault=l,n.target=t,n.type||(n.type=e),!1===c.call(t,n)&&n.preventDefault()}i&&!n.defaultPrevented&&i(n)},wt=function(t,e,n){var i,r,o,s,a,l="";for(a in At(n)||(n={duration:(s=arguments)[2],easing:s[3],complete:s[4]}),$t(n.duration)||(n.duration=400),n.easing=Math[n.easing]||Math.easeInOutSine,n.curAnim=Tt(e),e)o=new Ct(t,n,a),r=null,"d"===a?(o.paths=o.initPath(t,t.d,e.d),o.toD=e.d,i=0,r=1):t.attr?i=t.attr(a):(i=parseFloat(dt(t,a))||0,"opacity"!==a&&(l="px")),r||(r=e[a]),r.match&&r.match("px")&&(r=r.replace(/px/g,"")),o.run(i,r,l)},t.jQuery&&(t.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(T[Et(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):Q[Nt(this[0],"data-highcharts-chart")]}),M&&!M.defaultView&&(dt=function(t,e){var n,i={width:"clientWidth",height:"clientHeight"}[e];return t.style[e]?Mt(t.style[e]):("opacity"===e&&(e="filter"),i?(t.style.zoom=1,t[i]-2*dt(t,"padding")):(n=t.currentStyle[e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})],"filter"===e&&(n=n.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100})),""===n?1:Mt(n)))}),Array.prototype.forEach||(pt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(!1===e.call(t[n],t[n],n,t))return n}),Array.prototype.indexOf||(ft=function(t,e){var n,i=0;if(e)for(n=e.length;i<n;i++)if(e[i]===t)return i;return-1}),Array.prototype.filter||(mt=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++)e(t[i],i)&&n.push(t[i]);return n}),T.Fx=Ct,T.inArray=ft,T.each=pt,T.grep=mt,T.offset=gt,T.map=vt,T.addEvent=yt,T.removeEvent=bt,T.fireEvent=_t,T.animate=wt,T.stop=St;var oe=(o={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.2.1/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":T.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:G,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:U?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}).plotOptions,se=oe.line;function ae(t){if(!(this instanceof ae))return new ae(t);this.init(t)}function le(){}re(),ae.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[Mt(t[1]),Mt(t[2]),Mt(t[3]),parseFloat(t[4],10)]}},{regex:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[Mt(t[1],16),Mt(t[2],16),Mt(t[3],16),1]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[Mt(t[1]),Mt(t[2]),Mt(t[3]),1]}}],init:function(t){var e,n,i,r;if(this.input=t,t&&t.stops)this.stops=vt(t.stops,function(t){return new ae(t[1])});else for(i=this.parsers.length;i--&&!n;)(e=(r=this.parsers[i]).regex.exec(t))&&(n=r.parse(e));this.rgba=n||[]},get:function(t){var e,n=this.input,i=this.rgba;return this.stops?((e=Tt(n)).stops=[].concat(e.stops),pt(this.stops,function(n,i){e.stops[i]=[e.stops[i][0],n.get(t)]})):e=i&&!isNaN(i[0])?"rgb"===t||!t&&1===i[3]?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===t?i[3]:"rgba("+i.join(",")+")":n,e},brighten:function(t){var e,n=this.rgba;if(this.stops)pt(this.stops,function(e){e.brighten(t)});else if($t(t)&&0!==t)for(e=0;e<3;e++)n[e]+=Mt(255*t),n[e]<0&&(n[e]=0),n[e]>255&&(n[e]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this}},le.prototype={opacity:1,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){this.element="span"===e?Yt(e):M.createElementNS(V,e),this.renderer=t},animate:function(t,e,n){var i=Bt(e,this.renderer.globalAnimation,!0);return St(this),i?(i=Tt(i,{}),n&&(i.complete=n),wt(this,t,i)):this.attr(t,null,n),this},colorGradient:function(t,e,n){var i,r,o,s,a,l,c,u,h,d,f,p,m,g=this.renderer,v=[];if(t.linearGradient?r="linearGradient":t.radialGradient&&(r="radialGradient"),r){for(f in o=t[r],a=g.gradients,c=t.stops,d=n.radialReference,It(o)&&(t[r]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===r&&d&&!Ot(o.gradientUnits)&&(s=o,o=Tt(o,g.getRadialAttr(d,s),{gradientUnits:"userSpaceOnUse"})),o)"id"!==f&&v.push(f,o[f]);for(f in c)v.push(c[f]);a[v=v.join(",")]?p=a[v].attr("id"):(o.id=p=it+J++,a[v]=l=g.createElement(r).attr(o).add(g.defs),l.radAttr=s,l.stops=[],pt(c,function(t){var e;0===t[1].indexOf("rgba")?(i=ae(t[1]),u=i.get("rgb"),h=i.get("a")):(u=t[1],h=1),e=g.createElement("stop").attr({offset:t[0],"stop-color":u,"stop-opacity":h}).add(l),l.stops.push(e)})),m="url("+g.url+"#"+p+")",n.setAttribute(e,m),n.gradient=v,t.toString=function(){return m}}},applyTextShadow:function(t){var n,i=this.element,r=-1!==t.indexOf("contrast"),o={},s=this.renderer.forExport,a=s||i.style.textShadow!==e&&!Y;r&&(o.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill))),(W||s)&&(o.textRendering="geometricPrecision"),a?this.css(o):(this.fakeTS=!0,this.ySetter=this.xSetter,n=[].slice.call(i.getElementsByTagName("tspan")),pt(t.split(/\s?,\s?/g),function(t){var e,r,o=i.firstChild;t=t.split(" "),e=t[t.length-1],(r=t[t.length-2])&&pt(n,function(t,n){var s;0===n&&(t.setAttribute("x",i.getAttribute("x")),n=i.getAttribute("y"),t.setAttribute("y",n||0),null===n&&i.setAttribute("y",0)),Nt(s=t.cloneNode(1),{class:it+"text-shadow",fill:e,stroke:e,"stroke-opacity":1/D(Mt(r),3),"stroke-width":r,"stroke-linejoin":"round"}),i.insertBefore(s,o)})}))},attr:function(t,n,i){var r,o,s,a,l=this.element,c=this;if("string"==typeof t&&n!==e&&(r=t,(t={})[r]=n),"string"==typeof t)c=(this[t+"Getter"]||this._defaultGetter).call(this,t,l);else{for(r in t)o=t[r],a=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(r)&&(s||(this.symbolAttr(t),s=!0),a=!0),!this.rotation||"x"!==r&&"y"!==r||(this.doTransform=!0),a||(this[r+"Setter"]||this._defaultSetter).call(this,o,r,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(r)&&this.updateShadows(r,o);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),c},updateShadows:function(t,e){for(var n=this.shadows,i=n.length;i--;)n[i].setAttribute(t,"height"===t?Math.max(e-(n[i].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,n=Nt(e,"class")||"";return-1===n.indexOf(t)&&Nt(e,"class",n+" "+t),this},symbolAttr:function(t){var e=this;pt(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){e[n]=Bt(t[n],e[n])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":ot)},crisp:function(t){var e,n,i={},r=t.strokeWidth||this.strokeWidth||0;for(e in n=A(r)%2/2,t.x=I(t.x||this.x||0)+n,t.y=I(t.y||this.y||0)+n,t.width=I((t.width||this.width||0)-2*n),t.height=I((t.height||this.height||0)-2*n),t.strokeWidth=r,t)this[e]!==t[e]&&(this[e]=i[e]=t[e]);return i},css:function(t){var e,n,i,r=this.styles,o={},s=this.element,a="",l=!r;if(t&&t.color&&(t.fill=t.color),r)for(n in t)t[n]!==r[n]&&(o[n]=t[n],l=!0);if(l){if(e=this.textWidth=t&&t.width&&"text"===s.nodeName.toLowerCase()&&Mt(t.width)||this.textWidth,r&&(t=kt(r,o)),this.styles=t,e&&(X||!G&&this.renderer.forExport)&&delete t.width,Y&&!G)Ft(this.element,t);else{for(n in i=function(t,e){return"-"+e.toLowerCase()},t)a+=n.replace(/([A-Z])/g,i)+":"+t[n]+";";Nt(s,"style",a)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var n=this,r=n.element;return i&&"click"===t?(r.ontouchstart=function(t){n.touchEventFired=c.now(),t.preventDefault(),e.call(r,t)},r.onclick=function(t){(-1===B.indexOf("Android")||c.now()-(n.touchEventFired||0)>1100)&&e.call(r,t)}):r["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t,e=this.translateX||0,n=this.translateY||0,i=this.scaleX,r=this.scaleY,o=this.inverted,s=this.rotation,a=this.element;o&&(e+=this.attr("width"),n+=this.attr("height")),t=["translate("+e+","+n+")"],o?t.push("rotate(90) scale(-1,1)"):s&&t.push("rotate("+s+" "+(a.getAttribute("x")||0)+" "+(a.getAttribute("y")||0)+")"),(Ot(i)||Ot(r))&&t.push("scale("+Bt(i,1)+" "+Bt(r,1)+")"),t.length&&a.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var i,r,o,s,a,l={},c=this.renderer,u=c.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,n&&!Et(n)||(this.alignTo=a=n||"renderer",Pt(u,this),u.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,a=this.alignTo),n=Bt(n,c[a],c),i=t.align,r=t.verticalAlign,o=(n.x||0)+(t.x||0),s=(n.y||0)+(t.y||0),"right"!==i&&"center"!==i||(o+=(n.width-(t.width||0))/{right:1,center:2}[i]),l[e?"translateX":"x"]=A(o),"bottom"!==r&&"middle"!==r||(s+=(n.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),l[e?"translateY":"y"]=A(s),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(t,n){var i,r,o,s,a,l,c,u,h=this.renderer,d=this.element,f=this.styles,p=this.textStr,m=d.style,g=h.cache,v=h.cacheKeys;if(a=(s=Bt(n,this.rotation))*R,p!==e&&(u=["",s||0,f&&f.fontSize,d.style.width].join(","),u=""===p||lt.test(p)?"num:"+p.toString().length+u:p+u),u&&!t&&(i=g[u]),!i){if(d.namespaceURI===V||h.forExport){try{c=this.fakeTS&&function(t){pt(d.querySelectorAll("."+it+"text-shadow"),function(e){e.style.display=t})},z&&m.textShadow?(l=m.textShadow,m.textShadow=""):c&&c(ot),i=d.getBBox?kt({},d.getBBox()):{width:d.offsetWidth,height:d.offsetHeight},l?m.textShadow=l:c&&c("")}catch(t){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();if(h.isSVG&&(r=i.width,o=i.height,Y&&f&&"11px"===f.fontSize&&"16.9"===o.toPrecision(3)&&(i.height=o=14),s&&(i.width=P(o*N(a))+P(r*O(a)),i.height=P(o*O(a))+P(r*N(a)))),u){for(;v.length>250;)delete g[v.shift()];g[u]||v.push(u),g[u]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:nt})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,n=this.renderer,i=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&n.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:n.box).appendChild(i),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,n,i=this,r=i.element||{},o=i.shadows,s=i.renderer.isSVG&&"SPAN"===r.nodeName&&i.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,St(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(n=0;n<i.stops.length;n++)i.stops[n]=i.stops[n].destroy();i.stops=null}for(i.safeRemoveChild(r),o&&pt(o,function(t){i.safeRemoveChild(t)});s&&s.div&&0===s.div.childNodes.length;)t=s.parentGroup,i.safeRemoveChild(s.div),delete s.div,s=t;for(e in i.alignTo&&Pt(i.renderer.alignedObjects,i),i)delete i[e];return null},shadow:function(t,e,n){var i,r,o,s,a,l,c=[],u=this.element;if(t){for(s=Bt(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+Bt(t.offsetX,1)+", "+Bt(t.offsetY,1)+")",i=1;i<=s;i++)o=2*s+1-2*i,Nt(r=u.cloneNode(0),{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*i,"stroke-width":o,transform:"translate"+l,fill:ot}),n&&(Nt(r,"height",D(Nt(r,"height")-o,0)),r.cutHeight=o),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),c.push(r);this.shadows=c}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=Bt(this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),n.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(e=(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;e--;)t[e]=Mt(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,n){this[e]=t,n.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=M.createElementNS(V,"title"),this.element.appendChild(e)),e.appendChild(M.createTextNode(String(Bt(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},visibilitySetter:function(t,e,n){"inherit"===t?n.removeAttribute(e):n.setAttribute(e,t)},zIndexSetter:function(t,e){var n,i,r,o,s,a=this.renderer,l=this.parentGroup,c=(l||a).element||a.box,u=this.element,h=this.added;if(Ot(t)&&(u.setAttribute(e,t),t=+t,this[e]===t&&(h=!1),this[e]=t),h){for((t=this.zIndex)&&l&&(l.handleZ=!0),n=c.childNodes,s=0;s<n.length&&!o;s++)r=Nt(i=n[s],"zIndex"),i!==u&&(Mt(r)>t||!Ot(t)&&Ot(r))&&(c.insertBefore(u,i),o=!0);o||c.appendChild(u)}return o},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}},le.prototype.yGetter=le.prototype.xGetter,le.prototype.translateXSetter=le.prototype.translateYSetter=le.prototype.rotationSetter=le.prototype.verticalAlignSetter=le.prototype.scaleXSetter=le.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},le.prototype["stroke-widthSetter"]=le.prototype.strokeSetter=function(t,e,n){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],le.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var ce,ue,he,de,fe=function(){this.init.apply(this,arguments)};if(fe.prototype={Element:le,init:function(e,n,i,r,o,s){var a,l,c,u;l=(a=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(r))).element,e.appendChild(l),-1===e.innerHTML.indexOf("xmlns")&&Nt(l,"xmlns",V),this.isSVG=!0,this.box=l,this.boxWrapper=a,this.alignedObjects=[],this.url=(z||W)&&M.getElementsByTagName("base").length?t.location.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(M.createTextNode("Created with Highcharts 4.2.1")),this.defs=this.createElement("defs").add(),this.allowHTML=s,this.forExport=o,this.gradients={},this.cache={},this.cacheKeys=[],this.setSize(n,i,!1),z&&e.getBoundingClientRect&&(this.subPixelFix=c=function(){Ft(e,{left:0,top:0}),u=e.getBoundingClientRect(),Ft(e,{left:$(u.left)-u.left+rt,top:$(u.top)-u.top+rt})},c(),yt(t,"resize",c))},getStyle:function(t){return this.style=kt({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t),this.style},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),te(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&bt(t,"resize",this.subPixelFix),this.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},buildText:function(t){for(var e,n,i,r=t.element,o=this,s=o.forExport,a=Bt(t.textStr,"").toString(),l=-1!==a.indexOf("<"),c=r.childNodes,u=Nt(r,"x"),h=t.styles,d=t.textWidth,f=h&&h.lineHeight,p=h&&h.textShadow,m=h&&"ellipsis"===h.textOverflow,g=c.length,v=d&&!t.added&&this.box,y=function(t){return f?Mt(f):o.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:h&&h.fontSize||o.style.fontSize||12,t).h},b=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};g--;)r.removeChild(c[g]);l||p||m||-1!==a.indexOf(" ")?(n=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,v&&v.appendChild(r),""===(e=l?a.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[a])[e.length-1]&&e.pop(),pt(e,function(e,a){var l,c=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=e.split("|||"),pt(l,function(e){if(""!==e||1===l.length){var f,p={},g=M.createElementNS(V,"tspan");if(n.test(e)&&Nt(g,"style",f=e.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),i.test(e)&&!s&&(Nt(g,"onclick",'location.href="'+e.match(i)[1]+'"'),Ft(g,{cursor:"pointer"}))," "!==(e=b(e.replace(/<(.|\n)*?>/g,"")||" "))){if(g.appendChild(M.createTextNode(e)),c?p.dx=0:a&&null!==u&&(p.x=u),Nt(g,p),r.appendChild(g),!c&&a&&(!G&&s&&Ft(g,{display:"block"}),Nt(g,"dy",y(g))),d){for(var v,_,w,S=e.replace(/([^\^])-/g,"$1- ").split(" "),x=l.length>1||a||S.length>1&&"nowrap"!==h.whiteSpace,C=[],k=y(g),T=t.rotation,E=e,A=E.length;(x||m)&&(S.length||C.length);)t.rotation=0,w=t.getBBox(!0).width,!G&&o.forExport&&(w=o.measureSpanWidth(g.firstChild.data,t.styles)),v=w>d,void 0===_&&(_=v),m&&_?(A/=2,""===E||!v&&A<.5?S=[]:(v&&(_=!0),S=[(E=e.substring(0,E.length+(v?-1:1)*$(A)))+(d>3?"":"")],g.removeChild(g.firstChild))):v&&1!==S.length?(g.removeChild(g.firstChild),C.unshift(S.pop())):(S=C,C=[],S.length&&(Nt(g=M.createElementNS(V,"tspan"),{dy:k,x:u}),f&&Nt(g,"style",f),r.appendChild(g)),w>d&&(d=w)),S.length&&g.appendChild(M.createTextNode(S.join(" ").replace(/- /g,"-")));_&&t.attr("title",t.textStr),t.rotation=T}c++}}})}),v&&v.removeChild(r),p&&t.applyTextShadow&&t.applyTextShadow(p)):r.appendChild(M.createTextNode(b(a)))},getContrast:function(t){return(t=ae(t).rgba)[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"},button:function(t,e,n,i,r,o,s,a,l){var c,u,h,d,f,p,m=this.label(t,e,n,l,null,null,null,null,"button"),g=0,v={x1:0,y1:0,x2:0,y2:1};return r=Tt({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:v,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),h=r.style,delete r.style,o=Tt(r,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),d=o.style,delete o.style,s=Tt(r,{stroke:"#68A",fill:{linearGradient:v,stops:[[0,"#9BD"],[1,"#CDF"]]}},s),f=s.style,delete s.style,a=Tt(r,{style:{color:"#CCC"}},a),p=a.style,delete a.style,yt(m.element,Y?"mouseover":"mouseenter",function(){3!==g&&m.attr(o).css(d)}),yt(m.element,Y?"mouseout":"mouseleave",function(){3!==g&&(c=[r,o,s][g],u=[h,d,f][g],m.attr(c).css(u))}),m.setState=function(t){m.state=g=t,t?2===t?m.attr(s).css(f):3===t&&m.attr(a).css(p):m.attr(r).css(h)},m.on("click",function(t){3!==g&&i.call(m,t)}).attr(r).css(kt({cursor:"default"},h))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=A(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=A(t[2])+e%2/2),t},path:function(t){var e={fill:ot};return It(t)?e.d=t:At(t)&&kt(e,t),this.createElement("path").attr(e)},circle:function(t,e,n){var i=At(t)?t:{x:t,y:e,r:n},r=this.createElement("circle");return r.xSetter=function(t){this.element.setAttribute("cx",t)},r.ySetter=function(t){this.element.setAttribute("cy",t)},r.attr(i)},arc:function(t,e,n,i,r,o){var s;return At(t)&&(e=t.y,n=t.r,i=t.innerR,r=t.start,o=t.end,t=t.x),(s=this.symbol("arc",t||0,e||0,n||0,n||0,{innerR:i||0,start:r||0,end:o||0})).r=n,s},rect:function(t,n,i,r,o,s){o=At(t)?t.r:o;var a=this.createElement("rect"),l=At(t)?t:t===e?{}:{x:t,y:n,width:D(i,0),height:D(r,0)};return s!==e&&(l.strokeWidth=s,l=a.crisp(l)),o&&(l.r=o),a.rSetter=function(t){Nt(this.element,{rx:t,ry:t})},a.attr(l)},setSize:function(t,e,n){var i=this.alignedObjects,r=i.length;for(this.width=t,this.height=e,this.boxWrapper[Bt(n,!0)?"animate":"attr"]({width:t,height:e});r--;)i[r].align()},g:function(t){var e=this.createElement("g");return Ot(t)?e.attr({class:it+t}):e},image:function(t,e,n,i,r){var o,s={preserveAspectRatio:ot};return arguments.length>1&&kt(s,{x:e,y:n,width:i,height:r}),(o=this.createElement("image").attr(s)).element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,e,n,i,r,o){var s,a,l,c,u=this.symbols[t],h=u&&u(A(e),A(n),i,r,o),d=/^url\((.*?)\)$/;return h?(s=this.path(h),kt(s,{symbolName:t,x:e,y:n,width:i,height:r}),o&&kt(s,o)):d.test(t)&&(c=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(A((i-e[0])/2),A((r-e[1])/2)))},a=t.match(d)[1],l=K[a]||o&&o.width&&o.height&&[o.width,o.height],(s=this.image(a).attr({x:e,y:n})).isImg=!0,l?c(s,l):(s.attr({width:0,height:0}),Yt("img",{onload:function(){0===this.width&&(Ft(this,{position:"absolute",top:"-999em"}),M.body.appendChild(this)),c(s,K[a]=[this.width,this.height]),this.parentNode&&this.parentNode.removeChild(this)},src:a}))),s},symbols:{circle:function(t,e,n,i){var r=.166*n;return[st,t+n/2,e,"C",t+n+r,e,t+n+r,e+i,t+n/2,e+i,"C",t-r,e+i,t-r,e,t+n/2,e,"Z"]},square:function(t,e,n,i){return[st,t,e,at,t+n,e,t+n,e+i,t,e+i,"Z"]},triangle:function(t,e,n,i){return[st,t+n/2,e,at,t+n,e+i,t,e+i,"Z"]},"triangle-down":function(t,e,n,i){return[st,t,e,at,t+n,e,t+n/2,e+i,"Z"]},diamond:function(t,e,n,i){return[st,t+n/2,e,at,t+n,e+i/2,t+n/2,e+i,t,e+i/2,"Z"]},arc:function(t,e,n,i,r){var o=r.start,s=r.r||n||i,a=r.end-.001,l=r.innerR,c=r.open,u=O(o),h=N(o),d=O(a),f=N(a),p=r.end-o<j?0:1;return[st,t+s*u,e+s*h,"A",s,s,0,p,1,t+s*d,e+s*f,c?st:at,t+l*d,e+l*f,"A",l,l,0,p,0,t+l*u,e+l*h,c?"":"Z"]},callout:function(t,e,n,i,r){var o,s=L(r&&r.r||0,n,i),a=s+6,l=r&&r.anchorX,c=r&&r.anchorY;return o=["M",t+s,e,"L",t+n-s,e,"C",t+n,e,t+n,e,t+n,e+s,"L",t+n,e+i-s,"C",t+n,e+i,t+n,e+i,t+n-s,e+i,"L",t+s,e+i,"C",t,e+i,t,e+i,t,e+i-s,"L",t,e+s,"C",t,e,t,e,t+s,e],l&&l>n&&c>e+a&&c<e+i-a?o.splice(13,3,"L",t+n,c-6,t+n+6,c,t+n,c+6,t+n,e+i-s):l&&l<0&&c>e+a&&c<e+i-a?o.splice(33,3,"L",t,c+6,t-6,c,t,c-6,t,e+s):c&&c>i&&l>t+a&&l<t+n-a?o.splice(23,3,"L",l+6,e+i,l,e+i+6,l-6,e+i,t+s,e+i):c&&c<0&&l>t+a&&l<t+n-a&&o.splice(3,3,"L",l-6,e,l,e-6,l+6,e,n-s,e),o}},clipRect:function(t,e,n,i){var r,o=it+J++,s=this.createElement("clipPath").attr({id:o}).add(this.defs);return(r=this.rect(t,e,n,i,0).add(s)).id=o,r.clipPath=s,r.count=0,r},text:function(t,e,n,i){var r,o=X||!G&&this.forExport,s={};return!i||!this.allowHTML&&this.forExport?(s.x=Math.round(e||0),n&&(s.y=Math.round(n)),(t||0===t)&&(s.text=t),r=this.createElement("text").attr(s),o&&r.css({position:"absolute"}),i||(r.xSetter=function(t,e,n){var i,r,o=n.getElementsByTagName("tspan"),s=n.getAttribute(e);for(r=0;r<o.length;r++)(i=o[r]).getAttribute(e)===s&&i.setAttribute(e,t);n.setAttribute(e,t)}),r):this.html(t,e,n)},fontMetrics:function(e,n){var i,r;return!(e=e||this.style.fontSize)&&n&&t.getComputedStyle&&(n=n.element||n,e=(r=t.getComputedStyle(n,""))&&r.fontSize),{h:i=(e=/px/.test(e)?Mt(e):/em/.test(e)?12*parseFloat(e):12)<24?e+3:A(1.2*e),b:A(.8*i),f:e}},rotCorr:function(t,e,n){var i=t;return e&&n&&(i=D(i*O(e*R),4)),{x:-t/3*N(e*R),y:i}},label:function(t,n,i,r,o,s,a,l,c){var u,h,d,f,p,m,g,v,y,b,_,w=this,S=w.g(c),x=w.text("",0,0,a).attr({zIndex:1}),C=0,k=3,T=0,M=0,E={};y=function(){var t,e,n=x.element.style;h=(void 0===d||void 0===f||S.styles.textAlign)&&Ot(x.textStr)&&x.getBBox(),S.width=(d||h.width||0)+2*k+T,S.height=(f||h.height||0)+2*k,g=k+w.fontMetrics(n&&n.fontSize,x).b,v&&(u||(t=M,e=(l?-g:0)+M,S.box=u=r?w.symbol(r,t,e,S.width,S.height,E):w.rect(t,e,S.width,S.height,0,E["stroke-width"]),u.isImg||u.attr("fill",ot),u.add(S)),u.isImg||u.attr(kt({width:A(S.width),height:A(S.height)},E)),E=null)},b=function(){var t,n=S.styles,i=n&&n.textAlign,r=T+k;t=l?0:g,Ot(d)&&h&&("center"===i||"right"===i)&&(r+={center:.5,right:1}[i]*(d-h.width)),r===x.x&&t===x.y||(x.attr("x",r),t!==e&&x.attr("y",t)),x.x=r,x.y=t},_=function(t,e){u?u.attr(t,e):E[t]=e},S.onAdd=function(){x.add(S),S.attr({text:t||0===t?t:"",x:n,y:i}),u&&Ot(o)&&S.attr({anchorX:o,anchorY:s})},S.widthSetter=function(t){d=t},S.heightSetter=function(t){f=t},S.paddingSetter=function(t){Ot(t)&&t!==k&&(k=S.padding=t,b())},S.paddingLeftSetter=function(t){Ot(t)&&t!==T&&(T=t,b())},S.alignSetter=function(t){(t={left:0,center:.5,right:1}[t])!==C&&(C=t,h&&S.attr({x:n}))},S.textSetter=function(t){t!==e&&x.textSetter(t),y(),b()},S["stroke-widthSetter"]=function(t,e){t&&(v=!0),M=t%2/2,_(e,t)},S.strokeSetter=S.fillSetter=S.rSetter=function(t,e){"fill"===e&&t&&(v=!0),_(e,t)},S.anchorXSetter=function(t,e){o=t,_(e,A(t)-M-p)},S.anchorYSetter=function(t,e){s=t,_(e,t-m)},S.xSetter=function(t){S.x=t,C&&(t-=C*((d||h.width)+2*k)),p=A(t),S.attr("translateX",p)},S.ySetter=function(t){m=S.y=A(t),S.attr("translateY",m)};var I=S.css;return kt(S,{css:function(t){if(t){var n={};t=Tt(t),pt(S.textProps,function(i){t[i]!==e&&(n[i]=t[i],delete t[i])}),x.css(n)}return I.call(S,t)},getBBox:function(){return{width:h.width+2*k,height:h.height+2*k,x:h.x-k,y:h.y-k}},shadow:function(t){return u&&u.shadow(t),S},destroy:function(){bt(S.element,"mouseenter"),bt(S.element,"mouseleave"),x&&(x=x.destroy()),u&&(u=u.destroy()),le.prototype.destroy.call(S),S=w=y=b=_=null}})}},n=fe,kt(le.prototype,{htmlCss:function(t){var e=this.element,n=t&&"SPAN"===e.tagName&&t.width;return n&&(delete t.width,this.textWidth=n,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=kt(this.styles,t),Ft(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,n=this.translateX||0,i=this.translateY||0,r=this.x||0,o=this.y||0,s=this.textAlign||"left",a={left:0,center:.5,right:1}[s],l=this.shadows,c=this.styles;if(Ft(e,{marginLeft:n,marginTop:i}),l&&pt(l,function(t){Ft(t,{marginLeft:n+1,marginTop:i+1})}),this.inverted&&pt(e.childNodes,function(n){t.invertChild(n,e)}),"SPAN"===e.tagName){var u,h,d=this.rotation,f=Mt(this.textWidth),p=[d,s,e.innerHTML,this.textWidth,this.textAlign].join(",");p!==this.cTT&&(h=t.fontMetrics(e.style.fontSize).b,Ot(d)&&this.setSpanRotation(d,a,h),(u=Bt(this.elemWidth,e.offsetWidth))>f&&/[ \-]/.test(e.textContent||e.innerText)&&(Ft(e,{width:f+rt,display:"block",whiteSpace:c&&c.whiteSpace||"normal"}),u=f),this.getSpanCorrection(u,h,a,d,s)),Ft(e,{left:r+(this.xCorr||0)+rt,top:o+(this.yCorr||0)+rt}),W&&(h=e.offsetHeight),this.cTT=p}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var i={},r=Y?"-ms-transform":W?"-webkit-transform":z?"MozTransform":F?"-o-transform":"";i[r]=i.transform="rotate("+t+"deg)",i[r+(z?"Origin":"-origin")]=i.transformOrigin=100*e+"% "+n+"px",Ft(this.element,i)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),kt(fe.prototype,{html:function(t,e,n){var i=this.createElement("span"),r=i.element,o=i.renderer;return i.textSetter=function(t){t!==r.innerHTML&&delete this.bBox,r.innerHTML=this.textStr=t,i.htmlUpdateTransform()},i.xSetter=i.ySetter=i.alignSetter=i.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),i[e]=t,i.htmlUpdateTransform()},i.attr({text:t,x:A(e),y:A(n)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),r.style.whiteSpace="nowrap",i.css=i.htmlCss,o.isSVG&&(i.add=function(t){var e,n,s=o.box.parentNode,a=[];if(this.parentGroup=t,t){if(!(e=t.div)){for(n=t;n;)a.push(n),n=n.parentGroup;pt(a.reverse(),function(t){var n,i=Nt(t.element,"class");i&&(i={className:i}),e=t.div=t.div||Yt(et,i,{position:"absolute",left:(t.translateX||0)+rt,top:(t.translateY||0)+rt},e||s),n=e.style,kt(t,{translateXSetter:function(e,i){n.left=e+rt,t[i]=e,t.doTransform=!0},translateYSetter:function(e,i){n.top=e+rt,t[i]=e,t.doTransform=!0}}),pt(["opacity","visibility"],function(e){Ut(t,e+"Setter",function(t,e,i,r){t.call(this,e,i,r),n[i]=e})})})}}else e=s;return e.appendChild(r),i.added=!0,i.alignOnAdd&&i.htmlUpdateTransform(),i}),i}}),!G&&!X){(ue={init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],i=["position: ","absolute",";"],r=e===et;("shape"===e||r)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",r?nt:"visible"),n.push(' style="',i.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=Yt(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,i=e.box,r=t&&t.inverted,o=t?t.element||t:i;return t&&(this.parentGroup=t),r&&e.invertChild(n,o),o.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:le.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=O(t*R),n=N(t*R);Ft(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):ot})},getSpanCorrection:function(t,e,n,i,r){var o,s=i?O(i*R):1,a=i?N(i*R):0,l=Bt(this.elemHeight,this.element.offsetHeight),c=r&&"left"!==r;this.xCorr=s<0&&-t,this.yCorr=a<0&&-l,o=s*a<0,this.xCorr+=a*e*(o?1-n:n),this.yCorr-=s*e*(i?o?n:1-n:1),c&&(this.xCorr-=t*n*(s<0?-1:1),i&&(this.yCorr-=l*n*(a<0?-1:1)),Ft(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)$t(t[e])?n[e]=A(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n,i=this;return t?(Pt(e=t.members,i),e.push(i),i.destroyClip=function(){Pt(e,i)},n=t.getCSS(i)):(i.destroyClip&&i.destroyClip(),n={clip:H?"inherit":"rect(auto)"}),i.css(n)},css:le.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&ee(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),le.prototype.destroy.apply(this)},on:function(e,n){return this.element["on"+e]=function(){var e=t.event;e.target=e.srcElement,n(e)},this},cutOffPath:function(t,e){var n;return 9!==(n=(t=t.split(/[ ,]/)).length)&&11!==n||(t[n-4]=t[n-2]=Mt(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var i,r,o,s,a,l,c,u=[],h=this.element,d=this.renderer,f=h.style,p=h.path;if(p&&"string"!=typeof p.value&&(p="x"),a=p,t){for(l=Bt(t.width,3),c=(t.opacity||.15)/l,i=1;i<=3;i++)s=2*l+1-2*i,n&&(a=this.cutOffPath(p.value,s+.5)),o=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',a,'" coordsize="10 10" style="',h.style.cssText,'" />'],r=Yt(d.prepVML(o),null,{left:Mt(f.left)+Bt(t.offsetX,1),top:Mt(f.top)+Bt(t.offsetY,1)}),n&&(r.cutOff=s+1),o=['<stroke color="',t.color||"black",'" opacity="',c*i,'"/>'],Yt(d.prepVML(o),null,null,r),e?e.element.appendChild(r):h.parentNode.insertBefore(r,h),u.push(r);this.shadows=u}return this},updateShadows:Z,setAttr:function(t,e){H?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||Yt(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var i,r=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),n.path=t=this.pathToVML(t),r)for(i=r.length;i--;)r[i].path=r[i].cutOff?this.cutOffPath(t,r[i].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var i=n.nodeName;"SPAN"===i?n.style.color=t:"IMG"!==i&&(n.filled=t!==ot,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},"fill-opacitySetter":function(t,e,n){Yt(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,n)},opacitySetter:Z,rotationSetter:function(t,e,n){var i=n.style;this[e]=i[e]=t,i.left=-A(N(t*R)+1)+rt,i.top=A(O(t*R))+rt},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e,this))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,this[e]=t,$t(t)&&(t+=rt),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,n){"inherit"===t&&(t="visible"),this.shadows&&pt(this.shadows,function(n){n.style[e]=t}),"DIV"===n.nodeName&&(t=t===nt?"-999em":0,H||(n.style[e]=t?"visible":nt),e="top"),n.style[e]=t},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}})["stroke-opacitySetter"]=ue["fill-opacitySetter"],T.VMLElement=ue=Ht(le,ue),ue.prototype.ySetter=ue.prototype.widthSetter=ue.prototype.heightSetter=ue.prototype.xSetter;var pe={Element:ue,isIE8:B.indexOf("MSIE 8.0")>-1,init:function(t,e,n,i){var r,o,s;if(this.alignedObjects=[],o=(r=this.createElement(et).css(kt(this.getStyle(i),{position:"relative"}))).element,t.appendChild(r.element),this.isVML=!0,this.box=o,this.boxWrapper=r,this.gradients={},this.cache={},this.cacheKeys=[],this.setSize(e,n,!1),!M.namespaces.hcv){M.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),s="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{M.createStyleSheet().cssText=s}catch(t){M.styleSheets[0].cssText+=s}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,n,i){var r=this.createElement(),o=At(t);return kt(r,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:n)-1,height:(o?t.height:i)-1,getCSS:function(t){var e=t.element,n=e.nodeName,i="shape"===n,r=t.inverted,o=this.top-(i?e.offsetTop:0),s=this.left,a=s+this.width,l=o+this.height,c={clip:"rect("+A(r?s:o)+"px,"+A(r?l:a)+"px,"+A(r?a:l)+"px,"+A(r?o:s)+"px)"};return!r&&H&&"DIV"===n&&kt(c,{width:a+rt,height:l+rt}),c},updateClipping:function(){pt(r.members,function(t){t.element&&t.css(r.getCSS(t))})}})},color:function(t,e,n,i){var r,s,a,l=this,c=/^rgba/,u=ot;if(t&&t.linearGradient?a="gradient":t&&t.radialGradient&&(a="pattern"),a){var h,d,f,p,m,g,v,y,b,_,w,S,x=t.linearGradient||t.radialGradient,C="",k=t.stops,T=[],M=function(){s=['<fill colors="'+T.join(",")+'" opacity="',y,'" o:opacity2="',v,'" type="',a,'" ',C,'focus="100%" method="any" />'],Yt(l.prepVML(s),null,null,e)};if(w=k[0],S=k[k.length-1],w[0]>0&&k.unshift([0,w[1]]),S[0]<1&&k.push([1,S[1]]),pt(k,function(t,e){c.test(t[1])?(r=ae(t[1]),h=r.get("rgb"),d=r.get("a")):(h=t[1],d=1),T.push(100*t[0]+"% "+h),e?(y=d,b=h):(v=d,_=h)}),"fill"===n)if("gradient"===a)f=x.x1||x[0]||0,p=x.y1||x[1]||0,m=x.x2||x[2]||0,g=x.y2||x[3]||0,C='angle="'+(90-180*E.atan((g-p)/(m-f))/j)+'"',M();else{var A,I=x.r,$=2*I,D=2*I,L=x.cx,P=x.cy,O=e.radialReference,N=function(){O&&(A=i.getBBox(),L+=(O[0]-A.x)/A.width-.5,P+=(O[1]-A.y)/A.height-.5,$*=O[2]/A.width,D*=O[2]/A.height),C='src="'+o.global.VMLRadialGradientURL+'" size="'+$+","+D+'" origin="0.5,0.5" position="'+L+","+P+'" color2="'+_+'" ',M()};i.added?N():i.onAdd=N,u=b}else u=h}else if(c.test(t)&&"IMG"!==e.tagName)r=ae(t),i[n+"-opacitySetter"](r.get("a"),n,e),u=r.get("rgb");else{var R=e.getElementsByTagName(n);R.length&&(R[0].opacity=1,R[0].type="solid"),u=t}return u},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return t=t.join(""),t=n?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:fe.prototype.html,path:function(t){var e={coordsize:"10 10"};return It(t)?e.d=t:At(t)&&kt(e,t),this.createElement("shape").attr(e)},circle:function(t,e,n){var i=this.symbol("circle");return At(t)&&(n=t.r,e=t.y,t=t.x),i.isCircle=!0,i.r=n,i.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:it+t,class:it+t}),this.createElement(et).attr(e)},image:function(t,e,n,i,r){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:n,width:i,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):fe.prototype.createElement.call(this,t)},invertChild:function(t,e){var n=this,i=e.style,r="IMG"===t.tagName&&t.style;Ft(t,{flip:"x",left:Mt(i.width)-(r?Mt(r.top):1),top:Mt(i.height)-(r?Mt(r.left):1),rotation:-90}),pt(t.childNodes,function(e){n.invertChild(e,t)})},symbols:{arc:function(t,e,n,i,r){var o,s=r.start,a=r.end,l=r.r||n||i,c=r.innerR,u=O(s),h=N(s),d=O(a),f=N(a);return a-s==0?["x"]:(o=["wa",t-l,e-l,t+l,e+l,t+l*u,e+l*h,t+l*d,e+l*f],r.open&&!c&&o.push("e",st,t,e),o.push("at",t-c,e-c,t+c,e+c,t+c*d,e+c*f,t+c*u,e+c*h,"x","e"),o.isArc=!0,o)},circle:function(t,e,n,i,r){return r&&(n=i=2*r.r),r&&r.isCircle&&(t-=n/2,e-=i/2),["wa",t,e,t+n,e+i,t+n,e+i/2,t+n,e+i/2,"e"]},rect:function(t,e,n,i,r){return fe.prototype.symbols[Ot(r)&&r.r?"callout":"square"].call(0,t,e,n,i,r)}}};T.VMLRenderer=ce=function(){this.init.apply(this,arguments)},ce.prototype=Tt(fe.prototype,pe),n=ce}function me(t,e,n,i){this.axis=t,this.pos=e,this.type=n||"",this.isNew=!0,n||i||this.addLabel()}fe.prototype.measureSpanWidth=function(t,e){var n,i=M.createElement("span"),r=M.createTextNode(t);return i.appendChild(r),Ft(i,e),this.box.appendChild(i),n=i.offsetWidth,ee(i),n},X&&(T.CanVGRenderer=he=function(){V="http://www.w3.org/1999/xhtml"},he.prototype.symbols={},de=function(){var t=[];function e(){var e,n=t.length;for(e=0;e<n;e++)t[e]();t=[]}return{push:function(n,i){0===t.length&&function(t,e){var n=M.getElementsByTagName("head")[0],i=M.createElement("script");i.type="text/javascript",i.src=t,i.onload=e,n.appendChild(i)}(i,e),t.push(n)}}}(),n=he),me.prototype={addLabel:function(){var t,e,n=this.axis,i=n.options,r=n.chart,o=n.categories,s=n.names,a=this.pos,l=i.labels,c=n.tickPositions,u=a===c[0],h=a===c[c.length-1],d=o?Bt(o[a],s[a],a):a,f=this.label,p=c.info;n.isDatetimeAxis&&p&&(e=i.dateTimeLabelFormats[p.higherRanks[a]||p.unitName]),this.isFirst=u,this.isLast=h,t=n.labelFormatter.call({axis:n,chart:r,isFirst:u,isLast:h,dateTimeLabelFormat:e,value:n.isLog?ne(Lt(d)):d}),Ot(f)?f&&f.attr({text:t}):(this.label=f=Ot(t)&&l.enabled?r.renderer.text(t,0,0,l.useHTML).css(Tt(l.style)).add(n.labelGroup):null,this.labelLength=f&&f.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,n,i=this.axis,r=t.x,o=i.chart.chartWidth,s=i.chart.spacing,a=Bt(i.labelLeft,L(i.pos,s[3])),l=Bt(i.labelRight,D(i.pos+i.len,o-s[1])),c=this.label,u=this.rotation,h={left:0,center:.5,right:1}[i.labelAlign],d=c.getBBox().width,f=i.slotWidth,p=h,m=1,g={};u?u<0&&r-h*d<a?n=A(r/O(u*R)-a):u>0&&r+h*d>l&&(n=A((o-r)/O(u*R))):(e=r+(1-h)*d,r-h*d<a?f=t.x+f*(1-h)-a:e>l&&(f=l-t.x+f*h,m=-1),(f=L(i.slotWidth,f))<i.slotWidth&&"center"===i.labelAlign&&(t.x+=m*(i.slotWidth-f-p*(i.slotWidth-L(d,f)))),(d>f||i.autoRotation&&c.styles.width)&&(n=f)),n&&(g.width=n,i.options.labels.style.textOverflow||(g.textOverflow="ellipsis"),c.css(g))},getPosition:function(t,e,n,i){var r=this.axis,o=r.chart,s=i&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+n,null,null,i)+r.transB:r.left+r.offset+(r.opposite?(i&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?s-r.bottom+r.offset-(r.opposite?r.height:0):s-r.translate(e+n,null,null,i)-r.transB}},getLabelPosition:function(t,e,n,i,r,o,s,a){var l,c=this.axis,u=c.transA,h=c.reversed,d=c.staggerLines,f=c.tickRotCorr||{x:0,y:0},p=r.y;return Ot(p)||(p=2===c.side?f.y+8:p=O(n.rotation*R)*(f.y-n.getBBox(!1,0).height/2)),t=t+r.x+f.x-(o&&i?o*u*(h?-1:1):0),e=e+p-(o&&!i?o*u*(h?1:-1):0),d&&(l=s/(a||1)%d,c.opposite&&(l=d-l-1),e+=l*(c.labelOffset/d)),{x:t,y:A(e)}},getMarkPath:function(t,e,n,i,r,o){return o.crispLine([st,t,e,at,t+(r?0:-n),e+(r?n:0)],i)},render:function(t,n,i){var r,o,s,a=this.axis,l=a.options,c=a.chart.renderer,u=a.horiz,h=this.type,d=this.label,f=this.pos,p=l.labels,m=this.gridLine,g=h?h+"Grid":"grid",v=h?h+"Tick":"tick",y=l[g+"LineWidth"],b=l[g+"LineColor"],_=l[g+"LineDashStyle"],w=l[v+"Length"],S=Bt(l[v+"Width"],!h&&a.isXAxis?1:0),x=l[v+"Color"],C=l[v+"Position"],k=this.mark,T=p.step,M=!0,E=a.tickmarkOffset,A=this.getPosition(u,f,E,n),I=A.x,$=A.y,D=u&&I===a.pos+a.len||!u&&$===a.pos?-1:1;i=Bt(i,1),this.isActive=!0,y&&(r=a.getPlotLinePath(f+E,y*D,n,!0),m===e&&(s={stroke:b,"stroke-width":y},_&&(s.dashstyle=_),h||(s.zIndex=1),n&&(s.opacity=0),this.gridLine=m=y?c.path(r).attr(s).add(a.gridGroup):null),!n&&m&&r&&m[this.isNew?"attr":"animate"]({d:r,opacity:i})),S&&w&&("inside"===C&&(w=-w),a.opposite&&(w=-w),o=this.getMarkPath(I,$,w,S*D,u,c),k?k.animate({d:o,opacity:i}):this.mark=c.path(o).attr({stroke:x,"stroke-width":S,opacity:i}).add(a.axisGroup)),d&&!isNaN(I)&&(d.xy=A=this.getLabelPosition(I,$,d,u,p,E,t,T),this.isFirst&&!this.isLast&&!Bt(l.showFirstLabel,1)||this.isLast&&!this.isFirst&&!Bt(l.showLastLabel,1)?M=!1:!u||a.isRadial||p.step||p.rotation||n||0===i||this.handleOverflow(A),T&&t%T&&(M=!1),M&&!isNaN(A.y)?(A.opacity=i,d[this.isNew?"attr":"animate"](A),this.isNew=!1):d.attr("y",-9999))},destroy:function(){te(this,this.axis)}},T.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},T.PlotLineOrBand.prototype={render:function(){var t,e,n,i,r,o,s=this,a=s.axis,l=a.horiz,c=s.options,u=c.label,h=s.label,d=c.width,f=c.to,p=c.from,m=Ot(p)&&Ot(f),g=c.value,v=c.dashStyle,y=s.svgElem,b=[],_=c.color,w=c.zIndex,S=c.events,x={},C=a.chart.renderer;if(a.isLog&&(p=Dt(p),f=Dt(f),g=Dt(g)),d)b=a.getPlotLinePath(g,d),x={stroke:_,"stroke-width":d},v&&(x.dashstyle=v);else{if(!m)return;b=a.getPlotBandPath(p,f,c),_&&(x.fill=_),c.borderWidth&&(x.stroke=c.borderColor,x["stroke-width"]=c.borderWidth)}if(Ot(w)&&(x.zIndex=w),y)b?(y.show(),y.animate({d:b})):(y.hide(),h&&(s.label=h=h.destroy()));else if(b&&b.length&&(s.svgElem=y=C.path(b).attr(x).add(),S))for(e in t=function(t){y.on(t,function(e){S[t].apply(s,[e])})},S)t(e);return u&&Ot(u.text)&&b&&b.length&&a.width>0&&a.height>0&&!b.flat?(u=Tt({align:l&&m&&"center",x:l?!m&&4:10,verticalAlign:!l&&m&&"middle",y:l?m?16:10:m?6:-4,rotation:l&&!m&&90},u),h||(x={align:u.textAlign||u.align,rotation:u.rotation},Ot(w)&&(x.zIndex=w),s.label=h=C.text(u.text,0,0,u.useHTML).attr(x).css(u.style).add()),n=[b[1],b[4],m?b[6]:b[1]],i=[b[2],b[5],m?b[7]:b[2]],r=Zt(n),o=Zt(i),h.align(u,!1,{x:r,y:o,width:Qt(n)-r,height:Qt(i)-o}),h.show()):h&&h.hide(),s},destroy:function(){Pt(this.axis.plotLinesAndBands,this),delete this.axis,te(this)}},l={getPlotBandPath:function(t,e){var n=this.getPlotLinePath(e,null,null,!0),i=this.getPlotLinePath(t,null,null,!0);return i&&n?(i.flat=i.toString()===n.toString(),i.push(n[4],n[5],n[1],n[2])):i=null,i},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var n=new T.PlotLineOrBand(this,t).render(),i=this.userOptions;return n&&(e&&(i[e]=i[e]||[],i[e].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,n=this.options,i=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();pt([n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&Pt(e,e[r])})}};var ge=T.Axis=function(){this.init.apply(this,arguments)};ge.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return T.numberFormat(this.total,-1)},style:Tt(oe.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(t,n){var i=n.isX;this.chart=t,this.horiz=t.inverted?!i:i,this.isXAxis=i,this.coll=i?"xAxis":"yAxis",this.opposite=n.opposite,this.side=n.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(n);var r=this.options,o=r.type,s="datetime"===o;this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.userOptions=n,this.minPixelPadding=0,this.reversed=r.reversed,this.visible=!1!==r.visible,this.zoomEnabled=!1!==r.zoomEnabled,this.categories=r.categories||"category"===o,this.names=this.names||[],this.isLog="logarithmic"===o,this.isDatetimeAxis=s,this.isLinked=Ot(r.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.max=null,this.min=null,this.crosshair=Bt(r.crosshair,jt(t.options.tooltip.crosshairs)[i?0:1],!1);var a,l=this.options.events;for(a in-1===ft(this,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&i&&this.reversed===e&&(this.reversed=!0),this.removePlotBand=this.removePlotBandOrLine,this.removePlotLine=this.removePlotBandOrLine,l)yt(this,a,l[a]);this.isLog&&(this.val2lin=Dt,this.lin2val=Lt)},setOptions:function(t){this.options=Tt(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],Tt(o[this.coll],t))},defaultLabelFormatter:function(){var t,n,i=this.axis,r=this.value,a=i.categories,l=this.dateTimeLabelFormat,c=o.lang.numericSymbols,u=c&&c.length,h=i.options.labels.format,d=i.isLog?r:i.tickInterval;if(h)n=qt(h,this);else if(a)n=r;else if(l)n=s(l,r);else if(u&&d>=1e3)for(;u--&&n===e;)d>=(t=Math.pow(1e3,u+1))&&10*r%t==0&&null!==c[u]&&(n=T.numberFormat(r/t,-1)+c[u]);return n===e&&(n=P(r)>=1e4?T.numberFormat(r,-1):T.numberFormat(r,-1,e,"")),n},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),pt(t.series,function(n){if(n.visible||!e.options.chart.ignoreHiddenSeries){var i,r,o,s=n.options,a=s.threshold;t.hasVisibleSeries=!0,t.isLog&&a<=0&&(a=null),t.isXAxis?(i=n.xData).length&&(t.dataMin=L(Bt(t.dataMin,i[0]),Zt(i)),t.dataMax=D(Bt(t.dataMax,i[0]),Qt(i))):(n.getExtremes(),o=n.dataMax,Ot(r=n.dataMin)&&Ot(o)&&(t.dataMin=L(Bt(t.dataMin,r),r),t.dataMax=D(Bt(t.dataMax,o),o)),Ot(a)&&(t.threshold=a),s.softThreshold&&!t.isLog||(t.softThreshold=!1))}})},translate:function(t,e,n,i,r,o){var s,a=this.linkedParent||this,l=1,c=0,u=i?a.oldTransA:a.transA,h=i?a.oldMin:a.min,d=a.minPixelPadding,f=(a.doPostTranslate||a.isLog&&r)&&a.lin2val;return u||(u=a.transA),n&&(l*=-1,c=a.len),a.reversed&&(c-=(l*=-1)*(a.sector||a.len)),e?(t=t*l+c,s=(t-=d)/u+h,f&&(s=a.lin2val(s))):(f&&(t=a.val2lin(t)),"between"===o&&(o=.5),s=l*(t-h)*u+c+l*d+($t(o)?u*o*a.pointRange:0)),s},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,i,r){var o,s,a,l,c,u=this.chart,h=this.left,d=this.top,f=n&&u.oldChartHeight||u.chartHeight,p=n&&u.oldChartWidth||u.chartWidth,m=this.transB,g=function(t,e,n){return(t<e||t>n)&&(i?t=L(D(e,t),n):c=!0),t};return r=Bt(r,this.translate(t,null,null,n)),o=a=A(r+m),s=l=A(f-r-m),isNaN(r)?c=!0:this.horiz?(s=d,l=f-this.bottom,o=a=g(o,h,h+this.width)):(o=h,a=p-this.right,s=l=g(s,d,d+this.height)),c&&!i?null:u.renderer.crispLine([st,o,s,at,a,l],e||1)},getLinearTickPositions:function(t,e,n){var i,r,o=ne(I(e/t)*t),s=ne($(n/t)*t),a=[];if(e===n&&$t(e))return[e];for(i=o;i<=s&&(a.push(i),(i=ne(i+t))!==r);)r=i;return a},getMinorTickPositions:function(){var t,e,n,i=this.options,r=this.tickPositions,o=this.minorTickInterval,s=[],a=this.pointRangePadding||0,l=this.min-a,c=this.max+a,u=c-l;if(u&&u/o<this.len/3)if(this.isLog)for(n=r.length,e=1;e<n;e++)s=s.concat(this.getLogTickPositions(o,r[e-1],r[e],!0));else if(this.isDatetimeAxis&&"auto"===i.minorTickInterval)s=s.concat(this.getTimeTicks(this.normalizeTimeTickInterval(o),l,c,i.startOfWeek));else for(t=l+(r[0]-l)%o;t<=c;t+=o)s.push(t);return 0!==s.length&&this.trimTicks(s,i.startOnTick,i.endOnTick),s},adjustForMinRange:function(){var t,n,i,r,o,s,a,l,c,u=this.options,h=this.min,d=this.max,f=this.dataMax-this.dataMin>=this.minRange;this.isXAxis&&this.minRange===e&&!this.isLog&&(Ot(u.min)||Ot(u.max)?this.minRange=null:(pt(this.series,function(t){for(o=t.xData,s=t.xIncrement?1:o.length-1,i=s;i>0;i--)r=o[i]-o[i-1],(n===e||r<n)&&(n=r)}),this.minRange=L(5*n,this.dataMax-this.dataMin))),d-h<this.minRange&&(a=[h-(t=((c=this.minRange)-d+h)/2),Bt(u.min,h-t)],f&&(a[2]=this.dataMin),l=[(h=Qt(a))+c,Bt(u.max,h+c)],f&&(l[2]=this.dataMax),(d=Zt(l))-h<c&&(a[0]=d-c,a[1]=Bt(u.min,d-c),h=Qt(a))),this.min=h,this.max=d},setAxisTranslation:function(t){var e,n,i=this,r=i.max-i.min,o=i.axisPointRange||0,s=0,a=0,l=i.linkedParent,c=!!i.categories,u=i.transA,h=i.isXAxis;(h||c||o)&&(l?(s=l.minPointOffset,a=l.pointRangePadding):(pt(i.series,function(t){var n=t.closestPointRange;!t.noSharedTooltip&&Ot(n)&&(e=Ot(e)?L(e,n):n)}),pt(i.series,function(t){var n=c?1:h?Bt(t.options.pointRange,e,0):i.axisPointRange||0,r=t.options.pointPlacement;o=D(o,n),i.single||(s=D(s,Et(r)?0:n/2),a=D(a,"on"===r?0:n))})),n=i.ordinalSlope&&e?i.ordinalSlope/e:1,i.minPointOffset=s*=n,i.pointRangePadding=a*=n,i.pointRange=L(o,r),h&&(i.closestPointRange=e)),t&&(i.oldTransA=u),i.translationSlope=i.transA=u=i.len/(r+a||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*s},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e,n,i,r,o,s,a,l=this,c=l.chart,u=l.options,h=l.isLog,d=l.isDatetimeAxis,f=l.isXAxis,p=l.isLinked,m=u.maxPadding,g=u.minPadding,v=u.tickInterval,y=u.tickPixelInterval,b=l.categories,_=l.threshold,w=l.softThreshold;d||b||p||this.getTickAmount(),s=Bt(l.userMin,u.min),a=Bt(l.userMax,u.max),p?(l.linkedParent=c[l.coll][u.linkedTo],n=l.linkedParent.getExtremes(),l.min=Bt(n.min,n.dataMin),l.max=Bt(n.max,n.dataMax),u.type!==l.linkedParent.options.type&&ht(11,1)):(!w&&Ot(_)&&(l.dataMin>=_?(r=_,g=0):l.dataMax<=_&&(o=_,m=0)),l.min=Bt(s,r,l.dataMin),l.max=Bt(a,o,l.dataMax)),h&&(!t&&L(l.min,Bt(l.dataMin,l.min))<=0&&ht(10,1),l.min=ne(Dt(l.min),15),l.max=ne(Dt(l.max),15)),l.range&&Ot(l.max)&&(l.userMin=l.min=s=D(l.min,l.minFromRange()),l.userMax=a=l.max,l.range=null),l.beforePadding&&l.beforePadding(),l.adjustForMinRange(),b||l.axisPointRange||l.usePercentage||p||!Ot(l.min)||!Ot(l.max)||(e=l.max-l.min)&&(!Ot(s)&&g&&(l.min-=e*g),!Ot(a)&&m&&(l.max+=e*m)),$t(u.floor)&&(l.min=D(l.min,u.floor)),$t(u.ceiling)&&(l.max=L(l.max,u.ceiling)),w&&Ot(l.dataMin)&&(_=_||0,!Ot(s)&&l.min<_&&l.dataMin>=_?l.min=_:!Ot(a)&&l.max>_&&l.dataMax<=_&&(l.max=_)),l.min===l.max||void 0===l.min||void 0===l.max?l.tickInterval=1:p&&!v&&y===l.linkedParent.options.tickPixelInterval?l.tickInterval=v=l.linkedParent.tickInterval:l.tickInterval=Bt(v,this.tickAmount?(l.max-l.min)/D(this.tickAmount-1,1):void 0,b?1:(l.max-l.min)*y/D(l.len,y)),f&&!t&&pt(l.series,function(t){t.processData(l.min!==l.oldMin||l.max!==l.oldMax)}),l.setAxisTranslation(!0),l.beforeSetTickPositions&&l.beforeSetTickPositions(),l.postProcessTickInterval&&(l.tickInterval=l.postProcessTickInterval(l.tickInterval)),l.pointRange&&!v&&(l.tickInterval=D(l.pointRange,l.tickInterval)),i=Bt(u.minTickInterval,l.isDatetimeAxis&&l.closestPointRange),!v&&l.tickInterval<i&&(l.tickInterval=i),d||h||v||(l.tickInterval=Kt(l.tickInterval,null,Xt(l.tickInterval),Bt(u.allowDecimals,!(l.tickInterval>.5&&l.tickInterval<5&&l.max>1e3&&l.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(l.tickInterval=l.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,n=this.options,i=n.tickPositions,r=n.tickPositioner,o=n.startOnTick,s=n.endOnTick;this.tickmarkOffset=this.categories&&"between"===n.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===n.minorTickInterval&&this.tickInterval?this.tickInterval/5:n.minorTickInterval,this.tickPositions=t=i&&i.slice(),t||((t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,n.units),this.min,this.max,n.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,r&&(r=r.apply(this,[this.min,this.max]))&&(this.tickPositions=t=r)),this.isLinked||(this.trimTicks(t,o,s),this.min===this.max&&Ot(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,i||r||this.adjustTickAmount())},trimTicks:function(t,e,n){var i=t[0],r=t[t.length-1],o=this.minPointOffset||0;e?this.min=i:this.min-o>i&&t.shift(),n?this.max=r:this.max+o<r&&t.pop(),0===t.length&&Ot(i)&&t.push((r+i)/2)},alignToOthers:function(){var t,e={},n=this.options;return!1!==this.chart.options.chart.alignTicks&&!1!==n.alignTicks&&pt(this.chart[this.coll],function(n){var i=n.options,r=[n.horiz?i.left:i.top,i.width,i.height,i.pane].join(",");n.series.length&&(e[r]?t=!0:e[r]=1)}),t},getTickAmount:function(){var t=this.options,e=t.tickAmount,n=t.tickPixelInterval;!Ot(t.tickInterval)&&this.len<n&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2),!e&&this.alignToOthers()&&(e=$(this.len/n)+1),e<4&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t,n,i=this.tickInterval,r=this.tickPositions,o=this.tickAmount,s=this.finalTickAmt,a=r&&r.length;if(a<o){for(;r.length<o;)r.push(ne(r[r.length-1]+i));this.transA*=(a-1)/(o-1),this.max=r[r.length-1]}else a>o&&(this.tickInterval*=2,this.setTickPositions());if(Ot(s)){for(t=n=r.length;t--;)(3===s&&t%2==1||s<=2&&t>0&&t<n-1)&&r.splice(t,1);this.finalTickAmt=e}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,pt(this.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,n,i,r){var o=this,s=o.chart;n=Bt(n,!0),pt(o.series,function(t){delete t.kdTree}),r=kt(r,{min:t,max:e}),_t(o,"setExtremes",r,function(){o.userMin=t,o.userMax=e,o.eventArgs=r,n&&s.redraw(i)})},zoom:function(t,n){var i=this.dataMin,r=this.dataMax,o=this.options,s=L(i,Bt(o.min,i)),a=D(r,Bt(o.max,r));return this.allowZoomOutside||(Ot(i)&&t<=s&&(t=s),Ot(r)&&n>=a&&(n=a)),this.displayBtn=t!==e||n!==e,this.setExtremes(t,n,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,n=e.offsetLeft||0,i=e.offsetRight||0,r=this.horiz,o=Bt(e.width,t.plotWidth-n+i),s=Bt(e.height,t.plotHeight),a=Bt(e.top,t.plotTop),l=Bt(e.left,t.plotLeft+n),c=/%$/;c.test(s)&&(s=parseFloat(s)/100*t.plotHeight),c.test(a)&&(a=parseFloat(a)/100*t.plotHeight+t.plotTop),this.left=l,this.top=a,this.width=o,this.height=s,this.bottom=t.chartHeight-s-a,this.right=t.chartWidth-o-l,this.len=D(r?o:s,0),this.pos=r?l:a},getExtremes:function(){var t=this.isLog;return{min:t?ne(Lt(this.min)):this.min,max:t?ne(Lt(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=e?Lt(this.min):this.min,i=e?Lt(this.max):this.max;return null===t?t=i<0?i:n:n>t?t=n:i<t&&(t=i),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e=(Bt(t,0)-90*this.side+720)%360;return e>15&&e<165?"right":e>195&&e<345?"left":"center"},unsquish:function(){var t,e,n,i=this.chart,r=this.ticks,o=this.options.labels,s=this.horiz,a=this.tickInterval,l=a,c=this.len/(((this.categories?1:0)+this.max-this.min)/a),u=o.rotation,h=i.renderer.fontMetrics(o.style.fontSize,r[0]&&r[0].label),d=Number.MAX_VALUE,f=function(t){var e=t/(c||1);return(e=e>1?$(e):1)*a};return s?(n=!o.staggerLines&&!o.step&&(Ot(u)?[u]:c<Bt(o.autoRotationLimit,80)&&o.autoRotation))&&pt(n,function(n){var i;(n===u||n&&n>=-90&&n<=90)&&(i=(e=f(P(h.h/N(R*n))))+P(n/360))<d&&(d=i,t=n,l=e)}):o.step||(l=f(h.h)),this.autoRotation=n,this.labelRotation=Bt(t,u),l},renderUnsquish:function(){var t,e,n,i,r=this.chart,o=r.renderer,s=this.tickPositions,a=this.ticks,l=this.options.labels,c=this.horiz,u=r.margin,h=this.categories?s.length:s.length-1,d=this.slotWidth=c&&(l.step||0)<2&&!l.rotation&&(this.staggerLines||1)*r.plotWidth/h||!c&&(u[3]&&u[3]-r.spacing[3]||.33*r.chartWidth),f=D(1,A(d-2*(l.padding||5))),p={},m=o.fontMetrics(l.style.fontSize,a[0]&&a[0].label),g=l.style.textOverflow,v=0;if(Et(l.rotation)||(p.rotation=l.rotation||0),this.autoRotation)pt(s,function(t){(t=a[t])&&t.labelLength>v&&(v=t.labelLength)}),v>f&&v>m.h?p.rotation=this.labelRotation:this.labelRotation=0;else if(d&&(t={width:f+rt},!g))for(t.textOverflow="clip",n=s.length;!c&&n--;)i=s[n],(e=a[i].label)&&("ellipsis"===e.styles.textOverflow&&e.css({textOverflow:"clip"}),(e.getBBox().height>this.len/s.length-(m.h-m.f)||a[i].labelLength>d)&&(e.specCss={textOverflow:"ellipsis"}));p.rotation&&(t={width:(v>.5*r.chartHeight?.33*r.chartHeight:r.chartHeight)+rt},g||(t.textOverflow="ellipsis")),this.labelAlign=p.align=l.align||this.autoLabelAlign(this.labelRotation),pt(s,function(e){var n=a[e],i=n&&n.label;i&&(i.attr(p),t&&i.css(Tt(t,i.specCss)),delete i.specCss,n.rotation=p.rotation)}),this.tickRotCorr=o.rotCorr(m.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||Ot(this.min)&&Ot(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,n,i,r,o,s,a=this,l=a.chart,c=l.renderer,u=a.options,h=a.tickPositions,d=a.ticks,f=a.horiz,p=a.side,m=l.inverted?[1,0,3,2][p]:p,g=0,v=0,y=u.title,b=u.labels,_=0,w=a.opposite,S=l.axisOffset,x=l.clipOffset,C=[-1,1,1,-1][p],k=a.axisParent;if(t=a.hasData(),a.showAxis=e=t||Bt(u.showEmpty,!0),a.staggerLines=a.horiz&&b.staggerLines,a.axisGroup||(a.gridGroup=c.g("grid").attr({zIndex:u.gridZIndex||1}).add(k),a.axisGroup=c.g("axis").attr({zIndex:u.zIndex||2}).add(k),a.labelGroup=c.g("axis-labels").attr({zIndex:b.zIndex||7}).addClass(it+a.coll.toLowerCase()+"-labels").add(k)),t||a.isLinked)pt(h,function(t){d[t]?d[t].addLabel():d[t]=new me(a,t)}),a.renderUnsquish(),!1===b.reserveSpace||0!==p&&2!==p&&{1:"left",3:"right"}[p]!==a.labelAlign&&"center"!==a.labelAlign||pt(h,function(t){_=D(d[t].getLabelSize(),_)}),a.staggerLines&&(_*=a.staggerLines,a.labelOffset=_*(a.opposite?-1:1));else for(o in d)d[o].destroy(),delete d[o];y&&y.text&&!1!==y.enabled&&(a.axisTitle||(a.axisTitle=c.text(y.text,0,0,y.useHTML).attr({zIndex:7,rotation:y.rotation||0,align:y.textAlign||{low:w?"right":"left",middle:"center",high:w?"left":"right"}[y.align]}).addClass(it+this.coll.toLowerCase()+"-title").css(y.style).add(a.axisGroup),a.axisTitle.isNew=!0),e&&(g=a.axisTitle.getBBox()[f?"height":"width"],v=Ot(n=y.offset)?0:Bt(y.margin,f?5:10)),a.axisTitle[e?"show":"hide"](!0)),a.offset=C*Bt(u.offset,S[p]),a.tickRotCorr=a.tickRotCorr||{x:0,y:0},s=2===p?a.tickRotCorr.y:0,i=Math.abs(_)+v+(_&&C*(f?Bt(b.y,a.tickRotCorr.y+8):b.x)-s),a.axisTitleMargin=Bt(n,i),S[p]=D(S[p],a.axisTitleMargin+g+C*a.offset,i),r=u.offset?0:2*I(u.lineWidth/2),x[m]=D(x[m],r)},getLinePath:function(t){var e=this.chart,n=this.opposite,i=this.offset,r=this.horiz,o=this.left+(n?this.width:0)+i,s=e.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(t*=-1),e.renderer.crispLine([st,r?this.left:o,r?s:this.top,at,r?e.chartWidth-this.right:o,r?s:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,i=this.len,r=this.options.title,o=t?e:n,s=this.opposite,a=this.offset,l=r.x||0,c=r.y||0,u=Mt(r.style.fontSize||12),h={low:o+(t?0:i),middle:o+i/2,high:o+(t?i:0)}[r.align],d=(t?n+this.height:e)+(t?1:-1)*(s?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:t?h+l:d+(s?this.width:0)+a+l,y:t?d+c-(s?this.height:0)+a:h+c}},render:function(){var t,n,i,r=this,o=r.chart,s=o.renderer,a=r.options,l=r.isLog,c=r.isLinked,u=r.tickPositions,h=r.axisTitle,d=r.ticks,f=r.minorTicks,p=r.alternateBands,m=a.stackLabels,g=a.alternateGridColor,v=r.tickmarkOffset,y=a.lineWidth,b=o.hasRendered&&Ot(r.oldMin)&&!isNaN(r.oldMin),_=r.showAxis,w=s.globalAnimation;r.labelEdge.length=0,r.overlap=!1,pt([d,f,p],function(t){var e;for(e in t)t[e].isActive=!1}),(r.hasData()||c)&&(r.minorTickInterval&&!r.categories&&pt(r.getMinorTickPositions(),function(t){f[t]||(f[t]=new me(r,t,"minor")),b&&f[t].isNew&&f[t].render(null,!0),f[t].render(null,!1,1)}),u.length&&(pt(u,function(t,e){(!c||t>=r.min&&t<=r.max)&&(d[t]||(d[t]=new me(r,t)),b&&d[t].isNew&&d[t].render(e,!0,.1),d[t].render(e))}),v&&(0===r.min||r.single)&&(d[-1]||(d[-1]=new me(r,-1,null,!0)),d[-1].render(-1))),g&&pt(u,function(t,s){i=u[s+1]!==e?u[s+1]+v:r.max-v,s%2==0&&t<r.max&&i<=r.max+(o.polar?-v:v)&&(p[t]||(p[t]=new T.PlotLineOrBand(r)),n=t+v,p[t].options={from:l?Lt(n):n,to:l?Lt(i):i,color:g},p[t].render(),p[t].isActive=!0)}),r._addedPlotLB||(pt((a.plotLines||[]).concat(a.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),pt([d,f,p],function(t){var e,n,i=[],r=w?w.duration||500:0;for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,i.push(e));Rt(function(){for(n=i.length;n--;)t[i[n]]&&!t[i[n]].isActive&&(t[i[n]].destroy(),delete t[i[n]])},t!==p&&o.hasRendered&&r?r:0)}),y&&(t=r.getLinePath(y),r.axisLine?r.axisLine.animate({d:t}):r.axisLine=s.path(t).attr({stroke:a.lineColor,"stroke-width":y,zIndex:7}).add(r.axisGroup),r.axisLine[_?"show":"hide"](!0)),h&&_&&(h[h.isNew?"attr":"animate"](r.getTitlePosition()),h.isNew=!1),m&&m.enabled&&r.renderStackTotals(),r.isDirty=!1},redraw:function(){this.visible&&(this.render(),pt(this.plotLinesAndBands,function(t){t.render()})),pt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,n,i=this,r=i.stacks,o=i.plotLinesAndBands;for(e in t||bt(i),r)te(r[e]),r[e]=null;for(pt([i.ticks,i.minorTicks,i.alternateBands],function(t){te(t)}),n=o.length;n--;)o[n].destroy();pt(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){i[t]&&(i[t]=i[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){var n,i,r,o,s,a=this.crosshair;if(!this.crosshair||!1===(Ot(e)||!Bt(a.snap,!0))||e&&e.series&&e.series[this.coll]!==this)this.hideCrosshair();else{if(Bt(a.snap,!0)?Ot(e)&&(i=this.isXAxis?e.plotX:this.len-e.plotY):i=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,null===(n=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:Bt(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,i)||null))return void this.hideCrosshair();o=this.categories&&!this.isRadial,s=Bt(a.width,o?this.transA:1),this.cross?this.cross.attr({d:n,visibility:"visible","stroke-width":s}):(r={"stroke-width":s,stroke:a.color||(o?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:Bt(a.zIndex,2)},a.dashStyle&&(r.dashstyle=a.dashStyle),this.cross=this.chart.renderer.path(n).attr(r).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},kt(ge.prototype,l),ge.prototype.getTimeTicks=function(t,e,n,i){var r,s,l=[],T={},M=o.global.useUTC,E=new c(e-Vt(e)),A=t.unitRange,$=t.count;if(Ot(e)){E[b](A>=a.second?0:$*I(E.getMilliseconds()/$)),A>=a.second&&E[_](A>=a.minute?0:$*I(E.getSeconds()/$)),A>=a.minute&&E[w](A>=a.hour?0:$*I(E[f]()/$)),A>=a.hour&&E[S](A>=a.day?0:$*I(E[p]()/$)),A>=a.day&&E[x](A>=a.month?1:$*I(E[g]()/$)),A>=a.month&&(E[C](A>=a.year?0:$*I(E[v]()/$)),s=E[y]()),A>=a.year&&(s-=s%$,E[k](s)),A===a.week&&E[x](E[g]()-E[m]()+Bt(i,1)),r=1,(h||d)&&(E=E.getTime(),E=new c(E+Vt(E))),s=E[y]();for(var D=E.getTime(),L=E[v](),P=E[g](),O=(a.day+(M?Vt(E):60*E.getTimezoneOffset()*1e3))%a.day;D<n;)l.push(D),A===a.year?D=u(s+r*$,0):A===a.month?D=u(s,L+r*$):M||A!==a.day&&A!==a.week?D+=A*$:D=u(s,L,P+r*$*(A===a.day?1:7)),r++;l.push(D),pt(mt(l,function(t){return A<=a.hour&&t%a.day===O}),function(t){T[t]="day"})}return l.info=kt(t,{higherRanks:T,totalRange:A*$}),l},ge.prototype.normalizeTimeTickInterval=function(t,e){var n,i=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=i[i.length-1],o=a[r[0]],s=r[1];for(n=0;n<i.length&&(r=i[n],o=a[r[0]],s=r[1],!(i[n+1]&&t<=(o*s[s.length-1]+a[i[n+1][0]])/2));n++);return o===a.year&&t<5*o&&(s=[1,2,5]),{unitRange:o,count:Kt(t/o,s,"year"===r[0]?D(Xt(t/o),1):1),unitName:r[0]}},ge.prototype.getLogTickPositions=function(t,n,i,r){var o=this.options,s=this.len,a=[];if(r||(this._minorAutoInterval=null),t>=.5)t=A(t),a=this.getLinearTickPositions(t,n,i);else if(t>=.08){var l,c,u,h,d,f,p;for(l=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],c=I(n);c<i+1&&!p;c++)for(h=l.length,u=0;u<h&&!p;u++)(d=Dt(Lt(c)*l[u]))>n&&(!r||f<=i)&&f!==e&&a.push(f),f>i&&(p=!0),f=d}else{var m=Lt(n),g=Lt(i),v=o[r?"minorTickInterval":"tickInterval"],y="auto"===v?null:v,b=o.tickPixelInterval/(r?5:1),_=r?s/this.tickPositions.length:s;t=Kt(t=Bt(y,this._minorAutoInterval,(g-m)*b/(_||1)),null,Xt(t)),a=vt(this.getLinearTickPositions(t,m,g),Dt),r||(this._minorAutoInterval=t/5)}return r||(this.tickInterval=t),a};var ve,ye=T.Tooltip=function(){this.init.apply(this,arguments)};ye.prototype={init:function(t,e){var n=e.borderWidth,i=e.style,r=Mt(i.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":n,r:e.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),X||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,n,i,r){var o=this,s=o.now,a=!1!==o.options.animation&&!o.isHidden&&(P(t-s.x)>1||P(n-s.y)>1),l=o.followPointer||o.len>1;kt(s,{x:a?(2*s.x+t)/3:t,y:a?(s.y+n)/2:n,anchorX:l?e:a?(2*s.anchorX+i)/3:i,anchorY:l?e:a?(s.anchorY+r)/2:r}),o.label.attr(s),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(t,n,i,r)},32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),t=Bt(t,this.options.hideDelay,500),this.isHidden||(this.hideTimer=Rt(function(){e.label[t?"fadeOut":"hide"](),e.isHidden=!0},t))},getAnchor:function(t,n){var i,r,o,s=this.chart,a=s.inverted,l=s.plotTop,c=s.plotLeft,u=0,h=0;return i=(t=jt(t))[0].tooltipPos,this.followPointer&&n&&(n.chartX===e&&(n=s.pointer.normalize(n)),i=[n.chartX-s.plotLeft,n.chartY-l]),i||(pt(t,function(t){r=t.series.yAxis,o=t.series.xAxis,u+=t.plotX+(!a&&o?o.left-c:0),h+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!a&&r?r.top-l:0)}),u/=t.length,h/=t.length,i=[a?s.plotWidth-h:u,this.shared&&!a&&t.length>1&&n?n.chartY-l:a?s.plotHeight-u:h]),vt(i,A)},getPosition:function(t,e,n){var i,r=this.chart,o=this.distance,s={},a=n.h||0,l=["y",r.chartHeight,e,n.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],c=["x",r.chartWidth,t,n.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],u=Bt(n.ttBelow,r.inverted&&!n.negative||!r.inverted&&n.negative),h=function(t){var e=l;l=c,c=e,i=t},d=function(){!1!==function(t,e,n,i,r,l){var c=n<i-o,h=i+o+n<e,d=i-o-n,f=i+o;if(u&&h)s[t]=f;else if(!u&&c)s[t]=d;else if(c)s[t]=L(l-n,d-a<0?d:d-a);else{if(!h)return!1;s[t]=D(r,f+a+n>e?f:f+a)}}.apply(0,l)?!1!==function(t,e,n,i){var r;return i<o||i>e-o?r=!1:s[t]=i<n/2?1:i>e-n/2?e-n-2:i-n/2,r}.apply(0,c)||i||(h(!0),d()):i?s.x=s.y=0:(h(!0),d())};return(r.inverted||this.len>1)&&h(),d(),s},defaultFormatter:function(t){var e,n=this.points||jt(this);return(e=(e=[t.tooltipFooterHeaderFormatter(n[0])]).concat(t.bodyFormatter(n))).push(t.tooltipFooterHeaderFormatter(n[0],!0)),e.join("")},refresh:function(t,e){var n,i,r,o,s,a,l=this.chart,c=this.label,u=this.options,h={},d=[],f=u.formatter||this.defaultFormatter,p=l.hoverPoints,m=this.shared;clearTimeout(this.hideTimer),this.followPointer=jt(t)[0].series.tooltipOptions.followPointer,n=(r=this.getAnchor(t,e))[0],i=r[1],!m||t.series&&t.series.noSharedTooltip?h=t.getLabelConfig():(l.hoverPoints=t,p&&pt(p,function(t){t.setState()}),pt(t,function(t){t.setState("hover"),d.push(t.getLabelConfig())}),(h={x:t[0].category,y:t[0].y}).points=d,this.len=d.length,t=t[0]),o=f.call(h,this),a=t.series,this.distance=Bt(a.tooltipOptions.distance,16),!1===o?this.hide():(this.isHidden&&(St(c),c.attr("opacity",1).show()),c.attr({text:o}),s=u.borderColor||t.color||a.color||"#606060",c.attr({stroke:s}),this.updatePosition({plotX:n,plotY:i,negative:t.negative,ttBelow:t.ttBelow,h:r[2]||0}),this.isHidden=!1),_t(l,"tooltipRefresh",{text:o,x:n+l.plotLeft,y:i+l.plotTop,borderColor:s})},updatePosition:function(t){var e=this.chart,n=this.label,i=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(A(i.x),A(i.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,n){var i,r,o,l=e.dateTimeLabelFormats,c=n&&n.closestPointRange,u="01-01 00:00:00.000",h={millisecond:15,second:12,minute:9,hour:6,day:3},d="millisecond";if(c){for(r in o=s("%m-%d %H:%M:%S.%L",t.x),a){if(c===a.week&&+s("%w",t.x)===n.options.startOfWeek&&o.substr(6)===u.substr(6)){r="week";break}if(a[r]>c){r=d;break}if(h[r]&&o.substr(h[r])!==u.substr(h[r]))break;"week"!==r&&(d=r)}r&&(i=l[r])}else i=l.day;return i||l.year},tooltipFooterHeaderFormatter:function(t,e){var n=e?"footer":"header",i=t.series,r=i.tooltipOptions,o=r.xDateFormat,s=i.xAxis,a=s&&"datetime"===s.options.type&&$t(t.key),l=r[n+"Format"];return a&&!o&&(o=this.getXDateFormat(t,r,s)),a&&o&&(l=l.replace("{point.key}","{point.key:"+o+"}")),qt(l,{point:t,series:i})},bodyFormatter:function(t){return vt(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}},i=M&&M.documentElement.ontouchstart!==e;var be=T.Pointer=function(t,e){this.init(t,e)};if(be.prototype={init:function(t,e){var n,i,r=e.chart,o=r.events,s=X?"":r.zoomType,a=t.inverted;this.options=e,this.chart=t,this.zoomX=n=/x/.test(s),this.zoomY=i=/y/.test(s),this.zoomHor=n&&!a||i&&a,this.zoomVert=i&&!a||n&&a,this.hasZoom=n||i,this.runChartClick=o&&!!o.click,this.pinchDown=[],this.lastValidTouch={},T.Tooltip&&e.tooltip.enabled&&(t.tooltip=new ye(t,e.tooltip),this.followTouchMove=Bt(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(n,i){var r,o,s;return(n=n||t.event).target||(n.target=n.srcElement),s=n.touches?n.touches.length?n.touches.item(0):n.changedTouches[0]:n,i||(this.chartPosition=i=gt(this.chart.container)),s.pageX===e?(r=D(n.x,n.clientX-i.left),o=n.y):(r=s.pageX-i.left,o=s.pageY-i.top),kt(n,{chartX:A(r),chartY:A(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return pt(this.chart.axes,function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})}),e},runPointActions:function(t){var e,n,i,r,o,s,a,l,c=this.chart,u=c.series,h=c.tooltip,d=!!h&&h.shared,f=c.hoverPoint,p=c.hoverSeries,m=Number.MAX_VALUE,g=[];if(!d&&!p)for(n=0;n<u.length;n++)!u[n].directTouch&&u[n].options.stickyTracking||(u=[]);if(p&&(d?p.noSharedTooltip:p.directTouch)&&f?a=f:(pt(u,function(e){r=e.noSharedTooltip&&d,o=!d&&e.directTouch,e.visible&&!r&&!o&&Bt(e.options.enableMouseTracking,!0)&&(l=e.searchPoint(t,!r&&1===e.kdDimensions))&&g.push(l)}),pt(g,function(t){s=d||1!==t.series.kdDimensions?t.distX:t.dist,t&&"number"==typeof s&&s<m&&(m=s,a=t)})),a&&(a!==this.prevKDPoint||h&&h.isHidden)){if(d&&!a.series.noSharedTooltip){for(n=g.length;n--;)(g[n].clientX!==a.clientX||g[n].series.noSharedTooltip)&&g.splice(n,1);g.length&&h&&h.refresh(g,t),pt(g,function(e){e.onMouseOver(t,e!==(p&&p.directTouch&&f||a))})}else h&&h.refresh(a,t),p&&p.directTouch||a.onMouseOver(t);this.prevKDPoint=a}else e=p&&p.tooltipOptions.followPointer,h&&e&&!h.isHidden&&(i=h.getAnchor([{}],t),h.updatePosition({plotX:i[0],plotY:i[1]}));this._onDocumentMouseMove||(this._onDocumentMouseMove=function(t){Q[ve]&&Q[ve].pointer.onDocumentMouseMove(t)},yt(M,"mousemove",this._onDocumentMouseMove)),pt(c.axes,function(e){e.drawCrosshair(t,Bt(a,f))})},reset:function(t,e){var n=this.chart,i=n.hoverSeries,r=n.hoverPoint,o=n.hoverPoints,s=n.tooltip,a=s&&s.shared?o:r;(t=t&&s&&a)&&pt(jt(a),function(e){void 0===e.plotX&&(t=!1)}),t?(s.refresh(a),r&&(r.setState(r.state,!0),pt(n.axes,function(t){Bt(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,r):t.hideCrosshair()}))):(r&&r.onMouseOut(),o&&pt(o,function(t){t.setState()}),i&&i.onMouseOut(),s&&s.hide(e),this._onDocumentMouseMove&&(bt(M,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),pt(n.axes,function(t){t.hideCrosshair()}),this.hoverX=n.hoverPoints=n.hoverPoint=null)},scaleGroups:function(t,e){var n,i=this.chart;pt(i.series,function(r){n=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&(r.group.attr(n),r.markerGroup&&(r.markerGroup.attr(n),r.markerGroup.clip(e?i.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(n))}),i.clipRect.attr(e||i.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,n,i=this.chart,r=i.options.chart,o=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,c=i.plotLeft,u=i.plotTop,h=i.plotWidth,d=i.plotHeight,f=this.selectionMarker,p=this.mouseDownX,m=this.mouseDownY,g=r.panKey&&t[r.panKey+"Key"];f&&f.touch||(o<c?o=c:o>c+h&&(o=c+h),s<u?s=u:s>u+d&&(s=u+d),this.hasDragged=Math.sqrt(Math.pow(p-o,2)+Math.pow(m-s,2)),this.hasDragged>10&&(e=i.isInsidePlot(p-c,m-u),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!g&&(f||(this.selectionMarker=f=i.renderer.rect(c,u,a?1:h,l?1:d,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),f&&a&&(n=o-p,f.attr({width:P(n),x:(n>0?0:n)+p})),f&&l&&(n=s-m,f.attr({height:P(n),y:(n>0?0:n)+m})),e&&!f&&r.panning&&i.pan(t,r.panning)))},drop:function(t){var e=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){var r,o={xAxis:[],yAxis:[]},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,l=s.attr?s.attr("y"):s.y,c=s.attr?s.attr("width"):s.width,u=s.attr?s.attr("height"):s.height;(this.hasDragged||i)&&(pt(n.axes,function(n){if(n.zoomEnabled&&Ot(n.min)&&(i||e[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])){var s=n.horiz,h="touchend"===t.type?n.minPixelPadding:0,d=n.toValue((s?a:l)+h),f=n.toValue((s?a+c:l+u)-h);o[n.coll].push({axis:n,min:L(d,f),max:D(d,f)}),r=!0}}),r&&_t(n,"selection",o,function(t){n.zoom(kt(t,i?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),i&&this.scaleGroups()}n&&(Ft(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){(t=this.normalize(t)).preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Q[ve]&&Q[ve].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition;t=this.normalize(t,n),!n||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(){var t=Q[ve];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;ve=e.index,(t=this.normalize(t)).returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var n;t;){if(n=Nt(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf(it+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,n=t.relatedTarget||t.toElement;!e||e.options.stickyTracking||this.inClass(n,it+"tooltip")||this.inClass(n,it+"series-"+e.index)||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,n=e.hoverPoint,i=e.plotLeft,r=e.plotTop;t=this.normalize(t),e.cancelClick||(n&&this.inClass(t.target,it+"tracker")?(_t(n.series,"click",kt(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(kt(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-r)&&_t(e,"click",t)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},yt(e,"mouseleave",t.onContainerMouseLeave),1===tt&&yt(M,"mouseup",t.onDocumentMouseUp),i&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===tt&&yt(M,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;for(t in bt(this.chart.container,"mouseleave",this.onContainerMouseLeave),tt||(bt(M,"mouseup",this.onDocumentMouseUp),bt(M,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout),this)this[t]=null}},kt(T.Pointer.prototype,{pinchTranslate:function(t,e,n,i,r,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,n,i,r,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,n,i,r,o)},pinchTranslateDirection:function(t,e,n,i,r,o,s,a){var l,c,u,h,d,f,p=this.chart,m=t?"x":"y",g=t?"X":"Y",v="chart"+g,y=t?"width":"height",b=p["plot"+(t?"Left":"Top")],_=a||1,w=p.inverted,S=p.bounds[t?"h":"v"],x=1===e.length,C=e[0][v],k=n[0][v],T=!x&&e[1][v],M=!x&&n[1][v],E=function(){!x&&P(C-T)>20&&(_=a||P(k-M)/P(C-T)),u=(b-k)/_+C,l=p["plot"+(t?"Width":"Height")]/_};E(),(c=u)<S.min?(c=S.min,h=!0):c+l>S.max&&(c=S.max-l,h=!0),h?(k-=.8*(k-s[m][0]),x||(M-=.8*(M-s[m][1])),E()):s[m]=[k,M],w||(o[m]=u-b,o[y]=l),f=w?t?"scaleY":"scaleX":"scale"+g,d=w?1/_:_,r[y]=l,r[m]=c,i[f]=_,i["translate"+g]=d*b+(k-d*C)},pinch:function(t){var e=this,n=e.chart,i=e.pinchDown,r=t.touches,o=r.length,s=e.lastValidTouch,a=e.hasZoom,l=e.selectionMarker,c={},u=1===o&&(e.inClass(t.target,it+"tracker")&&n.runTrackerClick||e.runChartClick),h={};o>1&&(e.initiated=!0),a&&e.initiated&&!u&&t.preventDefault(),vt(r,function(t){return e.normalize(t)}),"touchstart"===t.type?(pt(r,function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}}),s.x=[i[0].chartX,i[1]&&i[1].chartX],s.y=[i[0].chartY,i[1]&&i[1].chartY],pt(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,r=t.toPixels(Bt(t.options.min,t.dataMin)),o=t.toPixels(Bt(t.options.max,t.dataMax)),s=L(r,o),a=D(r,o);e.min=L(t.pos,s-i),e.max=D(t.pos+t.len,a+i)}}),e.res=!0):i.length&&(l||(e.selectionMarker=l=kt({destroy:Z,touch:!0},n.plotBox)),e.pinchTranslate(i,r,c,l,h,s),e.hasPinched=a,e.scaleGroups(c,h),!a&&e.followTouchMove&&1===o?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var n=this.chart;ve=n.index,1===t.touches.length?(t=this.normalize(t),n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop)&&!n.openMenu?(e&&this.runPointActions(t),this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){Q[ve]&&Q[ve].pointer.drop(t)}}),t.PointerEvent||t.MSPointerEvent){var _e={},we=!!t.PointerEvent,Se=function(){var t,e=[];for(t in e.item=function(t){return this[t]},_e)_e.hasOwnProperty(t)&&e.push({pageX:_e[t].pageX,pageY:_e[t].pageY,target:_e[t].target});return e},xe=function(t,e,n,i){"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Q[ve]||(i(t),Q[ve].pointer[e]({type:n,target:t.currentTarget,preventDefault:Z,touches:Se()}))};kt(be.prototype,{onContainerPointerDown:function(t){xe(t,"onContainerTouchStart","touchstart",function(t){_e[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){xe(t,"onContainerTouchMove","touchmove",function(t){_e[t.pointerId]={pageX:t.pageX,pageY:t.pageY},_e[t.pointerId].target||(_e[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){xe(t,"onDocumentTouchEnd","touchend",function(t){delete _e[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,we?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,we?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(M,we?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Ut(be.prototype,"init",function(t,e,n){t.call(this,e,n),this.hasZoom&&Ft(e.container,{"-ms-touch-action":ot,"touch-action":ot})}),Ut(be.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(yt)}),Ut(be.prototype,"destroy",function(t){this.batchMSEvents(bt),t.call(this)})}var Ce=T.Legend=function(t,e){this.init(t,e)};Ce.prototype={init:function(t,e){var n,i=this,r=e.itemStyle,o=e.itemMarginTop||0;this.options=e,e.enabled&&(i.itemStyle=r,i.itemHiddenStyle=Tt(r,e.itemHiddenStyle),i.itemMarginTop=o,i.padding=n=Bt(e.padding,8),i.initialItemX=n,i.initialItemY=n-5,i.maxItemWidth=0,i.chart=t,i.itemHeight=0,i.symbolWidth=Bt(e.symbolWidth,16),i.pages=[],i.render(),yt(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(t,n){var i,r,o=this.options,s=t.legendItem,a=t.legendLine,l=t.legendSymbol,c=this.itemHiddenStyle.color,u=n?o.itemStyle.color:c,h=n?t.legendColor||t.color||"#CCC":c,d=t.options&&t.options.marker,f={fill:h};if(s&&s.css({fill:u,color:u}),a&&a.attr({stroke:h}),l){if(d&&l.isMarker)for(i in f.stroke=h,d=t.convertAttribs(d))(r=d[i])!==e&&(f[i]=r);l.attr(f)}},positionItem:function(t){var e=this.options,n=e.symbolPadding,i=!e.rtl,r=t._legendItemPos,o=r[0],s=r[1],a=t.checkbox,l=t.legendGroup;l&&l.element&&l.translate(i?o:this.legendWidth-o-2*n-4,s),a&&(a.x=o,a.y=s)},destroyItem:function(t){var e=t.checkbox;pt(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&ee(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,n=this.group.alignAttr,i=this.clipHeight||this.legendHeight,r=this.titleHeight;n&&(e=n.translateY,pt(this.allItems,function(o){var s,a=o.checkbox;a&&(s=e+r+a.y+(t||0)+3,Ft(a,{left:n.translateX+o.checkboxOffset+a.x-20+rt,top:s+rt,display:s>e-6&&s<e+i-6?"":ot}))}))},renderTitle:function(){var t,e=this.options,n=this.padding,i=e.title,r=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,n-3,n-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),r=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?qt(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e,n,i,r=this.chart,o=r.renderer,s=this.options,a="horizontal"===s.layout,l=this.symbolWidth,c=s.symbolPadding,u=this.itemStyle,h=this.itemHiddenStyle,d=this.padding,f=a?Bt(s.itemDistance,20):0,p=!s.rtl,m=s.width,g=s.itemMarginBottom||0,v=this.itemMarginTop,y=this.initialItemX,b=t.legendItem,_=t.series&&t.series.drawLegendSymbol?t.series:t,w=_.options,S=this.createCheckboxForItem&&w&&w.showCheckbox,x=s.useHTML;b||(t.legendGroup=o.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=b=o.text("",p?l+c:-c,this.baseline||0,x).css(Tt(t.visible?u:h)).attr({align:p?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=o.fontMetrics(u.fontSize,b),this.baseline=this.fontMetrics.f+3+v,b.attr("y",this.baseline)),_.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,b,x,u,h),this.colorizeItem(t,t.visible),S&&this.createCheckboxForItem(t)),this.setText(t),n=b.getBBox(),i=t.checkboxOffset=s.itemWidth||t.legendItemWidth||l+c+n.width+f+(S?20:0),this.itemHeight=e=A(t.legendItemHeight||n.height),a&&this.itemX-y+i>(m||r.chartWidth-2*d-y-s.x)&&(this.itemX=y,this.itemY+=v+this.lastLineHeight+g,this.lastLineHeight=0),this.maxItemWidth=D(this.maxItemWidth,i),this.lastItemY=v+this.itemY+g,this.lastLineHeight=D(e,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],a?this.itemX+=i:(this.itemY+=v+e+g,this.lastLineHeight=e),this.offsetWidth=m||D((a?this.itemX-y-f:i)+d,this.offsetWidth)},getAllItems:function(){var t=[];return pt(this.chart.series,function(n){var i=n.options;Bt(i.showInLegend,!Ot(i.linkedTo)&&e,!0)&&(t=t.concat(n.legendItems||("point"===i.legendType?n.data:n)))}),t},adjustMargins:function(t,e){var n=this.chart,i=this.options,r=i.align.charAt(0)+i.verticalAlign.charAt(0)+i.layout.charAt(0);this.display&&!i.floating&&pt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,s){o.test(r)&&!Ot(t[s])&&(n[ct[s]]=D(n[ct[s]],n.legend[(s+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][s]*i[s%2?"x":"y"]+Bt(i.margin,12)+e[s]))})},render:function(){var t,e,n,i,r=this,o=r.chart,s=o.renderer,a=r.group,l=r.box,c=r.options,u=r.padding,h=c.borderWidth,d=c.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,a||(r.group=a=s.g("legend").attr({zIndex:7}).add(),r.contentGroup=s.g().attr({zIndex:1}).add(a),r.scrollGroup=s.g().add(r.contentGroup)),r.renderTitle(),Jt(t=r.getAllItems(),function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&t.reverse(),r.allItems=t,r.display=e=!!t.length,r.lastLineHeight=0,pt(t,function(t){r.renderItem(t)}),n=(c.width||r.offsetWidth)+u,i=r.lastItemY+r.lastLineHeight+r.titleHeight,i=r.handleOverflow(i),i+=u,(h||d)&&(l?n>0&&i>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:n,height:i})),l.isNew=!1):(r.box=l=s.rect(0,0,n,i,c.borderRadius,h||0).attr({stroke:c.borderColor,"stroke-width":h||0,fill:d||ot}).add(a).shadow(c.shadow),l.isNew=!0),l[e?"show":"hide"]()),r.legendWidth=n,r.legendHeight=i,pt(t,function(t){r.positionItem(t)}),e&&a.align(kt({width:n,height:i},c),!0,"spacingBox"),o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,n,i=this,r=this.chart,o=r.renderer,s=this.options,a=s.y,l="top"===s.verticalAlign,c=r.spacingBox.height+(l?-a:a)-this.padding,u=s.maxHeight,h=this.clipRect,d=s.navigation,f=Bt(d.animation,!0),p=d.arrowSize||12,m=this.nav,g=this.pages,v=this.padding,y=this.allItems,b=function(t){h.attr({height:t}),i.contentGroup.div&&(i.contentGroup.div.style.clip="rect("+v+"px,9999px,"+(v+t)+"px,0)")};return"horizontal"===s.layout&&(c/=2),u&&(c=L(c,u)),g.length=0,t>c?(this.clipHeight=e=D(c-20-this.titleHeight-v,0),this.currentPage=Bt(this.currentPage,1),this.fullHeight=t,pt(y,function(t,i){var r=t._legendItemPos[1],o=A(t.legendItem.getBBox().height),s=g.length;(!s||r-g[s-1]>e&&(n||r)!==g[s-1])&&(g.push(n||r),s++),i===y.length-1&&r+o-g[s-1]>e&&g.push(r),r!==n&&(n=r)}),h||(h=i.clipRect=o.clipRect(0,v,9999,0),i.contentGroup.clip(h)),b(e),m||(this.nav=m=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,p,p).on("click",function(){i.scroll(-1,f)}).add(m),this.pager=o.text("",15,10).css(d.style).add(m),this.down=o.symbol("triangle-down",0,0,p,p).on("click",function(){i.scroll(1,f)}).add(m)),i.scroll(0),t=c):m&&(b(r.chartHeight),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,n){var i,r=this.pages,o=r.length,s=this.currentPage+t,a=this.clipHeight,l=this.options.navigation,c=l.activeColor,u=l.inactiveColor,h=this.pager,d=this.padding;s>o&&(s=o),s>0&&(n!==e&&ie(n,this.chart),this.nav.attr({translateX:d,translateY:a+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===s?u:c}).css({cursor:1===s?"default":"pointer"}),h.attr({text:s+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:s===o?u:c}).css({cursor:s===o?"default":"pointer"}),i=-r[s-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=s,this.positionCheckboxes(i))}};var ke=T.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-n+1,t.symbolWidth,n,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,n,i,r=this.options,o=r.marker,s=t.symbolWidth,a=this.chart.renderer,l=this.legendGroup,c=t.baseline-A(.3*t.fontMetrics.b);r.lineWidth&&(i={"stroke-width":r.lineWidth},r.dashStyle&&(i.dashstyle=r.dashStyle),this.legendLine=a.path([st,0,c,at,s,c]).attr(i).add(l)),o&&!1!==o.enabled&&(e=o.radius,this.legendSymbol=n=a.symbol(this.symbol,s/2-e,c-e,2*e,2*e,o).add(l),n.isMarker=!0)}};(/Trident\/7\.0/.test(B)||z)&&Ut(Ce.prototype,"positionItem",function(t,e){var n=this,i=function(){e._legendItemPos&&t.call(n,e)};i(),setTimeout(i)});var Te=T.Chart=function(){this.getArgs.apply(this,arguments)};T.chart=function(t,e,n){return new Te(t,e,n)},Te.prototype={callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(Et(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(t,e){var n,i=t.series;t.series=null,(n=Tt(o,t)).series=t.series=i,this.userOptions=t;var r=n.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var s=r.events;this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var a,l=this;if(l.index=Q.length,Q.push(l),tt++,!1!==r.reflow&&yt(l,"load",function(){l.initReflow()}),s)for(a in s)yt(l,a,s[a]);l.xAxis=[],l.yAxis=[],l.animation=!X&&Bt(r.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(t){var e,n=this.options.chart,i=t.type||n.type||n.defaultSeriesType,r=ut[i];return r||ht(17,!0),(e=new r).init(this,t),e},isInsidePlot:function(t,e,n){var i=n?e:t,r=n?t:e;return i>=0&&i<=this.plotWidth&&r>=0&&r<=this.plotHeight},redraw:function(t){var e,n,i,r=this.axes,o=this.series,s=this.pointer,a=this.legend,l=this.isDirtyLegend,c=this.hasCartesianSeries,u=this.isDirtyBox,h=o.length,d=h,f=this.renderer,p=f.isHidden(),m=[];for(ie(t,this),p&&this.cloneRenderTo(),this.layOutTitles();d--;)if((i=o[d]).options.stacking&&(e=!0,i.isDirty)){n=!0;break}if(n)for(d=h;d--;)(i=o[d]).options.stacking&&(i.isDirty=!0);pt(o,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),l=!0)}),l&&a.options.enabled&&(a.render(),this.isDirtyLegend=!1),e&&this.getStacks(),c&&(this.isResizing||(this.maxTicks=null,pt(r,function(t){t.setScale()}))),this.getMargins(),c&&(pt(r,function(t){t.isDirty&&(u=!0)}),pt(r,function(t){var n=t.min+","+t.max;t.extKey!==n&&(t.extKey=n,m.push(function(){_t(t,"afterSetExtremes",kt(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(u||e)&&t.redraw()})),u&&this.drawChartBox(),pt(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),s&&s.reset(!0),f.draw(),_t(this,"redraw"),p&&this.cloneRenderTo(!0),pt(m,function(t){t.call()})},get:function(t){var e,n,i,r=this.axes,o=this.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<o.length;e++)for(i=o[e].points||[],n=0;n<i.length;n++)if(i[n].id===t)return i[n];return null},getAxes:function(){var t,e=this,n=this.options,i=n.xAxis=jt(n.xAxis||{}),r=n.yAxis=jt(n.yAxis||{});pt(i,function(t,e){t.index=e,t.isX=!0}),pt(r,function(t,e){t.index=e}),t=i.concat(r),pt(t,function(t){new ge(e,t)})},getSelectedPoints:function(){var t=[];return pt(this.series,function(e){t=t.concat(mt(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return mt(this.series,function(t){return t.selected})},setTitle:function(t,e,n){var i,r,o=this,s=o.options;i=s.title=Tt(s.title,t),r=s.subtitle=Tt(s.subtitle,e),pt([["title",t,i],["subtitle",e,r]],function(t){var e=t[0],n=o[e],i=t[1],r=t[2];n&&i&&(o[e]=n=n.destroy()),r&&r.text&&!n&&(o[e]=o.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,class:it+e,zIndex:r.zIndex||4}).css(r.style).add())}),o.layOutTitles(n)},layOutTitles:function(t){var e,n=0,i=this.title,r=this.subtitle,o=this.options,s=o.title,a=o.subtitle,l=this.renderer,c=this.spacingBox.width-44;i&&(i.css({width:(s.width||c)+rt}).align(kt({y:l.fontMetrics(s.style.fontSize,i).b-3},s),!1,"spacingBox"),s.floating||s.verticalAlign||(n=i.getBBox().height)),r&&(r.css({width:(a.width||c)+rt}).align(kt({y:n+(s.margin-13)+l.fontMetrics(a.style.fontSize,i).b},a),!1,"spacingBox"),a.floating||a.verticalAlign||(n=$(n+r.getBBox().height))),e=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&Bt(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,n=t.height,i=this.renderToClone||this.renderTo;Ot(e)||(this.containerWidth=dt(i,"width")),Ot(n)||(this.containerHeight=dt(i,"height")),this.chartWidth=D(0,e||this.containerWidth||600),this.chartHeight=D(0,Bt(n,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,n=this.container;t?e&&(this.renderTo.appendChild(n),ee(e),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=e=this.renderTo.cloneNode(0),Ft(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),M.body.appendChild(e),n&&e.appendChild(n))},getContainer:function(){var t,e,i,r,o,s=this.options,a=s.chart,l=this.renderTo,c="highcharts-"+J++;l||(this.renderTo=l=a.renderTo),Et(l)&&(this.renderTo=l=M.getElementById(l)),l||ht(13,!0),r=Mt(Nt(l,"data-highcharts-chart")),!isNaN(r)&&Q[r]&&Q[r].hasRendered&&Q[r].destroy(),Nt(l,"data-highcharts-chart",this.index),l.innerHTML="",a.skipClone||l.offsetWidth||this.cloneRenderTo(),this.getChartSize(),e=this.chartWidth,i=this.chartHeight,this.container=t=Yt(et,{className:it+"container"+(a.className?" "+a.className:""),id:c},kt({position:"relative",overflow:nt,width:e+rt,height:i+rt,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},a.style),this.renderToClone||l),this._cursor=t.style.cursor,o=T[a.renderer]||n,this.renderer=new o(t,e,i,a.style,a.forExport,s.exporting&&s.exporting.allowHTML),X&&this.renderer.create(this,t,e,i),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,n=this.margin,i=this.titleOffset;this.resetMargins(),i&&!Ot(n[0])&&(this.plotTop=D(this.plotTop,i+this.options.title.margin+e[0])),this.legend.adjustMargins(n,e),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],n=t.margin;t.hasCartesianSeries&&pt(t.axes,function(t){t.visible&&t.getOffset()}),pt(ct,function(i,r){Ot(n[r])||(t[i]+=e[r])}),t.setChartSize()},reflow:function(e){var n=this,i=n.options.chart,r=n.renderTo,o=i.width||dt(r,"width"),s=i.height||dt(r,"height"),a=e?e.target:t;n.hasUserSize||n.isPrinting||!o||!s||a!==t&&a!==M||(o===n.containerWidth&&s===n.containerHeight||(clearTimeout(n.reflowTimeout),n.reflowTimeout=Rt(function(){n.container&&(n.setSize(o,s,!1),n.hasUserSize=null)},e?100:0)),n.containerWidth=o,n.containerHeight=s)},initReflow:function(){var e=this,n=function(t){e.reflow(t)};yt(t,"resize",n),yt(e,"destroy",function(){bt(t,"resize",n)})},setSize:function(t,e,n){var i,r,o,s=this,a=s.renderer;s.isResizing+=1,ie(n,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,Ot(t)&&(s.chartWidth=i=D(0,A(t)),s.hasUserSize=!!i),Ot(e)&&(s.chartHeight=r=D(0,A(e))),((o=a.globalAnimation)?wt:Ft)(s.container,{width:i+rt,height:r+rt},o),s.setChartSize(!0),a.setSize(i,r,n),s.maxTicks=null,pt(s.axes,function(t){t.isDirty=!0,t.setScale()}),pt(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(n),s.oldChartHeight=null,_t(s,"resize"),Rt(function(){s&&_t(s,"endResize",null,function(){s.isResizing-=1})},!1===(o=a.globalAnimation)?0:o&&o.duration||500)},setChartSize:function(t){var e,n,i,r,o,s,a,l=this.inverted,c=this.renderer,u=this.chartWidth,h=this.chartHeight,d=this.options.chart,f=this.spacing,p=this.clipOffset;this.plotLeft=i=A(this.plotLeft),this.plotTop=r=A(this.plotTop),this.plotWidth=o=D(0,A(u-i-this.marginRight)),this.plotHeight=s=D(0,A(h-r-this.marginBottom)),this.plotSizeX=l?s:o,this.plotSizeY=l?o:s,this.plotBorderWidth=d.plotBorderWidth||0,this.spacingBox=c.spacingBox={x:f[3],y:f[0],width:u-f[3]-f[1],height:h-f[0]-f[2]},this.plotBox=c.plotBox={x:i,y:r,width:o,height:s},a=2*I(this.plotBorderWidth/2),e=$(D(a,p[3])/2),n=$(D(a,p[0])/2),this.clipBox={x:e,y:n,width:I(this.plotSizeX-D(a,p[1])/2-e),height:D(0,I(this.plotSizeY-D(a,p[2])/2-n))},t||pt(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this;pt(ct,function(e,n){t[e]=Bt(t.margin[n],t.spacing[n])}),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,n=this.options.chart,i=this.renderer,r=this.chartWidth,o=this.chartHeight,s=this.chartBackground,a=this.plotBackground,l=this.plotBorder,c=this.plotBGImage,u=n.borderWidth||0,h=n.backgroundColor,d=n.plotBackgroundColor,f=n.plotBackgroundImage,p=n.plotBorderWidth||0,m=this.plotLeft,g=this.plotTop,v=this.plotWidth,y=this.plotHeight,b=this.plotBox,_=this.clipRect,w=this.clipBox;t=u+(n.shadow?8:0),(u||h)&&(s?s.animate(s.crisp({width:r-t,height:o-t})):(e={fill:h||ot},u&&(e.stroke=n.borderColor,e["stroke-width"]=u),this.chartBackground=i.rect(t/2,t/2,r-t,o-t,n.borderRadius,u).attr(e).addClass(it+"background").add().shadow(n.shadow))),d&&(a?a.animate(b):this.plotBackground=i.rect(m,g,v,y,0).attr({fill:d}).add().shadow(n.plotShadow)),f&&(c?c.animate(b):this.plotBGImage=i.image(f,m,g,v,y).add()),_?_.animate({width:w.width,height:w.height}):this.clipRect=i.clipRect(w),p&&(l?l.animate(l.crisp({x:m,y:g,width:v,height:y,strokeWidth:-p})):this.plotBorder=i.rect(m,g,v,y,0,-p).attr({stroke:n.plotBorderColor,"stroke-width":p,fill:ot,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,n,i=this,r=i.options.chart,o=i.options.series;pt(["inverted","angular","polar"],function(s){for(t=ut[r.type||r.defaultSeriesType],n=i[s]||r[s]||t&&t.prototype[s],e=o&&o.length;!n&&e--;)(t=ut[o[e].type])&&t.prototype[s]&&(n=!0);i[s]=n})},linkSeries:function(){var t=this,e=t.series;pt(e,function(t){t.linkedSeries.length=0}),pt(e,function(e){var n=e.options.linkedTo;Et(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&(n.linkedSeries.push(e),e.linkedParent=n,e.visible=Bt(e.options.visible,n.options.visible,e.visible))})},renderSeries:function(){pt(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&pt(e.items,function(n){var i=kt(e.style,n.style),r=Mt(i.left)+t.plotLeft,o=Mt(i.top)+t.plotTop+12;delete i.left,delete i.top,t.renderer.text(n.html,r,o).attr({zIndex:2}).css(i).add()})},render:function(){var t,e,n,i,r=this.axes,o=this.renderer,s=this.options;this.setTitle(),this.legend=new Ce(this,s.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),t=this.plotWidth,e=this.plotHeight=this.plotHeight-21,pt(r,function(t){t.setScale()}),this.getAxisMargins(),n=t/this.plotWidth>1.1,i=e/this.plotHeight>1.05,(n||i)&&(this.maxTicks=null,pt(r,function(t){(t.horiz&&n||!t.horiz&&i)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&pt(r,function(t){t.visible&&t.render()}),this.seriesGroup||(this.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(s.credits),this.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(t.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var t,n=this,i=n.axes,r=n.series,o=n.container,s=o&&o.parentNode;for(_t(n,"destroy"),Q[n.index]=e,tt--,n.renderTo.removeAttribute("data-highcharts-chart"),bt(n),t=i.length;t--;)i[t]=i[t].destroy();for(t=r.length;t--;)r[t]=r[t].destroy();for(t in pt(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var e=n[t];e&&e.destroy&&(n[t]=e.destroy())}),o&&(o.innerHTML="",bt(o),s&&ee(o)),n)delete n[t]},isReadyToRender:function(){var e=this;return!(!G&&t==t.top&&"complete"!==M.readyState||X&&!t.canvg)||(X?de.push(function(){e.firstRender()},e.options.global.canvasToolsURL):M.attachEvent("onreadystatechange",function(){M.detachEvent("onreadystatechange",e.firstRender),"complete"===M.readyState&&e.firstRender()}),!1)},firstRender:function(){var t=this,n=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),_t(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),pt(n.series||[],function(e){t.initSeries(e)}),t.linkSeries(),_t(t,"beforeRender"),T.Pointer&&(t.pointer=new be(t,n)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),pt(t.callbacks,function(n){t.index!==e&&n.apply(t,[t])}),_t(t,"load"),t.cloneRenderTo(!0))},splashArray:function(t,e){var n=e[t],i=At(n)?n:[n,n,n,n];return[Bt(e[t+"Top"],i[0]),Bt(e[t+"Right"],i[1]),Bt(e[t+"Bottom"],i[2]),Bt(e[t+"Left"],i[3])]}};var Me=T.CenteredSeriesMixin={getCenter:function(){var t,e,n,i=this.options,r=this.chart,o=2*(i.slicedOffset||0),s=r.plotWidth-2*o,a=r.plotHeight-2*o,l=i.center,c=[Bt(l[0],"50%"),Bt(l[1],"50%"),i.size||"100%",i.innerSize||0],u=L(s,a);for(e=0;e<4;++e)n=c[e],t=e<2||2===e&&/%$/.test(n),c[e]=zt(n,[s,a,u,c[2]][e])+(t?o:0);return c[3]>c[2]&&(c[3]=c[2]),c}},Ee=function(){};Ee.prototype={init:function(t,e,n){var i;return this.series=t,this.color=t.color,this.applyOptions(e,n),this.pointAttr={},t.options.colorByPoint&&(i=t.options.colors||t.chart.options.colors,this.color=this.color||i[t.colorCounter++],t.colorCounter===i.length&&(t.colorCounter=0)),t.chart.pointCount++,this},applyOptions:function(t,n){var i=this.series,r=i.options.pointValKey||i.pointValKey;return t=Ee.prototype.optionsToObject.call(this,t),kt(this,t),this.options=this.options?kt(this.options,t):t,r&&(this.y=this[r]),this.x===e&&i&&(this.x=n===e?i.autoIncrement():n),this},optionsToObject:function(t){var e,n={},i=this.series,r=i.options.keys,o=r||i.pointArrayMap||["y"],s=o.length,a=0,l=0;if("number"==typeof t||null===t)n[o[0]]=t;else if(It(t))for(!r&&t.length>s&&("string"==(e=typeof t[0])?n.name=t[0]:"number"===e&&(n.x=t[0]),a++);l<s;)r&&void 0===t[a]||(n[o[l]]=t[a]),a++,l++;else"object"==typeof t&&(n=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return n},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;for(t in e.pointCount--,n&&(this.setState(),Pt(n,this),n.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(bt(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this),this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],n=6;n--;)this[t=e[n]]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,n=e.tooltipOptions,i=Bt(n.valueDecimals,""),r=n.valuePrefix||"",o=n.valueSuffix||"";return pt(e.pointArrayMap||["y"],function(e){e="{point."+e,(r||o)&&(t=t.replace(e+"}",r+e+"}"+o)),t=t.replace(e+"}",e+":,."+i+"f}")}),qt(t,{point:this,series:this.series})},firePointEvent:function(t,e,n){var i=this,r=this.series.options;(r.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),_t(this,t,e,n)},visible:!0};var Ae=T.Series=function(){};function Ie(t,e,n,i,r){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=i,this.total=null,this.points={},this.stack=r,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:Bt(e.y,o?4:n?14:-6),x:Bt(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")}Ae.prototype={isCartesian:!0,type:"line",pointClass:Ee,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var n,i,r=this,o=t.series,s=function(t,e){return Bt(t.options.index,t._i)-Bt(e.options.index,e._i)};for(n in r.chart=t,r.options=e=r.setOptions(e),r.linkedSeries=[],r.bindAxes(),kt(r,{name:e.name,state:"",pointAttr:{},visible:!1!==e.visible,selected:!0===e.selected}),X&&(e.animation=!1),i=e.events)yt(r,n,i[n]);(i&&i.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),pt(r.parallelArrays,function(t){r[t+"Data"]=[]}),r.setData(e.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),o.push(r),r._i=o.length-1,Jt(o,s),this.yAxis&&Jt(this.yAxis.series,s),pt(o,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,n=this,i=n.options,r=n.chart;pt(n.axisTypes||[],function(o){pt(r[o],function(r){t=r.options,(i[o]===t.index||i[o]!==e&&i[o]===t.id||i[o]===e&&0===t.index)&&(r.series.push(n),n[o]=r,r.isDirty=!0)}),n[o]||n.optionalAxis===o||ht(18,!0)})},updateParallelArrays:function(t,e){var n=t.series,i=arguments,r="number"==typeof e?function(i){var r="y"===i&&n.toYData?n.toYData(t):t[i];n[i+"Data"][e]=r}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(i,2))};pt(n.parallelArrays,r)},autoIncrement:function(){var t,e,n=this.options,i=this.xIncrement,r=n.pointIntervalUnit;return i=Bt(i,n.pointStart,0),this.pointInterval=e=Bt(this.pointInterval,n.pointInterval,1),"month"!==r&&"year"!==r||(t=new c(i),e=(t="month"===r?+t[C](t[v]()+e):+t[k](t[y]()+e))-i),this.xIncrement=i+e,i},getSegments:function(){var t,e=-1,n=[],i=this.points,r=i.length;if(r)if(this.options.connectNulls){for(t=r;t--;)null===i[t].y&&i.splice(t,1);i.length&&(n=[i])}else pt(i,function(t,o){null===t.y?(o>e+1&&n.push(i.slice(e+1,o)),e=o):o===r-1&&n.push(i.slice(e+1,o+1))});this.segments=n},setOptions:function(t){var e,n,i=this.chart,r=i.options.plotOptions,s=i.userOptions||{},a=s.plotOptions||{},l=r[this.type];return this.userOptions=t,e=Tt(l,r.series,t),this.tooltipOptions=Tt(o.tooltip,o.plotOptions[this.type].tooltip,s.tooltip,a.series&&a.series.tooltip,a[this.type]&&a[this.type].tooltip,t.tooltip),null===l.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,n=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||n.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,color:e.negativeColor,fillColor:e.negativeFillColor}),n.length&&Ot(n[n.length-1].value)&&n.push({color:this.color,fillColor:this.fillColor}),e},getCyclic:function(t,e,n){var i,r=this.userOptions,o="_"+t+"Index",s=t+"Counter";e||(Ot(r[o])?i=r[o]:(r[o]=i=this.chart[s]%n.length,this.chart[s]+=1),e=n[i]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||oe[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:ke.drawLineMarker,setData:function(t,n,i,r){var o,s,a,l=this,c=l.points,u=c&&c.length||0,h=l.options,d=l.chart,f=null,p=l.xAxis,m=p&&!!p.categories,g=h.turboThreshold,v=this.xData,y=this.yData,b=l.pointArrayMap,_=b&&b.length;if(o=(t=t||[]).length,n=Bt(n,!0),!1!==r&&o&&u===o&&!l.cropped&&!l.hasGroupedData&&l.visible)pt(t,function(t,e){c[e].update&&t!==h.data[e]&&c[e].update(t,!1,null,!1)});else{if(l.xIncrement=null,l.colorCounter=0,pt(this.parallelArrays,function(t){l[t+"Data"].length=0}),g&&o>g){for(s=0;null===f&&s<o;)f=t[s],s++;if($t(f)){var w=Bt(h.pointStart,0),S=Bt(h.pointInterval,1);for(s=0;s<o;s++)v[s]=w,y[s]=t[s],w+=S;l.xIncrement=w}else if(It(f))if(_)for(s=0;s<o;s++)a=t[s],v[s]=a[0],y[s]=a.slice(1,_+1);else for(s=0;s<o;s++)a=t[s],v[s]=a[0],y[s]=a[1];else ht(12)}else for(s=0;s<o;s++)t[s]!==e&&(a={series:l},l.pointClass.prototype.applyOptions.apply(a,[t[s]]),l.updateParallelArrays(a,s),m&&Ot(a.name)&&(p.names[a.x]=a.name));for(Et(y[0])&&ht(14,!0),l.data=[],l.options.data=t,s=u;s--;)c[s]&&c[s].destroy&&c[s].destroy();p&&(p.minRange=p.userMinRange),l.isDirty=l.isDirtyData=d.isDirtyBox=!0,i=!1}"point"===h.legendType&&(this.processData(),this.generatePoints()),n&&d.redraw(i)},processData:function(t){var n,i,r,o,s,a,l,c,u=this.xData,h=this.yData,d=u.length,f=0,p=this.xAxis,m=this.options,g=m.cropThreshold,v=this.getExtremesFromAll||m.getExtremesFromAll,y=this.isCartesian;if(y&&!this.isDirty&&!p.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(p&&(l=(a=p.getExtremes()).min,c=a.max),y&&this.sorted&&!v&&(!g||d>g||this.forceCrop)&&(u[d-1]<l||u[0]>c?(u=[],h=[]):(u[0]<l||u[d-1]>c)&&(u=(n=this.cropData(this.xData,this.yData,l,c)).xData,h=n.yData,f=n.start,i=!0)),s=u.length-1;s>=0;s--)(r=u[s]-u[s-1])>0&&(o===e||r<o)?o=r:r<0&&this.requireSorting&&ht(15);this.cropped=i,this.cropStart=f,this.processedXData=u,this.processedYData=h,this.closestPointRange=o},cropData:function(t,e,n,i){var r,o,s=t.length,a=0,l=s,c=Bt(this.cropShoulder,1);for(r=0;r<s;r++)if(t[r]>=n){a=D(0,r-c);break}for(o=r;o<s;o++)if(t[o]>i){l=o+c;break}return{xData:t.slice(a,l),yData:e.slice(a,l),start:a,end:l}},generatePoints:function(){var t,n,i,r,o=this.options.data,s=this.data,a=this.processedXData,l=this.processedYData,c=this.pointClass,u=a.length,h=this.cropStart||0,d=this.hasGroupedData,f=[];if(!s&&!d){var p=[];p.length=o.length,s=this.data=p}for(r=0;r<u;r++)n=h+r,d?f[r]=(new c).init(this,[a[r]].concat(jt(l[r]))):(s[n]?i=s[n]:o[n]!==e&&(s[n]=i=(new c).init(this,o[n],a[r])),f[r]=i),f[r].index=n;if(s&&(u!==(t=s.length)||d))for(r=0;r<t;r++)r!==h||d||(r+=u),s[r]&&(s[r].destroyElements(),s[r].plotX=e);this.data=s,this.points=f},getExtremes:function(t){var n,i,r,o,s,a,l,c=this.xAxis,u=this.yAxis,h=this.processedXData,d=[],f=0,p=c.getExtremes(),m=p.min,g=p.max;for(n=(t=t||this.stackedYData||this.processedYData).length,a=0;a<n;a++)if(o=h[a],i=null!==(s=t[a])&&s!==e&&(!u.isLog||s.length||s>0),r=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(h[a+1]||o)>=m&&(h[a-1]||o)<=g,i&&r)if(l=s.length)for(;l--;)null!==s[l]&&(d[f++]=s[l]);else d[f++]=s;this.dataMin=Zt(d),this.dataMax=Qt(d)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,n,i,r,o,s=this.options,a=s.stacking,l=this.xAxis,c=l.categories,u=this.yAxis,h=this.points,d=h.length,f=!!this.modifyValue,p=s.pointPlacement,m="between"===p||$t(p),g=s.threshold,v=s.startFromThreshold?g:0,y=Number.MAX_VALUE;for(t=0;t<d;t++){var b,_,w=h[t],S=w.x,x=w.y,C=w.low,k=a&&u.stacks[(this.negStacks&&x<(v?0:g)?"-":"")+this.stackKey];u.isLog&&null!==x&&x<=0&&(w.y=x=null,ht(10)),w.plotX=n=L(D(-1e5,l.translate(S,0,0,0,1,p,"flags"===this.type)),1e5),a&&this.visible&&k&&k[S]&&(o=this.getStackIndicator(o,S,this.index),C=(_=(b=k[S]).points[o.key])[0],x=_[1],C===v&&(C=Bt(g,u.min)),u.isLog&&C<=0&&(C=null),w.total=w.stackTotal=b.total,w.percentage=b.total&&w.y/b.total*100,w.stackY=x,b.setOffset(this.pointXOffset||0,this.barW||0)),w.yBottom=Ot(C)?u.translate(C,0,1,0,1):null,f&&(x=this.modifyValue(x,w)),w.plotY=i="number"==typeof x&&x!==1/0?L(D(-1e5,u.translate(x,0,1,0,1)),1e5):e,w.isInside=i!==e&&i>=0&&i<=u.len&&n>=0&&n<=l.len,w.clientX=m?l.translate(S,0,0,0,1):n,w.negative=w.y<(g||0),w.category=c&&c[w.x]!==e?c[w.x]:w.x,t&&(y=L(y,P(n-r))),r=n}this.closestPointRangePx=y,this.getSegments()},setClip:function(t){var e=this.chart,n=this.options,i=e.renderer,r=e.inverted,o=this.clipBox,s=o||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,s.height,n.xAxis,n.yAxis].join(","),l=e[a],c=e[a+"m"];l||(t&&(s.width=0,e[a+"m"]=c=i.clipRect(-99,r?-e.plotLeft:-e.plotTop,99,r?e.chartWidth:e.chartHeight)),e[a]=l=i.clipRect(s)),t&&(l.count+=1),!1!==n.clip&&(this.group.clip(t||o?l:e.clipRect),this.markerGroup.clip(c),this.sharedClipKey=a),t||(l.count-=1,l.count<=0&&a&&e[a]&&(o||(e[a]=e[a].destroy()),e[a+"m"]&&(e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,n,i=this.chart,r=this.options.animation;r&&!At(r)&&(r=oe[this.type].animation),t?this.setClip(r):((e=i[n=this.sharedClipKey])&&e.animate({width:i.plotSizeX},r),i[n+"m"]&&i[n+"m"].animate({width:i.plotSizeX+99},r),this.animate=null)},afterAnimate:function(){this.setClip(),_t(this,"afterAnimate")},drawPoints:function(){var t,n,i,r,o,s,a,l,c,u,h,d,f,p=this.points,m=this.chart,g=this.options.marker,v=this.pointAttr[""],y=this.markerGroup,b=this.xAxis,_=Bt(g.enabled,b.isRadial,this.closestPointRangePx>2*g.radius);if(!1!==g.enabled||this._hasPointMarkers)for(r=p.length;r--;)o=p[r],n=I(o.plotX),i=o.plotY,c=o.graphic,u=o.marker||{},h=!!o.marker,d=_&&u.enabled===e||u.enabled,f=o.isInside,d&&i!==e&&!isNaN(i)&&null!==o.y?(s=(t=o.pointAttr[o.selected?"select":""]||v).r,l=0===(a=Bt(u.symbol,this.symbol)).indexOf("url"),c?c[f?"show":"hide"](!0).animate(kt({x:n-s,y:i-s},c.symbolName?{width:2*s,height:2*s}:{})):f&&(s>0||l)&&(o.graphic=c=m.renderer.symbol(a,n-s,i-s,2*s,2*s,h?u:g).attr(t).add(y))):c&&(o.graphic=c.destroy())},convertAttribs:function(t,e,n,i){var r,o,s=this.pointAttrToOptions,a={};for(r in t=t||{},e=e||{},n=n||{},i=i||{},s)o=s[r],a[r]=Bt(t[o],e[r],n[r],i[r]);return a},getAttribs:function(){var t,e,n,i,r,o,s,a,l=this,c=l.options,u=oe[l.type].marker?c.marker:c,h=u.states,d=h.hover,f=l.color,p=l.options.negativeColor,m={stroke:f,fill:f},g=l.points||[],v=[],y=l.pointAttrToOptions,b=l.hasPointSpecificOptions,_=u.lineColor,w=u.fillColor,S=c.turboThreshold,x=l.zones,C=l.zoneAxis||"y";if(c.marker?(d.radius=d.radius||u.radius+d.radiusPlus,d.lineWidth=d.lineWidth||u.lineWidth+d.lineWidthPlus):(d.color=d.color||ae(d.color||f).brighten(d.brightness).get(),d.negativeColor=d.negativeColor||ae(d.negativeColor||p).brighten(d.brightness).get()),v[""]=l.convertAttribs(u,m),pt(["hover","select"],function(t){v[t]=l.convertAttribs(h[t],v[""])}),l.pointAttr=v,e=g.length,!S||e<S||b)for(;e--;){if((u=(r=g[e]).options&&r.options.marker||r.options)&&!1===u.enabled&&(u.radius=0),x.length){for(i=x[n=0];r[C]>=i.value;)i=x[++n];r.color=r.fillColor=Bt(i.color,l.color)}if(b=c.colorByPoint||r.color,r.options)for(a in y)Ot(u[y[a]])&&(b=!0);b?(o=[],t=(h=(u=u||{}).states||{}).hover=h.hover||{},c.marker&&(!r.negative||t.fillColor||d.fillColor)||(t[l.pointAttrToOptions.fill]=t.color||!r.options.color&&d[r.negative&&p?"negativeColor":"color"]||ae(r.color).brighten(t.brightness||d.brightness).get()),s={color:r.color},w||(s.fillColor=r.color),_||(s.lineColor=r.color),u.hasOwnProperty("color")&&!u.color&&delete u.color,o[""]=l.convertAttribs(kt(s,u),v[""]),o.hover=l.convertAttribs(h.hover,v.hover,o[""]),o.select=l.convertAttribs(h.select,v.select,o[""])):o=v,r.pointAttr=o}},destroy:function(){var t,e,n,i,r,o=this,s=o.chart,a=/AppleWebKit\/533/.test(B),l=o.data||[];for(_t(o,"destroy"),bt(o),pt(o.axisTypes||[],function(t){(r=o[t])&&(Pt(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)(n=l[e])&&n.destroy&&n.destroy();for(i in o.points=null,clearTimeout(o.animationTimeout),o)o[i]instanceof le&&!o[i].survive&&(t=a&&"group"===i?"hide":"destroy",o[i][t]());for(i in s.hoverSeries===o&&(s.hoverSeries=null),Pt(s.series,o),o)delete o[i]},getSegmentPath:function(t){var e=this,n=[],i=e.options.step;return pt(t,function(r,o){var s,a=r.plotX,l=r.plotY;e.getPointSpline?n.push.apply(n,e.getPointSpline(t,r,o)):(n.push(o?at:st),i&&o&&(s=t[o-1],"right"===i?n.push(s.plotX,l,at):"center"===i?n.push((s.plotX+a)/2,s.plotY,at,(s.plotX+a)/2,l,at):n.push(a,s.plotY,at)),n.push(r.plotX,r.plotY))}),n},getGraphPath:function(){var t,e=this,n=[],i=[];return pt(e.segments,function(r){t=e.getSegmentPath(r),r.length>1?n=n.concat(t):i.push(r[0])}),e.singlePoints=i,e.graphPath=n,n},drawGraph:function(){var t=this,e=this.options,n=[["graph",e.lineColor||this.color,e.dashStyle]],i=e.lineWidth,r="square"!==e.linecap,o=this.getGraphPath(),s=this.fillGraph&&this.color||ot,a=this.zones;pt(a,function(i,r){n.push(["zoneGraph"+r,i.color||t.color,i.dashStyle||e.dashStyle])}),pt(n,function(n,a){var l,c=n[0],u=t[c];u?u.animate({d:o}):(i||s)&&o.length&&(l={stroke:n[1],"stroke-width":i,fill:s,zIndex:1},n[2]?l.dashstyle=n[2]:r&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[c]=t.chart.renderer.path(o).attr(l).add(t.group).shadow(a<2&&e.shadow))})},applyZones:function(){var t,n,i,r,o,s,a,l=this,c=this.chart,u=c.renderer,h=this.zones,d=this.clips||[],f=this.graph,p=this.area,m=D(c.chartWidth,c.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],v=g.reversed,y=c.inverted,b=g.horiz,_=!1;h.length&&(f||p)&&g.min!==e&&(f&&f.hide(),p&&p.hide(),r=g.getExtremes(),pt(h,function(e,h){t=v?b?c.plotWidth:0:b?0:g.toPixels(r.min),t=L(D(Bt(n,t),0),m),n=L(D(A(g.toPixels(Bt(e.value,r.max),!0)),0),m),_&&(t=n=g.toPixels(r.max)),o=Math.abs(t-n),s=L(t,n),a=D(t,n),g.isXAxis?(i={x:y?a:s,y:0,width:o,height:m},b||(i.x=c.plotHeight-i.x)):(i={x:0,y:y?a:s,width:m,height:o},b&&(i.y=c.plotWidth-i.y)),c.inverted&&u.isVML&&(i=g.isXAxis?{x:0,y:v?s:a,height:i.width,width:c.chartWidth}:{x:i.y-c.plotLeft-c.spacingBox.x,y:0,width:i.height,height:c.chartHeight}),d[h]?d[h].animate(i):(d[h]=u.clipRect(i),f&&l["zoneGraph"+h].clip(d[h]),p&&l["zoneArea"+h].clip(d[h])),_=e.value>r.max}),this.clips=d)},invertGroups:function(){var t=this,e=t.chart;function n(){var e={width:t.yAxis.len,height:t.xAxis.len};pt(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}t.xAxis&&(yt(e,"resize",n),yt(t,"destroy",function(){bt(e,"resize",n)}),n(),t.invertGroups=n)},plotGroup:function(t,e,n,i,r){var o=this[t],s=!o;return s&&(this[t]=o=this.chart.renderer.g(e).attr({zIndex:i||.1}).add(r),o.addClass("highcharts-series-"+this.index)),o.attr({visibility:n})[s?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,n=e.chart,i=e.options,r=i.animation,o=r&&!!e.animate&&n.renderer.isSVG&&Bt(r.duration,500)||0,s=e.visible?"inherit":"hidden",a=i.zIndex,l=e.hasRendered,c=n.seriesGroup;t=e.plotGroup("group","series",s,a,c),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,c),o&&e.animate(!0),e.getAttribs(),t.inverted=!!e.isCartesian&&n.inverted,e.drawGraph&&(e.drawGraph(),e.applyZones()),pt(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),n.inverted&&e.invertGroups(),!1===i.clip||e.sharedClipKey||l||t.clip(n.clipRect),o&&e.animate(),l||(e.animationTimeout=Rt(function(){e.afterAnimate()},o)),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,n=this.isDirty,i=this.group,r=this.xAxis,o=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:Bt(r&&r.left,t.plotLeft),translateY:Bt(o&&o.top,t.plotTop)})),this.translate(),this.render(),e&&_t(this,"updatedData"),(n||e)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var n=this.xAxis,i=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:r?i.len-t.chartX+i.pos:t.chartY-i.pos},e)},buildKDTree:function(){var t=this,e=t.kdDimensions;delete t.kdTree,Rt(function(){var n=mt(t.points||[],function(t){return null!==t.y});t.kdTree=function e(n,i,r){var o,s,a=n&&n.length;if(a)return o=t.kdAxisArray[i%r],n.sort(function(t,e){return t[o]-e[o]}),{point:n[s=Math.floor(a/2)],left:e(n.slice(0,s),i+1,r),right:e(n.slice(s+1),i+1,r)}}(n,e,e)},t.options.kdNow?0:1)},searchKDTree:function(t,e){var n=this,i=this.kdAxisArray[0],r=this.kdAxisArray[1],o=e?"distX":"dist";if(this.kdTree||this.buildKDTree(),this.kdTree)return function t(e,s,a,l){var c,u,h,d,f,p,m,g,v,y=s.point,b=n.kdAxisArray[a%l],_=y;return m=y,g=Ot((p=e)[i])&&Ot(m[i])?Math.pow(p[i]-m[i],2):null,v=(g||0)+((Ot(p[r])&&Ot(m[r])?Math.pow(p[r]-m[r],2):null)||0),m.dist=Ot(v)?Math.sqrt(v):Number.MAX_VALUE,m.distX=Ot(g)?Math.sqrt(g):Number.MAX_VALUE,h=(c=e[b]-y[b])<0?"right":"left",s[u=c<0?"left":"right"]&&(_=(d=t(e,s[u],a+1,l))[o]<_[o]?d:y),s[h]&&Math.sqrt(c*c)<_[o]&&(_=(f=t(e,s[h],a+1,l))[o]<_[o]?f:_),_}(t,this.kdTree,this.kdDimensions,this.kdDimensions)}},Ie.prototype={destroy:function(){te(this,this.axis)},render:function(t){var e=this.options,n=e.format,i=n?qt(n,this):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:nt}).add(t)},setOffset:function(t,e){var n,i=this.axis,r=i.chart,o=r.inverted,s=i.reversed,a=this.isNegative&&!s||!this.isNegative&&s,l=i.translate(i.usePercentage?100:this.total,0,0,0,1),c=i.translate(0),u=P(l-c),h=r.xAxis[0].translate(this.x)+t,d=r.plotHeight,f={x:o?a?l:l-u:h,y:o?d-h-e:a?d-l-u:d-l,width:o?u:e,height:o?e:u},p=this.label;p&&(p.align(this.alignOptions,null,f),n=p.alignAttr,p[!1===this.options.crop||r.isInsidePlot(n.x,n.y)?"show":"hide"](!0))}},Te.prototype.getStacks=function(){var t=this;pt(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),pt(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+Bt(e.options.stack,""))})},ge.prototype.buildStacks=function(){var t=this.series,e=Bt(this.options.reversedStacks,!0),n=t.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)t[e?n:t.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<t.length;n++)t[n].setPercentStacks()}},ge.prototype.renderStackTotals=function(){var t,e,n,i=this.chart,r=i.renderer,o=this.stacks,s=this.stackTotalGroup;for(t in s||(this.stackTotalGroup=s=r.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(i.plotLeft,i.plotTop),o)for(n in e=o[t])e[n].render(s)},ge.prototype.resetStacks=function(){var t,e,n=this.stacks;if(!this.isXAxis)for(t in n)for(e in n[t])n[t][e].touched<this.stacksTouched?(n[t][e].destroy(),delete n[t][e]):(n[t][e].total=null,n[t][e].cum=0)},ge.prototype.cleanStacks=function(){var t,e,n;if(!this.isXAxis)for(e in this.oldStacks&&(t=this.stacks=this.oldStacks),t)for(n in t[e])t[e][n].cum=t[e][n].total},Ae.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,n,i,r,o,s,a,l,c=this.processedXData,u=this.processedYData,h=[],d=u.length,f=this.options,p=f.threshold,m=f.startFromThreshold?p:0,g=f.stack,v=f.stacking,y=this.stackKey,b="-"+y,_=this.negStacks,w=this.yAxis,S=w.stacks,x=w.oldStacks;for(w.stacksTouched+=1,s=0;s<d;s++)a=c[s],l=u[s],o=(t=this.getStackIndicator(t,a,this.index)).key,S[r=(e=_&&l<(m?0:p))?b:y]||(S[r]={}),S[r][a]||(x[r]&&x[r][a]?(S[r][a]=x[r][a],S[r][a].total=null):S[r][a]=new Ie(w,w.options.stackLabels,e,a,g)),(n=S[r][a]).points[o]=[Bt(n.cum,m)],n.touched=w.stacksTouched,t.index>0&&!1===this.singleStacks&&(n.points[o][0]=n.points[this.index+","+a+",0"][0]),"percent"===v?(i=e?y:b,_&&S[i]&&S[i][a]?(i=S[i][a],n.total=i.total=D(i.total,n.total)+P(l)||0):n.total=ne(n.total+(P(l)||0))):n.total=ne(n.total+(l||0)),n.cum=Bt(n.cum,m)+(l||0),n.points[o].push(n.cum),h[s]=n.cum;"percent"===v&&(w.usePercentage=!0),this.stackedYData=h,w.oldStacks={}}},Ae.prototype.setPercentStacks=function(){var t,e=this,n=e.stackKey,i=e.yAxis.stacks,r=e.processedXData;pt([n,"-"+n],function(n){for(var o,s,a,l,c=r.length;c--;)o=r[c],t=e.getStackIndicator(t,o,e.index),(a=(s=i[n]&&i[n][o])&&s.points[t.key])&&(l=s.total?100/s.total:0,a[0]=ne(a[0]*l),a[1]=ne(a[1]*l),e.stackedYData[c]=a[1])})},Ae.prototype.getStackIndicator=function(t,e,n){return Ot(t)&&t.x===e?t.index++:t={x:e,index:0},t.key=[n,e,t.index].join(","),t},kt(Te.prototype,{addSeries:function(t,e,n){var i,r=this;return t&&(e=Bt(e,!0),_t(r,"addSeries",{options:t},function(){i=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(n)})),i},addAxis:function(t,e,n,i){var r=e?"xAxis":"yAxis",o=this.options;new ge(this,Tt(t,{index:this[r].length,isX:e})),o[r]=jt(o[r]||{}),o[r].push(t),Bt(n,!0)&&this.redraw(i)},showLoading:function(t){var e=this,n=e.options,i=e.loadingDiv,r=n.loading,o=function(){i&&Ft(i,{left:e.plotLeft+rt,top:e.plotTop+rt,width:e.plotWidth+rt,height:e.plotHeight+rt})};i||(e.loadingDiv=i=Yt(et,{className:it+"loading"},kt(r.style,{zIndex:10,display:ot}),e.container),e.loadingSpan=Yt("span",null,r.labelStyle,i),yt(e,"redraw",o)),e.loadingSpan.innerHTML=t||n.lang.loading,e.loadingShown||(Ft(i,{opacity:0,display:""}),wt(i,{opacity:r.style.opacity},{duration:r.showDuration||0}),e.loadingShown=!0),o()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&wt(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){Ft(e,{display:ot})}}),this.loadingShown=!1}}),kt(Ee.prototype,{update:function(t,e,n,i){var r,o=this,s=o.series,a=o.graphic,l=s.chart,c=s.options,u=s.xAxis&&s.xAxis.names;function h(){o.applyOptions(t),null===o.y&&a&&(o.graphic=a.destroy()),At(t)&&!It(t)&&(o.redraw=function(){a&&a.element&&t&&t.marker&&t.marker.symbol&&(o.graphic=a.destroy()),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.redraw=null}),r=o.index,s.updateParallelArrays(o,r),u&&o.name&&(u[o.x]=o.name),c.data[r]=At(c.data[r])?o.options:t,s.isDirty=s.isDirtyData=!0,!s.fixedBox&&s.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(n)}e=Bt(e,!0),!1===i?h():o.firePointEvent("update",{options:t},h)},remove:function(t,e){this.series.removePoint(ft(this,this.series.data),t,e)}}),kt(Ae.prototype,{addPoint:function(t,e,n,i){var r,o,s,a,l=this,c=l.options,u=l.data,h=l.graph,d=l.area,f=l.chart,p=l.xAxis&&l.xAxis.names,m=h&&h.shift||0,g=["graph","area"],v=c.data,y=l.xData;if(ie(i,f),n){for(s=l.zones.length;s--;)g.push("zoneGraph"+s,"zoneArea"+s);pt(g,function(t){l[t]&&(l[t].shift=m+(c.step?2:1))})}if(d&&(d.isArea=!0),e=Bt(e,!0),r={series:l},l.pointClass.prototype.applyOptions.apply(r,[t]),a=r.x,s=y.length,l.requireSorting&&a<y[s-1])for(o=!0;s&&y[s-1]>a;)s--;l.updateParallelArrays(r,"splice",s,0,0),l.updateParallelArrays(r,s),p&&r.name&&(p[a]=r.name),v.splice(s,0,t),o&&(l.data.splice(s,0,null),l.processData()),"point"===c.legendType&&l.generatePoints(),n&&(u[0]&&u[0].remove?u[0].remove(!1):(u.shift(),l.updateParallelArrays(r,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),f.redraw())},removePoint:function(t,e,n){var i=this,r=i.data,o=r[t],s=i.points,a=i.chart,l=function(){r.length===s.length&&s.splice(t,1),r.splice(t,1),i.options.data.splice(t,1),i.updateParallelArrays(o||{series:i},"splice",t,1),o&&o.destroy(),i.isDirty=!0,i.isDirtyData=!0,e&&a.redraw()};ie(n,a),e=Bt(e,!0),o?o.firePointEvent("remove",null,l):l()},remove:function(t,e){var n=this,i=n.chart;_t(n,"remove",null,function(){n.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,i.linkSeries(),Bt(t,!0)&&i.redraw(e)})},update:function(t,n){var i,r=this,o=this.chart,s=this.userOptions,a=this.type,l=ut[a].prototype,c=["group","markerGroup","dataLabelsGroup"];for(i in(t.type&&t.type!==a||void 0!==t.zIndex)&&(c.length=0),pt(c,function(t){c[t]=r[t],delete r[t]}),t=Tt(s,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1),l)this[i]=e;kt(this,ut[t.type||a].prototype),pt(c,function(t){r[t]=c[t]}),this.init(o,t),o.linkSeries(),Bt(n,!0)&&o.redraw(!1)}}),kt(ge.prototype,{update:function(t,n){var i=this.chart;t=i.options[this.coll][this.options.index]=Tt(this.userOptions,t),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=e,this.init(i,kt(t,{events:e})),i.isDirtyBox=!0,Bt(n,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,i=this.series,r=i.length;r--;)i[r]&&i[r].remove(!1);Pt(e.axes,this),Pt(e[n],this),e.options[n].splice(this.options.index,1),pt(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,Bt(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var $e=Ht(Ae);ut.line=$e,oe.area=Tt(se,{softThreshold:!1,threshold:0});var De=Ht(Ae,{type:"area",singleStacks:!1,getSegments:function(){var t,e,n,i,r,o=this,s=[],a=[],l=[],c=this.xAxis,u=this.yAxis,h=u.stacks[this.stackKey],d={},f=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<f.length;i++)d[f[i].x]=f[i];for(r in h)null!==h[r].total&&l.push(+r);l.sort(function(t,e){return t-e}),pt(l,function(r){var s,l=null;if(!p||d[r]&&null!==d[r].y)if(d[r])a.push(d[r]);else{for(i=o.index;i<=u.series.length;i++)if(n=o.getStackIndicator(null,r,i),s=h[r].points[n.key]){l=s[1];break}t=c.translate(r),e=u.getThreshold(l),a.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Z})}}),a.length&&s.push(a)}else Ae.prototype.getSegments.call(this),s=this.segments;this.segments=s},getSegmentPath:function(t){var e,n,i=Ae.prototype.getSegmentPath.call(this,t),r=[].concat(i),o=this.options,s=i.length,a=this.yAxis.getThreshold(o.threshold);if(3===s&&r.push(at,i[1],i[2]),o.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)n=Bt(t[e].yBottom,a),e<t.length-1&&o.step&&r.push(t[e+1].plotX,n),r.push(t[e].plotX,n);else this.closeSegment(r,t,a);return this.areaPath=this.areaPath.concat(r),i},closeSegment:function(t,e,n){t.push(at,e[e.length-1].plotX,n,at,e[0].plotX,n)},drawGraph:function(){this.areaPath=[],Ae.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,n=this.options,i=this.zones,r=[["area",this.color,n.fillColor]];pt(i,function(e,i){r.push(["zoneArea"+i,e.color||t.color,e.fillColor||n.fillColor])}),pt(r,function(i){var r,o=i[0],s=t[o];s?s.animate({d:e}):(r={fill:i[2]||i[1],zIndex:0},i[2]||(r["fill-opacity"]=n.fillOpacity||.75),t[o]=t.chart.renderer.path(e).attr(r).add(t.group))})},drawLegendSymbol:ke.drawRectangle});ut.area=De,oe.spline=Tt(se);var Le=Ht(Ae,{type:"spline",getPointSpline:function(t,e,n){var i,r,o,s,a,l=e.plotX,c=e.plotY,u=t[n-1],h=t[n+1];if(u&&h){var d,f=u.plotX,p=u.plotY,m=h.plotX,g=h.plotY;s=(1.5*c+g)/2.5,s+=d=(s-(r=(1.5*c+p)/2.5))*((o=(1.5*l+m)/2.5)-l)/(o-(i=(1.5*l+f)/2.5))+c-s,(r+=d)>p&&r>c?s=2*c-(r=D(p,c)):r<p&&r<c&&(s=2*c-(r=L(p,c))),s>g&&s>c?r=2*c-(s=D(g,c)):s<g&&s<c&&(r=2*c-(s=L(g,c))),e.rightContX=o,e.rightContY=s}return n?(a=["C",u.rightContX||u.plotX,u.rightContY||u.plotY,i||l,r||c,l,c],u.rightContX=u.rightContY=null):a=[st,l,c],a}});ut.spline=Le,oe.areaspline=Tt(oe.area);var Pe=De.prototype,Oe=Ht(Le,{type:"areaspline",closedStacks:!0,getSegmentPath:Pe.getSegmentPath,closeSegment:Pe.closeSegment,drawGraph:Pe.drawGraph,drawLegendSymbol:ke.drawRectangle});ut.areaspline=Oe,oe.column=Tt(se,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var Ne=Ht(Ae,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Ae.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&pt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,n=this,i=n.options,r=n.xAxis,o=n.yAxis,s=r.reversed,a={},l=0;!1===i.grouping?l=1:pt(n.chart.series,function(i){var r,s=i.options,c=i.yAxis;i.type===n.type&&i.visible&&o.len===c.len&&o.pos===c.pos&&(s.stacking?(t=i.stackKey,a[t]===e&&(a[t]=l++),r=a[t]):!1!==s.grouping&&(r=l++),i.columnIndex=r)});var c=L(P(r.transA)*(r.ordinalSlope||i.pointRange||r.closestPointRange||r.tickInterval||1),r.len),u=c*i.groupPadding,h=(c-2*u)/l,d=L(i.maxPointWidth||r.len,Bt(i.pointWidth,h*(1-2*i.pointPadding))),f=(h-d)/2+(u+((n.columnIndex||0)+(s?1:0))*h-c/2)*(s?-1:1);return n.columnMetrics={width:d,offset:f},n.columnMetrics},crispCol:function(t,e,n,i){var r,o,s=this.chart,a=this.borderWidth,l=-(a%2?.5:0),c=a%2?.5:1;return s.inverted&&s.renderer.isVML&&(c+=1),n=Math.round(t+n)+l-(t=Math.round(t)+l),r=Math.round(e+i)+c,o=P(e)<=.5&&r>.5,i=r-(e=Math.round(e)+c),o&&(e-=1,i+=1),{x:t,y:e,width:n,height:i}},translate:function(){var t=this,e=t.chart,n=t.options,i=t.borderWidth=Bt(n.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),r=t.yAxis,o=n.threshold,s=t.translatedThreshold=r.getThreshold(o),a=Bt(n.minPointLength,5),l=t.getColumnMetrics(),c=l.width,u=t.barW=D(c,1+2*i),h=t.pointXOffset=l.offset;e.inverted&&(s-=.5),n.pointPadding&&(u=$(u)),Ae.prototype.translate.apply(t),pt(t.points,function(n){var i,o=L(Bt(n.yBottom,s),9e4),l=999+P(o),d=L(D(-l,n.plotY),r.len+l),f=n.plotX+h,p=u,m=L(d,o),g=D(d,o)-m;P(g)<a&&a&&(g=a,i=!r.reversed&&!n.negative||r.reversed&&n.negative,m=P(m-s)>a?o-a:s-(i?a:0)),n.barX=f,n.pointWidth=c,n.tooltipPos=e.inverted?[r.len+r.pos-e.plotLeft-d,t.xAxis.len-f-p/2,g]:[f+p/2,d+r.pos-e.plotTop,g],n.shapeType="rect",n.shapeArgs=t.crispCol(f,m,p,g)})},getSymbol:Z,drawLegendSymbol:ke.drawRectangle,drawGraph:Z,drawPoints:function(){var t,n,i=this,r=this.chart,o=i.options,s=r.renderer,a=o.animationLimit||250;pt(i.points,function(l){var c,u=l.plotY,h=l.graphic;u===e||isNaN(u)||null===l.y?h&&(l.graphic=h.destroy()):(t=l.shapeArgs,c=Ot(i.borderWidth)?{"stroke-width":i.borderWidth}:{},n=l.pointAttr[l.selected?"select":""]||i.pointAttr[""],h?(St(h),h.attr(c).attr(n)[r.pointCount<a?"animate":"attr"](Tt(t))):l.graphic=h=s[l.shapeType](t).attr(c).attr(n).add(l.group||i.group).shadow(o.shadow,null,o.stacking&&!o.borderRadius))})},animate:function(t){var e,n=this.yAxis,i=this.options,r=this.chart.inverted,o={};G&&(t?(o.scaleY=.001,e=L(n.pos+n.len,D(n.pos,n.toPixels(i.threshold))),r?o.translateX=e-n.len:o.translateY=e,this.group.attr(o)):(o.scaleY=1,o[r?"translateX":"translateY"]=n.pos,this.group.animate(o,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&pt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Ae.prototype.remove.apply(t,arguments)}});ut.column=Ne,oe.bar=Tt(oe.column);var je=Ht(Ne,{type:"bar",inverted:!0});ut.bar=je,oe.scatter=Tt(se,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Re=Ht(Ae,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Ae.prototype.drawGraph.call(this)}});ut.scatter=Re,oe.pie=Tt(se,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Be={type:"pie",isCartesian:!1,pointClass:Ht(Ee,{init:function(){Ee.prototype.init.apply(this,arguments);var t,e=this;return e.name=Bt(e.name,"Slice"),t=function(t){e.slice("select"===t.type)},yt(e,"select",t),yt(e,"unselect",t),e},setVisible:function(t,n){var i=this,r=i.series,o=r.chart,s=r.options.ignoreHiddenPoint;n=Bt(n,s),t!==i.visible&&(i.visible=i.options.visible=t=t===e?!i.visible:t,r.options.data[ft(i,r.data)]=i.options,pt(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,t),t||"hover"!==i.state||i.setState(""),s&&(r.isDirty=!0),n&&o.redraw())},slice:function(t,e,n){var i,r=this.series;ie(n,r.chart),e=Bt(e,!0),this.sliced=this.options.sliced=t=Ot(t)?t:!this.sliced,r.options.data[ft(this,r.data)]=this.options,i=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(i),this.shadowGroup&&this.shadowGroup.animate(i)},haloPath:function(t){var e=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+e.x,n.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,n=e.points,i=e.startAngleRad;t||(pt(n,function(t){var n=t.graphic,r=t.shapeArgs;n&&(n.attr({r:t.startR||e.center[3]/2,start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},e.options.animation))}),e.animate=null)},updateTotals:function(){var t,e,n=0,i=this.points,r=i.length,o=this.options.ignoreHiddenPoint;for(t=0;t<r;t++)e=i[t],n+=o&&!e.visible?0:e.y;for(this.total=n,t=0;t<r;t++)(e=i[t]).percentage=n>0&&(e.visible||!o)?e.y/n*100:0,e.total=n},generatePoints:function(){Ae.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,n,i,r,o,s,a,l=0,c=this.options,u=c.slicedOffset,h=u+c.borderWidth,d=c.startAngle||0,f=this.startAngleRad=j/180*(d-90),p=(this.endAngleRad=j/180*(Bt(c.endAngle,d+360)-90))-f,m=this.points,g=c.dataLabels.distance,v=c.ignoreHiddenPoint,y=m.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,n){return i=E.asin(L((e-t[1])/(t[2]/2+g),1)),t[0]+(n?-1:1)*(O(i)*(t[2]/2+g))},s=0;s<y;s++)a=m[s],e=f+l*p,v&&!a.visible||(l+=a.percentage/100),n=f+l*p,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:A(1e3*e)/1e3,end:A(1e3*n)/1e3},(i=(n+e)/2)>1.5*j?i-=2*j:i<-j/2&&(i+=2*j),a.slicedTranslation={translateX:A(O(i)*u),translateY:A(N(i)*u)},r=O(i)*t[2]/2,o=N(i)*t[2]/2,a.tooltipPos=[t[0]+.7*r,t[1]+.7*o],a.half=i<-j/2||i>j/2?1:0,a.angle=i,h=L(h,g/2),a.labelPos=[t[0]+r+O(i)*g,t[1]+o+N(i)*g,t[0]+r+O(i)*h,t[1]+o+N(i)*h,t[0]+r,t[1]+o,g<0?"center":a.half?"right":"left",i]},drawGraph:null,drawPoints:function(){var t,e,n,i,r,o,s=this,a=s.chart.renderer,l=s.options.shadow;l&&!s.shadowGroup&&(s.shadowGroup=a.g("shadow").add(s.group)),pt(s.points,function(c){null!==c.y&&(e=c.graphic,r=c.shapeArgs,n=c.shadowGroup,(i=c.pointAttr[c.selected?"select":""]).stroke||(i.stroke=i.fill),l&&!n&&(n=c.shadowGroup=a.g("shadow").add(s.shadowGroup)),t=c.sliced?c.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(t),e?e.setRadialReference(s.center).attr(i).animate(kt(r,t)):(o={"stroke-linejoin":"round"},c.visible||(o.visibility="hidden"),c.graphic=e=a[c.shapeType](r).setRadialReference(s.center).attr(i).attr(o).attr(t).add(s.group).shadow(l,n)))})},searchPoint:Z,sortByAngle:function(t,e){t.sort(function(t,n){return void 0!==t.angle&&(n.angle-t.angle)*e})},drawLegendSymbol:ke.drawRectangle,getCenter:Me.getCenter,getSymbol:Z};Be=Ht(Ae,Be),ut.pie=Be,Ae.prototype.drawDataLabels=function(){var t,n,i,r,o=this,s=o.options,a=s.cursor,l=s.dataLabels,c=o.points,u=o.hasRendered||0,h=o.chart.renderer;(l.enabled||o._hasPointLabels)&&(o.dlProcessOptions&&o.dlProcessOptions(l),r=o.plotGroup("dataLabelsGroup","data-labels",l.defer?nt:"visible",l.zIndex||6),Bt(l.defer,!0)&&(r.attr({opacity:+u}),u||yt(o,"afterAnimate",function(){o.visible&&r.show(),r[s.animation?"animate":"attr"]({opacity:1},{duration:200})})),n=l,pt(c,function(c){var u,d,f,p,m,g,v=c.dataLabel,y=c.connector,b=!0,_={};if(t=c.dlOptions||c.options&&c.options.dataLabels,u=Bt(t&&t.enabled,n.enabled)&&null!==c.y,v&&!u)c.dataLabel=v.destroy();else if(u){if(g=(l=Tt(n,t)).style,m=l.rotation,d=c.getLabelConfig(),i=l.format?qt(l.format,d):l.formatter.call(d,l),g.color=Bt(l.color,g.color,o.color,"black"),v)Ot(i)?(v.attr({text:i}),b=!1):(c.dataLabel=v=v.destroy(),y&&(c.connector=y.destroy()));else if(Ot(i)){for(p in f={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":l.borderWidth,r:l.borderRadius||0,rotation:m,padding:l.padding,zIndex:1},"contrast"===g.color&&(_.color=l.inside||l.distance<0||s.stacking?h.getContrast(c.color||o.color):"#000000"),a&&(_.cursor=a),f)f[p]===e&&delete f[p];v=c.dataLabel=h[m?"text":"label"](i,0,-9999,l.shape,null,null,l.useHTML).attr(f).css(kt(g,_)).add(r).shadow(l.shadow)}v&&o.alignDataLabel(c,v,l,null,b)}}))},Ae.prototype.alignDataLabel=function(t,e,n,i,r){var o,s,a=this.chart,l=a.inverted,c=Bt(t.plotX,-9999),u=Bt(t.plotY,-9999),h=e.getBBox(),d=a.renderer.fontMetrics(n.style.fontSize).b,f=this.visible&&(t.series.forceDL||a.isInsidePlot(c,A(u),l)||i&&a.isInsidePlot(c,l?i.x+1:i.y+i.height-1,l));f&&(i=kt({x:l?a.plotWidth-u:c,y:A(l?a.plotHeight-c:u),width:0,height:0},i),kt(n,{width:h.width,height:h.height}),n.rotation?(o=a.renderer.rotCorr(d,n.rotation),e[r?"attr":"animate"]({x:i.x+n.x+i.width/2+o.x,y:i.y+n.y+i.height/2}).attr({align:n.align})):(e.align(n,null,i),s=e.alignAttr,"justify"===Bt(n.overflow,"justify")?this.justifyDataLabel(e,n,s,h,i,r):Bt(n.crop,!0)&&(f=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+h.width,s.y+h.height)),n.shape&&e.attr({anchorX:t.plotX,anchorY:t.plotY}))),f||(St(e),e.attr({y:-9999}),e.placed=!1)},Ae.prototype.justifyDataLabel=function(t,e,n,i,r,o){var s,a,l=this.chart,c=e.align,u=e.verticalAlign,h=t.box?0:t.padding||0;(s=n.x+h)<0&&("right"===c?e.align="left":e.x=-s,a=!0),(s=n.x+i.width-h)>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-s,a=!0),(s=n.y+h)<0&&("bottom"===u?e.verticalAlign="top":e.y=-s,a=!0),(s=n.y+i.height-h)>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!o,t.align(e,null,r))},ut.pie&&(ut.pie.prototype.drawDataLabels=function(){var t,e,n,i,r,o,s,a,l,c,u,h,d,f=this,p=f.data,m=f.chart,g=f.options.dataLabels,v=Bt(g.connectorPadding,10),y=Bt(g.connectorWidth,1),b=m.plotWidth,_=m.plotHeight,w=Bt(g.softConnector,!0),S=g.distance,x=f.center,C=x[2]/2,k=x[1],T=S>0,M=[[],[]],E=[0,0,0,0],I=function(t,e){return e.y-t.y};if(f.visible&&(g.enabled||f._hasPointLabels)){for(Ae.prototype.drawDataLabels.apply(f),pt(p,function(t){t.dataLabel&&t.visible&&M[t.half].push(t)}),h=2;h--;){var $,O,N,j,R=[],B=[],F=M[h],Y=F.length;if(Y){for(f.sortByAngle(F,h-.5),d=s=0;!s&&F[d];)s=F[d]&&F[d].dataLabel&&(F[d].dataLabel.getBBox().height||21),d++;if(S>0){for(N=L(k+C+S,m.plotHeight),O=D(0,k-C-S);O<=N;O+=s)R.push(O);if(Y>($=R.length)){for((u=[].concat(F)).sort(I),d=Y;d--;)u[d].rank=d;for(d=Y;d--;)F[d].rank>=$&&F.splice(d,1);Y=F.length}for(d=0;d<Y;d++){t=F[d],o=t.labelPos;var H,W,z=9999;for(W=0;W<$;W++)(H=P(R[W]-o[1]))<z&&(z=H,j=W);if(j<d&&null!==R[d])j=d;else if($<Y-d+j&&null!==R[d])for(j=$-Y+d;null===R[j];)j++;else for(;null===R[j];)j++;B.push({i:j,y:R[j]}),R[j]=null}B.sort(I)}for(d=0;d<Y;d++){var U,V;t=F[d],o=t.labelPos,i=t.dataLabel,c=!1===t.visible?nt:"inherit",V=o[1],S>0?(j=(U=B.pop()).i,(V>(l=U.y)&&null!==R[j+1]||V<l&&null!==R[j-1])&&(l=L(D(0,V),m.plotHeight))):l=V,a=g.justify?x[0]+(h?-1:1)*(C+S):f.getX(l===k-C-S||l===k+C+S?V:l,h),i._attr={visibility:c,align:o[6]},i._pos={x:a+g.x+({left:v,right:-v}[o[6]]||0),y:l+g.y-10},i.connX=a,i.connY=l,null===this.options.size&&(r=i.width,a-r<v?E[3]=D(A(r-a+v),E[3]):a+r>b-v&&(E[1]=D(A(a+r-b+v),E[1])),l-s/2<0?E[0]=D(A(s/2-l),E[0]):l+s/2>_&&(E[2]=D(A(l+s/2-_),E[2])))}}}(0===Qt(E)||this.verifyDataLabelOverflow(E))&&(this.placeDataLabels(),T&&y&&pt(this.points,function(t){e=t.connector,o=t.labelPos,(i=t.dataLabel)&&i._pos&&t.visible?(c=i._attr.visibility,a=i.connX,l=i.connY,n=w?[st,a+("left"===o[6]?5:-5),l,"C",a,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],at,o[4],o[5]]:[st,a+("left"===o[6]?5:-5),l,at,o[2],o[3],at,o[4],o[5]],e?(e.animate({d:n}),e.attr("visibility",c)):t.connector=e=f.chart.renderer.path(n).attr({"stroke-width":y,stroke:g.connectorColor||t.color||"#606060",visibility:c}).add(f.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},ut.pie.prototype.placeDataLabels=function(){pt(this.points,function(t){var e,n=t.dataLabel;n&&t.visible&&((e=n._pos)?(n.attr(n._attr),n[n.moved?"animate":"attr"](e),n.moved=!0):n&&n.attr({y:-9999}))})},ut.pie.prototype.alignDataLabel=Z,ut.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,i=this.options,r=i.center,o=i.minSize||80,s=o;return null!==r[0]?s=D(n[2]-D(t[1],t[3]),o):(s=D(n[2]-t[1]-t[3],o),n[0]+=(t[3]-t[1])/2),null!==r[1]?s=D(L(s,n[2]-D(t[0],t[2])),o):(s=D(L(s,n[2]-t[0]-t[2]),o),n[1]+=(t[0]-t[2])/2),s<n[2]?(n[2]=s,n[3]=Math.min(zt(i.innerSize||0,s),s),this.translate(n),pt(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),ut.column&&(ut.column.prototype.alignDataLabel=function(t,e,n,i,r){var o,s=this.chart.inverted,a=t.series,l=t.dlBox||t.shapeArgs,c=Bt(t.below,t.plotY>Bt(this.translatedThreshold,a.yAxis.len)),u=Bt(n.inside,!!this.options.stacking);l&&((i=Tt(l)).y<0&&(i.height+=i.y,i.y=0),(o=i.y+i.height-a.yAxis.len)>0&&(i.height-=o),s&&(i={x:a.yAxis.len-i.y-i.height,y:a.xAxis.len-i.x-i.width,width:i.height,height:i.width}),u||(s?(i.x+=c?0:i.width,i.width=0):(i.y+=c?i.height:0,i.height=0))),n.align=Bt(n.align,!s||u?"center":c?"right":"left"),n.verticalAlign=Bt(n.verticalAlign,s||u?"middle":c?"top":"bottom"),Ae.prototype.alignDataLabel.call(this,t,e,n,i,r)}),function(t){var e=t.Chart,n=t.each,i=t.pick,r=t.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];n(t.series,function(t){var r=t.options.dataLabels,o=t.dataLabelCollections||["dataLabel"];(r.enabled||t._hasPointLabels)&&!r.allowOverlap&&t.visible&&n(o,function(r){n(t.points,function(t){t[r]&&(t[r].labelrank=i(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[r]))})})}),t.hideOverlappingLabels(e)}e(),r(t,"redraw",e)}),e.prototype.hideOverlappingLabels=function(t){var e,i,r,o,s,a,l,c,u,h,d,f,p,m,g,v,y=t.length;for(i=0;i<y;i++)(e=t[i])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),i=0;i<y;i++)for(o=t[i],r=i+1;r<y;++r)s=t[r],o&&s&&o.placed&&s.placed&&0!==o.newOpacity&&0!==s.newOpacity&&(a=o.alignAttr,l=s.alignAttr,c=2*(o.box?0:o.padding),u=a.x,h=a.y,d=o.width-c,f=o.height-c,p=l.x,m=l.y,g=s.width-c,v=s.height-c,!(p>u+d||p+g<u||m>h+f||m+v<h)&&((o.labelrank<s.labelrank?o:s).newOpacity=0));n(t,function(t){var e,n;t&&(n=t.newOpacity,t.oldOpacity!==n&&t.placed&&(n?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=n,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(T);var Fe=T.TrackerMixin={drawTrackerPoint:function(){var t=this,n=t.chart,r=n.pointer,o=t.options.cursor,s=o&&{cursor:o},a=function(t){for(var i,r=t.target;r&&!i;)i=r.point,r=r.parentNode;i!==e&&i!==n.hoverPoint&&i.onMouseOver(t)};pt(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(pt(t.trackerGroups,function(e){t[e]&&(t[e].addClass(it+"tracker").on("mouseover",a).on("mouseout",function(t){r.onTrackerMouseOut(t)}).css(s),i&&t[e].on("touchstart",a))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e,n=this,r=n.options,o=r.trackByArea,s=[].concat(o?n.areaPath:n.graphPath),a=s.length,l=n.chart,c=l.pointer,u=l.renderer,h=l.options.tooltip.snap,d=n.tracker,f=r.cursor,p=f&&{cursor:f},m=n.singlePoints,g=function(){l.hoverSeries!==n&&n.onMouseOver()},v="rgba(192,192,192,"+(G?1e-4:.002)+")";if(a&&!o)for(e=a+1;e--;)s[e]===st&&s.splice(e+1,0,s[e+1]-h,s[e+2],at),(e&&s[e]===st||e===a)&&s.splice(e,0,at,s[e-2]+h,s[e-1]);for(e=0;e<m.length;e++)t=m[e],s.push(st,t.plotX-h,t.plotY,at,t.plotX+h,t.plotY);d?d.attr({d:s}):(n.tracker=u.path(s).attr({"stroke-linejoin":"round",visibility:n.visible?"visible":nt,stroke:v,fill:o?v:ot,"stroke-width":r.lineWidth+(o?0:2*h),zIndex:2}).add(n.group),pt([n.tracker,n.markerGroup],function(t){t.addClass(it+"tracker").on("mouseover",g).on("mouseout",function(t){c.onTrackerMouseOut(t)}).css(p),i&&t.on("touchstart",g)}))}};return ut.column&&(Ne.prototype.drawTracker=Fe.drawTrackerPoint),ut.pie&&(ut.pie.prototype.drawTracker=Fe.drawTrackerPoint),ut.scatter&&(Re.prototype.drawTracker=Fe.drawTrackerPoint),kt(Ce.prototype,{setItemEvents:function(t,e,n,i,r){var o=this;(n?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?i:r),t.setState()}).on("click",function(e){var n=function(){t.setVisible&&t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,n):_t(t,"legendItemClick",e,n)})},createCheckboxForItem:function(t){t.checkbox=Yt("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),yt(t.checkbox,"click",function(e){var n=e.target;_t(t.series||t,"checkboxClick",{checked:n.checked,item:t},function(){t.select()})})}}),o.legend.itemStyle.cursor="pointer",kt(Te.prototype,{showResetZoom:function(){var t=this,e=o.lang,n=t.options.chart.resetZoomButton,i=n.theme,r=i.states,s="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},i,r&&r.hover).attr({align:n.position.align,title:e.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var t=this;_t(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,n,i=this.pointer,r=!1;!t||t.resetSelection?pt(this.axes,function(t){e=t.zoom()}):pt(t.xAxis.concat(t.yAxis),function(t){var n=t.axis,o=n.isXAxis;(i[o?"zoomX":"zoomY"]||i[o?"pinchX":"pinchY"])&&(e=n.zoom(t.min,t.max),n.displayBtn&&(r=!0))}),n=this.resetZoomButton,r&&!n?this.showResetZoom():!r&&At(n)&&(this.resetZoomButton=n.destroy()),e&&this.redraw(Bt(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var n,i=this,r=i.hoverPoints;r&&pt(r,function(t){t.setState()}),pt("xy"===e?[1,0]:[1],function(e){var r=t[e?"chartX":"chartY"],o=i[e?"xAxis":"yAxis"][0],s=i[e?"mouseDownX":"mouseDownY"],a=(o.pointRange||0)/2,l=o.getExtremes(),c=o.toValue(s-r,!0)+a,u=o.toValue(s+i[e?"plotWidth":"plotHeight"]-r,!0)-a,h=s>r;o.series.length&&(h||c>L(l.dataMin,l.min))&&(!h||u<D(l.dataMax,l.max))&&(o.setExtremes(c,u,!1,!1,{trigger:"pan"}),n=!0),i[e?"mouseDownX":"mouseDownY"]=r}),n&&i.redraw(!1),Ft(i.container,{cursor:"move"})}}),kt(Ee.prototype,{select:function(t,e){var n=this,i=n.series,r=i.chart;t=Bt(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,i.options.data[ft(n,i.data)]=n.options,n.setState(t&&"select"),e||pt(r.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,i.options.data[ft(t,i.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t,e){var n=this.series,i=n.chart,r=i.tooltip,o=i.hoverPoint;i.hoverSeries!==n&&n.onMouseOver(),o&&o!==this&&o.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),!r||r.shared&&!n.noSharedTooltip||r.refresh(this,t),this.setState("hover"),e||(i.hoverPoint=this))},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==ft(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,e=Tt(this.series.options.point,this.options).events;for(t in this.events=e,e)yt(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(t,e){var n,i,r,o,s=I(this.plotX),a=this.plotY,l=this.series,c=l.options.states,u=oe[l.type].marker&&l.options.marker,h=u&&!u.enabled,d=u&&u.states[t],f=d&&!1===d.enabled,p=l.stateMarkerGraphic,m=this.marker||{},g=l.chart,v=l.halo;t=t||"",o=this.pointAttr[t]||l.pointAttr[t],t===this.state&&!e||this.selected&&"select"!==t||c[t]&&!1===c[t].enabled||t&&(f||h&&!1===d.enabled)||t&&m.states&&m.states[t]&&!1===m.states[t].enabled||(this.graphic?(n=u&&this.graphic.symbolName&&o.r,this.graphic.attr(Tt(o,n?{x:s-n,y:a-n,width:2*n,height:2*n}:{})),p&&p.hide()):(t&&d&&(n=d.radius,r=m.symbol||l.symbol,p&&p.currentSymbol!==r&&(p=p.destroy()),p?p[e?"animate":"attr"]({x:s-n,y:a-n}):r&&(l.stateMarkerGraphic=p=g.renderer.symbol(r,s-n,a-n,2*n,2*n).attr(o).add(l.markerGroup),p.currentSymbol=r)),p&&(p[t&&g.isInsidePlot(s,a,g.inverted)?"show":"hide"](),p.element.point=this)),(i=c[t]&&c[t].halo)&&i.size?(v||(l.halo=v=g.renderer.path().add(g.seriesGroup)),v.attr(kt({fill:this.color||l.color,"fill-opacity":i.opacity},i.attributes))[e?"animate":"attr"]({d:this.haloPath(i.size)})):v&&v.attr({d:[]}),this.state=t)},haloPath:function(t){var e=this.series,n=e.chart,i=e.getPlotBox(),r=n.inverted,o=Math.floor(this.plotX);return n.renderer.symbols.circle(i.translateX+(r?e.yAxis.len-this.plotY:o)-t,i.translateY+(r?e.xAxis.len-o:this.plotY)-t,2*t,2*t)}}),kt(Ae.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&_t(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&_t(this,"mouseOut"),!n||t.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),this.setState()},setState:function(t){var e,n=this.options,i=this.graph,r=n.states,o=n.lineWidth,s=0;if(t=t||"",this.state!==t){if(this.state=t,r[t]&&!1===r[t].enabled)return;if(t&&(o=r[t].lineWidth||o+(r[t].lineWidthPlus||0)),i&&!i.dashstyle)for(e={"stroke-width":o},i.attr(e);this["zoneGraph"+s];)this["zoneGraph"+s].attr(e),s+=1}},setVisible:function(t,n){var i,r=this,o=r.chart,s=r.legendItem,a=o.options.chart.ignoreHiddenSeries,l=r.visible;r.visible=t=r.userOptions.visible=t===e?!l:t,i=t?"show":"hide",pt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){r[t]&&r[t][i]()}),o.hoverSeries!==r&&(o.hoverPoint&&o.hoverPoint.series)!==r||r.onMouseOut(),s&&o.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&pt(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),pt(r.linkedSeries,function(e){e.setVisible(t,!1)}),a&&(o.isDirtyBox=!0),!1!==n&&o.redraw(),_t(r,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===e?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),_t(this,t?"select":"unselect")},drawTracker:Fe.drawTrackerGraph}),kt(T,{Color:ae,Point:Ee,Tick:me,Renderer:n,SVGElement:le,SVGRenderer:fe,arrayMin:Zt,arrayMax:Qt,charts:Q,dateFormat:s,error:ht,format:qt,pathAnim:void 0,getOptions:function(){return o},hasBidiBug:q,isTouchDevice:U,setOptions:function(t){return o=Tt(!0,o,t),re(),o},addEvent:yt,removeEvent:bt,createElement:Yt,discardElement:ee,css:Ft,each:pt,map:vt,merge:Tt,splat:jt,stableSort:Jt,extendClass:Ht,pInt:Mt,svg:G,canvas:X,vml:!G&&!X,product:"Highcharts",version:"4.2.1"}),window.Highcharts=T,T},t.exports?t.exports=i.document?r(i):r:i.Highcharts=r(i)},function(t,e,n){t.exports=n(438)},function(t,e){
/**
 * @license Highcharts JS v4.2.1 (2015-12-21)
 * Exporting module
 *
 * (c) 2010-2014 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */
!function(t){var e,n=t.win,i=n.document,r=t.Chart,o=t.addEvent,s=t.removeEvent,a=t.fireEvent,l=t.createElement,c=t.discardElement,u=t.css,h=t.merge,d=t.each,f=t.extend,p=t.splat,m=Math.max,g=t.isTouchDevice,v="px",y=t.Renderer.prototype.symbols,b=t.getOptions();f(b.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),b.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:g?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},b.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,n){var r,o;for(r in o=l("form",h({method:"post",action:t,enctype:"multipart/form-data"},n),{display:"none"},i.body),e)l("input",{type:"hidden",name:r,value:e[r]},null,o);o.submit(),c(o)},f(r.prototype,{sanitizeSVG:function(t){return t.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(e){var n,r,o,s,a,u,m,g,y,b=this,_=h(b.options,e),w=_.exporting.allowHTML;return i.createElementNS||(i.createElementNS=function(t,e){return i.createElement(e)}),r=l("div",null,{position:"absolute",top:"-9999em",width:b.chartWidth+v,height:b.chartHeight+v},i.body),m=b.renderTo.style.width,g=b.renderTo.style.height,a=_.exporting.sourceWidth||_.chart.width||/px$/.test(m)&&parseInt(m,10)||600,u=_.exporting.sourceHeight||_.chart.height||/px$/.test(g)&&parseInt(g,10)||400,f(_.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:a,height:u}),_.exporting.enabled=!1,delete _.data,_.series=[],d(b.series,function(t){(s=h(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible})).isInternal||_.series.push(s)}),e&&d(["xAxis","yAxis"],function(t){d(p(e[t]),function(e,n){_[t][n]=h(_[t][n],e)})}),n=new t.Chart(_,b.callback),d(["xAxis","yAxis"],function(t){d(b[t],function(e,i){var r=n[t][i],o=e.getExtremes(),s=o.userMin,a=o.userMax;!r||void 0===s&&void 0===a||r.setExtremes(s,a,!0,!1)})}),o=n.getChartHTML(),_=null,n.destroy(),c(r),w&&(y=o.match(/<\/svg>(.*?$)/))&&(y='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+y[1]+"</body></foreignObject>",o=o.replace("</svg>",y+"</svg>")),o=(o=this.sanitizeSVG(o)).replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(t,e){var n=this.options.exporting;return this.getSVG(h({chart:{borderRadius:0}},n.chartOptions,e,{exporting:{sourceWidth:t&&t.sourceWidth||n.sourceWidth,sourceHeight:t&&t.sourceHeight||n.sourceHeight}}))},exportChart:function(e,n){var i=this.getSVGForExport(e,n);e=h(this.options.exporting,e),t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:i},e.formAttributes)},print:function(){var t=this,e=t.container,r=[],o=e.parentNode,s=i.body,l=s.childNodes;t.isPrinting||(t.isPrinting=!0,t.pointer.reset(null,0),a(t,"beforePrint"),d(l,function(t,e){1===t.nodeType&&(r[e]=t.style.display,t.style.display="none")}),s.appendChild(e),n.focus(),n.print(),setTimeout(function(){o.appendChild(e),d(l,function(t,e){1===t.nodeType&&(t.style.display=r[e])}),t.isPrinting=!1,a(t,"afterPrint")},1e3))},contextMenu:function(t,e,n,r,a,c,h){var p,g,y,b,_=this,w=_.options.navigation,S=w.menuItemStyle,x=_.chartWidth,C=_.chartHeight,k="cache-"+t,T=_[k],M=m(a,c),E=function(e){_.pointer.inClass(e.target,t)||g()};T||(_[k]=T=l("div",{className:t},{position:"absolute",zIndex:1e3,padding:M+v},_.container),p=l("div",null,f({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},w.menuStyle),T),g=function(){u(T,{display:"none"}),h&&h.setState(0),_.openMenu=!1},o(T,"mouseleave",function(){y=setTimeout(g,500)}),o(T,"mouseenter",function(){clearTimeout(y)}),o(i,"mouseup",E),o(_,"destroy",function(){s(i,"mouseup",E)}),d(e,function(t){if(t){var e=t.separator?l("hr",null,null,p):l("div",{onmouseover:function(){u(this,w.menuItemHoverStyle)},onmouseout:function(){u(this,S)},onclick:function(e){e&&e.stopPropagation(),g(),t.onclick&&t.onclick.apply(_,arguments)},innerHTML:t.text||_.options.lang[t.textKey]},f({cursor:"pointer"},S),p);_.exportDivElements.push(e)}}),_.exportDivElements.push(p,T),_.exportMenuWidth=T.offsetWidth,_.exportMenuHeight=T.offsetHeight),b={display:"block"},n+_.exportMenuWidth>x?b.right=x-n-a-M+v:b.left=n-M+v,r+c+_.exportMenuHeight>C&&"top"!==h.alignOptions.verticalAlign?b.bottom=C-r-M+v:b.top=r+c-M+v,u(T,b),_.openMenu=!0},addButton:function(n){var i,r,o=this,s=o.renderer,a=h(o.options.navigation.buttonOptions,n),l=a.onclick,c=a.menuItems,u={stroke:a.symbolStroke,fill:a.symbolFill},d=a.symbolSize||12;if(o.btnCount||(o.btnCount=0),o.exportDivElements||(o.exportDivElements=[],o.exportSVGElements=[]),!1!==a.enabled){var p,m=a.theme,g=m.states,v=g&&g.hover,y=g&&g.select;delete m.states,l?p=function(t){t.stopPropagation(),l.call(o,t)}:c&&(p=function(){o.contextMenu(r.menuClassName,c,r.translateX,r.translateY,r.width,r.height,r),r.setState(2)}),a.text&&a.symbol?m.paddingLeft=t.pick(m.paddingLeft,25):a.text||f(m,{width:a.width,height:a.height,padding:0}),(r=s.button(a.text,0,0,p,m,v,y).attr({title:o.options.lang[a._titleKey],"stroke-linecap":"round"})).menuClassName=n.menuClassName||"highcharts-menu-"+o.btnCount++,a.symbol&&(i=s.symbol(a.symbol,a.symbolX-d/2,a.symbolY-d/2,d,d).attr(f(u,{"stroke-width":a.symbolStrokeWidth||1,zIndex:1})).add(r)),r.add().align(f(a,{width:r.width,x:t.pick(a.x,e)}),!0,"spacingBox"),e+=(r.width+a.buttonSpacing)*("right"===a.align?-1:1),o.exportSVGElements.push(r,i)}},destroyExport:function(t){var e,n,i=t.target;for(e=0;e<i.exportSVGElements.length;e++)(n=i.exportSVGElements[e])&&(n.onclick=n.ontouchstart=null,i.exportSVGElements[e]=n.destroy());for(e=0;e<i.exportDivElements.length;e++)n=i.exportDivElements[e],s(n,"mouseleave"),i.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,c(n)}}),y.menu=function(t,e,n,i){return["M",t,e+2.5,"L",t+n,e+2.5,"M",t,e+i/2+.5,"L",t+n,e+i/2+.5,"M",t,e+i-1.5,"L",t+n,e+i-1.5]},r.prototype.callbacks.push(function(t){var n,i=t.options.exporting,r=i.buttons;if(e=0,!1!==i.enabled){for(n in r)t.addButton(r[n]);o(t,"destroy",t.destroyExport)}})}(Highcharts)},function(t,e){!function(t){"use strict";var e=t.addEvent,n=t.each,i=t.pick;function r(t,e,n){var r=e.options,o=i(r["dragMin"+n],void 0),s=i(r["dragMax"+n],void 0);return t<o?t=o:t>s&&(t=s),t}t.Chart.prototype.callbacks.push(function(t){var n,i,o,s,a,l=t.container;function c(t){var e=t.originalEvent||t,l=e.changedTouches?e.changedTouches[0].pageX:t.pageX,c=e.changedTouches?e.changedTouches[0].pageY:t.pageY,u=n.series.options.draggableX,h=n.series.options.draggableY,d=i-l,f=o-c,p=n.series,m=s-d,g=a-f,v=void 0===i?n.x:p.xAxis.toValue(m,!0),y=void 0===o?n.y:p.yAxis.toValue(g,!0);return v=r(v,p,"X"),y=r(y,p,"Y"),{x:u?v:n.x,y:h?y:n.y}}function u(t){n&&(t&&n.update(c(t)),n.firePointEvent("drop")),n=i=o=void 0}function h(e){var r,l,c,u=e.originalEvent||e;-1!==(u.target.getAttribute("class")||"").indexOf("highcharts-handle")&&(l=u.target.point),c=t.hoverPoint&&t.hoverPoint.series,l||!t.hoverPoint||c.useDragHandle&&c.useDragHandle()||(l=t.hoverPoint),l&&((r=l.series.options).draggableX&&(n=l,i=u.changedTouches?u.changedTouches[0].pageX:e.pageX,s=n.plotX),r.draggableY&&(n=l,o=u.changedTouches?u.changedTouches[0].pageY:e.pageY,a=n.plotY+(t.plotHeight-(n.yBottom||t.plotHeight))),n&&(t.mouseIsDown=!1))}function d(e){if(e.preventDefault(),n){var i,r=c(e),o=n.series;n.firePointEvent("drag",r,function(){i=!0,n.update(r,!1),o.halo&&(o.halo=o.halo.destroy()),t.tooltip&&t.tooltip.refresh(t.tooltip.shared?[n]:n),o.stackKey?t.redraw():o.redraw()}),i||u()}}t.redraw(),e(l,"mousemove",d),e(l,"touchmove",d),e(l,"mousedown",h),e(l,"touchstart",h),e(document,"mouseup",u),e(document,"touchend",u),e(l,"mouseleave",u)}),t.seriesTypes.column.prototype.useDragHandle=function(){return!(this.chart.is3d&&this.chart.is3d())},t.seriesTypes.column.prototype.dragHandlePath=function(t,e){var n=t.x,i=t.y,r=t.x+t.width;return["M",n,i+6*e,"L",n,i,"L",r,i,"L",r,i+2*e,"L",n,i+2*e,"L",r,i+2*e,"L",r,i+4*e,"L",n,i+4*e,"L",r,i+4*e,"L",r,i+6*e]},t.wrap(t.seriesTypes.column.prototype,"drawTracker",function(t){var e=this,i=e.options,r=e.borderWidth||0;t.apply(e),this.useDragHandle()&&(i.draggableX||i.draggableY)&&n(e.points,function(t){var n=(i.dragHandlePath||e.dragHandlePath)(t.shapeArgs,r);t.handle?t.handle.attr({d:n}):(t.handle=e.chart.renderer.path(n).attr({fill:i.dragHandleFill||"rgba(0,0,0,0.5)",class:"highcharts-handle","stroke-width":r,stroke:i.dragHandleStroke||i.borderColor||1}).css({cursor:"ns-resize"}).add(e.group),t.handle.element.point=t)})})}(Highcharts)},function(t,e,n){"use strict";var i=n(441);t.exports=function(t,e){e=e||{};var n=i.boolean(e.allowUpdate,!0);return function(e){if(e=e||window.event,t.target=e.target||e.srcElement||e.originalTarget,t.element=this,t.type=e.type,n(e)){if(e.targetTouches)t.x=e.targetTouches[0].clientX,t.y=e.targetTouches[0].clientY,t.pageX=e.targetTouches[0].pageX,t.pageY=e.targetTouches[0].pageY,t.screenX=e.targetTouches[0].screenX,t.screenY=e.targetTouches[0].screenY;else{if(null===e.pageX&&null!==e.clientX){var i=e.target&&e.target.ownerDocument||document,r=i.documentElement,o=i.body;t.pageX=e.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}else t.pageX=e.pageX,t.pageY=e.pageY;t.x=e.clientX,t.y=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY}t.clientX=t.x,t.clientY=t.y}}}},function(t,e,n){"use strict";function i(t,e){return void 0===t?void 0===e?t:e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.boolean=function(t,e){return"function"==typeof(t=i(t,e))?function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return!!t.apply(this,n)}:t?function(){return!0}:function(){return!1}},e.integer=function(t,e){return"function"==typeof(t=i(t,e))?function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=parseInt(t.apply(this,n),10);return r!=r?0:r}:(t=parseInt(t,10))!=t?function(){return 0}:function(){return t}},e.string=function(t,e){return"function"==typeof(t=i(t,e))?function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return""+t.apply(this,n)}:(t=""+t,function(){return t})}},function(t,e,n){(function(t,e){!function(i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var r=function(){function t(t,e,n,i){this.markup=t,this.children=e,this.options=n,this.callback=i}return t.prototype.render=function(t){var e=i(this.markup);if(this.options&&this.options.contents&&e.html(this.options.contents),this.options&&this.options.className&&e.addClass(this.options.className),this.options&&this.options.data&&i.each(this.options.data,function(t,n){e.attr("data-"+t,n)}),this.options&&this.options.click&&e.on("click",this.options.click),this.children){var n=e.find(".note-children-container");this.children.forEach(function(t){t.render(n.length?n:e)})}return this.callback&&this.callback(e,this.options),this.options&&this.options.callback&&this.options.callback(e),t&&t.append(e),e},t}(),o=function(t,e){return function(){var n="object"==typeof arguments[1]?arguments[1]:arguments[0],i=Array.isArray(arguments[0])?arguments[0]:[];return n&&n.children&&(i=n.children),new r(t,i,n,e)}},s=o('<div class="note-editor note-frame panel panel-default"/>'),a=o('<div class="note-toolbar panel-heading" role="toolbar"></div></div>'),l=o('<div class="note-editing-area"/>'),c=o('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),u=o('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),h=o(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),d=o('<div class="note-editor"/>'),f=o(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" aria-live="polite"/>'].join("")),p=o('<div class="note-btn-group btn-group">'),m=o('<ul class="dropdown-menu" role="list">',function(t,e){var n=Array.isArray(e.items)?e.items.map(function(t){var n="string"==typeof t?t:t.value||"",i=e.template?e.template(t):t,r="object"==typeof t?t.option:void 0;return'<li role="listitem" aria-label="'+n+'"><a href="#" data-value="'+n+'"'+(void 0!==r?' data-option="'+r+'"':"")+">"+i+"</a></li>"}).join(""):e.items;t.html(n).attr({"aria-label":e.title})}),g=o('<ul class="dropdown-menu note-check" role="list">',function(t,e){var n=Array.isArray(e.items)?e.items.map(function(t){var n="string"==typeof t?t:t.value||"",i=e.template?e.template(t):t;return'<li role="listitem" aria-label="'+t+'"><a href="#" data-value="'+n+'">'+w(e.checkClassName)+" "+i+"</a></li>"}).join(""):e.items;t.html(n).attr({"aria-label":e.title})}),v=o('<div class="note-color-palette"/>',function(t,e){for(var n=[],i=0,r=e.colors.length;i<r;i++){for(var o=e.eventName,s=e.colors[i],a=e.colorsName[i],l=[],c=0,u=s.length;c<u;c++){var h=s[c],d=a[c];l.push(['<button type="button" class="note-color-btn"','style="background-color:',h,'" ','data-event="',o,'" ','data-value="',h,'" ','title="',d,'" ','aria-label="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(n.join("")),e.tooltip&&t.find(".note-color-btn").tooltip({container:e.container,trigger:"hover",placement:"bottom"})}),y=o('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(t,e){e.fade&&t.addClass("fade"),t.attr({"aria-label":e.title}),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),b=o(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var n=void 0!==e.direction?e.direction:"bottom";t.addClass(n),e.hideArrow&&t.find(".arrow").hide()}),_=o('<div class="checkbox"></div>',function(t,e){t.html(["<label"+(e.id?' for="'+e.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(e.id?' id="'+e.id+'"':""),e.checked?" checked":"",' aria-checked="'+(e.checked?"true":"false")+'"/>',e.text?e.text:"","</label>"].join(""))}),w=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},S={editor:s,toolbar:a,editingArea:l,codable:c,editable:u,statusbar:h,airEditor:d,airEditable:f,buttonGroup:p,dropdown:m,dropdownButtonContents:function(t,e){return t+" "+w(e.icons.caret,"span")},dropdownCheck:g,palette:v,dialog:y,popover:b,checkbox:_,icon:w,options:{},button:function(t,e){return o('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip,"aria-label":e.tooltip}).tooltip({container:void 0!==e.container?e.container:"body",trigger:"hover",placement:"bottom"}).on("click",function(t){i(t.currentTarget).tooltip("hide")})})(t,e)},toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?S.airEditor([S.editingArea([S.airEditable()])]):S.editor([S.toolbar(),S.editingArea([S.codable(),S.editable()]),S.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};i.summernote=i.summernote||{lang:{}},i.extend(i.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var x,C=n(443),k=navigator.userAgent,T=/MSIE|Trident/i.test(k);if(T){var M=/MSIE (\d+[.]\d+)/.exec(k);M&&(x=parseFloat(M[1])),(M=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(k))&&(x=parseFloat(M[1]))}var E=/Edge\/\d+/.test(k),A=!!window.CodeMirror,I="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,$=T||E?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",D={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:T,isEdge:E,isFF:!E&&/firefox/i.test(k),isPhantom:/PhantomJS/i.test(k),isWebkit:!E&&/webkit/i.test(k),isChrome:!E&&/chrome/i.test(k),isSafari:!E&&/safari/i.test(k),browserVersion:x,jqueryVersion:parseFloat(i.fn.jquery),isSupportAmd:C,isSupportTouch:I,hasCodeMirror:A,isFontInstalled:function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n=document.createElement("canvas").getContext("2d");n.font="200px '"+e+"'";var i=n.measureText("mmmmmmmmmmwwwww").width;return n.font="200px '"+t+"', '"+e+"'",i!==n.measureText("mmmmmmmmmmwwwww").width},isW3CRangeSupport:!!document.createRange,inputEventName:$},L=0,P={eq:function(t){return function(e){return t===e}},eq2:function(t,e){return t===e},peq2:function(t){return function(e,n){return e[t]===n[t]}},ok:function(){return!0},fail:function(){return!1},self:function(t){return t},not:function(t){return function(){return!t.apply(t,arguments)}},and:function(t,e){return function(n){return t(n)&&e(n)}},invoke:function(t,e){return function(){return t[e].apply(t,arguments)}},uniqueId:function(t){var e=++L+"";return t?t+e:e},rect2bnd:function(e){var n=t(document);return{top:e.top+n.scrollTop(),left:e.left+n.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},invertObject:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},namespaceToCamel:function(t,e){return(e=e||"")+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},debounce:function(t,e,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,n||t.apply(r,o)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(r,o)}},isValidUrl:function(t){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gi.test(t)}};function O(t){return t[0]}function N(t){return t[t.length-1]}function j(t){return t.slice(1)}function R(t,e){return!!(t&&t.length&&e)&&-1!==t.indexOf(e)}var B={head:O,last:N,initial:function(t){return t.slice(0,t.length-1)},tail:j,prev:function(t,e){if(t&&t.length&&e){var n=t.indexOf(e);return-1===n?null:t[n-1]}return null},next:function(t,e){if(t&&t.length&&e){var n=t.indexOf(e);return-1===n?null:t[n+1]}return null},find:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r))return r}},contains:R,all:function(t,e){for(var n=0,i=t.length;n<i;n++)if(!e(t[n]))return!1;return!0},sum:function(t,e){return e=e||P.self,t.reduce(function(t,n){return t+e(n)},0)},from:function(t){for(var e=[],n=t.length,i=-1;++i<n;)e[i]=t[i];return e},isEmpty:function(t){return!t||!t.length},clusterBy:function(t,e){return t.length?j(t).reduce(function(t,n){var i=N(t);return e(N(i),n)?i[i.length]=n:t[t.length]=[n],t},[[O(t)]]):[]},compact:function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e},unique:function(t){for(var e=[],n=0,i=t.length;n<i;n++)R(e,t[n])||e.push(t[n]);return e}},F=String.fromCharCode(160);function Y(t){return t&&i(t).hasClass("note-editable")}function H(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}}function W(t){return t&&3===t.nodeType}function z(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(t.nodeName.toUpperCase())}function U(t){return!Y(t)&&t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())}var V=H("PRE"),G=H("LI"),q=H("TABLE"),X=H("DATA");function K(t){return!(et(t)||J(t)||Z(t)||U(t)||q(t)||tt(t)||X(t))}function J(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}var Z=H("HR");function Q(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}var tt=H("BLOCKQUOTE");function et(t){return Q(t)||tt(t)||Y(t)}var nt=H("A"),it=H("BODY"),rt=D.isMSIE&&D.browserVersion<11?"&nbsp;":"<br>";function ot(t){return W(t)?t.nodeValue.length:t?t.childNodes.length:0}function st(t){var e=ot(t);return 0===e||!W(t)&&1===e&&t.innerHTML===rt||!(!B.all(t.childNodes,W)||""!==t.innerHTML)}function at(t){z(t)||ot(t)||(t.innerHTML=rt)}function lt(t,e){for(;t;){if(e(t))return t;if(Y(t))break;t=t.parentNode}return null}function ct(t,e){e=e||P.fail;var n=[];return lt(t,function(t){return Y(t)||n.push(t),e(t)}),n}function ut(t,e){e=e||P.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n}function ht(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function dt(t,e){return i.each(e,function(e,n){t.appendChild(n)}),t}function ft(t){return 0===t.offset}function pt(t){return t.offset===ot(t.node)}function mt(t){return ft(t)||pt(t)}function gt(t,e){for(;t&&t!==e;){if(0!==yt(t))return!1;t=t.parentNode}return!0}function vt(t,e){if(!e)return!1;for(;t&&t!==e;){if(yt(t)!==ot(t.parentNode)-1)return!1;t=t.parentNode}return!0}function yt(t){for(var e=0;t=t.previousSibling;)e+=1;return e}function bt(t){return!!(t&&t.childNodes&&t.childNodes.length)}function _t(t,e){var n,i;if(0===t.offset){if(Y(t.node))return null;n=t.node.parentNode,i=yt(t.node)}else bt(t.node)?i=ot(n=t.node.childNodes[t.offset-1]):(n=t.node,i=e?0:t.offset-1);return{node:n,offset:i}}function wt(t,e){var n,i;if(ot(t.node)===t.offset){if(Y(t.node))return null;n=t.node.parentNode,i=yt(t.node)+1}else bt(t.node)?(n=t.node.childNodes[t.offset],i=0):(n=t.node,i=e?ot(t.node):t.offset+1);return{node:n,offset:i}}function St(t,e){return t.node===e.node&&t.offset===e.offset}function xt(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint,r=e&&e.isDiscardEmptySplits;if(r&&(n=!0),mt(t)&&(W(t.node)||i)){if(ft(t))return t.node;if(pt(t))return t.node.nextSibling}if(W(t.node))return t.node.splitText(t.offset);var o=t.node.childNodes[t.offset],s=ht(t.node.cloneNode(!1),t.node);return dt(s,ut(o)),n||(at(t.node),at(s)),r&&(st(t.node)&&Tt(t.node),st(s))?(Tt(s),t.node.nextSibling):s}function Ct(t,e,n){var i=ct(e.node,P.eq(t));return i.length?1===i.length?xt(e,n):i.reduce(function(t,i){return t===e.node&&(t=xt(e,n)),xt({node:i,offset:t?yt(t):ot(i)},n)}):null}function kt(t){return document.createElement(t)}function Tt(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){for(var i=[],r=0,o=t.childNodes.length;r<o;r++)i.push(t.childNodes[r]);for(r=0,o=i.length;r<o;r++)n.insertBefore(i[r],t)}n.removeChild(t)}}var Mt=H("TEXTAREA");function Et(t,e){var n=Mt(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n}var At={NBSP_CHAR:F,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:rt,emptyPara:"<p>"+rt+"</p>",makePredByNodeName:H,isEditable:Y,isControlSizing:function(t){return t&&i(t).hasClass("note-control-sizing")},isText:W,isElement:function(t){return t&&1===t.nodeType},isVoid:z,isPara:U,isPurePara:function(t){return U(t)&&!G(t)},isHeading:function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},isInline:K,isBlock:P.not(K),isBodyInline:function(t){return K(t)&&!lt(t,U)},isBody:it,isParaInline:function(t){return K(t)&&!!lt(t,U)},isPre:V,isList:J,isTable:q,isData:X,isCell:Q,isBlockquote:tt,isBodyContainer:et,isAnchor:nt,isDiv:H("DIV"),isLi:G,isBR:H("BR"),isSpan:H("SPAN"),isB:H("B"),isU:H("U"),isS:H("S"),isI:H("I"),isImg:H("IMG"),isTextarea:Mt,isEmpty:st,isEmptyAnchor:P.and(nt,st),isClosestSibling:function(t,e){return t.nextSibling===e||t.previousSibling===e},withClosestSiblings:function(t,e){e=e||P.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n},nodeLength:ot,isLeftEdgePoint:ft,isRightEdgePoint:pt,isEdgePoint:mt,isLeftEdgeOf:gt,isRightEdgeOf:vt,isLeftEdgePointOf:function(t,e){return ft(t)&&gt(t.node,e)},isRightEdgePointOf:function(t,e){return pt(t)&&vt(t.node,e)},prevPoint:_t,nextPoint:wt,isSamePoint:St,isVisiblePoint:function(t){if(W(t.node)||!bt(t.node)||st(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!z(e)||n&&!z(n))},prevPointUntil:function(t,e){for(;t;){if(e(t))return t;t=_t(t)}return null},nextPointUntil:function(t,e){for(;t;){if(e(t))return t;t=wt(t)}return null},isCharPoint:function(t){if(!W(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==F},walkPoint:function(t,e,n,i){for(var r=t;r&&(n(r),!St(r,e));)r=wt(r,i&&t.node!==r.node&&e.node!==r.node)},ancestor:lt,singleChildAncestor:function(t,e){for(t=t.parentNode;t&&1===ot(t);){if(e(t))return t;if(Y(t))break;t=t.parentNode}return null},listAncestor:ct,lastAncestor:function(t,e){var n=ct(t);return B.last(n.filter(e))},listNext:ut,listPrev:function(t,e){e=e||P.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n},listDescendant:function(t,e){var n=[];return e=e||P.ok,function i(r){t!==r&&e(r)&&n.push(r);for(var o=0,s=r.childNodes.length;o<s;o++)i(r.childNodes[o])}(t),n},commonAncestor:function(t,e){for(var n=ct(t),i=e;i;i=i.parentNode)if(n.indexOf(i)>-1)return i;return null},wrap:function(t,e){var n=t.parentNode,r=i("<"+e+">")[0];return n.insertBefore(r,t),r.appendChild(t),r},insertAfter:ht,appendChildNodes:dt,position:yt,hasChildren:bt,makeOffsetPath:function(t,e){return ct(e,P.eq(t)).map(yt).reverse()},fromOffsetPath:function(t,e){for(var n=t,i=0,r=e.length;i<r;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},splitTree:Ct,splitPoint:function(t,e){var n,i,r=e?U:et,o=ct(t.node,r),s=B.last(o)||t.node;r(s)?(n=o[o.length-2],i=s):i=(n=s).parentNode;var a=n&&Ct(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return a||i!==t.node||(a=t.node.childNodes[t.offset]),{rightNode:a,container:i}},create:kt,createText:function(t){return document.createTextNode(t)},remove:Tt,removeWhile:function(t,e){for(;t&&!Y(t)&&e(t);){var n=t.parentNode;Tt(t),t=n}},replace:function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=kt(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),dt(n,B.from(t.childNodes)),ht(n,t),Tt(t),n},html:function(t,e){var n=Et(t);return e&&(n=(n=n.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||r?"\n":"")})).trim()),n},value:Et,posFromPlaceholder:function(t){var e=i(t),n=e.offset(),r=e.outerHeight(!0);return{left:n.left,top:n.top+r}},attachEvents:function(t,e){Object.keys(e).forEach(function(n){t.on(n,e[n])})},detachEvents:function(t,e){Object.keys(e).forEach(function(n){t.off(n,e[n])})},isCustomStyleTag:function(t){return t&&!W(t)&&B.contains(t.classList,"note-styletag")}},It=function(){function t(t,e){this.ui=i.summernote.ui,this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize()}return t.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},t.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},t.prototype.reset=function(){var t=this.isDisabled();this.code(At.emptyPara),this._destroy(),this._initialize(),t&&this.disable()},t.prototype._initialize=function(){var t=this,e=i.extend({},this.options.buttons);Object.keys(e).forEach(function(n){t.memo("button."+n,e[n])});var n=i.extend({},this.options.modules,i.summernote.plugins||{});Object.keys(n).forEach(function(e){t.module(e,n[e],!0)}),Object.keys(this.modules).forEach(function(e){t.initializeModule(e)})},t.prototype._destroy=function(){var t=this;Object.keys(this.modules).reverse().forEach(function(e){t.removeModule(e)}),Object.keys(this.memos).forEach(function(e){t.removeMemo(e)}),this.triggerEvent("destroy",this)},t.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(void 0===t)return this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html();e?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",t,this.layoutInfo.editable)},t.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},t.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},t.prototype.triggerEvent=function(){var t=B.head(arguments),e=B.tail(B.from(arguments)),n=this.options.callbacks[P.namespaceToCamel(t,"on")];n&&n.apply(this.$note[0],e),this.$note.trigger("summernote."+t,e)},t.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||P.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&At.attachEvents(this.$note,e.events))},t.prototype.module=function(t,e,n){if(1===arguments.length)return this.modules[t];this.modules[t]=new e(this),n||this.initializeModule(t)},t.prototype.removeModule=function(t){var e=this.modules[t];e.shouldInitialize()&&(e.events&&At.detachEvents(this.$note,e.events),e.destroy&&e.destroy()),delete this.modules[t]},t.prototype.memo=function(t,e){if(1===arguments.length)return this.memos[t];this.memos[t]=e},t.prototype.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},t.prototype.createInvokeHandlerAndUpdateState=function(t,e){var n=this;return function(i){n.createInvokeHandler(t,e)(i),n.invoke("buttons.updateCurrentStyle")}},t.prototype.createInvokeHandler=function(t,e){var n=this;return function(r){r.preventDefault();var o=i(r.target);n.invoke(t,e||o.closest("[data-value]").data("value"),o)}},t.prototype.invoke=function(){var t=B.head(arguments),e=B.tail(B.from(arguments)),n=t.split("."),i=n.length>1,r=i&&B.head(n),o=i?B.last(n):B.head(n),s=this.modules[r||"editor"];return!r&&this[o]?this[o].apply(this,e):s&&s[o]&&s.shouldInitialize()?s[o].apply(s,e):void 0},t}();function $t(t,e){var n,i,r=t.parentElement(),o=document.body.createTextRange(),s=B.from(r.childNodes);for(n=0;n<s.length;n++)if(!At.isText(s[n])){if(o.moveToElementText(s[n]),o.compareEndPoints("StartToStart",t)>=0)break;i=s[n]}if(0!==n&&At.isText(s[n-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(i||r),a.collapse(!i),l=i?i.nextSibling:r.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var u=c.text.replace(/[\r\n]/g,"").length;u>l.nodeValue.length&&l.nextSibling;)u-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,e&&l.nextSibling&&At.isText(l.nextSibling)&&u===l.nodeValue.length&&(u-=l.nodeValue.length,l=l.nextSibling),r=l,n=u}return{cont:r,offset:n}}function Dt(t){var e=function(t,n){var i,r;if(At.isText(t)){var o=At.listPrev(t,P.not(At.isText)),s=B.last(o).previousSibling;i=s||t.parentNode,n+=B.sum(B.tail(o),At.nodeLength),r=!s}else{if(i=t.childNodes[n]||t,At.isText(i))return e(i,0);n=0,r=!1}return{node:i,collapseToStart:r,offset:n}},n=document.body.createTextRange(),i=e(t.node,t.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n}i.fn.extend({summernote:function(){var t=i.type(B.head(arguments)),e="string"===t,n="object"===t,r=i.extend({},i.summernote.options,n?B.head(arguments):{});r.langInfo=i.extend(!0,{},i.summernote.lang["en-US"],i.summernote.lang[r.lang]),r.icons=i.extend(!0,{},i.summernote.options.icons,r.icons),r.tooltip="auto"===r.tooltip?!D.isSupportTouch:r.tooltip,this.each(function(t,e){var n=i(e);if(!n.data("summernote")){var o=new It(n,r);n.data("summernote",o),n.data("summernote").triggerEvent("init",o.layoutInfo)}});var o=this.first();if(o.length){var s=o.data("summernote");if(e)return s.invoke.apply(s,B.from(arguments));r.focus&&s.invoke("editor.focus")}return this}});var Lt=function(){function t(t,e,n,i){this.sc=t,this.so=e,this.ec=n,this.eo=i,this.isOnEditable=this.makeIsOn(At.isEditable),this.isOnList=this.makeIsOn(At.isList),this.isOnAnchor=this.makeIsOn(At.isAnchor),this.isOnCell=this.makeIsOn(At.isCell),this.isOnData=this.makeIsOn(At.isData)}return t.prototype.nativeRange=function(){if(D.isW3CRangeSupport){var t=document.createRange();return t.setStart(this.sc,this.sc.data&&this.so>this.sc.data.length?0:this.so),t.setEnd(this.ec,this.sc.data?Math.min(this.eo,this.sc.data.length):this.eo),t}var e=Dt({node:this.sc,offset:this.so});return e.setEndPoint("EndToEnd",Dt({node:this.ec,offset:this.eo})),e},t.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},t.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},t.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},t.prototype.select=function(){var t=this.nativeRange();if(D.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},t.prototype.scrollIntoView=function(t){var e=i(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},t.prototype.normalize=function(){var e=function(t,e){if(At.isVisiblePoint(t)&&(!At.isEdgePoint(t)||At.isRightEdgePoint(t)&&!e||At.isLeftEdgePoint(t)&&e||At.isRightEdgePoint(t)&&e&&At.isVoid(t.node.nextSibling)||At.isLeftEdgePoint(t)&&!e&&At.isVoid(t.node.previousSibling)||At.isBlock(t.node)&&At.isEmpty(t.node)))return t;var n=At.ancestor(t.node,At.isBlock);if((At.isLeftEdgePointOf(t,n)||At.isVoid(At.prevPoint(t).node))&&!e||(At.isRightEdgePointOf(t,n)||At.isVoid(At.nextPoint(t).node))&&e){if(At.isVisiblePoint(t))return t;e=!e}return(e?At.nextPointUntil(At.nextPoint(t),At.isVisiblePoint):At.prevPointUntil(At.prevPoint(t),At.isVisiblePoint))||t},n=e(this.getEndPoint(),!1),i=this.isCollapsed()?n:e(this.getStartPoint(),!0);return new t(i.node,i.offset,n.node,n.offset)},t.prototype.nodes=function(t,e){t=t||P.ok;var n=e&&e.includeAncestor,i=e&&e.fullyContains,r=this.getStartPoint(),o=this.getEndPoint(),s=[],a=[];return At.walkPoint(r,o,function(e){var r;At.isEditable(e.node)||(i?(At.isLeftEdgePoint(e)&&a.push(e.node),At.isRightEdgePoint(e)&&B.contains(a,e.node)&&(r=e.node)):r=n?At.ancestor(e.node,t):e.node,r&&t(r)&&s.push(r))},!0),B.unique(s)},t.prototype.commonAncestor=function(){return At.commonAncestor(this.sc,this.ec)},t.prototype.expand=function(e){var n=At.ancestor(this.sc,e),i=At.ancestor(this.ec,e);if(!n&&!i)return new t(this.sc,this.so,this.ec,this.eo);var r=this.getPoints();return n&&(r.sc=n,r.so=0),i&&(r.ec=i,r.eo=At.nodeLength(i)),new t(r.sc,r.so,r.ec,r.eo)},t.prototype.collapse=function(e){return e?new t(this.sc,this.so,this.sc,this.so):new t(this.ec,this.eo,this.ec,this.eo)},t.prototype.splitText=function(){var e=this.sc===this.ec,n=this.getPoints();return At.isText(this.ec)&&!At.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),At.isText(this.sc)&&!At.isEdgePoint(this.getStartPoint())&&(n.sc=this.sc.splitText(this.so),n.so=0,e&&(n.ec=n.sc,n.eo=this.eo-this.so)),new t(n.sc,n.so,n.ec,n.eo)},t.prototype.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),n=e.nodes(null,{fullyContains:!0}),r=At.prevPointUntil(e.getStartPoint(),function(t){return!B.contains(n,t.node)}),o=[];return i.each(n,function(t,e){var n=e.parentNode;r.node!==n&&1===At.nodeLength(n)&&o.push(n),At.remove(e,!1)}),i.each(o,function(t,e){At.remove(e,!1)}),new t(r.node,r.offset,r.node,r.offset).normalize()},t.prototype.makeIsOn=function(t){return function(){var e=At.ancestor(this.sc,t);return!!e&&e===At.ancestor(this.ec,t)}},t.prototype.isLeftEdgeOf=function(t){if(!At.isLeftEdgePoint(this.getStartPoint()))return!1;var e=At.ancestor(this.sc,t);return e&&At.isLeftEdgeOf(this.sc,e)},t.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},t.prototype.wrapBodyInlineWithPara=function(){if(At.isBodyContainer(this.sc)&&At.isEmpty(this.sc))return this.sc.innerHTML=At.emptyPara,new t(this.sc.firstChild,0,this.sc.firstChild,0);var e,n=this.normalize();if(At.isParaInline(this.sc)||At.isPara(this.sc))return n;if(At.isInline(n.sc)){var i=At.listAncestor(n.sc,P.not(At.isInline));e=B.last(i),At.isInline(e)||(e=i[i.length-2]||n.sc.childNodes[n.so])}else e=n.sc.childNodes[n.so>0?n.so-1:0];var r=At.listPrev(e,At.isParaInline).reverse();if((r=r.concat(At.listNext(e.nextSibling,At.isParaInline))).length){var o=At.wrap(B.head(r),"p");At.appendChildNodes(o,B.tail(r))}return this.normalize()},t.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=At.splitPoint(e.getStartPoint(),At.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},t.prototype.pasteHTML=function(t){var e=i("<div></div>").html(t)[0],n=B.from(e.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return r.so>0&&(n=n.reverse()),n=n.map(function(t){return r.insertNode(t)}),r.so>0&&(n=n.reverse()),n},t.prototype.toString=function(){var t=this.nativeRange();return D.isW3CRangeSupport?t.toString():t.text},t.prototype.getWordRange=function(e){var n=this.getEndPoint();if(!At.isCharPoint(n))return this;var i=At.prevPointUntil(n,function(t){return!At.isCharPoint(t)});return e&&(n=At.nextPointUntil(n,function(t){return!At.isCharPoint(t)})),new t(i.node,i.offset,n.node,n.offset)},t.prototype.bookmark=function(t){return{s:{path:At.makeOffsetPath(t,this.sc),offset:this.so},e:{path:At.makeOffsetPath(t,this.ec),offset:this.eo}}},t.prototype.paraBookmark=function(t){return{s:{path:B.tail(At.makeOffsetPath(B.head(t),this.sc)),offset:this.so},e:{path:B.tail(At.makeOffsetPath(B.last(t),this.ec)),offset:this.eo}}},t.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},t}(),Pt={create:function(t,e,n,i){if(4===arguments.length)return new Lt(t,e,n,i);if(2===arguments.length)return new Lt(t,e,n=t,i=e);var r=this.createFromSelection();return r||1!==arguments.length?r:(r=this.createFromNode(arguments[0])).collapse(At.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var t,e,n,i;if(D.isW3CRangeSupport){var r=document.getSelection();if(!r||0===r.rangeCount)return null;if(At.isBody(r.anchorNode))return null;var o=r.getRangeAt(0);t=o.startContainer,e=o.startOffset,n=o.endContainer,i=o.endOffset}else{var s=document.selection.createRange(),a=s.duplicate();a.collapse(!1);var l=s;l.collapse(!0);var c=$t(l,!0),u=$t(a,!1);At.isText(c.node)&&At.isLeftEdgePoint(c)&&At.isTextNode(u.node)&&At.isRightEdgePoint(u)&&u.node.nextSibling===c.node&&(c=u),t=c.cont,e=c.offset,n=u.cont,i=u.offset}return new Lt(t,e,n,i)},createFromNode:function(t){var e=t,n=0,i=t,r=At.nodeLength(i);return At.isVoid(e)&&(n=At.listPrev(e).length-1,e=e.parentNode),At.isBR(i)?(r=At.listPrev(i).length-1,i=i.parentNode):At.isVoid(i)&&(r=At.listPrev(i).length,i=i.parentNode),this.create(e,n,i,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=At.fromOffsetPath(t,e.s.path),i=e.s.offset,r=At.fromOffsetPath(t,e.e.path),o=e.e.offset;return new Lt(n,i,r,o)},createFromParaBookmark:function(t,e){var n=t.s.offset,i=t.e.offset,r=At.fromOffsetPath(B.head(e),t.s.path),o=At.fromOffsetPath(B.last(e),t.e.path);return new Lt(r,n,o,i)}},Ot={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Nt={isEdit:function(t){return B.contains([Ot.BACKSPACE,Ot.TAB,Ot.ENTER,Ot.SPACE,Ot.DELETE],t)},isMove:function(t){return B.contains([Ot.LEFT,Ot.UP,Ot.RIGHT,Ot.DOWN],t)},nameFromCode:P.invertObject(Ot),code:Ot},jt=function(){function t(t){this.stack=[],this.stackOffset=-1,this.$editable=t,this.editable=t[0]}return t.prototype.makeSnapshot=function(){var t=Pt.create(this.editable);return{contents:this.$editable.html(),bookmark:t&&t.isOnEditable()?t.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},t.prototype.applySnapshot=function(t){null!==t.contents&&this.$editable.html(t.contents),null!==t.bookmark&&Pt.createFromBookmark(this.editable,t.bookmark).select()},t.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},t.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},t.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},t.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},t}(),Rt=function(){function t(){}return t.prototype.jQueryCSS=function(t,e){if(D.jqueryVersion<1.9){var n={};return i.each(e,function(e,i){n[i]=t.css(i)}),n}return t.css(e)},t.prototype.fromNode=function(t){var e=this.jQueryCSS(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return e["font-size"]=parseInt(e["font-size"],10),e},t.prototype.stylePara=function(t,e){i.each(t.nodes(At.isPara,{includeAncestor:!0}),function(t,n){i(n).css(e)})},t.prototype.styleNodes=function(t,e){t=t.splitText();var n=e&&e.nodeName||"SPAN",r=!(!e||!e.expandClosestSibling),o=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(At.create(n))];var s=At.makePredByNodeName(n),a=t.nodes(At.isText,{fullyContains:!0}).map(function(t){return At.singleChildAncestor(t,s)||At.wrap(t,n)});if(r){if(o){var l=t.nodes();s=P.and(s,function(t){return B.contains(l,t)})}return a.map(function(t){var e=At.withClosestSiblings(t,s),n=B.head(e),r=B.tail(e);return i.each(r,function(t,e){At.appendChildNodes(n,e.childNodes),At.remove(e)}),B.head(e)})}return a},t.prototype.current=function(t){var e=i(At.isElement(t.sc)?t.sc:t.sc.parentNode),n=this.fromNode(e);try{n=i.extend(n,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||n["font-family"]})}catch(t){}if(t.isOnList()){var r=["circle","disc","disc-leading-zero","square"].indexOf(n["list-style-type"])>-1;n["list-style"]=r?"unordered":"ordered"}else n["list-style"]="none";var o=At.ancestor(t.sc,At.isPara);if(o&&o.style["line-height"])n["line-height"]=o.style.lineHeight;else{var s=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=s.toFixed(1)}return n.anchor=t.isOnAnchor()&&At.ancestor(t.sc,At.isAnchor),n.ancestors=At.listAncestor(t.sc,At.isEditable),n.range=t,n},t}(),Bt=function(){function t(){}return t.prototype.insertOrderedList=function(t){this.toggleList("OL",t)},t.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)},t.prototype.indent=function(t){var e=this,n=Pt.create(t).wrapBodyInlineWithPara(),r=n.nodes(At.isPara,{includeAncestor:!0}),o=B.clusterBy(r,P.peq2("parentNode"));i.each(o,function(t,n){var r=B.head(n);if(At.isLi(r)){var o=e.findList(r.previousSibling);o?n.map(function(t){return o.appendChild(t)}):(e.wrapList(n,r.parentNode.nodeName),n.map(function(t){return t.parentNode}).map(function(t){return e.appendToPrevious(t)}))}else i.each(n,function(t,e){i(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),n.select()},t.prototype.outdent=function(t){var e=this,n=Pt.create(t).wrapBodyInlineWithPara(),r=n.nodes(At.isPara,{includeAncestor:!0}),o=B.clusterBy(r,P.peq2("parentNode"));i.each(o,function(t,n){var r=B.head(n);At.isLi(r)?e.releaseList([n]):i.each(n,function(t,e){i(e).css("marginLeft",function(t,e){return(e=parseInt(e,10)||0)>25?e-25:""})})}),n.select()},t.prototype.toggleList=function(t,e){var n=this,r=Pt.create(e).wrapBodyInlineWithPara(),o=r.nodes(At.isPara,{includeAncestor:!0}),s=r.paraBookmark(o),a=B.clusterBy(o,P.peq2("parentNode"));if(B.find(o,At.isPurePara)){var l=[];i.each(a,function(e,i){l=l.concat(n.wrapList(i,t))}),o=l}else{var c=r.nodes(At.isList,{includeAncestor:!0}).filter(function(e){return!i.nodeName(e,t)});c.length?i.each(c,function(e,n){At.replace(n,t)}):o=this.releaseList(a,!0)}Pt.createFromParaBookmark(s,o).select()},t.prototype.wrapList=function(t,e){var n=B.head(t),i=B.last(t),r=At.isList(n.previousSibling)&&n.previousSibling,o=At.isList(i.nextSibling)&&i.nextSibling,s=r||At.insertAfter(At.create(e||"UL"),i);return t=t.map(function(t){return At.isPurePara(t)?At.replace(t,"LI"):t}),At.appendChildNodes(s,t),o&&(At.appendChildNodes(s,B.from(o.childNodes)),At.remove(o)),t},t.prototype.releaseList=function(t,e){var n=this,r=[];return i.each(t,function(t,o){var s=B.head(o),a=B.last(o),l=e?At.lastAncestor(s,At.isList):s.parentNode,c=l.parentNode;if("LI"===l.parentNode.nodeName)o.map(function(t){var e=n.findNextSiblings(t);c.nextSibling?c.parentNode.insertBefore(t,c.nextSibling):c.parentNode.appendChild(t),e.length&&(n.wrapList(e,l.nodeName),t.appendChild(e[0].parentNode))}),0===l.children.length&&c.removeChild(l),0===c.childNodes.length&&c.parentNode.removeChild(c);else{var u=l.childNodes.length>1?At.splitTree(l,{node:a.parentNode,offset:At.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,h=At.splitTree(l,{node:s.parentNode,offset:At.position(s)},{isSkipPaddingBlankHTML:!0});o=e?At.listDescendant(h,At.isLi):B.from(h.childNodes).filter(At.isLi),!e&&At.isList(l.parentNode)||(o=o.map(function(t){return At.replace(t,"P")})),i.each(B.from(o).reverse(),function(t,e){At.insertAfter(e,l)});var d=B.compact([l,h,u]);i.each(d,function(t,e){var n=[e].concat(At.listDescendant(e,At.isList));i.each(n.reverse(),function(t,e){At.nodeLength(e)||At.remove(e,!0)})})}r=r.concat(o)}),r},t.prototype.appendToPrevious=function(t){return t.previousSibling?At.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")},t.prototype.findList=function(t){return t?B.find(t.children,function(t){return["OL","UL"].indexOf(t.nodeName)>-1}):null},t.prototype.findNextSiblings=function(t){for(var e=[];t.nextSibling;)e.push(t.nextSibling),t=t.nextSibling;return e},t}(),Ft=function(){function t(t){this.bullet=new Bt,this.options=t.options}return t.prototype.insertTab=function(t,e){var n=At.createText(new Array(e+1).join(At.NBSP_CHAR));(t=t.deleteContents()).insertNode(n,!0),(t=Pt.create(n,e)).select()},t.prototype.insertParagraph=function(t,e){e=(e=(e=e||Pt.create(t)).deleteContents()).wrapBodyInlineWithPara();var n,r=At.ancestor(e.sc,At.isPara);if(r){if(At.isEmpty(r)&&At.isLi(r))return void this.bullet.toggleList(r.parentNode.nodeName);var o=null;if(1===this.options.blockquoteBreakingLevel?o=At.ancestor(r,At.isBlockquote):2===this.options.blockquoteBreakingLevel&&(o=At.lastAncestor(r,At.isBlockquote)),o){n=i(At.emptyPara)[0],At.isRightEdgePoint(e.getStartPoint())&&At.isBR(e.sc.nextSibling)&&i(e.sc.nextSibling).remove();var s=At.splitTree(o,e.getStartPoint(),{isDiscardEmptySplits:!0});s?s.parentNode.insertBefore(n,s):At.insertAfter(n,o)}else{n=At.splitTree(r,e.getStartPoint());var a=At.listDescendant(r,At.isEmptyAnchor);a=a.concat(At.listDescendant(n,At.isEmptyAnchor)),i.each(a,function(t,e){At.remove(e)}),(At.isHeading(n)||At.isPre(n)||At.isCustomStyleTag(n))&&At.isEmpty(n)&&(n=At.replace(n,"p"))}}else{var l=e.sc.childNodes[e.so];n=i(At.emptyPara)[0],l?e.sc.insertBefore(n,l):e.sc.appendChild(n)}Pt.create(n,0).normalize().select().scrollIntoView(t)},t}(),Yt=function(t,e,n,i){var r={colPos:0,rowPos:0},o=[],s=[];function a(t,e,n,i,r,s,a){var l={baseRow:n,baseCell:i,isRowSpan:r,isColSpan:s,isVirtual:a};o[t]||(o[t]=[]),o[t][e]=l}function l(t,e,n,i){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:n,cellIndex:i}}}function c(t,e){if(!o[t])return e;if(!o[t][e])return e;for(var n=e;o[t][n];)if(n++,!o[t][n])return n}function u(t,e){var n=c(t.rowIndex,e.cellIndex),i=e.colSpan>1,o=e.rowSpan>1,s=t.rowIndex===r.rowPos&&e.cellIndex===r.colPos;a(t.rowIndex,n,t,e,o,i,!1);var l=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(l>1)for(var u=1;u<l;u++){var d=t.rowIndex+u;h(d,n,e,s),a(d,n,t,e,!0,i,!0)}var f=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(f>1)for(var p=1;p<f;p++){var m=c(t.rowIndex,n+p);h(t.rowIndex,m,e,s),a(t.rowIndex,m,t,e,o,!0,!0)}}function h(t,e,n,i){t===r.rowPos&&r.colPos>=n.cellIndex&&n.cellIndex<=e&&!i&&r.colPos++}function d(t){switch(e){case Yt.where.Column:if(t.isColSpan)return Yt.resultAction.SubtractSpanCount;break;case Yt.where.Row:if(!t.isVirtual&&t.isRowSpan)return Yt.resultAction.AddCell;if(t.isRowSpan)return Yt.resultAction.SubtractSpanCount}return Yt.resultAction.RemoveCell}function f(t){switch(e){case Yt.where.Column:if(t.isColSpan)return Yt.resultAction.SumSpanCount;if(t.isRowSpan&&t.isVirtual)return Yt.resultAction.Ignore;break;case Yt.where.Row:if(t.isRowSpan)return Yt.resultAction.SumSpanCount;if(t.isColSpan&&t.isVirtual)return Yt.resultAction.Ignore}return Yt.resultAction.AddCell}this.getActionList=function(){for(var t=e===Yt.where.Row?r.rowPos:-1,i=e===Yt.where.Column?r.colPos:-1,a=0,c=!0;c;){var u=t>=0?t:a,h=i>=0?i:a,p=o[u];if(!p)return c=!1,s;var m=p[h];if(!m)return c=!1,s;var g=Yt.resultAction.Ignore;switch(n){case Yt.requestAction.Add:g=f(m);break;case Yt.requestAction.Delete:g=d(m)}s.push(l(m,g,u,h)),a++}return s},t&&t.tagName&&("td"===t.tagName.toLowerCase()||"th"===t.tagName.toLowerCase())?(r.colPos=t.cellIndex,t.parentElement&&t.parentElement.tagName&&"tr"===t.parentElement.tagName.toLowerCase()?r.rowPos=t.parentElement.rowIndex:console.error("Impossible to identify start Row point.",t)):console.error("Impossible to identify start Cell point.",t),function(){for(var t=i.rows,e=0;e<t.length;e++)for(var n=t[e].cells,r=0;r<n.length;r++)u(t[e],n[r])}()};Yt.where={Row:0,Column:1},Yt.requestAction={Add:0,Delete:1},Yt.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Ht,Wt=function(){function t(){}return t.prototype.tab=function(t,e){var n=At.ancestor(t.commonAncestor(),At.isCell),i=At.ancestor(n,At.isTable),r=At.listDescendant(i,At.isCell),o=B[e?"prev":"next"](r,n);o&&Pt.create(o,0).select()},t.prototype.addRow=function(t,e){for(var n=At.ancestor(t.commonAncestor(),At.isCell),r=i(n).closest("tr"),o=this.recoverAttributes(r),s=i("<tr"+o+"></tr>"),a=new Yt(n,Yt.where.Row,Yt.requestAction.Add,i(r).closest("table")[0]).getActionList(),l=0;l<a.length;l++){var c=a[l],u=this.recoverAttributes(c.baseCell);switch(c.action){case Yt.resultAction.AddCell:s.append("<td"+u+">"+At.blank+"</td>");break;case Yt.resultAction.SumSpanCount:if("top"===e&&(c.baseCell.parent?c.baseCell.closest("tr").rowIndex:0)<=r[0].rowIndex){var h=i("<div></div>").append(i("<td"+u+">"+At.blank+"</td>").removeAttr("rowspan")).html();s.append(h);break}var d=parseInt(c.baseCell.rowSpan,10);d++,c.baseCell.setAttribute("rowSpan",d)}}if("top"===e)r.before(s);else{if(n.rowSpan>1){var f=r[0].rowIndex+(n.rowSpan-2);return void i(i(r).parent().find("tr")[f]).after(i(s))}r.after(s)}},t.prototype.addCol=function(t,e){var n=At.ancestor(t.commonAncestor(),At.isCell),r=i(n).closest("tr");i(r).siblings().push(r);for(var o=new Yt(n,Yt.where.Column,Yt.requestAction.Add,i(r).closest("table")[0]).getActionList(),s=0;s<o.length;s++){var a=o[s],l=this.recoverAttributes(a.baseCell);switch(a.action){case Yt.resultAction.AddCell:"right"===e?i(a.baseCell).after("<td"+l+">"+At.blank+"</td>"):i(a.baseCell).before("<td"+l+">"+At.blank+"</td>");break;case Yt.resultAction.SumSpanCount:if("right"===e){var c=parseInt(a.baseCell.colSpan,10);c++,a.baseCell.setAttribute("colSpan",c)}else i(a.baseCell).before("<td"+l+">"+At.blank+"</td>")}}},t.prototype.recoverAttributes=function(t){var e="";if(!t)return e;for(var n=t.attributes||[],i=0;i<n.length;i++)"id"!==n[i].name.toLowerCase()&&n[i].specified&&(e+=" "+n[i].name+"='"+n[i].value+"'");return e},t.prototype.deleteRow=function(t){for(var e=At.ancestor(t.commonAncestor(),At.isCell),n=i(e).closest("tr"),r=n.children("td, th").index(i(e)),o=n[0].rowIndex,s=new Yt(e,Yt.where.Row,Yt.requestAction.Delete,i(n).closest("table")[0]).getActionList(),a=0;a<s.length;a++)if(s[a]){var l=s[a].baseCell,c=s[a].virtualTable,u=l.rowSpan&&l.rowSpan>1,h=u?parseInt(l.rowSpan,10):0;switch(s[a].action){case Yt.resultAction.Ignore:continue;case Yt.resultAction.AddCell:var d=n.next("tr")[0];if(!d)continue;var f=n[0].cells[r];u&&(h>2?(h--,d.insertBefore(f,d.cells[r]),d.cells[r].setAttribute("rowSpan",h),d.cells[r].innerHTML=""):2===h&&(d.insertBefore(f,d.cells[r]),d.cells[r].removeAttribute("rowSpan"),d.cells[r].innerHTML=""));continue;case Yt.resultAction.SubtractSpanCount:u&&(h>2?(h--,l.setAttribute("rowSpan",h),c.rowIndex!==o&&l.cellIndex===r&&(l.innerHTML="")):2===h&&(l.removeAttribute("rowSpan"),c.rowIndex!==o&&l.cellIndex===r&&(l.innerHTML="")));continue;case Yt.resultAction.RemoveCell:continue}}n.remove()},t.prototype.deleteCol=function(t){for(var e=At.ancestor(t.commonAncestor(),At.isCell),n=i(e).closest("tr"),r=n.children("td, th").index(i(e)),o=new Yt(e,Yt.where.Column,Yt.requestAction.Delete,i(n).closest("table")[0]).getActionList(),s=0;s<o.length;s++)if(o[s])switch(o[s].action){case Yt.resultAction.Ignore:continue;case Yt.resultAction.SubtractSpanCount:var a=o[s].baseCell;if(a.colSpan&&a.colSpan>1){var l=a.colSpan?parseInt(a.colSpan,10):0;l>2?(l--,a.setAttribute("colSpan",l),a.cellIndex===r&&(a.innerHTML="")):2===l&&(a.removeAttribute("colSpan"),a.cellIndex===r&&(a.innerHTML=""))}continue;case Yt.resultAction.RemoveCell:At.remove(o[s].baseCell,!0);continue}},t.prototype.createTable=function(t,e,n){for(var r,o=[],s=0;s<t;s++)o.push("<td>"+At.blank+"</td>");r=o.join("");for(var a,l=[],c=0;c<e;c++)l.push("<tr>"+r+"</tr>");a=l.join("");var u=i("<table>"+a+"</table>");return n&&n.tableClassName&&u.addClass(n.tableClassName),u[0]},t.prototype.deleteTable=function(t){var e=At.ancestor(t.commonAncestor(),At.isCell);i(e).closest("table").remove()},t}(),zt=function(){function t(t){var e=this;this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new Rt,this.table=new Wt,this.typing=new Ft(t),this.bullet=new Bt,this.history=new jt(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var n=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],r=0,o=n.length;r<o;r++)this[n[r]]=function(t){return function(n){e.beforeCommand(),document.execCommand(t,!1,n),e.afterCommand(!0)}}(n[r]),this.context.memo("help."+n[r],this.lang.help[n[r]]);for(this.fontName=this.wrapCommand(function(t){return e.fontStyling("font-family","'"+t+"'")}),this.fontSize=this.wrapCommand(function(t){return e.fontStyling("font-size",t+"px")}),r=1;r<=6;r++)this["formatH"+r]=function(t){return function(){e.formatBlock("H"+t)}}(r),this.context.memo("help.formatH"+r,this.lang.help["formatH"+r]);this.insertParagraph=this.wrapCommand(function(){e.typing.insertParagraph(e.editable)}),this.insertOrderedList=this.wrapCommand(function(){e.bullet.insertOrderedList(e.editable)}),this.insertUnorderedList=this.wrapCommand(function(){e.bullet.insertUnorderedList(e.editable)}),this.indent=this.wrapCommand(function(){e.bullet.indent(e.editable)}),this.outdent=this.wrapCommand(function(){e.bullet.outdent(e.editable)}),this.insertNode=this.wrapCommand(function(t){e.isLimited(i(t).text().length)||(e.getLastRange().insertNode(t),Pt.createFromNodeAfter(t).select(),e.setLastRange())}),this.insertText=this.wrapCommand(function(t){if(!e.isLimited(t.length)){var n=e.getLastRange().insertNode(At.createText(t));Pt.create(n,At.nodeLength(n)).select(),e.setLastRange()}}),this.pasteHTML=this.wrapCommand(function(t){if(!e.isLimited(t.length)){t=e.context.invoke("codeview.purify",t);var n=e.getLastRange().pasteHTML(t);Pt.createFromNodeAfter(B.last(n)).select(),e.setLastRange()}}),this.formatBlock=this.wrapCommand(function(t,n){var i=e.options.callbacks.onApplyCustomStyle;i?i.call(e,n,e.context,e.onFormatBlock):e.onFormatBlock(t,n)}),this.insertHorizontalRule=this.wrapCommand(function(){var t=e.getLastRange().insertNode(At.create("HR"));t.nextSibling&&(Pt.create(t.nextSibling,0).normalize().select(),e.setLastRange())}),this.lineHeight=this.wrapCommand(function(t){e.style.stylePara(e.getLastRange(),{lineHeight:t})}),this.createLink=this.wrapCommand(function(t){var n=t.url,r=t.text,o=t.isNewWindow,s=t.range||e.getLastRange(),a=r.length-s.toString().length;if(!(a>0&&e.isLimited(a))){var l=s.toString()!==r;"string"==typeof n&&(n=n.trim()),n=e.options.onCreateLink?e.options.onCreateLink(n):/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(n)?n:"http://"+n;var c=[];if(l){var u=(s=s.deleteContents()).insertNode(i("<A>"+r+"</A>")[0]);c.push(u)}else c=e.style.styleNodes(s,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});i.each(c,function(t,e){i(e).attr("href",n),o?i(e).attr("target","_blank"):i(e).removeAttr("target")});var h=Pt.createFromNodeBefore(B.head(c)).getStartPoint(),d=Pt.createFromNodeAfter(B.last(c)).getEndPoint();Pt.create(h.node,h.offset,d.node,d.offset).select(),e.setLastRange()}}),this.color=this.wrapCommand(function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)}),this.foreColor=this.wrapCommand(function(t){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,t)}),this.insertTable=this.wrapCommand(function(t){var n=t.split("x");e.getLastRange().deleteContents().insertNode(e.table.createTable(n[0],n[1],e.options))}),this.removeMedia=this.wrapCommand(function(){var t=i(e.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=i(e.restoreTarget()).detach(),e.context.triggerEvent("media.delete",t,e.$editable)}),this.floatMe=this.wrapCommand(function(t){var n=i(e.restoreTarget());n.toggleClass("note-float-left","left"===t),n.toggleClass("note-float-right","right"===t),n.css("float","none"===t?"":t)}),this.resize=this.wrapCommand(function(t){var n=i(e.restoreTarget());0===(t=parseFloat(t))?n.css("width",""):n.css({width:100*t+"%",height:""})})}return t.prototype.initialize=function(){var t=this;this.$editable.on("keydown",function(e){if(e.keyCode===Nt.code.ENTER&&t.context.triggerEvent("enter",e),t.context.triggerEvent("keydown",e),e.isDefaultPrevented()||(t.options.shortcuts?t.handleKeyMap(e):t.preventDefaultEditableShortCuts(e)),t.isLimited(1,e))return!1}).on("keyup",function(e){t.setLastRange(),t.context.triggerEvent("keyup",e)}).on("focus",function(e){t.setLastRange(),t.context.triggerEvent("focus",e)}).on("blur",function(e){t.context.triggerEvent("blur",e)}).on("mousedown",function(e){t.context.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.setLastRange(),t.context.triggerEvent("mouseup",e)}).on("scroll",function(e){t.context.triggerEvent("scroll",e)}).on("paste",function(e){t.setLastRange(),t.context.triggerEvent("paste",e)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.html(At.html(this.$note)||At.emptyPara),this.$editable.on(D.inputEventName,P.debounce(function(){t.context.triggerEvent("change",t.$editable.html(),t.$editable)},10)),this.$editor.on("focusin",function(e){t.context.triggerEvent("focusin",e)}).on("focusout",function(e){t.context.triggerEvent("focusout",e)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo(),this.setLastRange()},t.prototype.destroy=function(){this.$editable.off()},t.prototype.handleKeyMap=function(t){var e=this.options.keyMap[D.isMac?"mac":"pc"],n=[];t.metaKey&&n.push("CMD"),t.ctrlKey&&!t.altKey&&n.push("CTRL"),t.shiftKey&&n.push("SHIFT");var i=Nt.nameFromCode[t.keyCode];i&&n.push(i);var r=e[n.join("+")];r?!1!==this.context.invoke(r)&&t.preventDefault():Nt.isEdit(t.keyCode)&&this.afterCommand()},t.prototype.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&B.contains([66,73,85],t.keyCode)&&t.preventDefault()},t.prototype.isLimited=function(t,e){return t=t||0,(void 0===e||!(Nt.isMove(e.keyCode)||e.ctrlKey||e.metaKey||B.contains([Nt.code.BACKSPACE,Nt.code.DELETE],e.keyCode)))&&this.options.maxTextLength>0&&this.$editable.text().length+t>=this.options.maxTextLength},t.prototype.createRange=function(){return this.focus(),this.setLastRange(),this.getLastRange()},t.prototype.setLastRange=function(){this.lastRange=Pt.create(this.editable)},t.prototype.getLastRange=function(){return this.lastRange||this.setLastRange(),this.lastRange},t.prototype.saveRange=function(t){t&&this.getLastRange().collapse().select()},t.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},t.prototype.saveTarget=function(t){this.$editable.data("target",t)},t.prototype.clearTarget=function(){this.$editable.removeData("target")},t.prototype.restoreTarget=function(){return this.$editable.data("target")},t.prototype.currentStyle=function(){var t=Pt.create();return t&&(t=t.normalize()),t?this.style.current(t):this.style.fromNode(this.$editable)},t.prototype.styleFromNode=function(t){return this.style.fromNode(t)},t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},t.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},t.prototype.afterCommand=function(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerEvent("change",this.$editable.html(),this.$editable)},t.prototype.tab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}},t.prototype.untab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t,!0);else if(0===this.options.tabSize)return!1},t.prototype.wrapCommand=function(t){return function(){this.beforeCommand(),t.apply(this,arguments),this.afterCommand()}},t.prototype.insertImage=function(t,e){var n,r=this;return(n=t,i.Deferred(function(t){var e=i("<img>");e.one("load",function(){e.off("error abort"),t.resolve(e)}).one("error abort",function(){e.off("load").detach(),t.reject(e)}).css({display:"none"}).appendTo(document.body).attr("src",n)}).promise()).then(function(t){r.beforeCommand(),"function"==typeof e?e(t):("string"==typeof e&&t.attr("data-filename",e),t.css("width",Math.min(r.$editable.width(),t.width()))),t.show(),Pt.create(r.editable).insertNode(t[0]),Pt.createFromNodeAfter(t[0]).select(),r.setLastRange(),r.afterCommand()}).fail(function(t){r.context.triggerEvent("image.upload.error",t)})},t.prototype.insertImagesAsDataURL=function(t){var e=this;i.each(t,function(t,n){var r=n.name;e.options.maximumImageFileSize&&e.options.maximumImageFileSize<n.size?e.context.triggerEvent("image.upload.error",e.lang.image.maximumFileSizeError):function(t){return i.Deferred(function(e){i.extend(new FileReader,{onload:function(t){var n=t.target.result;e.resolve(n)},onerror:function(t){e.reject(t)}}).readAsDataURL(t)}).promise()}(n).then(function(t){return e.insertImage(t,r)}).fail(function(){e.context.triggerEvent("image.upload.error")})})},t.prototype.insertImagesOrCallback=function(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImagesAsDataURL(t)},t.prototype.getSelectedText=function(){var t=this.getLastRange();return t.isOnAnchor()&&(t=Pt.createFromNode(At.ancestor(t.sc,At.isAnchor))),t.toString()},t.prototype.onFormatBlock=function(t,e){if(document.execCommand("FormatBlock",!1,D.isMSIE?"<"+t+">":t),e&&e.length&&(e[0].tagName.toUpperCase()!==t.toUpperCase()&&(e=e.find(t)),e&&e.length)){var n=e[0].className||"";if(n){var r=this.createRange();i([r.sc,r.ec]).closest(t).addClass(n)}}},t.prototype.formatPara=function(){this.formatBlock("P")},t.prototype.fontStyling=function(t,e){var n=this.getLastRange();if(n){var r=this.style.styleNodes(n);if(i(r).css(t,e),n.isCollapsed()){var o=B.head(r);o&&!At.nodeLength(o)&&(o.innerHTML=At.ZERO_WIDTH_NBSP_CHAR,Pt.createFromNodeAfter(o.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",o))}}},t.prototype.unlink=function(){var t=this.getLastRange();if(t.isOnAnchor()){var e=At.ancestor(t.sc,At.isAnchor);(t=Pt.createFromNode(e)).select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},t.prototype.getLinkInfo=function(){var t=this.getLastRange().expand(At.isAnchor),e=i(B.head(t.nodes(At.isAnchor))),n={range:t,text:t.toString(),url:e.length?e.attr("href"):""};return e.length&&(n.isNewWindow="_blank"===e.attr("target")),n},t.prototype.addRow=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addRow(e,t),this.afterCommand())},t.prototype.addCol=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addCol(e,t),this.afterCommand())},t.prototype.deleteRow=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())},t.prototype.deleteCol=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())},t.prototype.deleteTable=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())},t.prototype.resizeTo=function(t,e,n){var i;if(n){var r=t.y/t.x,o=e.data("ratio");i={width:o>r?t.x:t.y/o,height:o>r?t.x*o:t.y}}else i={width:t.x,height:t.y};e.css(i)},t.prototype.hasFocus=function(){return this.$editable.is(":focus")},t.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},t.prototype.isEmpty=function(){return At.isEmpty(this.$editable[0])||At.emptyPara===this.$editable.html()},t.prototype.empty=function(){this.context.invoke("code",At.emptyPara)},t.prototype.normalizeContent=function(){this.$editable[0].normalize()},t}(),Ut=function(){function t(t){this.context=t,this.$editable=t.layoutInfo.editable}return t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var n=e.items.length>1?e.items[1]:B.head(e.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),this.context.invoke("editor.afterCommand")}},t}(),Vt=function(){function t(t){this.context=t,this.$eventListener=i(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=i(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return t.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(t){t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var t=this,e=i(),n=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(i){var r=t.context.invoke("codeview.isActivated"),o=t.$editor.width()>0&&t.$editor.height()>0;r||e.length||!o||(t.$editor.addClass("dragover"),t.$dropzone.width(t.$editor.width()),t.$dropzone.height(t.$editor.height()),n.text(t.lang.image.dragImageHere)),e=e.add(i.target)},this.documentEventHandlers.onDragleave=function(n){(e=e.not(n.target)).length||t.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){e=i(),t.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover"),n.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover"),n.text(t.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(e){var n=e.originalEvent.dataTransfer;e.preventDefault(),n&&n.files&&n.files.length?(t.$editable.focus(),t.context.invoke("editor.insertImagesOrCallback",n.files)):i.each(n.types,function(e,r){var o=n.getData(r);r.toLowerCase().indexOf("text")>-1?t.context.invoke("editor.pasteHTML",o):i(o).each(function(e,n){t.context.invoke("editor.insertNode",n)})})}).on("dragover",!1)},t.prototype.destroy=function(){var t=this;Object.keys(this.documentEventHandlers).forEach(function(e){t.$eventListener.off(e.substr(2).toLowerCase(),t.documentEventHandlers[e])}),this.documentEventHandlers={}},t}();D.hasCodeMirror&&(Ht=window.CodeMirror);var Gt=function(){function t(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options}return t.prototype.sync=function(){this.isActivated()&&D.hasCodeMirror&&this.$codable.data("cmEditor").save()},t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},t.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},t.prototype.purify=function(t){if(this.options.codeviewFilter&&(t=t.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var e=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);t=t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(t){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(t))return"";for(var n=0,i=e;n<i.length;n++){var r=i[n];if(new RegExp('src="(https?:)?//'+r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(t))return t}return""})}return t},t.prototype.activate=function(){var t=this;if(this.$codable.val(At.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),D.hasCodeMirror){var e=Ht.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Ht.TernServer(this.options.codemirror.tern);e.ternServer=n,e.on("cursorActivity",function(t){n.updateArgHints(t)})}e.on("blur",function(n){t.context.triggerEvent("blur.codeview",e.getValue(),n)}),e.on("change",function(n){t.context.triggerEvent("change.codeview",e.getValue(),e)}),e.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",e)}else this.$codable.on("blur",function(e){t.context.triggerEvent("blur.codeview",t.$codable.val(),e)}),this.$codable.on("input",function(e){t.context.triggerEvent("change.codeview",t.$codable.val(),t.$codable)})},t.prototype.deactivate=function(){if(D.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue()),t.toTextArea()}var e=this.purify(At.value(this.$codable,this.options.prettifyHtml)||At.emptyPara),n=this.$editable.html()!==e;this.$editable.html(e),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),n&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},t.prototype.destroy=function(){this.isActivated()&&this.deactivate()},t}(),qt=function(){function t(t){this.$document=i(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.options=t.options}return t.prototype.initialize=function(){var t=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(e){e.preventDefault(),e.stopPropagation();var n=t.$editable.offset().top-t.$document.scrollTop(),i=function(e){var i=e.clientY-(n+24);i=t.options.minheight>0?Math.max(i,t.options.minheight):i,i=t.options.maxHeight>0?Math.min(i,t.options.maxHeight):i,t.$editable.height(i)};t.$document.on("mousemove",i).one("mouseup",function(){t.$document.off("mousemove",i)})})},t.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},t}(),Xt=function(){function t(t){var e=this;this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=i(window),this.$scrollbar=i("html, body"),this.onResize=function(){e.resizeTo({h:e.$window.height()-e.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(t){this.$editable.css("height",t.h),this.$codable.css("height",t.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,t.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),Kt=function(){function t(t){var e=this;this.context=t,this.$document=i(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(t,n){e.update(n.target,n)&&n.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){e.update()},"summernote.disable":function(){e.hide()},"summernote.codeview.toggled":function(){e.update()}}}return t.prototype.initialize=function(){var t=this;this.$handle=i(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(e){if(At.isControlSizing(e.target)){e.preventDefault(),e.stopPropagation();var n=t.$handle.find(".note-control-selection").data("target"),i=n.offset(),r=t.$document.scrollTop(),o=function(e){t.context.invoke("editor.resizeTo",{x:e.clientX-i.left,y:e.clientY-(i.top-r)},n,!e.shiftKey),t.update(n[0])};t.$document.on("mousemove",o).one("mouseup",function(e){e.preventDefault(),t.$document.off("mousemove",o),t.context.invoke("editor.afterCommand")}),n.data("ratio")||n.data("ratio",n.height()/n.width())}}),this.$handle.on("wheel",function(e){e.preventDefault(),t.update()})},t.prototype.destroy=function(){this.$handle.remove()},t.prototype.update=function(t,e){if(this.context.isDisabled())return!1;var n=At.isImg(t),r=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",t,e),n){var o=i(t),s=o.position(),a={left:s.left+parseInt(o.css("marginLeft"),10),top:s.top+parseInt(o.css("marginTop"),10)},l={w:o.outerWidth(!1),h:o.outerHeight(!1)};r.css({display:"block",left:a.left,top:a.top,width:l.w,height:l.h}).data("target",o);var c=new Image;c.src=o.attr("src");var u=l.w+"x"+l.h+" ("+this.lang.image.original+": "+c.width+"x"+c.height+")";r.find(".note-control-selection-info").text(u),this.context.invoke("editor.saveTarget",t)}else this.hide();return n},t.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},t}(),Jt=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,Zt=function(){function t(t){var e=this;this.context=t,this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString(),e=t.match(Jt);if(e&&(e[1]||e[2])){var n=e[1]?t:"http://"+t,r=i("<a />").html(t).attr("href",n)[0];this.context.options.linkTargetBlank&&i(r).attr("target","_blank"),this.lastWordRange.insertNode(r),this.lastWordRange=null,this.context.invoke("editor.focus")}}},t.prototype.handleKeydown=function(t){if(B.contains([Nt.code.ENTER,Nt.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},t.prototype.handleKeyup=function(t){B.contains([Nt.code.ENTER,Nt.code.SPACE],t.keyCode)&&this.replace()},t}(),Qt=function(){function t(t){var e=this;this.$note=t.layoutInfo.note,this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}return t.prototype.shouldInitialize=function(){return At.isTextarea(this.$note[0])},t}(),te=function(){function t(t){var e=this;this.context=t,this.options=t.options.replace||{},this.keys=[Nt.code.ENTER,Nt.code.SPACE,Nt.code.PERIOD,Nt.code.COMMA,Nt.code.SEMICOLON,Nt.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)}}}return t.prototype.shouldInitialize=function(){return!!this.options.match},t.prototype.initialize=function(){this.lastWord=null},t.prototype.destroy=function(){this.lastWord=null},t.prototype.replace=function(){if(this.lastWord){var t=this,n=this.lastWord.toString();this.options.match(n,function(n){if(n){var i="";if("string"==typeof n?i=At.createText(n):n instanceof e?i=n[0]:n instanceof Node&&(i=n),!i)return;t.lastWord.insertNode(i),t.lastWord=null,t.context.invoke("editor.focus")}})}},t.prototype.handleKeydown=function(t){if(this.previousKeydownCode&&B.contains(this.keys,this.previousKeydownCode))this.previousKeydownCode=t.keyCode;else{if(B.contains(this.keys,t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWord=e}this.previousKeydownCode=t.keyCode}},t.prototype.handleKeyup=function(t){B.contains(this.keys,t.keyCode)&&this.replace()},t}(),ee=function(){function t(t){var e=this;this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=i('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)},t}(),ne=function(){function t(t){this.ui=i.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=P.invertObject(this.options.keyMap[D.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];return this.options.shortcuts&&e?(D.isMac&&(e=e.replace("CMD","").replace("SHIFT",""))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},t.prototype.button=function(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)},t.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(t){return this.fontInstalledMap.hasOwnProperty(t)||(this.fontInstalledMap[t]=D.isFontInstalled(t)||B.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]},t.prototype.isFontDeservedToAdd=function(t){return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===["sans-serif","serif","monospace","cursive","fantasy"].indexOf(t)},t.prototype.colorPalette=function(t,e,n,r){var o=this;return this.ui.buttonGroup({className:"note-color "+t,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:e,click:function(t){var e=i(t.currentTarget);n&&r?o.context.invoke("editor.color",{backColor:e.attr("data-backColor"),foreColor:e.attr("data-foreColor")}):n?o.context.invoke("editor.color",{backColor:e.attr("data-backColor")}):r&&o.context.invoke("editor.color",{foreColor:e.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");n&&(e.css("background-color",o.options.colorButton.backColor),t.attr("data-backColor",o.options.colorButton.backColor)),r?(e.css("color",o.options.colorButton.foreColor),t.attr("data-foreColor",o.options.colorButton.foreColor)):e.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(n?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(r?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(t){t.find(".note-holder").each(function(t,e){var n=i(e);n.append(o.ui.palette({colors:o.options.colors,colorsName:o.options.colorsName,eventName:n.data("event"),container:o.options.container,tooltip:o.options.tooltip}).render())});var e=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];t.find(".note-holder-custom").each(function(t,n){var r=i(n);r.append(o.ui.palette({colors:e,colorsName:e,eventName:r.data("event"),container:o.options.container,tooltip:o.options.tooltip}).render())}),t.find("input[type=color]").each(function(e,n){i(n).change(function(){var e=t.find("#"+i(this).data("event")).find(".note-color-btn").first(),n=this.value.toUpperCase();e.css("background-color",n).attr("aria-label",n).attr("data-value",n).attr("data-original-title",n),e.click()})})},click:function(e){e.stopPropagation();var n=i("."+t),r=i(e.target),s=r.data("event"),a=r.attr("data-value");if("openPalette"===s){var l=n.find("#"+a),c=i(n.find("#"+l.data("event")).find(".note-color-row")[0]),u=c.find(".note-color-btn").last().detach(),h=l.val();u.css("background-color",h).attr("aria-label",h).attr("data-value",h).attr("data-original-title",h),c.prepend(u),l.click()}else if(B.contains(["backColor","foreColor"],s)){var d="backColor"===s?"background-color":"color",f=r.closest(".note-color").find(".note-recent-color"),p=r.closest(".note-color").find(".note-current-color-button");f.css(d,a),p.attr("data-"+s,a),o.context.invoke("editor."+s,a)}}})]}).render()},t.prototype.addToolbarButtons=function(){var t=this;this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,title:t.lang.style.style,template:function(e){"string"==typeof e&&(e={tag:e,title:t.lang.style.hasOwnProperty(e)?t.lang.style[e]:e});var n=e.tag,i=e.title;return"<"+n+(e.style?' style="'+e.style+'" ':"")+(e.className?' class="'+e.className+'"':"")+">"+i+"</"+n+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var e=function(e,i){var r=n.options.styleTags[e];n.context.memo("button.style."+r,function(){return t.button({className:"note-btn-style-"+r,contents:'<div data-value="'+r+'">'+r.toUpperCase()+"</div>",tooltip:t.lang.style[r],click:t.context.createInvokeHandler("editor.formatBlock")}).render()})},n=this,r=0,o=this.options.styleTags.length;r<o;r++)e(r);this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var e=t.context.invoke("editor.currentStyle");return i.each(e["font-family"].split(","),function(e,n){n=n.trim().replace(/['"]+/g,""),t.isFontDeservedToAdd(n)&&-1===t.options.fontNames.indexOf(n)&&t.options.fontNames.push(n)}),t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),title:t.lang.font.name,template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,title:t.lang.font.size,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return t.colorPalette("note-color-all",t.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return t.colorPalette("note-color-fore",t.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return t.colorPalette("note-color-back",t.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var s=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),a=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),c=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),u=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),h=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",P.invoke(s,"render")),this.context.memo("button.justifyCenter",P.invoke(a,"render")),this.context.memo("button.justifyRight",P.invoke(l,"render")),this.context.memo("button.justifyFull",P.invoke(c,"render")),this.context.memo("button.outdent",P.invoke(u,"render")),this.context.memo("button.indent",P.invoke(h,"render")),this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[s,a,l,c]}),t.ui.buttonGroup({className:"note-list",children:[u,h]})])]).render()}),this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",title:t.lang.font.height,click:t.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({title:t.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){e.find(".note-dimension-picker-mousecatcher").css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()}),this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.lang.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.lang.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.lang.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.resizeFull",function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.resizeHalf",function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.resizeQuarter",function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.resizeNone",function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.resizeNone,click:t.context.createInvokeHandler("editor.resize","0")}).render()}),this.context.memo("button.floatLeft",function(){return t.button({contents:t.ui.icon(t.options.icons.floatLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return t.button({contents:t.ui.icon(t.options.icons.floatRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,e){for(var n=0,i=e.length;n<i;n++){for(var r=e[n],o=Array.isArray(r)?r[0]:r,s=Array.isArray(r)?1===r.length?[r[0]]:r[1]:[r],a=this.ui.buttonGroup({className:"note-"+o}).render(),l=0,c=s.length;l<c;l++){var u=this.context.memo("button."+s[l]);u&&a.append("function"==typeof u?u():u)}a.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var e=this,n=t||this.$toolbar,r=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(n,{".note-btn-bold":function(){return"bold"===r["font-bold"]},".note-btn-italic":function(){return"italic"===r["font-italic"]},".note-btn-underline":function(){return"underline"===r["font-underline"]},".note-btn-subscript":function(){return"subscript"===r["font-subscript"]},".note-btn-superscript":function(){return"superscript"===r["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===r["font-strikethrough"]}}),r["font-family"]){var o=r["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),s=B.find(o,this.isFontInstalled.bind(this));n.find(".dropdown-fontname a").each(function(t,e){var n=i(e),r=n.data("value")+""==s+"";n.toggleClass("checked",r)}),n.find(".note-current-fontname").text(s).css("font-family",s)}if(r["font-size"]){var a=r["font-size"];n.find(".dropdown-fontsize a").each(function(t,e){var n=i(e),r=n.data("value")+""==a+"";n.toggleClass("checked",r)}),n.find(".note-current-fontsize").text(a)}if(r["line-height"]){var l=r["line-height"];n.find(".dropdown-line-height li a").each(function(t,n){var r=i(n).data("value")+""==l+"";e.className=r?"checked":""})}},t.prototype.updateBtnStates=function(t,e){var n=this;i.each(e,function(e,i){n.ui.toggleBtnActive(t.find(e),i())})},t.prototype.tableMoveHandler=function(t){var e,n=i(t.target.parentNode),r=n.next(),o=n.find(".note-dimension-picker-mousecatcher"),s=n.find(".note-dimension-picker-highlighted"),a=n.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var l=i(t.target).offset();e={x:t.pageX-l.left,y:t.pageY-l.top}}else e={x:t.offsetX,y:t.offsetY};var c=Math.ceil(e.x/18)||1,u=Math.ceil(e.y/18)||1;s.css({width:c+"em",height:u+"em"}),o.data("value",c+"x"+u),c>3&&c<this.options.insertTableMaxSize.col&&a.css({width:c+1+"em"}),u>3&&u<this.options.insertTableMaxSize.row&&a.css({height:u+1+"em"}),r.html(c+" x "+u)},t}(),ie=function(){function t(t){this.context=t,this.$window=i(window),this.$document=i(document),this.ui=i.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$statusbar=t.layoutInfo.statusbar,this.options=t.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){t.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var t=this.$editor.outerHeight(),e=this.$editor.width(),n=this.$toolbar.height(),r=this.$statusbar.height(),o=0;this.options.otherStaticBar&&(o=i(this.options.otherStaticBar).outerHeight());var s=this.$document.scrollTop(),a=this.$editor.offset().top,l=a-o,c=a+t-o-n-r;!this.isFollowing&&s>l&&s<c-n?(this.isFollowing=!0,this.$toolbar.css({position:"fixed",top:o,width:e}),this.$editable.css({marginTop:this.$toolbar.height()+5})):this.isFollowing&&(s<l||s>c)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%"}),this.$editable.css({marginTop:""}))},t.prototype.changeContainer=function(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.followScroll()},t.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)},t.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()},t.prototype.activate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!0)},t.prototype.deactivate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!1)},t}(),re=function(){function t(t){this.context=t,this.ui=i.summernote.ui,this.$body=i(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":i("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),n='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>';this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Nt.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.toggleLinkBtn=function(t,e,n){this.ui.toggleBtn(t,e.val()&&n.val())},t.prototype.showLinkDialog=function(t){var e=this;return i.Deferred(function(n){var i=e.$dialog.find(".note-link-text"),r=e.$dialog.find(".note-link-url"),o=e.$dialog.find(".note-link-btn"),s=e.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown"),!t.url&&P.isValidUrl(t.text)&&(t.url=t.text),i.on("input paste propertychange",function(){t.text=i.val(),e.toggleLinkBtn(o,i,r)}).val(t.text),r.on("input paste propertychange",function(){t.text||i.val(r.val()),e.toggleLinkBtn(o,i,r)}).val(t.url),D.isSupportTouch||r.trigger("focus"),e.toggleLinkBtn(o,i,r),e.bindEnterKey(r,o),e.bindEnterKey(i,o);var a=void 0!==t.isNewWindow?t.isNewWindow:e.context.options.linkTargetBlank;s.prop("checked",a),o.one("click",function(o){o.preventDefault(),n.resolve({range:t.range,url:r.val(),text:i.val(),isNewWindow:s.is(":checked")}),e.ui.hideDialog(e.$dialog)})}),e.ui.onDialogHidden(e.$dialog,function(){i.off(),r.off(),o.off(),"pending"===n.state()&&n.reject()}),e.ui.showDialog(e.$dialog)}).promise()},t.prototype.show=function(){var t=this,e=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(e).then(function(e){t.context.invoke("editor.restoreRange"),t.context.invoke("editor.createLink",e)}).fail(function(){t.context.invoke("editor.restoreRange")})},t}(),oe=function(){function t(t){var e=this;this.context=t,this.ui=i.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.disable summernote.dialog.shown":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return!B.isEmpty(this.options.popover.link)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var t=this.context.invoke("editor.getLastRange");if(t.isCollapsed()&&t.isOnAnchor()){var e=At.ancestor(t.sc,At.isAnchor),n=i(e).attr("href");this.$popover.find("a").attr("href",n).html(n);var r=At.posFromPlaceholder(e);this.$popover.css({display:"block",left:r.left,top:r.top})}else this.hide()}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),se=function(){function t(t){this.context=t,this.ui=i.summernote.ui,this.$body=i(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),i=1*(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";e="<small>"+this.lang.image.maximumFileSize+" : "+i+"</small>"}var r=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input form-control-file note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),o='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:r,footer:o}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Nt.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange"),"string"==typeof e?t.options.callbacks.onImageLinkInsert?t.context.triggerEvent("image.link.insert",e):t.context.invoke("editor.insertImage",e):t.context.invoke("editor.insertImagesOrCallback",e)}).fail(function(){t.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var t=this;return i.Deferred(function(e){var n=t.$dialog.find(".note-image-input"),i=t.$dialog.find(".note-image-url"),r=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),n.replaceWith(n.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val("")),i.on("input paste propertychange",function(){t.ui.toggleBtn(r,i.val())}).val(""),D.isSupportTouch||i.trigger("focus"),r.click(function(t){t.preventDefault(),e.resolve(i.val())}),t.bindEnterKey(i,r)}),t.ui.onDialogHidden(t.$dialog,function(){n.off(),i.off(),r.off(),"pending"===e.state()&&e.reject()}),t.ui.showDialog(t.$dialog)})},t}(),ae=function(){function t(t){var e=this;this.context=t,this.ui=i.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return!B.isEmpty(this.options.popover.image)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(t,e){if(At.isImg(t)){var n=At.posFromPlaceholder(t),i=At.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?e.pageX-20:n.left,top:this.options.popatmouse?e.pageY:Math.min(n.top,i.top)})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),le=function(){function t(t){var e=this;this.context=t,this.ui=i.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":function(t,n){e.update(n.target)},"summernote.keyup summernote.scroll summernote.change":function(){e.update()},"summernote.disable":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return!B.isEmpty(this.options.popover.table)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),D.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var e=At.isCell(t);if(e){var n=At.posFromPlaceholder(t);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide();return e},t.prototype.hide=function(){this.$popover.hide()},t}(),ce=function(){function t(t){this.context=t,this.ui=i.summernote.ui,this.$body=i(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),n='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Nt.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.createVideoNode=function(t){var e,n=t.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),r=t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),o=t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),s=t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),a=t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),c=t.match(/\/\/v\.qq\.com.*?vid=(.+)/),u=t.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),h=t.match(/^.+.(mp4|m4v)$/),d=t.match(/^.+.(ogg|ogv)$/),f=t.match(/^.+.(webm)$/),p=t.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(n&&11===n[1].length){var m=n[1],g=0;if(void 0!==n[2]){var v=n[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(v)for(var y=[3600,60,1],b=0,_=y.length;b<_;b++)g+=void 0!==v[b+1]?y[b]*parseInt(v[b+1],10):0}e=i("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+m+(g>0?"?start="+g:"")).attr("width","640").attr("height","360")}else if(r&&r[0].length)e=i("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(o&&o[0].length)e=i("<iframe>").attr("frameborder",0).attr("src",o[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(s&&s[3].length)e=i("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+s[3]).attr("width","640").attr("height","360");else if(a&&a[2].length)e=i("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+a[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)e=i("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else if(c&&c[1].length||u&&u[2].length){var w=c&&c[1].length?c[1]:u[2];e=i("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+w+"&amp;auto=0")}else if(h||d||f)e=i("<video controls>").attr("src",t).attr("width","640").attr("height","360");else{if(!p||!p[0].length)return!1;e=i("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(p[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true")}return e.addClass("note-video-clip"),e[0]},t.prototype.show=function(){var t=this,e=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(e).then(function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange");var n=t.createVideoNode(e);n&&t.context.invoke("editor.insertNode",n)}).fail(function(){t.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(t){var e=this;return i.Deferred(function(t){var n=e.$dialog.find(".note-video-url"),i=e.$dialog.find(".note-video-btn");e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown"),n.on("input paste propertychange",function(){e.ui.toggleBtn(i,n.val())}),D.isSupportTouch||n.trigger("focus"),i.click(function(e){e.preventDefault(),t.resolve(n.val())}),e.bindEnterKey(n,i)}),e.ui.onDialogHidden(e.$dialog,function(){n.off(),i.off(),"pending"===t.state()&&t.reject()}),e.ui.showDialog(e.$dialog)})},t}(),ue=function(){function t(t){this.context=t,this.ui=i.summernote.ui,this.$body=i(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.12</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.createShortcutList=function(){var t=this,e=this.options.keyMap[D.isMac?"mac":"pc"];return Object.keys(e).map(function(n){var r=e[n],o=i('<div><div class="help-list-item"/></div>');return o.append(i("<label><kbd>"+n+"</kdb></label>").css({width:180,"margin-right":10})).append(i("<span/>").html(t.context.memo("help."+r)||r)),o.html()}).join("")},t.prototype.showHelpDialog=function(){var t=this;return i.Deferred(function(e){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),e.resolve()}),t.ui.showDialog(t.$dialog)}).promise()},t.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.context.invoke("editor.restoreRange")})},t}(),he=function(){function t(t){var e=this;this.context=t,this.ui=i.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(t,n){D.isFF||n.relatedTarget&&At.ancestor(n.relatedTarget,P.eq(e.$popover[0]))||e.hide()}}}return t.prototype.shouldInitialize=function(){return this.options.airMode&&!B.isEmpty(this.options.popover.air)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=B.last(t.range.getClientRects());if(e){var n=P.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-20,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),de=function(){function t(t){var e=this;this.context=t,this.ui=i.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)},"summernote.disable summernote.dialog.shown":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return this.hints.length>0},t.prototype.initialize=function(){var t=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(e){t.$content.find(".active").removeClass("active"),i(e.currentTarget).addClass("active"),t.replace()})},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},t.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},t.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},t.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e),Pt.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},t.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=At.createText(i)),i},t.prototype.createItemTemplates=function(t,e){var n=this.hints[t];return e.map(function(e,r){var o=i('<div class="note-hint-item"/>');return o.append(n.template?n.template(e):e+""),o.data({index:t,item:e}),o})},t.prototype.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===Nt.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===Nt.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===Nt.code.DOWN&&(t.preventDefault(),this.moveDown()))},t.prototype.searchKeyword=function(t,e,n){var i=this.hints[t];if(i&&i.match.test(e)&&i.search){var r=i.match.exec(e);i.search(r[1],n)}else n()},t.prototype.createGroup=function(t,e){var n=this,r=i('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,e,function(e){(e=e||[]).length&&(r.html(n.createItemTemplates(t,e)),n.show())}),r},t.prototype.handleKeyup=function(t){var e=this;if(!B.contains([Nt.code.ENTER,Nt.code.UP,Nt.code.DOWN],t.keyCode)){var n=this.context.invoke("editor.getLastRange").getWordRange(),i=n.toString();if(this.hints.length&&i){this.$content.empty();var r=P.rect2bnd(B.last(n.getClientRects()));r&&(this.$popover.hide(),this.lastWordRange=n,this.hints.forEach(function(t,n){t.match.test(i)&&e.createGroup(n,i).appendTo(e.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:r.left,top:r.top-this.$popover.outerHeight()-5}):this.$popover.css({left:r.left,top:r.top+r.height+5}))}else this.hide()}},t.prototype.show=function(){this.$popover.show()},t.prototype.hide=function(){this.$popover.hide()},t}();i.summernote=i.extend(i.summernote,{version:"0.8.12",plugins:{},dom:At,range:Pt,options:{langInfo:i.summernote.lang["en-US"],modules:{editor:zt,clipboard:Ut,dropzone:Vt,codeview:Gt,statusbar:qt,fullscreen:Xt,handle:Kt,hintPopover:de,autoLink:Zt,autoSync:Qt,autoReplace:te,placeholder:ee,buttons:ne,toolbar:ie,linkDialog:re,linkPopover:oe,imageDialog:se,imagePopover:ae,tablePopover:le,videoDialog:ce,helpDialog:ue,airPopover:he},buttons:{},lang:"en-US",followingToolbar:!1,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","v.qq.com"],keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}}),i.summernote=i.extend(i.summernote,{ui:S})}(n(1))}).call(this,n(1),n(1))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){(function(t){angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs","$timeout",function(e,n,i){"use strict";var r,o=angular.copy(e.summernoteConfig)||{};if(angular.isDefined(n.height)&&(o.height=+n.height),angular.isDefined(n.minHeight)&&(o.minHeight=+n.minHeight),angular.isDefined(n.maxHeight)&&(o.maxHeight=+n.maxHeight),angular.isDefined(n.placeholder)&&(o.placeholder=n.placeholder),angular.isDefined(n.focus)&&(o.focus=!0),angular.isDefined(n.airmode)&&(o.airMode=!0),angular.isDefined(n.dialogsinbody)&&(o.dialogsInBody=!0),angular.isDefined(n.lang)){if(!angular.isDefined(t.summernote.lang[n.lang]))throw new Error('"'+n.lang+'" lang file must be exist.');o.lang=n.lang}o.callbacks=o.callbacks||{},angular.isDefined(n.onInit)&&(o.callbacks.onInit=function(t){e.init({evt:t})}),angular.isDefined(n.onEnter)&&(o.callbacks.onEnter=function(t){e.enter({evt:t})}),angular.isDefined(n.onFocus)&&(o.callbacks.onFocus=function(t){e.focus({evt:t})}),angular.isDefined(n.onPaste)&&(o.callbacks.onPaste=function(t){e.paste({evt:t})}),angular.isDefined(n.onKeyup)&&(o.callbacks.onKeyup=function(t){e.keyup({evt:t})}),angular.isDefined(n.onKeydown)&&(o.callbacks.onKeydown=function(t){e.keydown({evt:t})}),angular.isDefined(n.onImageUpload)&&(o.callbacks.onImageUpload=function(t){e.imageUpload({files:t,editable:e.editable})}),angular.isDefined(n.onMediaDelete)&&(o.callbacks.onMediaDelete=function(t){var n={attrs:{}};n.tagName=t[0].tagName,angular.forEach(t[0].attributes,function(t){n.attrs[t.name]=t.value}),e.mediaDelete({target:n})}),this.activate=function(t,s,a){var l=function(){var t=s.summernote("code");s.summernote("isEmpty")&&(t=""),a&&a.$viewValue!==t&&i(function(){a.$setViewValue(t)},0)},c=o.callbacks.onChange;o.callbacks.onChange=function(t){i(function(){s.summernote("isEmpty")&&(t=""),l()},0),angular.isDefined(n.onChange)?e.change({contents:t,editable:e.editable}):angular.isFunction(c)&&c.apply(this,arguments)},angular.isDefined(n.onBlur)&&(o.callbacks.onBlur=function(t){!o.airMode&&s.blur(),e.blur({evt:t})}),s.summernote(o);var u,h=s.next(".note-editor");h.find(".note-toolbar").click(function(){l(),h.hasClass("codeview")?(h.on("keyup",l),a&&(u=t.$watch(function(){return a.$modelValue},function(t){h.find(".note-codable").val(t)}))):(h.off("keyup",l),angular.isFunction(u)&&u())}),a&&(a.$render=function(){a.$viewValue?s.summernote("code",a.$viewValue):s.summernote("empty")}),angular.isDefined(n.editable)&&(e.editable=h.find(".note-editable")),angular.isDefined(n.editor)&&(e.editor=s),r=s,s.on("$destroy",function(){s.summernote("destroy"),e.summernoteDestroyed=!0})},e.$on("$destroy",function(){e.summernoteDestroyed||r.summernote("destroy")})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:"element",replace:!0,require:["summernote","?ngModel"],controller:"SummernoteController",scope:{summernoteConfig:"=config",editable:"=",editor:"=",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",paste:"&onPaste",keyup:"&onKeyup",keydown:"&onKeydown",change:"&onChange",imageUpload:"&onImageUpload",mediaDelete:"&onMediaDelete"},template:'<div class="summernote"></div>',link:function(e,n,i,r,o){var s=r[0],a=r[1];if(a)var l=e.$watch(function(){return a.$viewValue},function(i){l(),n.append(i),s.activate(e,t(n),a)},!0);else o(e,function(t,e){n.append(t.html())}),s.activate(e,t(n),a)}}}])}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(446));r(n(447)),r(n(453));function r(t){return t&&t.__esModule?t:{default:t}}n(461);var o=angular.module("theme",["theme.components","theme.notebook"]).controller("ThemeController",i.default);e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r,o,s,a,l,c,u,h,d,f){var p=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=e,this.$state=n,this.$filter=i,this.ConfigService=r,this.ProjectService=o,this.StudentDataService=s,this.NotebookService=l,this.SessionService=c,this.StudentStatusService=a,this.$mdDialog=u,this.$mdMedia=h,this.$mdToast=d,this.$mdComponentRegistry=f,this.$translate=this.$filter("translate"),this.layoutView="list",this.numberProject=!0,this.themePath=this.ProjectService.getThemePath(),this.themeSettings=this.ProjectService.getThemeSettings(),this.hideTotalScores=this.themeSettings.hideTotalScores,this.nodeStatuses=this.StudentDataService.nodeStatuses,this.idToOrder=this.ProjectService.idToOrder,this.rootNode=this.ProjectService.rootNode,this.rootNodeStatus=this.nodeStatuses[this.rootNode.id],this.workgroupId=this.ConfigService.getWorkgroupId(),this.workgroupUsernames=this.ConfigService.getUsernamesByWorkgroupId(this.workgroupId),this.notebookOpen=!1,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.notebookFilter="",this.currentNode=this.StudentDataService.getCurrentNode(),this.planningMode=!1,this.notebookConfig.enabled)for(var m in this.notebookConfig.itemTypes){var g=this.notebookConfig.itemTypes[m];if(this.notebookConfig.itemTypes.hasOwnProperty(m)&&g.enabled){this.notebookFilter=m;break}}this.connectionLostDisplay=d.build({template:"<md-toast>                      <span>{{ 'ERROR_CHECK_YOUR_INTERNET_CONNECTION' | translate }}</span>                      </md-toast>",hideDelay:0}),this.connectionLostShown=!1,this.setLayoutState(),this.$scope.$on("currentNodeChanged",function(t,e){p.currentNode=p.StudentDataService.getCurrentNode(),p.setLayoutState()}),this.$scope.$on("nodeClickLocked",function(t,e){var n=p.$translate("sorryYouCannotViewThisItemYet"),i=e.nodeId,r=p.ProjectService.getNodeById(i);if(null!=r){var o=p.ProjectService.getConstraintsForNode(r);if(p.ProjectService.orderConstraints(o),null!=o&&o.length>0){var s=p.ProjectService.getNodePositionAndTitleByNodeId(i);n=p.$translate("toVisitNodeTitleYouNeedTo",{nodeTitle:s})}for(var a=0;a<o.length;a++){var l=o[a];null==l||p.StudentDataService.evaluateConstraint(r,l)||(""!=n&&(n+="<br/>"),n+=p.ProjectService.getConstraintMessage(i,l))}}p.$mdDialog.show(p.$mdDialog.alert().parent(angular.element(document.body)).title(p.$translate("itemLocked")).htmlContent(n).ariaLabel(p.$translate("itemLocked")).ok(p.$translate("ok")).targetEvent(t))}),this.$scope.$on("showSessionWarning",function(t){var e=p.$mdDialog.confirm().parent(angular.element(document.body)).title(p.$translate("sessionTimeout")).textContent(p.$translate("autoLogoutMessage")).ariaLabel(p.$translate("sessionTimeout")).targetEvent(t).ok(p.$translate("yes")).cancel(p.$translate("no"));p.$mdDialog.show(e).then(function(){p.SessionService.renewSession(),e=void 0},function(){p.SessionService.forceLogOut()})}),this.$scope.$on("showRequestLogout",function(t){var e=p.$mdDialog.confirm().parent(angular.element(document.body)).title(p.$translate("serverUpdate")).textContent(p.$translate("serverUpdateRequestLogoutMessage")).ariaLabel(p.$translate("serverUpdate")).targetEvent(t).ok(p.$translate("ok"));p.$mdDialog.show(e).then(function(){},function(){})}),this.$scope.$on("serverDisconnected",function(){p.handleServerDisconnect()}),this.$scope.$on("serverConnected",function(){p.handleServerReconnect()}),this.$scope.$on("showRevisions",function(t,e){var n=e.revisions,i=e.componentController,r=e.allowRevert,o=e.$event,s=p.themePath+"/templates/componentRevisions.html";function a(t,e,n,i,r){t.items=n,t.componentController=i,t.allowRevert=r,t.close=function(){e.hide()},t.revertWork=function(n){t.componentController.setStudentWork(n),t.componentController.studentDataChanged(),e.hide()}}p.$mdDialog.show({parent:angular.element(document.body),targetEvent:o,templateUrl:s,locals:{items:n.reverse(),componentController:i,allowRevert:r},controller:a}),a.$inject=["$scope","$mdDialog","items","componentController","allowRevert"]}),this.$scope.$on("showStudentAssets",function(t,e){var n=e.componentController,i=e.$event,r=p.themePath+"/templates/studentAssetDialog.html",o=p.themePath+"/studentAsset/studentAsset.html";function s(t,e,n){t.studentAssetTemplateUrl=o,t.componentController=n,t.closeDialog=function(){e.hide()}}p.$mdDialog.show({parent:angular.element(document.body),targetEvent:i,templateUrl:r,locals:{studentAssetTemplateUrl:o,componentController:n},controller:s}),s.$inject=["$scope","$mdDialog","componentController"]}),this.$scope.$on("togglePlanningMode",function(t,e){p.planningMode=e.planningMode}),this.$scope.$on("viewCurrentAmbientNotification",function(t,e){var n=e.notification,i=e.event,r=p.themePath+"/templates/notificationDismissDialog.html",o={parent:angular.element(document.body),targetEvent:i,templateUrl:r,locals:{notification:n},controller:s};function s(t,e,n,i,r,o,s){t.$translate=n("translate"),t.input={dismissCode:""},t.message="",t.notification=s,t.hasDismissCode=!1,s.data&&s.data.dismissCode&&(t.hasDismissCode=!0),t.nodePositionAndTitle=r.getNodePositionAndTitleByNodeId(s.nodeId),t.checkDismissCode=function(){if(t.hasDismissCode&&t.input.dismissCode!=s.data.dismissCode)t.errorMessage=t.$translate("dismissNotificationInvalidDismissCode");else{i.dismissNotification(s),e.hide();o.saveVLEEvent(null,null,null,"Notification","currentAmbientNotificationDimissedWithCode",{})}},t.visitNode=function(){t.hasDismissCode||i.dismissNotification(null,t.notification);var e=t.notification.nodeId;null!=e&&o.endCurrentNodeAndSetCurrentNodeByNodeId(e)},t.closeDialog=function(){e.hide();o.saveVLEEvent(null,null,null,"Notification","currentAmbientNotificationWindowClosed",{})}}s.$inject=["$scope","$mdDialog","$filter","NotificationService","ProjectService","StudentDataService","notification"],p.$mdDialog.show(o);p.StudentDataService.saveVLEEvent(null,null,null,"Notification","currentAmbientNotificationWindowOpened",{})})}return i(t,[{key:"setLayoutState",value:function(t){var e="nav";if(t)e=t;else if(this.currentNode){var n=this.currentNode.id;this.ProjectService.isApplicationNode(n)?e="node":this.ProjectService.isGroupNode(n)&&(e="nav")}"notebook"===e?this.$state.go("root.notebook",{nodeId:this.currentNode.id}):(this.notebookNavOpen=!1,this.$state.go("root.vle",{nodeId:this.currentNode.id})),this.layoutState=e}},{key:"handleServerDisconnect",value:function(){this.connectionLostShown||(this.$mdToast.show(this.connectionLostDisplay),this.connectionLostShown=!0)}},{key:"handleServerReconnect",value:function(){this.$mdToast.hide(this.connectionLostDisplay),this.connectionLostShown=!1}},{key:"getAvatarColorForWorkgroupId",value:function(t){return this.ConfigService.getAvatarColorForWorkgroupId(t)}},{key:"mouseMoved",value:function(){this.SessionService.mouseMoved()}}]),t}();r.$inject=["$scope","$state","$filter","ConfigService","ProjectService","StudentDataService","StudentStatusService","NotebookService","SessionService","$mdDialog","$mdMedia","$mdToast","$mdComponentRegistry"],e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(n(448)),r=l(n(449)),o=l(n(450)),s=l(n(451)),a=l(n(452));function l(t){return t&&t.__esModule?t:{default:t}}var c=angular.module("theme.components",[]);c.controller("NavItemController",r.default).controller("StepToolsCtrl",s.default).controller("NodeStatusIconCtrl",a.default).component("helpIcon",i.default).component("navItem",{bindings:{nodeId:"<",showPosition:"<",type:"<"},template:'<ng-include src="navitemCtrl.getTemplateUrl()"></ng-include>',controller:"NavItemController as navitemCtrl"}).component("nodeIcon",o.default).component("nodeStatusIcon",{bindings:{nodeId:"<",customClass:"<"},template:'<ng-include src="nodeStatusIconCtrl.getTemplateUrl()"></ng-include>',controller:"NodeStatusIconCtrl as nodeStatusIconCtrl"}).component("stepTools",{bindings:{showPosition:"<"},template:'<ng-include src="stepToolsCtrl.getTemplateUrl()"></ng-include>',controller:"StepToolsCtrl as stepToolsCtrl"});var u=c;e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r={bindings:{color:"<",customClass:"<",icon:"<",iconClass:"<",pulse:"<",onClick:"&"},controller:function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"click",value:function(){this.onClick()}}]),t}(),template:'<div class="help-icon {{ $ctrl.customClass }}" ng-class="{ \'pulse\': $ctrl.pulse} ">\n                <md-button aria-label="{{ $ctrl.label }}"\n                           ng-click="$ctrl.click()"\n                           class="md-whiteframe-1dp md-icon-button help-icon__button">\n                <md-icon style="color: {{ $ctrl.color }}" ng-class="[\'md-36\', \'help-icon__icon\', $ctrl.iconClass]"> {{ $ctrl.icon }} </md-icon>\n            </md-button>\n        </div>'};e.default=r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function e(t,i,r,o,s,a,l,c,u,h){var d=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.$rootScope=i,this.$scope=r,this.$element=o,this.dragulaService=s,this.NodeService=a,this.PlanningService=l,this.ProjectService=c,this.StudentDataService=u,this.$mdDialog=h,this.$translate=this.$filter("translate"),this.autoScroll=n(237),this.expanded=!1,this.item=this.ProjectService.idToNode[this.nodeId],this.isGroup=this.ProjectService.isGroupNode(this.nodeId),this.nodeStatuses=this.StudentDataService.nodeStatuses,this.nodeStatus=this.nodeStatuses[this.nodeId],this.nodeTitle=this.showPosition?this.ProjectService.nodeIdToNumber[this.nodeId]+": "+this.item.title:this.item.title,this.currentNode=this.StudentDataService.currentNode,this.previousNode=null,this.isCurrentNode=this.currentNode.id===this.nodeId,this.isPlanning=this.PlanningService.isPlanning(this.nodeId),this.availablePlanningNodes=[],this.node=this.ProjectService.getNodeById(this.nodeId),this.isPlanningInstance=this.PlanningService.isPlanningInstance(this.nodeId),this.parentGroupId=null,this.planningMode=!1;var f=this.ProjectService.getParentGroup(this.nodeId);null!=f&&(this.parentGroupId=f.id,this.isParentGroupPlanning=this.PlanningService.isPlanning(this.parentGroupId)),this.isPlanning&&(this.availablePlanningNodes=this.PlanningService.getAvailablePlanningNodes(this.nodeId)),this.isParentGroupPlanning&&(f.planningMode&&(this.planningMode=!0),this.availablePlanningNodes=this.PlanningService.getAvailablePlanningNodes(this.parentGroupId),this.$scope.$watch(function(){return d.ProjectService.nodeIdToNumber[d.nodeId]},function(t){d.nodeTitle=d.showPosition?d.ProjectService.nodeIdToNumber[d.nodeId]+": "+d.item.title:d.item.title})),this.$scope.$watch(function(){return d.StudentDataService.currentNode},function(t,e){d.currentNode=t,d.previousNode=e,d.isCurrentNode=d.nodeId===t.id;var n=!1;if(!d.ProjectService.isApplicationNode(t.id))if(e&&(n=d.nodeId===e.id,d.StudentDataService.previousStep&&(d.$scope.$parent.isPrevStep=d.nodeId===d.StudentDataService.previousStep.id)),d.isGroup){var i=!e||d.ProjectService.isGroupNode(e.id),r=d.ProjectService.isNodeDescendentOfGroup(e,d.item);d.isCurrentNode?(d.expanded=!0,!i&&r||d.zoomToElement()):i||(d.expanded=!!r)}else n&&d.ProjectService.isNodeDescendentOfGroup(d.item,t)&&d.zoomToElement()}),this.$scope.$watch(function(){return d.expanded},function(t){d.$scope.$parent.itemExpanded=t}),this.$scope.$watch(function(){return d.planningMode},function(t){d.$scope.$parent.planningMode=t}),this.$rootScope.$on("togglePlanningMode",function(t,e){var n=e.nodeId,i=e.planningMode,r=d.ProjectService.getParentGroup(d.nodeId),o=null;null!=r&&(o=r.id),o==n&&(d.planningMode=i)});var p="planning_"+this.nodeId,m=p+".drop-model";this.$scope.$on(m,function(t,e,n){var i=e.data().nodeid;d.planningNodeItemsChanged(i)}),this.dragulaService.options(this.$scope,p,{moves:function(t,e,n,i){if(!d.planningMode)return!1;var r=t.getAttribute("data-nodeid");return d.PlanningService.isPlanningInstance(r)}});var g=s.find(this.$scope,p).drake;this.autoScroll([document.querySelector("#content")],{margin:30,pixels:50,scrollWhenOutside:!0,autoScroll:function(){return this.down&&g.dragging}})}return i(e,[{key:"getTemplateUrl",value:function(){return this.ProjectService.getThemePath()+"/themeComponents/navItem/navItem.html"}},{key:"zoomToElement",value:function(){var e=this;setTimeout(function(){var n=e.$element[0].offsetTop,i=e.isGroup?n-32:n-80;t("#content").animate({scrollTop:i},350,"linear")},500)}},{key:"itemClicked",value:function(t){this.isGroup?(this.expanded=!this.expanded,this.expanded&&(this.isCurrentNode?this.zoomToElement():this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId))):this.StudentDataService.planningMode?this.$mdDialog.show(this.$mdDialog.alert().title(this.$translate("itemLocked")).textContent(this.$translate("planningModeStepsUnVisitable")).ariaLabel(this.$translate("itemLocked")).ok(this.$translate("ok")).targetEvent(t)):this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId)}},{key:"savePlanningNodeAddedEvent",value:function(t){var e={nodeIdAdded:t.id,planningNodeTemplateId:t.planningNodeTemplateId},n=this.nodeId;this.StudentDataService.saveVLEEvent(n,null,null,"Planning","planningNodeAdded",e)}},{key:"getPlannindNodeMaxAllowed",value:function(t){var e=-1,n=null;if((n=this.isParentGroupPlanning?this.ProjectService.getNodeById(this.parentGroupId):this.ProjectService.getNodeById(this.nodeId))&&n.availablePlanningNodes)for(var i=0;i<n.availablePlanningNodes.length;i++){var r=n.availablePlanningNodes[i];r.nodeId===t&&null!=r.max&&(e=r.max)}return e}},{key:"getNumPlannindNodeInstances",value:function(t){var e=0,n=null;if((n=this.isParentGroupPlanning?this.ProjectService.getNodeById(this.parentGroupId):this.ProjectService.getNodeById(this.nodeId))&&n.ids)for(var i=0;i<n.ids.length;i++){var r=n.ids[i],o=this.ProjectService.getNodeById(r);null!=o&&o.planningNodeTemplateId===t&&e++}return e}},{key:"canAddPlanningNode",value:function(t){var e=this.getPlannindNodeMaxAllowed(t);return e<1||this.getNumPlannindNodeInstances(t)<e}},{key:"addPlanningNodeInstanceInside",value:function(t,e){var n=this.StudentDataService.getNextAvailablePlanningNodeId(),i=this.PlanningService.createPlanningNodeInstance(e,n);return this.PlanningService.addPlanningNodeInstanceInside(t,i),this.StudentDataService.updateNodeStatuses(),this.planningNodeChanged(),this.savePlanningNodeAddedEvent(i),i}},{key:"addPlanningInstance",value:function(t,e,n){var i=this.ProjectService.getThemePath()+"/themeComponents/navItem/choosePlanningItem.html";function r(t,e,n,i,r){t.navitemCtrl=r,t.targetNodeId=n,t.insertInside=i,t.addSelectedPlanningInstance=function(n){t.insertInside?t.navitemCtrl.addPlanningNodeInstanceInside(t.targetNodeId,n):t.navitemCtrl.addPlanningNodeInstanceAfter(t.targetNodeId,n),e.hide()},t.close=function(){e.hide()}}this.$mdDialog.show({parent:angular.element(document.body),locals:{targetNodeId:e,insertInside:n,navitemCtrl:this},templateUrl:i,targetEvent:t,controller:r}),r.$inject=["$scope","$mdDialog","targetNodeId","insertInside","navitemCtrl"]}},{key:"addPlanningNodeInstanceAfter",value:function(t,e){var n=this.ProjectService.getParentGroup(t);if(null!=n){n.id;var i=this.StudentDataService.getNextAvailablePlanningNodeId(),r=this.PlanningService.createPlanningNodeInstance(e,i);return this.PlanningService.addPlanningNodeInstanceAfter(t,r),this.StudentDataService.updateNodeStatuses(),this.planningNodeChanged(),this.savePlanningNodeAddedEvent(r),r}}},{key:"removePlanningNodeInstance",value:function(t,e){var n=this,i=this.$mdDialog.confirm().parent(angular.element(document.body)).title(this.$translate("areYouSureYouWantToDeleteThisItem")).textContent(this.$translate("noteAnyWorkYouHaveDoneOnThisItemWillBeLost")).ariaLabel(this.$translate("deleteItemFromProject")).targetEvent(e).ok(this.$translate("yes")).cancel(this.$translate("no"));this.$mdDialog.show(i).then(function(){n.ProjectService.deleteNode(t),n.planningNodeChanged(n.parentGroupId);var e={nodeIdRemoved:t},i=n.nodeId;n.StudentDataService.saveVLEEvent(i,null,null,"Planning","planningNodeRemoved",e)},function(){})}},{key:"getNodeTitle",value:function(t){var e=this.ProjectService.idToNode[t],n=null;return null!=e&&(n=e.title),n}},{key:"getNodeDescription",value:function(t){var e=this.ProjectService.idToNode[t],n=null;return null!=e&&(n=e.description),n}},{key:"movePlanningNode",value:function(t,e){t!=e&&(this.ProjectService.isGroupNode(e)?this.PlanningService.movePlanningNodeInstanceInside(t,e):this.PlanningService.movePlanningNodeInstanceAfter(t,e)),this.planningNodeChanged()}},{key:"planningNodeChanged",value:function(t){this.savePlanningNodeChanges(t),this.$rootScope.$broadcast("planningNodeChanged")}},{key:"savePlanningNodeChanges",value:function(t){var e=this.NodeService.createNewNodeState(),n=t||this.nodeId;e.nodeId=n,e.isAutoSave=!1,e.isSubmit=!1;var i={};i.nodeId=n,i.nodes=[];var r=this.ProjectService.getNodeById(n);if(i.nodes.push(r),null!=r.ids)for(var o=0;o<r.ids.length;o++){var s=r.ids[o],a=this.ProjectService.getNodeById(s);i.nodes.push(a)}e.studentData=i;var l=[];l.push(e),this.StudentDataService.saveNodeStates(l)}},{key:"togglePlanningMode",value:function(){this.item.planningMode=this.planningMode,this.StudentDataService.planningMode=this.planningMode;var t=this.planningMode?"planningModeOn":"planningModeOff",e={nodeId:this.nodeId},n=this.nodeId;this.StudentDataService.saveVLEEvent(n,null,null,"Planning",t,e),this.$rootScope.$broadcast("togglePlanningMode",{nodeId:this.nodeId,planningMode:this.planningMode})}},{key:"planningNodeItemsChanged",value:function(t){var e=this.item.ids.indexOf(t),n=this.item.ids[e-1];n?this.movePlanningNode(t,n):this.movePlanningNode(t,this.nodeId)}}]),e}();r.$inject=["$filter","$rootScope","$scope","$element","dragulaService","NodeService","PlanningService","ProjectService","StudentDataService","$mdDialog"],e.default=r}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ProjectService=e,this.$onInit=function(){n.isGroup=n.ProjectService.isGroupNode(n.nodeId),n.size&&(n.sizeClass="md-"+n.size)}};i.$inject=["ProjectService"];var r={bindings:{customClass:"<",icon:"<",nodeId:"<",size:"<"},controller:i,template:'<img ng-if="$ctrl.icon.type === \'img\'" ng-animate-ref="{{ $ctrl.nodeId }}" class="{{ $ctrl.isGroup ? \'avatar--square \' : \'\' }}{{ $ctrl.customClass }} {{ $ctrl.sizeClass }} avatar" ng-src="{{ $ctrl.icon.imgSrc }}" alt="{{ $ctrl.icon.imgAlt }}" />\n      <div ng-if="$ctrl.icon.type === \'font\'" ng-animate-ref="{{ $ctrl.nodeId }}" style="background-color: {{ $ctrl.icon.color }};" class="{{ $ctrl.isGroup ? \'avatar--square \' : \'\' }}{{ $ctrl.customClass }} {{ $ctrl.sizeClass }} avatar avatar--icon">\n        <md-icon class="{{ $ctrl.sizeClass }} {{ $ctrl.icon.fontSet }} md-light node-icon">{{ $ctrl.icon.fontName }}</md-icon>\n      </div>'};e.default=r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(n,i,r,o,s){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=n,this.NodeService=i,this.ProjectService=r,this.StudentDataService=o,this.is_rtl="rtl"==t("html").attr("dir"),this.icons={prev:"chevron_left",next:"chevron_right"},this.is_rtl&&(this.icons={prev:"chevron_right",next:"chevron_left"}),this.nodeStatuses=this.StudentDataService.nodeStatuses,this.idToOrder=this.ProjectService.idToOrder,this.updateModel(),this.$scope.$on("currentNodeChanged",function(t,e){a.updateModel()}),this.$scope.$on("nodeStatusesChanged",function(t,e){a.updateModel()})}return n(e,[{key:"toNodeIdChanged",value:function(){this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.toNodeId)}},{key:"updateModel",value:function(){var t=this,e=this.StudentDataService.getCurrentNodeId();this.ProjectService.isGroupNode(e)||(this.nodeId=e,this.nodeStatus=this.nodeStatuses[this.nodeId],this.prevId=this.NodeService.getPrevNodeId(),this.nextId=null,this.NodeService.getNextNodeId().then(function(e){t.nextId=e}),this.toNodeId=this.nodeId)}},{key:"getSelectedText",value:function(){return(this.showPosition?this.getNodePositionById(this.nodeId)+": ":"")+this.getNodeTitleByNodeId(this.nodeId)}},{key:"getTemplateUrl",value:function(){return this.ProjectService.getThemePath()+"/themeComponents/stepTools/stepTools.html"}},{key:"getNodeTitleByNodeId",value:function(t){return this.ProjectService.getNodeTitleByNodeId(t)}},{key:"getNodePositionById",value:function(t){return this.ProjectService.getNodePositionById(t)}},{key:"isGroupNode",value:function(t){return this.ProjectService.isGroupNode(t)}},{key:"goToPrevNode",value:function(){this.NodeService.goToPrevNode()}},{key:"goToNextNode",value:function(){this.NodeService.goToNextNode()}},{key:"closeNode",value:function(){this.NodeService.closeNode()}}]),e}();i.$inject=["$scope","NodeService","ProjectService","StudentDataService","$mdSidenav"],e.default=i}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=e,this.ProjectService=n,this.StudentDataService=i,this.nodeStatuses=this.StudentDataService.nodeStatuses,this.nodeStatus=this.nodeStatuses[this.nodeId],this.$scope.$watch(function(){return r.nodeId},function(t,e){t!==e&&(r.nodeStatus=r.nodeStatuses[r.nodeId])})}return i(t,[{key:"getTemplateUrl",value:function(){return this.ProjectService.getThemePath()+"/themeComponents/nodeStatusIcon/nodeStatusIcon.html"}}]),t}();r.$inject=["$scope","ProjectService","StudentDataService"],e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(454)),r=c(n(456)),o=c(n(457)),s=c(n(458)),a=c(n(459)),l=c(n(460));function c(t){return t&&t.__esModule?t:{default:t}}var u=angular.module("theme.notebook",[]);u.component("notebook",i.default),u.component("notebookItem",r.default),u.component("notebookNotes",o.default),u.component("notebookReport",s.default),u.component("notebookReportAnnotations",a.default),u.component("notebookLauncher",l.default),e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(455),s=(i=o)&&i.__esModule?i:{default:i};var a=function(){function t(e,n,i,r,o,s,a,l,c){var u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$mdDialog=n,this.$scope=i,this.$rootScope=r,this.ConfigService=o,this.NotebookService=s,this.ProjectService=a,this.StudentAssetService=l,this.StudentDataService=c,this.$translate=this.$filter("translate"),this.themePath=this.ProjectService.getThemePath(),this.itemId=null,this.item=null,null==this.workgroupId&&(this.workgroupId=this.ConfigService.getWorkgroupId()),this.isStudentNotebook()?this.config=this.NotebookService.getStudentNotebookConfig():this.config=this.NotebookService.getTeacherNotebookConfig(),this.config.enabled&&(this.reportVisible=this.config.itemTypes.report.enabled,this.notesVisible=!1,this.insertMode=!1,this.insertContent=null,this.requester=null,this.$scope.$on("notebookUpdated",function(t,e){u.notebook=angular.copy(e.notebook)}),this.$scope.$on("openNotebook",function(t,e){u.open("note",t),u.setInsertMode(e.insertMode,e.requester)}),this.$scope.$on("closeNotebook",function(t,e){u.closeNotes(t)}),this.$scope.$on("editNote",function(t,e){var n=e.note,i=e.ev;u.showEditNoteDialog(n,!0,null,null,!0,!0,null,i)}),this.$scope.$on("addNote",function(t,e){var n=e.file,i=e.text,r=e.isEditTextEnabled,o=e.isFileUploadEnabled,s=e.studentWorkIds,a=e.ev;u.showEditNoteDialog(null,!0,n,i,r,o,s,a)}),this.$scope.$on("copyNote",function(t,e){var n=e.itemId,i=e.ev;u.showCopyNoteConfirmDialog(n,i)}),this.logOutListener=i.$on("logOut",function(t,e){u.logOutListener(),u.$rootScope.$broadcast("componentDoneUnloading")}),this.notebook=this.NotebookService.getNotebookByWorkgroup(this.workgroupId),this.publicNotebookItems=this.NotebookService.publicNotebookItemspublicNotebookItems,this.reportId=this.config.itemTypes.report.notes[0].reportId)}return r(t,[{key:"isStudentNotebook",value:function(){return"studentRun"===this.ConfigService.getMode()||"preview"===this.ConfigService.getMode()||(this.ConfigService.isRunOwner()||this.ConfigService.isRunSharedTeacher())&&this.ConfigService.getWorkgroupId()!==this.workgroupId}},{key:"deleteStudentAsset",value:function(t){alert(this.$translate("deleteStudentAssetFromNotebookNotImplementedYet"))}},{key:"showEditNoteDialog",value:function(t,e,n,i,r,o,a,l){var c=this.themePath+"/notebook/editNotebookItem.html";this.$mdDialog.show({parent:angular.element(document.body),targetEvent:l,templateUrl:c,controller:s.default,controllerAs:"editNotebookItemController",bindToController:!0,locals:{note:t,isEditMode:e,file:n,text:i,studentWorkIds:a,isEditTextEnabled:r,isFileUploadEnabled:o}})}},{key:"notebookItemSelected",value:function(t,e){this.selectedNotebookItem=e}},{key:"attachNotebookItemToComponent",value:function(t,e){this.componentController.attachNotebookItemToComponent(e),this.selectedNotebookItem=null,t.stopPropagation()}},{key:"getNotes",value:function(){var t=[],e=this.notebook.items;for(var n in e){var i=e[n];"note"===i.last().type&&t.push(i)}return t}},{key:"open",value:function(t,e){var n=this;"report"===t?this.reportVisible=!this.reportVisible:"note"===t?this.notesVisible?this.closeNotes(e):this.NotebookService.retrievePublicNotebookItems("public").then(function(){n.notesVisible=!0}):"new"===t&&this.NotebookService.addNote(e)}},{key:"closeNotes",value:function(t){this.notesVisible=!1,this.insertMode=!1}},{key:"setInsertMode",value:function(t,e){var n=this;this.insertMode=t,t&&this.NotebookService.retrievePublicNotebookItems("public").then(function(){n.notesVisible=!0}),this.requester=e}},{key:"insert",value:function(t,e){"report"===this.requester?this.insertContent=angular.copy(t):this.$rootScope.$broadcast("notebookItemChosen",{requester:this.requester,notebookItem:t})}}]),t}();a.$inject=["$filter","$mdDialog","$scope","$rootScope","ConfigService","NotebookService","ProjectService","StudentAssetService","StudentDataService"];var l={bindings:{filter:"@",mode:"@",workgroupId:"="},template:'<div ng-if="$ctrl.config.enabled" ng-class="{\'notes-visible\': $ctrl.notesVisible}">\n      <div class="notebook-overlay"></div>\n      <notebook-launcher ng-if="$ctrl.config.itemTypes.note.enabled"\n                 config="$ctrl.config"\n                 note-count="$ctrl.notebook.items.length"\n                 notes-visible="$ctrl.notesVisible"\n                 on-open="$ctrl.open(value, event)"></notebook-launcher>\n      <notebook-report ng-if="$ctrl.config.itemTypes.report.enabled"\n               mode="{{$ctrl.mode}}"\n               insert-content="$ctrl.insertContent"\n               insert-mode="$ctrl.insertMode"\n               config="$ctrl.config"\n               reportId="$ctrl.reportId"\n               visible="$ctrl.reportVisible"\n               workgroup-id="$ctrl.workgroupId"\n               on-collapse="$ctrl.insertMode=false"\n               on-set-insert-mode="$ctrl.setInsertMode(value, requester)"></notebook-report>               \n    </div>\n    <notebook-notes ng-if="$ctrl.config.enabled"\n            notebook="$ctrl.notebook"\n            notes-visible="$ctrl.notesVisible"\n            config="$ctrl.config"\n            insert-mode="$ctrl.insertMode"\n            workgroup-id="$ctrl.workgroupId"\n            on-close="$ctrl.closeNotes()"\n            on-insert="$ctrl.insert(note, event)"\n            on-set-insert-mode="$ctrl.setInsertMode(value, requester)"></notebook-notes>\n    ',controller:a};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r,o,s,a,l,c,u,h,d){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$mdDialog=n,this.$q=i,this.$injector=r,this.$rootScope=o,this.$scope=s,this.ConfigService=a,this.NotebookService=l,this.ProjectService=c,this.StudentAssetService=u,this.StudentDataService=h,this.UtilService=d,this.$translate=this.$filter("translate"),this.showUpload=!1,null==this.note){var f=this.StudentDataService.getCurrentNodeId(),p=this.ProjectService.getNodeTitleByNodeId(f);this.item={id:null,localNotebookItemId:this.UtilService.generateKey(10),type:"note",nodeId:f,title:this.$translate("noteFrom",{currentNodeTitle:p}),content:{text:"",attachments:[]}}}else this.item=angular.copy(this.note),this.itemId=this.item.id,this.item.id=null,this.NotebookService.isNotebookItemPublic(this.item)&&this.item.workgroupId!=this.ConfigService.getWorkgroupId()&&(this.isEditMode=!1);this.notebookConfig=this.NotebookService.getNotebookConfig(),this.color=this.notebookConfig.itemTypes[this.item.type].label.color;var m=this.notebookConfig.itemTypes[this.item.type].label.singular;if(this.isEditMode?this.itemId?this.title=this.$translate("editNote",{noteLabel:m}):this.title=this.$translate("addNote",{noteLabel:m}):this.title=this.$translate("viewNote",{noteLabel:m}),this.saveEnabled=!1,null!=this.file){var g=[this.file];this.attachStudentAssetToNote(g)}else this.setShowUpload();null!=this.text&&(this.item.content.text=this.text,this.saveEnabled=!0),this.isFileUploadEnabled||(this.showUpload=!1),null!=this.studentWorkIds&&(this.item.content.studentWorkIds=this.studentWorkIds)}return i(t,[{key:"isSharedWithClass",value:function(){return null!=this.item.groups&&this.item.groups.includes("public")}},{key:"toggleMakeNotePublic",value:function(){if(null==this.item.groups&&(this.item.groups=[]),this.item.groups.includes("public")){for(var t=0;t<this.item.groups.length;t++)if("public"===this.item.groups[t]){this.item.groups.splice(t,1);break}}else this.item.groups.push("public");this.update()}},{key:"copyPublicNotebookItem",value:function(t){t.stopPropagation(),this.NotebookService.copyNotebookItem(this.itemId),this.$mdDialog.hide()}},{key:"attachStudentAssetToNote",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!0,i=!1,r=void 0;try{for(var o,s=function(){var e=o.value,n={studentAssetId:null,iconURL:"",file:e},i=new FileReader;i.onload=function(e){n.iconURL=e.target.result,t.item.content.attachments.push(n),t.update(),t.$scope.$apply()},i.readAsDataURL(e)},a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)s()}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"getItemNodeId",value:function(){return null==this.item?null:this.item.nodeId}},{key:"getItemNodeLink",value:function(){return null==this.item?"":this.ProjectService.getNodePositionAndTitleByNodeId(this.item.nodeId)}},{key:"getItemNodePosition",value:function(){return null==this.item?"":this.ProjectService.getNodePositionById(this.item.nodeId)}},{key:"getTemplateUrl",value:function(){return this.ProjectService.getThemePath()+"/notebook/editNotebookItem.html"}},{key:"removeAttachment",value:function(t){-1!=this.item.content.attachments.indexOf(t)&&(this.item.content.attachments.splice(this.item.content.attachments.indexOf(t),1),this.update())}},{key:"delete",value:function(t){}},{key:"cancel",value:function(){this.$mdDialog.hide()}},{key:"close",value:function(){this.$mdDialog.hide()}},{key:"save",value:function(){var t=this,e=[];if(this.item.content.clientSaveTime=Date.parse(new Date),null!=this.item.content.attachments)for(var n=function(n){var i=t.item.content.attachments[n];if(null==i.studentAssetId&&null!=i.file){var o=i.file;r=t.$q.defer(),t.StudentAssetService.uploadAsset(o).then(function(e){t.StudentAssetService.copyAssetForReference(e).then(function(e){if(null!=e){var i={studentAssetId:e.id,iconURL:e.iconURL};t.item.content.attachments[n]=i,r.resolve()}})}),e.push(r.promise)}},i=0;i<this.item.content.attachments.length;i++){var r;n(i)}this.$q.all(e).then(function(){t.NotebookService.saveNotebookItem(t.item.id,t.item.nodeId,t.item.localNotebookItemId,t.item.type,t.item.title,t.item.content,t.item.groups,t.item.content.clientSaveTime).then(function(){t.$mdDialog.hide()})})}},{key:"update",value:function(){this.saveEnabled=this.item.content.text||!this.isRequireTextOnEveryNote()&&this.item.content.attachments.length,this.setShowUpload()}},{key:"isRequireTextOnEveryNote",value:function(){return null!=this.notebookConfig.itemTypes&&null!=this.notebookConfig.itemTypes.note&&this.notebookConfig.itemTypes.note.requireTextOnEveryNote}},{key:"setShowUpload",value:function(){this.showUpload=null!=this.notebookConfig.itemTypes&&null!=this.notebookConfig.itemTypes.note&&this.notebookConfig.itemTypes.note.enableStudentUploads&&this.item.content.attachments&&this.item.content.attachments.length<1}},{key:"canShareWithClass",value:function(){return this.ProjectService.isSpaceExists("public")}},{key:"canCopyPublicNotebookItem",value:function(){return this.ProjectService.isSpaceExists("public")&&!this.isMyNotebookItem()}},{key:"isMyNotebookItem",value:function(){return this.item.workgroupId===this.ConfigService.getWorkgroupId()}}]),t}();r.$inject=["$filter","$mdDialog","$q","$injector","$rootScope","$scope","ConfigService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"],e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r,o,s,a,l,c,u,h){var d=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$injector=e,this.$mdDialog=n,this.$rootScope=i,this.$scope=r,this.$filter=o,this.ConfigService=s,this.NotebookService=a,this.ProjectService=l,this.StudentAssetService=c,this.StudentDataService=u,this.UtilService=h,this.$translate=this.$filter("translate"),this.item=this.note,this.type=this.item?this.item.type:null,this.label=this.config.itemTypes[this.type].label,"public"===this.group?this.color="orange":this.color=this.label.color,this.$rootScope.$on("notebookUpdated",function(t,e){var n=e.notebook;n.items[d.itemId]&&(d.item=n.items[d.itemId].last())})}return i(t,[{key:"isItemInGroup",value:function(t){return null!=this.item.groups&&this.item.groups.includes(t)}},{key:"getItemNodeId",value:function(){return null==this.item?null:this.item.nodeId}},{key:"getItemNodeLink",value:function(){return null==this.item?"":this.ProjectService.getNodePositionAndTitleByNodeId(this.item.nodeId)}},{key:"getItemNodePosition",value:function(){return null==this.item?"":this.ProjectService.getNodePositionById(this.item.nodeId)}},{key:"getTemplateUrl",value:function(){return this.ProjectService.getThemePath()+"/notebook/notebookItem.html"}},{key:"doDelete",value:function(t){var e=this;t.stopPropagation();var n=this.$mdDialog.confirm().title(this.$translate("deleteNoteConfirmMessage")).ariaLabel("delete note confirmation").targetEvent(t).ok(this.$translate("delete")).cancel(this.$translate("cancel"));this.$mdDialog.show(n).then(function(){e.NotebookService.deleteNote(e.item)},function(){})}},{key:"doRevive",value:function(t){var e=this;t.stopPropagation();var n=this.$mdDialog.confirm().title(this.$translate("reviveNoteConfirmMessage")).ariaLabel("revive note confirmation").targetEvent(t).ok(this.$translate("revive")).cancel(this.$translate("cancel"));this.$mdDialog.show(n).then(function(){e.NotebookService.reviveNote(e.item)},function(){})}},{key:"doSelect",value:function(t){this.onSelect&&this.onSelect({$ev:t,note:this.item})}},{key:"canShareNotebookItem",value:function(){return this.ProjectService.isSpaceExists("public")&&this.isMyNotebookItem()&&null==this.item.serverDeleteTime&&!this.isChooseMode&&!this.isItemInGroup("public")}},{key:"canUnshareNotebookItem",value:function(){return this.ProjectService.isSpaceExists("public")&&this.isMyNotebookItem()&&null==this.item.serverDeleteTime&&!this.isChooseMode&&this.isItemInGroup("public")}},{key:"canDeleteNotebookItem",value:function(){return this.isMyNotebookItem()&&null==this.item.serverDeleteTime&&!this.isChooseMode}},{key:"canReviveNotebookItem",value:function(){return null!=this.item.serverDeleteTime&&!this.isChooseMode}},{key:"isMyNotebookItem",value:function(){return this.item.workgroupId===this.ConfigService.getWorkgroupId()}}]),t}();r.$inject=["$injector","$mdDialog","$rootScope","$scope","$filter","ConfigService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var o={bindings:{itemId:"<",group:"@",note:"<",isChooseMode:"<",config:"<",componentController:"<",workgroupId:"<",onSelect:"&"},template:'<md-card class="notebook-item"\n                  ng-mouseenter="focus=true;"\n                  ng-mouseleave="focus=false;"\n                  ng-class="{\'md-whiteframe-5dp\': focus}"\n                  ng-click="$ctrl.doSelect($event)">\n            <md-card-content aria-label="View"\n                             class="notebook-item__content notebook-item__edit"\n                             ng-class="{\'notebook-item__content--text-only\': !$ctrl.item.content.attachments.length}"\n                             md-ink-ripple\n                             flex\n                             layout="column"\n                             layout-align="center center">\n                <div ng-repeat="attachment in $ctrl.item.content.attachments"\n                     ng-if="$first"\n                     class="notebook-item__content__attachment"\n                     style="background: url(\'{{attachment.iconURL}}\')"></div>\n                <div ng-if="$ctrl.item.content.text"\n                     class="notebook-item__content__text notebook-item__edit md-body-1"\n                     style="color: {{$ctrl.label.color}}">\n                    {{$ctrl.item.content.text}}\n                </div>\n            </md-card-content>\n            <md-card-actions class="notebook-item__actions"\n                             layout="row"\n                             layout-align="start center"\n                             style="background-color: {{$ctrl.color}}">\n                <span class="notebook-item__content__location"><md-icon> place </md-icon><span class="md-body-1">{{$ctrl.getItemNodePosition()}}</span></span>\n                <span flex></span>\n                <md-button class="md-icon-button"\n                           ng-if="$ctrl.canDeleteNotebookItem()"\n                           aria-label="Delete notebook item"\n                           ng-click="$ctrl.doDelete($event)">\n                    <md-icon> delete </md-icon>\n                    <md-tooltip md-direction="top">{{ \'DELETE\' | translate }}</md-tooltip>\n                </md-button>\n                <md-button class="md-icon-button"\n                           ng-if="$ctrl.canReviveNotebookItem()"\n                           aria-label="Revive notebook item"\n                           ng-click="$ctrl.doRevive($event)">\n                    <md-icon> undo </md-icon>\n                    <md-tooltip md-direction="top">{{ \'reviveNote\' | translate }}</md-tooltip>\n                </md-button>\n            </md-card-actions>\n        </md-card>',controller:r};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e,n,r,o,s){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$translate=e("translate"),this.$rootScope=n,this.NotebookService=o,this.ProjectService=s,this.groups=[],this.selectedTabIndex=0,this.$scope=r,this.publicNotebookItems=this.NotebookService.publicNotebookItems,this.groupNameToGroup={};var l={title:"Personal",name:"private",isEditAllowed:!0,items:[]};this.groupNameToGroup.private=l;var c=!0,u=!1,h=void 0;try{for(var d,f=Object.entries(this.notebook.items)[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=i(d.value,2),m=(p[0],p[1]);"note"===m.last().type&&l.items.push(m.last())}}catch(t){u=!0,h=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}this.groups.push(l);var g=this.ProjectService.getSpaces(),v=!0,y=!1,b=void 0;try{for(var _,w=g[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var S=_.value;if(S.isShowInNotebook){var x={title:S.name,name:S.id,isEditAllowed:!0,items:[]};this.groupNameToGroup[S.id]=x,this.groups.push(x)}}}catch(t){y=!0,b=t}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}this.$onInit=function(){a.color=a.config.itemTypes.note.label.color},this.$onChanges=function(t){t.notebook&&(a.notebook=angular.copy(t.notebook.currentValue),a.hasNotes=!!Object.keys(a.notebook.items).length)},this.$scope.$on("openNotebook",function(t,e){a.selectedTabIndex="public"===e.visibleSpace?1:0}),this.$rootScope.$on("publicNotebookItemsRetrieved",function(t,e){var n=!0,i=!1,r=void 0;try{for(var o,s=a.groups[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;"private"!==l.name&&(l.items=a.publicNotebookItems[l.name])}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}),this.$rootScope.$on("notebookUpdated",function(t,e){var n=e.notebookItem;null!=n.groups&&0!==n.groups.length||"note"!==n.type||a.updatePrivateNotebookNote(n),null!=n.groups&&n.groups.includes("public")&&a.updatePublicNotebookNote(n)})}return r(t,[{key:"updatePrivateNotebookNote",value:function(t){this.updateNotebookNote(this.groupNameToGroup.private,t.localNotebookItemId,t.workgroupId,t),null!=this.groupNameToGroup.public&&this.removeNotebookNote(this.groupNameToGroup.public,t.localNotebookItemId,t.workgroupId)}},{key:"updatePublicNotebookNote",value:function(t){this.updateNotebookNote(this.groupNameToGroup.public,t.localNotebookItemId,t.workgroupId,t),this.removeNotebookNote(this.groupNameToGroup.private,t.localNotebookItemId,t.workgroupId)}},{key:"updateNotebookNote",value:function(t,e,n,i){for(var r=!1,o=t.items,s=0;s<o.length;s++){var a=o[s];a.localNotebookItemId==e&&a.workgroupId==n&&(o[s]=i,r=!0)}r||o.push(i)}},{key:"removeNotebookNote",value:function(t,e,n){for(var i=t.items,r=0;r<i.length;r++){var o=i[r];o.localNotebookItemId==e&&o.workgroupId==n&&(i.splice(r,1),r--)}}},{key:"getTitle",value:function(){return this.insertMode?this.$translate("selectItemToInsert"):this.config.itemTypes.note.label.link}},{key:"editItem",value:function(t,e){this.$rootScope.$broadcast("editNote",{note:e,ev:t})}},{key:"select",value:function(t,e){this.insertMode?this.onInsert({note:e,event:t}):this.editItem(t,e)}},{key:"edit",value:function(t){alert("Edit the item: "+t)}},{key:"close",value:function(t){this.onClose(t)}},{key:"cancelInsertMode",value:function(t){this.onSetInsertMode({value:!1})}}]),t}();o.$inject=["$filter","$rootScope","$scope","NotebookService","ProjectService"];var s={bindings:{config:"<",insertMode:"<",notebook:"<",publicNotebookItems:"<",notesVisible:"<",workgroupId:"<",onClose:"&",onInsert:"&",onSetInsertMode:"&",mode:"@"},template:'<md-sidenav ng-if="$ctrl.mode !== \'classroomMonitor\'" md-component-id="notes"\n        md-is-open="$ctrl.notesVisible"\n        md-whiteframe="4"\n        md-disable-backdrop\n        layout="column"\n        class="md-sidenav-right notebook-sidebar">\n      <md-toolbar>\n          <div class="md-toolbar-tools"\n               ng-class="{\'insert-mode\': $ctrl.insertMode}"\n               style="background-color: {{$ctrl.color}};">\n              {{$ctrl.getTitle()}}\n              <span flex></span>\n              <md-button ng-click="$ctrl.close($event)"\n                  class="md-icon-button"\n                  aria-label="{{ \'Close\' | translate }}">\n                <md-icon>close</md-icon>\n              </md-button>\n          </div>\n      </md-toolbar>\n      <md-content>\n      <md-tabs md-selected="$ctrl.selectedTabIndex" md-dynamic-height md-border-bottom md-autoselect md-swipe-content>\n        <md-tab ng-repeat="group in $ctrl.groups"\n            ng-disabled="group.disabled"\n            label="{{group.title}}">\n          <div class="demo-tab tab{{$index%4}}" style="padding: 25px; text-align: center;">\n              <div class="notebook-items" ng-class="{\'notebook-items--insert\': $ctrl.insertMode}" layout="row" layout-wrap>\n                <div class="md-padding" ng-if="!$ctrl.hasNotes" translate="noNotes" translate-value-term="{{$ctrl.config.itemTypes.note.label.plural}}"></div>\n                <notebook-item ng-repeat="note in group.items"\n                    config="$ctrl.config"\n                    group="{{group.name}}"\n                    item-id="note.localNotebookItemId"\n                    is-edit-allowed="group.isEditAllowed"\n                    is-choose-mode="$ctrl.insertMode"\n                    note="note"\n                    workgroup-id="note.workgroupId"\n                    on-select="$ctrl.select($ev, note)"\n                    style="display: flex;"\n                    flex="100"\n                    flex-gt-xs="50">\n                </notebook-item>\n            </div>\n          </div>\n        </md-tab>\n      </md-tabs>\n      </md-content>\n    </md-sidenav>\n    <div ng-if="$ctrl.mode === \'classroomMonitor\'" md-dynamic-height md-border-bottom md-autoselect md-swipe-content>\n      <div ng-repeat="group in $ctrl.groups"\n          ng-disabled="group.disabled"\n          label="{{group.title}}">\n        <div class="demo-tab tab{{$index%4}}" style="padding: 25px; text-align: center;">\n            <div class="notebook-items" ng-class="{\'notebook-items--insert\': $ctrl.insertMode}" layout="row" layout-wrap>\n              <div class="md-padding" ng-if="!$ctrl.hasNotes" translate="noNotes" translate-value-term="{{$ctrl.config.itemTypes.note.label.plural}}"></div>\n              <notebook-item ng-repeat="note in group.items"\n                  config="$ctrl.config"\n                  group="{{group.name}}"\n                  item-id="note.localNotebookItemId"\n                  is-edit-allowed="group.isEditAllowed"\n                  is-choose-mode="$ctrl.insertMode"\n                  note="note"\n                  workgroup-id="note.workgroupId"\n                  on-select="$ctrl.select($ev, note)"\n                  style="display: flex;"\n                  flex="100"\n                  flex-gt-xs="50">\n              </notebook-item>\n          </div>\n        </div>\n      </div>\n    </div>\n    ',controller:o};e.default=s},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function e(n,i,r,o,s,a,l,c){var u=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=n,this.$mdSidenav=i,this.$scope=r,this.$timeout=o,this.AnnotationService=s,this.ConfigService=a,this.NotebookService=l,this.ProjectService=c,this.$translate=this.$filter("translate"),this.full=!1,this.collapsed=!0,this.dirty=!1,this.autoSaveIntervalMS=3e4,this.saveMessage={text:"",time:""},this.reportId=this.config.itemTypes.report.notes[0].reportId,this.reportItem=this.NotebookService.getLatestNotebookReportItemByReportId(this.reportId,this.workgroupId),this.reportItem){var h=this.reportItem.serverSaveTime,d=this.ConfigService.convertToClientTimestamp(h);this.setSavedMessage(d)}else if(this.reportItem=this.NotebookService.getTemplateReportItemByReportId(this.reportId),null==this.reportItem)return;this.maxScore=this.NotebookService.getMaxScoreByReportId(this.reportId),"classroomMonitor"!==this.mode&&(this.reportItem.id=null),this.reportItemContent=this.ProjectService.injectAssetPaths(this.reportItem.content.content),this.latestAnnotations=this.AnnotationService.getLatestNotebookItemAnnotations(this.workgroupId,this.reportId),this.startAutoSaveInterval(),this.summernoteOptions={toolbar:[["edit",["undo","redo"]],["style",["bold","italic","underline"]],["para",["ul","ol","paragraph"]],["print",["print"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["remove",["removeMedia"]]]},disableDragAndDrop:!0,toolbarContainer:"#"+this.reportId+"-toolbar",callbacks:{onBlur:function(){t(this).summernote("saveRange")}}},this.isNoteEnabled()&&this.initializeInsertNoteButton(),this.$onChanges=function(e){if(e.insertContent&&!e.insertContent.isFirstChange()&&e.insertContent.currentValue){var n=angular.copy(e.insertContent.currentValue),i=t("#"+u.reportId);i.summernote("focus"),i.summernote("restoreRange");var r=t('<p notebook-item-id="'+n.id+'" workgroup-id="'+n.workgroupId+'">');null!=n.groups&&n.groups.length>0&&r.attr("group",n.groups);var o=n.content.attachments&&n.content.attachments.length>0;if(n.content.attachments){o&&r.css("text-align","center");var s=!0,a=!1,l=void 0;try{for(var c,h=n.content.attachments[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value,f=t('<img src="'+d.iconURL+'" alt="notebook image" style="width: 75%; max-width: 100%; height: auto; border: 1px solid #aaaaaa; padding: 8px; margin-bottom: 4px;" />');f.addClass("notebook-item--report__note-img"),r.append(f)}}catch(t){a=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(a)throw l}}}if(n.content.text)if(o){var p=t("<div><b>"+n.content.text+"</b></div>").css({"text-align":"center"});r.append(p),i.summernote("insertNode",r[0])}else i.summernote("insertText",n.content.text);else i.summernote("insertNode",r[0])}},this.$scope.$on("notebookItemAnnotationReceived",function(t,e){e.annotation.localNotebookItemId===u.reportId&&(u.hasNewAnnotation=!0,u.latestAnnotations=u.AnnotationService.getLatestNotebookItemAnnotations(u.workgroupId,u.reportId))}),this.$scope.$on("showReportAnnotations",function(e){u.collapsed&&u.collapse();var n=t(".notebook-report__content");o(function(){n.animate({scrollTop:n.prop("scrollHeight")},500)},500)})}return n(e,[{key:"collapse",value:function(){this.collapsed=!this.collapsed,this.collapsed&&this.onCollapse()}},{key:"fullscreen",value:function(){this.collapsed?(this.full=!0,this.collapsed=!1):this.full=!this.full}},{key:"addNotebookItemContent",value:function(t){this.onSetInsertMode({value:!0,requester:"report"})}},{key:"changed",value:function(t){this.dirty=!0,this.reportItem.content.content=this.ConfigService.removeAbsoluteAssetPaths(t)}},{key:"startAutoSaveInterval",value:function(){var t=this;this.stopAutoSaveInterval(),this.autoSaveIntervalId=setInterval(function(){t.dirty&&t.saveNotebookReportItem()},this.autoSaveIntervalMS)}},{key:"stopAutoSaveInterval",value:function(){clearInterval(this.autoSaveIntervalId)}},{key:"saveNotebookReportItem",value:function(){var t=this;this.reportItem.content.clientSaveTime=Date.parse(new Date),this.NotebookService.saveNotebookItem(this.reportItem.id,this.reportItem.nodeId,this.reportItem.localNotebookItemId,this.reportItem.type,this.reportItem.title,this.reportItem.content,this.reportItem.groups,this.reportItem.content.clientSaveTime).then(function(e){e&&(t.dirty=!1,t.hasNewAnnotation=!1,t.reportItem.id=e.id,t.setSavedMessage(t.ConfigService.convertToClientTimestamp(e.serverSaveTime)))})}},{key:"setSavedMessage",value:function(t){this.setSaveText(this.$translate("SAVED"),t)}},{key:"setSaveText",value:function(t,e){this.saveMessage.text=t,this.saveMessage.time=e}},{key:"isNoteEnabled",value:function(){return this.config.itemTypes.note.enabled}},{key:"initializeInsertNoteButton",value:function(){var t=this;this.summernoteOptions.toolbar.splice(this.summernoteOptions.toolbar.length-1,0,["customButton",["customButton"]]),this.summernoteOptions.customButton={buttonText:"Insert "+this.config.itemTypes.note.label.singular+" +",tooltip:"Insert from "+this.config.label,buttonClass:"accent-1 notebook-item--report__add-note",action:function(e){t.addNotebookItemContent(e)}}}}]),e}();i.$inject=["$filter","$mdSidenav","$scope","$timeout","AnnotationService","ConfigService","NotebookService","ProjectService"];var r={bindings:{config:"<",insertContent:"<",insertMode:"<",reportId:"<",visible:"<",workgroupId:"<",onCollapse:"&",onSetInsertMode:"&",mode:"@"},template:'<div ng-if="$ctrl.mode !== \'classroomMonitor\' && ($ctrl.visible && $ctrl.full && !$ctrl.collapsed) || $ctrl.insertMode" class="notebook-report-backdrop"></div>\n        <div ng-if="$ctrl.visible" class="notebook-report-container"\n              ng-class="{\'notebook-report-container__collapsed\': $ctrl.collapsed, \'notebook-report-container__full\': $ctrl.full && !$ctrl.collapsed}">\n            <md-card class="notebook-report md-whiteframe-3dp l-constrained">\n                <md-toolbar ng-click="$ctrl.collapsed ? $ctrl.collapse() : return" class="md-toolbar--wise md-toolbar--wise--sm notebook-report__toolbar">\n                    <md-toolbar-tools class="md-toolbar-tools">\n                        <md-icon>assignment</md-icon>&nbsp;\n                        <span ng-if="$ctrl.collapsed" class="overflow--ellipsis notebook-report__toolbar__title">{{$ctrl.reportItem.content.title}}</span>\n                        <span flex></span>\n                        <md-button aria-label="{{\'toggleFullScreen\' | translate}}" title="{{\'toggleFullScreen\' | translate}}" class="md-icon-button notebook-tools--full"\n                                   ng-click="$ctrl.fullscreen()">\n                            <md-icon ng-if="!$ctrl.full || $ctrl.collapsed"> fullscreen </md-icon>\n                            <md-icon ng-if="$ctrl.full && !$ctrl.collapsed"> fullscreen_exit </md-icon>\n                        </md-button>\n                        <md-button aria-label="{{\'collapse\' | translate}}" title="{{\'collapse\' | translate}}" class="md-icon-button"\n                                   ng-if="!$ctrl.collapsed" ng-click="$event.stopPropagation(); $ctrl.collapse()">\n                            <md-icon> arrow_drop_down </md-icon>\n                        </md-button>\n                        <md-button aria-label="{{\'restore\' | translate}}" title="{{\'restore\' | translate}}" class="md-icon-button"\n                                   ng-if="$ctrl.collapsed" ng-click="$event.stopPropagation(); $ctrl.collapse()">\n                            <md-icon> arrow_drop_up </md-icon>\n                        </md-button>\n                    </md-toolbar-tools>\n                    <div class="notebook-report__content__header md-whiteframe-1dp" layout="row" layout-align="start center">\n                        <span style="color: {{$ctrl.config.itemTypes.report.label.color}};">{{$ctrl.reportItem.content.title}}</span>\n                        <span flex></span>\n                        <md-icon aria-label="{{$ctrl.reportItem.content.title}} info" style="color: {{$ctrl.config.itemTypes.report.label.color}};">\n                            info\n                            <md-tooltip md-direction="left">{{$ctrl.reportItem.content.prompt}}</md-tooltip>\n                        </md-icon>\n                    </div>\n                </md-toolbar>\n                <md-content class="notebook-report__content" flex>\n                    <summernote id="{{$ctrl.reportId}}"\n                                class="notebook-item--report__content"\n                                ng-model="$ctrl.reportItemContent"\n                                ng-change="$ctrl.changed($ctrl.reportItemContent)"\n                                config="$ctrl.summernoteOptions"></summernote>\n                    <notebook-report-annotations annotations="$ctrl.latestAnnotations"\n                                                 has-new="$ctrl.hasNewAnnotation"\n                                                 max-score="$ctrl.maxScore"></notebook-report-annotations>\n                </md-content>\n                <md-card-actions class="notebook-report__actions">\n                    <div id="{{$ctrl.reportId}}-toolbar"></div>\n                    <div layout="row" layout-align="start center">\n                        <md-button class="md-primary md-raised button--small"\n                                   aria-label="{{ \'save\' | translate }}"\n                                   ng-disabled="!$ctrl.dirty"\n                                   ng-click="$ctrl.saveNotebookReportItem()">{{ \'save\' | translate }}</md-button>\n                        <span ng-show="$ctrl.saveMessage.text"\n                              class="component__actions__info md-caption">\n                              {{$ctrl.saveMessage.text}} <span class="component__actions__more"><md-tooltip md-direction="top">{{ $ctrl.saveMessage.time | amDateFormat:\'ddd, MMM D YYYY, h:mm a\' }}</md-tooltip><span am-time-ago="$ctrl.saveMessage.time"></span></span>\n                        </span>\n                    </div>\n                </md-card-actions>\n            </md-card>\n        </div>\n        <div ng-if="$ctrl.mode === \'classroomMonitor\'">\n            <compile data="$ctrl.reportItemContent"></compile>\n            <notebook-item-grading\n                notebook-item="$ctrl.reportItem">\n            </notebook-item-grading>\n\n        </div>',controller:i};e.default=r}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i,r,o){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$scope=e,this.$filter=n,this.ConfigService=i,this.ProjectService=r,this.StudentDataService=o,this.$translate=this.$filter("translate"),this.maxScoreDisplay=parseInt(this.maxScore)>0?"/"+this.maxScore:"",this.latestAnnotationTime=null,this.isNew=!1,this.label="",this.icon="person",this.showScore=!0,this.showComment=!0,this.$onChanges=function(t){t.annotations&&(s.annotations=angular.copy(t.annotations.currentValue),s.processAnnotations())}}return i(t,[{key:"getLatestAnnotation",value:function(){var t=null;if(this.annotations.comment||this.annotations.score){var e=this.annotations.comment?this.annotations.comment.serverSaveTime:0,n=this.annotations.score?this.annotations.score.serverSaveTime:0;e>=n?t=this.annotations.comment:n>e&&(t=this.annotations.score)}return t}},{key:"getLatestAnnotationTime",value:function(){var t=this.getLatestAnnotation();return t?this.ConfigService.convertToClientTimestamp(t.serverSaveTime):null}},{key:"setLabelAndIcon",value:function(){var t=this.getLatestAnnotation();t&&("autoComment"===t.type||"autoScore"===t.type?(this.label=this.$translate("automatedFeedbackLabel"),this.icon="keyboard"):(this.label=this.$translate("teacherFeedbackLabel"),this.icon="person"))}},{key:"processAnnotations",value:function(){(this.annotations.comment||this.annotations.score)&&(this.nodeId=this.annotations.comment?this.annotations.comment.nodeId:this.annotations.score.nodeId,this.componentId=this.annotations.comment?this.annotations.comment.componentId:this.annotations.score.nodeId,this.ProjectService.displayAnnotation(this.annotations.score)||(this.showScore=!1),this.ProjectService.displayAnnotation(this.annotations.comment)||(this.showComment=!1),this.setLabelAndIcon(),this.latestAnnotationTime=this.getLatestAnnotationTime(),this.show=this.showScore&&this.annotations.score||this.showComment&&this.annotations.comment)}}]),t}();r.$inject=["$scope","$filter","ConfigService","ProjectService","StudentDataService"];var o={bindings:{annotations:"<",hasNew:"<",maxScore:"<"},template:'<div class="md-padding gray-lightest-bg annotations-container--student--report" ng-if="$ctrl.show">\n            <md-card class="annotations annotations--report">\n                <md-card-title class="annotations__header">\n                    <div class="annotations__avatar avatar--icon avatar--square md-36 avatar md-whiteframe-1dp">\n                        <md-icon class="annotations__icon md-36">{{$ctrl.icon}}</md-icon>\n                    </div>\n                    <div class="annotations__title" layout="row" flex>\n                        <span>{{$ctrl.label}}</span>\n                        <span flex></span>\n                        <span ng-if="$ctrl.hasNew" class="badge annotations__status animate-fade" translate="new"></span>\n                    </div>\n                </md-card-title>\n                <md-card-content class="annotations__body md-body-1">\n                    <div ng-if="$ctrl.showComment && $ctrl.annotations.comment.data.value"><compile data="$ctrl.annotations.comment.data.value"></compile></div>\n                    <hr ng-if="$ctrl.annotations.comment" />\n                    <div layout="row" laoyut-align="start center">\n                        <span ng-if="$ctrl.showScore && $ctrl.annotations.score"\n                              class="annotations__score"\n                              translate="SCORE_LABEL_AND_VALUE"\n                              translate-value-score="{{$ctrl.annotations.score.data.value}}{{$ctrl.maxScoreDisplay}}"></span>\n                        <span flex></span>\n                        <span>\n                            <span class="annotations__info" am-time-ago="$ctrl.latestAnnotationTime"></span>\n                            <md-tooltip md-direction="top">{{ $ctrl.latestAnnotationTime | amDateFormat:\'ddd, MMM D YYYY, h:mm a\' }}</md-tooltip>\n                        </span>\n                    </div>\n                </md-card-content>\n            </md-card>\n        </div>',controller:r};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$timeout=n,this.$translate=this.$filter("translate"),this.translationData={noteLabel:this.config.itemTypes.note.label.singular}}return i(t,[{key:"fabAction",value:function(t){this.notesVisible?this.open(t,"new"):this.open(t,"note")}},{key:"open",value:function(t,e){t.stopPropagation(),this.onOpen({value:e,event:t}),this.isOpen=!1}},{key:"fabLabel",value:function(){return this.notesVisible?this.$translate("addNote",{noteLabel:this.config.itemTypes.note.label.singular}):this.config.label}},{key:"isShowButton",value:function(){return!this.notesVisible||this.config.itemTypes.note.enableAddNote}}]),t}();r.$inject=["$filter","$timeout"];var o={bindings:{config:"<",noteCount:"<",notesVisible:"<",onOpen:"&"},template:'<md-button ng-if="$ctrl.isShowButton()"\n                    class="md-scale md-fab md-fab-bottom-right notebook-launcher"\n                    aria-label="{{ $ctrl.fabLabel() }}"\n                    ng-click="$ctrl.fabAction($event)">\n            <md-icon ng-if="!$ctrl.notesVisible">{{ $ctrl.config.icon }}</md-icon>\n            <md-icon ng-if="$ctrl.notesVisible">add</md-icon>\n            <md-tooltip md-direction="top">\n                {{ $ctrl.fabLabel() }}\n            </md-tooltip>\n        </md-button>',controller:r};e.default=o},function(t,e,n){"use strict";var i,r=n(462),o=(i=r)&&i.__esModule?i:{default:i};o.default.load({fontinactive:function(t,e){switch(t){case"Roboto":o.default.load({custom:{families:["Roboto:300,400,500,700,400italic"],urls:["wise5/style/fonts/roboto/roboto.css"]}});break;case"Material Icons":o.default.load({custom:{families:["Material Icons"],urls:["wise5/style/fonts/material-icons/material-icons.css"]}})}},google:{families:["Roboto:300,400,500,700,400italic","Material Icons"]}})},function(t,e,n){var i;!function(){function r(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(t,e,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o).apply(null,arguments)}var a=Date.now||function(){return+new Date};function l(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var c=!!window.FontFace;function u(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function h(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,s=0;s<i.length;s+=1)if(e[r]===i[s]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,s=0;s<n.length;s+=1)if(i[r]===n[s]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function p(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function m(t,e,n){function i(){a&&r&&o&&(a(s),a=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,o=!0,s=null,a=n||null;c?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout(function(){r=!0,i()},0),h(t,"head",e)}function g(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=u(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){s||(s=!0,n&&n(Error("Script load timeout")))},i||5e3),o}return null}function v(){this.a=0,this.c=null}function y(t){return t.a++,function(){t.a--,_(t)}}function b(t,e){t.c=e,_(t)}function _(t){0==t.a&&t.c&&(t.c(),t.c=null)}function w(t){this.a=t||"-"}function S(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function x(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function C(t){return t.a+t.f}function k(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function T(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function M(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new w("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function E(t){if(t.g){var e=p(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),f(t.f,n,i)}A(t,"inactive")}function A(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,C(n)):t.h[e]())}function I(){this.c={}}function $(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function D(t){h(t.c,"body",t.a)}function L(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";font-style:"+k(t)+";font-weight:"+t.f+"00;"}function P(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function O(t,e,n,i,r,o,s){this.v=t,this.B=e,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new $(this.c,this.s),this.h=new $(this.c,this.s),this.j=new $(this.c,this.s),this.m=new $(this.c,this.s),t=L(t=new S(this.a.c+",serif",C(this.a))),this.g.a.style.cssText=t,t=L(t=new S(this.a.c+",sans-serif",C(this.a))),this.h.a.style.cssText=t,t=L(t=new S("serif",C(this.a))),this.j.a.style.cssText=t,t=L(t=new S("sans-serif",C(this.a))),this.m.a.style.cssText=t,D(this.g),D(this.h),D(this.j),D(this.m)}w.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},P.prototype.start=function(){var t=this.c.o.document,e=this,n=a(),i=new Promise(function(i,r){!function o(){a()-n>=e.f?r():t.fonts.load(function(t){return k(t)+" "+t.f+"00 300px "+x(t.c)}(e.a),e.h).then(function(t){1<=t.length?i():setTimeout(o,25)},function(){r()})}()}),r=null,o=new Promise(function(t,n){r=setTimeout(n,e.f)});Promise.race([o,i]).then(function(){r&&(clearTimeout(r),r=null),e.g(e.a)},function(){e.j(e.a)})};var N={D:"serif",C:"sans-serif"},j=null;function R(){if(null===j){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return j}function B(t,e,n){for(var i in N)if(N.hasOwnProperty(i)&&e===t.f[N[i]]&&n===t.f[N[i]])return!0;return!1}function F(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=R()&&B(t,n,i)),e?a()-t.A>=t.w?R()&&B(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?Y(t,t.v):Y(t,t.B):function(t){setTimeout(s(function(){F(this)},t),50)}(t):Y(t,t.v)}function Y(t,e){setTimeout(s(function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),e(this.a)},t),0)}function H(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}O.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),F(this)};var W=null;function z(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&f(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),A(t,"active")):E(t.a))}function U(t){this.j=t,this.a=new I,this.h=0,this.f=this.g=!0}function V(t,e,n,i,r){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=r||null,a=i||{};if(0===n.length&&o)E(e.a);else{e.f+=n.length,o&&(e.j=o);var l,c=[];for(l=0;l<n.length;l++){var u=n[l],h=a[u.c],d=e.a,p=u;if(d.g&&f(d.f,[d.a.c("wf",p.c,C(p).toString(),"loading")]),A(d,"fontloading",p),d=null,null===W)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);W=p?42<parseInt(p[1],10):!m}else W=!1;d=W?new P(s(e.g,e),s(e.h,e),e.c,u,e.s,h):new O(s(e.g,e),s(e.h,e),e.c,u,e.s,t,h),c.push(d)}for(l=0;l<c.length;l++)c[l].start()}},0)}function G(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function X(t,e){this.c=t||K,this.a=[],this.f=[],this.g=e||""}H.prototype.g=function(t){var e=this.a;e.g&&f(e.f,[e.a.c("wf",t.c,C(t).toString(),"active")],[e.a.c("wf",t.c,C(t).toString(),"loading"),e.a.c("wf",t.c,C(t).toString(),"inactive")]),A(e,"fontactive",t),this.m=!0,z(this)},H.prototype.h=function(t){var e=this.a;if(e.g){var n=p(e.f,e.a.c("wf",t.c,C(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,C(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,C(t).toString(),"inactive")),f(e.f,i,r)}A(e,"fontinactive",t),z(this)},U.prototype.load=function(t){this.c=new l(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],r=n.timeout;!function(t){t.g&&f(t.f,[t.a.c("wf","loading")]),A(t,"loading")}(e);i=function(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}(t.a,n,t.c);var o=new H(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load(function(e,n,i){V(t,o,e,n,i)})}(this,new M(this.c,t),t)},G.prototype.load=function(t){var e=this,n=e.a.projectId,i=e.a.version;if(n){var r=e.c.o;g(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(i?"?v="+i:""),function(i){i?t([]):(r["__MonotypeConfiguration__"+n]=function(){return e.a},function e(){if(r["__mti_fntLst"+n]){var i,o=r["__mti_fntLst"+n](),s=[];if(o)for(var a=0;a<o.length;a++){var l=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(i=o[a].fontStyle+o[a].fontWeight,s.push(new S(l,i))):s.push(new S(l))}t(s)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+n}else t([])},q.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},s=new v;for(e=0,n=i.length;e<n;e++)m(this.c,i[e],y(s));var a=[];for(e=0,n=r.length;e<n;e++)if((i=r[e].split(":"))[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)a.push(new S(i[0],l[c]));else a.push(new S(i[0]));b(s,function(){t(a,o)})};var K="https://fonts.googleapis.com/css";function J(t){this.f=t,this.a=[],this.c={}}var Z={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function nt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function rt(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}nt.prototype.load=function(t){var e=new v,n=this.c,i=new X(this.a.api,this.a.text),r=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}(i,r);var o=new J(r);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,l=(a=a.split(",")).length,c=0;c<l;c++){var u;if((u=a[c]).match(/^[\w-]+$/))if(null==(d=et.exec(u.toLowerCase())))u="";else{if(u=null==(u=d[2])||""==u?"n":tt[u],null==(d=d[1])||""==d)d="4";else var h=Q[d],d=h||(isNaN(d)?"4":d.substr(0,1));u=[u,d].join("")}else u="";u&&s.push(u)}0<s.length&&(o=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Z[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=Z[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new S(r,o[i]))}}(o),m(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),y(e)),b(e,function(){t(o.a,o.c,it)})},rt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],s=e[r+1],a=0;a<s.length;a++)i.push(new S(o,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}},2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var s=n.fonts[r];i.a.push(new S(s.name,T("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var st=new U(window);st.a.c.custom=function(t,e){return new q(e,t)},st.a.c.fontdeck=function(t,e){return new ot(e,t)},st.a.c.monotype=function(t,e){return new G(e,t)},st.a.c.typekit=function(t,e){return new rt(e,t)},st.a.c.google=function(t,e){return new nt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,n,e,t))||(t.exports=i)}()},function(t,e,n){"use strict";n.r(e);n(1);var i=n(238),r=n.n(i),o=n(16),s=n.n(o),a=n(239),l=n.n(a),c=(n(279),n(281),n(282),n(288),n(290),n(291),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(5));class u extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("animation.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Animation",t.widthInPixels=600,t.widthInUnits=60,t.heightInPixels=200,t.heightInUnits=20,t.dataXOriginInPixels=0,t.dataYOriginInPixels=80,t.coordinateSystem="screen",t.objects=[],t}isCompleted(t,e,n,i,r){return e.length>0}componentStateHasStudentWork(t,e){return null!=t&&null!=t.studentData}}u.$inject=["$filter","StudentDataService","UtilService"];var h=u,d=n(6);n(235);class f extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p){super(t,e,i,r,a,l,c,u,h,d,f,p),this.$q=n,this.$timeout=o,this.AnimationService=s,this.width=800,this.height=600,this.pixelsPerXUnit=1,this.pixelsPerYUnit=1,this.dataXOriginInPixels=0,this.dataYOriginInPixels=0,this.idToSVGObject={},this.idToWhetherAuthoredObjectIsAnimating={};const m=this.$scope.componentState;this.svgId="svg_"+this.nodeId+"_"+this.componentId,this.setAnimationStateToStopped(),this.setCoordinateSystemToScreen(),this.setSpeed(3),this.initializeCoordinates(),this.isStudentMode()?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton):this.isGradingMode()&&(this.svgId=null!=m?"svg_"+this.nodeId+"_"+this.componentId+"_"+m.id:"svg_"+this.nodeId+"_"+this.componentId+"_"+this.workgroupId,this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0),this.isStudentMode()?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.AnimationService.componentStateHasStudentWork(m,this.componentContent)?this.setStudentWork(m):this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents():null!=m&&this.setStudentWork(m),this.hasMaxSubmitCount()&&!this.hasSubmitsLeft()&&this.disableSubmitButton(),this.disableComponentIfNecessary(),this.setupSVGAfterTimeout(),this.$scope.handleConnectedComponentStudentDataChanged=(t,e,n)=>{"Graph"===t.type&&this.updateObjectDatasFromDataSourceComponentState(n)},this.initializeScopeGetComponentState(this.$scope,"animationController"),this.broadcastDoneRenderingComponent()}setAnimationState(t){this.animationState=t}setAnimationStateToPlaying(){this.setAnimationState("playing")}setAnimationStateToPaused(){this.setAnimationState("paused")}setAnimationStateToStopped(){this.setAnimationState("stopped")}setCoordinateSystem(t){this.coordinateSystem=t}setCoordinateSystemToScreen(){this.setCoordinateSystem("screen")}setCoordinateSystemToCartesian(){this.setCoordinateSystem("cartesian")}hasStudentUsedAllSubmits(){return null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount}handleNodeSubmit(){this.submit("nodeSubmitButton")}initializeCoordinates(){null!=this.componentContent.widthInPixels&&""!=this.componentContent.widthInPixels&&(this.width=this.componentContent.widthInPixels,this.pixelsPerXUnit=this.componentContent.widthInPixels/this.componentContent.widthInUnits),null!=this.componentContent.heightInPixels&&""!=this.componentContent.heightInPixels&&(this.height=this.componentContent.heightInPixels,this.pixelsPerYUnit=this.componentContent.heightInPixels/this.componentContent.heightInUnits),null!=this.componentContent.dataXOriginInPixels&&""!=this.componentContent.dataXOriginInPixels&&(this.dataXOriginInPixels=this.componentContent.dataXOriginInPixels),null!=this.componentContent.dataYOriginInPixels&&""!=this.componentContent.dataYOriginInPixels&&(this.dataYOriginInPixels=this.componentContent.dataYOriginInPixels),null!=this.componentContent.coordinateSystem&&""!=this.componentContent.coordinateSystem&&(this.coordinateSystem=this.componentContent.coordinateSystem)}setupSVGAfterTimeout(){this.$timeout(()=>{this.setupSVG()})}setupSVG(){this.draw=SVG(this.svgId),this.createSVGObjects(),this.updateObjectDatasFromDataSources()}createSVGObjects(){for(let t of this.componentContent.objects){const e=t.id,n=t.type;let i=null;"image"==n?i=this.createSVGImage(t.image,t.width,t.height):"text"==n&&(i=this.createSVGText(t.text)),this.addIdToSVGObject(e,i),this.addIdToWhetherAuthoredObjectIsAnimating(e,!1),this.initializeObjectPosition(t)}}createSVGImage(t,e,n){return this.draw.image(t,e,n)}createSVGText(t){return null==t&&(t=""),this.draw.text(t)}addIdToSVGObject(t,e){this.idToSVGObject[t]=e}addIdToWhetherAuthoredObjectIsAnimating(t,e){this.idToWhetherAuthoredObjectIsAnimating[t]=e}initializeObjectImages(){let t=this.componentContent.objects;for(let e of t)if("image"==e.type){this.idToSVGObject[e.id].load(e.image)}}initializeObjectPositions(){for(let t of this.componentContent.objects)this.initializeObjectPosition(t)}dataXToPixelX(t){return null==t?this.dataXOriginInPixels:this.dataXOriginInPixels+t*this.pixelsPerXUnit}dataYToPixelY(t){return null==t?this.dataYOriginInPixels:this.dataYOriginInPixels+t*this.pixelsPerYUnit}initializeObjectPosition(t){let e=this.getPixelXForAuthoredObject(t),n=this.getPixelYForAuthoredObject(t);this.isUsingCartesianCoordinateSystem()&&(n=this.convertToCartesianCoordinateSystem(n));let i=t.id,r=this.getSVGObject(i);if(this.setPositionOfSVGObject(r,e,n),this.authoredObjectHasData(t)){const e=t.data;if(this.hasDataPointAtTimeZero(e)){const t=e[0];this.setPositionFromDataPoint(r,t)}}}getPixelXForAuthoredObject(t){const e=t.dataX,n=t.pixelX;let i=0;return null!=e?i=this.dataXToPixelX(e):null!=n&&(i=n),i}getPixelYForAuthoredObject(t){const e=t.dataY,n=t.pixelY;let i=0;return null!=e?i=this.dataYToPixelY(e):null!=n&&(i=n),i}getSVGObject(t){return this.idToSVGObject[t]}hasDataPointAtTimeZero(t){const e=t[0];return null!=e&&0===e.t}setPositionFromDataPoint(t,e){let n=e.x,i=e.y;if(null!=n&&""!=n&&void 0!==n){const e=this.dataXToPixelX(n);this.setXPositionOfSVGObject(t,e)}if(null!=i&&""!=i&&void 0!==i){let e=this.dataYToPixelY(i);this.isUsingCartesianCoordinateSystem()&&(e=this.convertToCartesianCoordinateSystem(e)),this.setYPositionOfSVGObject(t,e)}}setPositionOfSVGObject(t,e,n){t.attr({x:e,y:n})}setXPositionOfSVGObject(t,e){t.attr("x",e)}setYPositionOfSVGObject(t,e){t.attr("y",e)}startAnimation(){this.initializeObjectImages(),this.initializeObjectPositions();for(let t of this.componentContent.objects)this.animateObject(t)}showTimeInSVG(t){null==this.timerText&&this.initializeTimerText(),this.setTimerText(t+"");const e=this.getTimerTextX(t);this.setTimerPosition(e,0)}initializeTimerText(){this.timerText=this.draw.text("0").attr({fill:"#f03"})}getTimerTextX(t){const e=this.width;let n=e-30;return t>=10?n=e-38:t>=100&&(n=e-46),n}setTimerText(t){this.timerText.text(t)}setTimerPosition(t,e){this.timerText.attr({x:t,y:e})}updateObjectDatasFromDataSources(){for(let t of this.componentContent.objects)this.authoredObjectHasDataSource(t)&&this.updateObjectDataFromDataSource(t)}updateObjectDataFromDataSource(t){const e=t.dataSource,n=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(e.nodeId,e.componentId);null!=n&&("Graph"==n.componentType?this.setDataFromGraphComponentState(t,n):"Table"==n.componentType&&this.setDataFromTableComponentState(t,n))}updateObjectDatasFromDataSourceComponentState(t){for(let e of this.componentContent.objects)this.authoredObjectHasDataSource(e)&&this.isComponentStateFromDataSource(t,e.dataSource)&&this.updateObjectDataFromDataSourceComponentState(e,t)}isComponentStateFromDataSource(t,e){return null!=e&&e.nodeId==t.nodeId&&e.componentId==t.componentId}updateObjectDataFromDataSourceComponentState(t,e){"Graph"==e.componentType&&this.setDataFromGraphComponentState(t,e)}setDataFromGraphComponentState(t,e){t.data=this.getDataFromDataSourceComponentState(t.dataSource,e)}getDataFromDataSourceComponentState(t,e){const n=t.trialIndex,i=t.seriesIndex,r=t.tColumnIndex,o=t.xColumnIndex,s=t.yColumnIndex,a=this.getTrialFromComponentState(e,n),l=this.getSeriesFromTrial(a,i),c=this.getDataFromSeries(l);return this.convertSeriesDataToAnimationData(c,r,o,s)}getTrialFromComponentState(t,e){let n=null;const i=t.studentData;return null!=i.trials&&(n=i.trials[e]),n}getSeriesFromTrial(t,e){return t.series[e]}getDataFromSeries(t){return t.data}convertSeriesDataToAnimationData(t,e,n,i){const r=[];for(let o of t){let t={};null!=e&&(t.t=o[e]),null!=n&&(t.x=o[n]),null!=i&&(t.y=o[i]),r.push(t)}return r}animateObject(t){if(this.authoredObjectHasData(t)){let e=t.id,n=t.data,i=this.idToSVGObject[e],r=null;for(let o=0;o<n.length;o++){let s=n[o],a=n[o+1],l=s.image,c=s.t,u=this.dataXToPixelX(s.x),h=this.dataYToPixelY(s.y);if(this.isUsingCartesianCoordinateSystem()&&(h=this.convertToCartesianCoordinateSystem(h)),this.idToWhetherAuthoredObjectIsAnimating[e]=!0,this.isFirstDataPoint(o)&&(r=this.setInitialPositionOfSVGObject(c,i,u,h)),r=this.updateImageOfSVGObject(l,r,i,t,s,a),this.isLastDataPoint(n,o))this.animationCompletedPostProcessing(e,r);else{let t=null,e=null,n=null;null!=a&&(t=a.t,e=this.dataXToPixelX(a.x),n=this.dataYToPixelY(a.y)),this.isUsingCartesianCoordinateSystem()&&(n=this.convertToCartesianCoordinateSystem(n));let o=this.calculateTimeDiff(c,t);r=this.updatePositionOfSVGObject(i,r,c,o,e,n)}}}}setInitialPositionOfSVGObject(t,e,n,i){let r=null;if(0==t)e.attr({x:n,y:i});else{const o=this;r=e.animate(t*this.millisecondsPerDataTime).during(function(e,n,i,r){let s=t*e;o.displayAndBroadcastTime(s)}).after(function(){this.attr({x:n,y:i})})}return r}updatePositionOfSVGObject(t,e,n,i,r,o){const s=this;return t.animate(i*this.millisecondsPerDataTime).move(r,o).during(function(t,e,r,o){let a=n+i*t;s.displayAndBroadcastTime(a)})}animationCompletedPostProcessing(t,e){e.afterAll(()=>{this.idToWhetherAuthoredObjectIsAnimating[t]=!1,this.checkIfAllAnimatingIsDone()})}updateImageOfSVGObject(t,e,n,i,r,o){if(null!=t&&""!=t)this.updateSVGObjectImage(t,n,e);else if(null!=o){let t=this.getImageBasedOnMovement(i,r,o);null!=t&&this.updateSVGObjectImage(t,n,e)}return e}updateSVGObjectImage(t,e,n){return null==n?e.load(t):n=n.after(function(){this.load(t)}),n}calculateTimeDiff(t,e){return null==e?0:e-t}isFirstDataPoint(t){return 0==t}isLastDataPoint(t,e){return e==t.length-1}displayAndBroadcastTime(t){const e=this.truncateToOneDecimalPlace(t);this.showTimeInSVG(e),this.isPerformBroadcast()&&this.broadcastTime(t),null==this.lastBroadcastTime&&(this.lastBroadcastTime=currentTime)}truncateToOneDecimalPlace(t){return parseInt(10*t)/10}isPerformBroadcast(){let t=(new Date).getTime();return null==this.lastBroadcastTime||t-this.lastBroadcastTime>100}broadcastTime(t){const e={t:t};this.$scope.$emit("componentStudentDataChanged",{nodeId:this.nodeId,componentId:this.componentId,componentState:e}),this.lastBroadcastTime=(new Date).getTime()}getImageBasedOnMovement(t,e,n){return this.isYDataPointSame(e,n)&&!this.isXDataPointSame(e,n)?this.getImageMovingInX(t,e,n):this.isXDataPointSame(e,n)&&!this.isYDataPointSame(e,n)?this.getImageMovingInY(t,e,n):null}isXDataPointSame(t,e){return t.x==e.x}isYDataPointSame(t,e){return t.y==e.y}getImageMovingInX(t,e,n){return e.x<n.x?this.getImageMovingRight(t):e.x>n.x?this.getImageMovingLeft(t):null}getImageMovingInY(t,e,n){return e.y<n.y?this.isUsingCartesianCoordinateSystem()?this.getImageMovingUp(t):this.getImageMovingDown(t):e.y>n.y?this.isUsingCartesianCoordinateSystem()?this.getImageMovingDown(t):this.getImageMovingUp(t):null}getImageMovingUp(t){return null!=t.imageMovingUp&&""!=t.imageMovingUp?t.imageMovingUp:null}getImageMovingDown(t){return null!=t.imageMovingDown&&""!=t.imageMovingDown?t.imageMovingDown:null}getImageMovingLeft(t){return null!=t.imageMovingLeft&&""!=t.imageMovingLeft?t.imageMovingLeft:null}getImageMovingRight(t){return null!=t.imageMovingRight&&""!=t.imageMovingRight?t.imageMovingRight:null}checkIfAllAnimatingIsDone(){this.areAnyObjectsAnimating()||(this.setAnimationStateToStopped(),this.$timeout(()=>{this.$scope.$digest()}))}areAnyObjectsAnimating(){for(let t of this.componentContent.objects)if(this.idToWhetherAuthoredObjectIsAnimating[t.id])return!0;return!1}setStudentWork(t){const e=t.studentData;if(null!=e){const t=e.submitCounter;null!=t&&(this.submitCounter=t),this.processLatestStudentWork()}}confirmSubmit(t){let e=!1;return t<=0?alert(this.$translate("animation.youHaveNoMoreChances")):1==t?e=confirm(this.$translate("animation.youHaveOneChance",{numberOfSubmitsLeft:t})):t>1&&(e=confirm(this.$translate("animation.youHaveMultipleChances",{numberOfSubmitsLeft:t}))),e}studentDataChanged(){this.setIsDirty(!0),this.emitComponentDirty(!0),this.setIsSubmit(!0),this.emitComponentSubmitDirty(!0),this.clearSaveText(),this.createComponentState("change").then(t=>{this.$scope.$emit("componentStudentDataChanged",{nodeId:this.nodeId,componentId:this.componentId,componentState:t})})}createComponentState(t){const e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={submitCounter:this.submitCounter};return n.studentData=i,n.isSubmit=this.getIsSubmit(),this.setIsSubmit(!1),this.createComponentStateAdditionalProcessing(e,n,t),e.promise}createAutoScoreAnnotation(t){const e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoScoreAnnotation(e,n,i,r,o,t)}createAutoCommentAnnotation(t){const e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId(),i=this.nodeId,r=this.componentId,o=this.ConfigService.getWorkgroupId();return this.AnnotationService.createAutoCommentAnnotation(e,n,i,r,o,t)}getRevisions(){return this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId)}playButtonClicked(){this.setAnimationStateToPlaying(),this.startAnimation(),this.studentDataChanged()}pauseButtonClicked(){this.setAnimationStateToPaused();for(let t of this.componentContent.objects){let e=t.id;this.idToSVGObject[e].pause()}}resumeButtonClicked(){this.setAnimationStateToPlaying();for(let t of this.componentContent.objects){let e=t.id,n=this.idToSVGObject[e];this.idToWhetherAuthoredObjectIsAnimating[e]&&n.play()}}resetButtonClicked(){this.setAnimationStateToStopped();for(let t of this.componentContent.objects){let e=t.id,n=this.idToSVGObject[e],i=!0,r=!0;this.idToWhetherAuthoredObjectIsAnimating[e]&&n.play(),n.stop(i,r)}this.$timeout(()=>{this.displayAndBroadcastTime(0),this.initializeObjectImages(),this.initializeObjectPositions()},100)}isUsingCartesianCoordinateSystem(){return"cartesian"==this.coordinateSystem}convertToCartesianCoordinateSystem(t){return this.height-t}speedSliderChanged(){this.setSpeed(this.speedSliderValue),this.resetButtonClicked()}setSpeed(t){this.speedSliderValue=t,1==t?this.millisecondsPerDataTime=1e4:2==t?this.millisecondsPerDataTime=1e3:3==t?this.millisecondsPerDataTime=100:4==t?this.millisecondsPerDataTime=10:5==t&&(this.millisecondsPerDataTime=1)}getComponentByNodeIdAndComponentId(t,e){return this.ProjectService.getComponentByNodeIdAndComponentId(t,e)}authoredObjectHasData(t){return null!=t.data&&t.data.length>0}authoredObjectHasDataSource(t){return null!=t.dataSource}}f.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","$timeout","AnimationService","AnnotationService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var p=f;angular.module("animationComponentModule",["pascalprecht.translate"]).service("AnimationService",h).controller("AnimationController",p).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/animation/i18n")}]);var m=n(240),g=n.n(m);class v extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("audioOscillator.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="AudioOscillator",t.oscillatorTypes=["sine"],t.startingFrequency=440,t.oscilloscopeWidth=800,t.oscilloscopeHeight=400,t.gridCellSize=50,t.stopAfterGoodDraw=!0,t}isCompleted(t,e,n,i,r){if(e&&e.length){let t=e[e.length-1];return this.componentStateHasStudentWork(t)}return!1}componentStateHasStudentWork(t,e){if(null!=t){let e=t.studentData;if(null!=e&&null!=e.frequenciesPlayed&&e.frequenciesPlayed.length>0)return!0}return!1}}v.$inject=["$filter","StudentDataService","UtilService"];var y=v;class b extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p){super(t,e,i,r,s,l,c,u,h,d,f,p),this.$q=n,this.$timeout=o,this.AudioOscillatorService=a,this.frequenciesPlayed=[],this.frequenciesPlayedSorted=[],this.numberOfFrequenciesPlayed=0,this.minFrequencyPlayed=null,this.maxFrequencyPlayed=null,this.oscilloscopeId="oscilloscope"+this.componentId,this.initializeDefaultSettings(),this.setButtonTextToPlay(),this.setParametersFromComponentContent();const m=this.$scope.componentState;this.isStudentMode()?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.AudioOscillatorService.componentStateHasStudentWork(m,this.componentContent)?this.setStudentWork(m):this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents():this.AudioOscillatorService.componentStateHasStudentWork(m,this.componentContent)&&this.setStudentWork(m),this.hasMaxSubmitCount()&&!this.hasSubmitsLeft()&&this.disableSubmitButton(),this.disableComponentIfNecessary(),this.isGradingMode()||this.isGradingRevisionMode()||(this.initializeAudioContext(),this.drawOscilloscopeGridAfterTimeout()),this.initializeScopeGetComponentState(this.$scope,"audioOscillatorController"),this.broadcastDoneRenderingComponent()}initializeDefaultSettings(){this.isPlaying=!1,this.oscillatorType="sine",this.frequency=440,this.oscillatorTypes=[],this.oscilloscopeWidth=800,this.oscilloscopeHeight=400,this.gridCellSize=50,this.stopAfterGoodDraw=!0}initializeAudioContext(){this.audioContext=new AudioContext}drawOscilloscopeGridAfterTimeout(){this.$timeout(()=>{this.drawOscilloscopeGrid()},0)}cleanupBeforeExiting(t,e){this.isGradingMode()||(this.stop(),this.audioContext.close())}handleNodeSubmit(){this.submit("nodeSubmitButton")}setParametersFromComponentContent(){this.frequency=this.componentContent.startingFrequency,this.oscillatorTypes=this.componentContent.oscillatorTypes,this.componentContent.oscillatorTypes.length>0&&(this.oscillatorType=this.componentContent.oscillatorTypes[0]),this.oscilloscopeWidth=this.componentContent.oscilloscopeWidth,this.oscilloscopeHeight=this.componentContent.oscilloscopeHeight,this.gridCellSize=this.componentContent.gridCellSize,this.stopAfterGoodDraw=this.componentContent.stopAfterGoodDraw}setStudentWork(t){const e=t.studentData;null!=e&&(this.frequenciesPlayed=e.frequenciesPlayed,this.frequenciesPlayed.length>0&&(this.frequency=this.frequenciesPlayed[this.frequenciesPlayed.length-1]),this.frequenciesPlayedSorted=e.frequenciesPlayedSorted,this.numberOfFrequenciesPlayed=e.numberOfFrequenciesPlayed,this.minFrequencyPlayed=e.minFrequencyPlayed,this.maxFrequencyPlayed=e.maxFrequencyPlayed,this.submitCounter=e.submitCounter,this.attachments=e.attachments,this.processLatestStudentWork())}createComponentState(t){const e=this.$q.defer(),n=this.NodeService.createNewComponentState();return n.isSubmit=this.isSubmit,n.componentType="AudioOscillator",n.nodeId=this.nodeId,n.componentId=this.componentId,n.studentData={frequenciesPlayed:this.frequenciesPlayed,frequenciesPlayedSorted:this.frequenciesPlayedSorted,numberOfFrequenciesPlayed:this.numberOfFrequenciesPlayed,minFrequencyPlayed:this.minFrequencyPlayed,maxFrequencyPlayed:this.maxFrequencyPlayed,submitCounter:this.submitCounter},this.createComponentStateAdditionalProcessing(e,n,t),e.promise}togglePlay(){this.isAudioPlaying()?(this.stop(),this.setButtonTextToPlay()):(this.play(),this.setButtonTextToStop())}isAudioPlaying(){return this.isPlaying}setButtonTextToPlay(){this.playStopButtonText=this.$translate("audioOscillator.play")}setButtonTextToStop(){this.playStopButtonText=this.$translate("audioOscillator.stop")}play(){this.oscillator=this.audioContext.createOscillator(),this.oscillator.type=this.oscillatorType,this.oscillator.frequency.value=this.frequency,this.gain=this.audioContext.createGain(),this.gain.gain.value=.5,this.destination=this.audioContext.destination,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.oscillator.connect(this.gain),this.gain.connect(this.destination),this.gain.connect(this.analyser),this.oscillator.start(),this.goodDraw=!1,this.isPlaying=!0,this.drawOscilloscope(),this.addFrequencyPlayed(this.frequency),this.studentDataChanged()}addFrequencyPlayed(t){this.frequenciesPlayed.push(t),this.frequenciesPlayedSorted=this.UtilService.makeCopyOfJSONObject(this.frequenciesPlayed),this.frequenciesPlayedSorted.sort((t,e)=>t-e),this.numberOfFrequenciesPlayed=this.frequenciesPlayed.length,this.minFrequencyPlayed=Math.min(...this.frequenciesPlayed),this.maxFrequencyPlayed=Math.max(...this.frequenciesPlayed)}stop(){null!=this.oscillator&&this.oscillator.stop(),this.isPlaying=!1}drawOscilloscope(){if(!this.isPlaying)return;this.drawOscilloscopeGrid(),this.startDrawingAudioSignalLine();const t=this.drawOscilloscopePoints();this.isFirstRisingZeroCrossingIndexCloseToZero(t)&&(this.goodDraw=!0),this.isDrawAgain()&&requestAnimationFrame(()=>{this.drawOscilloscope()})}getTimeData(){const t=this.analyser.frequencyBinCount,e=new Uint8Array(t);return this.analyser.getByteTimeDomainData(e),e}startDrawingAudioSignalLine(){const t=document.getElementById(this.oscilloscopeId).getContext("2d");t.lineWidth=2,t.strokeStyle="rgb(0, 200, 0)",t.beginPath()}getSliceWidth(){const t=document.getElementById(this.oscilloscopeId).getContext("2d"),e=this.analyser.frequencyBinCount;return 1*t.canvas.width/e}drawOscilloscopePoints(){const t=document.getElementById(this.oscilloscopeId).getContext("2d"),e=t.canvas.height,n=this.getTimeData(),i=this.getSliceWidth();let r=0,o=0,s=0,a=!1,l=null,c=!1;for(let u=0;u<n.length;u++){const h=n[u]-128,d=n[u+1]-128;this.isFirstRisingZeroCrossingPoint(a,h,d)&&(a=!0,l=u),a&&(s=(o=(128-(n[u]-128))/128)*e/2,this.drawPoint(t,c,r,s),c||(c=!0),r+=i)}return t.stroke(),l}isFirstRisingZeroCrossingPoint(t,e,n){return!t&&(e<0||0==e)&&n>0}drawPoint(t,e,n,i){e?t.lineTo(n,i):t.moveTo(n,i)}isFirstRisingZeroCrossingIndexCloseToZero(t){return t>0&&t<10}isDrawAgain(){return!this.stopAfterGoodDraw||this.stopAfterGoodDraw&&!this.goodDraw}drawOscilloscopeGrid(){const t=document.getElementById(this.oscilloscopeId).getContext("2d"),e=t.canvas.width,n=t.canvas.height,i=this.gridCellSize;t.fillStyle="white",t.fillRect(0,0,e,n),t.lineWidth=2,t.strokeStyle="lightgrey",t.beginPath(),this.drawVerticalLines(t,e,n,i),this.drawHorizontalLines(t,e,n,i),t.stroke()}drawVerticalLines(t,e,n,i){let r=0;for(;r<e;)this.drawVerticalLine(t,r,n),r+=i}drawVerticalLine(t,e,n){t.moveTo(e,0),t.lineTo(e,n)}drawHorizontalLines(t,e,n,i){let r=n/2;for(;r>=0;)this.drawHorizontalLine(t,r,e),r-=i;for(r=n/2;r<n;)this.drawHorizontalLine(t,r,e),r+=i}drawHorizontalLine(t,e,n){t.moveTo(0,e),t.lineTo(n,e)}oscillatorTypeChanged(){this.drawOscilloscopeGrid(),this.isAudioPlaying()&&this.restartPlayer()}frequencyChanged(){this.drawOscilloscopeGrid(),this.isAudioPlaying()&&this.restartPlayer()}restartPlayer(){this.stop(),this.play()}createMergedComponentState(t){const e=this.NodeService.createNewComponentState();if(null!=t){const n={};for(let e=0;e<t.length;e++){const i=t[e];if(null!=i){let t=i.studentData;null!=t&&this.mergeStudentData(n,t)}}e.studentData=n}return e}mergeStudentData(t,e){if(null==t.frequenciesPlayed?t.frequenciesPlayed=e.frequenciesPlayed:t.frequenciesPlayed=t.frequenciesPlayed.concat(e.frequenciesPlayed),null==t.frequenciesPlayedSorted)t.frequenciesPlayedSorted=e.frequenciesPlayed;else{let e=this.UtilService.makeCopyOfJSONObject(t.frequenciesPlayed);e.sort(),t.frequenciesPlayedSorted=e}return null==t.numberOfFrequenciesPlayed?t.numberOfFrequenciesPlayed=e.numberOfFrequenciesPlayed:t.numberOfFrequenciesPlayed=t.numberOfFrequenciesPlayed+e.numberOfFrequenciesPlayed,null==t.minFrequencyPlayed?t.minFrequencyPlayed=e.minFrequencyPlayed:t.minFrequencyPlayed=Math.min(t.minFrequencyPlayed,e.minFrequencyPlayed),null==t.maxFrequencyPlayed?t.maxFrequencyPlayed=e.maxFrequencyPlayed:t.maxFrequencyPlayed=Math.max(t.maxFrequencyPlayed,e.maxFrequencyPlayed),t}}b.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","$timeout","AnnotationService","AudioOscillatorService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var _=b;angular.module("audioOscillatorComponentModule",["pascalprecht.translate"]).service("AudioOscillatorService",y).controller("AudioOscillatorController",_).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/audioOscillator/i18n")}]),n(410),n(54);class w extends c.a{constructor(t,e,n,i,r,o,s,a,l){super(e,a,l),this.$anchorScroll=t,this.$location=n,this.$q=i,this.$timeout=r,this.ConfigService=o,this.StudentAssetService=s}getComponentTypeLabel(){return this.$translate("conceptMap.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="ConceptMap",t.width=800,t.height=600,t.background=null,t.stretchBackground=null,t.nodes=[],t.linksTitle="",t.links=[],t.rules=[],t.starterConceptMap=null,t.customRuleEvaluator="",t.showAutoScore=!1,t.showAutoFeedback=!1,t.showNodeLabels=!0,t}isCompleted(t,e,n,i,r){let o=!1;if(e&&e.length){if(r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton)for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n.isSubmit&&n.studentData&&(1==n.isSubmit||null!=n.studentData.submitCounter&&n.studentData.submitCounter>0)){o=!0;break}}else{let t=e[e.length-1].studentData;null!=t&&null!=t.conceptMapData&&(o=!0)}}return o}newConceptMapNode(t,e,n,i,r,o,s,a,l,c){return new S(this,t,e,n,i,r,o,s,a,l,c)}newConceptMapLink(t,e,n,i,r,o,s,a,l,c){return new x(this,t,e,n,i,r,o,s,a,l,c)}getSlope(t,e,n,i){return n-t==0?null:(i-e)/(n-t)}calculateDistance(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}arrowPathArrays(t,e,n,i,r,o,s,a,l,c){if(t===n&&e===i)return[[""],[""]];var u=new this.coord(t,e),h=new this.coord(n,i),d=[],f=[],p=(h.x-u.x)*l,m=0===p?1:Math.max(Math.min(p,100),-100),g=m;m=m*(r?1:-1)>0?m:-1*m,g=g*(o?1:-1)>0?g:-1*g;var v=new this.coord(u.x+p/2,u.y-m),y=new this.coord(h.x-p/2,h.y-g),b=Math.sqrt(Math.pow(p/2,2)+Math.pow(m,2)),_=c*(p/2)/b,w=c*m/b,S=c*g/b;h=new this.coord(h.x-_,h.y-S),d.push("M",u.x+_,u.y-w),d.push("C",v.x,v.y,y.x,y.y,h.x,h.y);var x=s/this.getLengthOfCubicBezier(u,v,y,h),C=this.getPointOnCubicBezier(x,u,v,y,h),k=Math.atan2(h.y-C.y,h.x-C.x),T=k+a*Math.PI/180,M=k-a*Math.PI/180,E=new this.coord(h.x-s*Math.cos(T),h.y-s*Math.sin(T)),A=new this.coord(h.x-s*Math.cos(M),h.y-s*Math.sin(M));return f.push("M",h.x,h.y),f.push("L",E.x,E.y),f.push("L",A.x,A.y),f.push("L",h.x,h.y),[d,f]}coord(t,e){return t||(t=0),e||(e=0),{x:t=Math.round(1e3*t)/1e3,y:e=Math.round(1e3*e)/1e3}}getLengthOfCubicBezier(t,e,n,i){for(var r,o,s,a=0,l=0;l<10;l++){if(r=l/10,o=this.getPointOnCubicBezier(r,t,e,n,i),l>0){var c=o.x-s.x,u=o.y-s.y;a+=Math.sqrt(c*c+u*u)}s=o}return a}getPointOnCubicBezier(t,e,n,i,r){t<0&&(t=0),t>1&&(t=1);var o=new this.coord;return o.x=e.x*this.B1(t)+n.x*this.B2(t)+i.x*this.B3(t)+r.x*this.B4(t),o.y=e.y*this.B1(t)+n.y*this.B2(t)+i.y*this.B3(t)+r.y*this.B4(t),o}B1(t){return t*t*t}B2(t){return 3*t*t*(1-t)}B3(t){return 3*t*(1-t)*(1-t)}B4(t){return(1-t)*(1-t)*(1-t)}evaluateRuleByRuleName(t,e,n){var i=!1;if(!0===n)return!0;if(!1===n)return!1;var r=this.getRuleByRuleName(t,n);if(null==r){var o=this.getRulesByCategoryName(t,n),s=!0;if(null!=o)for(var a=0;a<o.length;a++){var l=o[a],c=this.evaluateRule(e,l);if(s?(i=c,s=!1):i=i&&c,!i)break}}else i=this.evaluateRule(e,r);return i}evaluateRule(t,e){var n=!1;if(null!=e)if("node"==e.type){var i=e.nodeLabel,r=this.getNodesByLabel(t,i).length,o=e.comparison,s=e.number;"exactly"==o?r==s&&(n=!0):"more than"==o?r>s&&(n=!0):"less than"==o&&r<s&&(n=!0),e.not&&(n=!n)}else if("link"==e.type){i=e.nodeLabel;var a=e.linkLabel,l=e.otherNodeLabel,c=this.getLinksByLabels(t,i,a,l).length;o=e.comparison,s=e.number;"exactly"==o?c==s&&(n=!0):"more than"==o?c>s&&(n=!0):"less than"==o&&c<s&&(n=!0),e.not&&(n=!n)}return n}getRuleByRuleName(t,e){var n=null;if(null!=e){var i=t.rules;if(null!=i)for(var r=0;r<i.length;r++){var o=i[r];null!=o&&e==o.name&&(n=o)}}return n}getRulesByCategoryName(t,e){var n=[];if(null!=t){var i=t.rules;if(null!=i)for(var r=0;r<i.length;r++){var o=i[r];if(null!=o){var s=o.categories;if(null!=s)for(var a=0;a<s.length;a++){if(e==s[a]){n.push(o);break}}}}}return n}getNodesByLabel(t,e){var n=[];if(null!=t){var i=t.nodes;if(null!=i)for(var r=0;r<i.length;r++){var o=i[r];null!=o&&(e!=o.label&&"any"!=e||n.push(o))}}return n}getLinksByLabels(t,e,n,i){var r=[];if(null!=t){var o=t.links;if(null!=o)for(var s=0;s<o.length;s++){var a=o[s];if(null!=a){var l=a.label,c=a.sourceNodeLabel,u=a.destinationNodeLabel;e!=c&&"any"!=e||n!=l&&"any"!=n||i!=u&&"any"!=i||r.push(a)}}}return r}any(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];if(this.evaluateRuleByRuleName(t,e,r))return!0}return!1}all(t,e,n){for(var i=!0,r=0;r<n.length;r++){var o=n[r],s=this.evaluateRuleByRuleName(t,e,o);i=i&&s}return i}populateConceptMapData(t,e){if(null!=e){var n=e.nodes,i=[];if(null!=n)for(var r=0;r<n.length;r++){var o=n[r],s=o.instanceId,a=o.originalId,l=o.fileName,c=o.label,u=o.x,h=o.y,d=o.width,f=o.height,p=this.newConceptMapNode(t,s,a,l,c,u,h,d,f,!0);i.push(p)}var m=e.links,g=[];if(null!=m)for(var v=0;v<m.length;v++){var y=m[v],b=(s=y.instanceId,a=y.originalId,y.sourceNodeInstanceId),_=y.destinationNodeInstanceId,w=(c=y.label,y.color),S=y.curvature,x=y.startCurveUp,C=y.endCurveUp,k=null,T=null;null!=b&&(k=this.getNodeById(i,b)),null!=_&&(T=this.getNodeById(i,_));var M=this.newConceptMapLink(t,s,a,k,T,c,w,S,x,C);g.push(M)}this.moveLinkTextToFront(g),this.moveNodesToFront(i),this.refreshLinkLabels(i,g)}}moveLinkTextToFront(t){for(var e=0;e<t.length;e++){var n=t[e];null!=n&&n.moveTextGroupToFront()}}moveNodesToFront(t){for(var e=0;e<t.length;e++){var n=t[e];if(null!=n){var i=n.getGroup();null!=i&&i.front()}}}refreshLinkLabels(t,e){if(null!=t)for(var n=0;n<t.length;n++){var i=t[n];if(null!=i){var r=i.getLabel();i.setLabel(r)}}if(null!=e)for(var o=0;o<e.length;o++){var s=e[o];if(null!=s){r=s.getLabel();s.setLabel(r)}}}getNodeById(t,e){var n=null;if(null!=e)for(var i=0;i<t.length;i++){var r=t[i];if(e==r.getId()){n=r;break}}return n}createImage(t,e,n){var i=this.$q.defer(),r=document.createElement("div");null!=e&&""!=e||(e=800),null!=n&&""!=n||(n=600);var o=SVG(r);if(o.width(e),o.height(n),null!=r){this.populateConceptMapData(o,t);var s=r.innerHTML;this.getHrefToBase64ImageReplacements(s,!0).then(t=>{for(var e=0;e<t.length;e++){var n=t[e],r=n.imageHref,o=r.lastIndexOf("/");-1!=o&&(r=r.substring(o+1));var a=n.base64Image,l=new RegExp(r,"g");s=s.replace(l,a)}var c=document.createElement("canvas"),u=c.getContext("2d"),h=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=(self.URL||self.webkitURL||self).createObjectURL(h),f=new Image,p=this.UtilService;f.onload=t=>{var e=t.target;c.width=e.width,c.height=e.height,u.drawImage(e,0,0);var n=c.toDataURL("image/png"),r=p.getImageObjectFromBase64String(n);this.StudentAssetService.uploadAsset(r).then(t=>{this.StudentAssetService.copyAssetForReference(t).then(e=>{if(null!=e){var n=e.url;this.StudentAssetService.deleteAsset(t),i.resolve(n)}})})},f.src=d})}return i.promise}getHrefToBase64ImageReplacements(t,e){for(var n=[],i=this.getImagesInSVG(t),r=0;r<i.length;r++){var o=i[r];e&&(o=this.ConfigService.getProjectAssetsDirectoryPath(!0)+"/"+o);var s=this.getBase64Image(o);n.push(s)}return this.$q.all(n)}getImagesInSVG(t){var e=[];if(null!=t)for(var n=/<image.*?xlink:href="(.*?)".*?\/?>/g,i=n.exec(t);null!=i;){var r=i[1];e.push(r),i=n.exec(t)}return e}getBase64Image(t){var e=this.$q.defer(),n=new Image,i=document.createElement("canvas"),r=i.getContext("2d");return n.onload=function(n){var o=n.target;i.width=o.width,i.height=o.height,r.drawImage(o,0,0);var s=i.toDataURL("image/png"),a={};a.imageHref=t,a.base64Image=s,e.resolve(a)},n.src=t,e.promise}componentStateHasStudentWork(t,e){if(null!=t){let n=t.studentData;if(null!=n){let t=[],i=[],r=n.conceptMapData;if(null!=r&&(null!=r.nodes&&(t=r.nodes),null!=r.links&&(i=r.links)),null==e){if(t.length>0)return!0;if(i.length>0)return!0}else{let n=e.starterConceptMap;if(null==n||""===n){if(t.length>0)return!0;if(i.length>0)return!0}else if(this.isStudentConceptMapDifferentThanStarterConceptMap(r,n))return!0}}}return!1}isStudentConceptMapDifferentThanStarterConceptMap(t,e){if(null!=t&&null!=e){let n=t.nodes,i=t.links,r=e.nodes,o=e.links;if(n.length!=r.length)return!0;for(let t=0;t<n.length;t++){let e=n[t],i=r[t];if(null!=e&&null!=i&&(e.originalId!=i.originalId||e.instanceId!=i.instanceId||e.x!=i.x||e.y!=i.y))return!0}if(i.length!=o.length)return!0;for(let t=0;t<i.length;t++){let e=i[t],n=o[t];if(null!=e&&null!=n&&(e.label!=n.label||e.originalId!=n.originalId||e.instanceId!=n.instanceId||e.sourceNodeOriginalId!=n.sourceNodeOriginalId||e.sourceNodeInstanceId!=n.sourceNodeInstanceId||e.destinationNodeOriginalId!=n.destinationNodeOriginalId||e.destinationNodeInstanceId!=n.destinationNodeInstanceId))return!0}}return!1}generateImageFromRenderedComponentState(t){let e=this.$q.defer(),n=angular.element("#svg_"+t.nodeId+"_"+t.componentId);if(null!=n&&n.length>0){n=n[0];let t=(new XMLSerializer).serializeToString(n);this.getHrefToBase64ImageReplacements(t).then(n=>{for(let e=0;e<n.length;e++){let i=n[e],r=i.imageHref,o=i.base64Image,s=new RegExp(r,"g");t=t.replace(s,o)}let i=document.createElement("canvas"),r=i.getContext("2d"),o=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),s=(self.URL||self.webkitURL||self).createObjectURL(o),a=new Image;a.onload=t=>{let n=t.target;i.width=n.width,i.height=n.height,r.drawImage(n,0,0);let o=i.toDataURL("image/png"),s=this.UtilService.getImageObjectFromBase64String(o,!1);this.StudentAssetService.uploadAsset(s).then(t=>{e.resolve(t)})},a.src=s})}return e.promise}getNextAvailableId(t,e){let n=1;const i=[];for(let n of t){const t=n.id,r=parseInt(t.replace(e,""));i.push(r)}if(i.length>0){const t=Math.max.apply(Math,i);isNaN(t)||(n=t+1)}return e+n}displayAnnotation(t,e){if(!1===e.displayToStudent)return!1;if("score"==e.type);else if("comment"==e.type);else{if("autoScore"==e.type)return t.showAutoScore;if("autoComment"==e.type)return t.showAutoFeedback}return!0}}class S{constructor(t,e,n,i,r,o,s,a,l,c,u){this.ConceptMapService=t,this.draw=e,this.id=n,this.originalId=i,this.filePath=r,null!=this.filePath&&(this.fileName=this.filePath.substring(this.filePath.lastIndexOf("/")+1)),this.label=o,this.showLabel=u,this.image=this.draw.image(this.filePath,l,c),this.width=l,this.height=c,this.group=this.draw.group(),this.highlighted=!1,this.deleteButtonColor="gray",this.connector=this.createConnector(),this.deleteButtonGroup=this.createDeleteButtonGroup(),this.border=this.createBorder(),this.x=s,this.y=a,this.outgoingLinks=[],this.incomingLinks=[],this.group.add(this.border),this.group.add(this.image),this.group.add(this.connector),this.group.add(this.deleteButtonGroup),u&&(this.textGroup=this.createTextGroup(),this.group.add(this.textGroup)),this.border.hide(),this.deleteButtonGroup.hide(),this.group.x(s),this.group.y(a)}toJSONObject(){var t={};t.originalId=this.originalId,t.instanceId=this.id,t.fileName=this.fileName,t.filePath=this.filePath,t.label=this.label,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.outgoingLinks=[],t.incomingLinks=[];for(var e=0;e<this.outgoingLinks.length;e++){var n=this.outgoingLinks[e],i=n.getId(),r=n.getOriginalId(),o=n.getLabel();(a={}).originalId=r,a.instanceId=i,a.label=o,t.outgoingLinks.push(a)}for(var s=0;s<this.incomingLinks.length;s++){var a,l=this.incomingLinks[s];i=l.getId(),r=l.getOriginalId(),o=l.getLabel();(a={}).originalId=r,a.instanceId=i,a.label=o,t.incomingLinks.push(a)}return t}createBorder(){return this.border=this.draw.rect(this.width,this.height),this.border.fill("none"),this.border.stroke({color:"#333333",opacity:.2,width:2}),this.border}createConnector(){return this.connector=this.draw.circle(),this.connector.radius(10),this.connector.cx(this.width/2),this.connector.cy(0),this.connector.fill({color:"#cccccc",opacity:.4}),this.connector.stroke({color:"#333333",opacity:.2}),this.connector}createDeleteButtonGroup(){this.deleteButtonGroup=this.draw.group();this.deleteButtonCircle=this.draw.circle(),this.deleteButtonCircle.radius(10),this.deleteButtonCircle.cx(this.width),this.deleteButtonCircle.cy(0),this.deleteButtonCircle.fill({opacity:0}),this.deleteButtonCircle.stroke({color:"#333333",opacity:.2,width:2});return this.deleteButtonX=this.draw.path("M0,-7L0,7M-7,0L7,0"),this.deleteButtonX.stroke({color:"#333333",opacity:.2,width:2}),this.deleteButtonX.transform({rotation:45}),this.deleteButtonX.translate(this.width,0),this.deleteButtonX.attr("pointer-events","none"),this.deleteButtonGroup.add(this.deleteButtonCircle),this.deleteButtonGroup.add(this.deleteButtonX),this.deleteButtonGroup}createTextGroup(){this.textGroup=this.draw.group(),this.textRect=this.draw.rect(100,15),this.textRect.attr("fill","white"),this.textRect.attr("stroke","black"),this.textRect.attr("x",0),this.textRect.attr("y",10),this.textRect.attr("width",100),this.textRect.attr("height",20),this.textRect.radius(5),this.text=this.draw.text(this.label),this.text.attr("x",5),this.text.attr("y",9),this.text.font({family:"Arial",size:12}),this.text.style("user-select:none"),this.text.node.setAttribute("user-select","none"),this.text.node.setAttribute("style","user-select:none"),this.textGroup.add(this.textRect),this.textGroup.add(this.text),this.group.add(this.textGroup);var t=0;try{var e=this.text.node.getBBox();t=0==e.width?this.calculateTextRectWidth(this.label):e.width+10}catch(e){t=this.calculateTextRectWidth(this.label)}this.textRect.attr("width",t);var n=this.getImageWidth()/2,i=this.getImageHeight();return this.textGroup.cx(n),this.textGroup.cy(i),this.textGroup}getId(){return this.id}getOriginalId(){return this.originalId}getGroupId(){var t=null;return null!=this.group&&(t=this.group.id()),t}getLabel(){return this.label}setLabel(t){this.label=t,this.text.text(t);var e=0;try{var n=this.text.node.getBBox();e=0==n.width?this.calculateTextRectWidth(this.label):n.width+10}catch(t){e=this.calculateTextRectWidth(this.label)}this.textRect.attr("width",e);var i=this.getImageWidth()/2,r=this.getImageHeight();this.textGroup.cx(i),this.textGroup.cy(r)}cx(){var t=0;null!=this.group&&null!=this.image&&(t=this.group.x()+this.image.cx());return t}cy(){var t=0;null!=this.group&&null!=this.image&&(t=this.group.y()+this.image.cy());return t}connectorCX(){var t=0;null!=this.group&&null!=this.image&&(t=this.group.x()+this.connector.cx());return t}connectorCY(){var t=0;null!=this.group&&null!=this.image&&(t=this.group.y()+this.connector.cy());return t}isHighlighted(t){return null!=t&&(this.highlighted=t),this.highlighted}getGroup(){return this.group}showDeleteButton(){this.deleteButtonGroup.show()}hideDeleteButton(){this.deleteButtonGroup.hide()}showBorder(){this.border.show()}hideBorder(){this.border.hide()}getConnector(){return this.connector}getConnectorId(){var t=null;return null!=this.connector&&(t=this.connector.id()),t}getGroupX(){var t=0;return null!=this.group&&(t=this.group.x()),t}getGroupY(){var t=0;return null!=this.group&&(t=this.group.y()),t}getImageX(){var t=this.getGroupX()+this.image.x(),e=this.getGroup();if(null!=e){var n=e.bbox();if(null!=n)t-=n.x}return t}getImageY(){var t=this.getGroupY()+this.image.y(),e=this.getGroup();null!=e&&(t-=e.bbox().y);return t}getImageWidth(){var t=0;return null!=this.image&&(t=this.image.width()),t}getImageHeight(){var t=0;return null!=this.image&&(t=this.image.height()),t}setNodeMouseOver(t){null!=this.group&&this.group.mouseover(t)}setNodeMouseOut(t){null!=this.group&&this.group.mouseout(t)}setNodeMouseDown(t){null!=this.group&&this.group.mousedown(t)}setNodeMouseUp(t){null!=this.group&&this.group.mouseup(t)}setNodeMouseClick(t){null!=this.group&&this.image.click(t)}setConnectorMouseDown(t){null!=this.connector&&this.connector.mousedown(t)}setDeleteButtonMouseDown(t){null!=this.deleteButtonCircle&&this.deleteButtonCircle.mousedown(t)}setDeleteButtonMouseOver(t){null!=this.deleteButtonCircle&&this.deleteButtonCircle.mouseover(t)}setDeleteButtonMouseOut(t){null!=this.deleteButtonCircle&&this.deleteButtonCircle.mouseout(t)}setDragMove(t){null!=this.group&&this.group.on("dragmove",t)}setX(t){this.x=t,this.group.x(t)}setY(t){this.y=t,this.group.y(t)}addOutgoingLink(t){null!=t&&this.outgoingLinks.push(t)}removeOutgoingLink(t){if(null!=t)for(var e=0;e<this.outgoingLinks.length;e++){if(t==this.outgoingLinks[e]){this.outgoingLinks.splice(e,1);break}}}getOutgoingLinks(){return this.outgoingLinks}addIncomingLink(t){null!=t&&this.incomingLinks.push(t)}removeIncomingLink(t){if(null!=t)for(var e=0;e<this.incomingLinks.length;e++){if(t==this.incomingLinks[e]){this.incomingLinks.splice(e,1);break}}}getIncomingLinks(){return this.incomingLinks}dragMove(t){var e=this.getGroup(),n=this.cx(),i=this.cy();this.x=e.x(),this.y=e.y();var r=this.outgoingLinks,o=this.incomingLinks;if(null!=r){for(var s=0;s<r.length;s++){var a=r[s],l=n,c=i;f=(h=a.getNearestPointToDestinationNode(l,c)).x,p=h.y,a.updateCoordinates(l,c,f,p)}for(var u=0;u<o.length;u++){var h,d=o[u],f=(l=d.x1(),c=d.y1(),(h=d.getNearestPointToDestinationNode(l,c)).x),p=h.y;d.updateCoordinates(l,c,f,p)}}null!=this.controller&&this.controller.studentDataChanged(),e.front()}remove(){this.group.draggable(!1),this.group.remove(),this.image.remove(),this.connector.remove(),this.deleteButtonCircle.remove(),this.deleteButtonX.remove(),this.deleteButtonGroup.remove();for(var t=0;t<this.outgoingLinks.length;t++){var e=this.outgoingLinks[t];null!=e&&(e.remove(),t--)}for(var n=0;n<this.incomingLinks.length;n++){var i=this.incomingLinks[n];null!=i&&(i.remove(),n--)}}getLinksToDestination(t){for(var e=[],n=0;n<this.outgoingLinks.length;n++){var i=this.outgoingLinks[n];null!=i&&t==i.destinationNode&&e.push(i)}return e}calculateTextRectWidth(t){var e=0;return null!=t&&(e=6*t.length+10),e}}class x{constructor(t,e,n,i,r,o,s,a,l,c,u){(this.ConceptMapService=t,this.draw=e,this.id=n,this.originalId=i,this.head=null,this.path=null,this.color=a,null==this.color&&(this.color="blue"),this.highlighted=!1,this.group=this.draw.group(),this.textPercentageLocationOnLink=.6,this.sourceNode=r,this.destinationNode=o,this.curvature=l,null==this.curvature&&(this.curvature=.5),this.startCurveUp=c,this.endCurveUp=u,null==this.startCurveUp||null==this.endCurveUp)&&(0==Math.floor(2*Math.random())?(this.startCurveUp=!1,this.endCurveUp=!1):(this.startCurveUp=!0,this.endCurveUp=!0));this.curvedLink=!0;var h=this.sourceNode.cx(),d=this.sourceNode.cy(),f=h,p=d;if(null!=this.destinationNode){var m=this.getNearestPointToDestinationNode(h,d);f=m.x,p=m.y,this.connectLinkToNodes()}if(this.curvedLink){var g=this.calculateCurvedLine(h,d,f,p),v=g[0],y=g[1];this.head=this.draw.path(y.toString()),this.path=this.draw.path(v.toString())}else this.path=this.draw.path("M"+h+","+d+" L"+f+","+p);this.path.attr("stroke",this.color),this.path.attr("stroke-width",3),this.path.attr("fill","transparent"),this.head.attr("stroke",this.color),this.head.attr("fill",this.color),this.head.attr("pointer-events","none"),this.path.attr("x1",h),this.path.attr("y1",d),this.path.attr("x2",f),this.path.attr("y2",p),this.group.add(this.path),this.group.add(this.head),this.createTextGroup(),this.setLabel(s),null==this.label||""==this.label?this.hideTextGroup():this.showTextGroup(),this.createDeleteButtonGroup()}toJSONObject(){var t={};return t.originalId=this.originalId,t.instanceId=this.id,t.color=this.color,t.label=this.label,t.curvature=this.curvature,t.startCurveUp=this.startCurveUp,t.endCurveUp=this.endCurveUp,t.sourceNodeOriginalId=this.sourceNode.getOriginalId(),t.sourceNodeInstanceId=this.sourceNode.getId(),t.sourceNodeLabel=this.sourceNode.getLabel(),t.destinationNodeOriginalId=this.destinationNode.getOriginalId(),t.destinationNodeInstanceId=this.destinationNode.getId(),t.destinationNodeLabel=this.destinationNode.getLabel(),t}getId(){return this.id}getOriginalId(){return this.originalId}getGroupId(){return this.group.id()}x1(){return this.path.attr("x1")}y1(){return this.path.attr("y1")}x2(){return this.path.attr("x2")}y2(){return this.path.attr("y2")}setOriginalId(t){this.originalId=t}getLabel(){return this.label}isHighlighted(t){return null!=t&&(this.highlighted=t),this.highlighted}updateCoordinates(t,e,n,i,r){this.path.array();if(this.curvedLink){null==t&&(t=this.path.attr("x1")),null==e&&(e=this.path.attr("y1")),null==n&&(n=this.path.attr("x2")),null==i&&(i=this.path.attr("y2"));var o=this.calculateCurvedLine(t,e,n,i,r),s=o[0],a=o[1];this.head.plot(a.toString()),this.path.plot(s.toString())}else null==t&&(t=this.path.attr("x1")),null==e&&(e=this.path.attr("y1")),null==n&&(n=this.path.attr("x2")),null==i&&(i=this.path.attr("y2")),this.path.plot("M"+t+","+e+" L"+n+","+i);if(this.path.attr("x1",t),this.path.attr("y1",e),this.path.attr("x2",n),this.path.attr("y2",i),null!=this.deleteButtonGroup){var l=this.getDeleteButtonLocation();this.deleteButtonGroup.x(l.x),this.deleteButtonGroup.y(l.y)}if(null!=this.textGroup){var c=this.path.node.getTotalLength(),u=this.path.node.getPointAtLength(c*this.textPercentageLocationOnLink);this.textGroup.cx(u.x),this.textGroup.cy(u.y)}}calculateCurvedLine(t,e,n,i,r){var o,s,a,l=t,c=e,u=n,h=i;return a=this.curvature,o=this.startCurveUp,s=this.endCurveUp,this.ConceptMapService.arrowPathArrays(l,c,u,h,o,s,15,45,a,10)}setDestination(t){if(null!=t){var e=this.path.attr("x1"),n=this.path.attr("y1");this.destinationNode=t;var i=!1,r="";0==this.curvature?r="straight":this.startCurveUp&&this.endCurveUp?r="up":this.startCurveUp||this.endCurveUp||(r="down");for(var o=this.sourceNode.getLinksToDestination(t),s=[],a=0;a<o.length;a++){var l=o[a];if(null!=l){var c=l.curvature,u=l.startCurveUp,h=l.endCurveUp,d="";0==c?d="straight":u&&h?d="up":u||h||(d="down"),r==d&&(i=!0),s.push(d)}}i&&(-1==s.indexOf("up")?(this.curvature=.5,this.startCurveUp=!0,this.endCurveUp=!0):-1==s.indexOf("straight")?(this.curvature=0,this.startCurveUp=!0,this.endCurveUp=!0):-1==s.indexOf("down")&&(this.curvature=.5,this.startCurveUp=!1,this.endCurveUp=!1));var f=this.getNearestPointToDestinationNode(e,n),p=f.x,m=f.y;this.updateCoordinates(e,n,p,m,!1),this.connectLinkToNodes(),this.hideDeleteButton()}}getNearestPointToDestinationNode(t,e){var n=this.destinationNode.getImageX(),i=this.destinationNode.getImageY();i-=25;var r=this.destinationNode.getImageWidth(),o=this.destinationNode.getImageHeight();return o+=25,null==t&&null==e&&(t=this.path.attr("x1"),e=this.path.attr("y1")),this.getNearestPointInPerimeter(n,i,r,o,t,e)}getNearestPointInPerimeter(t,e,n,i,r,o){var s=t+n,a=e+i,l=(r=this.clamp(r,t,s),o=this.clamp(o,e,a),Math.abs(r-t)),c=Math.abs(r-s),u=Math.abs(o-e),h=Math.abs(o-a),d=Math.min(l,c,u,h),f={};return d==u?(f.x=r,f.y=e):d==h?(f.x=r,f.y=a):d==l?(f.x=t,f.y=o):(f.x=s,f.y=o),f}clamp(t,e,n){return Math.max(e,Math.min(n,t))}setColor(t){null!=t&&(this.color=t,this.path.attr("stroke",this.color),this.head.attr("stroke",this.color),this.head.attr("fill",this.color),this.deleteButton.attr("stroke",this.color),this.deleteButtonX.attr("stroke",this.color))}setLabel(t){if(null!=t){this.label=t,this.text.text(t),this.showTextGroup();var e=0;try{var n=this.text.node.getBBox();e=0==n.width?this.calculateTextRectWidth(this.label):n.width+10}catch(t){e=this.calculateTextRectWidth(this.label)}this.textRect.attr("width",e);var i=this.path.node.getTotalLength(),r=this.path.node.getPointAtLength(i*this.textPercentageLocationOnLink);this.textGroup.cx(r.x),this.textGroup.cy(r.y)}}connectLinkToNodes(){null!=this.sourceNode&&null!=this.destinationNode&&(this.sourceNode.addOutgoingLink(this),this.destinationNode.addIncomingLink(this))}createDeleteButtonGroup(){this.deleteButtonGroup=this.draw.group();this.invisibleCircle=this.draw.circle(),this.invisibleCircle.radius(30),this.invisibleCircle.fill({opacity:0});this.deleteButton=this.draw.circle(),this.deleteButton.radius(10),this.deleteButton.fill({opacity:0}),this.deleteButton.stroke({color:this.color,opacity:1,width:2});var t=this.deleteButton.cx(),e=this.deleteButton.cy(),n="M"+t+","+(e-7)+"L"+t+","+(e+7)+"M"+(t-7)+","+e+"L"+(t+7)+","+e;this.deleteButtonX=this.draw.path(n),this.deleteButtonX.stroke({color:this.color,opacity:1,width:2}),this.deleteButtonX.rotate(45),this.deleteButtonX.attr("pointer-events","none"),this.deleteButtonGroup.add(this.invisibleCircle),this.deleteButtonGroup.add(this.deleteButton),this.deleteButtonGroup.add(this.deleteButtonX);var i=this.getDeleteButtonLocation(),r=i.x,o=i.y;this.deleteButtonGroup.x(r),this.deleteButtonGroup.y(o),this.deleteButtonGroup.mouseover(t=>{this.deleteButtonGroupMouseOver(t)}),this.deleteButtonGroup.mouseout(t=>{this.deleteButtonGroupMouseOut(t)}),this.group.add(this.deleteButtonGroup),this.deleteButtonGroup.hide()}deleteButtonGroupMouseOver(t){this.showDeleteButton()}deleteButtonGroupMouseOut(t){this.highlighted||this.hideDeleteButton()}setDeleteButtonClicked(t){this.deleteButton.click(t)}setLinkMouseDown(t){null!=this.group&&this.group.mousedown(t)}setLinkTextMouseDown(t){null!=this.textGroup&&this.textGroup.mousedown(t)}setLinkMouseOver(t){null!=this.group&&this.group.mouseover(t)}setLinkMouseOut(t){null!=this.group&&this.group.mouseout(t)}getDeleteButtonLocation(){var t,e,n,i,r,o,s,a,l=this.path.node;t=l.getTotalLength(),n=l.getPointAtLength(t),t>50?(e=l.getPointAtLength(t-35),r=n.x-e.x,o=n.y-e.y,i=18/35*(r>0?1:-1),s=e.x+i*o,a=e.y-i*r):(s=0,a=0);var c={};return c.x=s,c.y=a,c}showDeleteButton(){null!=this.deleteButtonGroup&&this.deleteButtonGroup.show()}hideDeleteButton(){null!=this.deleteButtonGroup&&this.deleteButtonGroup.hide()}createTextGroup(){this.textGroup=this.draw.group(),this.textRect=this.draw.rect(100,15),this.textRect.attr("fill","white"),this.textRect.attr("stroke","black"),this.textRect.attr("x",0),this.textRect.attr("y",10),this.textRect.attr("width",100),this.textRect.attr("height",20),this.textRect.radius(5);this.text=this.draw.text(""),this.text.attr("x",5),this.text.attr("y",9),this.text.font({family:"Arial",size:12}),this.text.style("user-select:none"),this.text.node.setAttribute("user-select","none"),this.text.node.setAttribute("style","user-select:none"),this.textGroup.add(this.textRect),this.textGroup.add(this.text);var t=0;try{var e=this.text.node.getBBox();t=0==e.width?this.calculateTextRectWidth(this.label):e.width+10}catch(e){t=this.calculateTextRectWidth(this.label)}this.textRect.attr("width",t);var n=this.path.node.getTotalLength(),i=this.path.node.getPointAtLength(n*this.textPercentageLocationOnLink);return this.textGroup.cx(i.x),this.textGroup.cy(i.y),this.textGroup.hide(),this.textGroup.node.linkGroupId=this.group.id(),this.textGroup}moveTextGroupToFront(){this.textGroup.front()}showTextGroup(){null!=this.textGroup&&this.textGroup.show()}hideTextGroup(){null!=this.textGroup&&this.textGroup.hide()}remove(){null!=this.sourceNode&&this.sourceNode.removeOutgoingLink(this),null!=this.destinationNode&&this.destinationNode.removeIncomingLink(this),null!=this.path&&this.path.remove(),null!=this.head&&this.head.remove(),null!=this.deleteButtonGroup&&this.deleteButtonGroup.remove(),null!=this.textGroup&&this.textGroup.remove(),null!=this.group&&this.group.remove()}calculateTextRectWidth(t){var e=0;return null!=t&&(e=6*t.length+10),e}}w.$inject=["$anchorScroll","$filter","$location","$q","$timeout","ConfigService","StudentAssetService","StudentDataService","UtilService"];var C=w,k=n(241);angular.module("conceptMapComponentModule",["pascalprecht.translate"]).service("ConceptMapService",C).controller("ConceptMapController",k.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/conceptMap/i18n")}]);var T=n(242),M=n.n(T),E=n(243),A=n.n(E);class I{constructor(t,e,n,i,r,o,s){if(this.AnnotationService=i,this.ConfigService=r,this.ProjectService=o,this.UtilService=s,this.component=null,this.value=null,this.runId=r.getRunId(),null!=this.nodeId&&null!=this.componentId&&(this.component=this.ProjectService.getComponentByNodeIdAndComponentId(this.nodeId,this.componentId),this.component&&(this.gradingMaxScore=this.component.maxScore)),"student"===this.mode){if(!this.annotation){let t={};t.nodeId=this.nodeId,t.componentId=this.componentId,t.fromWorkgroupId=this.fromWorkgroupId,t.toWorkgroupId=this.toWorkgroupId,t.type=this.type,t.studentWorkId=this.componentStateId,t.notebookItemId=this.notebookItemId,this.annotation=this.AnnotationService.getLatestAnnotation(t)}if(null!=this.annotation){let t=this.annotation.data,e=angular.fromJson(t);e&&(this.value=e.value)}}else if("grading"===this.mode){let t={};t.nodeId=this.nodeId,t.componentId=this.componentId,t.fromWorkgroupId=this.fromWorkgroupId,t.toWorkgroupId=this.toWorkgroupId,t.type=this.type,t.studentWorkId=this.componentStateId,t.notebookItemId=this.notebookItemId,this.active?this.annotation=this.AnnotationService.getLatestAnnotation(t):this.annotation=this.AnnotationService.getAnnotation(t),null!=this.annotation&&this.componentStateId==this.annotation.studentWorkId&&(this.annotationId=this.annotation.id);let e=this.ConfigService.getUserInfoByWorkgroupId(this.toWorkgroupId);null!=e&&(this.periodId=e.periodId),null!=this.annotation&&null!=this.annotation.data&&(this.value=this.annotation.data.value)}}postAnnotation(){if(null!=this.runId&&null!=this.periodId&&null!=this.nodeId&&null!=this.componentId&&null!=this.fromWorkgroupId&&null!=this.toWorkgroupId&&null!=this.type&&null!=this.value){let t=(new Date).getTime(),e=this.value,n={value:e=this.UtilService.convertStringToNumber(e)},i=this.AnnotationService.createAnnotation(this.annotationId,this.runId,this.periodId,this.fromWorkgroupId,this.toWorkgroupId,this.nodeId,this.componentId,this.componentStateId,this.localNotebookItemId,this.notebookItemId,this.type,n,t);this.AnnotationService.saveAnnotation(i).then(t=>{var e=t;null!=e&&null==this.annotationId&&(this.annotationId=e.id)})}}}I.$inject=["$scope","$element","$attrs","AnnotationService","ConfigService","ProjectService","UtilService"];var $={bindings:{annotation:"<",type:"@",mode:"<",nodeId:"<",componentId:"<",fromWorkgroupId:"<",toWorkgroupId:"<",componentStateId:"<",notebookItemId:"<",active:"<",maxScore:"<"},templateUrl:"wise5/directives/annotation/annotation.html",controller:I,controllerAs:"annotationController"};class D{constructor(t,e,n){n.$watch(()=>this.data,i=>{e.html(i),t(e.contents())(n)})}}D.$inject=["$compile","$element","$scope"];var L={bindings:{data:"<"},controller:D},P=n(244),O=n.n(P);class N{constructor(t,e,n,i,r,o,s,a){this.$scope=t,this.$filter=n,this.$mdDialog=i,this.ConfigService=o,this.ProjectService=s,this.StudentDataService=a,this.$translate=this.$filter("translate"),this.maxScoreDisplay=parseInt(this.maxScore)>0?"/"+this.maxScore:"",this.themeSettings=this.ProjectService.getThemeSettings(),this.hideComponentScores=this.themeSettings.hideComponentScores,this.nodeId=null,this.componentId=null,this.latestAnnotationTime=null,this.isNew=!1,this.label="",this.icon="person",this.showScore=!0,this.showComment=!0,this.$scope.$on("studentWorkSavedToServer",(t,e)=>{let n=e.studentWork.nodeId,i=e.studentWork.componentId;n===this.nodeId&&i===this.componentId&&(this.isNew=!1)}),this.$onChanges=t=>{this.processAnnotations()}}closeDialog(){this.$mdDialog.hide()}getLatestAnnotation(){let t=null;if(this.annotations.comment||this.annotations.score){let e=this.annotations.comment?this.annotations.comment.serverSaveTime:0,n=this.annotations.score?this.annotations.score.serverSaveTime:0;e>=n?t=this.annotations.comment:n>e&&(t=this.annotations.score)}return t}getLatestAnnotationTime(){let t=this.getLatestAnnotation(),e=null;if(t){let n=t.serverSaveTime;e=this.ConfigService.convertToClientTimestamp(n)}return e}getLatestVisitTime(){let t=this.StudentDataService.getEventsByNodeId(this.nodeId),e=null;for(let n=t.length-1;n>0;n--){let i=t[n];if("nodeExited"===i.event){e=this.ConfigService.convertToClientTimestamp(i.serverSaveTime);break}}return e}getLatestSaveTime(){let t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId),e=null;return t&&(e=this.ConfigService.convertToClientTimestamp(t.serverSaveTime)),e}isNewAnnotation(){let t=this.getLatestVisitTime(),e=this.getLatestSaveTime(),n=this.getLatestAnnotationTime(),i=!0;return t&&t>n&&(i=!1),e&&e>n&&(i=!1),i}setLabelAndIcon(){let t=this.getLatestAnnotation();t&&("autoComment"===t.type||"autoScore"===t.type?(this.label=this.$translate("automatedFeedbackLabel"),this.icon="keyboard"):(this.label=this.$translate("teacherFeedbackLabel"),this.icon="person"))}processAnnotations(){null!=this.annotations&&(this.annotations.comment||this.annotations.score)&&(this.nodeId=this.annotations.comment?this.annotations.comment.nodeId:this.annotations.score.nodeId,this.componentId=this.annotations.comment?this.annotations.comment.componentId:this.annotations.score.nodeId,this.showScore=null!=this.annotations.score&&this.ProjectService.displayAnnotation(this.annotations.score),this.showComment=null!=this.annotations.comment&&this.ProjectService.displayAnnotation(this.annotations.comment),this.setLabelAndIcon())}}N.$inject=["$scope","$element","$filter","$mdDialog","$timeout","ConfigService","ProjectService","StudentDataService"];var j={bindings:{annotations:"<",maxScore:"<"},templateUrl:"wise5/directives/componentAnnotations/componentAnnotations.html",controller:N,controllerAs:"componentAnnotationsCtrl"};class R{constructor(t){t.bind("keydown",function(t){if(8===t.keyCode){let e=t.target.nodeName,n=t.target.type;null!=e&&(e=e.toLowerCase()),null!=n&&(n=n.toLowerCase());let i="true"===t.target.contentEditable;"input"===e&&"text"===n||"input"===e&&"password"===n||"input"===e&&"file"===n||"input"===e&&"search"===n||"input"===e&&"email"===n||"input"===e&&"number"===n||"input"===e&&"date"===n||"textarea"===e||i||t.preventDefault()}})}}R.$inject=["$document"];var B={bindings:{},controller:R},F=n(245);class Y{constructor(t,e,n,i,r,o){this.$filter=t,this.$mdDialog=e,this.$rootScope=n,this.$scope=i,this.$timeout=r,this.AnnotationService=o,this.$translate=this.$filter("translate"),this.active=!1,this.$onInit=()=>{this.setModel()},this.$scope.$on("annotationSavedToServer",(t,e)=>{this.setModel()}),this.$rootScope.$on("nodeStatusesChanged",(t,e)=>{this.setModel()}),this.$rootScope.$on("displayGlobalAnnotations",(t,e)=>{this.$timeout(()=>{this.show()},300)})}setModel(){this.AnnotationService.getActiveGlobalAnnotationGroups().length?this.visible=!0:this.visible=!1}show(){function t(t,e){t.close=function(){e.hide()}}this.$mdDialog.show({template:'<md-dialog aria-label="Global Feedback Dialog">\n                        \x3c!--<md-toolbar md-theme="light">\n                            <div class="md-toolbar-tools">\n                                <h2>{{ \'FEEDBACK\' | translate }}</h2>\n                                <span flex></span>\n                                <md-button class="md-icon-button" ng-click="close()">\n                                    <md-icon aria-label="Close dialog"> close </md-icon>\n                                </md-button>\n                            </div>\n                        </md-toolbar>--\x3e\n                        <md-dialog-content class="md-dialog-content">\n                            <h2 class="md-title">{{ \'FEEDBACK\' | translate }}</h2>\n                            <global-annotations-list></global-annotations-list>\n                        </md-dialog-content>\n                        <md-dialog-actions>\n                            <md-button ng-click="close()" class="md-primary">\n                                {{ \'CLOSE\' | translate }}\n                            </md-button>\n                        </md-dialog-actions>\n                    </md-dialog>',closeTo:angular.element(document.querySelector("#globalMsgTrigger")),openFrom:angular.element(document.querySelector("#globalMsgTrigger")),controller:t}),t.$inject=["$scope","$mdDialog"]}}Y.$inject=["$filter","$mdDialog","$rootScope","$scope","$timeout","AnnotationService"];var H={bindings:{},template:'<md-button id="globalMsgTrigger"\n                    class="md-fab md-fab-bottom-right animate-fade"\n                    aria-label="View Messages"\n                    ng-if="$ctrl.visible && !$ctrl.active" ng-click="$ctrl.show()">\n            <md-icon>forum</md-icon>\n            <md-tooltip md-direction="left">Feedback</md-tooltip>\n        </md-button>',controller:Y};class W{constructor(t,e,n,i,r){this.$rootScope=t,this.$scope=e,this.$filter=n,this.AnnotationService=i,this.ProjectService=r,this.$translate=this.$filter("translate"),this.active=!1,this.$onInit=()=>{this.setModel()},this.$scope.$on("annotationSavedToServer",(t,e)=>{this.setModel()}),this.$rootScope.$on("nodeStatusesChanged",(t,e)=>{this.setModel()})}setModel(){let t=this.getLatestGlobalAnnotationGroup();if(this.latestGlobalComment=null,this.latestGlobalScore=null,t){let e=t.annotations;for(let t=e.length-1;t>-1;t--){let n=e[t],i=n.type;if("autoComment"===i?this.latestGlobalComment=n:"autoScore"===i&&(this.latestGlobalScore=n),this.latestGlobalComment&&this.latestGlobalScore)break}let n=t.nodeId;this.nodeTitle=this.ProjectService.getNodePositionAndTitleByNodeId(n)}}getLatestGlobalAnnotationGroup(){let t=null,e=this.AnnotationService.getActiveGlobalAnnotationGroups();return e.length&&(e.sort(function(t,e){return new Date(e.serverSaveTime)-new Date(t.serverSaveTime)}),t=e[0]),t}}W.$inject=["$rootScope","$scope","$filter","AnnotationService","ProjectService"];var z={bindings:{},template:'<p class="md-body-1 text-secondary" style="text-decoration: underline;">From {{$ctrl.nodeTitle}}<br /></p>\n        <div class="md-body-1">\n            <p ng-if="$ctrl.latestGlobalComment">\n                <compile data="$ctrl.latestGlobalComment.data.value"></compile>\n            </p>\n            <p ng-if="$ctrl.latestGlobalScore">\n                Score: {{$ctrl.latestGlobalScore.data.value}}<span ng-if="$ctrl.maxScore">/{{$ctrl.maxScore}}</span>\n            </p>\n        </div>',controller:W};class U{constructor(t,e){t.bind("keydown",t=>{8===t.keyCode&&e.$broadcast("deleteKeyPressed")})}}U.$inject=["$document","$rootScope"];var V={bindings:{},controller:U};class G{constructor(t){this.$translate=t("translate");let e=this.$translate("teams");null==this.name&&(this.name=this.id),this.config={options:{chart:{type:"column",height:200,style:{fontFamily:"Roboto,Helvetica Neue,sans-serif"}},title:{text:this.name,style:{fontSize:"14px",fontWeight:"500"}},plotOptions:{series:{dataLabels:{enabled:!0,format:"{y}%"}}},legend:{symbolHeight:"0px"},tooltip:{formatter:function(){return`<b>${e}: ${this.point.count}</b>`}}},xAxis:{categories:this.categories},yAxis:{title:{text:""},labels:{enabled:!1}},series:[{showInLegend:!1,data:this.data}],func:function(t){setTimeout(function(){t.reflow()},250)}}}}G.$inject=["$filter"];var q={bindings:{id:"@",name:"@",categories:"<",data:"<"},templateUrl:"wise5/directives/milestoneReportGraph/milestoneReportGraph.html",controller:G,controllerAs:"milestoneReportGraphCtrl"};class X{constructor(t,e,n){this.ProjectService=n,this.themeSettings=this.ProjectService.getThemeSettings(),this.hidePossibleScores=this.themeSettings.hidePossibleScores}}X.$inject=["$scope","$element","ProjectService"];var K={bindings:{maxScore:"<"},templateUrl:"wise5/directives/possibleScore/possibleScore.html",controller:X,controllerAs:"possibleScoreCtrl"},J=n(246);const Z=t=>({restrict:"A",link:function(e,n){t(e,n)}});Z.$inject=["$mdSticky"];var Q=Z;const tt=angular.module("components",[]);tt.component("annotation",$),tt.component("compile",L),tt.component("component",O.a),tt.component("componentAnnotations",j),tt.component("disableDeleteKeypress",B),tt.component("draggable",F.a),tt.component("globalAnnotations",H),tt.component("globalAnnotationsList",z),tt.component("listenForDeleteKeypress",V),tt.component("milestoneReportGraph",q),tt.component("possibleScore",K),tt.component("wiselink",J.a),tt.directive("sticky",Q);var et=n(56);class nt extends c.a{constructor(t,e,n,i,r,o,s,a){super(t,s,a),this.$http=e,this.$rootScope=n,this.$q=i,this.$injector=r,this.ConfigService=o,"classroomMonitor"===this.ConfigService.getMode()&&(this.TeacherDataService=this.$injector.get("TeacherDataService"))}getComponentTypeLabel(){return this.$translate("discussion.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Discussion",t.prompt=this.$translate("ENTER_PROMPT_HERE"),t.isStudentAttachmentEnabled=!0,t.gateClassmateResponses=!0,t}getClassmateResponses(t,e,n){return this.$q((i,r)=>{const o={runId:t,periodId:e,components:n,getStudentWork:!0,getAnnotations:!0},s={method:"GET",url:this.ConfigService.getConfigParam("studentDataURL"),params:o};this.$http(s).then(t=>{i(t.data)})})}isCompleted(t,e,n,i){if(this.hasShowWorkConnectedComponentThatHasWork(t)){if(this.hasNodeEnteredEvent(i))return!0}else for(let t of e)if(null!=t.studentData.response)return!0;return!1}hasShowWorkConnectedComponentThatHasWork(t){const e=t.connectedComponents;if(null!=e)for(let t of e)if("showWork"===t.type){if(this.StudentDataService.getComponentStatesByNodeIdAndComponentId(t.nodeId,t.componentId).length>0)return!0}return!1}hasNodeEnteredEvent(t){for(let e of t)if("nodeEntered"===e.event)return!0;return!1}workgroupHasWorkForComponent(t,e){return this.TeacherDataService.getComponentStatesByWorkgroupIdAndComponentId(t,e).length>0}getPostsAssociatedWithComponentIdsAndWorkgroupId(t,e){let n=[];const i=[],r=this.TeacherDataService.getComponentStatesByWorkgroupIdAndComponentIds(e,t);for(let e of r){const r=e.studentData.componentStateIdReplyingTo;this.isTopLevelPost(e)?this.isTopLevelComponentStateIdFound(i,e.id)||(n=n.concat(this.getPostAndAllRepliesByComponentIds(t,e.id)),i.push(e.id)):this.isTopLevelComponentStateIdFound(i,r)||(n=n.concat(this.getPostAndAllRepliesByComponentIds(t,r)),i.push(r))}return n}isTopLevelPost(t){return null==t.studentData.componentStateIdReplyingTo}isTopLevelComponentStateIdFound(t,e){return-1!==t.indexOf(e)}getPostAndAllRepliesByComponentIds(t,e){const n=[],i=this.TeacherDataService.getComponentStatesByComponentIds(t);for(const t of i)if(t.id===e)n.push(t);else{t.studentData.componentStateIdReplyingTo===e&&n.push(t)}return n}componentUsesSaveButton(){return!1}componentUsesSubmitButton(){return!1}componentStateHasStudentWork(t,e){return!!this.isStudentWorkHasAttachment(t)||(this.isComponentHasStarterSentence(e)?this.isStudentWorkHasText(t)&&this.isStudentResponseDifferentFromStarterSentence(t,e):this.isStudentWorkHasText(t))}isComponentHasStarterSentence(t){const e=t.starterSentence;return null!=e&&""!==e}isStudentResponseDifferentFromStarterSentence(t,e){return t.studentData.response!==e.starterSentence}isStudentWorkHasText(t){const e=t.studentData.response;return null!=e&&""!==e}isStudentWorkHasAttachment(t){const e=t.studentData.attachments;return null!=e&&e.length>0}}nt.$inject=["$filter","$http","$rootScope","$q","$injector","ConfigService","StudentDataService","UtilService"];var it=nt;class rt extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m,g){if(super(t,e,i,r,o,s,l,c,h,d,f,m),this.$q=n,this.DiscussionService=a,this.NotificationService=u,this.StudentWebSocketService=p,this.$mdMedia=g,this.studentResponse="",this.newResponse="",this.classResponses=[],this.topLevelResponses=[],this.responsesMap={},this.retrievedClassmateResponses=!1,this.isStudentMode()){if(this.ConfigService.isPreview()){let t=[];if(this.UtilService.hasConnectedComponent(this.componentContent)){for(const e of this.componentContent.connectedComponents)t=t.concat(this.StudentDataService.getComponentStatesByNodeIdAndComponentId(e.nodeId,e.componentId));this.isConnectedComponentImportWorkMode()&&(t=t.concat(this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId)))}else t=this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId);this.setClassResponses(t)}else if(this.UtilService.hasConnectedComponent(this.componentContent)){const t=[];for(const e of this.componentContent.connectedComponents)t.push({nodeId:e.nodeId,componentId:e.componentId});this.isConnectedComponentImportWorkMode()&&t.push({nodeId:this.nodeId,componentId:this.componentId}),this.getClassmateResponses(t)}else if(this.isClassmateResponsesGated()){const t=this.$scope.componentState;null!=t&&this.DiscussionService.componentStateHasStudentWork(t,this.componentContent)&&this.getClassmateResponses()}else this.getClassmateResponses();this.disableComponentIfNecessary()}else if((this.isGradingMode()||this.isGradingRevisionMode())&&this.DiscussionService.workgroupHasWorkForComponent(this.workgroupId,this.componentId)){const t=this.getGradingComponentIds(),e=this.DiscussionService.getPostsAssociatedWithComponentIdsAndWorkgroupId(t,this.workgroupId),n=this.getInappropriateFlagAnnotationsByComponentStates(e);this.setClassResponses(e,n)}this.initializeScopeSubmitButtonClicked(),this.initializeScopeGetComponentState(),this.initializeScopeStudentDataChanged(),this.registerStudentWorkReceivedListener(),this.initializeWatchMdMedia(),this.broadcastDoneRenderingComponent()}isConnectedComponentShowWorkMode(){if(this.UtilService.hasConnectedComponent(this.componentContent)){let t=!0;for(const e of this.componentContent.connectedComponents)t=t&&"showWork"===e.type;return t}return!1}isConnectedComponentImportWorkMode(){if(this.UtilService.hasConnectedComponent(this.componentContent)){let t=!0;for(const e of this.componentContent.connectedComponents)t=t&&"importWork"===e.type;return t}return!1}getGradingComponentIds(){const t=[this.componentId];if(null!=this.componentContent.connectedComponents)for(const e of this.componentContent.connectedComponents)t.push(e.componentId);return t}initializeScopeSubmitButtonClicked(){this.$scope.submitbuttonclicked=t=>{if(t&&t.replyText){const e=t,n=e.id;this.$scope.discussionController.studentResponse=e.replyText,this.$scope.discussionController.componentStateIdReplyingTo=n,this.$scope.discussionController.isSubmit=!0,this.$scope.discussionController.isDirty=!0,t.replyText=null}else this.$scope.discussionController.studentResponse=this.$scope.discussionController.newResponse,this.$scope.discussionController.isSubmit=!0;this.isAuthoringMode()&&this.createComponentState("submit"),this.$scope.$emit("componentSubmitTriggered",{nodeId:this.$scope.discussionController.nodeId,componentId:this.$scope.discussionController.componentId})}}initializeScopeGetComponentState(){this.$scope.getComponentState=()=>{const t=this.$q.defer();if(this.$scope.discussionController.isDirty&&this.$scope.discussionController.isSubmit){const e="submit";this.$scope.discussionController.createComponentState(e).then(e=>{this.$scope.discussionController.clearComponentValues(),this.$scope.discussionController.isDirty=!1,t.resolve(e)})}else t.resolve();return t.promise}}initializeScopeStudentDataChanged(){this.$scope.studentdatachanged=()=>{this.$scope.discussionController.studentDataChanged()}}registerStudentWorkSavedToServerListener(){this.destroyStudentWorkSavedToServerListener=this.$scope.$on("studentWorkSavedToServer",(t,e)=>{const n=e.studentWork;this.isWorkFromThisComponent(n)&&(this.isClassmateResponsesGated()&&!this.retrievedClassmateResponses?this.getClassmateResponses():this.addClassResponse(n),this.disableComponentIfNecessary(),this.sendPostToStudentsInThread(n)),this.isSubmit=null})}sendPostToStudentsInThread(t){const e=t.studentData;if(null!=e&&null!=this.responsesMap){const n=e.componentStateIdReplyingTo;if(null!=n){const e=t.workgroupId,i="DiscussionReply",r=t.nodeId,o=t.componentId,s=this.ConfigService.getUsernamesByWorkgroupId(e).map(t=>t.name).join(", "),a=this.$translate("discussion.repliedToADiscussionYouWereIn",{usernames:s}),l=[];null!=this.responsesMap[n]&&(this.sendPostToThreadCreator(n,i,r,o,e,a,l),this.sendPostToThreadRepliers(n,i,r,o,e,a,l))}}}sendPostToThreadCreator(t,e,n,i,r,o,s){const a=this.responsesMap[t].workgroupId;if(null!=a&&a!==r){const t=this.NotificationService.createNewNotification(e,n,i,r,a,o);this.NotificationService.saveNotificationToServer(t),s.push(a)}}sendPostToThreadRepliers(t,e,n,i,r,o,s){if(null!=this.responsesMap[t].replies){const a=this.responsesMap[t].replies;for(let t=0;t<a.length;t++){const l=a[t].workgroupId;if(null!=l&&l!==r&&-1===s.indexOf(l)){const t=this.NotificationService.createNewNotification(e,n,i,r,l,o);this.NotificationService.saveNotificationToServer(t),s.push(l)}}}}registerStudentWorkReceivedListener(){this.destroyStudentWorkReceivedListener=this.$rootScope.$on("studentWorkReceived",(t,e)=>{(this.isWorkFromThisComponent(e)||this.isWorkFromConnectedComponent(e))&&this.isWorkFromClassmate(e)&&this.retrievedClassmateResponses&&this.addClassResponse(e)})}isWorkFromClassmate(t){return t.workgroupId!==this.ConfigService.getWorkgroupId()}isWorkFromThisComponent(t){return this.isForThisComponent(t)}isWorkFromConnectedComponent(t){if(null!=this.componentContent.connectedComponents)for(const e of this.componentContent.connectedComponents)if(e.nodeId===t.nodeId&&e.componentId===t.componentId)return!0;return!1}initializeWatchMdMedia(){this.$scope.$watch(()=>this.$mdMedia("gt-sm"),t=>{this.$scope.mdScreen=t})}getClassmateResponses(t=[{nodeId:this.nodeId,componentId:this.componentId}]){const e=this.ConfigService.getRunId(),n=this.ConfigService.getPeriodId();this.DiscussionService.getClassmateResponses(e,n,t).then(t=>{this.setClassResponses(t.studentWorkList,t.annotations)})}submitButtonClicked(){this.isSubmit=!0,this.disableComponentIfNecessary(),this.$scope.submitbuttonclicked()}studentDataChanged(){this.isDirty=!0;this.createComponentState("change").then(t=>{this.$scope.$emit("componentStudentDataChanged",{nodeId:this.nodeId,componentId:this.componentId,componentState:t})})}createComponentState(t){const e=this.NodeService.createNewComponentState(),n={response:this.studentResponse,attachments:this.attachments};if(null!=this.componentStateIdReplyingTo&&(n.componentStateIdReplyingTo=this.componentStateIdReplyingTo),e.studentData=n,e.componentType="Discussion",e.nodeId=this.nodeId,e.componentId=this.componentId,(this.ConfigService.isPreview()&&!this.componentStateIdReplyingTo||"authoring"===this.mode)&&(e.id=this.UtilService.generateKey()),this.isSubmit&&(e.studentData.isSubmit=this.isSubmit,this.isSubmit=!1,"authoring"===this.mode)){null==this.StudentDataService.studentData&&(this.StudentDataService.studentData={},this.StudentDataService.studentData.componentStates=[]),this.StudentDataService.studentData.componentStates.push(e);const t=this.StudentDataService.getComponentStatesByNodeIdAndComponentId(this.nodeId,this.componentId);this.setClassResponses(t),this.clearComponentValues(),this.isDirty=!1}const i=this.$q.defer();return this.createComponentStateAdditionalProcessing(i,e,t),i.promise}clearComponentValues(){this.studentResponse="",this.newResponse="",this.attachments=[],this.componentStateIdReplyingTo=null}disableComponentIfNecessary(){if(super.disableComponentIfNecessary(),this.UtilService.hasConnectedComponent(this.componentContent))for(let t of this.componentContent.connectedComponents)"showWork"===t.type&&(this.isDisabled=!0)}showSaveButton(){return this.componentContent.showSaveButton}showSubmitButton(){return this.componentContent.showSubmitButton}isClassmateResponsesGated(){return this.componentContent.gateClassmateResponses}setClassResponses(t,e){this.classResponses=[],t=t.sort(this.sortByServerSaveTime);for(let n of t)if(n.studentData.isSubmit){const t=n.workgroupId,i=this.getLatestInappropriateFlagAnnotationByStudentWorkId(e,n.id),r=this.ConfigService.getUsernamesByWorkgroupId(t);0===r.length?n.usernames=this.getUserIdsDisplay(t):n.usernames=r.map(function(t){return t.name}).join(", "),n.replies=[],this.isGradingMode()||this.isGradingRevisionMode()?(null!=i&&(n.latestInappropriateFlagAnnotation=i),this.classResponses.push(n)):this.isStudentMode()&&(null!=i&&null!=i.data&&"Delete"===i.data.action||this.classResponses.push(n))}this.processResponses(this.classResponses),this.retrievedClassmateResponses=!0}sortByServerSaveTime(t,e){return t.serverSaveTime<e.serverSaveTime?-1:t.serverSaveTime>e.serverSaveTime?1:0}getUserIdsDisplay(t){const e=this.ConfigService.getUserIdsByWorkgroupId(t),n=[];for(let t of e)n.push(`Student ${t}`);return n.join(", ")}getLatestInappropriateFlagAnnotationByStudentWorkId(t,e){if(null!=t)for(const n of t)if(e===n.studentWorkId&&"inappropriateFlag"===n.type)return n;return null}processResponses(t){for(const e of t)this.responsesMap[e.id]=e;for(const e of t)if(e&&e.studentData){const t=e.studentData.componentStateIdReplyingTo;t&&this.responsesMap[t]&&this.responsesMap[t].replies&&this.responsesMap[t].replies.push(e)}this.topLevelResponses=this.getLevel1Responses(),(this.isGradingMode()||this.isGradingRevisionMode())&&(this.topLevelResponses=this.topLevelResponses.filter(this.threadHasPostFromThisComponentAndWorkgroupId()))}threadHasPostFromThisComponentAndWorkgroupId(){const t=this.componentId,e=this.workgroupId;return n=>{if(n.componentId===t&&n.workgroupId===e)return!0;for(const i of n.replies)if(i.componentId===t&&i.workgroupId===e)return!0;return!1}}addClassResponse(t){if(t.studentData.isSubmit){const e=t.workgroupId,n=this.ConfigService.getUsernamesByWorkgroupId(e);n.length>0?t.usernames=n.map(function(t){return t.name}).join(", "):null!=t.usernamesArray&&(t.usernames=t.usernamesArray.map(function(t){return t.name}).join(", ")),t.replies=[],this.classResponses.push(t),this.responsesMap[t.id]=t;const i=t.studentData.componentStateIdReplyingTo;null!=i&&null!=this.responsesMap[i]&&null!=this.responsesMap[i].replies&&this.responsesMap[i].replies.push(t),this.topLevelResponses=this.getLevel1Responses()}}getClassResponses(){return this.classResponses}getLevel1Responses(){const t=[];for(const e of this.classResponses){null==e.studentData.componentStateIdReplyingTo&&t.push(e)}return t}deletebuttonclicked(t){const e=t.workgroupId,n=this.ConfigService.getUserInfoByWorkgroupId(e).periodId,i=this.ConfigService.getMyUserInfo().workgroupId,r=this.ConfigService.getRunId(),o=this.nodeId,s=this.componentId,a=t.id,l=this.AnnotationService.createInappropriateFlagAnnotation(r,n,o,s,i,e,a,{action:"Delete"});this.AnnotationService.saveAnnotation(l).then(()=>{const t=this.DiscussionService.getPostsAssociatedWithWorkgroupIds(this.getGradingComponentIds(),this.workgroupId),e=this.getInappropriateFlagAnnotationsByComponentStates(t);this.setClassResponses(t,e)})}undodeletebuttonclicked(t){const e=t.workgroupId,n=this.ConfigService.getUserInfoByWorkgroupId(e).periodId,i=this.ConfigService.getMyUserInfo().workgroupId,r=this.ConfigService.getRunId(),o=this.nodeId,s=this.componentId,a=t.id,l=this.AnnotationService.createInappropriateFlagAnnotation(r,n,o,s,i,e,a,{action:"Undo Delete"});this.AnnotationService.saveAnnotation(l).then(()=>{const t=this.DiscussionService.getPostsAssociatedWithWorkgroupIds(this.getGradingComponentIds(),this.workgroupId),e=this.getInappropriateFlagAnnotationsByComponentStates(t);this.setClassResponses(t,e)})}getInappropriateFlagAnnotationsByComponentStates(t){const e=[];if(null!=t)for(let n of t){const t=this.AnnotationService.getLatestAnnotationByStudentWorkIdAndType(n.id,"inappropriateFlag");null!=t&&e.push(t)}return e}cleanupBeforeExiting(){this.destroyStudentWorkSavedToServerListener(),this.destroyStudentWorkReceivedListener()}}rt.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","AnnotationService","ConfigService","DiscussionService","NodeService","NotebookService","NotificationService","ProjectService","StudentAssetService","StudentDataService","StudentWebSocketService","UtilService","$mdMedia"];var ot=rt;angular.module("discussionComponentModule",["pascalprecht.translate"]).service("DiscussionService",it).controller("DiscussionController",ot).controller("ClassResponseController",et.b).component("classResponse",et.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/discussion/i18n")}]);class st extends c.a{constructor(t,e,n,i,r){super(t,i,r),this.$q=e,this.StudentAssetService=n}getComponentTypeLabel(){return this.$translate("draw.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Draw",t.stamps={},t.stamps.Stamps=[],t.tools={},t.tools.select=!0,t.tools.line=!0,t.tools.shape=!0,t.tools.freeHand=!0,t.tools.text=!0,t.tools.stamp=!0,t.tools.strokeColor=!0,t.tools.fillColor=!0,t.tools.clone=!0,t.tools.strokeWidth=!0,t.tools.sendBack=!0,t.tools.sendForward=!0,t.tools.undo=!0,t.tools.redo=!0,t.tools.delete=!0,t}getStudentWorkJPEG(t){const e=t.studentData,n=JSON.parse(e.drawData);return null!=n&&null!=n.jpeg&&""!=n.jpeg?n.jpeg:null}isCompleted(t,e,n,i,r){if(e&&e.length){if(r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton){for(let t of e)if(t.isSubmit)return!0}else{if(e[e.length-1].studentData.drawData)return!0}}return!1}removeBackgroundFromComponentState(t){const e=t.studentData.drawData,n=angular.fromJson(e);delete n.canvas.backgroundImage;const i=angular.toJson(n);return t.studentData.drawData=i,t}componentStateHasStudentWork(t,e){if(null!=t){const n=t.studentData.drawData,i=angular.fromJson(n);if(null==e){if(this.isDrawDataContainsObjects(i))return!0}else if(this.isStarterDrawDataExists(e)){const t=e.starterDrawData;if(this.isStudentDrawDataDifferentFromStarterData(n,t))return!0}else if(this.isDrawDataContainsObjects(i))return!0}return!1}isDrawDataContainsObjects(t){return null!=t.canvas&&null!=t.canvas.objects&&t.canvas.objects.length>0}isStarterDrawDataExists(t){return null!=t.starterDrawData&&""!==t.starterDrawData}isStudentDrawDataDifferentFromStarterData(t,e){return null!=t&&""!==t&&t!==e}generateImageFromRenderedComponentState(t){const e=this.$q.defer();let n=angular.element("#drawingtool_"+t.nodeId+"_"+t.componentId+" canvas");if(null!=n&&n.length>0){const t=(n=n[0]).toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(t);this.StudentAssetService.uploadAsset(i).then(t=>{e.resolve(t)})}return e.promise}}st.$inject=["$filter","$q","StudentAssetService","StudentDataService","UtilService"];var at=st,lt=n(247);angular.module("drawComponentModule",["pascalprecht.translate"]).service("DrawService",at).controller("DrawController",lt.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/draw/i18n")}]);var ct=n(249),ut=n(250);angular.module("embeddedComponentModule",["pascalprecht.translate"]).service("EmbeddedService",ct.a).controller("EmbeddedController",ut.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/embedded/i18n")}]),n(29),n(434);var ht=angular.module("filters",[]).filter("sanitizeHTML",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]).filter("appropriateSizeText",function(){return function(t){var e=function(t,e){var n=1;return e&&(n=Math.pow(10,e)),Math.round(t*n)/n};return t>1048576?e(t/1024/1024,1)+" mb":t>1024?e(t/1024,1)+" kb":t+" b"}}).filter("roundToDecimal",function(){return function(t,e){var n=1;return e&&(n=Math.pow(10,e)),Math.round(t*n)/n}}),dt=(n(435),n(437),n(439),n(10)),ft=n.n(dt);class pt extends c.a{constructor(t,e,n,i,r){super(t,i,r),this.$q=e,this.StudentAssetService=n}getComponentTypeLabel(){return this.$translate("graph.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Graph",t.title="",t.width=800,t.height=500,t.enableTrials=!1,t.canCreateNewTrials=!1,t.canDeleteTrials=!1,t.hideAllTrialsOnNewTrial=!1,t.canStudentHideSeriesOnLegendClick=!1,t.roundValuesTo="integer",t.graphType="line",t.xAxis={title:{text:this.$translate("graph.timeSeconds")},min:0,max:100,units:this.$translate("graph.secondsUnit"),locked:!0,type:"limits"},t.yAxis={title:{text:this.$translate("graph.positionMeters")},min:0,max:100,units:this.$translate("graph.metersUnit"),locked:!0},t.series=[{name:this.$translate("graph.prediction"),data:[],color:"blue",dashStyle:"Solid",marker:{symbol:"circle"},canEdit:!0,type:"line"}],t}isCompleted(t,e,n,i,r){if(!this.canEdit(t))return this.UtilService.hasNodeEnteredEvent(i);if(this.hasComponentStates(e)){if(this.isSubmitRequired(r,t))return this.hasSubmitComponentState(e);{const t=e[e.length-1];return this.componentStateHasStudentWork(t)}}return!1}hasComponentStates(t){return null!=t&&t.length>0}isSubmitRequired(t,e){return t.showSubmitButton||e.showSubmitButton&&!t.showSaveButton}hasSubmitComponentState(t){for(const e of t)if(e.isSubmit&&this.componentStateHasStudentWork(e))return!0;return!1}canEdit(t){const e=t.series;for(const t of e)if(t.canEdit)return!0;return!!this.UtilService.hasImportWorkConnectedComponent(t)}hasSeriesData(t){const e=t.series;if(null!=e)for(const t of e)if(null!=t.data&&t.data.length>0)return!0;return!1}hasTrialData(t){const e=t.trials;if(null!=e)for(const t of e)for(const e of t.series){if(e.data.length>0)return!0}return!1}componentStateHasStudentWork(t,e){if(null!=t){const n=t.studentData;if(null!=n)if(1==n.version){if(this.anySeriesHasDataPoint(n.series))return!0}else if(this.anyTrialHasDataPoint(n.trials))return!0;if(this.isStudentChangedAxisLimit(t,e))return!0}return!1}isStudentChangedAxisLimit(t,e){if(null!=t&&null!=t.studentData&&null!=e){if(null!=t.studentData.xAxis&&null!=e.xAxis){if(t.studentData.xAxis.min!=e.xAxis.min)return!0;if(t.studentData.xAxis.max!=e.xAxis.max)return!0}if(null!=t.studentData.yAxis&&null!=e.yAxis){if(t.studentData.yAxis.min!=e.yAxis.min)return!0;if(t.studentData.yAxis.max!=e.yAxis.max)return!0}}return!1}anyTrialHasDataPoint(t){for(const e of t)if(this.trialHasDataPoint(e))return!0;return!1}trialHasDataPoint(t){for(const e of t.series)if(this.seriesHasDataPoint(e))return!0;return!1}anySeriesHasDataPoint(t){if(null!=t)for(const e of t)if(this.seriesHasDataPoint(e))return!0;return!1}seriesHasDataPoint(t){return t.data.length>0}generateImageFromRenderedComponentState(t){const e=this.$q.defer(),n=t.componentId;let i=angular.element("#chart_"+n).find(".highcharts-container");return null!=i&&i.length>0&&(i=i[0],ft()(i).then(t=>{const n=t.toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(n);this.StudentAssetService.uploadAsset(i).then(t=>{e.resolve(t)})})),e.promise}}pt.$inject=["$filter","$q","StudentAssetService","StudentDataService","UtilService"];var mt=pt,gt=n(251);angular.module("graphComponentModule",["pascalprecht.translate"]).service("GraphService",mt).controller("GraphController",gt.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/graph/i18n")}]),n(236);class vt extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("html.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="HTML",t.html=this.$translate("html.enterHTMLHere"),t}isCompleted(t,e,n,i){var r=!1;if(null!=i)for(var o=0;o<i.length;o++){var s=i[o];if(null!=s&&"nodeEntered"===s.event){r=!0;break}}return r}componentHasWork(t){return!1}componentUsesSaveButton(){return!1}componentUsesSubmitButton(){return!1}}vt.$inject=["$filter","StudentDataService","UtilService"];var yt=vt;class bt extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p){super(o,s,t,e,a,l,c,u,h,d,f,p),this.$state=n,this.$stateParams=i,this.$sce=r,"authoring"===this.mode||"grading"===this.mode||"student"===this.mode&&null!=this.componentContent&&(this.html=this.componentContent.html),this.$scope.$on("requestImage",(t,e)=>{let n=e.nodeId,i=e.componentId;if(this.nodeId===n&&this.componentId===i){let t=this.getImageObjects();if(null!=t){let e={};e.nodeId=n,e.componentId=i,e.imageObjects=t,this.$scope.$emit("requestImageCallback",e)}}}),this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}getImageObjects(){let t=[],e=this.componentId,n=angular.element("#"+e+" img");if(null!=n)for(let e=0;e<n.length;e++){let i=n[e];if(null!=i){let e=this.UtilService.getImageObjectFromImageElement(i);t.push(e)}}return t}}bt.$inject=["$rootScope","$scope","$state","$stateParams","$sce","$filter","$mdDialog","AnnotationService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var _t=bt;angular.module("htmlComponentModule",[]).service("HTMLService",yt).controller("HTMLController",_t).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/html/i18n")}]);var wt=n(252),St=n.n(wt);class xt extends c.a{constructor(t,e,n,i,r){super(t,i,r),this.$q=e,this.StudentAssetService=n}getComponentTypeLabel(){return this.$translate("label.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Label",t.backgroundImage="",t.canCreateLabels=!0,t.canEditLabels=!0,t.canDeleteLabels=!0,t.enableCircles=!0,t.width=800,t.height=600,t.pointSize=5,t.fontSize=20,t.labelWidth=20,t.labels=[],t}isCompleted(t,e,n,i,r){var o=!1;if(!this.canEdit(t)&&this.UtilService.hasNodeEnteredEvent(i))return!0;if(e&&e.length){if(r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton)for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n.isSubmit&&n.studentData&&n.studentData.labels&&n.studentData.labels.length){o=!0;break}}else{let t=e[e.length-1].studentData;null!=t&&t.labels&&t.labels.length&&(o=!0)}}return o}canEdit(t){return!this.UtilService.hasShowWorkConnectedComponent(t)}componentStateHasStudentWork(t,e){if(null!=t){let n=t.studentData;if(null!=n){let t=n.labels;if(null==e){if(null!=t&&t.length>0)return!0}else{let n=e.labels;if(null==n||0==n.length){if(null!=t&&t.length>0)return!0}else if(!this.labelArraysAreTheSame(t,n))return!0}}}return!1}componentStateIsSameAsStarter(t,e){if(null!=t){let n=t.studentData.labels,i=e.labels;if(null==i||0==i.length){if(0==n.length)return!0;if(null!=n&&n.length>0)return!1}else if(this.labelArraysAreTheSame(n,i))return!0}return!1}labelArraysAreTheSame(t,e){if(null==t&&null==e)return!0;if(null==t&&null!=e||null!=t&&null==e)return!1;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(!this.labelsAreTheSame(i,r))return!1}return!0}labelsAreTheSame(t,e){return null==t&&null==e||!(null==t&&null!=e||null!=t&&null==e)&&(t.text==e.text&&t.pointX==e.pointX&&t.pointY==e.pointY&&t.textX==e.textX&&t.textY==e.textY&&t.color==e.color)}createImageFromText(t,e,n,i,r,o,s){null!=e&&""!=e||(e=800),null!=n&&""!=n||(n=600),null!=i&&""!=i||(i=100),null!=r&&""!=r||(r=10),null!=o&&""!=o||(o=40),null!=s&&""!=s||(s=16);let a=this.UtilService.wordWrap(t,i);var l=this.$q.defer(),c=document.createElement("div"),u=SVG(c);u.width(e),u.height(n);let h="",d=a.split("\n");for(let t of d)h+='<tspan x="'+r+'" dy="'+o+'">'+t+"</tspan>";let f='<text id="SvgjsText1008" font-family="Helvetica, Arial, sans-serif" font-size="'+s+'">'+h+"</text>";var p=c.innerHTML;p=p.replace("</svg>",f+"</svg>");var m=document.createElement("canvas"),g=m.getContext("2d"),v=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),y=(self.URL||self.webkitURL||self).createObjectURL(v),b=new Image,_=this.UtilService;return b.onload=t=>{var e=t.target;m.width=e.width,m.height=e.height,g.drawImage(e,0,0);var n=m.toDataURL("image/png"),i=_.getImageObjectFromBase64String(n);this.StudentAssetService.uploadAsset(i).then(t=>{this.StudentAssetService.copyAssetForReference(t).then(e=>{if(null!=e){var n=e.url;this.StudentAssetService.deleteAsset(t),l.resolve(n)}})})},b.src=y,l.promise}generateImageFromRenderedComponentState(t){let e=this.$q.defer(),n=angular.element("#canvas_"+t.nodeId+"_"+t.componentId);if(null!=n&&n.length>0){let t=(n=n[0]).toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(t);this.StudentAssetService.uploadAsset(i).then(t=>{e.resolve(t)})}return e.promise}}xt.$inject=["$filter","$q","StudentAssetService","StudentDataService","UtilService"];var Ct=xt,kt=n(253);angular.module("labelComponentModule",["pascalprecht.translate"]).service("LabelService",Ct).controller("LabelController",kt.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/label/i18n")}]);class Tt extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("match.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Match",t.choices=[],t.buckets=[],t.feedback=[{bucketId:"0",choices:[]}],t.ordered=!1,t}isCompleted(t,e,n,i,r){if(e&&e.length>0)for(let n of e){const e=n.studentData.buckets;if(e&&e.length>0){if(!this.isSubmitRequired(r,t))return!0;if(n.isSubmit)return!0}}return!1}isSubmitRequired(t,e){return t.showSubmitButton||e.showSubmitButton&&!t.showSaveButton}componentStateHasStudentWork(t,e){if(null!=t){const e=t.studentData.buckets;for(let t of e){const e=t.items;if(null!=e&&e.length>0)return!0}}return!1}hasCorrectAnswer(t){for(let e of t.feedback)for(let t of e.choices)if(t.isCorrect)return!0;return!1}}Tt.$inject=["$filter","StudentDataService","UtilService"];var Mt=Tt;class Et extends d.a{constructor(t,e,i,r,o,s,a,l,c,u,h,d,f,p,m,g){super(t,e,o,s,a,l,h,d,f,p,m,g),this.$q=r,this.dragulaService=c,this.MatchService=u,this.$mdMedia=i,this.autoScroll=n(237),this.choices=[],this.buckets=[],this.isCorrect=null,this.bucketWidth=100,this.numChoiceColumns=1,this.isHorizontal=this.componentContent.horizontal,this.choiceStyle="",this.bucketStyle="",this.sourceBucketId="0",this.hasCorrectAnswer=!1,this.isLatestComponentStateSubmit=!1,this.sourceBucket=null,this.privateNotebookItems=[],"student"===this.mode?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.shouldImportPrivateNotes()&&(this.privateNotebookItems=this.NotebookService.getPrivateNotebookItems(),this.$rootScope.$on("notebookUpdated",(t,e)=>{"note"===e.notebookItem.type&&this.addNotebookItemToSourceBucket(e.notebookItem)}))):"grading"===this.mode||"gradingRevision"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0,this.shouldImportPrivateNotes()&&(this.privateNotebookItems=this.NotebookService.getPrivateNotebookItems(this.workgroupId))):"onlyShowWork"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):"showPreviousWork"===this.mode&&(this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0),this.hasCorrectAnswer=this.hasCorrectChoices(),this.initializeChoices(),this.initializeBuckets();const v=this.$scope.componentState;"student"==this.mode?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.MatchService.componentStateHasStudentWork(v,this.componentContent)?this.setStudentWork(v):this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents():null!=v&&this.setStudentWork(v),null!=v&&v.isSubmit&&(this.isLatestComponentStateSubmit=!0===v.isSubmit),this.studentHasUsedAllSubmits()&&(this.isDisabled=!0,this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.registerDragListeners(),this.$scope.getComponentState=t=>{const e=this.$q.defer();let n=!1,i="change";return t?this.$scope.matchController.isSubmitDirty&&(n=!0,i="submit"):this.$scope.matchController.isDirty&&(n=!0,i="save"),n?this.$scope.matchController.createComponentState(i).then(t=>{e.resolve(t)}):e.resolve(),e.promise},this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}addNotebookItemToSourceBucket(t){const e=this.createChoiceFromNotebookItem(t);this.choices.push(e),this.getBucketById(this.sourceBucketId).items.push(e)}studentHasUsedAllSubmits(){return null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount}registerDragListeners(){const t="match_"+this.componentId;this.registerStudentDataChangedOnDrop(t),this.disableDraggingIfNeeded(t);const e=this.dragulaService.find(this.$scope,t).drake;this.showVisualIndicatorWhileDragging(e),this.supportScrollWhileDragging(e)}registerStudentDataChangedOnDrop(t){const e=t+".drop-model";this.$scope.$on(e,(t,e,n,i)=>{this.$scope.matchController.studentDataChanged()})}disableDraggingIfNeeded(t){this.dragulaService.options(this.$scope,t,{moves:(t,e,n,i)=>!this.$scope.matchController.isDisabled})}showVisualIndicatorWhileDragging(t){t.on("over",(t,e,n)=>{n!==e&&(e.className+=" match-bucket__contents--over")}).on("out",(t,e,n)=>{n!==e&&(e.className=e.className.replace("match-bucket__contents--over",""))})}supportScrollWhileDragging(t){this.autoScroll([document.querySelector("#content")],{margin:30,pixels:50,scrollWhenOutside:!0,autoScroll:function(){return this.down&&t.dragging}})}handleNodeSubmit(){this.submit("nodeSubmitButton")}setStudentWork(t){const e=t.studentData,n=e.buckets,i=this.getBucketById(this.sourceBucketId);i.items=[];const r=this.getBucketIds(),o=this.getChoiceIds();for(let t of n){let e=t.id;if(r.indexOf(e)>-1)for(let n of t.items){const t=n.id,i=o.indexOf(t),r=this.getBucketById(e);if(i>-1){const e=this.getChoiceById(t);r.items.push(e),o.splice(i,1)}else r.items.push(n)}}for(let t of o)i.items.push(this.getChoiceById(t));const s=e.submitCounter;null!=s&&(this.submitCounter=s),this.submitCounter>0&&t.isSubmit?this.checkAnswer():this.processPreviousStudentWork()}processPreviousStudentWork(){const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId);if(null==t)return;const e=t.serverSaveTime,n=this.ConfigService.convertToClientTimestamp(e);if(!0===t.isSubmit)this.isCorrect=t.isCorrect,this.setIsSubmitDirty(!1),this.setSubmittedMessage(n),this.checkAnswer();else{const t=this.StudentDataService.getLatestSubmitComponentState(this.nodeId,this.componentId);null!=t?this.showFeedbackOnUnchangedChoices(t):(this.isCorrect=null,this.setIsSubmitDirty(!1),this.setSavedMessage(n))}}processDirtyStudentWork(){const t=this.StudentDataService.getLatestSubmitComponentState(this.nodeId,this.componentId);if(null!=t)this.showFeedbackOnUnchangedChoices(t);else{const t=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(this.nodeId,this.componentId);null!=t&&(this.isCorrect=null,this.setIsSubmitDirty(!0),this.setSavedMessage(t.clientSaveTime))}}showFeedbackOnUnchangedChoices(t){const e=this.getChoicesThatChangedSinceLastSubmit(t);e.length>0?this.setIsSubmitDirty(!0):this.setIsSubmitDirty(!1),this.checkAnswer(e)}setIsSubmitDirty(t){this.isSubmitDirty=t,this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:t})}isLatestComponentStateASubmit(){}getBucketIds(){return this.buckets.map(t=>t.id)}getChoiceIds(){return this.choices.map(t=>t.id)}getChoicesThatChangedSinceLastSubmit(t){const e=t.studentData.buckets,n=[];for(let t of this.buckets){const i=t.items.map(t=>t.id);let r=this.getBucketById(t.id,e);if(null!=r){const t=r.items.map(t=>t.id);for(let e=0;e<i.length;e++){const r=i[e];-1==t.indexOf(r)?n.push(r):this.isAuthorHasSpecifiedACorrectPosition(r)&&e!=t.indexOf(r)&&n.push(r)}}}return n}getChoices(){return this.choices}initializeChoices(){if(this.choices=this.componentContent.choices,this.shouldImportPrivateNotes())for(let t of this.privateNotebookItems)"note"===t.type&&this.choices.push(this.createChoiceFromNotebookItem(t))}shouldImportPrivateNotes(){return this.isNotebookEnabled()&&this.componentContent.importPrivateNotes}createChoiceFromNotebookItem(t){let e=t.content.text;for(let n of t.content.attachments)e+='<br/><img src="'+n.iconURL+'"/>';return{id:t.localNotebookItemId,value:e,type:"choice"}}initializeBuckets(){this.buckets=[],this.setBucketWidth(),this.setNumChoiceColumns(),this.setChoiceStyle(),this.setBucketStyle(),this.sourceBucket={id:this.sourceBucketId,value:this.componentContent.choicesLabel?this.componentContent.choicesLabel:this.$translate("match.choices"),type:"bucket",items:[]};for(let t of this.getChoices())this.sourceBucket.items.push(t);this.buckets.push(this.sourceBucket);for(let t of this.componentContent.buckets)t.items=[],this.buckets.push(t)}setBucketWidth(){if(this.isHorizontal)this.bucketWidth=100;else if("number"==typeof this.componentContent.bucketWidth)this.bucketWidth=this.componentContent.bucketWidth;else{let t=this.componentContent.buckets.length;t%3==0||t>4?this.bucketWidth=Math.round(100/3):t%2==0&&(this.bucketWidth=50)}}setNumChoiceColumns(){if(this.isHorizontal)this.numChoiceColumns=1;else{if("number"==typeof this.componentContent.bucketWidth)this.numChoiceColumns=Math.round(100/this.componentContent.bucketWidth);else{let t=this.componentContent.buckets.length;t%3==0||t>4?this.numChoiceColumns=3:t%2==0&&(this.numChoiceColumns=2)}"number"==typeof this.componentContent.choiceColumns&&(this.numChoiceColumns=this.componentContent.choiceColumns)}}setChoiceStyle(){this.choiceStyle={"-moz-column-count":this.numChoiceColumns,"-webkit-column-count":this.numChoiceColumns,"column-count":this.numChoiceColumns}}setBucketStyle(){100===this.bucketWidth&&(this.bucketStyle=this.choiceStyle)}getBuckets(){return this.buckets}getCopyOfBuckets(){const t=angular.toJson(this.getBuckets());return angular.fromJson(t)}getNumSubmitsLeft(){return this.componentContent.maxSubmitCount-this.submitCounter}hasStudentUsedAllSubmits(){return this.getNumSubmitsLeft()<=0}checkAnswer(t=[]){let e=!0,n=this.getBuckets();for(let i of n){let n=i.id,r=i.items;for(let i=0;i<r.length;i++){let o=r[i],s=i+1,a=o.id,l=this.getFeedbackObject(n,a);if(null!=l){let t=l.feedback,i=l.position,r=l.isCorrect;if(this.hasCorrectAnswer&&(this.isAuthorHasSpecifiedACorrectBucket(a)||n==this.sourceBucketId&&(r=!0)),""==t&&this.hasCorrectAnswer&&(t=r?this.$translate("CORRECT"):this.$translate("INCORRECT")),this.doesPositionNotMatter(i))o.feedback=t,o.isCorrect=r,o.isIncorrectPosition=!1,e=e&&r;else if(s===i)o.feedback=t,o.isCorrect=r,o.isIncorrectPosition=!1,e=e&&r;else{let t=l.incorrectPositionFeedback;null!=t&&""!=t||(t=this.$translate("match.correctBucketButWrongPosition")),o.feedback=t,o.isCorrect=!1,o.isIncorrectPosition=!0,e=!1}}this.hasCorrectAnswer||(o.isCorrect=null,o.isIncorrectPosition=null),t.indexOf(a)>-1&&(o.feedback=null)}}this.hasCorrectAnswer?this.isCorrect=e:this.isCorrect=null}getAllFeedback(){return this.componentContent.feedback}getFeedbackObject(t,e){for(let n of this.getAllFeedback())if(n.bucketId===t)for(let t of n.choices)if(t.choiceId===e)return t;return null}doesPositionNotMatter(t){return!this.componentContent.ordered||null==t}studentDataChanged(){this.isCorrect=null,this.isLatestComponentStateSubmit=!1,super.studentDataChanged()}createComponentState(t){let e=this.NodeService.createNewComponentState(),n={};"submit"===t?(this.checkAnswer(),this.hasCorrectAnswer&&null!=this.isCorrect&&(n.isCorrect=this.isCorrect),this.isLatestComponentStateSubmit=!0):(this.clearFeedback(),this.processDirtyStudentWork(),this.isLatestComponentStateSubmit=!1),n.buckets=this.getCopyOfBuckets(),e.isSubmit=this.isSubmit,n.submitCounter=this.submitCounter,this.isSubmit=!1,e.studentData=n,e.componentType="Match",e.nodeId=this.nodeId,e.componentId=this.componentId;let i=this.$q.defer();return this.createComponentStateAdditionalProcessing(i,e,t),i.promise}getChoiceById(t){for(let e of this.componentContent.choices)if(e.id===t)return e;return null}getChoiceByText(t){for(let e of this.componentContent.choices)if(e.value===t)return e;return null}getBucketById(t,e=this.buckets){for(let n of e)if(n.id==t)return n;return null}getChoiceValueById(t){const e=this.getChoiceById(t);return null!=e?e.value:null}getBucketValueById(t){const e=this.getBucketById(t);return null!=e?e.value:null}hasCorrectChoices(){for(let t of this.componentContent.feedback)for(let e of t.choices)if(e.isCorrect)return!0;return!1}clearFeedback(){for(let t of this.getChoices())t.isCorrect=null,t.isIncorrectPosition=null,t.feedback=null}isAuthorHasSpecifiedACorrectBucket(t){for(let e of this.getAllFeedback())for(let n of e.choices)if(n.choiceId===t&&n.isCorrect)return!0;return!1}isAuthorHasSpecifiedACorrectPosition(t){for(let e of this.getAllFeedback())for(let n of e.choices)if(n.choiceId===t&&null!=n.position)return!0;return!1}choiceIsInCorrectPosition(t){return!1}createMergedComponentState(t){const e=[];for(let n of t)for(let t of n.studentData.buckets)this.mergeBucket(e,t);const n=this.NodeService.createNewComponentState();return n.studentData={buckets:e},n}mergeBucket(t,e){let n=!1;for(let i of t)i.id==e.id&&(n=!0,this.mergeChoices(i.items,e.items));return n||t.push(e),t}mergeChoices(t,e){const n=this.getIds(t);for(let i of e)-1==n.indexOf(i.id)&&t.push(i);return t}getIds(t){const e=[];for(let n of t)e.push(n.id);return e}addChoice(){const t=this.$mdDialog.prompt().title(this.$translate("match.enterChoiceText")).placeholder(this.$translate("match.typeSomething")).cancel(this.$translate("CANCEL")).ok(this.$translate("OK"));this.$mdDialog.show(t).then(t=>{if(null!=t&&""!=t){const e={id:this.UtilService.generateKey(10),value:t,type:"choice",studentCreated:!0};this.sourceBucket.items.push(e),this.studentDataChanged()}})}deleteChoice(t){if(confirm(this.$translate("match.areYouSureYouWantToDeleteThisChoice"))){const e=this.getBuckets();for(let n of e){const e=n.items;for(let n=0;n<e.length;n++){e[n].id==t.id&&e.splice(n,1)}}this.studentDataChanged()}}}Et.$inject=["$filter","$mdDialog","$mdMedia","$q","$rootScope","$scope","AnnotationService","ConfigService","dragulaService","MatchService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var At=Et;angular.module("matchComponentModule",["pascalprecht.translate"]).service("MatchService",Mt).controller("MatchController",At).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/match/i18n")}]);class It extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("multipleChoice.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="MultipleChoice",t.choiceType="radio",t.choices=[],t.showFeedback=!0,t}getPossibleTransitionCriteria(t,e,n){let i=[];if("radio"===n.choiceType)for(var r=0;r<n.choices.length;r++){let o=n.choices[r],s={name:"choiceChosen",id:"choiceChosen_"+o.id,params:{nodeId:t,componentId:e,choiceIds:[o.id]},userFriendlyDescription:this.$translate("multipleChoice.userChose",{choiceText:o.text,choiceId:o.id})};i.push(s)}else n.choiceType;return i}choiceChosen(t){const e=t.params.nodeId,n=t.params.componentId,i=t.params.choiceIds,r=this.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(e,n);if(null!=r){const t=r.studentData.studentChoices,e=this.getStudentChoiceIdsFromStudentChoiceObjects(t);return this.isChoicesSelected(e,i)}return!1}isChoicesSelected(t,e){if("string"==typeof e)return 1===t.length&&t[0]===e;if(Array.isArray(e)&&t.length===e.length){for(let n of e)if(-1===t.indexOf(n))return!1;return!0}return!1}getStudentChoiceIdsFromStudentChoiceObjects(t){let e=[];if(null!=t)for(let n=0;n<t.length;n++){let i=t[n];if(null!=i){let t=i.id;e.push(t)}}return e}isCompleted(t,e,n,i,r){let o=!1;if(e&&e.length){let n=r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton;for(let t=0,i=e.length;t<i;t++){let i=e[t],r=i.studentData;if(null!=r){if(null!=r.studentChoices){if(!n){o=!0;break}if(i.isSubmit){o=!0;break}}}}}return o}getStudentDataString(t){var e="";if(null!=t){var n=t.studentData;if(null!=n){var i=n.studentChoices;if(null!=i)for(var r=0;r<i.length;r++){var o=i[r];if(null!=o){var s=o.text;null!=s&&(""!=e&&(e+=", "),e+=s)}}}}return e}componentStateHasStudentWork(t,e){if(null!=t){let e=t.studentData;if(null!=e){let t=e.studentChoices;if(null!=t&&t.length>0)return!0}}return!1}}It.$inject=["$filter","StudentDataService","UtilService"];var $t=It;class Dt extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f){super(t,e,i,r,o,s,l,c,u,h,d,f),this.$q=n,this.MultipleChoiceService=a,this.studentChoices=[],this.isCorrect=null,this.showFeedback=!0,this.componentHasCorrectAnswer=!1,this.isLatestComponentStateSubmit=!1,"student"===this.mode?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton):"grading"===this.mode||"gradingRevision"===this.mode?(this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):"onlyShowWork"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0):"showPreviousWork"===this.mode&&(this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isDisabled=!0),this.componentHasCorrectAnswer=this.hasCorrectChoices(),this.showFeedback=this.componentContent.showFeedback,this.componentType=this.componentContent.type;var p;p=this.$scope.componentState,"student"==this.mode?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.MultipleChoiceService.componentStateHasStudentWork(p,this.componentContent)?this.setStudentWork(p):this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents():this.setStudentWork(p),null!=p&&p.isSubmit&&(this.isLatestComponentStateSubmit=!0),null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount&&(this.isDisabled=!0,this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.$scope.getComponentState=function(t){var e=this.$q.defer();let n=!1,i="change";return t?this.$scope.multipleChoiceController.isSubmitDirty&&(n=!0,i="submit"):this.$scope.multipleChoiceController.isDirty&&(n=!0,i="save"),n?this.$scope.multipleChoiceController.createComponentState(i).then(t=>{e.resolve(t)}):e.resolve(),e.promise}.bind(this),this.$scope.$on("exitNode",angular.bind(this,function(t,e){})),this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}handleNodeSubmit(){this.submit("nodeSubmitButton")}setStudentWork(t){if(null!=t){var e=t.studentData;if(null!=e){var n=this.getChoiceIdsFromStudentData(e);this.isRadio()?this.studentChoices=n[0]:this.isCheckbox()&&(this.studentChoices=n),null!=e.isCorrect&&(this.isCorrect=e.isCorrect),this.showFeedback&&t.isSubmit&&this.showFeedbackForChoiceIds(n);var i=e.submitCounter;null!=i&&(this.submitCounter=i),this.processLatestStudentWork()}}}showFeedbackForChoiceIds(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e],i=this.getChoiceById(n);null!=i&&(i.showFeedback=!0,i.feedbackToShow=i.feedback)}}isChecked(t){var e=!1,n=this.studentChoices;return null!=n&&(this.isRadio()?t===n&&(e=!0):this.isCheckbox()&&-1!=n.indexOf(t)&&(e=!0)),e}getChoiceIdsFromStudentData(t){var e=[];if(null!=t&&null!=t.studentChoices)for(var n=t.studentChoices,i=0;i<n.length;i++){var r=n[i];if(null!=r){var o=r.id;e.push(o)}}return e}radioChoiceSelected(t){if(this.studentDataChanged(),null!=t){var e={};e.selectedChoiceId=t,this.StudentDataService.saveComponentEvent(this,"StudentInteraction","choiceSelected",e)}}toggleSelection(t){if(null!=t){var e=this.studentChoices;if(null!=e){var n=e.indexOf(t);-1==n?e.push(t):e.splice(n,1)}this.studentDataChanged();var i={};i.selectedChoiceId=t,i.choicesAfter=e,this.StudentDataService.saveComponentEvent(this,"StudentInteraction","choiceSelected",i)}}isRadio(){return this.isChoiceType("radio")}isCheckbox(){return this.isChoiceType("checkbox")}isChoiceType(t){var e=!1,n=this.componentContent;null!=n&&(t===n.choiceType&&(e=!0));return e}saveButtonClicked(){this.isCorrect=null,this.hideAllFeedback(),super.saveButtonClicked()}submit(t){if(this.isSubmitDirty){var e=!0;if(null!=this.componentContent.maxSubmitCount){var n=this.componentContent.maxSubmitCount-this.submitCounter;n<=0&&(e=!1)}e?(this.isSubmit=!0,this.isCorrect=null,this.hideAllFeedback(),this.incrementSubmitCounter(),null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount&&(this.isDisabled=!0,this.isSubmitButtonDisabled=!0),"authoring"===this.mode&&(this.checkAnswer(),this.isLatestComponentStateSubmit=!0,this.isDirty=!1,this.isSubmitDirty=!1),null!=t&&"componentSubmitButton"!==t||this.$scope.$emit("componentSubmitTriggered",{nodeId:this.nodeId,componentId:this.componentId})):this.isSubmit=!1}}hideAllFeedback(){for(var t=this.getChoices(),e=0;e<t.length;e++){var n=t[e];null!=n&&(n.showFeedback=!1)}}checkAnswer(){"radio"===this.getChoiceType()?this.checkSingleAnswer():"checkbox"===this.getChoiceType()&&this.checkMultipleAnswer()}checkSingleAnswer(){let t=!1;const e=this.getChoices();for(let n of e)this.componentHasCorrectAnswer&&n.isCorrect&&this.isChecked(n.id)&&(t=!0),this.displayFeedbackOnChoiceIfNecessary(n);this.componentHasCorrectAnswer&&(this.isCorrect=t)}checkMultipleAnswer(){let t=null;const e=this.getChoices();for(let n of e)this.componentHasCorrectAnswer&&(t=!(!this.isStudentChoiceValueCorrect(n)||null!==t)),this.displayFeedbackOnChoiceIfNecessary(n);this.componentHasCorrectAnswer&&(this.isCorrect=t)}displayFeedbackOnChoiceIfNecessary(t){this.showFeedback&&this.isChecked(t.id)&&(t.showFeedback=!0,t.feedbackToShow=t.feedback)}isStudentChoiceValueCorrect(t){return!(!t.isCorrect||!this.isChecked(t.id))||!t.isCorrect&&!this.isChecked(t.id)}getCorrectChoice(){var t=null;return null!=this.componentContent&&(t=this.componentContent.correctChoice),t}getCorrectChoices(){var t=null;return null!=this.componentContent&&(t=this.componentContent.correctChoices),t}studentDataChanged(){this.isCorrect=null,this.isLatestComponentStateSubmit=!1,super.studentDataChanged()}createComponentState(t){var e=this.NodeService.createNewComponentState();if(null!=e){var n={};n.studentChoices=this.getStudentChoiceObjects(),"submit"===t&&(this.checkAnswer(),null!=this.isCorrect&&(n.isCorrect=this.isCorrect)),"submit"===t?this.isSubmit&&(e.isSubmit=this.isSubmit,this.isSubmit=!1,this.isLatestComponentStateSubmit=!0):"save"===t&&(this.isLatestComponentStateSubmit=!1),n.submitCounter=this.submitCounter,e.studentData=n,e.componentType="MultipleChoice",e.nodeId=this.nodeId,e.componentId=this.componentId}var i=this.$q.defer();return this.createComponentStateAdditionalProcessing(i,e,t),i.promise}getStudentChoiceObjects(){var t=[],e=this.studentChoices,n=null,i=null;if(null!=e)if(this.isRadio())null!=(n=this.getChoiceById(e))&&((i={}).id=n.id,i.text=n.text,t.push(i));else if(this.isCheckbox())for(var r=0;r<e.length;r++){var o=e[r];null!=(n=this.getChoiceById(o))&&((i={}).id=n.id,i.text=n.text,t.push(i))}return t}hasCorrectChoices(){var t=!1,e=this.componentContent;if(null!=e){var n=e.choices;if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];null!=r&&r.isCorrect&&(t=!0)}}return t}hasFeedback(){var t=!1,e=this.componentContent;if(null!=e){var n=e.choices;if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];null!=r&&null!=r.feedback&&""!=r.feedback&&(t=!0)}}return t}getChoiceById(t){var e=null;if(null!=t){var n=this.componentContent;if(null!=n)for(var i=n.choices,r=0;r<i.length;r++){var o=i[r];if(null!=o)if(t===o.id){e=o;break}}}return e}getChoiceByText(t){var e=null;if(null!=t){var n=this.componentContent;if(null!=n)for(var i=n.choices,r=0;r<i.length;r++){var o=i[r];if(null!=o)if(t==o.text){e=o;break}}}return e}getChoiceType(){var t=null,e=this.componentContent;return null!=e&&(t=e.choiceType),t}getChoices(){var t=null,e=this.componentContent;return null!=e&&(t=e.choices),t}createMergedComponentState(t){let e=this.NodeService.createNewComponentState();if(null!=t){let n=[];for(let e=0;e<t.length;e++){let i=t[e];if(null!=i){let t=i.studentData;if(null!=t){let e=t.studentChoices;null!=e&&e.length>0&&(n=n.concat(e))}}}null!=n&&""!=n&&(e.studentData={},e.studentData.studentChoices=n)}return e}}Dt.$inject=["$filter","$mdDialog","$q","$rootScope","$scope","AnnotationService","ConfigService","MultipleChoiceService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var Lt=Dt;angular.module("multipleChoiceComponentModule",["pascalprecht.translate"]).service("MultipleChoiceService",$t).controller("MultipleChoiceController",Lt).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/multipleChoice/i18n")}]);var Pt=function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$rootScope=e,this.$filter=n,this.ConfigService=i,this.ProjectService=r,this.StudentDataService=o,this.rootNode=this.ProjectService.rootNode,this.$rootScope.$on("$stateChangeSuccess",function(t,e,n,i,r){var o=n.nodeId,s=r.nodeId;if(o&&s&&o!==s&&this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(o),"root.vle"===e.name){var a=n.nodeId;this.ProjectService.isApplicationNode(a)&&(document.getElementById("content").scrollTop=0)}}.bind(this))};Pt.$inject=["$rootScope","$filter","ConfigService","ProjectService","StudentDataService"];var Ot=Pt,Nt=n(254),jt=n(255),Rt=n.n(jt),Bt=n(256),Ft=n.n(Bt),Yt=n(257),Ht=n.n(Yt);class Wt extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("openResponse.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="OpenResponse",t.starterSentence=null,t.isStudentAttachmentEnabled=!1,t}isCompleted(t,e,n,i,r){let o=!1;if(e&&e.length){if(r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton)for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n.isSubmit&&n.studentData&&n.studentData.response){o=!0;break}}else{let t=e[e.length-1].studentData;null!=t&&t.response&&(o=!0)}}return null!=t.completionCriteria&&(o=this.StudentDataService.isCompletionCriteriaSatisfied(t.completionCriteria)),o}displayAnnotation(t,e){if(!1===e.displayToStudent)return!1;if("score"==e.type);else if("comment"==e.type);else if("autoScore"==e.type){if(null!=t.cRater&&!t.cRater.showScore)return!1;if(!1===t.showAutoScore)return!1}else if("autoComment"==e.type){if(null!=t.cRater&&!t.cRater.showFeedback)return!1;if(!1===t.showAutoFeedback)return!1}return!0}getStudentDataString(t){return t.studentData.response}componentStateHasStudentWork(t,e){if(this.hasStarterSentence(e)){let n=t.studentData.response,i=e.starterSentence;return this.hasResponse(t)&&n!==i}return this.hasResponse(t)}hasStarterSentence(t){const e=t.starterSentence;return null!=e&&""!==e}hasResponse(t){const e=t.studentData.response;return null!=e&&""!==e}}Wt.$inject=["$filter","StudentDataService","UtilService"];var zt=Wt,Ut=n(258);angular.module("openResponseComponentModule",["pascalprecht.translate"]).service("OpenResponseService",zt).controller("OpenResponseController",Ut.a).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/openResponse/i18n")}]);class Vt extends c.a{constructor(t,e,n){super(t,e,n)}getComponentTypeLabel(){return this.$translate("outsideURL.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="OutsideURL",t.url="",t}isCompleted(t,e,n,i){var r=!1;if(null!=i)for(var o=0;o<i.length;o++){var s=i[o];if(null!=s&&"nodeEntered"===s.event){r=!0;break}}return r}componentHasWork(t){return!1}componentUsesSaveButton(){return!1}componentUsesSubmitButton(){return!1}}Vt.$inject=["$filter","StudentDataService","UtilService"];var Gt=Vt;class qt extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p){super(t,e,i,o,s,a,l,c,h,d,f,p),this.$q=n,this.$sce=r,this.OutsideURLService=u,this.url=null,this.maxWidth=null,this.maxHeight=null,null!=this.componentContent&&this.setURL(this.componentContent.url),this.maxWidth=this.componentContent.maxWidth?this.componentContent.maxWidth:"none",this.maxHeight=this.componentContent.maxHeight?this.componentContent.maxHeight:"none",this.$scope.getComponentState=function(){var t=this.$q.defer();return t.resolve(),t.promise}.bind(this),this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}setURL(t){if(null!=t){var e=this.$sce.trustAsResourceUrl(t);this.url=e}}}qt.$inject=["$filter","$mdDialog","$q","$rootScope","$sce","$scope","AnnotationService","ConfigService","NodeService","NotebookService","OutsideURLService","ProjectService","StudentAssetService","StudentDataService","UtilService"];var Xt=qt;angular.module("outsideURLComponentModule",[]).service("OutsideURLService",Gt).controller("OutsideURLController",Xt).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/outsideURL/i18n")}]);var Kt=n(259),Jt=n.n(Kt),Zt=n(55),Qt=n.n(Zt),te=n(260),ee=n.n(te);function ne(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ie=function(){function t(e,n,i,r,o,s,a){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$filter=e,this.$injector=n,this.$rootScope=i,this.$scope=r,this.ConfigService=o,this.mode=this.ConfigService.getMode(),this.ProjectService=s,this.StudentAssetService=a,this.$translate=this.$filter("translate"),this.studentAssets=this.StudentAssetService.allAssets,this.itemId=null,this.item=null,this.logOutListener=r.$on("logOut",function(t,e){l.logOutListener(),l.$rootScope.$broadcast("componentDoneUnloading")}),this.ConfigService.isPreview()||this.retrieveStudentAssets()}var e,n,i;return e=t,(n=[{key:"getTemplateUrl",value:function(){return this.templateUrl}},{key:"retrieveStudentAssets",value:function(){var t=this;this.StudentAssetService.retrieveAssets().then(function(e){t.studentAssets=e})}},{key:"uploadStudentAssets",value:function(t){var e=this;if(null!=t){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this.StudentAssetService.uploadAsset(a).then(function(t){null!=e.componentController&&e.componentController.attachStudentAsset(t),e.studentAssets=e.StudentAssetService.allAssets})}}catch(t){i=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}}},{key:"deleteStudentAsset",value:function(t){alert(this.$translate("deleteStudentAssetNotImplementedYet"))}},{key:"attachStudentAssetToComponent",value:function(t,e){null!=this.componentController&&(this.componentController.attachStudentAsset(e),t.stopPropagation())}}])&&ne(e.prototype,n),i&&ne(e,i),t}();ie.$inject=["$filter","$injector","$rootScope","$scope","ConfigService","ProjectService","StudentAssetService"];var re=ie,oe=(angular.module("studentAsset",[]).directive("studentassets",function(){return{scope:{filter:"=",templateUrl:"=",componentController:"="},template:'<ng-include src="studentAssetController.getTemplateUrl()"></ng-include>',controller:"StudentAssetController",controllerAs:"studentAssetController",bindToController:!0}}).controller("StudentAssetController",re),n(261)),se=n.n(oe),ae=n(262),le=n.n(ae),ce=n(263),ue=n.n(ce),he=n(264),de=n.n(he);class fe extends c.a{constructor(t,e,n,i,r){super(t,i,r),this.$q=e,this.StudentAssetService=n}getComponentTypeLabel(){return this.$translate("table.componentTypeLabel")}createComponent(){const t=super.createComponent();return t.type="Table",t.globalCellSize=10,t.numRows=3,t.numColumns=3,t.tableData=[[{text:"",editable:!0,size:null},{text:"",editable:!0,size:null},{text:"",editable:!0,size:null}],[{text:"",editable:!0,size:null},{text:"",editable:!0,size:null},{text:"",editable:!0,size:null}],[{text:"",editable:!0,size:null},{text:"",editable:!0,size:null},{text:"",editable:!0,size:null}]],t}isCompleted(t,e,n,i,r){if(!this.componentHasEditableCells(t))return!0;if(e&&e.length){let n=r.showSubmitButton||t.showSubmitButton&&!r.showSaveButton;for(let t=0,i=e.length;t<i;t++){let i=e[t],r=i.studentData;if(null!=r){if(null!=r.tableData){if(!n)return!0;if(i.isSubmit)return!0}}}}return!1}componentHasEditableCells(t){if(null!=t){let e=t.tableData;if(null!=e)for(let t=0;t<e.length;t++){let n=e[t];if(null!=n)for(let t=0;t<n.length;t++){let e=n[t];if(null!=e&&!0===e.editable)return!0}}}return!1}componentStateHasStudentWork(t,e){if(null!=t){let n=t.studentData;if(null!=n){let t=n.tableData,i=e.tableData;if(null!=t){let e=t;for(let n=0;n<e.length;n++){let r=e[n];if(null!=r)for(let e=0;e<r.length;e++){if(this.getTableDataCellValue(n,e,t)!==this.getTableDataCellValue(n,e,i))return!0}}}}}return!1}getTableDataCellValue(t,e,n){var i=null;if(null!=n){var r=n[e];if(null!=r){var o=r[t];null!=o&&(i=o.text)}}return i}generateImageFromRenderedComponentState(t){let e=this.$q.defer(),n=angular.element("#table_"+t.nodeId+"_"+t.componentId);return null!=n&&n.length>0&&(n=n[0],ft()(n).then(t=>{let n=t.toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(n);this.StudentAssetService.uploadAsset(i).then(t=>{e.resolve(t)})})),e.promise}hasRequiredNumberOfFilledRows(t,e,n,i){const r=t.studentData.tableData;let o=0;n&&(o=1);let s=0;for(let t=o;t<r.length;t++){const e=r[t];this.isRowFilled(e,i)&&s++}return s>=e}isRowFilled(t,e){return e?this.isAllCellsFilledInRow(t):this.isAtLeastOneCellFilledInRow(t)}isAllCellsFilledInRow(t){for(let e of t)if(null==e.text||""==e.text)return!1;return!0}isAtLeastOneCellFilledInRow(t){for(let e of t)if(null!=e.text&&""!=e.text)return!0;return!1}}fe.$inject=["$filter","$q","StudentAssetService","StudentDataService","UtilService"];var pe=fe;class me extends d.a{constructor(t,e,n,i,r,o,s,a,l,c,u,h,d,f,p,m){super(e,i,o,s,a,l,c,u,h,d,f,m),this.$anchorScroll=t,this.$location=n,this.$q=r,this.TableService=p,this.tableData=null,this.isResetTableButtonVisible=!0,this.notebookConfig=this.NotebookService.getNotebookConfig(),this.latestConnectedComponentState=null,this.latestConnectedComponentParams=null,this.tableId="table_"+this.nodeId+"_"+this.componentId,"student"===this.mode?(this.isPromptVisible=!0,this.isSaveButtonVisible=this.componentContent.showSaveButton,this.isSubmitButtonVisible=this.componentContent.showSubmitButton,this.isResetTableButtonVisible=!0):"grading"===this.mode||"gradingRevision"===this.mode?(this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isResetTableButtonVisible=!1,this.isDisabled=!0):"onlyShowWork"===this.mode?(this.isPromptVisible=!1,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isResetTableButtonVisible=!1,this.isDisabled=!0):"showPreviousWork"===this.mode&&(this.isPromptVisible=!0,this.isSaveButtonVisible=!1,this.isSubmitButtonVisible=!1,this.isResetTableButtonVisible=!1,this.isDisabled=!0);var g;g=this.$scope.componentState,"student"==this.mode?this.UtilService.hasShowWorkConnectedComponent(this.componentContent)?this.handleConnectedComponents():this.TableService.componentStateHasStudentWork(g,this.componentContent)?this.setStudentWork(g):this.UtilService.hasConnectedComponent(this.componentContent)?this.handleConnectedComponents():null==g&&this.UtilService.hasConnectedComponent(this.componentContent)&&this.handleConnectedComponents():this.setStudentWork(g),this.setupTable(),null!=this.componentContent.maxSubmitCount&&this.submitCounter>=this.componentContent.maxSubmitCount&&(this.isSubmitButtonDisabled=!0),this.disableComponentIfNecessary(),this.$scope.handleConnectedComponentStudentDataChanged=function(t,e,n){if(null!=t&&null!=e&&null!=n){e.updateOn;var i=t.type;n=this.UtilService.makeCopyOfJSONObject(n),"Table"===i?(this.$scope.tableController.setStudentWork(n),this.$scope.tableController.isDirty=!0):"Graph"===i?(this.$scope.tableController.setGraphDataIntoTableData(n,e),this.$scope.tableController.isDirty=!0):"Embedded"===i&&(this.$scope.tableController.setStudentWork(n),this.$scope.tableController.isDirty=!0,this.$scope.$emit("componentSaveTriggered",{nodeId:this.nodeId,componentId:this.componentId}))}}.bind(this),this.$scope.getComponentState=function(t){var e=this.$q.defer();let n=!1,i="change";return t?this.$scope.tableController.isSubmitDirty&&(n=!0,i="submit"):this.$scope.tableController.isDirty&&(n=!0,i="save"),n?this.$scope.tableController.createComponentState(i).then(t=>{e.resolve(t)}):e.resolve(),e.promise}.bind(this),this.$scope.$on("exitNode",angular.bind(this,function(t,e){})),this.$scope.getNumber=function(t){var e=new Array;return null==t||isNaN(t)||(e=new Array(parseInt(t))),e},this.$rootScope.$broadcast("doneRenderingComponent",{nodeId:this.nodeId,componentId:this.componentId})}registerStudentWorkSavedToServerListener(){this.$scope.$on("studentWorkSavedToServer",angular.bind(this,function(t,e){let n=e.studentWork;if(n&&this.nodeId===n.nodeId&&this.componentId===n.componentId){this.isDirty=!1,this.$scope.$emit("componentDirty",{componentId:this.componentId,isDirty:!1});let t=n.isAutoSave,e=n.isSubmit,i=n.serverSaveTime,r=this.ConfigService.convertToClientTimestamp(i);e?(this.setSubmittedMessage(r),this.lockIfNecessary(),this.isSubmitDirty=!1,this.$scope.$emit("componentSubmitDirty",{componentId:this.componentId,isDirty:!1})):t?this.setAutoSavedMessage(r):this.setSavedMessage(r)}if(this.ProjectService.isConnectedComponent(this.nodeId,this.componentId,n.componentId)){var i=this.ProjectService.getConnectedComponentParams(this.componentContent,n.componentId);if(null!=i&&("save"===i.updateOn||"submit"===i.updateOn&&n.isSubmit)){n=this.UtilService.makeCopyOfJSONObject(n),(this.isTableEmpty()||this.isTableReset(),!0)&&(this.$scope.tableController.setStudentWork(n),this.$scope.tableController.isDirty=!0,this.$scope.tableController.isSubmitDirty=!0),this.latestConnectedComponentState=n,this.latestConnectedComponentParams=i}}}))}handleNodeSubmit(){this.submit("nodeSubmitButton")}getCopyOfTableData(t){var e=null;if(null!=t){var n=JSON.stringify(t);e=JSON.parse(n)}return e}setupTable(){null==this.tableData&&(this.tableData=this.getCopyOfTableData(this.componentContent.tableData))}resetTable(){this.UtilService.hasConnectedComponent(this.componentContent)?(this.tableData=this.getCopyOfTableData(this.componentContent.tableData),this.handleConnectedComponents()):(this.tableData=this.getCopyOfTableData(this.componentContent.tableData),this.studentDataChanged())}getTableDataRows(){return this.tableData}setStudentWork(t){if(null!=t){var e=t.studentData;if(null!=e){this.tableData=e.tableData;var n=e.submitCounter;null!=n&&(this.submitCounter=n),this.processLatestStudentWork()}}}createComponentState(t){var e=this.$q.defer(),n=this.NodeService.createNewComponentState(),i={};return i.tableData=this.getCopyOfTableData(this.tableData),i.submitCounter=this.submitCounter,n.isSubmit=this.isSubmit,n.studentData=i,n.componentType="Table",n.nodeId=this.nodeId,n.componentId=this.componentId,this.isSubmit=!1,this.createComponentStateAdditionalProcessing(e,n,t),e.promise}createBlankComponentState(){var t=this.NodeService.createNewComponentState();if(null!=t){t.studentData={}}return t}showResetTableButton(){return this.isResetTableButtonVisible}setGraphDataIntoTableData(t,e){var n=0,i=0;if(null!=e&&(null!=e.trialIndex&&(n=e.trialIndex),null!=e.seriesIndex&&(i=e.seriesIndex),e.showDataAtMouseX))this.showDataAtMouseX(t,e);else if(null!=t&&null!=t.studentData){var r=t.studentData,o=r.version;if(null==o||1==o){if(null!=(u=r.series)&&u.length>0){var s=u[i];this.setSeriesIntoTable(s)}}else{var a=r.trials;if(null!=a){var l=a[n];if(null!=l){var c=l.series;if(null!=c){var u=c[i];this.setSeriesIntoTable(u)}}}}}}showDataAtMouseX(t,e){let n=t.studentData,i=n.mouseOverPoints,r=null;if(null!=i&&i.length>0){let t=i[i.length-1];r=Math.round(t[0])}let o=n.xAxis.units,s=n.yAxis.units,a=n.xAxis.title.text,l=n.yAxis.title.text;this.removeAllCellsFromTableData(),this.addTableDataRow(this.createTableRow(["Series Name",a,l]));for(let t of n.trials)if(t.show){let e=t.series;for(let t of e)if(!1!==t.show){let e=this.getClosestDataPoint(t.data,r);null!=e&&this.addTableDataRow(this.createTableRow([t.name,Math.round(this.getXFromDataPoint(e))+" "+o,Math.round(this.getYFromDataPoint(e))+" "+s]))}}}removeAllCellsFromTableData(){this.tableData=[]}addTableDataRow(t){this.tableData.push(t)}createTableCell(t="",e=!1,n=null){return{text:t,editable:e,size:n}}createTableRow(t){let e=[];for(let n of t)"String"==n.constructor.name?e.push(this.createTableCell(n)):"Object"==n.constructor.name&&e.push(this.createTableCell(n.text,n.editable,n.size));return e}getClosestDataPoint(t,e){let n=null,i=1/0;for(let r of t){let t=this.getXFromDataPoint(r),o=this.getNumericalAbsoluteDifference(e,t);o<i&&(n=r,i=o)}return n}getNumericalAbsoluteDifference(t,e){return Math.abs(t-e)}getXFromDataPoint(t){return"Object"==t.constructor.name?t.x:"Array"==t.constructor.name?t[0]:void 0}getYFromDataPoint(t){return"Object"==t.constructor.name?t.y:"Array"==t.constructor.name?t[1]:void 0}setSeriesIntoTable(t,e){var n=!0,i=0,r=1;if(null!=e&&(null!=e.skipFirstRow&&(n=e.skipFirstRow),null!=e.xColumn&&(i=e.xColumn),null!=e.yColumn&&(r=e.yColumn)),null!=t){var o=this.getTableDataRows(),s=t.data;if(null!=s)for(var a=0,l=0;l<o.length;l++)if(!n||0!==l){var c="",u="",h=s[a];null!=h&&(c=h[0],u=h[1]),this.setTableDataCellValue(i,l,null,c),this.setTableDataCellValue(r,l,null,u),a++}}}setTableDataCellValue(t,e,n,i){var r=n;if(null==n&&(r=this.getTableDataRows()),null!=r){var o=r[e];if(null!=o){var s=o[t];null!=s&&(s.text=i)}}}getTableDataCellValue(t,e,n){var i=null;if(null==n&&(n=this.getTableDataRows()),null!=n){var r=n[e];if(null!=r){var o=r[t];null!=o&&(i=o.text)}}return i}getNumRows(){return this.componentContent.numRows}getNumColumns(){return this.componentContent.numColumns}isTableEmpty(){for(var t=!0,e=this.getNumRows(),n=this.getNumColumns(),i=0;i<e;i++){for(var r=0;r<n;r++){var o=this.getTableDataCellValue(r,i);if(null!=o&&""!=o){t=!1;break}}if(0==t)break}return t}isTableReset(){for(var t=!0,e=this.getNumRows(),n=this.getNumColumns(),i=this.componentContent.tableData,r=0;r<e;r++){for(var o=0;o<n;o++){if(this.getTableDataCellValue(o,r)!=this.getTableDataCellValue(o,r,i)){t=!1;break}}if(0==t)break}return t}snipTable(t){var e=angular.element("#table_"+this.nodeId+"_"+this.componentId);null!=e&&e.length>0&&(e=e[0],ft()(e).then(e=>{var n=e.toDataURL("image/png"),i=this.UtilService.getImageObjectFromBase64String(n);this.NotebookService.addNote(t,i)}))}handleConnectedComponents(){let t=!1;const e=this.getConnectedComponentsAndTheirComponentStates();for(const n of e){const e=n.connectedComponent,i=n.componentState;null!=i&&("showWork"===e.type?(this.tableData=i.studentData.tableData,this.isDisabled=!0):"append"===e.action?this.appendComponentState(i,e):this.mergeComponentState(i),t=!0)}t&&this.studentDataChanged()}mergeComponentState(t){null==this.tableData&&(this.tableData=this.getCopyOfTableData(this.componentContent.tableData)),0===this.componentContent.numRows||0===this.componentContent.numColumns?this.tableData=t.studentData.tableData:this.mergeTableData(t.studentData.tableData)}mergeTableData(t){for(let e=0;e<this.getNumRows();e++)for(let n=0;n<this.getNumColumns();n++){const i=this.getTableDataCellValue(n,e,t);null!=i&&""!==i&&this.setTableDataCellValue(n,e,this.tableData,i)}}appendComponentState(t,e){null==this.tableData&&(this.tableData=this.getCopyOfTableData(this.componentContent.tableData));let n=t.studentData.tableData;e.excludeFirstRow&&(n=n.slice(1)),this.appendTable(n)}appendTable(t){this.tableData=this.tableData.concat(t)}authoringAutomaticallySetConnectedComponentFieldsIfPossible(t){"importWork"===t.type&&null==t.action?t.action="merge":"showWork"===t.type&&(t.action=null)}authoringConnectedComponentTypeChanged(t){this.authoringAutomaticallySetConnectedComponentFieldsIfPossible(t),this.authoringViewComponentChanged()}}me.$inject=["$anchorScroll","$filter","$location","$mdDialog","$q","$rootScope","$scope","AnnotationService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","TableService","UtilService"];var ge=me;angular.module("tableComponentModule",["pascalprecht.translate"]).service(pe.name,pe).controller(ge.name,ge).config(["$translatePartialLoaderProvider",t=>{t.addPart("components/table/i18n")}]);var ve=n(265),ye=n.n(ve),be=n(266);function _e(t){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Se(t,e){return!e||"object"!==_e(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ke=function(t){function e(t,n,i,r,o,s,a){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,xe(e).call(this,t,n,i,r,o,s,a))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(e,Qt.a),n=e,(i=[{key:"isConnectedComponent",value:function(t,e,n){var i=this.getComponentByNodeIdAndComponentId(t,e);if(null!=i){var r=i.connectedComponents;if(null!=r){var o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u&&(n===u.id||n===u.componentId))return!0}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}}return!1}},{key:"getConnectedComponentParams",value:function(t,e){var n=null;if(null!=t&&null!=e){var i=t.connectedComponents;if(null!=i){var r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;null!=c&&(e!==c.id&&e!==c.componentId||(n=c))}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}}return n}},{key:"displayAnnotation",value:function(t){var e=this.getComponentByNodeIdAndComponentId(t.nodeId,t.componentId);return null==e||this.$injector.get(e.type+"Service").displayAnnotation(e,t)}},{key:"getGlobalAnnotationGroupByScore",value:function(t,e,n){var i=null;if(null!=t.globalAnnotationSettings&&null!=t.globalAnnotationSettings.globalAnnotationGroups){var r=t.globalAnnotationSettings.globalAnnotationGroups,o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u.enableCriteria&&null!=u.enableCriteria.scoreSequence){var h=u.enableCriteria.scoreSequence;if(null!=h){var d=h[0],f=h[1];if(null==e){if(""==d&&n.toString().match("["+f+"]")){i=u;break}}else if(e.toString().match("["+d+"]")&&n.toString().match("["+f+"]")){i=u;break}}}}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}return i}},{key:"getNotificationByScore",value:function(t,e,n){var i=null;if(null!=t.notificationSettings&&null!=t.notificationSettings.notifications){var r=t.notificationSettings.notifications,o=!0,s=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(null!=u.enableCriteria&&null!=u.enableCriteria.scoreSequence){var h=u.enableCriteria.scoreSequence;if(null!=h){var d=h[0],f=h[1];if(null==e){if(""==d&&n.toString().match("["+f+"]")){i=u;break}}else if(e.toString().match("["+d+"]")&&n.toString().match("["+f+"]")){i=u;break}}}}}catch(t){s=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}return i}},{key:"retrieveScript",value:function(t){var e=this.ConfigService.getProjectAssetsDirectoryPath()+"/"+t;return this.$http.get(e).then(function(t){return t.data})}},{key:"addAdditionalProcessingFunction",value:function(t,e,n){var i=t+"_"+e;null==this.additionalProcessingFunctionsMap[i]&&(this.additionalProcessingFunctionsMap[i]=[]),this.additionalProcessingFunctionsMap[i].push(n)}}])&&we(n.prototype,i),r&&we(n,r),e}();ke.$inject=["$filter","$http","$injector","$q","$rootScope","ConfigService","UtilService"];var Te=ke,Me=n(0),Ee=n.n(Me),Ae=(n(442),n(444),n(445),s.a.module("vle",[l()(s.a),"angularMoment","angular-toArrayFilter","animationComponentModule","audioOscillatorComponentModule","components","conceptMapComponentModule","discussionComponentModule","drawComponentModule","embeddedComponentModule","filters","graphComponentModule","highcharts-ng","htmlComponentModule","labelComponentModule","matchComponentModule","multipleChoiceComponentModule","ngAria","ngFileUpload","ngMaterial","ngOnload","ngSanitize","ngStomp","ngWebSocket","openResponseComponentModule","outsideURLComponentModule","pascalprecht.translate","studentAsset","summernote","tableComponentModule","theme","ui.router","ui.scrollpoint"]).service("AchievementService",r.a).service("AnnotationService",g.a).service("ConfigService",M.a).service("ComponentService",c.a).service("CRaterService",A.a).service("HttpInterceptor",St.a).service("NodeService",Rt.a).service("NotebookService",Ft.a).service("NotificationService",Ht.a).service("PlanningService",Jt.a).service("ProjectService",Te).service("SessionService",ee.a).service("StudentAssetService",se.a).service("StudentDataService",le.a).service("StudentStatusService",ue.a).service("StudentWebSocketService",de.a).service("UtilService",ye.a).controller("NavigationController",Ot).controller("NodeController",Nt.a).controller("VLEController",be.a).filter("Filters",ht).config(["$urlRouterProvider","$stateProvider","$translateProvider","$translatePartialLoaderProvider","$controllerProvider","$mdThemingProvider","$httpProvider","$injector","$provide",function(t,e,n,i,r,o,a,l,c){s.a.module("vle").$controllerProvider=r,e.state("root",{url:"",abstract:!0,templateProvider:["$http","ProjectService",function(t,e){var n=e.getThemePath();return t.get(n+"/vle.html").then(function(t){return t.data})}],controller:"VLEController",controllerAs:"vleController",resolve:{config:["ConfigService",function(t){var e=window.configURL;return null==e&&(e=prompt("Please enter configURL","/config/studentRun/24673")),t.retrieveConfig(e)}],project:["ProjectService","config",function(t,e){return t.retrieveProject()}],studentData:["StudentDataService","config","project",function(t,e,n){return t.retrieveStudentData()}],notebook:["NotebookService","ConfigService","StudentAssetService","studentData","config","project",function(t,e,n,i,r,o){return n.retrieveAssets().then(function(n){return t.retrieveNotebookItems(e.getWorkgroupId()).then(function(t){return t})})}],achievements:["AchievementService","studentData","config","project",function(t,e,n,i){return t.retrieveStudentAchievements()}],notifications:["NotificationService","studentData","config","project",function(t,e,n,i){return t.retrieveNotifications()}],runStatus:["StudentDataService","config",function(t,e){return t.retrieveRunStatus()}],webSocket:["StudentWebSocketService","ConfigService","config","project",function(t,e,n,i){if(!e.isPreview())return t.initialize()}],language:["$translate","ConfigService","config",function(t,e,n){var i=e.getLocale();t.use(i)}]}}).state("root.vle",{url:"/vle/:nodeId",views:{nodeView:{templateProvider:["$http","ConfigService",function(t,e){var n=e.getWISEBaseURL();return t.get(n+"/wise5/vle/node/index.html").then(function(t){return t.data})}],controller:"NodeController",controllerAs:"nodeController"}}}).state("root.component",{url:"/vle/:nodeId/:componentId",views:{nodeView:{templateProvider:["$http","ConfigService",function(t,e){var n=e.getWISEBaseURL();return t.get(n+"/wise5/vle/node/index.html").then(function(t){return t.data})}],controller:"NodeController",controllerAs:"nodeController"}}}),t.otherwise(function(t,e){t.get("$state").go("root.vle",{})}),a.interceptors.push("HttpInterceptor"),i.addPart("i18n"),i.addPart("vle/i18n"),n.useLoader("$translatePartialLoader",{urlTemplate:"wise5/{part}/i18n_{lang}.json"}).fallbackLanguage(["en"]).registerAvailableLanguageKeys(["ar","el","en","es","ja","ko","pt","tr","zh_CN","zh_TW"],{en_US:"en",en_UK:"en"}).determinePreferredLanguage().useSanitizeValueStrategy("sanitizeParameters","escape"),o.definePalette("primary",{50:"e1f0f4",100:"b8dbe4",200:"8ec6d4",300:"5faec2",400:"3d9db5",500:"1c8ca8",600:"197f98",700:"167188",800:"136377",900:"0e4957",A100:"abf3ff",A200:"66e2ff",A400:"17bee5",A700:"00A1C6",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","A100"],contrastLightColors:void 0}),o.definePalette("accent",{50:"fde9e6",100:"fbcbc4",200:"f8aca1",300:"f4897b",400:"f2705f",500:"f05843",600:"da503c",700:"c34736",800:"aa3e2f",900:"7d2e23",A100:"ff897d",A200:"ff7061",A400:"ff3829",A700:"cc1705",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","A100"],contrastLightColors:void 0}),o.theme("default").primaryPalette("primary").accentPalette("accent",{default:"500"}).warnPalette("red",{default:"800"});var u=o.extendPalette("grey",{A100:"ffffff"});o.definePalette("light",u),o.theme("light").primaryPalette("light",{default:"A100"}).accentPalette("primary"),o.setDefaultTheme("default"),o.enableBrowserColor(),Ee.a.updateLocale("en",{calendar:{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"ll"}})}]));s.a.element(document).ready(function(){s.a.bootstrap(document.getElementsByTagName("body")[0],[Ae.name],{strictDi:!0})});e.default=Ae}]);
//# sourceMappingURL=app.bundle.js.map