{"version":3,"sources":["audioOscillatorController.spec.es6"],"names":["describe","$controller","$rootScope","$scope","audioOscillatorController","component","beforeEach","angular","mock","module","mainModule","name","inject","_$controller_","_$rootScope_","$new","componentContent","JSON","parse","stringify","window","AudioContext","nodeId","it","addFrequencyPlayed","expect","frequenciesPlayed","length","toEqual","playSpy","spyOn","togglePlay","toHaveBeenCalled","frequency","startingFrequency","oscilloscopeWidth","oscilloscopeHeight","gridCellSize","oscillatorTypes","componentState","studentData","setStudentWork"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEAA,SAAS,2BAAT,EAAsC,YAAM;;AAE1C,MAAIC,oBAAJ;AACA,MAAIC,mBAAJ;AACA,MAAIC,eAAJ;AACA,MAAIC,kCAAJ;AACA,MAAIC,kBAAJ;;AAEAC,aAAWC,kBAAQC,IAAR,CAAaC,MAAb,CAAoBC,eAAWC,IAA/B,CAAX;;AAEAL,aAAWM,OAAO,UAACC,aAAD,EAAgBC,YAAhB,EAAiC;AACjDb,kBAAcY,aAAd;AACAX,iBAAaY,YAAb;AACAT,gBAAY;AACV,YAAM,YADI;AAEV,cAAQ,iBAFE;AAGV,gBAAU,EAHA;AAIV,wBAAkB,KAJR;AAKV,0BAAoB,IALV;AAMV,yBAAmB,CACjB,MADiB,EAEjB,UAFiB,EAGjB,UAHiB,CANT;AAWV,2BAAqB,GAXX;AAYV,2BAAqB,GAZX;AAaV,4BAAsB,GAbZ;AAcV,sBAAgB,EAdN;AAeV,2BAAqB,KAfX;AAgBV,iCAA2B;AAhBjB,KAAZ;;AAmBAF,aAASD,WAAWa,IAAX,EAAT;AACAZ,WAAOa,gBAAP,GAA0BC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAed,SAAf,CAAX,CAA1B;AACAe,WAAOC,YAAP,GAAsB,YAAW,CAAE,CAAnC,CAAoCjB,4BAA4BH,YAAY,2BAAZ,EAAyC,EAAEE,QAAQA,MAAV,EAAzC,CAA5B;AACpCC,8BAA0BkB,MAA1B,GAAmC,OAAnC;AACD,GA1BU,CAAX;;AA4BAC,KAAG,mDAAH,EAAwD,YAAM;AAC5DnB,8BAA0BoB,kBAA1B,CAA6C,GAA7C;AACAC,WAAOrB,0BAA0BsB,iBAA1B,CAA4CC,MAAnD,EAA2DC,OAA3D,CAAmE,CAAnE;AACAH,WAAOrB,0BAA0BsB,iBAA1B,CAA4C,CAA5C,CAAP,EAAuDE,OAAvD,CAA+D,GAA/D;AACD,GAJD;;AAMAL,KAAG,mDAAH,EAAwD,YAAM;AAC5DnB,8BAA0BoB,kBAA1B,CAA6C,GAA7C;AACAC,WAAOrB,0BAA0BsB,iBAA1B,CAA4C,CAA5C,CAAP,EAAuDE,OAAvD,CAA+D,GAA/D;AACD,GAHD;;AAKAL,KAAG,iDAAH,EAAsD,YAAM;AAC1D,QAAMM,UAAUC,MAAM1B,yBAAN,EAAiC,MAAjC,CAAhB;AACAA,8BAA0B2B,UAA1B;AACAN,WAAOI,OAAP,EAAgBG,gBAAhB;AACD,GAJD;;AAMAT,KAAG,sDAAH,EAA2D,YAAM;AAC/DE,WAAOrB,0BAA0B6B,SAAjC,EAA4CL,OAA5C,CAAoDvB,UAAU6B,iBAA9D;AACAT,WAAOrB,0BAA0B+B,iBAAjC,EAAoDP,OAApD,CAA4DvB,UAAU8B,iBAAtE;AACAV,WAAOrB,0BAA0BgC,kBAAjC,EAAqDR,OAArD,CAA6DvB,UAAU+B,kBAAvE;AACAX,WAAOrB,0BAA0BiC,YAAjC,EAA+CT,OAA/C,CAAuDvB,UAAUgC,YAAjE;AACAZ,WAAOrB,0BAA0BkC,eAA1B,CAA0CX,MAAjD,EAAyDC,OAAzD,CAAiE,CAAjE;AACD,GAND;;AAQAL,KAAG,gCAAH,EAAqC,YAAM;AACzC,QAAMgB,iBAAiB;AACrBC,mBAAa;AACXd,2BAAmB,CAAC,GAAD,EAAM,GAAN;AADR;AADQ,KAAvB;AAKAtB,8BAA0BqC,cAA1B,CAAyCF,cAAzC;AACAd,WAAOrB,0BAA0BsB,iBAA1B,CAA4CC,MAAnD,EAA2DC,OAA3D,CAAmE,CAAnE;AACAH,WAAOrB,0BAA0BsB,iBAA1B,CAA4C,CAA5C,CAAP,EAAuDE,OAAvD,CAA+D,GAA/D;AACAH,WAAOrB,0BAA0BsB,iBAA1B,CAA4C,CAA5C,CAAP,EAAuDE,OAAvD,CAA+D,GAA/D;AACD,GAVD;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGD,CArFD","file":"audioOscillatorController.spec.js","sourcesContent":["import angular from 'angular';\nimport mainModule from 'vle/main';\nimport 'angular-mocks';\n\ndescribe('AudioOscillatorController', () => {\n\n  let $controller;\n  let $rootScope;\n  let $scope;\n  let audioOscillatorController;\n  let component;\n\n  beforeEach(angular.mock.module(mainModule.name));\n\n  beforeEach(inject((_$controller_, _$rootScope_) => {\n    $controller = _$controller_;\n    $rootScope = _$rootScope_;\n    component = {\n      \"id\": \"q4024mds8j\",\n      \"type\": \"AudioOscillator\",\n      \"prompt\": \"\",\n      \"showSaveButton\": false,\n      \"showSubmitButton\": true,\n      \"oscillatorTypes\": [\n        \"sine\",\n        \"triangle\",\n        \"sawtooth\"\n      ],\n      \"startingFrequency\": 440,\n      \"oscilloscopeWidth\": 800,\n      \"oscilloscopeHeight\": 400,\n      \"gridCellSize\": 50,\n      \"stopAfterGoodDraw\": false,\n      \"showAddToNotebookButton\": true\n    };\n\n    $scope = $rootScope.$new();\n    $scope.componentContent = JSON.parse(JSON.stringify(component));\n    window.AudioContext = function() {};audioOscillatorController = $controller('AudioOscillatorController', { $scope: $scope });\n    audioOscillatorController.nodeId = 'node1';\n  }));\n\n  it('should add a frequency played to the student data', () => {\n    audioOscillatorController.addFrequencyPlayed(440);\n    expect(audioOscillatorController.frequenciesPlayed.length).toEqual(1);\n    expect(audioOscillatorController.frequenciesPlayed[0]).toEqual(440);\n  });\n\n  it('should add a frequency played to the student data', () => {\n    audioOscillatorController.addFrequencyPlayed(440);\n    expect(audioOscillatorController.frequenciesPlayed[0]).toEqual(440);\n  });\n\n  it('should call play when the toggle play is called', () => {\n    const playSpy = spyOn(audioOscillatorController, 'play');\n    audioOscillatorController.togglePlay();\n    expect(playSpy).toHaveBeenCalled();\n  });\n\n  it('should set the parameters from the component content', () => {\n    expect(audioOscillatorController.frequency).toEqual(component.startingFrequency);\n    expect(audioOscillatorController.oscilloscopeWidth).toEqual(component.oscilloscopeWidth);\n    expect(audioOscillatorController.oscilloscopeHeight).toEqual(component.oscilloscopeHeight);\n    expect(audioOscillatorController.gridCellSize).toEqual(component.gridCellSize);\n    expect(audioOscillatorController.oscillatorTypes.length).toEqual(3);\n  });\n\n  it('should repopulate student work', () => {\n    const componentState = {\n      studentData: {\n        frequenciesPlayed: [440, 880]\n      }\n    };\n    audioOscillatorController.setStudentWork(componentState);\n    expect(audioOscillatorController.frequenciesPlayed.length).toEqual(2);\n    expect(audioOscillatorController.frequenciesPlayed[0]).toEqual(440);\n    expect(audioOscillatorController.frequenciesPlayed[1]).toEqual(880);\n  });\n\n  // it('should create a component state', () => {\n  //   console.log('hello1');\n  //   audioOscillatorController.createComponentState().then((componentState) => {\n  //     console.log('hello2');\n  //     expect(componentState.studentData).not.toBeNull();\n  //     console.log('hello3');\n  //   });\n  // });\n\n\n});\n"]}