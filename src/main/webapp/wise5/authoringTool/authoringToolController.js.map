{"version":3,"sources":["authoringToolController.es6"],"names":["AuthoringToolController","$anchorScroll","$filter","$location","$mdDialog","$rootScope","$scope","$state","$timeout","ConfigService","ProjectService","SessionService","TeacherDataService","$translate","numberProject","globalMessage","text","time","isMenuOpen","views","id","name","label","icon","type","showToolbar","active","logoPath","getThemePath","processUI","$on","event","toState","toParams","fromState","fromParams","confirm","parent","angular","element","document","body","title","content","ariaLabel","ok","cancel","show","then","renewSession","forceLogOut","ev","alert","textContent","targetEvent","setGlobalMessage","Date","getTime","params","stateParams","isPopup","projectId","nodeId","componentId","target","targetObject","templateUrl","controller","controllerAs","$stateParams","clickOutsideToClose","escapeToClose","saveEvent","current","showStepTools","$current","view","currentViewName","getProjectId","runId","getRunId","projectTitle","getProjectTitle","url","mouseMoved","notifyAuthorProjectEnd","wiseBaseURL","getWISEBaseURL","window","location","message","eventName","category","context","componentType","data","$inject"],"mappings":"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","file":"authoringToolController.js","sourcesContent":["'use strict';\n\nclass AuthoringToolController {\n\n  constructor(\n      $anchorScroll,\n      $filter,\n      $location,\n      $mdDialog,\n      $rootScope,\n      $scope,\n      $state,\n      $timeout,\n      ConfigService,\n      ProjectService,\n      SessionService,\n      TeacherDataService) {\n    this.$anchorScroll = $anchorScroll;\n    this.$filter = $filter;\n    this.$location = $location;\n    this.$mdDialog = $mdDialog;\n    this.$rootScope = $rootScope;\n    this.$scope = $scope;\n    this.$state = $state;\n    this.$timeout = $timeout;\n    this.$translate = this.$filter('translate');\n    this.ConfigService = ConfigService;\n    this.ProjectService = ProjectService;\n    this.SessionService = SessionService;\n    this.TeacherDataService = TeacherDataService;\n\n    this.numberProject = true; // TODO: make dynamic or remove\n    this.globalMessage = {\n        text: '',\n        time: ''\n    };\n    this.isMenuOpen = false;\n\n    // ui-views and their corresponding names, labels, and icons\n    this.views = {\n      'root.project': {\n        id: 'projectHomeButton',\n        name: this.$translate('projectHome'),\n        label: this.$translate('projectHome'),\n        icon: 'home',\n        type: 'primary',\n        showToolbar: true,\n        active: true\n      },\n      'root.project.notebook': {\n        id: 'notebookButton',\n        name: this.$translate('notebookSettings'),\n        label: this.$translate('notebookSettings'),\n        icon: 'book',\n        type: 'primary',\n        showToolbar: true,\n        active: true\n      },\n      'root.project.asset': {\n        id: 'assetButton',\n        name: this.$translate('fileManager'),\n        label: this.$translate('fileManager'),\n        icon: 'attach_file',\n        type: 'primary',\n        showToolbar: true,\n        active: true\n      },\n      'root.project.info': {\n        id: 'infoButton',\n        name: this.$translate('PROJECT_INFO'),\n        label: this.$translate('PROJECT_INFO'),\n        icon: 'info',\n        type: 'primary',\n        showToolbar: true,\n        active: true\n      },\n      'root.main': {\n        id: 'projectListButton',\n        name: this.$translate('projectsList'),\n        label: this.$translate('projectsList'),\n        icon: 'reorder',\n        type: 'primary',\n        showToolbar: false,\n        active: true\n      },\n      'root.project.node': {\n        name: '',\n        label: '',\n        icon: '',\n        type: 'secondary',\n        showToolbar: true,\n        active: false\n      },\n      'root.project.nodeConstraints': {\n        name: '',\n        label: '',\n        icon: '',\n        type: 'secondary',\n        showToolbar: true,\n        active: false\n      },\n      'root.project.nodeEditPaths': {\n        name: '',\n        label: '',\n        icon: '',\n        type: 'secondary',\n        showToolbar: true,\n        active: false\n      },\n    };\n\n    this.logoPath = this.ProjectService.getThemePath() + '/images/WISE-logo-ffffff.svg';\n    this.processUI();\n\n    // listen for state change events and close the menu\n    this.$scope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n      this.isMenuOpen = false;\n      this.processUI();\n    });\n\n    $scope.$on('showSessionWarning', () => {\n      let confirm = this.$mdDialog.confirm()\n          .parent(angular.element(document.body))\n          .title(this.$translate('sessionTimeout'))\n          .content(this.$translate('autoLogoutMessage'))\n          .ariaLabel(this.$translate('sessionTimeout'))\n          .ok(this.$translate('yes'))\n          .cancel(this.$translate('no'));\n      this.$mdDialog.show(confirm).then(() => {\n        this.SessionService.renewSession();\n      }, () => {\n        this.SessionService.forceLogOut();\n      });\n    });\n\n    // alert user when they're inactive for a long time\n    this.$scope.$on('showRequestLogout', (ev) => {\n      let alert = this.$mdDialog.confirm()\n          .parent(angular.element(document.body))\n          .title(this.$translate('serverUpdate'))\n          .textContent(this.$translate('serverUpdateRequestLogoutMessage'))\n          .ariaLabel(this.$translate('serverUpdate'))\n          .targetEvent(ev)\n          .ok(this.$translate('ok'));\n\n      this.$mdDialog.show(alert).then(() => {\n        // do nothing\n      }, () => {\n        // do nothing\n      });\n    });\n\n    /*\n     * Listen for the savingProject event which means the authoring tool\n     * is in the process of saving the project and display this information\n     * globally.\n     */\n    this.$scope.$on('savingProject', () => {\n      this.setGlobalMessage(this.$translate('saving'), null);\n    });\n\n    /*\n     * Listen for the projectSaved event which means the project has just\n     * been saved to the server\n     */\n    this.$scope.$on('projectSaved', () => {\n\n      /*\n       * Wait half a second before changing the message to 'Saved' so that\n       * the 'Saving...' message stays up long enough for the author to\n       * see that the project is saving. If we don't perform this wait,\n       * it will always say 'Saved' and authors may wonder whether the\n       * project ever gets saved.\n       */\n      this.$timeout(() => {\n        this.setGlobalMessage(this.$translate('SAVED'), new Date().getTime());\n      }, 500);\n    });\n\n    /*\n     * Open the asset chooser to let the author insert an asset into the\n     * specified target\n     */\n    this.$scope.$on('openAssetChooser', (event, params) => {\n      // create the params for opening the asset chooser\n      const stateParams = {\n          isPopup: params.isPopup,\n          projectId: params.projectId,\n          nodeId: params.nodeId,\n          componentId: params.componentId,\n          target: params.target,\n          targetObject: params.targetObject\n      };\n\n      // open the dialog that will display the assets for the user to choose\n      this.$mdDialog.show({\n          templateUrl: 'wise5/authoringTool/asset/asset.html',\n          controller: 'ProjectAssetController',\n          controllerAs: 'projectAssetController',\n          $stateParams: stateParams,\n          clickOutsideToClose: true,\n          escapeToClose: true\n      });\n    });\n\n    /*\n     * Open the asset chooser to let the author insert an WISE Link into the\n     * specified target\n     */\n    this.$scope.$on('openWISELinkChooser', (event, params) => {\n      // create the params for opening the WISE Link authoring popup\n      const stateParams = {\n          projectId: params.projectId,\n          nodeId: params.nodeId,\n          componentId: params.componentId,\n          target: params.target\n      };\n\n      // open the WISE Link authoring popup\n      this.$mdDialog.show({\n          templateUrl: 'wise5/authoringTool/wiseLink/wiseLinkAuthoring.html',\n          controller: 'WISELinkAuthoringController',\n          controllerAs: 'wiseLinkAuthoringController',\n          $stateParams: stateParams,\n          clickOutsideToClose: true,\n          escapeToClose: true\n      });\n    });\n\n    this.$rootScope.$on('$stateChangeSuccess',\n        (event, toState, toParams, fromState, fromParams) => {\n      if (toState != null && toState.name == 'root.main') {\n        this.saveEvent('projectListViewed', 'Navigation');\n      }\n    });\n\n    if (this.$state.current.name == 'root.main') {\n      this.saveEvent('projectListViewed', 'Navigation');\n    }\n  }\n\n  /**\n   * Update UI items based on state, show or hide relevant menus and toolbars\n   * TODO: remove/rework this and put items in their own ui states?\n   */\n  processUI() {\n    // scroll to the top of the page\n    this.$anchorScroll('top');\n\n    // set current view and whether to show the toolbars and step tools\n    this.showStepTools = this.$state.$current.name === 'root.project' ||\n        this.$state.$current.name === 'root.project.node' ||\n        this.$state.$current.name === 'root.project.nodeConstraints' ||\n      this.$state.$current.name === 'root.project.nodeEditPaths';\n    const view = this.views[this.$state.$current.name];\n    if (view) {\n      this.currentViewName = view.name;\n      this.showToolbar = view.showToolbar;\n    } else {\n      this.currentViewName = '';\n      this.showToolbar = false;\n    }\n\n    this.projectId = this.ConfigService.getProjectId();\n    this.runId = this.ConfigService.getRunId();\n\n    if (this.projectId) {\n      this.projectTitle = this.ProjectService.getProjectTitle();\n    } else {\n      this.projectTitle = null;\n    }\n  }\n\n  /**\n   * Navigate the user to the My Projects page in the Authoring Tool\n   */\n  goToMyProjects() {\n    this.$location.url('/author');\n  }\n\n  /**\n   * Toggle the authoring tool main menu\n   */\n  toggleMenu() {\n    this.isMenuOpen = !this.isMenuOpen;\n  }\n\n  /**\n   * Notify Session to renew when user moves the mouse\n   */\n  mouseMoved() {\n    this.SessionService.mouseMoved();\n  }\n\n  exit() {\n    this.ProjectService.notifyAuthorProjectEnd().then(() => {\n      let wiseBaseURL = this.ConfigService.getWISEBaseURL();\n      window.location = wiseBaseURL + '/teacher';\n    });\n  }\n\n  /**\n   * Set the global message at the top right\n   * @param message the message to display\n   * @param time the time to display\n   */\n  setGlobalMessage(message, time) {\n    this.globalMessage.text = message;\n    this.globalMessage.time = time;\n  };\n\n  /**\n   * Save an Authoring Tool event\n   * @param eventName the name of the event\n   * @param category the category of the event\n   * example 'Navigation' or 'Authoring'\n   */\n  saveEvent(eventName, category) {\n    let context = 'AuthoringTool';\n    let nodeId = null;\n    let componentId = null;\n    let componentType = null;\n    let data = {};\n\n    this.TeacherDataService.saveEvent(context, nodeId, componentId,\n        componentType, category, eventName, data);\n  }\n}\n\nAuthoringToolController.$inject = [\n  '$anchorScroll',\n  '$filter',\n  '$location',\n  '$mdDialog',\n  '$rootScope',\n  '$scope',\n  '$state',\n  '$timeout',\n  'ConfigService',\n  'ProjectService',\n  'SessionService',\n  'TeacherDataService',\n  'moment'\n];\n\nexport default AuthoringToolController;\n"]}